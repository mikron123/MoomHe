var $C=Object.defineProperty;var zC=(t,e,n)=>e in t?$C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mv=(t,e,n)=>(zC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var U$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H1={exports:{}},Op={},W1={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),GC=Symbol.for("react.portal"),HC=Symbol.for("react.fragment"),WC=Symbol.for("react.strict_mode"),KC=Symbol.for("react.profiler"),QC=Symbol.for("react.provider"),YC=Symbol.for("react.context"),JC=Symbol.for("react.forward_ref"),XC=Symbol.for("react.suspense"),ZC=Symbol.for("react.memo"),eN=Symbol.for("react.lazy"),Fv=Symbol.iterator;function tN(t){return t===null||typeof t!="object"?null:(t=Fv&&t[Fv]||t["@@iterator"],typeof t=="function"?t:null)}var K1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q1=Object.assign,Y1={};function Ql(t,e,n){this.props=t,this.context=e,this.refs=Y1,this.updater=n||K1}Ql.prototype.isReactComponent={};Ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function J1(){}J1.prototype=Ql.prototype;function W_(t,e,n){this.props=t,this.context=e,this.refs=Y1,this.updater=n||K1}var K_=W_.prototype=new J1;K_.constructor=W_;Q1(K_,Ql.prototype);K_.isPureReactComponent=!0;var jv=Array.isArray,X1=Object.prototype.hasOwnProperty,Q_={current:null},Z1={key:!0,ref:!0,__self:!0,__source:!0};function eb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)X1.call(e,r)&&!Z1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wd,type:t,key:s,ref:o,props:i,_owner:Q_.current}}function nN(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Y_(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function rN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uv=/\/+/g;function tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rN(""+t.key):e.toString(36)}function tf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wd:case GC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+tg(o,0):r,jv(i)?(n="",t!=null&&(n=t.replace(Uv,"$&/")+"/"),tf(i,e,n,"",function(u){return u})):i!=null&&(Y_(i)&&(i=nN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",jv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+tg(s,a);o+=tf(s,e,n,l,i)}else if(l=tN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+tg(s,a++),o+=tf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Th(t,e,n){if(t==null)return t;var r=[],i=0;return tf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},nf={transition:null},sN={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:nf,ReactCurrentOwner:Q_};function tb(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Th,forEach:function(t,e,n){Th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Th(t,function(){e++}),e},toArray:function(t){return Th(t,function(e){return e})||[]},only:function(t){if(!Y_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ql;ye.Fragment=HC;ye.Profiler=KC;ye.PureComponent=W_;ye.StrictMode=WC;ye.Suspense=XC;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sN;ye.act=tb;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Q_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)X1.call(e,l)&&!Z1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:wd,type:t.type,key:i,ref:s,props:r,_owner:o}};ye.createContext=function(t){return t={$$typeof:YC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QC,_context:t},t.Consumer=t};ye.createElement=eb;ye.createFactory=function(t){var e=eb.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:JC,render:t}};ye.isValidElement=Y_;ye.lazy=function(t){return{$$typeof:eN,_payload:{_status:-1,_result:t},_init:iN}};ye.memo=function(t,e){return{$$typeof:ZC,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=nf.transition;nf.transition={};try{t()}finally{nf.transition=e}};ye.unstable_act=tb;ye.useCallback=function(t,e){return cn.current.useCallback(t,e)};ye.useContext=function(t){return cn.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};ye.useEffect=function(t,e){return cn.current.useEffect(t,e)};ye.useId=function(){return cn.current.useId()};ye.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return cn.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};ye.useRef=function(t){return cn.current.useRef(t)};ye.useState=function(t){return cn.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return cn.current.useTransition()};ye.version="18.3.1";W1.exports=ye;var q=W1.exports;const oN=qC(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN=q,lN=Symbol.for("react.element"),cN=Symbol.for("react.fragment"),uN=Object.prototype.hasOwnProperty,dN=aN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hN={key:!0,ref:!0,__self:!0,__source:!0};function nb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uN.call(e,r)&&!hN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lN,type:t,key:s,ref:o,props:i,_owner:dN.current}}Op.Fragment=cN;Op.jsx=nb;Op.jsxs=nb;H1.exports=Op;var p=H1.exports,ay={},rb={exports:{}},Qn={},ib={exports:{}},sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,oe){var se=Y.length;Y.push(oe);e:for(;0<se;){var Te=se-1>>>1,J=Y[Te];if(0<i(J,oe))Y[Te]=oe,Y[se]=J,se=Te;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var oe=Y[0],se=Y.pop();if(se!==oe){Y[0]=se;e:for(var Te=0,J=Y.length,Me=J>>>1;Te<Me;){var _t=2*(Te+1)-1,Sn=Y[_t],dn=_t+1,Nt=Y[dn];if(0>i(Sn,se))dn<J&&0>i(Nt,Sn)?(Y[Te]=Nt,Y[dn]=se,Te=dn):(Y[Te]=Sn,Y[_t]=se,Te=_t);else if(dn<J&&0>i(Nt,se))Y[Te]=Nt,Y[dn]=se,Te=dn;else break e}}return oe}function i(Y,oe){var se=Y.sortIndex-oe.sortIndex;return se!==0?se:Y.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,m=3,y=!1,I=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Y){for(var oe=n(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=Y)r(u),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(u)}}function P(Y){if(S=!1,b(Y),!I)if(n(l)!==null)I=!0,Zn(U);else{var oe=n(u);oe!==null&&tn(P,oe.startTime-Y)}}function U(Y,oe){I=!1,S&&(S=!1,E(w),w=-1),y=!0;var se=m;try{for(b(oe),h=n(l);h!==null&&(!(h.expirationTime>oe)||Y&&!C());){var Te=h.callback;if(typeof Te=="function"){h.callback=null,m=h.priorityLevel;var J=Te(h.expirationTime<=oe);oe=t.unstable_now(),typeof J=="function"?h.callback=J:h===n(l)&&r(l),b(oe)}else r(l);h=n(l)}if(h!==null)var Me=!0;else{var _t=n(u);_t!==null&&tn(P,_t.startTime-oe),Me=!1}return Me}finally{h=null,m=se,y=!1}}var z=!1,T=null,w=-1,x=5,k=-1;function C(){return!(t.unstable_now()-k<x)}function L(){if(T!==null){var Y=t.unstable_now();k=Y;var oe=!0;try{oe=T(!0,Y)}finally{oe?R():(z=!1,T=null)}}else z=!1}var R;if(typeof v=="function")R=function(){v(L)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Xn=$t.port2;$t.port1.onmessage=L,R=function(){Xn.postMessage(null)}}else R=function(){N(L,0)};function Zn(Y){T=Y,z||(z=!0,R())}function tn(Y,oe){w=N(function(){Y(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Zn(U))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var se=m;m=oe;try{return Y()}finally{m=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,oe){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=m;m=Y;try{return oe()}finally{m=se}},t.unstable_scheduleCallback=function(Y,oe,se){var Te=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Te+se:Te):se=Te,Y){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=se+J,Y={id:d++,callback:oe,priorityLevel:Y,startTime:se,expirationTime:J,sortIndex:-1},se>Te?(Y.sortIndex=se,e(u,Y),n(l)===null&&Y===n(u)&&(S?(E(w),w=-1):S=!0,tn(P,se-Te))):(Y.sortIndex=J,e(l,Y),I||y||(I=!0,Zn(U))),Y},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(Y){var oe=m;return function(){var se=m;m=oe;try{return Y.apply(this,arguments)}finally{m=se}}}})(sb);ib.exports=sb;var fN=ib.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=q,Hn=fN;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ob=new Set,ku={};function Jo(t,e){vl(t,e),vl(t+"Capture",e)}function vl(t,e){for(ku[t]=e,t=0;t<e.length;t++)ob.add(e[t])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ly=Object.prototype.hasOwnProperty,mN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bv={},$v={};function gN(t){return ly.call($v,t)?!0:ly.call(Bv,t)?!1:mN.test(t)?$v[t]=!0:(Bv[t]=!0,!1)}function yN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _N(t,e,n,r){if(e===null||typeof e>"u"||yN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var J_=/[\-:]([a-z])/g;function X_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(J_,X_);Bt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(J_,X_);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(J_,X_);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Z_(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_N(e,n,i,r)&&(n=null),r||i===null?gN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ni=pN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bh=Symbol.for("react.element"),Ya=Symbol.for("react.portal"),Ja=Symbol.for("react.fragment"),e0=Symbol.for("react.strict_mode"),cy=Symbol.for("react.profiler"),ab=Symbol.for("react.provider"),lb=Symbol.for("react.context"),t0=Symbol.for("react.forward_ref"),uy=Symbol.for("react.suspense"),dy=Symbol.for("react.suspense_list"),n0=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),cb=Symbol.for("react.offscreen"),zv=Symbol.iterator;function Cc(t){return t===null||typeof t!="object"?null:(t=zv&&t[zv]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,ng;function Wc(t){if(ng===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ng=e&&e[1]||""}return`
`+ng+t}var rg=!1;function ig(t,e){if(!t||rg)return"";rg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{rg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wc(t):""}function wN(t){switch(t.tag){case 5:return Wc(t.type);case 16:return Wc("Lazy");case 13:return Wc("Suspense");case 19:return Wc("SuspenseList");case 0:case 2:case 15:return t=ig(t.type,!1),t;case 11:return t=ig(t.type.render,!1),t;case 1:return t=ig(t.type,!0),t;default:return""}}function hy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ja:return"Fragment";case Ya:return"Portal";case cy:return"Profiler";case e0:return"StrictMode";case uy:return"Suspense";case dy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lb:return(t.displayName||"Context")+".Consumer";case ab:return(t._context.displayName||"Context")+".Provider";case t0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case n0:return e=t.displayName||null,e!==null?e:hy(t.type)||"Memo";case Zi:e=t._payload,t=t._init;try{return hy(t(e))}catch{}}return null}function vN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hy(e);case 8:return e===e0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ps(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ub(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IN(t){var e=ub(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xh(t){t._valueTracker||(t._valueTracker=IN(t))}function db(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ub(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Mf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fy(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ps(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hb(t,e){e=e.checked,e!=null&&Z_(t,"checked",e,!1)}function py(t,e){hb(t,e);var n=Ps(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?my(t,e.type,n):e.hasOwnProperty("defaultValue")&&my(t,e.type,Ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function my(t,e,n){(e!=="number"||Mf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kc=Array.isArray;function ll(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ps(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Kc(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ps(n)}}function fb(t,e){var n=Ps(e.value),r=Ps(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ah,mb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ah=Ah||document.createElement("div"),Ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EN=["Webkit","ms","Moz","O"];Object.keys(iu).forEach(function(t){EN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),iu[e]=iu[t]})});function gb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||iu.hasOwnProperty(t)&&iu[t]?(""+e).trim():e+"px"}function yb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var TN=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _y(t,e){if(e){if(TN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function wy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vy=null;function r0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iy=null,cl=null,ul=null;function Kv(t){if(t=Ed(t)){if(typeof Iy!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Up(e),Iy(t.stateNode,t.type,e))}}function _b(t){cl?ul?ul.push(t):ul=[t]:cl=t}function wb(){if(cl){var t=cl,e=ul;if(ul=cl=null,Kv(t),e)for(t=0;t<e.length;t++)Kv(e[t])}}function vb(t,e){return t(e)}function Ib(){}var sg=!1;function Eb(t,e,n){if(sg)return t(e,n);sg=!0;try{return vb(t,e,n)}finally{sg=!1,(cl!==null||ul!==null)&&(Ib(),wb())}}function Cu(t,e){var n=t.stateNode;if(n===null)return null;var r=Up(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Ey=!1;if(Ei)try{var Nc={};Object.defineProperty(Nc,"passive",{get:function(){Ey=!0}}),window.addEventListener("test",Nc,Nc),window.removeEventListener("test",Nc,Nc)}catch{Ey=!1}function bN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var su=!1,Ff=null,jf=!1,Ty=null,xN={onError:function(t){su=!0,Ff=t}};function AN(t,e,n,r,i,s,o,a,l){su=!1,Ff=null,bN.apply(xN,arguments)}function SN(t,e,n,r,i,s,o,a,l){if(AN.apply(this,arguments),su){if(su){var u=Ff;su=!1,Ff=null}else throw Error(G(198));jf||(jf=!0,Ty=u)}}function Xo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qv(t){if(Xo(t)!==t)throw Error(G(188))}function RN(t){var e=t.alternate;if(!e){if(e=Xo(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Qv(i),t;if(s===r)return Qv(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function bb(t){return t=RN(t),t!==null?xb(t):null}function xb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xb(t);if(e!==null)return e;t=t.sibling}return null}var Ab=Hn.unstable_scheduleCallback,Yv=Hn.unstable_cancelCallback,kN=Hn.unstable_shouldYield,PN=Hn.unstable_requestPaint,ut=Hn.unstable_now,CN=Hn.unstable_getCurrentPriorityLevel,i0=Hn.unstable_ImmediatePriority,Sb=Hn.unstable_UserBlockingPriority,Uf=Hn.unstable_NormalPriority,NN=Hn.unstable_LowPriority,Rb=Hn.unstable_IdlePriority,Vp=null,Xr=null;function DN(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Vp,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:VN,LN=Math.log,ON=Math.LN2;function VN(t){return t>>>=0,t===0?32:31-(LN(t)/ON|0)|0}var Sh=64,Rh=4194304;function Qc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qc(a):(s&=o,s!==0&&(r=Qc(s)))}else o=n&~i,o!==0?r=Qc(o):s!==0&&(r=Qc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sr(e),i=1<<n,r|=t[n],e&=~i;return r}function MN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=MN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function by(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kb(){var t=Sh;return Sh<<=1,!(Sh&4194240)&&(Sh=64),t}function og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=n}function jN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function s0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function Pb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cb,o0,Nb,Db,Lb,xy=!1,kh=[],ys=null,_s=null,ws=null,Nu=new Map,Du=new Map,rs=[],UN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jv(t,e){switch(t){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":Nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(e.pointerId)}}function Dc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ed(e),e!==null&&o0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BN(t,e,n,r,i){switch(e){case"focusin":return ys=Dc(ys,t,e,n,r,i),!0;case"dragenter":return _s=Dc(_s,t,e,n,r,i),!0;case"mouseover":return ws=Dc(ws,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nu.set(s,Dc(Nu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Du.set(s,Dc(Du.get(s)||null,t,e,n,r,i)),!0}return!1}function Ob(t){var e=wo(t.target);if(e!==null){var n=Xo(e);if(n!==null){if(e=n.tag,e===13){if(e=Tb(n),e!==null){t.blockedOn=e,Lb(t.priority,function(){Nb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ay(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vy=r,n.target.dispatchEvent(r),vy=null}else return e=Ed(n),e!==null&&o0(e),t.blockedOn=n,!1;e.shift()}return!0}function Xv(t,e,n){rf(t)&&n.delete(e)}function $N(){xy=!1,ys!==null&&rf(ys)&&(ys=null),_s!==null&&rf(_s)&&(_s=null),ws!==null&&rf(ws)&&(ws=null),Nu.forEach(Xv),Du.forEach(Xv)}function Lc(t,e){t.blockedOn===e&&(t.blockedOn=null,xy||(xy=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,$N)))}function Lu(t){function e(i){return Lc(i,t)}if(0<kh.length){Lc(kh[0],t);for(var n=1;n<kh.length;n++){var r=kh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ys!==null&&Lc(ys,t),_s!==null&&Lc(_s,t),ws!==null&&Lc(ws,t),Nu.forEach(e),Du.forEach(e),n=0;n<rs.length;n++)r=rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rs.length&&(n=rs[0],n.blockedOn===null);)Ob(n),n.blockedOn===null&&rs.shift()}var dl=Ni.ReactCurrentBatchConfig,$f=!0;function zN(t,e,n,r){var i=ke,s=dl.transition;dl.transition=null;try{ke=1,a0(t,e,n,r)}finally{ke=i,dl.transition=s}}function qN(t,e,n,r){var i=ke,s=dl.transition;dl.transition=null;try{ke=4,a0(t,e,n,r)}finally{ke=i,dl.transition=s}}function a0(t,e,n,r){if($f){var i=Ay(t,e,n,r);if(i===null)gg(t,e,r,zf,n),Jv(t,r);else if(BN(i,t,e,n,r))r.stopPropagation();else if(Jv(t,r),e&4&&-1<UN.indexOf(t)){for(;i!==null;){var s=Ed(i);if(s!==null&&Cb(s),s=Ay(t,e,n,r),s===null&&gg(t,e,r,zf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gg(t,e,r,null,n)}}var zf=null;function Ay(t,e,n,r){if(zf=null,t=r0(r),t=wo(t),t!==null)if(e=Xo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zf=t,null}function Vb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CN()){case i0:return 1;case Sb:return 4;case Uf:case NN:return 16;case Rb:return 536870912;default:return 16}default:return 16}}var hs=null,l0=null,sf=null;function Mb(){if(sf)return sf;var t,e=l0,n=e.length,r,i="value"in hs?hs.value:hs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return sf=i.slice(t,1<r?1-r:void 0)}function of(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ph(){return!0}function Zv(){return!1}function Yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ph:Zv,this.isPropagationStopped=Zv,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ph)},persist:function(){},isPersistent:Ph}),e}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c0=Yn(Yl),Id=Ze({},Yl,{view:0,detail:0}),GN=Yn(Id),ag,lg,Oc,Mp=Ze({},Id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oc&&(Oc&&t.type==="mousemove"?(ag=t.screenX-Oc.screenX,lg=t.screenY-Oc.screenY):lg=ag=0,Oc=t),ag)},movementY:function(t){return"movementY"in t?t.movementY:lg}}),eI=Yn(Mp),HN=Ze({},Mp,{dataTransfer:0}),WN=Yn(HN),KN=Ze({},Id,{relatedTarget:0}),cg=Yn(KN),QN=Ze({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),YN=Yn(QN),JN=Ze({},Yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XN=Yn(JN),ZN=Ze({},Yl,{data:0}),tI=Yn(ZN),e2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n2[t])?!!e[t]:!1}function u0(){return r2}var i2=Ze({},Id,{key:function(t){if(t.key){var e=e2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=of(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u0,charCode:function(t){return t.type==="keypress"?of(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?of(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=Yn(i2),o2=Ze({},Mp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nI=Yn(o2),a2=Ze({},Id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u0}),l2=Yn(a2),c2=Ze({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),u2=Yn(c2),d2=Ze({},Mp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),h2=Yn(d2),f2=[9,13,27,32],d0=Ei&&"CompositionEvent"in window,ou=null;Ei&&"documentMode"in document&&(ou=document.documentMode);var p2=Ei&&"TextEvent"in window&&!ou,Fb=Ei&&(!d0||ou&&8<ou&&11>=ou),rI=String.fromCharCode(32),iI=!1;function jb(t,e){switch(t){case"keyup":return f2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ub(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xa=!1;function m2(t,e){switch(t){case"compositionend":return Ub(e);case"keypress":return e.which!==32?null:(iI=!0,rI);case"textInput":return t=e.data,t===rI&&iI?null:t;default:return null}}function g2(t,e){if(Xa)return t==="compositionend"||!d0&&jb(t,e)?(t=Mb(),sf=l0=hs=null,Xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fb&&e.locale!=="ko"?null:e.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y2[t.type]:e==="textarea"}function Bb(t,e,n,r){_b(r),e=qf(e,"onChange"),0<e.length&&(n=new c0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var au=null,Ou=null;function _2(t){Xb(t,0)}function Fp(t){var e=tl(t);if(db(e))return t}function w2(t,e){if(t==="change")return e}var $b=!1;if(Ei){var ug;if(Ei){var dg="oninput"in document;if(!dg){var oI=document.createElement("div");oI.setAttribute("oninput","return;"),dg=typeof oI.oninput=="function"}ug=dg}else ug=!1;$b=ug&&(!document.documentMode||9<document.documentMode)}function aI(){au&&(au.detachEvent("onpropertychange",zb),Ou=au=null)}function zb(t){if(t.propertyName==="value"&&Fp(Ou)){var e=[];Bb(e,Ou,t,r0(t)),Eb(_2,e)}}function v2(t,e,n){t==="focusin"?(aI(),au=e,Ou=n,au.attachEvent("onpropertychange",zb)):t==="focusout"&&aI()}function I2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fp(Ou)}function E2(t,e){if(t==="click")return Fp(e)}function T2(t,e){if(t==="input"||t==="change")return Fp(e)}function b2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:b2;function Vu(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ly.call(e,i)||!Pr(t[i],e[i]))return!1}return!0}function lI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cI(t,e){var n=lI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lI(n)}}function qb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gb(){for(var t=window,e=Mf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Mf(t.document)}return e}function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function x2(t){var e=Gb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qb(n.ownerDocument.documentElement,n)){if(r!==null&&h0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cI(n,s);var o=cI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A2=Ei&&"documentMode"in document&&11>=document.documentMode,Za=null,Sy=null,lu=null,Ry=!1;function uI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ry||Za==null||Za!==Mf(r)||(r=Za,"selectionStart"in r&&h0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lu&&Vu(lu,r)||(lu=r,r=qf(Sy,"onSelect"),0<r.length&&(e=new c0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Za)))}function Ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var el={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},hg={},Hb={};Ei&&(Hb=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function jp(t){if(hg[t])return hg[t];if(!el[t])return t;var e=el[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hb)return hg[t]=e[n];return t}var Wb=jp("animationend"),Kb=jp("animationiteration"),Qb=jp("animationstart"),Yb=jp("transitionend"),Jb=new Map,dI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(t,e){Jb.set(t,e),Jo(e,[t])}for(var fg=0;fg<dI.length;fg++){var pg=dI[fg],S2=pg.toLowerCase(),R2=pg[0].toUpperCase()+pg.slice(1);js(S2,"on"+R2)}js(Wb,"onAnimationEnd");js(Kb,"onAnimationIteration");js(Qb,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(Yb,"onTransitionEnd");vl("onMouseEnter",["mouseout","mouseover"]);vl("onMouseLeave",["mouseout","mouseover"]);vl("onPointerEnter",["pointerout","pointerover"]);vl("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yc));function hI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SN(r,e,void 0,t),t.currentTarget=null}function Xb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hI(i,a,u),s=l}}}if(jf)throw t=Ty,jf=!1,Ty=null,t}function je(t,e){var n=e[Dy];n===void 0&&(n=e[Dy]=new Set);var r=t+"__bubble";n.has(r)||(Zb(e,t,2,!1),n.add(r))}function mg(t,e,n){var r=0;e&&(r|=4),Zb(n,t,r,e)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Mu(t){if(!t[Nh]){t[Nh]=!0,ob.forEach(function(n){n!=="selectionchange"&&(k2.has(n)||mg(n,!1,t),mg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nh]||(e[Nh]=!0,mg("selectionchange",!1,e))}}function Zb(t,e,n,r){switch(Vb(e)){case 1:var i=zN;break;case 4:i=qN;break;default:i=a0}n=i.bind(null,e,n,t),i=void 0,!Ey||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Eb(function(){var u=s,d=r0(n),h=[];e:{var m=Jb.get(t);if(m!==void 0){var y=c0,I=t;switch(t){case"keypress":if(of(n)===0)break e;case"keydown":case"keyup":y=s2;break;case"focusin":I="focus",y=cg;break;case"focusout":I="blur",y=cg;break;case"beforeblur":case"afterblur":y=cg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=eI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=WN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=l2;break;case Wb:case Kb:case Qb:y=YN;break;case Yb:y=u2;break;case"scroll":y=GN;break;case"wheel":y=h2;break;case"copy":case"cut":case"paste":y=XN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=nI}var S=(e&4)!==0,N=!S&&t==="scroll",E=S?m!==null?m+"Capture":null:m;S=[];for(var v=u,b;v!==null;){b=v;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,E!==null&&(P=Cu(v,E),P!=null&&S.push(Fu(v,P,b)))),N)break;v=v.return}0<S.length&&(m=new y(m,I,null,n,d),h.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==vy&&(I=n.relatedTarget||n.fromElement)&&(wo(I)||I[Ti]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=u,I=I?wo(I):null,I!==null&&(N=Xo(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=u),y!==I)){if(S=eI,P="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=nI,P="onPointerLeave",E="onPointerEnter",v="pointer"),N=y==null?m:tl(y),b=I==null?m:tl(I),m=new S(P,v+"leave",y,n,d),m.target=N,m.relatedTarget=b,P=null,wo(d)===u&&(S=new S(E,v+"enter",I,n,d),S.target=b,S.relatedTarget=N,P=S),N=P,y&&I)t:{for(S=y,E=I,v=0,b=S;b;b=Na(b))v++;for(b=0,P=E;P;P=Na(P))b++;for(;0<v-b;)S=Na(S),v--;for(;0<b-v;)E=Na(E),b--;for(;v--;){if(S===E||E!==null&&S===E.alternate)break t;S=Na(S),E=Na(E)}S=null}else S=null;y!==null&&fI(h,m,y,S,!1),I!==null&&N!==null&&fI(h,N,I,S,!0)}}e:{if(m=u?tl(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=w2;else if(sI(m))if($b)U=T2;else{U=I2;var z=v2}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=E2);if(U&&(U=U(t,u))){Bb(h,U,n,d);break e}z&&z(t,m,u),t==="focusout"&&(z=m._wrapperState)&&z.controlled&&m.type==="number"&&my(m,"number",m.value)}switch(z=u?tl(u):window,t){case"focusin":(sI(z)||z.contentEditable==="true")&&(Za=z,Sy=u,lu=null);break;case"focusout":lu=Sy=Za=null;break;case"mousedown":Ry=!0;break;case"contextmenu":case"mouseup":case"dragend":Ry=!1,uI(h,n,d);break;case"selectionchange":if(A2)break;case"keydown":case"keyup":uI(h,n,d)}var T;if(d0)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Xa?jb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Fb&&n.locale!=="ko"&&(Xa||w!=="onCompositionStart"?w==="onCompositionEnd"&&Xa&&(T=Mb()):(hs=d,l0="value"in hs?hs.value:hs.textContent,Xa=!0)),z=qf(u,w),0<z.length&&(w=new tI(w,t,null,n,d),h.push({event:w,listeners:z}),T?w.data=T:(T=Ub(n),T!==null&&(w.data=T)))),(T=p2?m2(t,n):g2(t,n))&&(u=qf(u,"onBeforeInput"),0<u.length&&(d=new tI("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}Xb(h,e)})}function Fu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cu(t,n),s!=null&&r.unshift(Fu(t,s,i)),s=Cu(t,e),s!=null&&r.push(Fu(t,s,i))),t=t.return}return r}function Na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cu(n,s),l!=null&&o.unshift(Fu(n,l,a))):i||(l=Cu(n,s),l!=null&&o.push(Fu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var P2=/\r\n?/g,C2=/\u0000|\uFFFD/g;function pI(t){return(typeof t=="string"?t:""+t).replace(P2,`
`).replace(C2,"")}function Dh(t,e,n){if(e=pI(e),pI(t)!==e&&n)throw Error(G(425))}function Gf(){}var ky=null,Py=null;function Cy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ny=typeof setTimeout=="function"?setTimeout:void 0,N2=typeof clearTimeout=="function"?clearTimeout:void 0,mI=typeof Promise=="function"?Promise:void 0,D2=typeof queueMicrotask=="function"?queueMicrotask:typeof mI<"u"?function(t){return mI.resolve(null).then(t).catch(L2)}:Ny;function L2(t){setTimeout(function(){throw t})}function yg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Lu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Lu(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Jl,ju="__reactProps$"+Jl,Ti="__reactContainer$"+Jl,Dy="__reactEvents$"+Jl,O2="__reactListeners$"+Jl,V2="__reactHandles$"+Jl;function wo(t){var e=t[Wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gI(t);t!==null;){if(n=t[Wr])return n;t=gI(t)}return e}t=n,n=t.parentNode}return null}function Ed(t){return t=t[Wr]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Up(t){return t[ju]||null}var Ly=[],nl=-1;function Us(t){return{current:t}}function $e(t){0>nl||(t.current=Ly[nl],Ly[nl]=null,nl--)}function Oe(t,e){nl++,Ly[nl]=t.current,t.current=e}var Cs={},en=Us(Cs),En=Us(!1),Do=Cs;function Il(t,e){var n=t.type.contextTypes;if(!n)return Cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tn(t){return t=t.childContextTypes,t!=null}function Hf(){$e(En),$e(en)}function yI(t,e,n){if(en.current!==Cs)throw Error(G(168));Oe(en,e),Oe(En,n)}function ex(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,vN(t)||"Unknown",i));return Ze({},n,r)}function Wf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,Do=en.current,Oe(en,t),Oe(En,En.current),!0}function _I(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=ex(t,e,Do),r.__reactInternalMemoizedMergedChildContext=t,$e(En),$e(en),Oe(en,t)):$e(En),Oe(En,n)}var fi=null,Bp=!1,_g=!1;function tx(t){fi===null?fi=[t]:fi.push(t)}function M2(t){Bp=!0,tx(t)}function Bs(){if(!_g&&fi!==null){_g=!0;var t=0,e=ke;try{var n=fi;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fi=null,Bp=!1}catch(i){throw fi!==null&&(fi=fi.slice(t+1)),Ab(i0,Bs),i}finally{ke=e,_g=!1}}return null}var rl=[],il=0,Kf=null,Qf=0,rr=[],ir=0,Lo=null,mi=1,gi="";function ao(t,e){rl[il++]=Qf,rl[il++]=Kf,Kf=t,Qf=e}function nx(t,e,n){rr[ir++]=mi,rr[ir++]=gi,rr[ir++]=Lo,Lo=t;var r=mi;t=gi;var i=32-Sr(r)-1;r&=~(1<<i),n+=1;var s=32-Sr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,mi=1<<32-Sr(e)+i|n<<i|r,gi=s+t}else mi=1<<s|n<<i|r,gi=t}function f0(t){t.return!==null&&(ao(t,1),nx(t,1,0))}function p0(t){for(;t===Kf;)Kf=rl[--il],rl[il]=null,Qf=rl[--il],rl[il]=null;for(;t===Lo;)Lo=rr[--ir],rr[ir]=null,gi=rr[--ir],rr[ir]=null,mi=rr[--ir],rr[ir]=null}var $n=null,jn=null,Ke=!1,br=null;function rx(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$n=t,jn=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$n=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lo!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$n=t,jn=null,!0):!1;default:return!1}}function Oy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vy(t){if(Ke){var e=jn;if(e){var n=e;if(!wI(t,e)){if(Oy(t))throw Error(G(418));e=vs(n.nextSibling);var r=$n;e&&wI(t,e)?rx(r,n):(t.flags=t.flags&-4097|2,Ke=!1,$n=t)}}else{if(Oy(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ke=!1,$n=t}}}function vI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function Lh(t){if(t!==$n)return!1;if(!Ke)return vI(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cy(t.type,t.memoizedProps)),e&&(e=jn)){if(Oy(t))throw ix(),Error(G(418));for(;e;)rx(t,e),e=vs(e.nextSibling)}if(vI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=$n?vs(t.stateNode.nextSibling):null;return!0}function ix(){for(var t=jn;t;)t=vs(t.nextSibling)}function El(){jn=$n=null,Ke=!1}function m0(t){br===null?br=[t]:br.push(t)}var F2=Ni.ReactCurrentBatchConfig;function Vc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function II(t){var e=t._init;return e(t._payload)}function sx(t){function e(E,v){if(t){var b=E.deletions;b===null?(E.deletions=[v],E.flags|=16):b.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=bs(E,v),E.index=0,E.sibling=null,E}function s(E,v,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<v?(E.flags|=2,v):b):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,b,P){return v===null||v.tag!==6?(v=xg(b,E.mode,P),v.return=E,v):(v=i(v,b),v.return=E,v)}function l(E,v,b,P){var U=b.type;return U===Ja?d(E,v,b.props.children,P,b.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Zi&&II(U)===v.type)?(P=i(v,b.props),P.ref=Vc(E,v,b),P.return=E,P):(P=ff(b.type,b.key,b.props,null,E.mode,P),P.ref=Vc(E,v,b),P.return=E,P)}function u(E,v,b,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Ag(b,E.mode,P),v.return=E,v):(v=i(v,b.children||[]),v.return=E,v)}function d(E,v,b,P,U){return v===null||v.tag!==7?(v=So(b,E.mode,P,U),v.return=E,v):(v=i(v,b),v.return=E,v)}function h(E,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xg(""+v,E.mode,b),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bh:return b=ff(v.type,v.key,v.props,null,E.mode,b),b.ref=Vc(E,null,v),b.return=E,b;case Ya:return v=Ag(v,E.mode,b),v.return=E,v;case Zi:var P=v._init;return h(E,P(v._payload),b)}if(Kc(v)||Cc(v))return v=So(v,E.mode,b,null),v.return=E,v;Oh(E,v)}return null}function m(E,v,b,P){var U=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return U!==null?null:a(E,v,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bh:return b.key===U?l(E,v,b,P):null;case Ya:return b.key===U?u(E,v,b,P):null;case Zi:return U=b._init,m(E,v,U(b._payload),P)}if(Kc(b)||Cc(b))return U!==null?null:d(E,v,b,P,null);Oh(E,b)}return null}function y(E,v,b,P,U){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(b)||null,a(v,E,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case bh:return E=E.get(P.key===null?b:P.key)||null,l(v,E,P,U);case Ya:return E=E.get(P.key===null?b:P.key)||null,u(v,E,P,U);case Zi:var z=P._init;return y(E,v,b,z(P._payload),U)}if(Kc(P)||Cc(P))return E=E.get(b)||null,d(v,E,P,U,null);Oh(v,P)}return null}function I(E,v,b,P){for(var U=null,z=null,T=v,w=v=0,x=null;T!==null&&w<b.length;w++){T.index>w?(x=T,T=null):x=T.sibling;var k=m(E,T,b[w],P);if(k===null){T===null&&(T=x);break}t&&T&&k.alternate===null&&e(E,T),v=s(k,v,w),z===null?U=k:z.sibling=k,z=k,T=x}if(w===b.length)return n(E,T),Ke&&ao(E,w),U;if(T===null){for(;w<b.length;w++)T=h(E,b[w],P),T!==null&&(v=s(T,v,w),z===null?U=T:z.sibling=T,z=T);return Ke&&ao(E,w),U}for(T=r(E,T);w<b.length;w++)x=y(T,E,w,b[w],P),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?w:x.key),v=s(x,v,w),z===null?U=x:z.sibling=x,z=x);return t&&T.forEach(function(C){return e(E,C)}),Ke&&ao(E,w),U}function S(E,v,b,P){var U=Cc(b);if(typeof U!="function")throw Error(G(150));if(b=U.call(b),b==null)throw Error(G(151));for(var z=U=null,T=v,w=v=0,x=null,k=b.next();T!==null&&!k.done;w++,k=b.next()){T.index>w?(x=T,T=null):x=T.sibling;var C=m(E,T,k.value,P);if(C===null){T===null&&(T=x);break}t&&T&&C.alternate===null&&e(E,T),v=s(C,v,w),z===null?U=C:z.sibling=C,z=C,T=x}if(k.done)return n(E,T),Ke&&ao(E,w),U;if(T===null){for(;!k.done;w++,k=b.next())k=h(E,k.value,P),k!==null&&(v=s(k,v,w),z===null?U=k:z.sibling=k,z=k);return Ke&&ao(E,w),U}for(T=r(E,T);!k.done;w++,k=b.next())k=y(T,E,w,k.value,P),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?w:k.key),v=s(k,v,w),z===null?U=k:z.sibling=k,z=k);return t&&T.forEach(function(L){return e(E,L)}),Ke&&ao(E,w),U}function N(E,v,b,P){if(typeof b=="object"&&b!==null&&b.type===Ja&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bh:e:{for(var U=b.key,z=v;z!==null;){if(z.key===U){if(U=b.type,U===Ja){if(z.tag===7){n(E,z.sibling),v=i(z,b.props.children),v.return=E,E=v;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Zi&&II(U)===z.type){n(E,z.sibling),v=i(z,b.props),v.ref=Vc(E,z,b),v.return=E,E=v;break e}n(E,z);break}else e(E,z);z=z.sibling}b.type===Ja?(v=So(b.props.children,E.mode,P,b.key),v.return=E,E=v):(P=ff(b.type,b.key,b.props,null,E.mode,P),P.ref=Vc(E,v,b),P.return=E,E=P)}return o(E);case Ya:e:{for(z=b.key;v!==null;){if(v.key===z)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(E,v.sibling),v=i(v,b.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=Ag(b,E.mode,P),v.return=E,E=v}return o(E);case Zi:return z=b._init,N(E,v,z(b._payload),P)}if(Kc(b))return I(E,v,b,P);if(Cc(b))return S(E,v,b,P);Oh(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,b),v.return=E,E=v):(n(E,v),v=xg(b,E.mode,P),v.return=E,E=v),o(E)):n(E,v)}return N}var Tl=sx(!0),ox=sx(!1),Yf=Us(null),Jf=null,sl=null,g0=null;function y0(){g0=sl=Jf=null}function _0(t){var e=Yf.current;$e(Yf),t._currentValue=e}function My(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hl(t,e){Jf=t,g0=sl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(g0!==t)if(t={context:t,memoizedValue:e,next:null},sl===null){if(Jf===null)throw Error(G(308));sl=t,Jf.dependencies={lanes:0,firstContext:t}}else sl=sl.next=t;return e}var vo=null;function w0(t){vo===null?vo=[t]:vo.push(t)}function ax(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,w0(e)):(n.next=i.next,i.next=n),e.interleaved=n,bi(t,r)}function bi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function v0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bi(t,n)}return i=r.interleaved,i===null?(e.next=e,w0(r)):(e.next=i.next,i.next=e),r.interleaved=e,bi(t,n)}function af(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s0(t,n)}}function EI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xf(t,e,n,r){var i=t.updateQueue;es=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,S=a;switch(m=e,y=n,S.tag){case 1:if(I=S.payload,typeof I=="function"){h=I.call(y,h,m);break e}h=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=S.payload,m=typeof I=="function"?I.call(y,h,m):I,m==null)break e;h=Ze({},h,m);break e;case 2:es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vo|=o,t.lanes=o,t.memoizedState=h}}function TI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Td={},Zr=Us(Td),Uu=Us(Td),Bu=Us(Td);function Io(t){if(t===Td)throw Error(G(174));return t}function I0(t,e){switch(Oe(Bu,e),Oe(Uu,t),Oe(Zr,Td),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yy(e,t)}$e(Zr),Oe(Zr,e)}function bl(){$e(Zr),$e(Uu),$e(Bu)}function cx(t){Io(Bu.current);var e=Io(Zr.current),n=yy(e,t.type);e!==n&&(Oe(Uu,t),Oe(Zr,n))}function E0(t){Uu.current===t&&($e(Zr),$e(Uu))}var Je=Us(0);function Zf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wg=[];function T0(){for(var t=0;t<wg.length;t++)wg[t]._workInProgressVersionPrimary=null;wg.length=0}var lf=Ni.ReactCurrentDispatcher,vg=Ni.ReactCurrentBatchConfig,Oo=0,Xe=null,wt=null,At=null,ep=!1,cu=!1,$u=0,j2=0;function Ht(){throw Error(G(321))}function b0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function x0(t,e,n,r,i,s){if(Oo=s,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lf.current=t===null||t.memoizedState===null?z2:q2,t=n(r,i),cu){s=0;do{if(cu=!1,$u=0,25<=s)throw Error(G(301));s+=1,At=wt=null,e.updateQueue=null,lf.current=G2,t=n(r,i)}while(cu)}if(lf.current=tp,e=wt!==null&&wt.next!==null,Oo=0,At=wt=Xe=null,ep=!1,e)throw Error(G(300));return t}function A0(){var t=$u!==0;return $u=0,t}function qr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Xe.memoizedState=At=t:At=At.next=t,At}function lr(){if(wt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=At===null?Xe.memoizedState:At.next;if(e!==null)At=e,wt=t;else{if(t===null)throw Error(G(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?Xe.memoizedState=At=t:At=At.next=t}return At}function zu(t,e){return typeof e=="function"?e(t):e}function Ig(t){var e=lr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=wt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Oo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Xe.lanes|=d,Vo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Pr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Xe.lanes|=s,Vo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Eg(t){var e=lr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pr(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ux(){}function dx(t,e){var n=Xe,r=lr(),i=e(),s=!Pr(r.memoizedState,i);if(s&&(r.memoizedState=i,_n=!0),r=r.queue,S0(px.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,qu(9,fx.bind(null,n,r,i,e),void 0,null),Rt===null)throw Error(G(349));Oo&30||hx(n,e,i)}return i}function hx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fx(t,e,n,r){e.value=n,e.getSnapshot=r,mx(e)&&gx(t)}function px(t,e,n){return n(function(){mx(e)&&gx(t)})}function mx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function gx(t){var e=bi(t,1);e!==null&&Rr(e,t,1,-1)}function bI(t){var e=qr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:t},e.queue=t,t=t.dispatch=$2.bind(null,Xe,t),[e.memoizedState,t]}function qu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yx(){return lr().memoizedState}function cf(t,e,n,r){var i=qr();Xe.flags|=t,i.memoizedState=qu(1|e,n,void 0,r===void 0?null:r)}function $p(t,e,n,r){var i=lr();r=r===void 0?null:r;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,r!==null&&b0(r,o.deps)){i.memoizedState=qu(e,n,s,r);return}}Xe.flags|=t,i.memoizedState=qu(1|e,n,s,r)}function xI(t,e){return cf(8390656,8,t,e)}function S0(t,e){return $p(2048,8,t,e)}function _x(t,e){return $p(4,2,t,e)}function wx(t,e){return $p(4,4,t,e)}function vx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ix(t,e,n){return n=n!=null?n.concat([t]):null,$p(4,4,vx.bind(null,e,t),n)}function R0(){}function Ex(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tx(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bx(t,e,n){return Oo&21?(Pr(n,e)||(n=kb(),Xe.lanes|=n,Vo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function U2(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=vg.transition;vg.transition={};try{t(!1),e()}finally{ke=n,vg.transition=r}}function xx(){return lr().memoizedState}function B2(t,e,n){var r=Ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ax(t))Sx(e,n);else if(n=ax(t,e,n,r),n!==null){var i=on();Rr(n,t,r,i),Rx(n,e,r)}}function $2(t,e,n){var r=Ts(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ax(t))Sx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(i.next=i,w0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ax(t,e,i,r),n!==null&&(i=on(),Rr(n,t,r,i),Rx(n,e,r))}}function Ax(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function Sx(t,e){cu=ep=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s0(t,n)}}var tp={readContext:ar,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},z2={readContext:ar,useCallback:function(t,e){return qr().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:xI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cf(4194308,4,vx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cf(4194308,4,t,e)},useInsertionEffect:function(t,e){return cf(4,2,t,e)},useMemo:function(t,e){var n=qr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=qr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B2.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=qr();return t={current:t},e.memoizedState=t},useState:bI,useDebugValue:R0,useDeferredValue:function(t){return qr().memoizedState=t},useTransition:function(){var t=bI(!1),e=t[0];return t=U2.bind(null,t[1]),qr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=qr();if(Ke){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Rt===null)throw Error(G(349));Oo&30||hx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xI(px.bind(null,r,s,t),[t]),r.flags|=2048,qu(9,fx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=qr(),e=Rt.identifierPrefix;if(Ke){var n=gi,r=mi;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$u++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=j2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q2={readContext:ar,useCallback:Ex,useContext:ar,useEffect:S0,useImperativeHandle:Ix,useInsertionEffect:_x,useLayoutEffect:wx,useMemo:Tx,useReducer:Ig,useRef:yx,useState:function(){return Ig(zu)},useDebugValue:R0,useDeferredValue:function(t){var e=lr();return bx(e,wt.memoizedState,t)},useTransition:function(){var t=Ig(zu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:ux,useSyncExternalStore:dx,useId:xx,unstable_isNewReconciler:!1},G2={readContext:ar,useCallback:Ex,useContext:ar,useEffect:S0,useImperativeHandle:Ix,useInsertionEffect:_x,useLayoutEffect:wx,useMemo:Tx,useReducer:Eg,useRef:yx,useState:function(){return Eg(zu)},useDebugValue:R0,useDeferredValue:function(t){var e=lr();return wt===null?e.memoizedState=t:bx(e,wt.memoizedState,t)},useTransition:function(){var t=Eg(zu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:ux,useSyncExternalStore:dx,useId:xx,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zp={isMounted:function(t){return(t=t._reactInternals)?Xo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=on(),i=Ts(t),s=vi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Rr(e,t,i,r),af(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=on(),i=Ts(t),s=vi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Rr(e,t,i,r),af(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),r=Ts(t),i=vi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Is(t,i,r),e!==null&&(Rr(e,t,r,n),af(e,t,r))}};function AI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vu(n,r)||!Vu(i,s):!0}function kx(t,e,n){var r=!1,i=Cs,s=e.contextType;return typeof s=="object"&&s!==null?s=ar(s):(i=Tn(e)?Do:en.current,r=e.contextTypes,s=(r=r!=null)?Il(t,i):Cs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function SI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zp.enqueueReplaceState(e,e.state,null)}function jy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},v0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ar(s):(s=Tn(e)?Do:en.current,i.context=Il(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zp.enqueueReplaceState(i,i.state,null),Xf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function xl(t,e){try{var n="",r=e;do n+=wN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H2=typeof WeakMap=="function"?WeakMap:Map;function Px(t,e,n){n=vi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rp||(rp=!0,Yy=r),Uy(t,e)},n}function Cx(t,e,n){n=vi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Uy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Uy(t,e),typeof r!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function RI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oD.bind(null,t,e,n),e.then(t,t))}function kI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function PI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vi(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var W2=Ni.ReactCurrentOwner,_n=!1;function sn(t,e,n,r){e.child=t===null?ox(e,null,n,r):Tl(e,t.child,n,r)}function CI(t,e,n,r,i){n=n.render;var s=e.ref;return hl(e,i),r=x0(t,e,n,r,s,i),n=A0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(Ke&&n&&f0(e),e.flags|=1,sn(t,e,r,i),e.child)}function NI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!V0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Nx(t,e,s,r,i)):(t=ff(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vu,n(o,r)&&t.ref===e.ref)return xi(t,e,i)}return e.flags|=1,t=bs(s,r),t.ref=e.ref,t.return=e,e.child=t}function Nx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vu(s,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,xi(t,e,i)}return By(t,e,n,r,i)}function Dx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(al,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(al,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(al,On),On|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(al,On),On|=r;return sn(t,e,i,n),e.child}function Lx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function By(t,e,n,r,i){var s=Tn(n)?Do:en.current;return s=Il(e,s),hl(e,i),n=x0(t,e,n,r,s,i),r=A0(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xi(t,e,i)):(Ke&&r&&f0(e),e.flags|=1,sn(t,e,n,i),e.child)}function DI(t,e,n,r,i){if(Tn(n)){var s=!0;Wf(e)}else s=!1;if(hl(e,i),e.stateNode===null)uf(t,e),kx(e,n,r),jy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=Tn(n)?Do:en.current,u=Il(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&SI(e,o,r,u),es=!1;var m=e.memoizedState;o.state=m,Xf(e,r,o,i),l=e.memoizedState,a!==r||m!==l||En.current||es?(typeof d=="function"&&(Fy(e,n,d,r),l=e.memoizedState),(a=es||AI(e,n,a,r,m,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:wr(e.type,a),o.props=u,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=Tn(n)?Do:en.current,l=Il(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&SI(e,o,r,l),es=!1,m=e.memoizedState,o.state=m,Xf(e,r,o,i);var I=e.memoizedState;a!==h||m!==I||En.current||es?(typeof y=="function"&&(Fy(e,n,y,r),I=e.memoizedState),(u=es||AI(e,n,u,r,m,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $y(t,e,n,r,s,i)}function $y(t,e,n,r,i,s){Lx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_I(e,n,!1),xi(t,e,s);r=e.stateNode,W2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tl(e,t.child,null,s),e.child=Tl(e,null,a,s)):sn(t,e,a,s),e.memoizedState=r.state,i&&_I(e,n,!0),e.child}function Ox(t){var e=t.stateNode;e.pendingContext?yI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yI(t,e.context,!1),I0(t,e.containerInfo)}function LI(t,e,n,r,i){return El(),m0(i),e.flags|=256,sn(t,e,n,r),e.child}var zy={dehydrated:null,treeContext:null,retryLane:0};function qy(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vx(t,e,n){var r=e.pendingProps,i=Je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Je,i&1),t===null)return Vy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hp(o,r,0,null),t=So(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qy(n),e.memoizedState=zy,t):k0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return K2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=bs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=bs(a,s):(s=So(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zy,r}return s=t.child,t=s.sibling,r=bs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k0(t,e){return e=Hp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vh(t,e,n,r){return r!==null&&m0(r),Tl(e,t.child,null,n),t=k0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function K2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Tg(Error(G(422))),Vh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hp({mode:"visible",children:r.children},i,0,null),s=So(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tl(e,t.child,null,o),e.child.memoizedState=qy(o),e.memoizedState=zy,s);if(!(e.mode&1))return Vh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Tg(s,r,void 0),Vh(t,e,o,r)}if(a=(o&t.childLanes)!==0,_n||a){if(r=Rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bi(t,i),Rr(r,t,i,-1))}return O0(),r=Tg(Error(G(421))),Vh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jn=vs(i.nextSibling),$n=e,Ke=!0,br=null,t!==null&&(rr[ir++]=mi,rr[ir++]=gi,rr[ir++]=Lo,mi=t.id,gi=t.overflow,Lo=e),e=k0(e,r.children),e.flags|=4096,e)}function OI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),My(t.return,e,n)}function bg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sn(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&OI(t,n,e);else if(t.tag===19)OI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bg(e,!0,n,null,s);break;case"together":bg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q2(t,e,n){switch(e.tag){case 3:Ox(e),El();break;case 5:cx(e);break;case 1:Tn(e.type)&&Wf(e);break;case 4:I0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(Yf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?Vx(t,e,n):(Oe(Je,Je.current&1),t=xi(t,e,n),t!==null?t.sibling:null);Oe(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,Dx(t,e,n)}return xi(t,e,n)}var Fx,Gy,jx,Ux;Fx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gy=function(){};jx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Io(Zr.current);var s=null;switch(n){case"input":i=fy(t,i),r=fy(t,r),s=[];break;case"select":i=Ze({},i,{value:void 0}),r=Ze({},r,{value:void 0}),s=[];break;case"textarea":i=gy(t,i),r=gy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gf)}_y(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ku.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ku.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&je("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ux=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mc(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y2(t,e,n){var r=e.pendingProps;switch(p0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return Tn(e.type)&&Hf(),Wt(e),null;case 3:return r=e.stateNode,bl(),$e(En),$e(en),T0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,br!==null&&(Zy(br),br=null))),Gy(t,e),Wt(e),null;case 5:E0(e);var i=Io(Bu.current);if(n=e.type,t!==null&&e.stateNode!=null)jx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Wt(e),null}if(t=Io(Zr.current),Lh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wr]=e,r[ju]=s,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(i=0;i<Yc.length;i++)je(Yc[i],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":qv(r,s),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},je("invalid",r);break;case"textarea":Hv(r,s),je("invalid",r)}_y(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dh(r.textContent,a,t),i=["children",""+a]):ku.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":xh(r),Gv(r,s,!0);break;case"textarea":xh(r),Wv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wr]=e,t[ju]=r,Fx(t,e,!1,!1),e.stateNode=t;e:{switch(o=wy(n,r),n){case"dialog":je("cancel",t),je("close",t),i=r;break;case"iframe":case"object":case"embed":je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yc.length;i++)je(Yc[i],t);i=r;break;case"source":je("error",t),i=r;break;case"img":case"image":case"link":je("error",t),je("load",t),i=r;break;case"details":je("toggle",t),i=r;break;case"input":qv(t,r),i=fy(t,r),je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ze({},r,{value:void 0}),je("invalid",t);break;case"textarea":Hv(t,r),i=gy(t,r),je("invalid",t);break;default:i=r}_y(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?yb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pu(t,l):typeof l=="number"&&Pu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ku.hasOwnProperty(s)?l!=null&&s==="onScroll"&&je("scroll",t):l!=null&&Z_(t,s,l,o))}switch(n){case"input":xh(t),Gv(t,r,!1);break;case"textarea":xh(t),Wv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ps(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ll(t,!!r.multiple,s,!1):r.defaultValue!=null&&ll(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)Ux(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Io(Bu.current),Io(Zr.current),Lh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wr]=e,(s=r.nodeValue!==n)&&(t=$n,t!==null))switch(t.tag){case 3:Dh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=e,e.stateNode=r}return Wt(e),null;case 13:if($e(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&jn!==null&&e.mode&1&&!(e.flags&128))ix(),El(),e.flags|=98560,s=!1;else if(s=Lh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[Wr]=e}else El(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else br!==null&&(Zy(br),br=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?vt===0&&(vt=3):O0())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return bl(),Gy(t,e),t===null&&Mu(e.stateNode.containerInfo),Wt(e),null;case 10:return _0(e.type._context),Wt(e),null;case 17:return Tn(e.type)&&Hf(),Wt(e),null;case 19:if($e(Je),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mc(s,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zf(t),o!==null){for(e.flags|=128,Mc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Je,Je.current&1|2),e.child}t=t.sibling}s.tail!==null&&ut()>Al&&(e.flags|=128,r=!0,Mc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Zf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ke)return Wt(e),null}else 2*ut()-s.renderingStartTime>Al&&n!==1073741824&&(e.flags|=128,r=!0,Mc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ut(),e.sibling=null,n=Je.current,Oe(Je,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return L0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function J2(t,e){switch(p0(e),e.tag){case 1:return Tn(e.type)&&Hf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bl(),$e(En),$e(en),T0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E0(e),null;case 13:if($e(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));El()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Je),null;case 4:return bl(),null;case 10:return _0(e.type._context),null;case 22:case 23:return L0(),null;case 24:return null;default:return null}}var Mh=!1,Yt=!1,X2=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ol(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Hy(t,e,n){try{n()}catch(r){st(t,e,r)}}var VI=!1;function Z2(t,e){if(ky=$f,t=Gb(),h0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Py={focusedElem:t,selectionRange:n},$f=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var S=I.memoizedProps,N=I.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?S:wr(e.type,S),N);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(P){st(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return I=VI,VI=!1,I}function uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hy(e,n,s)}i=i.next}while(i!==r)}}function qp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bx(t){var e=t.alternate;e!==null&&(t.alternate=null,Bx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[ju],delete e[Dy],delete e[O2],delete e[V2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $x(t){return t.tag===5||t.tag===3||t.tag===4}function MI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$x(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gf));else if(r!==4&&(t=t.child,t!==null))for(Ky(t,e,n),t=t.sibling;t!==null;)Ky(t,e,n),t=t.sibling}function Qy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qy(t,e,n),t=t.sibling;t!==null;)Qy(t,e,n),t=t.sibling}var Mt=null,Er=!1;function Wi(t,e,n){for(n=n.child;n!==null;)zx(t,e,n),n=n.sibling}function zx(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Vp,n)}catch{}switch(n.tag){case 5:Yt||ol(n,e);case 6:var r=Mt,i=Er;Mt=null,Wi(t,e,n),Mt=r,Er=i,Mt!==null&&(Er?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(Er?(t=Mt,n=n.stateNode,t.nodeType===8?yg(t.parentNode,n):t.nodeType===1&&yg(t,n),Lu(t)):yg(Mt,n.stateNode));break;case 4:r=Mt,i=Er,Mt=n.stateNode.containerInfo,Er=!0,Wi(t,e,n),Mt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hy(n,e,o),i=i.next}while(i!==r)}Wi(t,e,n);break;case 1:if(!Yt&&(ol(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}Wi(t,e,n);break;case 21:Wi(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Wi(t,e,n),Yt=r):Wi(t,e,n);break;default:Wi(t,e,n)}}function FI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X2),e.forEach(function(r){var i=lD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mt=a.stateNode,Er=!1;break e;case 3:Mt=a.stateNode.containerInfo,Er=!0;break e;case 4:Mt=a.stateNode.containerInfo,Er=!0;break e}a=a.return}if(Mt===null)throw Error(G(160));zx(s,o,i),Mt=null,Er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){st(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qx(e,t),e=e.sibling}function qx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_r(e,t),zr(t),r&4){try{uu(3,t,t.return),qp(3,t)}catch(S){st(t,t.return,S)}try{uu(5,t,t.return)}catch(S){st(t,t.return,S)}}break;case 1:_r(e,t),zr(t),r&512&&n!==null&&ol(n,n.return);break;case 5:if(_r(e,t),zr(t),r&512&&n!==null&&ol(n,n.return),t.flags&32){var i=t.stateNode;try{Pu(i,"")}catch(S){st(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&hb(i,s),wy(a,o);var u=wy(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?yb(i,h):d==="dangerouslySetInnerHTML"?mb(i,h):d==="children"?Pu(i,h):Z_(i,d,h,u)}switch(a){case"input":py(i,s);break;case"textarea":fb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?ll(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?ll(i,!!s.multiple,s.defaultValue,!0):ll(i,!!s.multiple,s.multiple?[]:"",!1))}i[ju]=s}catch(S){st(t,t.return,S)}}break;case 6:if(_r(e,t),zr(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){st(t,t.return,S)}}break;case 3:if(_r(e,t),zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lu(e.containerInfo)}catch(S){st(t,t.return,S)}break;case 4:_r(e,t),zr(t);break;case 13:_r(e,t),zr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(N0=ut())),r&4&&FI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(u=Yt)||d,_r(e,t),Yt=u):_r(e,t),zr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(h=ee=d;ee!==null;){switch(m=ee,y=m.child,m.tag){case 0:case 11:case 14:case 15:uu(4,m,m.return);break;case 1:ol(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(S){st(r,n,S)}}break;case 5:ol(m,m.return);break;case 22:if(m.memoizedState!==null){UI(h);continue}}y!==null?(y.return=m,ee=y):UI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gb("display",o))}catch(S){st(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){st(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_r(e,t),zr(t),r&4&&FI(t);break;case 21:break;default:_r(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($x(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pu(i,""),r.flags&=-33);var s=MI(t);Qy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=MI(t);Ky(t,a,o);break;default:throw Error(G(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eD(t,e,n){ee=t,Gx(t)}function Gx(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Mh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=Mh;var u=Yt;if(Mh=o,(Yt=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?BI(i):l!==null?(l.return=o,ee=l):BI(i);for(;s!==null;)ee=s,Gx(s),s=s.sibling;ee=i,Mh=a,Yt=u}jI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):jI(t)}}function jI(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||qp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&TI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Lu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Yt||e.flags&512&&Wy(e)}catch(m){st(e,e.return,m)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function UI(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function BI(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qp(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){st(e,i,l)}}var s=e.return;try{Wy(e)}catch(l){st(e,s,l)}break;case 5:var o=e.return;try{Wy(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var tD=Math.ceil,np=Ni.ReactCurrentDispatcher,P0=Ni.ReactCurrentOwner,or=Ni.ReactCurrentBatchConfig,Ee=0,Rt=null,gt=null,Ut=0,On=0,al=Us(0),vt=0,Gu=null,Vo=0,Gp=0,C0=0,du=null,yn=null,N0=0,Al=1/0,hi=null,rp=!1,Yy=null,Es=null,Fh=!1,fs=null,ip=0,hu=0,Jy=null,df=-1,hf=0;function on(){return Ee&6?ut():df!==-1?df:df=ut()}function Ts(t){return t.mode&1?Ee&2&&Ut!==0?Ut&-Ut:F2.transition!==null?(hf===0&&(hf=kb()),hf):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Vb(t.type)),t):1}function Rr(t,e,n,r){if(50<hu)throw hu=0,Jy=null,Error(G(185));vd(t,n,r),(!(Ee&2)||t!==Rt)&&(t===Rt&&(!(Ee&2)&&(Gp|=n),vt===4&&is(t,Ut)),bn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Al=ut()+500,Bp&&Bs()))}function bn(t,e){var n=t.callbackNode;FN(t,e);var r=Bf(t,t===Rt?Ut:0);if(r===0)n!==null&&Yv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yv(n),e===1)t.tag===0?M2($I.bind(null,t)):tx($I.bind(null,t)),D2(function(){!(Ee&6)&&Bs()}),n=null;else{switch(Pb(r)){case 1:n=i0;break;case 4:n=Sb;break;case 16:n=Uf;break;case 536870912:n=Rb;break;default:n=Uf}n=Zx(n,Hx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hx(t,e){if(df=-1,hf=0,Ee&6)throw Error(G(327));var n=t.callbackNode;if(fl()&&t.callbackNode!==n)return null;var r=Bf(t,t===Rt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sp(t,r);else{e=r;var i=Ee;Ee|=2;var s=Kx();(Rt!==t||Ut!==e)&&(hi=null,Al=ut()+500,Ao(t,e));do try{iD();break}catch(a){Wx(t,a)}while(1);y0(),np.current=s,Ee=i,gt!==null?e=0:(Rt=null,Ut=0,e=vt)}if(e!==0){if(e===2&&(i=by(t),i!==0&&(r=i,e=Xy(t,i))),e===1)throw n=Gu,Ao(t,0),is(t,r),bn(t,ut()),n;if(e===6)is(t,r);else{if(i=t.current.alternate,!(r&30)&&!nD(i)&&(e=sp(t,r),e===2&&(s=by(t),s!==0&&(r=s,e=Xy(t,s))),e===1))throw n=Gu,Ao(t,0),is(t,r),bn(t,ut()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:lo(t,yn,hi);break;case 3:if(is(t,r),(r&130023424)===r&&(e=N0+500-ut(),10<e)){if(Bf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){on(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ny(lo.bind(null,t,yn,hi),e);break}lo(t,yn,hi);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tD(r/1960))-r,10<r){t.timeoutHandle=Ny(lo.bind(null,t,yn,hi),r);break}lo(t,yn,hi);break;case 5:lo(t,yn,hi);break;default:throw Error(G(329))}}}return bn(t,ut()),t.callbackNode===n?Hx.bind(null,t):null}function Xy(t,e){var n=du;return t.current.memoizedState.isDehydrated&&(Ao(t,e).flags|=256),t=sp(t,e),t!==2&&(e=yn,yn=n,e!==null&&Zy(e)),t}function Zy(t){yn===null?yn=t:yn.push.apply(yn,t)}function nD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~C0,e&=~Gp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sr(e),r=1<<n;t[n]=-1,e&=~r}}function $I(t){if(Ee&6)throw Error(G(327));fl();var e=Bf(t,0);if(!(e&1))return bn(t,ut()),null;var n=sp(t,e);if(t.tag!==0&&n===2){var r=by(t);r!==0&&(e=r,n=Xy(t,r))}if(n===1)throw n=Gu,Ao(t,0),is(t,e),bn(t,ut()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lo(t,yn,hi),bn(t,ut()),null}function D0(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Al=ut()+500,Bp&&Bs())}}function Mo(t){fs!==null&&fs.tag===0&&!(Ee&6)&&fl();var e=Ee;Ee|=1;var n=or.transition,r=ke;try{if(or.transition=null,ke=1,t)return t()}finally{ke=r,or.transition=n,Ee=e,!(Ee&6)&&Bs()}}function L0(){On=al.current,$e(al)}function Ao(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,N2(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(p0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hf();break;case 3:bl(),$e(En),$e(en),T0();break;case 5:E0(r);break;case 4:bl();break;case 13:$e(Je);break;case 19:$e(Je);break;case 10:_0(r.type._context);break;case 22:case 23:L0()}n=n.return}if(Rt=t,gt=t=bs(t.current,null),Ut=On=e,vt=0,Gu=null,C0=Gp=Vo=0,yn=du=null,vo!==null){for(e=0;e<vo.length;e++)if(n=vo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}vo=null}return t}function Wx(t,e){do{var n=gt;try{if(y0(),lf.current=tp,ep){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ep=!1}if(Oo=0,At=wt=Xe=null,cu=!1,$u=0,P0.current=null,n===null||n.return===null){vt=1,Gu=e,gt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=kI(o);if(y!==null){y.flags&=-257,PI(y,o,a,s,e),y.mode&1&&RI(s,u,e),e=y,l=u;var I=e.updateQueue;if(I===null){var S=new Set;S.add(l),e.updateQueue=S}else I.add(l);break e}else{if(!(e&1)){RI(s,u,e),O0();break e}l=Error(G(426))}}else if(Ke&&a.mode&1){var N=kI(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),PI(N,o,a,s,e),m0(xl(l,a));break e}}s=l=xl(l,a),vt!==4&&(vt=2),du===null?du=[s]:du.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Px(s,l,e);EI(s,E);break e;case 1:a=l;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Es===null||!Es.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=Cx(s,a,e);EI(s,P);break e}}s=s.return}while(s!==null)}Yx(n)}catch(U){e=U,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(1)}function Kx(){var t=np.current;return np.current=tp,t===null?tp:t}function O0(){(vt===0||vt===3||vt===2)&&(vt=4),Rt===null||!(Vo&268435455)&&!(Gp&268435455)||is(Rt,Ut)}function sp(t,e){var n=Ee;Ee|=2;var r=Kx();(Rt!==t||Ut!==e)&&(hi=null,Ao(t,e));do try{rD();break}catch(i){Wx(t,i)}while(1);if(y0(),Ee=n,np.current=r,gt!==null)throw Error(G(261));return Rt=null,Ut=0,vt}function rD(){for(;gt!==null;)Qx(gt)}function iD(){for(;gt!==null&&!kN();)Qx(gt)}function Qx(t){var e=Xx(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?Yx(t):gt=e,P0.current=null}function Yx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J2(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,gt=null;return}}else if(n=Y2(n,e,On),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);vt===0&&(vt=5)}function lo(t,e,n){var r=ke,i=or.transition;try{or.transition=null,ke=1,sD(t,e,n,r)}finally{or.transition=i,ke=r}return null}function sD(t,e,n,r){do fl();while(fs!==null);if(Ee&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jN(t,s),t===Rt&&(gt=Rt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,Zx(Uf,function(){return fl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=or.transition,or.transition=null;var o=ke;ke=1;var a=Ee;Ee|=4,P0.current=null,Z2(t,n),qx(n,t),x2(Py),$f=!!ky,Py=ky=null,t.current=n,eD(n),PN(),Ee=a,ke=o,or.transition=s}else t.current=n;if(Fh&&(Fh=!1,fs=t,ip=i),s=t.pendingLanes,s===0&&(Es=null),DN(n.stateNode),bn(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rp)throw rp=!1,t=Yy,Yy=null,t;return ip&1&&t.tag!==0&&fl(),s=t.pendingLanes,s&1?t===Jy?hu++:(hu=0,Jy=t):hu=0,Bs(),null}function fl(){if(fs!==null){var t=Pb(ip),e=or.transition,n=ke;try{if(or.transition=null,ke=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,ip=0,Ee&6)throw Error(G(331));var i=Ee;for(Ee|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:uu(8,d,s)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var m=d.sibling,y=d.return;if(Bx(d),d===u){ee=null;break}if(m!==null){m.return=y,ee=m;break}ee=y}}}var I=s.alternate;if(I!==null){var S=I.child;if(S!==null){I.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ee=E;break e}ee=s.return}}var v=t.current;for(ee=v;ee!==null;){o=ee;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ee=b;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qp(9,a)}}catch(U){st(a,a.return,U)}if(a===o){ee=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ee=P;break e}ee=a.return}}if(Ee=i,Bs(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Vp,t)}catch{}r=!0}return r}finally{ke=n,or.transition=e}}return!1}function zI(t,e,n){e=xl(n,e),e=Px(t,e,1),t=Is(t,e,1),e=on(),t!==null&&(vd(t,1,e),bn(t,e))}function st(t,e,n){if(t.tag===3)zI(t,t,n);else for(;e!==null;){if(e.tag===3){zI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Es===null||!Es.has(r))){t=xl(n,t),t=Cx(e,t,1),e=Is(e,t,1),t=on(),e!==null&&(vd(e,1,t),bn(e,t));break}}e=e.return}}function oD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Ut&n)===n&&(vt===4||vt===3&&(Ut&130023424)===Ut&&500>ut()-N0?Ao(t,0):C0|=n),bn(t,e)}function Jx(t,e){e===0&&(t.mode&1?(e=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):e=1);var n=on();t=bi(t,e),t!==null&&(vd(t,e,n),bn(t,n))}function aD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jx(t,n)}function lD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),Jx(t,n)}var Xx;Xx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||En.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,Q2(t,e,n);_n=!!(t.flags&131072)}else _n=!1,Ke&&e.flags&1048576&&nx(e,Qf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uf(t,e),t=e.pendingProps;var i=Il(e,en.current);hl(e,n),i=x0(null,e,r,t,i,n);var s=A0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tn(r)?(s=!0,Wf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,v0(e),i.updater=zp,e.stateNode=i,i._reactInternals=e,jy(e,r,t,n),e=$y(null,e,r,!0,s,n)):(e.tag=0,Ke&&s&&f0(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uD(r),t=wr(r,t),i){case 0:e=By(null,e,r,t,n);break e;case 1:e=DI(null,e,r,t,n);break e;case 11:e=CI(null,e,r,t,n);break e;case 14:e=NI(null,e,r,wr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),By(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),DI(t,e,r,i,n);case 3:e:{if(Ox(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,lx(t,e),Xf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xl(Error(G(423)),e),e=LI(t,e,r,n,i);break e}else if(r!==i){i=xl(Error(G(424)),e),e=LI(t,e,r,n,i);break e}else for(jn=vs(e.stateNode.containerInfo.firstChild),$n=e,Ke=!0,br=null,n=ox(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(El(),r===i){e=xi(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return cx(e),t===null&&Vy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Cy(r,i)?o=null:s!==null&&Cy(r,s)&&(e.flags|=32),Lx(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&Vy(e),null;case 13:return Vx(t,e,n);case 4:return I0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tl(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),CI(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Oe(Yf,r._currentValue),r._currentValue=o,s!==null)if(Pr(s.value,o)){if(s.children===i.children&&!En.current){e=xi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=vi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),My(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),My(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hl(e,n),i=ar(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=wr(r,e.pendingProps),i=wr(r.type,i),NI(t,e,r,i,n);case 15:return Nx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),uf(t,e),e.tag=1,Tn(r)?(t=!0,Wf(e)):t=!1,hl(e,n),kx(e,r,i),jy(e,r,i,n),$y(null,e,r,!0,t,n);case 19:return Mx(t,e,n);case 22:return Dx(t,e,n)}throw Error(G(156,e.tag))};function Zx(t,e){return Ab(t,e)}function cD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new cD(t,e,n,r)}function V0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uD(t){if(typeof t=="function")return V0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===t0)return 11;if(t===n0)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ff(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")V0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ja:return So(n.children,i,s,e);case e0:o=8,i|=8;break;case cy:return t=sr(12,n,e,i|2),t.elementType=cy,t.lanes=s,t;case uy:return t=sr(13,n,e,i),t.elementType=uy,t.lanes=s,t;case dy:return t=sr(19,n,e,i),t.elementType=dy,t.lanes=s,t;case cb:return Hp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ab:o=10;break e;case lb:o=9;break e;case t0:o=11;break e;case n0:o=14;break e;case Zi:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=sr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function So(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function Hp(t,e,n,r){return t=sr(22,t,r,e),t.elementType=cb,t.lanes=n,t.stateNode={isHidden:!1},t}function xg(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function Ag(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function M0(t,e,n,r,i,s,o,a,l){return t=new dD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},v0(s),t}function hD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ya,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eA(t){if(!t)return Cs;t=t._reactInternals;e:{if(Xo(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Tn(n))return ex(t,n,e)}return e}function tA(t,e,n,r,i,s,o,a,l){return t=M0(n,r,!0,t,i,s,o,a,l),t.context=eA(null),n=t.current,r=on(),i=Ts(n),s=vi(r,i),s.callback=e??null,Is(n,s,i),t.current.lanes=i,vd(t,i,r),bn(t,r),t}function Wp(t,e,n,r){var i=e.current,s=on(),o=Ts(i);return n=eA(n),e.context===null?e.context=n:e.pendingContext=n,e=vi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(i,e,o),t!==null&&(Rr(t,i,o,s),af(t,i,o)),o}function op(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function F0(t,e){qI(t,e),(t=t.alternate)&&qI(t,e)}function fD(){return null}var nA=typeof reportError=="function"?reportError:function(t){console.error(t)};function j0(t){this._internalRoot=t}Kp.prototype.render=j0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Wp(t,e,null,null)};Kp.prototype.unmount=j0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mo(function(){Wp(null,t,null,null)}),e[Ti]=null}};function Kp(t){this._internalRoot=t}Kp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Db();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rs.length&&e!==0&&e<rs[n].priority;n++);rs.splice(n,0,t),n===0&&Ob(t)}};function U0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function GI(){}function pD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=op(o);s.call(u)}}var o=tA(e,r,t,0,null,!1,!1,"",GI);return t._reactRootContainer=o,t[Ti]=o.current,Mu(t.nodeType===8?t.parentNode:t),Mo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=op(l);a.call(u)}}var l=M0(t,0,!1,null,null,!1,!1,"",GI);return t._reactRootContainer=l,t[Ti]=l.current,Mu(t.nodeType===8?t.parentNode:t),Mo(function(){Wp(e,l,n,r)}),l}function Yp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=op(o);a.call(l)}}Wp(e,o,t,i)}else o=pD(n,e,t,i,r);return op(o)}Cb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qc(e.pendingLanes);n!==0&&(s0(e,n|1),bn(e,ut()),!(Ee&6)&&(Al=ut()+500,Bs()))}break;case 13:Mo(function(){var r=bi(t,1);if(r!==null){var i=on();Rr(r,t,1,i)}}),F0(t,1)}};o0=function(t){if(t.tag===13){var e=bi(t,134217728);if(e!==null){var n=on();Rr(e,t,134217728,n)}F0(t,134217728)}};Nb=function(t){if(t.tag===13){var e=Ts(t),n=bi(t,e);if(n!==null){var r=on();Rr(n,t,e,r)}F0(t,e)}};Db=function(){return ke};Lb=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Iy=function(t,e,n){switch(e){case"input":if(py(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Up(r);if(!i)throw Error(G(90));db(r),py(r,i)}}}break;case"textarea":fb(t,n);break;case"select":e=n.value,e!=null&&ll(t,!!n.multiple,e,!1)}};vb=D0;Ib=Mo;var mD={usingClientEntryPoint:!1,Events:[Ed,tl,Up,_b,wb,D0]},Fc={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gD={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bb(t),t===null?null:t.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||fD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{Vp=jh.inject(gD),Xr=jh}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mD;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U0(e))throw Error(G(200));return hD(t,e,null,n)};Qn.createRoot=function(t,e){if(!U0(t))throw Error(G(299));var n=!1,r="",i=nA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=M0(t,1,!1,null,null,n,!1,r,i),t[Ti]=e.current,Mu(t.nodeType===8?t.parentNode:t),new j0(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=bb(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return Mo(t)};Qn.hydrate=function(t,e,n){if(!Qp(e))throw Error(G(200));return Yp(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!U0(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tA(e,null,t,1,n??null,i,!1,s,o),t[Ti]=e.current,Mu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kp(e)};Qn.render=function(t,e,n){if(!Qp(e))throw Error(G(200));return Yp(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Qp(t))throw Error(G(40));return t._reactRootContainer?(Mo(function(){Yp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};Qn.unstable_batchedUpdates=D0;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qp(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Yp(t,e,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function rA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rA)}catch(t){console.error(t)}}rA(),rb.exports=Qn;var B0=rb.exports,HI=B0;ay.createRoot=HI.createRoot,ay.hydrateRoot=HI.hydrateRoot;const yD="modulepreload",_D=function(t){return"/"+t},WI={},di=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=_D(s),s in WI)return;WI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":yD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var wD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ID=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>q.createElement("svg",{ref:u,...wD,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${vD(t)}`,...l},[...e.map(([d,h])=>q.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var et=ID;const Da=et("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),e_=et("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),KI=et("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ap=et("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),ED=et("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vt=et("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),La=et("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),TD=et("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),QI=et("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),mn=et("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),YI=et("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),jc=et("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Sg=et("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),bD=et("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),JI=et("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),xD=et("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),XI=et("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),ts=et("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Rg=et("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ZI=et("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),eE=et("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tE=et("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Hu=et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),AD=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},sA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[d],n[h],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new RD;const m=s<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),h!==64){const I=u<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kD=function(t){const e=iA(t);return sA.encodeByteArray(e,!0)},lp=function(t){return kD(t).replace(/\./g,"")},oA=function(t){try{return sA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=()=>aA().__FIREBASE_DEFAULTS__,CD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ND=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&oA(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return AD()||PD()||CD()||ND()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lA=t=>{var e,n;return(n=(e=Jp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cA=t=>{const e=lA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uA=()=>{var t;return(t=Jp())==null?void 0:t.config},dA=t=>{var e;return(e=Jp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[lp(JSON.stringify(n)),lp(JSON.stringify(o)),a].join(".")}const fu={};function LD(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function OD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nE=!1;function $0(t,e){if(typeof window>"u"||typeof document>"u"||!Di(window.location.host)||fu[t]===e||fu[t]||nE)return;fu[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=LD().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nE=!0,o()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=OD(r),y=n("text"),I=document.getElementById(y)||document.createElement("span"),S=n("learnmore"),N=document.getElementById(S)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;a(b),d(N,S);const P=u();l(v,E),b.append(v,I,N,P),document.body.appendChild(b)}s?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function fA(){var e;const t=(e=Jp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jD(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gA(){return!fA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function z0(){try{return typeof indexedDB=="object"}catch{return!1}}function yA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function UD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BD,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zo.prototype.create)}}class Zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$D(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}}function $D(t,e){return t.replace(zD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zD=/\{\$([^}]+)}/g;function qD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(rE(s)&&rE(o)){if(!cr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Xc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GD(t,e){const n=new HD(t,e);return n.subscribe.bind(n)}class HD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kg),i.error===void 0&&(i.error=kg),i.complete===void 0&&(i.complete=kg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=1e3,QD=2,YD=4*60*60*1e3,JD=.5;function iE(t,e=KD,n=QD){const r=e*Math.pow(n,t),i=Math.round(JD*r*(Math.random()-.5)*2);return Math.min(YD,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class Wn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eL(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZD(t){return t===co?void 0:t}function eL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const nL={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},rL=_e.INFO,iL={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},sL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bd{constructor(e){this.name=e,this._logLevel=rL,this._logHandler=sL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const oL=(t,e)=>e.some(n=>t instanceof n);let sE,oE;function aL(){return sE||(sE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lL(){return oE||(oE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _A=new WeakMap,t_=new WeakMap,wA=new WeakMap,Pg=new WeakMap,q0=new WeakMap;function cL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_A.set(n,t)}).catch(()=>{}),q0.set(e,t),e}function uL(t){if(t_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});t_.set(t,e)}let n_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return t_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dL(t){n_=t(n_)}function hL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cg(this),e,...n);return wA.set(r,e.sort?e.sort():[e]),xs(r)}:lL().includes(t)?function(...e){return t.apply(Cg(this),e),xs(_A.get(this))}:function(...e){return xs(t.apply(Cg(this),e))}}function fL(t){return typeof t=="function"?hL(t):(t instanceof IDBTransaction&&uL(t),oL(t,aL())?new Proxy(t,n_):t)}function xs(t){if(t instanceof IDBRequest)return cL(t);if(Pg.has(t))return Pg.get(t);const e=fL(t);return e!==t&&(Pg.set(t,e),q0.set(e,t)),e}const Cg=t=>q0.get(t);function vA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=xs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xs(o.result),l.oldVersion,l.newVersion,xs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const pL=["get","getKey","getAll","getAllKeys","count"],mL=["put","add","delete","clear"],Ng=new Map;function aE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=mL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Ng.set(e,s),s}dL(t=>({...t,get:(e,n,r)=>aE(e,n)||t.get(e,n,r),has:(e,n)=>!!aE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const r_="@firebase/app",lE="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new bd("@firebase/app"),_L="@firebase/app-compat",wL="@firebase/analytics-compat",vL="@firebase/analytics",IL="@firebase/app-check-compat",EL="@firebase/app-check",TL="@firebase/auth",bL="@firebase/auth-compat",xL="@firebase/database",AL="@firebase/data-connect",SL="@firebase/database-compat",RL="@firebase/functions",kL="@firebase/functions-compat",PL="@firebase/installations",CL="@firebase/installations-compat",NL="@firebase/messaging",DL="@firebase/messaging-compat",LL="@firebase/performance",OL="@firebase/performance-compat",VL="@firebase/remote-config",ML="@firebase/remote-config-compat",FL="@firebase/storage",jL="@firebase/storage-compat",UL="@firebase/firestore",BL="@firebase/ai",$L="@firebase/firestore-compat",zL="firebase",qL="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",GL={[r_]:"fire-core",[_L]:"fire-core-compat",[vL]:"fire-analytics",[wL]:"fire-analytics-compat",[EL]:"fire-app-check",[IL]:"fire-app-check-compat",[TL]:"fire-auth",[bL]:"fire-auth-compat",[xL]:"fire-rtdb",[AL]:"fire-data-connect",[SL]:"fire-rtdb-compat",[RL]:"fire-fn",[kL]:"fire-fn-compat",[PL]:"fire-iid",[CL]:"fire-iid-compat",[NL]:"fire-fcm",[DL]:"fire-fcm-compat",[LL]:"fire-perf",[OL]:"fire-perf-compat",[VL]:"fire-rc",[ML]:"fire-rc-compat",[FL]:"fire-gcs",[jL]:"fire-gcs-compat",[UL]:"fire-fst",[$L]:"fire-fst-compat",[BL]:"fire-vertex","fire-js":"fire-js",[zL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Map,HL=new Map,i_=new Map;function cE(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ur(t){const e=t.name;if(i_.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;i_.set(e,t);for(const n of up.values())cE(n,t);for(const n of HL.values())cE(n,t);return!0}function Cr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function WL(t,e,n=cp){Cr(t,e).clearInstance(n)}function Be(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Zo("app","Firebase",KL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=qL;function IA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:cp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(n||(n=uA()),!n)throw As.create("no-options");const s=up.get(i);if(s){if(cr(n,s.options)&&cr(r,s.config))return s;throw As.create("duplicate-app",{appName:i})}const o=new tL(i);for(const l of i_.values())o.addComponent(l);const a=new QL(n,r,o);return up.set(i,a),a}function xd(t=cp){const e=up.get(t);if(!e&&t===cp&&uA())return IA();if(!e)throw As.create("no-app",{appName:t});return e}function Jt(t,e,n){let r=GL[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(o.join(" "));return}ur(new Wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-heartbeat-database",JL=1,Wu="firebase-heartbeat-store";let Dg=null;function EA(){return Dg||(Dg=vA(YL,JL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw As.create("idb-open",{originalErrorMessage:t.message})})),Dg}async function XL(t){try{const n=(await EA()).transaction(Wu),r=await n.objectStore(Wu).get(TA(t));return await n.done,r}catch(e){if(e instanceof Jn)Ai.warn(e.message);else{const n=As.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ai.warn(n.message)}}}async function uE(t,e){try{const r=(await EA()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,TA(t)),await r.done}catch(n){if(n instanceof Jn)Ai.warn(n.message);else{const r=As.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ai.warn(r.message)}}}function TA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=1024,eO=30;class tO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>eO){const o=iO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ai.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dE(),{heartbeatsToSend:r,unsentEntries:i}=nO(this._heartbeatsCache.heartbeats),s=lp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ai.warn(n),""}}}function dE(){return new Date().toISOString().substring(0,10)}function nO(t,e=ZL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return z0()?yA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return uE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hE(t){return lp(JSON.stringify({version:2,heartbeats:t})).length}function iO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){ur(new Wn("platform-logger",e=>new gL(e),"PRIVATE")),ur(new Wn("heartbeat",e=>new tO(e),"PRIVATE")),Jt(r_,lE,t),Jt(r_,lE,"esm2020"),Jt("fire-js","")}sO("");var oO="firebase",aO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(oO,aO,"app");const bA="@firebase/installations",G0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=1e4,AA=`w:${G0}`,SA="FIS_v2",lO="https://firebaseinstallations.googleapis.com/v1",cO=60*60*1e3,uO="installations",dO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fo=new Zo(uO,dO,hO);function RA(t){return t instanceof Jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA({projectId:t}){return`${lO}/projects/${t}/installations`}function PA(t){return{token:t.token,requestStatus:2,expiresIn:pO(t.expiresIn),creationTime:Date.now()}}async function CA(t,e){const r=(await e.json()).error;return Fo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function NA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fO(t,{refreshToken:e}){const n=NA(t);return n.append("Authorization",mO(e)),n}async function DA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function pO(t){return Number(t.replace("s","000"))}function mO(t){return`${SA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=kA(t),i=NA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:SA,appId:t.appId,sdkVersion:AA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:PA(u.authToken)}}else throw await CA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=/^[cdef][\w-]{21}$/,s_="";function wO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=vO(t);return _O.test(n)?n:s_}catch{return s_}}function vO(t){return yO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Map;function VA(t,e){const n=Zp(t);MA(n,e),IO(n,e)}function MA(t,e){const n=OA.get(t);if(n)for(const r of n)r(e)}function IO(t,e){const n=EO();n&&n.postMessage({key:t,fid:e}),TO()}let Eo=null;function EO(){return!Eo&&"BroadcastChannel"in self&&(Eo=new BroadcastChannel("[Firebase] FID Change"),Eo.onmessage=t=>{MA(t.data.key,t.data.fid)}),Eo}function TO(){OA.size===0&&Eo&&(Eo.close(),Eo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firebase-installations-database",xO=1,jo="firebase-installations-store";let Lg=null;function H0(){return Lg||(Lg=vA(bO,xO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jo)}}})),Lg}async function dp(t,e){const n=Zp(t),i=(await H0()).transaction(jo,"readwrite"),s=i.objectStore(jo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&VA(t,e.fid),e}async function FA(t){const e=Zp(t),r=(await H0()).transaction(jo,"readwrite");await r.objectStore(jo).delete(e),await r.done}async function em(t,e){const n=Zp(t),i=(await H0()).transaction(jo,"readwrite"),s=i.objectStore(jo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&VA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(t){let e;const n=await em(t.appConfig,r=>{const i=AO(r),s=SO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===s_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function AO(t){const e=t||{fid:wO(),registrationStatus:0};return jA(e)}function SO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Fo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kO(t)}:{installationEntry:e}}async function RO(t,e){try{const n=await gO(t,e);return dp(t.appConfig,n)}catch(n){throw RA(n)&&n.customData.serverCode===409?await FA(t.appConfig):await dp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function kO(t){let e=await fE(t.appConfig);for(;e.registrationStatus===1;)await LA(100),e=await fE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await W0(t);return r||n}return e}function fE(t){return em(t,e=>{if(!e)throw Fo.create("installation-not-found");return jA(e)})}function jA(t){return PO(t)?{fid:t.fid,registrationStatus:0}:t}function PO(t){return t.registrationStatus===1&&t.registrationTime+xA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO({appConfig:t,heartbeatServiceProvider:e},n){const r=NO(t,n),i=fO(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:AA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await DA(()=>fetch(r,a));if(l.ok){const u=await l.json();return PA(u)}else throw await CA("Generate Auth Token",l)}function NO(t,{fid:e}){return`${kA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(t,e=!1){let n;const r=await em(t.appConfig,s=>{if(!UA(s))throw Fo.create("not-registered");const o=s.authToken;if(!e&&OO(o))return s;if(o.requestStatus===1)return n=DO(t,e),s;{if(!navigator.onLine)throw Fo.create("app-offline");const a=MO(s);return n=LO(t,a),a}});return n?await n:r.authToken}async function DO(t,e){let n=await pE(t.appConfig);for(;n.authToken.requestStatus===1;)await LA(100),n=await pE(t.appConfig);const r=n.authToken;return r.requestStatus===0?K0(t,e):r}function pE(t){return em(t,e=>{if(!UA(e))throw Fo.create("not-registered");const n=e.authToken;return FO(n)?{...e,authToken:{requestStatus:0}}:e})}async function LO(t,e){try{const n=await CO(t,e),r={...e,authToken:n};return await dp(t.appConfig,r),n}catch(n){if(RA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await FA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await dp(t.appConfig,r)}throw n}}function UA(t){return t!==void 0&&t.registrationStatus===2}function OO(t){return t.requestStatus===2&&!VO(t)}function VO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+cO}function MO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function FO(t){return t.requestStatus===1&&t.requestTime+xA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t){const e=t,{installationEntry:n,registrationPromise:r}=await W0(e);return r?r.catch(console.error):K0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t,e=!1){const n=t;return await BO(n),(await K0(n,e)).token}async function BO(t){const{registrationPromise:e}=await W0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t){if(!t||!t.options)throw Og("App Configuration");if(!t.name)throw Og("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Og(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Og(t){return Fo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="installations",zO="installations-internal",qO=t=>{const e=t.getProvider("app").getImmediate(),n=$O(e),r=Cr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},GO=t=>{const e=t.getProvider("app").getImmediate(),n=Cr(e,BA).getImmediate();return{getId:()=>jO(n),getToken:i=>UO(n,i)}};function HO(){ur(new Wn(BA,qO,"PUBLIC")),ur(new Wn(zO,GO,"PRIVATE"))}HO();Jt(bA,G0);Jt(bA,G0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="analytics",WO="firebase_id",KO="origin",QO=60*1e3,YO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Q0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new bd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new Zo("analytics","Analytics",JO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){if(!t.startsWith(Q0)){const e=zn.create("invalid-gtag-resource",{gtagURL:t});return xn.warn(e.message),""}return t}function $A(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ZO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function eV(t,e){const n=ZO("firebase-js-sdk-policy",{createScriptURL:XO}),r=document.createElement("script"),i=`${Q0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function tV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function nV(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await $A(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){xn.error(a)}t("config",i,s)}async function rV(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await $A(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){xn.error(s)}}function iV(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await rV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await nV(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){xn.error(a)}}return i}function sV(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=iV(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function oV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Q0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=30,lV=1e3;class cV{constructor(e={},n=lV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const zA=new cV;function uV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function dV(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:uV(n)},i=YO.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function hV(t,e=zA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw zn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new mV;return setTimeout(async()=>{a.abort()},n!==void 0?n:QO),qA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function qA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=zA){var a;const{appId:s,measurementId:o}=t;try{await fV(r,e)}catch(l){if(o)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await dV(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!pV(u)){if(i.deleteThrottleMetadata(s),o)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const d=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?iE(n,i.intervalMillis,aV):iE(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(s,h),xn.debug(`Calling attemptFetch again in ${d} millis`),qA(t,h,r,i)}}function fV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function pV(t){if(!(t instanceof Jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class mV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function gV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(){if(z0())try{await yA()}catch(t){return xn.warn(zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return xn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _V(t,e,n,r,i,s,o){const a=hV(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>xn.error(m)),e.push(a);const l=yV().then(m=>{if(m)return r.getId()}),[u,d]=await Promise.all([a,l]);oV(s)||eV(s,u.measurementId),i("js",new Date);const h=(o==null?void 0:o.config)??{};return h[KO]="firebase",h.update=!0,d!=null&&(h[WO]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.app=e}_delete(){return delete pu[this.app.options.appId],Promise.resolve()}}let pu={},mE=[];const gE={};let Vg="dataLayer",vV="gtag",yE,GA,_E=!1;function IV(){const t=[];if(pA()&&t.push("This is a browser extension environment."),UD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=zn.create("invalid-analytics-context",{errorInfo:e});xn.warn(n.message)}}function EV(t,e,n){IV();const r=t.options.appId;if(!r)throw zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(pu[r]!=null)throw zn.create("already-exists",{id:r});if(!_E){tV(Vg);const{wrappedGtag:s,gtagCore:o}=sV(pu,mE,gE,Vg,vV);GA=s,yE=o,_E=!0}return pu[r]=_V(t,mE,gE,e,yE,Vg,n),new wV(t)}function TV(t=xd()){t=Z(t);const e=Cr(t,hp);return e.isInitialized()?e.getImmediate():bV(t)}function bV(t,e={}){const n=Cr(t,hp);if(n.isInitialized()){const i=n.getImmediate();if(cr(e,n.getOptions()))return i;throw zn.create("already-initialized")}return n.initialize({options:e})}function HA(t,e,n,r){t=Z(t),gV(GA,pu[t.app.options.appId],e,n,r).catch(i=>xn.error(i))}const wE="@firebase/analytics",vE="0.10.18";function xV(){ur(new Wn(hp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return EV(r,i,n)},"PUBLIC")),ur(new Wn("analytics-internal",t,"PRIVATE")),Jt(wE,vE),Jt(wE,vE,"esm2020");function t(e){try{const n=e.getProvider(hp).getImmediate();return{logEvent:(r,i,s)=>HA(n,r,i,s)}}catch(n){throw zn.create("interop-component-reg-failed",{reason:n})}}}xV();var IE="@firebase/ai",o_="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="AI",EE="us-central1",AV="firebasevertexai.googleapis.com",SV="v1beta",TE=o_,RV="gl-js",kV=180*1e3,PV="gemini-2.0-flash-lite";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=["user","model","function","system"],WA={HARM_SEVERITY_NEGLIGIBLE:"HARM_SEVERITY_NEGLIGIBLE",HARM_SEVERITY_LOW:"HARM_SEVERITY_LOW",HARM_SEVERITY_MEDIUM:"HARM_SEVERITY_MEDIUM",HARM_SEVERITY_HIGH:"HARM_SEVERITY_HIGH",HARM_SEVERITY_UNSUPPORTED:"HARM_SEVERITY_UNSUPPORTED"},xE={STOP:"STOP",MAX_TOKENS:"MAX_TOKENS",SAFETY:"SAFETY",RECITATION:"RECITATION",OTHER:"OTHER",BLOCKLIST:"BLOCKLIST",PROHIBITED_CONTENT:"PROHIBITED_CONTENT",SPII:"SPII",MALFORMED_FUNCTION_CALL:"MALFORMED_FUNCTION_CALL"},AE={TEXT:"TEXT",IMAGE:"IMAGE",AUDIO:"AUDIO"},SE={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.backendType=e}}class Ad extends KA{constructor(){super(Li.GOOGLE_AI)}}class tm extends KA{constructor(e=EE){super(Li.VERTEX_AI),e?this.location=e:this.location=EE}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CV=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof tm?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de extends Jn{constructor(e,n,r){const i=Sl,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,de),Object.setPrototypeOf(this,de.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t){if(t instanceof Ad)return`${Sl}/googleai`;if(t instanceof tm)return`${Sl}/vertexai/${t.location}`;throw new de(me.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function DV(t){const e=t.split("/");if(e[0]!==Sl)throw new de(me.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new de(me.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new tm(r);case"googleai":return new Ad;default:throw new de(me.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){var r,i,s,o,a,l,u;if((i=(r=e.app)==null?void 0:r.options)!=null&&i.apiKey)if((o=(s=e.app)==null?void 0:s.options)!=null&&o.projectId)if((l=(a=e.app)==null?void 0:a.options)!=null&&l.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location,backend:e.backend},Be(e.app)&&e.app.settings.appCheckToken){const d=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:d})}else e.appCheck&&((u=e.options)!=null&&u.useLimitedUseAppCheckTokens?this._apiSettings.getAppCheckToken=()=>e.appCheck.getLimitedUseToken():this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken()),this.model=mu.normalizeModelName(n,this._apiSettings.backend.backendType)}else throw new de(me.NO_APP_ID,'The "appId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid app ID.');else throw new de(me.NO_PROJECT_ID,'The "projectId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid project ID.');else throw new de(me.NO_API_KEY,'The "apiKey" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid API key.')}static normalizeModelName(e,n){return n===Li.GOOGLE_AI?mu.normalizeGoogleAIModelName(e):mu.normalizeVertexAIModelName(e)}static normalizeGoogleAIModelName(e){return`models/${e}`}static normalizeVertexAIModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new bd("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ku;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(Ku||(Ku={}));class QA{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiSettings=r,this.stream=i,this.requestOptions=s}toString(){const e=new URL(this.baseUrl);return e.pathname=`/${this.apiVersion}/${this.modelPath}:${this.task}`,e.search=this.queryParams.toString(),e.toString()}get baseUrl(){var e;return((e=this.requestOptions)==null?void 0:e.baseUrl)||`https://${AV}`}get apiVersion(){return SV}get modelPath(){if(this.apiSettings.backend instanceof Ad)return`projects/${this.apiSettings.project}/${this.model}`;if(this.apiSettings.backend instanceof tm)return`projects/${this.apiSettings.project}/locations/${this.apiSettings.backend.location}/${this.model}`;throw new de(me.ERROR,`Invalid backend: ${JSON.stringify(this.apiSettings.backend)}`)}get queryParams(){const e=new URLSearchParams;return this.stream&&e.set("alt","sse"),e}}function LV(){const t=[];return t.push(`${RV}/${TE}`),t.push(`fire/${TE}`),t.join(" ")}async function OV(t){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",LV()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){const n=await t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&gn.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){const n=await t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e}async function VV(t,e,n,r,i,s){const o=new QA(t,e,n,r,s);return{url:o.toString(),fetchOptions:{method:"POST",headers:await OV(o),body:i}}}async function Y0(t,e,n,r,i,s){const o=new QA(t,e,n,r,s);let a,l;try{const u=await VV(t,e,n,r,i,s),d=(s==null?void 0:s.timeout)!=null&&s.timeout>=0?s.timeout:kV,h=new AbortController;if(l=setTimeout(()=>h.abort(),d),u.fetchOptions.signal=h.signal,a=await fetch(u.url,u.fetchOptions),!a.ok){let m="",y;try{const I=await a.json();m=I.error.message,I.error.details&&(m+=` ${JSON.stringify(I.error.details)}`,y=I.error.details)}catch{}throw a.status===403&&y&&y.some(I=>I.reason==="SERVICE_DISABLED")&&y.some(I=>{var S,N;return(N=(S=I.links)==null?void 0:S[0])==null?void 0:N.description.includes("Google developers console API activation")})?new de(me.API_NOT_ENABLED,`The Firebase AI SDK requires the Firebase AI API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${o.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:y}):new de(me.FETCH_ERROR,`Error fetching from ${o}: [${a.status} ${a.statusText}] ${m}`,{status:a.status,statusText:a.statusText,errorDetails:y})}}catch(u){let d=u;throw u.code!==me.FETCH_ERROR&&u.code!==me.API_NOT_ENABLED&&u instanceof Error&&(d=new de(me.ERROR,`Error fetching from ${o.toString()}: ${u.message}`),d.stack=u.stack),d}finally{l&&clearTimeout(l)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&gn.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),YA(t.candidates[0]))throw new de(me.RESPONSE_ERROR,`Response error: ${To(t)}. Response body stored in error.response`,{response:t});return!0}else return!1}function fp(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),MV(t)}function MV(t){return t.text=()=>{if(Uh(t))return RE(t,e=>!e.thought);if(t.promptFeedback)throw new de(me.RESPONSE_ERROR,`Text not available. ${To(t)}`,{response:t});return""},t.thoughtSummary=()=>{if(Uh(t)){const e=RE(t,n=>!!n.thought);return e===""?void 0:e}else if(t.promptFeedback)throw new de(me.RESPONSE_ERROR,`Thought summary not available. ${To(t)}`,{response:t})},t.inlineDataParts=()=>{if(Uh(t))return jV(t);if(t.promptFeedback)throw new de(me.RESPONSE_ERROR,`Data not available. ${To(t)}`,{response:t})},t.functionCalls=()=>{if(Uh(t))return FV(t);if(t.promptFeedback)throw new de(me.RESPONSE_ERROR,`Function call not available. ${To(t)}`,{response:t})},t}function RE(t,e){var r,i,s,o;const n=[];if((i=(r=t.candidates)==null?void 0:r[0].content)!=null&&i.parts)for(const a of(o=(s=t.candidates)==null?void 0:s[0].content)==null?void 0:o.parts)a.text&&e(a)&&n.push(a.text);return n.length>0?n.join(""):""}function FV(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.functionCall&&e.push(o.functionCall);if(e.length>0)return e}function jV(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.inlineData&&e.push(o);if(e.length>0)return e}const UV=[xE.RECITATION,xE.SAFETY];function YA(t){return!!t.finishReason&&UV.some(e=>e===t.finishReason)}function To(t){var n,r,i;let e="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)e+="Response was blocked",(n=t.promptFeedback)!=null&&n.blockReason&&(e+=` due to ${t.promptFeedback.blockReason}`),(r=t.promptFeedback)!=null&&r.blockReasonMessage&&(e+=`: ${t.promptFeedback.blockReasonMessage}`);else if((i=t.candidates)!=null&&i[0]){const s=t.candidates[0];YA(s)&&(e+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(e+=`: ${s.finishMessage}`))}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){var e,n;if((e=t.safetySettings)==null||e.forEach(r=>{if(r.method)throw new de(me.UNSUPPORTED,"SafetySetting.method is not supported in the the Gemini Developer API. Please remove this property.")}),(n=t.generationConfig)!=null&&n.topK){const r=Math.round(t.generationConfig.topK);r!==t.generationConfig.topK&&(gn.warn("topK in GenerationConfig has been rounded to the nearest integer to match the format for requests to the Gemini Developer API."),t.generationConfig.topK=r)}return t}function J0(t){return{candidates:t.candidates?$V(t.candidates):void 0,prompt:t.promptFeedback?zV(t.promptFeedback):void 0,usageMetadata:t.usageMetadata}}function BV(t,e){return{generateContentRequest:{model:e,...t}}}function $V(t){const e=[];let n;return e&&t.forEach(r=>{var o;let i;if(r.citationMetadata&&(i={citations:r.citationMetadata.citationSources}),r.safetyRatings&&(n=r.safetyRatings.map(a=>({...a,severity:a.severity??WA.HARM_SEVERITY_UNSUPPORTED,probabilityScore:a.probabilityScore??0,severityScore:a.severityScore??0}))),(o=r.content)!=null&&o.parts.some(a=>a==null?void 0:a.videoMetadata))throw new de(me.UNSUPPORTED,"Part.videoMetadata is not supported in the Gemini Developer API. Please remove this property.");const s={index:r.index,content:r.content,finishReason:r.finishReason,finishMessage:r.finishMessage,safetyRatings:n,citationMetadata:i,groundingMetadata:r.groundingMetadata};e.push(s)}),e}function zV(t){const e=[];return t.safetyRatings.forEach(r=>{e.push({category:r.category,probability:r.probability,severity:r.severity??WA.HARM_SEVERITY_UNSUPPORTED,probabilityScore:r.probabilityScore??0,severityScore:r.severityScore??0,blocked:r.blocked})}),{blockReason:t.blockReason,safetyRatings:e,blockReasonMessage:t.blockReasonMessage}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function qV(t,e){const n=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=WV(n),[i,s]=r.tee();return{stream:HV(i,e),response:GV(s,e)}}async function GV(t,e){const n=[],r=t.getReader();for(;;){const{done:i,value:s}=await r.read();if(i){let o=KV(n);return e.backend.backendType===Li.GOOGLE_AI&&(o=J0(o)),fp(o)}n.push(s)}}async function*HV(t,e){const n=t.getReader();for(;;){const{value:r,done:i}=await n.read();if(i)break;let s;e.backend.backendType===Li.GOOGLE_AI?s=fp(J0(r)):s=fp(r),yield s}}function WV(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new de(me.PARSE_FAILED,"Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(kE),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new de(me.PARSE_FAILED,`Error parsing JSON response: "${l[1]}`));return}r.enqueue(u),i=i.substring(l[0].length),l=i.match(kE)}return s()})}}})}function KV(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const s=i.index||0;if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:i.index}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,n.candidates[s].groundingMetadata=i.groundingMetadata,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[]});const o={};for(const a of i.content.parts){if(a.text!==void 0){if(a.text==="")continue;o.text=a.text}if(a.functionCall&&(o.functionCall=a.functionCall),Object.keys(o).length===0)throw new de(me.INVALID_CONTENT,"Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[s].content.parts.push(o)}}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e,n,r){return t.backend.backendType===Li.GOOGLE_AI&&(n=JA(n)),Y0(e,Ku.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r)}async function XA(t,e,n,r,i){let s;return r&&await r.isAvailable(n)?s=await r.generateContentStream(n):s=await QV(t,e,n,i),qV(s,t)}async function YV(t,e,n,r){return t.backend.backendType===Li.GOOGLE_AI&&(n=JA(n)),Y0(e,Ku.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)}async function ZA(t,e,n,r,i){let s;r&&await r.isAvailable(n)?s=await r.generateContent(n):s=await YV(t,e,n,i);const o=await JV(s,t);return{response:fp(o)}}async function JV(t,e){const n=await t.json();return e.backend.backendType===Li.GOOGLE_AI?J0(n):n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function a_(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return XV(e)}function XV(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new de(me.INVALID_CONTENT,"Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!r&&!i)throw new de(me.INVALID_CONTENT,"No Content is provided for sending chat message.");return r?e:n}function Mg(t){let e;return t.contents?e=t:e={contents:[a_(t)]},t.systemInstruction&&(e.systemInstruction=eS(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=["text","inlineData","functionCall","functionResponse","thought","thoughtSignature"],ZV={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","thought","thoughtSignature"],system:["text"]},CE={user:["model"],function:["model"],model:["user","function"],system:[]};function eM(t){let e=null;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new de(me.INVALID_CONTENT,`First Content should be with role 'user', got ${r}`);if(!bE.includes(r))throw new de(me.INVALID_CONTENT,`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(bE)}`);if(!Array.isArray(i))throw new de(me.INVALID_CONTENT,"Content should have 'parts' property with an array of Parts");if(i.length===0)throw new de(me.INVALID_CONTENT,"Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,thought:0,thoughtSignature:0};for(const a of i)for(const l of PE)l in a&&(s[l]+=1);const o=ZV[r];for(const a of PE)if(!o.includes(a)&&s[a]>0)throw new de(me.INVALID_CONTENT,`Content with role '${r}' can't contain '${a}' part`);if(e&&!CE[r].includes(e.role))throw new de(me.INVALID_CONTENT,`Content with role '${r}' can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(CE)}`);e=n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="SILENT_ERROR";class tM{constructor(e,n,r,i,s){this.model=n,this.chromeAdapter=r,this.params=i,this.requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,i!=null&&i.history&&(eM(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var s,o,a,l,u;await this._sendPromise;const n=a_(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(l=this.params)==null?void 0:l.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]};let i={};return this._sendPromise=this._sendPromise.then(()=>ZA(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions)).then(d=>{var h,m;if(d.response.candidates&&d.response.candidates.length>0){this._history.push(n);const y={parts:((h=d.response.candidates)==null?void 0:h[0].content.parts)||[],role:((m=d.response.candidates)==null?void 0:m[0].content.role)||"model"};this._history.push(y)}else{const y=To(d.response);y&&gn.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}i=d}),await this._sendPromise,i}async sendMessageStream(e){var s,o,a,l,u;await this._sendPromise;const n=a_(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(l=this.params)==null?void 0:l.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]},i=XA(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>i).catch(d=>{throw new Error(NE)}).then(d=>d.response).then(d=>{if(d.candidates&&d.candidates.length>0){this._history.push(n);const h={...d.candidates[0].content};h.role||(h.role="model"),this._history.push(h)}else{const h=To(d);h&&gn.warn(`sendMessageStream() was unsuccessful. ${h}. Inspect response object for details.`)}}).catch(d=>{d.message!==NE&&gn.error(d)}),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e,n,r){let i="";if(t.backend.backendType===Li.GOOGLE_AI){const o=BV(n,e);i=JSON.stringify(o)}else i=JSON.stringify(n);return(await Y0(e,Ku.COUNT_TOKENS,t,!1,i,r)).json()}async function rM(t,e,n,r,i){return r&&await r.isAvailable(n)?(await r.countTokens(n)).json():nM(t,e,n,i)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM extends mu{constructor(e,n,r,i){super(e,n.model),this.chromeAdapter=i,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=eS(n.systemInstruction),this.requestOptions=r||{}}async generateContent(e){const n=Mg(e);return ZA(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}async generateContentStream(e){const n=Mg(e);return XA(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}startChat(e){return new tM(this._apiSettings,this.model,this.chromeAdapter,{tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,generationConfig:this.generationConfig,safetySettings:this.safetySettings,...e},this.requestOptions)}async countTokens(e){const n=Mg(e);return rM(this._apiSettings,this.model,n,this.chromeAdapter)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t=xd(),e){t=Z(t);const n=Cr(t,Sl),r=(e==null?void 0:e.backend)??new Ad,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=NV(r),o=n.getImmediate({identifier:s});return o.options=i,o}function oM(t,e,n){var o;const r=e;let i;if(r.mode?i=r.inCloudParams||{model:PV}:i=e,!i.model)throw new de(me.NO_MODEL,"Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");const s=(o=t.chromeAdapterFactory)==null?void 0:o.call(t,r.mode,typeof window>"u"?void 0:window,r.onDeviceParams);return new iM(t,i,n,s)}var po;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(po||(po={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return gn.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===SE.ONLY_IN_CLOUD)return gn.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===SE.ONLY_ON_DEVICE){if(n===po.UNAVAILABLE)throw new de(me.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===po.DOWNLOADABLE||n===po.DOWNLOADING)&&(gn.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==po.AVAILABLE?(gn.debug(`On-device inference unavailable because availability is "${n}".`),!1):vr.isOnDeviceRequest(e)?!0:(gn.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(vr.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return vr.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(vr.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return vr.toStreamResponse(i)}async countTokens(e){throw new de(me.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return gn.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return gn.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&vr.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return gn.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===po.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(vr.toLanguageModelMessageContent));return{role:vr.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new de(me.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new de(me.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}vr.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function aM(t,e,n){if(typeof e<"u"&&t)return new vr(e.LanguageModel,t,n)}function lM(t,{instanceIdentifier:e}){if(!e)throw new de(me.ERROR,"AIService instance identifier is undefined.");const n=DV(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new CV(r,n,i,s,aM)}function cM(){ur(new Wn(Sl,lM,"PUBLIC").setMultipleInstances(!0)),Jt(IE,o_),Jt(IE,o_,"esm2020")}cM();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$={PHONE:"phone",TOTP:"totp"},z$={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q$={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},G$={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},H$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function tS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W$=uM,dM=tS,nS=new Zo("auth","Firebase",tS()),K$={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new bd("@firebase/auth");function hM(t,...e){pp.logLevel<=_e.WARN&&pp.warn(`Auth (${ea}): ${t}`,...e)}function pf(t,...e){pp.logLevel<=_e.ERROR&&pp.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw Z0(t,...e)}function an(t,...e){return Z0(t,...e)}function X0(t,e,n){const r={...dM(),[e]:n};return new Zo("auth","Firebase",r).create(e,{appName:t.name})}function kt(t){return X0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),X0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nS.create(t,...e)}function H(t,e,...n){if(!t)throw Z0(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pf(e),new Error(e)}function Si(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ew(){return DE()==="http:"||DE()==="https:"}function DE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ew()||pA()||"connection"in navigator)?navigator.onLine:!0}function pM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Si(n>e,"Short delay should be less than long delay!"),this.isMobile=VD()||FD()}get(){return fM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){Si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yM=new Sd(3e4,6e4);function ze(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qe(t,e,n,r,i={}){return iS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Xl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return MD()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Di(t.emulatorConfig.host)&&(u.credentials="include"),rS.fetch()(await sS(t,t.config.apiHost,n,a),u)})}async function iS(t,e,n){t._canInitEmulator=!1;const r={...mM,...e};try{const i=new wM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Zc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zc(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw X0(t,d,u);An(t,d)}}catch(i){if(i instanceof Jn)throw i;An(t,"network-request-failed",{message:String(i)})}}async function Oi(t,e,n,r,i={}){const s=await qe(t,e,n,r,i);return"mfaPendingCredential"in s&&An(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function sS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?tw(t.config,i):`${t.config.apiScheme}://${i}`;return gM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function _M(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),yM.get())})}}function Zc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=an(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){return t!==void 0&&t.getResponse!==void 0}function OE(t){return t!==void 0&&t.enterprise!==void 0}class oS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _M(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t){return(await qe(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function aS(t,e){return qe(t,"GET","/v2/recaptchaConfig",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t,e){return qe(t,"POST","/v1/accounts:delete",e)}async function EM(t,e){return qe(t,"POST","/v1/accounts:update",e)}async function mp(t,e){return qe(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t,e=!1){return Z(t).getIdToken(e)}async function TM(t,e=!1){const n=Z(t),r=await n.getIdToken(e),i=nm(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gu(Fg(i.auth_time)),issuedAtTime:gu(Fg(i.iat)),expirationTime:gu(Fg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fg(t){return Number(t)*1e3}function nm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const i=oA(n);return i?JSON.parse(i):(pf("Failed to decode base64 JWT payload"),null)}catch(i){return pf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function VE(t){const e=nm(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&bM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gu(this.lastLoginAt),this.creationTime=gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ri(t,mp(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?lS(i.providerUserInfo):[],o=SM(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new l_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function AM(t){const e=Z(t);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e){const n=await iS(t,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await sS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Di(t.emulatorConfig.host)&&(l.credentials="include"),rS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kM(t,e){return qe(t,"POST","/v2/accounts:revokeToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=VE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pl;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new xM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new l_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ri(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TM(this,e)}reload(){return AM(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Be(this.auth.app))return Promise.reject(kt(this.auth));const e=await this.getIdToken();return await Ri(this,IM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:y,providerData:I,stsTokenManager:S}=n;H(h&&S,e,"internal-error");const N=pl.fromJSON(this.name,S);H(typeof h=="string",e,"internal-error"),Ki(r,e.name),Ki(i,e.name),H(typeof m=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),Ki(s,e.name),Ki(o,e.name),Ki(a,e.name),Ki(l,e.name),Ki(u,e.name),Ki(d,e.name);const E=new xr({uid:h,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:N,createdAt:u,lastLoginAt:d});return I&&Array.isArray(I)&&(E.providerData=I.map(v=>({...v}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new pl;i.updateFromServerResponse(n);const s=new xr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];H(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new pl;a.updateFromIdToken(r);const l=new xr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new l_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function yi(t){Si(t instanceof Function,"Expected a class definition");let e=ME.get(t);return e?(Si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ME.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cS.type="NONE";const FE=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e,n){return`firebase:${t}:${e}:${n}`}class ml{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mf(this.userKey,i.apiKey,s),this.fullPersistenceKey=mf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mp(this.auth,{idToken:e}).catch(()=>{});return n?xr._fromGetAccountInfoResponse(this.auth,n,e):null}return xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ml(yi(FE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||yi(FE);const o=mf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const m=await mp(e,{idToken:d}).catch(()=>{});if(!m)break;h=await xr._fromGetAccountInfoResponse(e,m,d)}else h=xr._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ml(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ml(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mS(e))return"Blackberry";if(gS(e))return"Webos";if(dS(e))return"Safari";if((e.includes("chrome/")||hS(e))&&!e.includes("edge/"))return"Chrome";if(pS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uS(t=It()){return/firefox\//i.test(t)}function dS(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hS(t=It()){return/crios\//i.test(t)}function fS(t=It()){return/iemobile/i.test(t)}function pS(t=It()){return/android/i.test(t)}function mS(t=It()){return/blackberry/i.test(t)}function gS(t=It()){return/webos/i.test(t)}function nw(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PM(t=It()){var e;return nw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function CM(){return jD()&&document.documentMode===10}function yS(t=It()){return nw(t)||pS(t)||gS(t)||mS(t)||/windows phone/i.test(t)||fS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e=[]){let n;switch(t){case"Browser":n=jE(It());break;case"Worker":n=`${jE(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,e={}){return qe(t,"GET","/v2/passwordPolicy",ze(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=6;class OM{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new UE(this),this.idTokenSubscription=new UE(this),this.beforeStateQueue=new NM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mp(this,{idToken:e}),r=await xr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Be(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Be(this.app))return Promise.reject(kt(this));const n=e?Z(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Be(this.app)?Promise.reject(kt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Be(this.app)?Promise.reject(kt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DM(this),n=new OM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yi(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lt(t){return Z(t)}class UE{constructor(e){this.auth=e,this.observer=null,this.addObserver=GD(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MM(t){Rd=t}function rw(t){return Rd.loadJS(t)}function FM(){return Rd.recaptchaV2Script}function jM(){return Rd.recaptchaEnterpriseScript}function UM(){return Rd.gapiScript}function wS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=500,$M=6e4,Bh=1e12;class zM{constructor(e){this.auth=e,this.counter=Bh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new HM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Bh;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Bh;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Bh;return(r=this._widgets.get(n))==null||r.execute(),""}}class qM{constructor(){this.enterprise=new GM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=WM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},$M)},BM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function WM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const KM="recaptcha-enterprise",yu="NO_RECAPTCHA";class vS{constructor(e){this.type=KM,this.auth=lt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{aS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new oS(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;OE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(yu)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&OE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jM();l.length!==0&&(l+=a),rw(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Uc(t,e,n,r=!1,i=!1){const s=new vS(t);let o;if(i)o=yu;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ss(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Uc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Uc(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Uc(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Uc(t,e,n,!1,!0);return r(t,d)}return Promise.reject(l)})}else{const a=await Uc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function IS(t){const e=lt(t),n=await aS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new oS(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new vS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t,e){const n=Cr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cr(s,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function YM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JM(t,e,n){const r=lt(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ES(e),{host:o,port:a}=XM(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(cr(u,r.config.emulator)&&cr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Di(o)?(Xp(`${s}//${o}${l}`),$0("Auth",!0)):i||ZM()}function ES(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XM(t){const e=ES(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:BE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:BE(o)}}}function BE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(t,e){return qe(t,"POST","/v1/accounts:resetPassword",ze(t,e))}async function e4(t,e){return qe(t,"POST","/v1/accounts:update",e)}async function t4(t,e){return qe(t,"POST","/v1/accounts:signUp",e)}async function n4(t,e){return qe(t,"POST","/v1/accounts:update",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e){return Oi(t,"POST","/v1/accounts:signInWithPassword",ze(t,e))}async function rm(t,e){return qe(t,"POST","/v1/accounts:sendOobCode",ze(t,e))}async function i4(t,e){return rm(t,e)}async function s4(t,e){return rm(t,e)}async function o4(t,e){return rm(t,e)}async function a4(t,e){return rm(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(t,e){return Oi(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}async function c4(t,e){return Oi(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends kd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ju(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ju(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ss(e,n,"signInWithPassword",r4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return l4(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ss(e,r,"signUpPassword",t4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c4(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return Oi(t,"POST","/v1/accounts:signInWithIdp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4="http://localhost";class ki extends kd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ki(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:u4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $E(t,e){return qe(t,"POST","/v1/accounts:sendVerificationCode",ze(t,e))}async function d4(t,e){return Oi(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e))}async function h4(t,e){const n=await Oi(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e));if(n.temporaryProof)throw Zc(t,"account-exists-with-different-credential",n);return n}const f4={USER_NOT_FOUND:"user-not-found"};async function p4(t,e){const n={...e,operation:"REAUTH"};return Oi(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,n),f4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends kd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ro({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ro({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return d4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return h4(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return p4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ro({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function g4(t){const e=Jc(Xc(t)).link,n=e?Jc(Xc(e)).deep_link_id:null,r=Jc(Xc(t)).deep_link_id;return(r?Jc(Xc(r)).link:null)||r||n||e||t}class Pd{constructor(e){const n=Jc(Xc(e)),r=n.apiKey??null,i=n.oobCode??null,s=m4(n.mode??null);H(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=g4(e);try{return new Pd(n)}catch{return null}}}function Y$(t){return Pd.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return Ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pd.parseLink(n);return H(r,"argument-error"),Ju._fromEmailAndCode(e,r.code,r.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gf extends ec{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),ki._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),ki._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return gf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new gf(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends ec{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ki._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return os.credential(n,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends ec{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="http://localhost";class Xu extends kd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Xu(r,s)}static _create(e,n){return new Xu(e,n)}buildRequest(){return{requestUri:y4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="saml.";class c_ extends Vi{constructor(e){H(e.startsWith(_4),"argument-error"),super(e)}static credentialFromResult(e){return c_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return c_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Xu.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Xu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends ec{constructor(){super("twitter.com")}static credential(e,n){return ki._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(t,e){return Oi(t,"POST","/v1/accounts:signUp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await xr._fromIdTokenResponse(e,r,i),o=zE(r);return new dr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=zE(r);return new dr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function zE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t){var i;if(Be(t.app))return Promise.reject(kt(t));const e=lt(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new dr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await bS(e,{returnSecureToken:!0}),r=await dr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends Jn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gp(e,n,r,i)}}function xS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gp._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J$(t,e){const n=Z(t);await im(!0,n,e);const{providerUserInfo:r}=await EM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=AS(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function iw(t,e,n=!1){const r=await Ri(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return dr._forOperation(t,"link",r)}async function im(t,e,n){await Yu(e);const r=AS(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(t,e,n=!1){const{auth:r}=t;if(Be(r.app))return Promise.reject(kt(r));const i="reauthenticate";try{const s=await Ri(t,xS(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=nm(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),dr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&An(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e,n=!1){if(Be(t.app))return Promise.reject(kt(t));const r="signIn",i=await xS(t,r,e),s=await dr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function sw(t,e){return RS(lt(t),e)}async function v4(t,e){const n=Z(t);return await im(!1,n,e.providerId),iw(n,e)}async function I4(t,e){return SS(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e){return Oi(t,"POST","/v1/accounts:signInWithCustomToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(t,e){if(Be(t.app))return Promise.reject(kt(t));const n=lt(t),r=await E4(n,{token:e,returnSecureToken:!0}),i=await dr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?ow._fromServerResponse(e,n):"totpInfo"in n?aw._fromServerResponse(e,n):An(e,"internal-error")}}class ow extends Cd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new ow(n)}}class aw extends Cd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new aw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e,n){var r;H(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(t){const e=lt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z$(t,e,n){const r=lt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&sm(r,i,n),await Ss(r,i,"getOobCode",s4,"EMAIL_PASSWORD_PROVIDER")}async function ez(t,e,n){await TS(Z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lw(t),r})}async function tz(t,e){await n4(Z(t),{oobCode:e})}async function T4(t,e){const n=Z(t),r=await TS(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Cd._fromServerResponse(lt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function nz(t,e){const{data:n}=await T4(Z(t),e);return n.email}async function rz(t,e,n){if(Be(t.app))return Promise.reject(kt(t));const r=lt(t),o=await Ss(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bS,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&lw(t),l}),a=await dr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function iz(t,e,n){return Be(t.app)?Promise.reject(kt(t)):sw(Z(t),ta.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sz(t,e,n){const r=lt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&sm(r,o,a)}s(i,n),await Ss(r,i,"getOobCode",o4,"EMAIL_PASSWORD_PROVIDER")}function oz(t,e){const n=Pd.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function az(t,e,n){if(Be(t.app))return Promise.reject(kt(t));const r=Z(t),i=ta.credentialWithLink(e,n||Qu());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),sw(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(t,e){return qe(t,"POST","/v1/accounts:createAuthUri",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(t,e){const n=ew()?Qu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await b4(Z(t),r);return i||[]}async function cz(t,e){const n=Z(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&sm(n.auth,i,e);const{email:s}=await i4(n.auth,i);s!==t.email&&await t.reload()}async function uz(t,e,n){const r=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&sm(r.auth,s,n);const{email:o}=await a4(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e){return qe(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Z(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ri(r,x4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function hz(t,e){const n=Z(t);return Be(n.auth.app)?Promise.reject(kt(n.auth)):kS(n,e,null)}function fz(t,e){return kS(Z(t),null,e)}async function kS(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ri(t,e4(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=nm(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new gl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new S4(r,n);case"github.com":return new R4(r,n);case"google.com":return new k4(r,n);case"twitter.com":return new P4(r,n,t.screenName||null);case"custom":case"anonymous":return new gl(r,null);default:return new gl(r,e,n)}}class gl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class PS extends gl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class S4 extends gl{constructor(e,n){super(e,"facebook.com",n)}}class R4 extends PS{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class k4 extends gl{constructor(e,n){super(e,"google.com",n)}}class P4 extends PS{constructor(e,n,r){super(e,"twitter.com",n,r)}}function pz(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:A4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t,e){return Z(t).setPersistence(e)}function gz(t){return IS(t)}async function yz(t,e){return lt(t).validatePassword(e)}function C4(t,e,n,r){return Z(t).onIdTokenChanged(e,n,r)}function N4(t,e,n){return Z(t).beforeAuthStateChanged(e,n)}function D4(t,e,n,r){return Z(t).onAuthStateChanged(e,n,r)}function _z(t){Z(t).useDeviceLanguage()}function wz(t,e){return Z(t).updateCurrentUser(e)}function vz(t){return Z(t).signOut()}function Iz(t,e){return lt(t).revokeAccessToken(e)}async function Ez(t){return Z(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new bo("enroll",e,n)}static _fromMfaPendingCredential(e){return new bo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return bo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return bo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=lt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Cd._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=bo._fromMfaPendingCredential(i.mfaPendingCredential);return new cw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const d=await dr._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return H(n.user,r,"internal-error"),dr._forOperation(n.user,n.operationType,u);default:An(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Tz(t,e){var i;const n=Z(t),r=e;return H(e.customData.operationType,n,"argument-error"),H((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),cw._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function L4(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function O4(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function V4(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function M4(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(t,e))}class uw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Cd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new uw(e)}async getSession(){return bo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ri(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ri(this.user,M4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const jg=new WeakMap;function bz(t){const e=Z(t);return jg.has(e)||jg.set(e,uw._fromUser(e)),jg.get(e)}const yp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yp,"1"),this.storage.removeItem(yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1e3,j4=10;class NS extends CS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);CM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,j4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},F4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NS.type="LOCAL";const U4=NS;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=1e3;function Ug(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Bg(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class DS{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Bg(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return Ug(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Bg(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Bg(e);if(window.cookieStore){const a=u=>{const d=u.changed.find(m=>m.name===r);d&&n(d.value),u.deleted.find(m=>m.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=Ug(r);const s=setInterval(()=>{const a=Ug(r);a!==i&&(n(a),i=a)},B4),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}DS.type="COOKIE";const xz=DS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends CS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LS.type="SESSION";const OS=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new om(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await $4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}om.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=am("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return window}function q4(t){mt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){return typeof mt().WorkerGlobalScope<"u"&&typeof mt().importScripts=="function"}async function G4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function W4(){return dw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="firebaseLocalStorageDb",K4=1,_p="firebaseLocalStorage",MS="fbase_key";class Nd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lm(t,e){return t.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function Q4(){const t=indexedDB.deleteDatabase(VS);return new Nd(t).toPromise()}function u_(){const t=indexedDB.open(VS,K4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_p,{keyPath:MS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_p)?e(r):(r.close(),await Q4(),e(await u_()))})})}async function GE(t,e,n){const r=lm(t,!0).put({[MS]:e,value:n});return new Nd(r).toPromise()}async function Y4(t,e){const n=lm(t,!1).get(e),r=await new Nd(n).toPromise();return r===void 0?null:r.value}function HE(t,e){const n=lm(t,!0).delete(e);return new Nd(n).toPromise()}const J4=800,X4=3;class FS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>X4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=om._getInstance(W4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await G4(),!this.activeServiceWorker)return;this.sender=new z4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u_();return await GE(e,yp,"1"),await HE(e,yp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>GE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Y4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>HE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lm(i,!1).getAll();return new Nd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FS.type="LOCAL";const Z4=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:start",ze(t,e))}function eF(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}function tF(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=wS("rcb"),nF=new Sd(3e4,6e4);class rF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=mt().grecaptcha)!=null&&e.render)}load(e,n=""){return H(iF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&LE(mt().grecaptcha)?Promise.resolve(mt().grecaptcha):new Promise((r,i)=>{const s=mt().setTimeout(()=>{i(an(e,"network-request-failed"))},nF.get());mt()[$g]=()=>{mt().clearTimeout(s),delete mt()[$g];const a=mt().grecaptcha;if(!a||!LE(a)){i(an(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${FM()}?${Xl({onload:$g,render:"explicit",hl:n})}`;rw(o).catch(()=>{clearTimeout(s),i(an(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=mt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function iF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class sF{async load(e){return new zM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="recaptcha",oF={theme:"light",type:"image"};class Az{constructor(e,n,r={...oF}){this.parameters=r,this.type=_u,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lt(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sF:new rF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=mt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(ew()&&!dw(),this.auth,"internal-error"),await aF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await vM(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function aF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ro._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Sz(t,e,n){if(Be(t.app))return Promise.reject(kt(t));const r=lt(t),i=await cm(r,e,Z(n));return new hw(i,s=>sw(r,s))}async function Rz(t,e,n){const r=Z(t);await im(!1,r,"phone");const i=await cm(r.auth,e,Z(n));return new hw(i,s=>v4(r,s))}async function kz(t,e,n){const r=Z(t);if(Be(r.auth.app))return Promise.reject(kt(r.auth));const i=await cm(r.auth,e,Z(n));return new hw(i,s=>I4(r,s))}async function cm(t,e,n){var r;if(!t._getRecaptchaConfig())try{await IS(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){H(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ss(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===yu){H((n==null?void 0:n.type)===_u,d,"argument-error");const m=await zg(d,h,n);return qE(d,m)}return qE(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;H(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ss(t,a,"mfaSmsSignIn",async(h,m)=>{if(m.phoneSignInInfo.captchaResponse===yu){H((n==null?void 0:n.type)===_u,h,"argument-error");const y=await zg(h,m,n);return WE(h,y)}return WE(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ss(t,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===yu){H((n==null?void 0:n.type)===_u,u,"argument-error");const h=await zg(u,d,n);return $E(u,h)}return $E(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function Pz(t,e){const n=Z(t);if(Be(n.auth.app))return Promise.reject(kt(n.auth));await iw(n,e)}async function zg(t,e,n){H(n.type===_u,t,"argument-error");const r=await n.verify();H(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.providerId=yl.PROVIDER_ID,this.auth=lt(e)}verifyPhoneNumber(e,n){return cm(this.auth,e,Z(n))}static credential(e,n){return Ro._fromVerification(e,n)}static credentialFromResult(e){const n=e;return yl.credentialFromTaggedObject(n)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ro._fromTokenResponse(n,r):null}}yl.PROVIDER_ID="phone";yl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){return e?yi(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw extends kd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lF(t){return RS(t.auth,new fw(t),t.bypassAuthState)}function cF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),SS(n,new fw(t),t.bypassAuthState)}async function uF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),iw(n,new fw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lF;case"linkViaPopup":case"linkViaRedirect":return uF;case"reauthViaPopup":case"reauthViaRedirect":return cF;default:An(this.auth,"internal-error")}}resolve(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new Sd(2e3,1e4);async function Cz(t,e,n){if(Be(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const r=lt(t);Zl(t,e,Vi);const i=na(r,n);return new _i(r,"signInViaPopup",e,i).executeNotNull()}async function Nz(t,e,n){const r=Z(t);if(Be(r.auth.app))return Promise.reject(an(r.auth,"operation-not-supported-in-this-environment"));Zl(r.auth,e,Vi);const i=na(r.auth,n);return new _i(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Dz(t,e,n){const r=Z(t);Zl(r.auth,e,Vi);const i=na(r.auth,n);return new _i(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class _i extends jS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,_i.currentPopupAction&&_i.currentPopupAction.cancel(),_i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){Si(this.filter.length===1,"Popup operations only handle one event");const e=am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dF.get())};e()}}_i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF="pendingRedirect",yf=new Map;class fF extends jS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yf.get(this.auth._key());if(!e){try{const r=await pF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yf.set(this.auth._key(),e)}return this.bypassAuthState||yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pF(t,e){const n=BS(e),r=US(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function pw(t,e){return US(t)._set(BS(e),"true")}function mF(t,e){yf.set(t._key(),e)}function US(t){return yi(t._redirectPersistence)}function BS(t){return mf(hF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t,e,n){return gF(t,e,n)}async function gF(t,e,n){if(Be(t.app))return Promise.reject(kt(t));const r=lt(t);Zl(t,e,Vi),await r._initializationPromise;const i=na(r,n);return await pw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Oz(t,e,n){return yF(t,e,n)}async function yF(t,e,n){const r=Z(t);if(Zl(r.auth,e,Vi),Be(r.auth.app))return Promise.reject(kt(r.auth));await r.auth._initializationPromise;const i=na(r.auth,n);await pw(i,r.auth);const s=await zS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Vz(t,e,n){return _F(t,e,n)}async function _F(t,e,n){const r=Z(t);Zl(r.auth,e,Vi),await r.auth._initializationPromise;const i=na(r.auth,n);await im(!1,r,e.providerId),await pw(i,r.auth);const s=await zS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Mz(t,e){return await lt(t)._initializationPromise,$S(t,e,!1)}async function $S(t,e,n=!1){if(Be(t.app))return Promise.reject(kt(t));const r=lt(t),i=na(r,e),o=await new fF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function zS(t){const e=am(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=10*60*1e3;class vF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(an(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wF&&this.cachedEventUids.clear(),this.cachedEventUids.has(KE(e))}saveEventToCache(e){this.cachedEventUids.add(KE(e)),this.lastProcessedEventTime=Date.now()}}function KE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e={}){return qe(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bF=/^https?/;async function xF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EF(t);for(const n of e)try{if(AF(n))return}catch{}An(t,"unauthorized-domain")}function AF(t){const e=Qu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bF.test(n))return!1;if(TF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new Sd(3e4,6e4);function QE(){const t=mt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RF(t){return new Promise((e,n)=>{var i,s,o;function r(){QE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QE(),n(an(t,"network-request-failed"))},timeout:SF.get()})}if((s=(i=mt().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=mt().gapi)!=null&&o.load)r();else{const a=wS("iframefcb");return mt()[a]=()=>{gapi.load?r():n(an(t,"network-request-failed"))},rw(`${UM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _f=null,e})}let _f=null;function kF(t){return _f=_f||RF(t),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new Sd(5e3,15e3),CF="__/auth/iframe",NF="emulator/auth/iframe",DF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OF(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?tw(e,NF):`https://${t.config.authDomain}/${CF}`,r={apiKey:e.apiKey,appName:t.name,v:ea},i=LF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xl(r).slice(1)}`}async function VF(t){const e=await kF(t),n=mt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:OF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),a=mt().setTimeout(()=>{s(o)},PF.get());function l(){mt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FF=500,jF=600,UF="_blank",BF="http://localhost";class YE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $F(t,e,n,r=FF,i=jF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...MF,width:r.toString(),height:i.toString(),top:s,left:o},u=It().toLowerCase();n&&(a=hS(u)?UF:n),uS(u)&&(e=e||BF,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(PM(u)&&a!=="_self")return zF(e||"",a),new YE(null);const h=window.open(e||"",a,d);H(h,t,"popup-blocked");try{h.focus()}catch{}return new YE(h)}function zF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="__/auth/handler",GF="emulator/auth/handler",HF=encodeURIComponent("fac");async function JE(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ea,eventId:i};if(e instanceof Vi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof ec){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${HF}=${encodeURIComponent(l)}`:"";return`${WF(t)}?${Xl(a).slice(1)}${u}`}function WF({config:t}){return t.emulator?tw(t,GF):`https://${t.authDomain}/${qF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="webStorageSupport";class KF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OS,this._completeRedirectFn=$S,this._overrideRedirectResult=mF}async _openPopup(e,n,r,i){var o;Si((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await JE(e,n,r,Qu(),i);return $F(e,s,am())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await JE(e,n,r,Qu(),i);return q4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Si(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VF(e),r=new vF(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qg,{type:qg},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[qg];s!==void 0&&n(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yS()||dS()||nw()}}const QF=KF;class GS{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Kr("unexpected MultiFactorSessionType")}}}class mw extends GS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new mw(e)}_finalizeEnroll(e,n,r){return L4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return eF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class YF{constructor(){}static assertion(e){return mw._fromCredential(e)}}YF.FACTOR_ID="phone";class JF{static assertionForEnrollment(e,n){return Zu._fromSecret(e,n)}static assertionForSignIn(e,n){return Zu._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;H(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await O4(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return gw._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}JF.FACTOR_ID="totp";class Zu extends GS{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Zu(n,void 0,e)}static _fromEnrollmentId(e,n){return new Zu(n,e)}async _finalizeEnroll(e,n,r){return H(typeof this.secret<"u",e,"argument-error"),V4(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return tF(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class gw{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new gw(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return($h(e)||$h(n))&&(r=!0),r&&($h(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),$h(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function $h(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var XE="@firebase/auth",ZE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e3(t){ur(new Wn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_S(t)},u=new VM(r,i,s,l);return YM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ur(new Wn("auth-internal",e=>{const n=lt(e.getProvider("auth").getImmediate());return(r=>new XF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(XE,ZE,ZF(t)),Jt(XE,ZE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=5*60,n3=dA("authIdTokenMaxAge")||t3;let eT=null;const r3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>n3)return;const i=n==null?void 0:n.token;eT!==i&&(eT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function i3(t=xd()){const e=Cr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QM(t,{popupRedirectResolver:QF,persistence:[Z4,U4,OS]}),r=dA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=r3(s.toString());N4(n,o,()=>o(n.currentUser)),C4(n,a=>o(a))}}const i=lA("auth");return i&&JM(n,`http://${i}`),n}function s3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}MM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=an("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",s3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e3("Browser");var tT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,HS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function x(){}x.prototype=w.prototype,T.D=w.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(k,C,L){for(var R=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)R[$t-2]=arguments[$t];return w.prototype[C].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,x){x||(x=0);var k=Array(16);if(typeof w=="string")for(var C=0;16>C;++C)k[C]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(C=0;16>C;++C)k[C]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=T.g[0],x=T.g[1],C=T.g[2];var L=T.g[3],R=w+(L^x&(C^L))+k[0]+3614090360&4294967295;w=x+(R<<7&4294967295|R>>>25),R=L+(C^w&(x^C))+k[1]+3905402710&4294967295,L=w+(R<<12&4294967295|R>>>20),R=C+(x^L&(w^x))+k[2]+606105819&4294967295,C=L+(R<<17&4294967295|R>>>15),R=x+(w^C&(L^w))+k[3]+3250441966&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(L^x&(C^L))+k[4]+4118548399&4294967295,w=x+(R<<7&4294967295|R>>>25),R=L+(C^w&(x^C))+k[5]+1200080426&4294967295,L=w+(R<<12&4294967295|R>>>20),R=C+(x^L&(w^x))+k[6]+2821735955&4294967295,C=L+(R<<17&4294967295|R>>>15),R=x+(w^C&(L^w))+k[7]+4249261313&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(L^x&(C^L))+k[8]+1770035416&4294967295,w=x+(R<<7&4294967295|R>>>25),R=L+(C^w&(x^C))+k[9]+2336552879&4294967295,L=w+(R<<12&4294967295|R>>>20),R=C+(x^L&(w^x))+k[10]+4294925233&4294967295,C=L+(R<<17&4294967295|R>>>15),R=x+(w^C&(L^w))+k[11]+2304563134&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(L^x&(C^L))+k[12]+1804603682&4294967295,w=x+(R<<7&4294967295|R>>>25),R=L+(C^w&(x^C))+k[13]+4254626195&4294967295,L=w+(R<<12&4294967295|R>>>20),R=C+(x^L&(w^x))+k[14]+2792965006&4294967295,C=L+(R<<17&4294967295|R>>>15),R=x+(w^C&(L^w))+k[15]+1236535329&4294967295,x=C+(R<<22&4294967295|R>>>10),R=w+(C^L&(x^C))+k[1]+4129170786&4294967295,w=x+(R<<5&4294967295|R>>>27),R=L+(x^C&(w^x))+k[6]+3225465664&4294967295,L=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(L^w))+k[11]+643717713&4294967295,C=L+(R<<14&4294967295|R>>>18),R=x+(L^w&(C^L))+k[0]+3921069994&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^L&(x^C))+k[5]+3593408605&4294967295,w=x+(R<<5&4294967295|R>>>27),R=L+(x^C&(w^x))+k[10]+38016083&4294967295,L=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(L^w))+k[15]+3634488961&4294967295,C=L+(R<<14&4294967295|R>>>18),R=x+(L^w&(C^L))+k[4]+3889429448&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^L&(x^C))+k[9]+568446438&4294967295,w=x+(R<<5&4294967295|R>>>27),R=L+(x^C&(w^x))+k[14]+3275163606&4294967295,L=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(L^w))+k[3]+4107603335&4294967295,C=L+(R<<14&4294967295|R>>>18),R=x+(L^w&(C^L))+k[8]+1163531501&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(C^L&(x^C))+k[13]+2850285829&4294967295,w=x+(R<<5&4294967295|R>>>27),R=L+(x^C&(w^x))+k[2]+4243563512&4294967295,L=w+(R<<9&4294967295|R>>>23),R=C+(w^x&(L^w))+k[7]+1735328473&4294967295,C=L+(R<<14&4294967295|R>>>18),R=x+(L^w&(C^L))+k[12]+2368359562&4294967295,x=C+(R<<20&4294967295|R>>>12),R=w+(x^C^L)+k[5]+4294588738&4294967295,w=x+(R<<4&4294967295|R>>>28),R=L+(w^x^C)+k[8]+2272392833&4294967295,L=w+(R<<11&4294967295|R>>>21),R=C+(L^w^x)+k[11]+1839030562&4294967295,C=L+(R<<16&4294967295|R>>>16),R=x+(C^L^w)+k[14]+4259657740&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^L)+k[1]+2763975236&4294967295,w=x+(R<<4&4294967295|R>>>28),R=L+(w^x^C)+k[4]+1272893353&4294967295,L=w+(R<<11&4294967295|R>>>21),R=C+(L^w^x)+k[7]+4139469664&4294967295,C=L+(R<<16&4294967295|R>>>16),R=x+(C^L^w)+k[10]+3200236656&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^L)+k[13]+681279174&4294967295,w=x+(R<<4&4294967295|R>>>28),R=L+(w^x^C)+k[0]+3936430074&4294967295,L=w+(R<<11&4294967295|R>>>21),R=C+(L^w^x)+k[3]+3572445317&4294967295,C=L+(R<<16&4294967295|R>>>16),R=x+(C^L^w)+k[6]+76029189&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(x^C^L)+k[9]+3654602809&4294967295,w=x+(R<<4&4294967295|R>>>28),R=L+(w^x^C)+k[12]+3873151461&4294967295,L=w+(R<<11&4294967295|R>>>21),R=C+(L^w^x)+k[15]+530742520&4294967295,C=L+(R<<16&4294967295|R>>>16),R=x+(C^L^w)+k[2]+3299628645&4294967295,x=C+(R<<23&4294967295|R>>>9),R=w+(C^(x|~L))+k[0]+4096336452&4294967295,w=x+(R<<6&4294967295|R>>>26),R=L+(x^(w|~C))+k[7]+1126891415&4294967295,L=w+(R<<10&4294967295|R>>>22),R=C+(w^(L|~x))+k[14]+2878612391&4294967295,C=L+(R<<15&4294967295|R>>>17),R=x+(L^(C|~w))+k[5]+4237533241&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~L))+k[12]+1700485571&4294967295,w=x+(R<<6&4294967295|R>>>26),R=L+(x^(w|~C))+k[3]+2399980690&4294967295,L=w+(R<<10&4294967295|R>>>22),R=C+(w^(L|~x))+k[10]+4293915773&4294967295,C=L+(R<<15&4294967295|R>>>17),R=x+(L^(C|~w))+k[1]+2240044497&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~L))+k[8]+1873313359&4294967295,w=x+(R<<6&4294967295|R>>>26),R=L+(x^(w|~C))+k[15]+4264355552&4294967295,L=w+(R<<10&4294967295|R>>>22),R=C+(w^(L|~x))+k[6]+2734768916&4294967295,C=L+(R<<15&4294967295|R>>>17),R=x+(L^(C|~w))+k[13]+1309151649&4294967295,x=C+(R<<21&4294967295|R>>>11),R=w+(C^(x|~L))+k[4]+4149444226&4294967295,w=x+(R<<6&4294967295|R>>>26),R=L+(x^(w|~C))+k[11]+3174756917&4294967295,L=w+(R<<10&4294967295|R>>>22),R=C+(w^(L|~x))+k[2]+718787259&4294967295,C=L+(R<<15&4294967295|R>>>17),R=x+(L^(C|~w))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+L&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var x=w-this.blockSize,k=this.B,C=this.h,L=0;L<w;){if(C==0)for(;L<=x;)i(this,T,L),L+=this.blockSize;if(typeof T=="string"){for(;L<w;)if(k[C++]=T.charCodeAt(L++),C==this.blockSize){i(this,k),C=0;break}}else for(;L<w;)if(k[C++]=T[L++],C==this.blockSize){i(this,k),C=0;break}}this.h=C,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var x=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=x&255,x/=256;for(this.u(T),T=Array(16),w=x=0;4>w;++w)for(var k=0;32>k;k+=8)T[x++]=this.g[w]>>>k&255;return T};function s(T,w){var x=a;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=w(T)}function o(T,w){this.h=w;for(var x=[],k=!0,C=T.length-1;0<=C;C--){var L=T[C]|0;k&&L==w||(x[C]=L,k=!1)}this.g=x}var a={};function l(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return N(u(-T));for(var w=[],x=1,k=0;T>=x;k++)w[k]=T/x|0,x*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return N(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=u(Math.pow(w,8)),k=h,C=0;C<T.length;C+=8){var L=Math.min(8,T.length-C),R=parseInt(T.substring(C,C+L),w);8>L?(L=u(Math.pow(w,L)),k=k.j(L).add(u(R))):(k=k.j(x),k=k.add(u(R)))}return k}var h=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-N(this).m();for(var T=0,w=1,x=0;x<this.g.length;x++){var k=this.i(x);T+=(0<=k?k:4294967296+k)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(S(this))return"-"+N(this).toString(T);for(var w=u(Math.pow(T,6)),x=this,k="";;){var C=P(x,w).g;x=E(x,C.j(w));var L=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=C,I(x))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function S(T){return T.h==-1}t.l=function(T){return T=E(this,T),S(T)?-1:I(T)?0:1};function N(T){for(var w=T.g.length,x=[],k=0;k<w;k++)x[k]=~T.g[k];return new o(x,~T.h).add(m)}t.abs=function(){return S(this)?N(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],k=0,C=0;C<=w;C++){var L=k+(this.i(C)&65535)+(T.i(C)&65535),R=(L>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);k=R>>>16,L&=65535,R&=65535,x[C]=R<<16|L}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(T,w){return T.add(N(w))}t.j=function(T){if(I(this)||I(T))return h;if(S(this))return S(T)?N(this).j(N(T)):N(N(this).j(T));if(S(T))return N(this.j(N(T)));if(0>this.l(y)&&0>T.l(y))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,x=[],k=0;k<2*w;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var C=0;C<T.g.length;C++){var L=this.i(k)>>>16,R=this.i(k)&65535,$t=T.i(C)>>>16,Xn=T.i(C)&65535;x[2*k+2*C]+=R*Xn,v(x,2*k+2*C),x[2*k+2*C+1]+=L*Xn,v(x,2*k+2*C+1),x[2*k+2*C+1]+=R*$t,v(x,2*k+2*C+1),x[2*k+2*C+2]+=L*$t,v(x,2*k+2*C+2)}for(k=0;k<w;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=w;k<2*w;k++)x[k]=0;return new o(x,0)};function v(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function b(T,w){this.g=T,this.h=w}function P(T,w){if(I(w))throw Error("division by zero");if(I(T))return new b(h,h);if(S(T))return w=P(N(T),w),new b(N(w.g),N(w.h));if(S(w))return w=P(T,N(w)),new b(N(w.g),w.h);if(30<T.g.length){if(S(T)||S(w))throw Error("slowDivide_ only works with positive integers.");for(var x=m,k=w;0>=k.l(T);)x=U(x),k=U(k);var C=z(x,1),L=z(k,1);for(k=z(k,2),x=z(x,2);!I(k);){var R=L.add(k);0>=R.l(T)&&(C=C.add(x),L=R),k=z(k,1),x=z(x,1)}return w=E(T,C.j(w)),new b(C,w)}for(C=h;0<=T.l(w);){for(x=Math.max(1,Math.floor(T.m()/w.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=u(x),R=L.j(w);S(R)||0<R.l(T);)x-=k,L=u(x),R=L.j(w);I(L)&&(L=m),C=C.add(L),T=E(T,R)}return new b(C,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],k=0;k<w;k++)x[k]=this.i(k)&T.i(k);return new o(x,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],k=0;k<w;k++)x[k]=this.i(k)|T.i(k);return new o(x,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),x=[],k=0;k<w;k++)x[k]=this.i(k)^T.i(k);return new o(x,this.h^T.h)};function U(T){for(var w=T.g.length+1,x=[],k=0;k<w;k++)x[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(x,T.h)}function z(T,w){var x=w>>5;w%=32;for(var k=T.g.length-x,C=[],L=0;L<k;L++)C[L]=0<w?T.i(L+x)>>>w|T.i(L+x+1)<<32-w:T.i(L+x);return new o(C,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Rs=o}).apply(typeof tT<"u"?tT:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WS,eu,KS,wf,d_,QS,YS,JS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var D=c[_];if(!(D in g))break e;g=g[D]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,_=!1,D={next:function(){if(!_&&g<c.length){var M=g++;return{value:f(M,c[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),c.apply(f,D)}}return function(){return c.apply(f,arguments)}}function m(c,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function y(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function I(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,D,M){for(var Q=Array(arguments.length-2),De=2;De<arguments.length;De++)Q[De-2]=arguments[De];return f.prototype[D].apply(_,Q)}}function S(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function N(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const D=c.length||0,M=_.length||0;c.length=D+M;for(let Q=0;Q<M;Q++)c[D+Q]=_[Q]}else c.push(_)}}class E{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var U=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function z(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function T(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function w(c){const f={};for(const g in c)f[g]=c[g];return f}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,f){let g,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(g in _)c[g]=_[g];for(let M=0;M<x.length;M++)g=x[M],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function C(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function L(c){a.setTimeout(()=>{throw c},0)}function R(){var c=oe;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class $t{constructor(){this.h=this.g=null}add(f,g){const _=Xn.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var Xn=new E(()=>new Zn,c=>c.reset());class Zn{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let tn,Y=!1,oe=new $t,se=()=>{const c=a.Promise.resolve(void 0);tn=()=>{c.then(Te)}};var Te=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){L(g)}var f=Xn;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}Y=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Me(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Sn(c,f){if(Me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(U){e:{try{P(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:dn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Sn.aa.h.call(this)}}I(Sn,Me);var dn={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),Fm=0;function Xd(c,f,g,_,D){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=D,this.key=++Fm,this.da=this.fa=!1}function hc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function hn(c){this.src=c,this.g={},this.h=0}hn.prototype.add=function(c,f,g,_,D){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var Q=Ks(c,f,_,D);return-1<Q?(f=c[Q],g||(f.fa=!1)):(f=new Xd(f,this.src,M,!!_,D),f.fa=g,c.push(f)),f};function Zd(c,f){var g=f.type;if(g in c.g){var _=c.g[g],D=Array.prototype.indexOf.call(_,f,void 0),M;(M=0<=D)&&Array.prototype.splice.call(_,D,1),M&&(hc(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Ks(c,f,g,_){for(var D=0;D<c.length;++D){var M=c[D];if(!M.da&&M.listener==f&&M.capture==!!g&&M.ha==_)return D}return-1}var eh="closure_lm_"+(1e6*Math.random()|0),Bi={};function zt(c,f,g,_,D){if(_&&_.once)return Qs(c,f,g,_,D);if(Array.isArray(f)){for(var M=0;M<f.length;M++)zt(c,f[M],g,_,D);return null}return g=ha(g),c&&c[Nt]?c.K(f,g,u(_)?!!_.capture:!!_,D):Dt(c,f,g,!1,_,D)}function Dt(c,f,g,_,D,M){if(!f)throw Error("Invalid event type");var Q=u(D)?!!D.capture:!!D,De=Rn(c);if(De||(c[eh]=De=new hn(c)),g=De.add(f,g,_,Q,M),g.proxy)return g;if(_=Dv(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)_t||(D=Q),D===void 0&&(D=!1),c.addEventListener(f.toString(),_,D);else if(c.attachEvent)c.attachEvent(Ys(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Dv(){function c(g){return f.call(c.src,c.listener,g)}const f=da;return c}function Qs(c,f,g,_,D){if(Array.isArray(f)){for(var M=0;M<f.length;M++)Qs(c,f[M],g,_,D);return null}return g=ha(g),c&&c[Nt]?c.L(f,g,u(_)?!!_.capture:!!_,D):Dt(c,f,g,!0,_,D)}function ua(c,f,g,_,D){if(Array.isArray(f))for(var M=0;M<f.length;M++)ua(c,f[M],g,_,D);else _=u(_)?!!_.capture:!!_,g=ha(g),c&&c[Nt]?(c=c.i,f=String(f).toString(),f in c.g&&(M=c.g[f],g=Ks(M,g,_,D),-1<g&&(hc(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete c.g[f],c.h--)))):c&&(c=Rn(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Ks(f,g,_,D)),(g=-1<c?f[c]:null)&&fc(g))}function fc(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Nt])Zd(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Ys(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Rn(f))?(Zd(g,c),g.h==0&&(g.src=null,f[eh]=null)):hc(c)}}}function Ys(c){return c in Bi?Bi[c]:Bi[c]="on"+c}function da(c,f){if(c.da)c=!0;else{f=new Sn(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&fc(c),c=g.call(_,f)}return c}function Rn(c){return c=c[eh],c instanceof hn?c:null}var $i="__closure_events_fn_"+(1e9*Math.random()>>>0);function ha(c){return typeof c=="function"?c:(c[$i]||(c[$i]=function(f){return c.handleEvent(f)}),c[$i])}function nt(){J.call(this),this.i=new hn(this),this.M=this,this.F=null}I(nt,J),nt.prototype[Nt]=!0,nt.prototype.removeEventListener=function(c,f,g,_){ua(this,c,f,g,_)};function rt(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new Me(f,c);else if(f instanceof Me)f.target=f.target||c;else{var D=f;f=new Me(_,c),k(f,D)}if(D=!0,g)for(var M=g.length-1;0<=M;M--){var Q=f.g=g[M];D=er(Q,_,!0,f)&&D}if(Q=f.g=c,D=er(Q,_,!0,f)&&D,D=er(Q,_,!1,f)&&D,g)for(M=0;M<g.length;M++)Q=f.g=g[M],D=er(Q,_,!1,f)&&D}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)hc(g[_]);delete c.g[f],c.h--}}this.F=null},nt.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},nt.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function er(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,M=0;M<f.length;++M){var Q=f[M];if(Q&&!Q.da&&Q.capture==g){var De=Q.listener,Ot=Q.ha||Q.src;Q.fa&&Zd(c.i,Q),D=De.call(Ot,_)!==!1&&D}}return D&&!_.defaultPrevented}function zi(c,f,g){if(typeof c=="function")g&&(c=m(c,g));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function pc(c){c.g=zi(()=>{c.g=null,c.i&&(c.i=!1,pc(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class jm extends J{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:pc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(c){J.call(this),this.h=c,this.g={}}I(fr,J);var th=[];function fa(c){z(c.g,function(f,g){this.g.hasOwnProperty(g)&&fc(f)},c),c.g={}}fr.prototype.N=function(){fr.aa.N.call(this),fa(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=a.JSON.stringify,Js=a.JSON.parse,Dr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function pa(){}pa.prototype.h=null;function mc(c){return c.h||(c.h=c.i())}function gc(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yc(){Me.call(this,"d")}I(yc,Me);function it(){Me.call(this,"c")}I(it,Me);var si={},Lr=null;function Xs(){return Lr=Lr||new nt}si.La="serverreachability";function nh(c){Me.call(this,si.La,c)}I(nh,Me);function Pn(c){const f=Xs();rt(f,new nh(f))}si.STAT_EVENT="statevent";function _c(c,f){Me.call(this,si.STAT_EVENT,c),this.stat=f}I(_c,Me);function Tt(c){const f=Xs();rt(f,new _c(f,c))}si.Ma="timingevent";function wc(c,f){Me.call(this,si.Ma,c),this.size=f}I(wc,Me);function ma(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function rh(c,f,g,_,D,M){c.info(function(){if(c.g)if(M)for(var Q="",De=M.split("&"),Ot=0;Ot<De.length;Ot++){var be=De[Ot].split("=");if(1<be.length){var qt=be[0];be=be[1];var Gt=qt.split("_");Q=2<=Gt.length&&Gt[1]=="type"?Q+(qt+"="+be+"&"):Q+(qt+"=redacted&")}}else Q=null;else Q=M;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+f+`
`+g+`
`+Q})}function Um(c,f,g,_,D,M,Q){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+f+`
`+g+`
`+M+" "+Q})}function oi(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+$m(c,g)+(_?" "+_:"")})}function Bm(c,f){c.info(function(){return"TIMEOUT: "+f})}qi.prototype.info=function(){};function $m(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var Q=1;Q<D.length;Q++)D[Q]=""}}}}return tr(g)}catch{return f}}var ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ih={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ga;function Zs(){}I(Zs,pa),Zs.prototype.g=function(){return new XMLHttpRequest},Zs.prototype.i=function(){return{}},ga=new Zs;function pr(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sh}function sh(){this.i=null,this.g="",this.h=!1}var ya={},_a={};function mr(c,f,g){c.L=1,c.v=ba(bt(f)),c.m=g,c.P=!0,oh(c,null)}function oh(c,f){c.F=Date.now(),Gi(c),c.A=bt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),ph(g.i,"t",_),c.C=0,g=c.j.J,c.h=new sh,c.g=$r(c.j,g?f:null,!c.m),0<c.O&&(c.M=new jm(m(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(th[0]=D.toString()),D=th);for(var M=0;M<D.length;M++){var Q=zt(g,D[M],_||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Pn(),rh(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const f=this.M;f&&fn(c)==3?f.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const Gt=fn(this.g);var f=this.g.Ba();const Ca=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||kc(this.g)))){this.J||Gt!=4||f==7||(f==8||0>=Ca?Pn(3):Pn(2)),va(this);var g=this.g.Z();this.X=g;t:if(vc(this)){var _=kc(this.g);c="";var D=_.length,M=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),gr(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(M&&f==D-1)});_.length=0,this.h.g+=c,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,Um(this.i,this.u,this.A,this.l,this.R,Gt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var De,Ot=this.g;if((De=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(De)){var be=De;break t}}be=null}if(g=be)oi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eo(this,g);else{this.o=!1,this.s=3,Tt(12),Or(this),gr(this);break e}}if(this.P){g=!0;let yr;for(;!this.J&&this.C<Q.length;)if(yr=zm(this,Q),yr==_a){Gt==4&&(this.s=4,Tt(14),g=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==ya){this.s=4,Tt(15),oi(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else oi(this.i,this.l,yr,null),eo(this,yr);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||Q.length!=0||this.h.h||(this.s=1,Tt(16),g=!1),this.o=this.o&&g,!g)oi(this.i,this.l,Q,"[Invalid Chunked Response]"),Or(this),gr(this);else if(0<Q.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),ue(qt),qt.M=!0,Tt(11))}}else oi(this.i,this.l,Q,null),eo(this,Q);Gt==4&&Or(this),this.o&&!this.J&&(Gt==4?Cn(this.j,this):(this.o=!1,Gi(this)))}else ka(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Or(this),gr(this)}}}catch{}finally{}};function vc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function zm(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?_a:(g=Number(f.substring(g,_)),isNaN(g)?ya:(_+=1,_+g>f.length?_a:(f=f.slice(_,_+g),c.C=_+g,f)))}pr.prototype.cancel=function(){this.J=!0,Or(this)};function Gi(c){c.S=Date.now()+c.I,wa(c,c.I)}function wa(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ma(m(c.ba,c),f)}function va(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Bm(this.i,this.A),this.L!=2&&(Pn(),Tt(17)),Or(this),this.s=2,gr(this)):wa(this,this.S-c)};function gr(c){c.j.G==0||c.J||Cn(c.j,c)}function Or(c){va(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,fa(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function eo(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||to(g.h,c))){if(!c.K&&to(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Fe(g),so(g);else break e;ne(g),Tt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=ma(m(g.Za,g),6e3));if(1>=lh(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ft(g,11)}else if((c.K||g.g==c)&&Fe(g),!v(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let be=D[f];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const qt=be[3];qt!=null&&(g.la=qt,g.j.info("VER="+g.la));const Gt=be[4];Gt!=null&&(g.Aa=Gt,g.j.info("SVER="+g.Aa));const Ca=be[5];Ca!=null&&typeof Ca=="number"&&0<Ca&&(_=1.5*Ca,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yr=c.g;if(yr){const Eh=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eh){var M=_.h;M.g||Eh.indexOf("spdy")==-1&&Eh.indexOf("quic")==-1&&Eh.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ia(M,M.h),M.h=null))}if(_.D){const eg=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;eg&&(_.ya=eg,Ne(_.I,_.D,eg))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var Q=c;if(_.qa=pn(_,_.J?_.ia:null,_.W),Q.K){li(_.h,Q);var De=Q,Ot=_.L;Ot&&(De.I=Ot),De.B&&(va(De),Gi(De)),_.g=Q}else xe(_);0<g.i.length&&F(g)}else be[0]!="stop"&&be[0]!="close"||ft(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ft(g,7):Pc(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}Pn(4)}catch{}}var ah=class{constructor(c,f){this.g=c,this.map=f}};function Ic(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ec(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function lh(c){return c.h?1:c.g?c.g.size:0}function to(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ia(c,f){c.g?c.g.add(f):c.h=f}function li(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Ic.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ea(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return S(c.i)}function qm(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function Tc(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function bc(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=Tc(c),_=qm(c),D=_.length,M=0;M<D;M++)f.call(void 0,_[M],g&&g[M],c)}var xc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ch(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),D=null;if(0<=_){var M=c[g].substring(0,_);D=c[g].substring(_+1)}else M=c[g];f(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Vr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vr){this.h=c.h,no(this,c.j),this.o=c.o,this.g=c.g,Hi(this,c.s),this.l=c.l;var f=c.i,g=new ci;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Ta(this,g),this.m=c.m}else c&&(f=String(c).match(xc))?(this.h=!1,no(this,f[1]||"",!0),this.o=Mr(f[2]||""),this.g=Mr(f[3]||"",!0),Hi(this,f[4]),this.l=Mr(f[5]||"",!0),Ta(this,f[6]||"",!0),this.m=Mr(f[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}Vr.prototype.toString=function(){var c=[],f=this.j;f&&c.push(ro(f,dh,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ro(f,dh,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(ro(g,g.charAt(0)=="/"?Gm:hh,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",ro(g,Wm)),c.join("")};function bt(c){return new Vr(c)}function no(c,f,g){c.j=g?Mr(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Hi(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Ta(c,f,g){f instanceof ci?(c.i=f,Km(c.i,c.h)):(g||(f=ro(f,Hm)),c.i=new ci(f,c.h))}function Ne(c,f,g){c.i.set(f,g)}function ba(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mr(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ro(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,uh),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var dh=/[#\/\?@]/g,hh=/[#\?:]/g,Gm=/[#\?]/g,Hm=/[#\?@]/g,Wm=/#/g;function ci(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Fr(c){c.g||(c.g=new Map,c.h=0,c.i&&ch(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ci.prototype,t.add=function(c,f){Fr(this),this.i=null,c=ui(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Ac(c,f){Fr(c),f=ui(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function fh(c,f){return Fr(c),f=ui(c,f),c.g.has(f)}t.forEach=function(c,f){Fr(this),this.g.forEach(function(g,_){g.forEach(function(D){c.call(f,D,_,this)},this)},this)},t.na=function(){Fr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const D=c[_];for(let M=0;M<D.length;M++)g.push(f[_])}return g},t.V=function(c){Fr(this);let f=[];if(typeof c=="string")fh(this,c)&&(f=f.concat(this.g.get(ui(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Fr(this),this.i=null,c=ui(this,c),fh(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function ph(c,f,g){Ac(c,f),0<g.length&&(c.i=null,c.g.set(ui(c,f),S(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const M=encodeURIComponent(String(_)),Q=this.V(_);for(_=0;_<Q.length;_++){var D=M;Q[_]!==""&&(D+="="+encodeURIComponent(String(Q[_]))),c.push(D)}}return this.i=c.join("&")};function ui(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Km(c,f){f&&!c.j&&(Fr(c),c.i=null,c.g.forEach(function(g,_){var D=_.toLowerCase();_!=D&&(Ac(this,_),ph(this,D,g))},c)),c.j=f}function Qm(c,f){const g=new qi;if(a.Image){const _=new Image;_.onload=y(jr,g,"TestLoadImage: loaded",!0,f,_),_.onerror=y(jr,g,"TestLoadImage: error",!1,f,_),_.onabort=y(jr,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=y(jr,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ym(c,f){const g=new qi,_=new AbortController,D=setTimeout(()=>{_.abort(),jr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(M=>{clearTimeout(D),M.ok?jr(g,"TestPingServer: ok",!0,f):jr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),jr(g,"TestPingServer: error",!1,f)})}function jr(c,f,g,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(g)}catch{}}function Jm(){this.g=new Dr}function xa(c,f,g){const _=g||"";try{bc(c,function(D,M){let Q=D;u(D)&&(Q=tr(D)),f.push(_+M+"="+encodeURIComponent(Q))})}catch(D){throw f.push(_+"type="+encodeURIComponent("_badmap")),D}}function Aa(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Aa,pa),Aa.prototype.g=function(){return new Sa(this.l,this.j)},Aa.prototype.i=function(c){return function(){return c}}({});function Sa(c,f){nt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Sa,nt),t=Sa.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,io(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ur(this):io(this),this.readyState==3&&Sc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ur(this))},t.Qa=function(c){this.g&&(this.response=c,Ur(this))},t.ga=function(){this.g&&Ur(this)};function Ur(c){c.readyState=4,c.l=null,c.j=null,c.v=null,io(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function io(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function mh(c){let f="";return z(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Rc(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=mh(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ne(c,f,g))}function Ge(c){nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ge,nt);var Xm=/^https?$/i,Zm=["POST","PUT"];t=Ge.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ga.g(),this.v=this.o?mc(this.o):mc(ga),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(M){gh(this,M);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)g.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const M of _.keys())g.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Zm,f,void 0))||_||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,Q]of g)this.g.setRequestHeader(M,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){gh(this,M)}};function gh(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,yh(c),Ra(c)}function yh(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,rt(this,"complete"),rt(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_h(this):this.bb())},t.bb=function(){_h(this)};function _h(c){if(c.h&&typeof o<"u"&&(!c.v[1]||fn(c)!=4||c.Z()!=2)){if(c.u&&fn(c)==4)zi(c.Ea,0,c);else if(rt(c,"readystatechange"),fn(c)==4){c.h=!1;try{const Q=c.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=Q===0){var D=String(c.D).match(xc)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),_=!Xm.test(D?D.toLowerCase():"")}g=_}if(g)rt(c,"complete"),rt(c,"success");else{c.m=6;try{var M=2<fn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",yh(c)}}finally{Ra(c)}}}}function Ra(c,f){if(c.g){wh(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||rt(c,"ready");try{g.onreadystatechange=_}catch{}}}function wh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function fn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Js(f)}};function kc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ka(c){const f={};c=(c.g&&2<=fn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(v(c[_]))continue;var g=C(c[_]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=f[D]||[];f[D]=M,M.push(g)}T(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function vh(c){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,c),this.cb=Br("retryDelaySeedMs",1e4,c),this.Wa=Br("forwardChannelMaxRetries",2,c),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ic(c&&c.concurrentRequestLimit),this.Da=new Jm,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Tt(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=pn(this,null,this.W),F(this)};function Pc(c){if(A(c),c.G==3){var f=c.U++,g=bt(c.I);if(Ne(g,"SID",c.K),Ne(g,"RID",f),Ne(g,"TYPE","terminate"),le(c,g),f=new pr(c,c.j,f),f.L=2,f.v=ba(bt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=$r(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Gi(f)}Nn(c)}function so(c){c.g&&(ue(c),c.g.cancel(),c.g=null)}function A(c){so(c),c.u&&(a.clearTimeout(c.u),c.u=null),Fe(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function F(c){if(!Ec(c.h)&&!c.s){c.s=!0;var f=c.Ga;tn||se(),Y||(tn(),Y=!0),oe.add(f,c),c.B=0}}function B(c,f){return lh(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ma(m(c.Ga,c,f),Lt(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new pr(this,this.j,c);let M=this.o;if(this.S&&(M?(M=w(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=ve(this,D,f),g=bt(this.I),Ne(g,"RID",c),Ne(g,"CVER",22),this.D&&Ne(g,"X-HTTP-Session-Id",this.D),le(this,g),M&&(this.O?f="headers="+encodeURIComponent(String(mh(M)))+"&"+f:this.m&&Rc(g,this.m,M)),Ia(this.h,D),this.Ua&&Ne(g,"TYPE","init"),this.P?(Ne(g,"$req",f),Ne(g,"SID","null"),D.T=!0,mr(D,g,null)):mr(D,g,f),this.G=2}}else this.G==3&&(c?ie(this,c):this.i.length==0||Ec(this.h)||ie(this))};function ie(c,f){var g;f?g=f.l:g=c.U++;const _=bt(c.I);Ne(_,"SID",c.K),Ne(_,"RID",g),Ne(_,"AID",c.T),le(c,_),c.m&&c.o&&Rc(_,c.m,c.o),g=new pr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=ve(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ia(c.h,g),mr(g,_,f)}function le(c,f){c.H&&z(c.H,function(g,_){Ne(f,_,g)}),c.l&&bc({},function(g,_){Ne(f,_,g)})}function ve(c,f,g){g=Math.min(c.i.length,g);var _=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let M=-1;for(;;){const Q=["count="+g];M==-1?0<g?(M=D[0].g,Q.push("ofs="+M)):M=0:Q.push("ofs="+M);let De=!0;for(let Ot=0;Ot<g;Ot++){let be=D[Ot].g;const qt=D[Ot].map;if(be-=M,0>be)M=Math.max(0,D[Ot].g-100),De=!1;else try{xa(qt,Q,"req"+be+"_")}catch{_&&_(qt)}}if(De){_=Q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function xe(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;tn||se(),Y||(tn(),Y=!0),oe.add(f,c),c.v=0}}function ne(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ma(m(c.Fa,c),Lt(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,pe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ma(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),so(this),pe(this))};function ue(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function pe(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=bt(c.qa);Ne(f,"RID","rpc"),Ne(f,"SID",c.K),Ne(f,"AID",c.T),Ne(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(f,"TO",c.ja),Ne(f,"TYPE","xmlhttp"),le(c,f),c.m&&c.o&&Rc(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=ba(bt(f)),g.m=null,g.P=!0,oh(g,c)}t.Za=function(){this.C!=null&&(this.C=null,so(this),ne(this),Tt(19))};function Fe(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Cn(c,f){var g=null;if(c.g==f){Fe(c),ue(c),c.g=null;var _=2}else if(to(c.h,f))g=f.D,li(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=c.B;_=Xs(),rt(_,new wc(_,g)),F(c)}else xe(c);else if(D=f.s,D==3||D==0&&0<f.X||!(_==1&&B(c,f)||_==2&&ne(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),D){case 1:ft(c,5);break;case 4:ft(c,10);break;case 3:ft(c,6);break;default:ft(c,2)}}}function Lt(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function ft(c,f){if(c.j.info("Error code "+f),f==2){var g=m(c.fb,c),_=c.Xa;const D=!_;_=new Vr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||no(_,"https"),ba(_),D?Qm(_.toString(),g):Ym(_.toString(),g)}else Tt(2);c.G=0,c.l&&c.l.sa(f),Nn(c),A(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Nn(c){if(c.G=0,c.ka=[],c.l){const f=Ea(c.h);(f.length!=0||c.i.length!=0)&&(N(c.ka,f),N(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function pn(c,f,g){var _=g instanceof Vr?bt(g):new Vr(g);if(_.g!="")f&&(_.g=f+"."+_.g),Hi(_,_.s);else{var D=a.location;_=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var M=new Vr(null);_&&no(M,_),f&&(M.g=f),D&&Hi(M,D),g&&(M.l=g),_=M}return g=c.D,f=c.ya,g&&f&&Ne(_,g,f),Ne(_,"VER",c.la),le(c,_),_}function $r(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ge(new Aa({eb:g})):new Ge(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lv(){}t=Lv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ih(){}Ih.prototype.g=function(c,f){return new Dn(c,f)};function Dn(c,f){nt.call(this),this.g=new vh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Pa(this)}I(Dn,nt),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Pc(this.g)},Dn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=tr(c),c=g);f.i.push(new ah(f.Ya++,c)),f.G==3&&F(f)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Pc(this.g),delete this.g,Dn.aa.N.call(this)};function Ov(c){yc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}I(Ov,yc);function Vv(){it.call(this),this.status=1}I(Vv,it);function Pa(c){this.g=c}I(Pa,Lv),Pa.prototype.ua=function(){rt(this.g,"a")},Pa.prototype.ta=function(c){rt(this.g,new Ov(c))},Pa.prototype.sa=function(c){rt(this.g,new Vv)},Pa.prototype.ra=function(){rt(this.g,"b")},Ih.prototype.createWebChannel=Ih.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,JS=function(){return new Ih},YS=function(){return Xs()},QS=si,d_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ai.NO_ERROR=0,ai.TIMEOUT=8,ai.HTTP_ERROR=6,wf=ai,ih.COMPLETE="complete",KS=ih,gc.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",nt.prototype.listen=nt.prototype.K,eu=gc,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,WS=Ge}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const nT="@firebase/firestore",rT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new bd("@firebase/firestore");function Ga(){return Ns.logLevel}function Fz(t){Ns.setLogLevel(t)}function $(t,...e){if(Ns.logLevel<=_e.DEBUG){const n=e.map(yw);Ns.debug(`Firestore (${tc}): ${t}`,...n)}}function dt(t,...e){if(Ns.logLevel<=_e.ERROR){const n=e.map(yw);Ns.error(`Firestore (${tc}): ${t}`,...n)}}function hr(t,...e){if(Ns.logLevel<=_e.WARN){const n=e.map(yw);Ns.warn(`Firestore (${tc}): ${t}`,...n)}}function yw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,XS(t,r,n)}function XS(t,e,n){let r=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dt(r),new Error(r)}function te(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||XS(e,i,r)}function jz(t,e){t||X(57014,e)}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class a3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l3{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){te(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new ZS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new St(e)}}class c3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new c3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Be(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){te(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new h_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new h_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Uz{getToken(){return Promise.resolve(new h_(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=h3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function f_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Gg(i)===Gg(s)?ae(i,s):Gg(i)?1:-1}return ae(t.length,e.length)}const f3=55296,p3=57343;function Gg(t){const e=t.charCodeAt(0);return e>=f3&&e<=p3}function Rl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function eR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__name__";class Gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Gr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=Gr.isNumericId(e),i=Gr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Gr.extractNumericId(e).compare(Gr.extractNumericId(n)):f_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class he extends Gr{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new he(n)}static emptyPath(){return new he([])}}const m3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Gr{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return m3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p_}static keyField(){return new Qe([p_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(he.fromString(e))}static fromName(e){return new W(he.fromString(e).popFirst(5))}static empty(){return new W(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e,n){if(!n)throw new j(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g3(t,e,n,r){if(e===!0&&r===!0)throw new j(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iT(t){if(!W.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(W.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function um(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function ge(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=um(t);throw new j(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nR(t,e){if(e<=0)throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ra(t,e){if(!tR(t))throw new j(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new j(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=-62135596800,aT=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aT);return new Se(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oT)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aT}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:yt("string",Se._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Se(0,0))}static max(){return new re(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;class Pl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function m_(t){return t.fields.find(e=>e.kind===2)}function uo(t){return t.fields.filter(e=>e.kind!==2)}function y3(t,e){let n=ae(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=_3(t.fields[r],e.fields[r]),n!==0)return n;return ae(t.fields.length,e.fields.length)}Pl.UNKNOWN_ID=-1;class ko{constructor(e,n){this.fieldPath=e,this.kind=n}}function _3(t,e){const n=Qe.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ae(t.kind,e.kind)}class Cl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Cl(0,Kn.min())}}function rR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Se(n+1,0):new Se(n,r));return new Kn(i,W.empty(),e)}function iR(t){return new Kn(t.readTime,t.key,kl)}class Kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kn(re.min(),W.empty(),kl)}static max(){return new Kn(re.max(),W.empty(),kl)}}function vw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==sR)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="SimpleDb";class dm{static open(e,n,r,i){try{return new dm(n,e.transaction(i,r))}catch(s){throw new wu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Pt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new wu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Iw(r.target.error);this.S.reject(new wu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(Vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new v3(n)}}class ei{static delete(e){return $(Vn,"Removing database:",e),mo(aA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!z0())return!1;if(ei.F())return!0;const e=It(),n=ei.M(e),r=0<n&&n<10,i=aR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ei.M(It())===12.2&&dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(Vn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new wu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new wu(e,o))},i.onupgradeneeded=s=>{$(Vn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(Vn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=dm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(Vn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class w3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return mo(this.U.delete())}}class wu extends j{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zs(t){return t.name==="IndexedDbTransactionError"}class v3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(Vn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(Vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mo(r)}add(e){return $(Vn,"ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(Vn,"GET",this.store.name,e,n),n))}delete(e){return $(Vn,"DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return $(Vn,"COUNT",this.store.name),mo(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(Vn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=Iw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new w3(a),u=n(a.primaryKey,a.value,l);if(u instanceof O){const d=u.catch(h=>(l.done(),O.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function mo(t){return new O((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Iw(r.target.error);n(i)}})}let lT=!1;function Iw(t){const e=ei.M(It());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lT||(lT=!0,setTimeout(()=>{throw r},0)),r}}return t}const vu="IndexBackfiller";class I3{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(vu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(vu,`Documents written: ${n}`)}catch(n){zs(n)?$(vu,"Ignoring IndexedDB error during index backfill: ",n):await $s(n)}await this.re(6e4)})}}class E3{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(vu,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(vu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=iR(s);vw(o,r)>0&&(r=o)}),new Kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=-1;function Dd(t){return t==null}function ed(t){return t===0&&1/t==-1/0}function lR(t){return typeof t=="number"&&Number.isInteger(t)&&!ed(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="";function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cT(e)),e=T3(t.get(n),e);return cT(e)}function T3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case wp:n+="";break;default:n+=s}}return n}function cT(t){return t+wp+""}function Qr(t){const e=t.length;if(te(e>=2,64408,{path:t}),e===2)return te(t.charAt(0)===wp&&t.charAt(1)==="",56145,{path:t}),he.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(wp,s);switch((o<0||o>n)&&X(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:X(61167,{path:t})}s=o+2}return new he(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="remoteDocuments",Ld="owner",Oa="owner",td="mutationQueues",b3="userId",Tr="mutations",uT="batchId",xo="userMutationsIndex",dT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t,e){return[t,Xt(e)]}function cR(t,e,n){return[t,Xt(e),n]}const x3={},Nl="documentMutations",vp="remoteDocumentsV14",A3=["prefixPath","collectionGroup","readTime","documentId"],If="documentKeyIndex",S3=["prefixPath","collectionGroup","documentId"],uR="collectionGroupIndex",R3=["collectionGroup","readTime","prefixPath","documentId"],nd="remoteDocumentGlobal",g_="remoteDocumentGlobalKey",Dl="targets",dR="queryTargetsIndex",k3=["canonicalId","targetId"],Ll="targetDocuments",P3=["targetId","path"],Ew="documentTargetsIndex",C3=["path","targetId"],Ip="targetGlobalKey",Po="targetGlobal",rd="collectionParents",N3=["collectionId","parent"],Ol="clientMetadata",D3="clientId",hm="bundles",L3="bundleId",fm="namedQueries",O3="name",Tw="indexConfiguration",V3="indexId",y_="collectionGroupIndex",M3="collectionGroup",Iu="indexState",F3=["indexId","uid"],hR="sequenceNumberIndex",j3=["uid","sequenceNumber"],Eu="indexEntries",U3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fR="documentKeyIndex",B3=["indexId","uid","orderedDocumentKey"],pm="documentOverlays",$3=["userId","collectionPath","documentId"],__="collectionPathOverlayIndex",z3=["userId","collectionPath","largestBatchId"],pR="collectionGroupOverlayIndex",q3=["userId","collectionGroup","largestBatchId"],bw="globals",G3="name",mR=[td,Tr,Nl,ho,Dl,Ld,Po,Ll,Ol,nd,rd,hm,fm],H3=[...mR,pm],gR=[td,Tr,Nl,vp,Dl,Ld,Po,Ll,Ol,nd,rd,hm,fm,pm],yR=gR,xw=[...yR,Tw,Iu,Eu],W3=xw,_R=[...xw,bw],K3=_R;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends oR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Et(t,e){const n=K(t);return ei.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function vR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=i??Ft.EMPTY,this.right=s??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fT(this.data.getIterator())}getIteratorFrom(e){return new fT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pe(this.comparator);return n.data=e,n}}class fT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Va(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new vn([])}unionWith(e){let n=new Pe(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IR("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const Q3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(te(!!t,39018),typeof t=="string"){let e=0;const n=Q3.exec(t);if(te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ci(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="server_timestamp",TR="__type__",bR="__previous_value__",xR="__local_write_time__";function mm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[TR])==null?void 0:r.stringValue)===ER}function gm(t){const e=t.mapValue.fields[bR];return mm(e)?gm(e):e}function id(t){const e=Pi(t.mapValue.fields[xR].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const sd="(default)";class Uo{constructor(e,n){this.projectId=e,this.database=n||sd}static empty(){return new Uo("","")}get isDefaultDatabase(){return this.database===sd}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="__type__",AR="__max__",ps={mapValue:{fields:{__type__:{stringValue:AR}}}},Sw="__vector__",Vl="value",Ef={nullValue:"NULL_VALUE"};function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mm(t)?4:SR(t)?9007199254740991:ym(t)?10:11:X(28295,{value:t})}function ii(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return id(t).isEqual(id(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Pi(i.timestampValue),a=Pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ci(i.bytesValue).isEqual(Ci(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),a=We(s.doubleValue);return o===a?ed(o)===ed(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Rl(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hT(o)!==hT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ii(o[l],a[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function od(t,e){return(t.values||[]).find(n=>ii(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Ds(t),r=Ds(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=We(s.integerValue||s.doubleValue),l=We(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return pT(t.timestampValue,e.timestampValue);case 4:return pT(id(t),id(e));case 5:return f_(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ci(s),l=Ci(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ae(a[u],l[u]);if(d!==0)return d}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ae(We(s.latitude),We(o.latitude));return a!==0?a:ae(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,y,I,S;const a=s.fields||{},l=o.fields||{},u=(m=a[Vl])==null?void 0:m.arrayValue,d=(y=l[Vl])==null?void 0:y.arrayValue,h=ae(((I=u==null?void 0:u.values)==null?void 0:I.length)||0,((S=d==null?void 0:d.values)==null?void 0:S.length)||0);return h!==0?h:mT(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ps.mapValue&&o===ps.mapValue)return 0;if(s===ps.mapValue)return 1;if(o===ps.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=f_(l[h],d[h]);if(m!==0)return m;const y=Ls(a[l[h]],u[d[h]]);if(y!==0)return y}return ae(l.length,d.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function pT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Pi(t),r=Pi(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function mT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ls(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function Ml(t){return v_(t)}function v_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=v_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${v_(n.fields[o])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function Tf(t){switch(Ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gm(t);return e?16+Tf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ci(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Tf(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return qs(r.fields,(s,o)=>{i+=s.length+Tf(o)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function Bo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I_(t){return!!t&&"integerValue"in t}function ad(t){return!!t&&"arrayValue"in t}function gT(t){return!!t&&"nullValue"in t}function yT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bf(t){return!!t&&"mapValue"in t}function ym(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Aw])==null?void 0:r.stringValue)===Sw}function Tu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tu(t.arrayValue.values[n]);return e}return{...t}}function SR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}const RR={mapValue:{fields:{[Aw]:{stringValue:Sw},[Vl]:{arrayValue:{}}}}};function J3(t){return"nullValue"in t?Ef:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Bo(Uo.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ym(t)?RR:{mapValue:{}}:X(35942,{value:t})}function X3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Bo(Uo.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?RR:"mapValue"in t?ym(t)?{mapValue:{}}:ps:X(61959,{value:t})}function _T(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function wT(t,e){const n=Ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Tu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jt(Tu(this.value))}}function kR(t){const e=[];return qs(t.fields,(n,r)=>{const i=new Qe([n]);if(bf(r)){const s=kR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ue(e,0,re.min(),re.min(),re.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ue(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new Ue(e,2,n,re.min(),re.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new Ue(e,3,n,re.min(),re.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ue&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.position=e,this.inclusive=n}}function vT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function IT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{}class we extends PR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ej(e,n,r):n==="array-contains"?new rj(e,r):n==="in"?new VR(e,r):n==="not-in"?new ij(e,r):n==="array-contains-any"?new sj(e,r):new we(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tj(e,r):new nj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Re extends PR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Re(e,n)}matches(e){return Fl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fl(t){return t.op==="and"}function E_(t){return t.op==="or"}function Rw(t){return CR(t)&&Fl(t)}function CR(t){for(const e of t.filters)if(e instanceof Re)return!1;return!0}function T_(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+Ml(t.value);if(Rw(t))return t.filters.map(e=>T_(e)).join(",");{const e=t.filters.map(n=>T_(n)).join(",");return`${t.op}(${e})`}}function NR(t,e){return t instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)}(t,e):t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&NR(o,i.filters[a]),!0):!1}(t,e):void X(19439)}function DR(t,e){const n=t.filters.concat(e);return Re.create(n,t.op)}function LR(t){return t instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${Ml(n.value)}`}(t):t instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(LR).join(" ,")+"}"}(t):"Filter"}class ej extends we{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class tj extends we{constructor(e,n){super(e,"in",n),this.keys=OR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nj extends we{constructor(e,n){super(e,"not-in",n),this.keys=OR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function OR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class rj extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ad(n)&&od(n.arrayValue,this.value)}}class VR extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&od(this.value.arrayValue,n)}}class ij extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!od(this.value.arrayValue,n)}}class sj extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ad(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>od(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function b_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new oj(t,e,n,r,i,s,o)}function $o(t){const e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>T_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ml(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ml(r)).join(",")),e.Te=n}return e.Te}function Od(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IT(t.startAt,e.startAt)&&IT(t.endAt,e.endAt)}function Ep(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Tp(t,e){return t.filters.filter(n=>n instanceof we&&n.field.isEqual(e))}function ET(t,e,n){let r=Ef,i=!0;for(const s of Tp(t,e)){let o=Ef,a=!0;switch(s.op){case"<":case"<=":o=J3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ef}_T({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_T({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function TT(t,e,n){let r=ps,i=!0;for(const s of Tp(t,e)){let o=ps,a=!0;switch(s.op){case">=":case">":o=X3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ps}wT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];wT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MR(t,e,n,r,i,s,o,a){return new Mi(t,e,n,r,i,s,o,a)}function nc(t){return new Mi(t)}function bT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kw(t){return t.collectionGroup!==null}function _l(t){const e=K(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Pe(Qe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ld(s,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new ld(Qe.keyField(),r))}return e.Ie}function Zt(t){const e=K(t);return e.Ee||(e.Ee=jR(e,_l(t))),e.Ee}function FR(t){const e=K(t);return e.de||(e.de=jR(e,t.explicitOrderBy)),e.de}function jR(t,e){if(t.limitType==="F")return b_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ld(i.field,s)});const n=t.endAt?new Os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Os(t.startAt.position,t.startAt.inclusive):null;return b_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x_(t,e){const n=t.filters.concat([e]);return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bp(t,e,n){return new Mi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vd(t,e){return Od(Zt(t),Zt(e))&&t.limitType===e.limitType}function UR(t){return`${$o(Zt(t))}|lt:${t.limitType}`}function Ha(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LR(i)).join(", ")}]`),Dd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ml(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ml(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function Md(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _l(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=vT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,_l(r),i)||r.endAt&&!function(o,a,l){const u=vT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,_l(r),i))}(t,e)}function BR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $R(t){return(e,n)=>{let r=!1;for(const i of _l(t)){const s=aj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aj(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ls(l,u):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new Ve(W.comparator);function In(){return lj}const zR=new Ve(W.comparator);function tu(...t){let e=zR;for(const n of t)e=e.insert(n.key,n);return e}function qR(t){let e=zR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return bu()}function GR(){return bu()}function bu(){return new Fi(t=>t.toString(),(t,e)=>t.isEqual(e))}const cj=new Ve(W.comparator),uj=new Pe(W.comparator);function ce(...t){let e=uj;for(const n of t)e=e.add(n);return e}const dj=new Pe(ae);function Pw(){return dj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(e)?"-0":e}}function HR(t){return{integerValue:""+t}}function WR(t,e){return lR(e)?HR(e):Cw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function hj(t,e,n){return t instanceof jl?function(i,s){const o={fields:{[TR]:{stringValue:ER},[xR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mm(s)&&(s=gm(s)),s&&(o.fields[bR]=s),{mapValue:o}}(n,e):t instanceof zo?QR(t,e):t instanceof qo?YR(t,e):function(i,s){const o=KR(i,s),a=xT(o)+xT(i.Ae);return I_(o)&&I_(i.Ae)?HR(a):Cw(i.serializer,a)}(t,e)}function fj(t,e,n){return t instanceof zo?QR(t,e):t instanceof qo?YR(t,e):n}function KR(t,e){return t instanceof Ul?function(r){return I_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class jl extends _m{}class zo extends _m{constructor(e){super(),this.elements=e}}function QR(t,e){const n=JR(e);for(const r of t.elements)n.some(i=>ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class qo extends _m{constructor(e){super(),this.elements=e}}function YR(t,e){let n=JR(e);for(const r of t.elements)n=n.filter(i=>!ii(i,r));return{arrayValue:{values:n}}}class Ul extends _m{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xT(t){return We(t.integerValue||t.doubleValue)}function JR(t){return ad(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.field=e,this.transform=n}}function pj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zo&&i instanceof zo||r instanceof qo&&i instanceof qo?Rl(r.elements,i.elements,ii):r instanceof Ul&&i instanceof Ul?ii(r.Ae,i.Ae):r instanceof jl&&i instanceof jl}(t.transform,e.transform)}class mj{constructor(e,n){this.version=e,this.transformResults=n}}class Ye{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wm{}function XR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ic(t.key,Ye.none()):new rc(t.key,t.data,Ye.none());{const n=t.data,r=jt.empty();let i=new Pe(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ji(t.key,r,new vn(i.toArray()),Ye.none())}}function gj(t,e,n){t instanceof rc?function(i,s,o){const a=i.value.clone(),l=ST(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(i,s,o){if(!xf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ST(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ZR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xu(t,e,n,r){return t instanceof rc?function(s,o,a,l){if(!xf(s.precondition,o))return a;const u=s.value.clone(),d=RT(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(s,o,a,l){if(!xf(s.precondition,o))return a;const u=RT(s.fieldTransforms,l,o),d=o.data;return d.setAll(ZR(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return xf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function yj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KR(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function AT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rl(r,i,(s,o)=>pj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rc extends wm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends wm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ST(t,e,n){const r=new Map;te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fj(o,a,n[i]))}return r}function RT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hj(s,o,e))}return r}class ic extends wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nw extends wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=XR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(n,r)=>AT(n,r))&&Rl(this.baseMutations,e.baseMutations,(n,r)=>AT(n,r))}}class Lw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return cj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Lw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ie;function tk(t){switch(t){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function nk(t){if(t===void 0)return dt("GRPC error has no .code"),V.UNKNOWN;switch(t){case pt.OK:return V.OK;case pt.CANCELLED:return V.CANCELLED;case pt.UNKNOWN:return V.UNKNOWN;case pt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case pt.INTERNAL:return V.INTERNAL;case pt.UNAVAILABLE:return V.UNAVAILABLE;case pt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case pt.NOT_FOUND:return V.NOT_FOUND;case pt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case pt.ABORTED:return V.ABORTED;case pt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case pt.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:t})}}(Ie=pt||(pt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Au=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Rs([4294967295,4294967295],0);function kT(t){const e=rk().encode(t),n=new HS;return n.update(e),new Uint8Array(n.digest())}function PT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rs([n,r],0),new Rs([i,s],0)]}class Vw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nu(`Invalid padding: ${n}`);if(r<0)throw new nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Rs.fromNumber(r)));return i.compare(wj)===1&&(i=new Rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=kT(e),[r,i]=PT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=kT(e),[r,i]=PT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ud.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jd(re.min(),i,new Ve(ae),In(),ce())}}class Ud{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ud(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class ik{constructor(e,n){this.targetId=e,this.Ce=n}}class sk{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CT{constructor(){this.ve=0,this.Fe=NT(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:s})}}),new Ud(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=NT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vj{constructor(e){this.Ge=e,this.ze=new Map,this.je=In(),this.Je=Gh(),this.He=Gh(),this.Ye=new Ve(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Ep(s))if(r===0){const o=new W(s.path);this.et(n,o,Ue.newNoDocument(o,re.min()))}else te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}Au==null||Au.lt(function(d,h,m,y,I){var E,v,b;const S={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},N=h.unchangedNames;return N&&(S.bloomFilter={applied:I===0,hashCount:(N==null?void 0:N.hashCount)??0,bitmapLength:((v=(E=N==null?void 0:N.bits)==null?void 0:E.bitmap)==null?void 0:v.length)??0,padding:((b=N==null?void 0:N.bits)==null?void 0:b.padding)??0,mightContain:P=>(y==null?void 0:y.mightContain(P))??!1}),S}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ci(r).toUint8Array()}catch(l){if(l instanceof IR)return hr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Vw(o,i,s)}catch(l){return hr(l instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Ep(a.target)){const l=new W(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ue.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ce();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new jd(e,n,this.Ye,this.je,r);return this.je=In(),this.Je=Gh(),this.He=Gh(),this.Ye=new Ve(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new CT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pe(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pe(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new CT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gh(){return new Ve(W.comparator)}function NT(){return new Ve(W.comparator)}const Ij=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Ej=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Tj=(()=>({and:"AND",or:"OR"}))();class bj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function A_(t,e){return t.useProto3Json||Dd(e)?e:{value:e}}function Bl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ok(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xj(t,e){return Bl(t,e.toTimestamp())}function ht(t){return te(!!t,49232),re.fromTimestamp(function(n){const r=Pi(n);return new Se(r.seconds,r.nanos)}(t))}function Mw(t,e){return S_(t,e).canonicalString()}function S_(t,e){const n=function(i){return new he(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ak(t){const e=he.fromString(t);return te(gk(e),10190,{key:e.toString()}),e}function cd(t,e){return Mw(t.databaseId,e.path)}function ti(t,e){const n=ak(e);if(n.get(1)!==t.databaseId.projectId)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(uk(n))}function lk(t,e){return Mw(t.databaseId,e)}function ck(t){const e=ak(t);return e.length===4?he.emptyPath():uk(e)}function R_(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uk(t){return te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function DT(t,e,n){return{name:cd(t,e),fields:n.value.mapValue.fields}}function vm(t,e,n){const r=ti(t,e.name),i=ht(e.updateTime),s=e.createTime?ht(e.createTime):re.min(),o=new jt({mapValue:{fields:e.fields}}),a=Ue.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Aj(t,e){return"found"in e?function(r,i){te(!!i.found,43571),i.found.name,i.found.updateTime;const s=ti(r,i.found.name),o=ht(i.found.updateTime),a=i.found.createTime?ht(i.found.createTime):re.min(),l=new jt({mapValue:{fields:i.found.fields}});return Ue.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){te(!!i.missing,3894),te(!!i.readTime,22933);const s=ti(r,i.missing),o=ht(i.readTime);return Ue.newNoDocument(s,o)}(t,e):X(7234,{result:e})}function Sj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(te(d===void 0||typeof d=="string",58123),ot.fromBase64String(d||"")):(te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?V.UNKNOWN:nk(u.code);return new j(d,u.message||"")}(o);n=new sk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ti(t,r.document.name),s=ht(r.document.updateTime),o=r.document.createTime?ht(r.document.createTime):re.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=Ue.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Af(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ti(t,r.document),s=r.readTime?ht(r.readTime):re.min(),o=Ue.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Af([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ti(t,r.document),s=r.removedTargetIds||[];n=new Af([],s,i,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _j(i,s),a=r.targetId;n=new ik(a,o)}}return n}function ud(t,e){let n;if(e instanceof rc)n={update:DT(t,e.key,e.value)};else if(e instanceof ic)n={delete:cd(t,e.key)};else if(e instanceof ji)n={update:DT(t,e.key,e.data),updateMask:Dj(e.fieldMask)};else{if(!(e instanceof Nw))return X(16599,{Vt:e.type});n={verify:cd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ul)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:xj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function k_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ye.updateTime(ht(s.updateTime)):s.exists!==void 0?Ye.exists(s.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new jl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new zo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new qo(d)}else"increment"in a?l=new Ul(o,a.increment):X(16584,{proto:a});const u=Qe.fromServerFormat(a.fieldPath);return new Fd(u,l)}(t,i)):[];if(e.update){e.update.name;const i=ti(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new vn(u.map(d=>Qe.fromServerFormat(d)))}(e.updateMask);return new ji(i,s,o,n,r)}return new rc(i,s,n,r)}if(e.delete){const i=ti(t,e.delete);return new ic(i,n)}if(e.verify){const i=ti(t,e.verify);return new Nw(i,n)}return X(1463,{proto:e})}function Rj(t,e){return t&&t.length>0?(te(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ht(i.updateTime):ht(s);return o.isEqual(re.min())&&(o=ht(s)),new mj(o,i.transformResults||[])}(n,e))):[]}function dk(t,e){return{documents:[lk(t,e.path)]}}function Im(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lk(t,i);const s=function(u){if(u.length!==0)return mk(Re.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:cs(m.field),direction:Pj(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=A_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function hk(t,e,n,r){const{ft:i,parent:s}=Im(t,e),o={},a=[];let l=0;return n.forEach(u=>{const d=r?u.alias:"aggregate_"+l++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:cs(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:cs(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function fk(t){let e=ck(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){te(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=pk(h);return m instanceof Re&&Rw(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(I){return new ld(Wa(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Dd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,y=h.values||[];return new Os(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,y=h.values||[];return new Os(y,m)}(n.endAt)),MR(e,i,o,s,a,"F",l,u)}function kj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wa(n.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wa(n.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wa(n.unaryFilter.field);return we.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wa(n.unaryFilter.field);return we.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return we.create(Wa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(r=>pk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function Pj(t){return Ij[t]}function Cj(t){return Ej[t]}function Nj(t){return Tj[t]}function cs(t){return{fieldPath:t.canonicalString()}}function Wa(t){return Qe.fromServerFormat(t.fieldPath)}function mk(t){return t instanceof we?function(n){if(n.op==="=="){if(yT(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(gT(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yT(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(gT(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:Cj(n.op),value:n.value}}}(t):t instanceof Re?function(n){const r=n.getFilters().map(i=>mk(i));return r.length===1?r[0]:{compositeFilter:{op:Nj(n.op),filters:r}}}(t):X(54877,{filter:t})}function Dj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r,i,s=re.min(),o=re.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.yt=e}}function Lj(t,e){let n;if(e.document)n=vm(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=Ho(e.noDocument.readTime);n=Ue.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const r=W.fromSegments(e.unknownDocument.path),i=Ho(e.unknownDocument.version);n=Ue.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Se(i[0],i[1]);return re.fromTimestamp(s)}(e.readTime)),n}function LT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:cd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Bl(s,o.version.toTimestamp()),createTime:Bl(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Go(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Go(e.version)}}return r}function xp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Go(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ho(t){const e=new Se(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function go(t,e){const n=(e.baseMutations||[]).map(s=>k_(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>k_(t.yt,s)),i=Se.fromMillis(e.localWriteTimeMs);return new Dw(e.batchId,i,n,r)}function ru(t){const e=Ho(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ho(t.lastLimboFreeSnapshotVersion):re.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return te(o===1,1966,{count:o}),Zt(nc(ck(s.documents[0])))}(t.query):function(s){return Zt(fk(s))}(t.query),new wi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function _k(t,e){const n=Go(e.snapshotVersion),r=Go(e.lastLimboFreeSnapshotVersion);let i;i=Ep(e.target)?dk(t.yt,e.target):Im(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$o(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Em(t){const e=fk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bp(e,e.limit,"L"):e}function Hg(t,e){return new Ow(e.largestBatchId,k_(t.yt,e.overlayMutation))}function OT(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function VT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Go(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{getBundleMetadata(e,n){return MT(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ho(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return MT(e).put(function(i){return{bundleId:i.id,createTime:Go(ht(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return FT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Em(s.bundledQuery),readTime:Ho(s.readTime)}}(r)})}saveNamedQuery(e,n){return FT(e).put(function(i){return{name:i.name,readTime:Go(ht(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function MT(t){return Et(t,hm)}function FT(t){return Et(t,fm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Tm(e,r)}getOverlay(e,n){return Bc(e).get(OT(this.userId,n)).next(r=>r?Hg(this.serializer,r):null)}getOverlays(e,n){const r=Yr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Ow(n,o);i.push(this.St(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Bc(e).Z(__,a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Yr(),s=Xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Bc(e).J(__,o).next(a=>{for(const l of a){const u=Hg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Yr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Bc(e).ee({index:pR,range:a},(l,u,d)=>{const h=Hg(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,n){return Bc(e).put(function(i,s,o){const[a,l,u]=OT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ud(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Bc(t){return Et(t,pm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{bt(e){return Et(e,bw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(We(e.integerValue));else if("doubleValue"in e){const r=We(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ed(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Pi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ci(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?SR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ym(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Vl,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(We(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),W.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}yo.Kt=new yo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=255;function Mj(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function jT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Mj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class Fj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=jT(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=jT(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Ma),this.sn(255)}_n(){this.an(Ma),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ma?(this.sn(Ma),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ma?(this.an(Ma),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Uj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class $c{constructor(){this.cn=new Fj,this.ln=new jj(this.cn),this.hn=new Uj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new _o(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Sf(this.En),directionalValue:Sf(this.dn),orderedDocumentKey:Sf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Qi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=UT(t.En,e.En),n!==0?n:(n=UT(t.dn,e.dn),n!==0?n:W.comparator(t.In,e.In)))}function UT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Sf(t){return gA()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function BT(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class $T{constructor(e){this.mn=new Pe((n,r)=>Qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=m_(e);if(n!==void 0&&!this.wn(n))return!1;const r=uo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Pe(Qe.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ko(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ko(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ko(r.field,r.dir==="asc"?0:1)));return new Pl(Pl.UNKNOWN_ID,this.collectionId,n,Cl.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){var n,r;if(te(t instanceof we||t instanceof Re,20012),t instanceof we){if(t instanceof VR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>we.create(t.field,"==",s)))||[];return Re.create(i,"or")}return t}const e=t.filters.map(i=>wk(i));return Re.create(e,t.op)}function Bj(t){if(t.getFilters().length===0)return[];const e=N_(wk(t));return te(vk(e),7391),P_(e)||C_(e)?[e]:e.getFilters()}function P_(t){return t instanceof we}function C_(t){return t instanceof Re&&Rw(t)}function vk(t){return P_(t)||C_(t)||function(n){if(n instanceof Re&&E_(n)){for(const r of n.getFilters())if(!P_(r)&&!C_(r))return!1;return!0}return!1}(t)}function N_(t){if(te(t instanceof we||t instanceof Re,34018),t instanceof we)return t;if(t.filters.length===1)return N_(t.filters[0]);const e=t.filters.map(r=>N_(r));let n=Re.create(e,t.op);return n=Ap(n),vk(n)?n:(te(n instanceof Re,64498),te(Fl(n),40251),te(n.filters.length>1,57927),n.filters.reduce((r,i)=>Fw(r,i)))}function Fw(t,e){let n;return te(t instanceof we||t instanceof Re,38388),te(e instanceof we||e instanceof Re,25473),n=t instanceof we?e instanceof we?function(i,s){return Re.create([i,s],"and")}(t,e):zT(t,e):e instanceof we?zT(e,t):function(i,s){if(te(i.filters.length>0&&s.filters.length>0,48005),Fl(i)&&Fl(s))return DR(i,s.getFilters());const o=E_(i)?i:s,a=E_(i)?s:i,l=o.filters.map(u=>Fw(u,a));return Re.create(l,"or")}(t,e),Ap(n)}function zT(t,e){if(Fl(e))return DR(e,t.getFilters());{const n=e.filters.map(r=>Fw(t,r));return Re.create(n,"or")}}function Ap(t){if(te(t instanceof we||t instanceof Re,11850),t instanceof we)return t;const e=t.getFilters();if(e.length===1)return Ap(e[0]);if(CR(t))return t;const n=e.map(i=>Ap(i)),r=[];return n.forEach(i=>{i instanceof we?r.push(i):i instanceof Re&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.Cn=new jw}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Kn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class jw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pe(he.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="IndexedDbIndexManager",Hh=new Uint8Array(0);class zj{constructor(e,n){this.databaseId=n,this.vn=new jw,this.Fn=new Fi(r=>$o(r),(r,i)=>Od(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Xt(i)};return GT(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[eR(n),""],!1,!0);return GT(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Qr(o.parent))}return r})}addFieldIndex(e,n){const r=zc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ja(e);return s.next(a=>{o.put(VT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=zc(e),i=ja(e),s=Fa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=zc(e),r=Fa(e),i=ja(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return O.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new $T(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Fa(e);let i=!0;const s=new Map;return O.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ce();const a=[];return O.forEach(s,(l,u)=>{$(qT,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${$o(n)}`);const d=function(b,P){const U=m_(P);if(U===void 0)return null;for(const z of Tp(b,U.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(u,l),h=function(b,P){const U=new Map;for(const z of uo(P))for(const T of Tp(b,z.fieldPath))switch(T.op){case"==":case"in":U.set(z.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return U.set(z.fieldPath.canonicalString(),T.value),Array.from(U.values())}return null}(u,l),m=function(b,P){const U=[];let z=!0;for(const T of uo(P)){const w=T.kind===0?ET(b,T.fieldPath,b.startAt):TT(b,T.fieldPath,b.startAt);U.push(w.value),z&&(z=w.inclusive)}return new Os(U,z)}(u,l),y=function(b,P){const U=[];let z=!0;for(const T of uo(P)){const w=T.kind===0?TT(b,T.fieldPath,b.endAt):ET(b,T.fieldPath,b.endAt);U.push(w.value),z&&(z=w.inclusive)}return new Os(U,z)}(u,l),I=this.On(l,u,m),S=this.On(l,u,y),N=this.Nn(l,u,h),E=this.Bn(l.indexId,d,I,m.inclusive,S,y.inclusive,N);return O.forEach(E,v=>r.Y(v,n.limit).next(b=>{b.forEach(P=>{const U=W.fromSegments(P.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return O.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=Bj(Re.create(e.filters,"and")).map(r=>b_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const m=n?this.Ln(n[h/u]):Hh,y=this.kn(e,m,r[h%u],i),I=this.qn(e,m,s[h%u],o),S=a.map(N=>this.kn(e,m,N,!0));d.push(...this.createRange(y,I,S))}return d}kn(e,n,r,i){const s=new _o(e,W.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new _o(e,W.empty(),n,r);return i?s.An():s}xn(e,n){const r=new $T(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return O.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Pe(Qe.comparator),d=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new $c;for(const i of uo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);yo.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new $c;return yo.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new $c;return yo.Kt.Dt(Bo(this.databaseId,n),r.Pn(function(s){const o=uo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new $c);let s=0;for(const o of uo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&ad(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);yo.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new $c;l.seed(a.un()),yo.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=zc(e),i=ja(e);return(n?r.J(y_,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const m=h?new Cl(h.sequenceNumber,new Kn(Ho(h.readTime),new W(Qr(h.documentKey)),h.largestBatchId)):Cl.empty(),y=d.fields.map(([I,S])=>new ko(Qe.fromServerFormat(I),S));return new Pl(d.indexId,d.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=zc(e),s=ja(e);return this.Gn(e).next(o=>i.J(y_,IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,l=>s.put(VT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,l=>this.zn(e,i,l).next(u=>{const d=this.jn(s,l);return u.isEqual(d)?O.resolve():this.Jn(e,s,l,u,d)}))))})}Hn(e,n,r,i){return Fa(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Fa(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Fa(e);let s=new Pe(Qi);return i.ee({index:fR,range:IDBKeyRange.only([r.indexId,this.uid,Sf(this.$n(r,n))])},(o,a)=>{s=s.add(new _o(r.indexId,n,BT(a.arrayValue),BT(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Pe(Qi);const i=this.Qn(n,e);if(i==null)return r;const s=m_(n);if(s!=null){const o=e.data.field(s.fieldPath);if(ad(o))for(const a of o.arrayValue.values||[])r=r.add(new _o(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new _o(n.indexId,e.key,Hh,i));return r}Jn(e,n,r,i,s){$(qT,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,m){const y=l.getIterator(),I=u.getIterator();let S=Va(y),N=Va(I);for(;S||N;){let E=!1,v=!1;if(S&&N){const b=d(S,N);b<0?v=!0:b>0&&(E=!0)}else S!=null?v=!0:E=!0;E?(h(N),N=Va(I)):v?(m(S),S=Va(y)):(S=Va(y),N=Va(I))}}(i,s,Qi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),O.waitFor(o)}Gn(e){let n=1;return ja(e).ee({index:hR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Qi(o,a)).filter((o,a,l)=>!a||Qi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Qi(o,e),l=Qi(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Hh,W.empty()),l=i[o+1].Vn(this.uid,Hh,W.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Qi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(HT)}getMinOffset(e,n){return O.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||X(44426))).next(HT)}}function GT(t){return Et(t,rd)}function Fa(t){return Et(t,Eu)}function zc(t){return Et(t,Tw)}function ja(t){return Et(t,Iu)}function HT(t){te(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;vw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ik=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t,e,n){const r=t.store(Tr),i=t.store(Nl),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,m)=>(a++,m.delete()));s.push(l.next(()=>{te(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const h=cR(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return O.waitFor(s).next(()=>u)}function Sp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(Ik,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class bm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){te(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new bm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).ee({index:xo,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ka(e),o=Yi(e);return o.add({}).next(a=>{te(typeof a=="number",49019);const l=new Dw(a,n,r,i),u=function(y,I,S){const N=S.baseMutations.map(v=>ud(y.yt,v)),E=S.mutations.map(v=>ud(y.yt,v));return{userId:I,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:N,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new Pe((m,y)=>ae(m.canonicalString(),y.canonicalString()));for(const m of i){const y=cR(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(o.put(u)),d.push(s.put(y,x3))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),O.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Yi(e).get(n).next(r=>r?(te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),go(this.serializer,r)):null)}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Yi(e).ee({index:xo,range:i},(o,a,l)=>{a.userId===this.userId&&(te(a.batchId>=r,47524,{tr:r}),s=go(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ks;return Yi(e).ee({index:xo,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,ks],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).J(xo,n).next(r=>r.map(i=>go(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ka(e).ee({range:i},(o,a,l)=>{const[u,d,h]=o,m=Qr(d);if(u===this.userId&&n.path.isEqual(m))return Yi(e).get(h).next(y=>{if(!y)throw X(61480,{nr:o,batchId:h});te(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),s.push(go(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(ae);const i=[];return n.forEach(s=>{const o=vf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ka(e).ee({range:a},(u,d,h)=>{const[m,y,I]=u,S=Qr(y);m===this.userId&&s.path.isEqual(S)?r=r.add(I):h.done()});i.push(l)}),O.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=vf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Pe(ae);return Ka(e).ee({range:o},(l,u,d)=>{const[h,m,y]=l,I=Qr(m);h===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Yi(e).get(s).next(o=>{if(o===null)throw X(35274,{batchId:s});te(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(go(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Ek(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ka(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Qr(s[1]);i.push(l)}else a.done()}).next(()=>{te(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return Tk(e,this.userId,n)}_r(e){return bk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:ks,lastStreamToken:""})}}function Tk(t,e,n){const r=vf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ka(t).ee({range:s,X:!0},(a,l,u)=>{const[d,h,m]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Yi(t){return Et(t,Tr)}function Ka(t){return Et(t,Nl)}function bk(t){return Et(t,td)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wo(0)}static cr(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Wo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>re.fromTimestamp(new Se(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ua(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(te(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ua(e).ee((o,a)=>{const l=ru(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ua(e).ee((r,i)=>{const s=ru(i);n(s)})}lr(e){return KT(e).get(Ip).next(n=>(te(n!==null,2888),n))}hr(e,n){return KT(e).put(Ip,n)}Pr(e,n){return Ua(e).put(_k(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=$o(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ua(e).ee({range:i,index:dR},(o,a,l)=>{const u=ru(a);Od(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=us(e);return n.forEach(o=>{const a=Xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=us(e);return O.forEach(n,s=>{const o=Xt(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=us(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=us(e);let s=ce();return i.ee({range:r,X:!0},(o,a,l)=>{const u=Qr(o[1]),d=new W(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Xt(n.path),i=IDBKeyRange.bound([r],[eR(r)],!1,!0);let s=0;return us(e).ee({index:Ew,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Ua(e).get(n).next(r=>r?ru(r):null)}}function Ua(t){return Et(t,Dl)}function KT(t){return Et(t,Po)}function us(t){return Et(t,Ll)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="LruGarbageCollector",xk=1048576;function YT([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class Gj{constructor(e){this.Ir=e,this.buffer=new Pe(YT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ak{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(QT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?$(QT,"Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Vr(3e5)})}}class Hj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(wn.ce);const r=new Gj(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(WT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Ga()<=_e.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function Sk(t,e){return new Hj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.db=e,this.garbageCollector=Sk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Wh(e,r)}removeReference(e,n,r){return Wh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Wh(e,n)}br(e,n){return function(i,s){let o=!1;return bk(i).te(a=>Tk(i,a,s).next(l=>(l&&(o=!0),O.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,re.min()),us(e).delete(function(h){return[0,Xt(h.path)]}(o))))});i.push(l)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Wh(e,n)}Sr(e,n){const r=us(e);let i,s=wn.ce;return r.ee({index:Ew},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==wn.ce&&n(new W(Qr(i)),s),s=u,i=l):s=wn.ce}).next(()=>{s!==wn.ce&&n(new W(Qr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(t,e){return us(t).put(function(r,i){return{targetId:0,path:Xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.changes=new Fi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ue.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oo(e).put(r)}removeEntry(e,n,r){return oo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],xp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Ue.newInvalidDocument(n);return oo(e).ee({index:If,range:IDBKeyRange.only(qc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Ue.newInvalidDocument(n)};return oo(e).ee({index:If,range:IDBKeyRange.only(qc(n))},(i,s)=>{r={document:this.Cr(n,s),size:Sp(s)}}).next(()=>r)}getEntries(e,n){let r=In();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=In(),i=new Ve(W.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Sp(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return O.resolve();let i=new Pe(ZT);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(qc(i.first()),qc(i.last())),o=i.getIterator();let a=o.getNext();return oo(e).ee({index:If,range:s},(l,u,d)=>{const h=W.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ZT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(qc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),xp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=In();for(const h of u){const m=this.Cr(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(Md(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=In();const o=XT(n,r),a=XT(n,Kn.max());return oo(e).ee({index:uR,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.Cr(W.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Qj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return JT(e).get(g_).next(n=>(te(!!n,20021),n))}Dr(e,n){return JT(e).put(g_,n)}Cr(e,n){if(n){const r=Lj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return Ue.newInvalidDocument(e)}}function kk(t){return new Kj(t)}class Qj extends Rk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Fi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Pe((s,o)=>ae(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=LT(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Sp(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=LT(this.Nr.serializer,o.convertToNoDocument(re.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function JT(t){return Et(t,nd)}function oo(t){return Et(t,vp)}function qc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XT(t,e){const n=e.documentKey.path.toArray();return[t,xp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ZT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ae(n[s],r[s]),i)return i;return i=ae(n.length,r.length),i||(i=ae(n[n.length-2],r[r.length-2]),i||ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xu(r.mutation,i,vn.empty(),Se.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=tu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=In();const o=bu(),a=function(){return bu()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ji)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),xu(d.mutation,u,d.mutation.getFieldMask(),Se.now())):o.set(u.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new Yj(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=bu();let i=new Ve((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||vn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=GR();d.forEach(m=>{if(!s.has(m)){const y=XR(n.get(m),r.get(m));y!==null&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Yr());let a=kl,l=s;return o.next(u=>O.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ce())).next(d=>({batchId:a,changes:qR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=tu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,l=>{const u=function(h,m){return new Mi(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ue.newInvalidDocument(d)))});let a=tu();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&xu(d.mutation,u,vn.empty(),Se.now()),Md(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ht(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Em(i.bundledQuery),readTime:ht(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.overlays=new Ve(W.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Yr(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Yr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Yr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return O.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ow(n,r));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.Qr=new Pe(xt.$r),this.Ur=new Pe(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new he([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new he([])),r=new xt(n,e),i=new xt(n,e+1);let s=ce();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(xt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?ks:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pe(ae);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new xt(new W(s),0);let a=new Pe(ae);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),O.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xt(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.ri=e,this.docs=function(){return new Ve(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Ue.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ue.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=In();const o=n.path,a=new W(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vw(iR(d),r)<=0||(i.has(d.key)||Md(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n5(this)}getSize(e){return O.resolve(this.size)}}class n5 extends Rk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.persistence=e,this.si=new Fi(n=>$o(n),Od),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Uw,this.targetCount=0,this.ai=Wo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.ui={},this.overlays={},this.ci=new wn(0),this.li=!1,this.li=!0,this.hi=new Zj,this.referenceDelegate=e(this),this.Pi=new r5(this),this.indexManager=new $j,this.remoteDocumentCache=function(i){return new t5(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new yk(n),this.Ii=new Jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new e5(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new i5(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class i5 extends oR{constructor(e){super(),this.currentSequenceNumber=e}}class xm{constructor(e){this.persistence=e,this.Ri=new Uw,this.Vi=null}static mi(e){return new xm(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{const i=W.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rp{constructor(e,n){this.persistence=e,this.pi=new Fi(r=>Xt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Sk(this,n)}static mi(e,n){return new Rp(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tf(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.serializer=e}k(e,n,r,i){const s=new dm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Ld)}(e),function(l){l.createObjectStore(td,{keyPath:b3}),l.createObjectStore(Tr,{keyPath:uT,autoIncrement:!0}).createIndex(xo,dT,{unique:!0}),l.createObjectStore(Nl)}(e),e1(e),function(l){l.createObjectStore(ho)}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Ll),l.deleteObjectStore(Dl),l.deleteObjectStore(Po)}(e),e1(e)),o=o.next(()=>function(l){const u=l.store(Po),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put(Ip,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Tr).J().next(h=>{l.deleteObjectStore(Tr),l.createObjectStore(Tr,{keyPath:uT,autoIncrement:!0}).createIndex(xo,dT,{unique:!0});const m=u.store(Tr),y=h.map(I=>m.put(I));return O.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Ol,{keyPath:D3})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(nd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(hm,{keyPath:L3})})(e),function(l){l.createObjectStore(fm,{keyPath:O3})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(pm,{keyPath:$3});u.createIndex(__,z3,{unique:!1}),u.createIndex(pR,q3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(vp,{keyPath:A3});u.createIndex(If,S3),u.createIndex(uR,R3)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ho))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(Tw,{keyPath:V3,autoIncrement:!0}).createIndex(y_,M3,{unique:!1}),l.createObjectStore(Iu,{keyPath:F3}).createIndex(hR,j3,{unique:!1}),l.createObjectStore(Eu,{keyPath:U3}).createIndex(fR,B3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Iu).clear()}).next(()=>{n.objectStore(Eu).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(bw,{keyPath:G3})})(e)})),r<18&&i>=18&&gA()&&(o=o.next(()=>{n.objectStore(Iu).clear()}).next(()=>{n.objectStore(Eu).clear()})),o}wi(e){let n=0;return e.store(ho).ee((r,i)=>{n+=Sp(i)}).next(()=>{const r={byteSize:n};return e.store(nd).put(g_,r)})}yi(e){const n=e.store(td),r=e.store(Tr);return n.J().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,ks],[s.userId,s.lastAcknowledgedBatchId]);return r.J(xo,o).next(a=>O.forEach(a,l=>{te(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=go(this.serializer,l);return Ek(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(Ll),r=e.store(ho);return e.store(Po).get(Ip).next(i=>{const s=[];return r.ee((o,a)=>{const l=new he(o),u=function(h){return[0,Xt(h)]}(l);s.push(n.get(u).next(d=>d?O.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}bi(e,n){e.createObjectStore(rd,{keyPath:N3});const r=n.store(rd),i=new jw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store(ho).ee({X:!0},(o,a)=>{const l=new he(o);return s(l.popLast())}).next(()=>n.store(Nl).ee({X:!0},([o,a,l],u)=>{const d=Qr(a);return s(d.popLast())}))}Di(e){const n=e.store(Dl);return n.ee((r,i)=>{const s=ru(i),o=_k(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(ho),i=[];return r.ee((s,o)=>{const a=n.store(vp),l=function(h){return h.document?new W(he.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):X(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>O.waitFor(i))}Fi(e,n){const r=n.store(Tr),i=kk(this.serializer),s=new Bw(xm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??ce();go(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),O.forEach(a,(l,u)=>{const d=new St(u),h=Tm.wt(this.serializer,d),m=s.getIndexManager(d),y=bm.wt(d,this.serializer,m,s.referenceDelegate);return new Pk(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new w_(n,wn.ce),l).next()})})}}function e1(t){t.createObjectStore(Ll,{keyPath:P3}).createIndex(Ew,C3,{unique:!0}),t.createObjectStore(Dl,{keyPath:"targetId"}).createIndex(dR,k3,{unique:!0}),t.createObjectStore(Po)}const Ji="IndexedDbPersistence",Wg=18e5,Kg=5e3,Qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ck="main";class $w{constructor(e,n,r,i,s,o,a,l,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!$w.v())throw new j(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wj(this,i),this.$i=n+Ck,this.serializer=new yk(l),this.Ui=new ei(this.$i,this.Ni,new s5(this.serializer)),this.hi=new Vj,this.Pi=new qj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kk(this.serializer),this.Ii=new Oj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&dt(Ji,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,Qg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new wn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(zs(e))return $(Ji,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(Ji,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Gc(e).get(Oa).next(n=>O.resolve(this.es(n)))}ts(e){return Kh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Wg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Et(n,Ol);return r.J().next(i=>{const s=this.ss(i,Wg),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):Gc(e).get(Oa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Kg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,Qg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kh(e).J().next(r=>this.ss(r,Kg).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(Ji,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ld,Ol],e=>{const n=new w_(e,wn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Kh(e).J().next(n=>this.ss(n,Wg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return bm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Tm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(Ji,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?K3:l===17?_R:l===16?W3:l===15?xw:l===14?yR:l===13?gR:l===12?H3:l===11?mR:void X(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new w_(a,this.ci?this.ci.next():wn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new j(V.FAILED_PRECONDITION,sR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Gc(e).get(Oa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Kg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(V.FAILED_PRECONDITION,Qg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gc(e).put(Oa,n)}static v(){return ei.v()}Zi(e){const n=Gc(e);return n.get(Oa).next(r=>this.es(r)?($(Ji,"Releasing primary lease."),n.delete(Oa)):O.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;mA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(Ji,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dt(Ji,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){dt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gc(t){return Et(t,Ld)}function Kh(t){return Et(t,Ol)}function zw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mA()?8:aR(It())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new o5;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ga()<=_e.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(Ga()<=_e.DEBUG&&$("QueryEngine","Query:",Ha(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ga()<=_e.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):O.resolve())}ys(e,n){if(bT(n))return O.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bp(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,bp(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return bT(n)||i.isEqual(re.min())?O.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?O.resolve(null):(Ga()<=_e.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ha(n)),this.vs(e,o,n,rR(i,kl)).next(a=>a))})}Ds(e,n){let r=new Pe($R(e));return n.forEach((i,s)=>{Md(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Ga()<=_e.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ha(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="LocalStore",a5=3e8;class l5{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ve(ae),this.xs=new Fi(s=>$o(s),Od),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Dk(t,e,n,r){return new l5(t,e,n,r)}async function Lk(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function c5(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,m=h.keys();let y=O.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(S=>{const N=u.docVersions.get(I);te(N!==null,48541),S.version.compareTo(N)<0&&(h.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),d.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ok(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function u5(t,e){const n=K(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(ot.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(S,N,E){return S.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=a5?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,d)&&a.push(n.Pi.updateTargetData(s,y))});let l=In(),u=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Vk(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(re.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Vk(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=In();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(Gw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function d5(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ks),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $l(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new wi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function zl(t,e,n){const r=K(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zs(o))throw o;$(Gw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function kp(t,e,n){const r=K(t);let i=re.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=K(l),m=h.xs.get(d);return m!==void 0?O.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:ce())).next(a=>(jk(r,BR(e),a),{documents:a,Qs:s})))}function Mk(t,e){const n=K(t),r=K(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Fk(t,e){const n=K(t),r=n.Os.get(e)||re.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,rR(r,kl),Number.MAX_SAFE_INTEGER)).then(i=>(jk(n,e,i),i))}function jk(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function h5(t,e,n,r){const i=K(t);let s=ce(),o=In();for(const u of n){const d=e.$s(u.metadata.name);u.document&&(s=s.add(d));const h=e.Us(u);h.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(d,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await $l(i,function(d){return Zt(nc(he.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Vk(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.ks,d.qs)).next(()=>d.ks)))}async function f5(t,e,n=ce()){const r=await $l(t,Zt(Em(e.bundledQuery))),i=K(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ht(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(ot.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firestore_clients";function t1(t,e){return`${Uk}_${t}_${e}`}const Bk="firestore_mutations";function n1(t,e,n){let r=`${Bk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const $k="firestore_targets";function Yg(t,e){return`${$k}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="SharedClientState";class Pp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new Pp(e,n,i.state,s):(dt(Hr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Su{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Su(e,r.state,i):(dt(Hr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Pw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=lR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Cp(e,s):(dt(Hr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Hw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Hw(n.clientId,n.onlineState):(dt(Hr,`Failed to parse online state: ${e}`),null)}}class D_{constructor(){this.activeTargetIds=Pw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jg{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ve(ae),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=t1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new D_),this.ro=new RegExp(`^${Uk}_${o}_([^_]*)$`),this.io=new RegExp(`^${Bk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${$k}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(t1(this.persistenceKey,r));if(i){const s=Cp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Yg(this.persistenceKey,e));if(i){const s=Su.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(Hr,"READ",e,n),n}setItem(e,n){$(Hr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(Hr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(Hr,"EVENT",n.key,n.newValue),n.key===this.eo)return void dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=wn.ce;if(s!=null)try{const a=JSON.parse(s);te(typeof a=="number",30636,{So:s}),o=a}catch(a){dt(Hr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==wn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Pp(this.currentUser,e,n,r),s=n1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=n1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Yg(this.persistenceKey,e),s=new Su(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Cp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Pp.Ws(new St(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Su.Ws(i,n)}uo(e){return Hw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(Hr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Pw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class zk{constructor(){this.Mo=new D_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new D_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="ConnectivityMonitor";class i1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(r1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(r1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=null;function L_(){return Qh===null?Qh=function(){return 268435456+Math.round(2147483648*Math.random())}():Qh++,"0x"+Qh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="RestConnection",m5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===sd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=L_(),a=this.zo(e,n.toUriEncodedString());$(Xg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=Di(u);return this.Jo(e,a,l,r,d).then(h=>($(Xg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw hr(Xg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=m5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class _5 extends g5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=L_();return new Promise((a,l)=>{const u=new WS;u.setWithCredentials(!0),u.listenOnce(KS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wf.NO_ERROR:const h=u.getResponseJson();$(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case wf.TIMEOUT:$(Kt,`RPC '${e}' ${o} timed out`),l(new j(V.DEADLINE_EXCEEDED,"Request time out"));break;case wf.HTTP_ERROR:const m=u.getStatus();if($(Kt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y==null?void 0:y.error;if(I&&I.status&&I.message){const S=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(v)>=0?v:V.UNKNOWN}(I.status);l(new j(S,I.message))}else l(new j(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new j(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(Kt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);$(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=L_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JS(),a=YS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(Kt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let m=!1,y=!1;const I=new y5({Yo:N=>{y?$(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||($(Kt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),$(Kt,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},Zo:()=>h.close()}),S=(N,E,v)=>{N.listen(E,b=>{try{v(b)}catch(P){setTimeout(()=>{throw P},0)}})};return S(h,eu.EventType.OPEN,()=>{y||($(Kt,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),S(h,eu.EventType.CLOSE,()=>{y||(y=!0,$(Kt,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(h))}),S(h,eu.EventType.ERROR,N=>{y||(y=!0,hr(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.a_(new j(V.UNAVAILABLE,"The operation could not be completed")))}),S(h,eu.EventType.MESSAGE,N=>{var E;if(!y){const v=N.data[0];te(!!v,16349);const b=v,P=(b==null?void 0:b.error)||((E=b[0])==null?void 0:E.error);if(P){$(Kt,`RPC '${e}' stream ${i} received error:`,P);const U=P.status;let z=function(x){const k=pt[x];if(k!==void 0)return nk(k)}(U),T=P.message;z===void 0&&(z=V.INTERNAL,T="Unknown error status: "+U+" with message "+P.message),y=!0,I.a_(new j(z,T)),h.close()}else $(Kt,`RPC '${e}' stream ${i} received:`,v),I.u_(v)}}),S(a,QS.STAT_EVENT,N=>{N.stat===d_.PROXY?$(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===d_.NOPROXY&&$(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return typeof window<"u"?window:null}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){return new bj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="PersistentStream";class Gk{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ww(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(dt(n.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new j(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(s1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(s1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w5 extends Gk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Sj(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?ht(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=R_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ep(l)?{documents:dk(s,l)}:{query:Im(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ok(s,o.resumeToken);const u=A_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=Bl(s,o.snapshotVersion.toTimestamp());const u=A_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=kj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=R_(this.serializer),n.removeTarget=e,this.q_(n)}}class v5 extends Gk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rj(e.writeResults,e.commitTime),r=ht(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=R_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ud(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{}class E5 extends I5{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,S_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(V.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,S_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class T5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dt(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class b5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Gs(this)&&($(Ko,"Restarting streams for network reachability change."),await async function(l){const u=K(l);u.Ea.add(4),await sc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Bd(u)}(this))})}),this.Ra=new T5(r,i)}}async function Bd(t){if(Gs(t))for(const e of t.da)await e(!0)}async function sc(t){for(const e of t.da)await e(!1)}function Am(t,e){const n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yw(n)?Qw(n):ac(n).O_()&&Kw(n,e))}function ql(t,e){const n=K(t),r=ac(n);n.Ia.delete(e),r.O_()&&Hk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gs(n)&&n.Ra.set("Unknown"))}function Kw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(t).Y_(e)}function Hk(t,e){t.Va.Ue(e),ac(t).Z_(e)}function Qw(t){t.Va=new vj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ac(t).start(),t.Ra.ua()}function Yw(t){return Gs(t)&&!ac(t).x_()&&t.Ia.size>0}function Gs(t){return K(t).Ea.size===0}function Wk(t){t.Va=void 0}async function x5(t){t.Ra.set("Online")}async function A5(t){t.Ia.forEach((e,n)=>{Kw(t,e)})}async function S5(t,e){Wk(t),Yw(t)?(t.Ra.ha(e),Qw(t)):t.Ra.set("Unknown")}async function R5(t,e,n){if(t.Ra.set("Online"),e instanceof sk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Np(t,r)}else if(e instanceof Af?t.Va.Ze(e):e instanceof ik?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await Ok(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(ot.EMPTY_BYTE_STRING,d.snapshotVersion)),Hk(s,l);const h=new wi(d.target,l,u,d.sequenceNumber);Kw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(Ko,"Failed to raise snapshot:",r),await Np(t,r)}}async function Np(t,e,n){if(!zs(e))throw e;t.Ea.add(1),await sc(t),t.Ra.set("Offline"),n||(n=()=>Ok(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(Ko,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bd(t)})}function Kk(t,e){return e().catch(n=>Np(t,n,e))}async function oc(t){const e=K(t),n=Vs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ks;for(;k5(e);)try{const i=await d5(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,P5(e,i)}catch(i){await Np(e,i)}Qk(e)&&Yk(e)}function k5(t){return Gs(t)&&t.Ta.length<10}function P5(t,e){t.Ta.push(e);const n=Vs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Qk(t){return Gs(t)&&!Vs(t).x_()&&t.Ta.length>0}function Yk(t){Vs(t).start()}async function C5(t){Vs(t).ra()}async function N5(t){const e=Vs(t);for(const n of t.Ta)e.ea(n.mutations)}async function D5(t,e,n){const r=t.Ta.shift(),i=Lw.from(r,e,n);await Kk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await oc(t)}async function L5(t,e){e&&Vs(t).X_&&await async function(r,i){if(function(o){return tk(o)&&o!==V.ABORTED}(i.code)){const s=r.Ta.shift();Vs(r).B_(),await Kk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await oc(r)}}(t,e),Qk(t)&&Yk(t)}async function o1(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),$(Ko,"RemoteStore received new credentials");const r=Gs(n);n.Ea.add(3),await sc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bd(n)}async function O_(t,e){const n=K(t);e?(n.Ea.delete(2),await Bd(n)):e||(n.Ea.add(2),await sc(n),n.Ra.set("Unknown"))}function ac(t){return t.ma||(t.ma=function(n,r,i){const s=K(n);return s.sa(),new w5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:x5.bind(null,t),t_:A5.bind(null,t),r_:S5.bind(null,t),H_:R5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Yw(t)?Qw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Wk(t))})),t.ma}function Vs(t){return t.fa||(t.fa=function(n,r,i){const s=K(n);return s.sa(),new v5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:C5.bind(null,t),r_:L5.bind(null,t),ta:N5.bind(null,t),na:D5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await oc(t)):(await t.fa.stop(),t.Ta.length>0&&($(Ko,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lc(t,e){if(dt("AsyncQueue",`${e}: ${t}`),zs(t))return new j(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=tu(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.ga=new Ve(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qo(e,n,Co.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class V5{constructor(){this.queries=l1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=K(n),s=i.queries;i.queries=l1(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new j(V.ABORTED,"Firestore shutting down"))}}function l1(){return new Fi(t=>UR(t),Vd)}async function Xw(t,e){const n=K(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new O5,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=lc(o,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ev(n)}async function Zw(t,e){const n=K(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function M5(t,e){const n=K(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&ev(n)}function F5(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function ev(t){t.Ca.forEach(e=>{e.next()})}var V_,c1;(c1=V_||(V_={})).Ma="default",c1.Cache="cache";class tv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==V_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.serializer=e}$s(e){return ti(this.serializer,e)}Us(e){return e.metadata.exists?vm(this.serializer,e.document,!1):Ue.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return ht(e)}}class nv{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=Xk(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=he.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new u1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ce()).add(s);n.set(o,a)}}return n}async ja(e){const n=await h5(e,new u1(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await f5(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function Xk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.key=e}}class eP{constructor(e){this.key=e}}class tP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=$R(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new a1,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),y=Md(this.query,h)?h:null,I=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;m&&y?m.data.isEqual(y.data)?I!==S&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(l||u)&&(a=!0)),N&&(y?(o=o.add(y),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(y,I){const S=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:N})}};return S(y)-S(I)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Qo(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new eP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Zk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hs="SyncEngine";class j5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class U5{constructor(e){this.key=e,this.hu=!1}}class B5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fi(a=>UR(a),Vd),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(W.comparator),this.Au=new Map,this.Ru=new Uw,this.Vu={},this.mu=new Map,this.fu=Wo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $5(t,e,n=!0){const r=Sm(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await nP(r,e,n,!0),i}async function z5(t,e){const n=Sm(t);await nP(n,e,!0,!1)}async function nP(t,e,n,r){const i=await $l(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await rv(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Am(t.remoteStore,i),a}async function rv(t,e,n,r,i){t.pu=(h,m,y)=>async function(S,N,E,v){let b=N.view.ru(E);b.Cs&&(b=await kp(S.localStore,N.query,!1).then(({documents:T})=>N.view.ru(T,b)));const P=v&&v.targetChanges.get(N.targetId),U=v&&v.targetMismatches.get(N.targetId)!=null,z=N.view.applyChanges(b,S.isPrimaryClient,P,U);return M_(S,N.targetId,z.au),z.snapshot}(t,h,m,y);const s=await kp(t.localStore,e,!0),o=new tP(e,s.Qs),a=o.ru(s.documents),l=Ud.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);M_(t,n,u.au);const d=new j5(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function q5(t,e,n){const r=K(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Vd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ql(r.remoteStore,i.targetId),Gl(r,i.targetId)}).catch($s)):(Gl(r,i.targetId),await zl(r.localStore,i.targetId,!0))}async function G5(t,e){const n=K(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ql(n.remoteStore,r.targetId))}async function H5(t,e,n){const r=av(t);try{const i=await function(o,a){const l=K(o),u=Se.now(),d=a.reduce((y,I)=>y.add(I.key),ce());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=In(),S=ce();return l.Ns.getEntries(y,d).next(N=>{I=N,I.forEach((E,v)=>{v.isValidDocument()||(S=S.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(N=>{h=N;const E=[];for(const v of a){const b=yj(v,h.get(v.key).overlayedDocument);b!=null&&E.push(new ji(v.key,b,kR(b.value.mapValue),Ye.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,E,a)}).next(N=>{m=N;const E=N.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(y,N.batchId,E)})}).then(()=>({batchId:m.batchId,changes:qR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ve(ae)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Ui(r,i.changes),await oc(r.remoteStore)}catch(i){const s=lc(i,"Failed to persist write");n.reject(s)}}async function rP(t,e){const n=K(t);try{const r=await u5(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?te(o.hu,14607):i.removedDocuments.size>0&&(te(o.hu,42227),o.hu=!1))}),await Ui(n,r,e)}catch(r){await $s(r)}}function d1(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(a)&&(u=!0)}),u&&ev(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W5(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ve(W.comparator);o=o.insert(s,Ue.newNoDocument(s,re.min()));const a=ce().add(s),l=new jd(re.min(),new Map,new Ve(ae),o,a);await rP(r,l),r.du=r.du.remove(s),r.Au.delete(e),ov(r)}else await zl(r.localStore,e,!1).then(()=>Gl(r,e,n)).catch($s)}async function K5(t,e){const n=K(t),r=e.batch.batchId;try{const i=await c5(n.localStore,e);sv(n,r,null),iv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ui(n,i)}catch(i){await $s(i)}}async function Q5(t,e,n){const r=K(t);try{const i=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(te(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);sv(r,e,n),iv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ui(r,i)}catch(i){await $s(i)}}async function Y5(t,e){const n=K(t);Gs(n.remoteStore)||$(Hs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===ks)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=lc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function iv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function sv(t,e,n){const r=K(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Gl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||iP(t,r)})}function iP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ql(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ov(t))}function M_(t,e,n){for(const r of n)r instanceof Zk?(t.Ru.addReference(r.key,e),J5(t,r)):r instanceof eP?($(Hs,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||iP(t,r.key)):X(19791,{wu:r})}function J5(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(Hs,"New document in limbo: "+n),t.Eu.add(r),ov(t))}function ov(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(he.fromString(e)),r=t.fu.next();t.Au.set(r,new U5(n)),t.du=t.du.insert(n,r),Am(t.remoteStore,new wi(Zt(nc(n.path)),r,"TargetPurposeLimboResolution",wn.ce))}}async function Ui(t,e,n){const r=K(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=qw.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=K(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(u,m=>O.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>O.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!zs(h))throw h;$(Gw,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const y=d.Ms.get(m),I=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(I);d.Ms=d.Ms.insert(m,S)}}}(r.localStore,s))}async function X5(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){$(Hs,"User change. New user:",e.toKey());const r=await Lk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new j(V.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ui(n,r.Ls)}}function Z5(t,e){const n=K(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function e6(t,e){const n=K(t),r=await kp(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&M_(n,e.targetId,i.au),i}async function t6(t,e){const n=K(t);return Fk(n.localStore,e).then(r=>Ui(n,r))}async function n6(t,e,n,r){const i=K(t),s=await function(a,l){const u=K(a),d=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(m=>m?u.localDocuments.getDocuments(h,m):O.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await oc(i.remoteStore):n==="acknowledged"||n==="rejected"?(sv(i,e,r||null),iv(i,e),function(a,l){K(K(a).mutationQueue).ir(l)}(i.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await Ui(i,s)):$(Hs,"Cannot apply mutation batch with id: "+e)}async function r6(t,e){const n=K(t);if(Sm(n),av(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await h1(n,r.toArray());n.gu=!0,await O_(n.remoteStore,!0);for(const s of i)Am(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Gl(n,o),zl(n.localStore,o,!0))),ql(n.remoteStore,o)}),await i,await h1(n,r),function(o){const a=K(o);a.Au.forEach((l,u)=>{ql(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Ve(W.comparator)}(n),n.gu=!1,await O_(n.remoteStore,!1)}}async function h1(t,e,n){const r=K(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await $l(r.localStore,Zt(l[0]));for(const u of l){const d=r.Tu.get(u),h=await e6(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await Mk(r.localStore,o);a=await $l(r.localStore,u),await rv(r,sP(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function sP(t){return MR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function i6(t){return function(n){return K(K(n).persistence).Ts()}(K(t).localStore)}async function s6(t,e,n,r){const i=K(t);if(i.gu)return void $(Hs,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Fk(i.localStore,BR(s[0])),a=jd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);await Ui(i,o,a);break}case"rejected":await zl(i.localStore,e,!0),Gl(i,e,r);break;default:X(64155,n)}}async function o6(t,e,n){const r=Sm(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(Hs,"Adding an already active target "+i);continue}const s=await Mk(r.localStore,i),o=await $l(r.localStore,s);await rv(r,sP(s),o.targetId,!1,o.resumeToken),Am(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await zl(r.localStore,i,!1).then(()=>{ql(r.remoteStore,i),Gl(r,i)}).catch($s)}}function Sm(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W5.bind(null,e),e.Pu.H_=M5.bind(null,e.eventManager),e.Pu.yu=F5.bind(null,e.eventManager),e}function av(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q5.bind(null,e),e}function a6(t,e,n){const r=K(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,I){const S=K(y),N=ht(I.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",E=>S.Ii.getBundleMetadata(E,I.id)).then(E=>!!E&&E.createTime.compareTo(N)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Xk(l));const u=new nv(l,o.serializer);let d=await o.bu();for(;d;){const m=await u.Ga(d);m&&a._updateProgress(m),d=await o.bu()}const h=await u.ja(s.localStore);return await Ui(s,h.Ha,void 0),await function(y,I){const S=K(y);return S.persistence.runTransaction("Save bundle","readwrite",N=>S.Ii.saveBundleMetadata(N,I))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return hr(Hs,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ia(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Dk(this.persistence,new Nk,e.initialUser,this.serializer)}Cu(e){return new Bw(xm.mi,this.serializer)}Du(e){return new zk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hl.provider={build:()=>new Hl};class lv extends Hl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){te(this.persistence.referenceDelegate instanceof Rp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ak(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new Bw(r=>Rp.mi(r,n),this.serializer)}}class cv extends Hl{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await av(this.xu.syncEngine),await oc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Dk(this.persistence,new Nk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Ak(r,e.asyncQueue,n)}Mu(e,n){const r=new E3(n,this.persistence);return new I3(e.asyncQueue,r)}Cu(e){const n=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new $w(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qk(),Rf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new zk}}class oP extends cv{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Jg&&(this.sharedClientState.syncEngine={Co:n6.bind(null,n),vo:s6.bind(null,n),Fo:o6.bind(null,n),Ts:i6.bind(null,n),Do:t6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await r6(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=qk();if(!Jg.v(n))throw new j(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ms{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>d1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X5.bind(null,this.syncEngine),await O_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new V5}()}createDatastore(e){const n=ia(e.databaseInfo.databaseId),r=function(s){return new _5(s)}(e.databaseInfo);return function(s,o,a,l){return new E5(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new b5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>d1(this.syncEngine,n,0),function(){return i1.v()?new i1:new p5}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new B5(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=K(i);$(Ko,"RemoteStore shutting down."),s.Ea.add(5),await sc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ms.provider={build:()=>new Ms};function f1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Pt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new Jk(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new Jk(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new j(V.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=K(i),a={documents:s.map(h=>cd(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,he.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const m=Aj(o.serializer,h);u.set(m.key.toString(),m)});const d=[];return s.forEach(h=>{const m=u.get(h.toString());te(!!m,55234,{key:h}),d.push(m)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=W.fromPath(r);this.mutations.push(new Nw(i,this.precondition(i)))}),await async function(r,i){const s=K(r),o={writes:i.map(a=>ud(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,he.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?Ye.exists(!1):Ye.updateTime(n):Ye.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new j(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(n)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Ww(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new u6(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Dd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!tk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class h6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=_w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(Fs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Fs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zg(t,e){t.asyncQueue.verifyOperationInProgress(),$(Fs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Lk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function p1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uv(t);$(Fs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>o1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>o1(e.remoteStore,i)),t._onlineComponents=e}async function uv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Fs,"Using user provided OfflineComponentProvider");try{await Zg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hr("Error using user provided cache. Falling back to memory cache: "+n),await Zg(t,new Hl)}}else $(Fs,"Using default OfflineComponentProvider"),await Zg(t,new lv(void 0));return t._offlineComponents}async function km(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Fs,"Using user provided OnlineComponentProvider"),await p1(t,t._uninitializedComponentsProvider._online)):($(Fs,"Using default OnlineComponentProvider"),await p1(t,new Ms))),t._onlineComponents}function aP(t){return uv(t).then(e=>e.persistence)}function cc(t){return uv(t).then(e=>e.localStore)}function lP(t){return km(t).then(e=>e.remoteStore)}function dv(t){return km(t).then(e=>e.syncEngine)}function cP(t){return km(t).then(e=>e.datastore)}async function Wl(t){const e=await km(t),n=e.eventManager;return n.onListen=$5.bind(null,e.syncEngine),n.onUnlisten=q5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=z5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G5.bind(null,e.syncEngine),n}function f6(t){return t.asyncQueue.enqueue(async()=>{const e=await aP(t),n=await lP(t);return e.setNetworkEnabled(!0),function(i){const s=K(i);return s.Ea.delete(0),Bd(s)}(n)})}function p6(t){return t.asyncQueue.enqueue(async()=>{const e=await aP(t),n=await lP(t);return e.setNetworkEnabled(!1),async function(i){const s=K(i);s.Ea.add(0),await sc(s),s.Ra.set("Offline")}(n)})}function m6(t,e){const n=new Pt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=K(u);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=lc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await cc(t),e,n)),n.promise}function uP(t,e,n={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Rm({next:m=>{d.Nu(),o.enqueueAndForget(()=>Zw(s,h));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new j(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tv(nc(a.path),d,{includeMetadataChanges:!0,qa:!0});return Xw(s,h)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}function g6(t,e){const n=new Pt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await kp(i,s,!0),l=new tP(s,a.Qs),u=l.ru(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const l=lc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await cc(t),e,n)),n.promise}function dP(t,e,n={}){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Rm({next:m=>{d.Nu(),o.enqueueAndForget(()=>Zw(s,h)),m.fromCache&&l.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new tv(a,d,{includeMetadataChanges:!0,qa:!0});return Xw(s,h)}(await Wl(t),t.asyncQueue,e,n,r)),r.promise}function y6(t,e,n){const r=new Pt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await cP(t);r.resolve(async function(o,a,l){var S;const u=K(o),{request:d,gt:h,parent:m}=hk(u.serializer,FR(a),l);u.connection.$o||delete d.parent;const y=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,m,d,1)).filter(N=>!!N.result);te(y.length===1,64727);const I=(S=y[0].result)==null?void 0:S.aggregateFields;return Object.keys(I).reduce((N,E)=>(N[h[E]]=I[E],N),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function _6(t,e){const n=new Rm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).Ca.add(s),s.next()}(await Wl(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).Ca.delete(s)}(await Wl(t),n))}}function w6(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?rk().encode(o):o,function(d,h){return new l6(d,h)}(function(d,h){if(d instanceof Uint8Array)return f1(d,h);if(d instanceof ArrayBuffer)return f1(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ia(e));t.asyncQueue.enqueueAndForget(async()=>{a6(await dv(t),i,r)})}function v6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=K(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await cc(t),e))}function hP(t,e){return function(r,i){return new c6(r,i)}(t,e)}function I6(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=K(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(h,m,y,I,S){h=[...h],m=[...m],h.sort(y),m.sort(y);const N=h.length,E=m.length;let v=0,b=0;for(;v<E&&b<N;){const P=y(h[b],m[v]);P<0?S(h[b++]):P>0?I(m[v++]):(v++,b++)}for(;v<E;)I(m[v++]);for(;b<N;)S(h[b++])}(u,i,y3,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>O.waitFor(a)))}(await cc(t),e))}function E6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){K(r).Fs.Vs=i}(await cc(t),e))}function T6(t){return t.asyncQueue.enqueue(async()=>function(n){const r=K(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await cc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="firestore.googleapis.com",g1=!0;class y1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new j(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pP,this.ssl=g1}else this.host=e.host,this.ssl=e.ssl??g1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ik;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xk)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o3;switch(r.type){case"firstParty":return new u3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=m1.get(n);r&&($("ComponentProvider","Removing Datastore"),m1.delete(n),r.terminate())}(this),Promise.resolve()}}function b6(t,e,n,r={}){var u;t=ge(t,$d);const i=Di(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Xp(`https://${a}`),$0("Firestore",!0)),s.host!==pP&&s.host!==a&&hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!cr(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=St.MOCK_USER;else{d=hA(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new St(m)}t._authCredentials=new a3(new ZS(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ct(this.firestore,e,this._query)}}class Ce{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ra(n,Ce._jsonSchema))return new Ce(e,r||null,new W(he.fromString(n.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:yt("string",Ce._jsonSchemaVersion),referencePath:yt("string")};class ni extends Ct{constructor(e,n,r){super(e,n,nc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new W(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function zd(t,e,...n){if(t=Z(t),ww("collection","path",e),t instanceof $d){const r=he.fromString(e,...n);return sT(r),new ni(t,null,r)}{if(!(t instanceof Ce||t instanceof ni))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return sT(r),new ni(t.firestore,null,r)}}function zz(t,e){if(t=ge(t,$d),ww("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ct(t,null,function(r){return new Mi(he.emptyPath(),r)}(e))}function Ar(t,e,...n){if(t=Z(t),arguments.length===1&&(e=_w.newId()),ww("doc","path",e),t instanceof $d){const r=he.fromString(e,...n);return iT(r),new Ce(t,null,new W(r))}{if(!(t instanceof Ce||t instanceof ni))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return iT(r),new Ce(t.firestore,t instanceof ni?t.converter:null,new W(r))}}function qz(t,e){return t=Z(t),e=Z(e),(t instanceof Ce||t instanceof ni)&&(e instanceof Ce||e instanceof ni)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function mP(t,e){return t=Z(t),e=Z(e),t instanceof Ct&&e instanceof Ct&&t.firestore===e.firestore&&Vd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="AsyncQueue";class w1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ww(this,"async_queue_retry"),this._c=()=>{const r=Rf();r&&$(_1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zs(e))throw e;$(_1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,dt("INTERNAL UNHANDLED ERROR: ",v1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Jw.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:v1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function v1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class x6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=-1;class Le extends $d{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new w1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new w1(e),this._firestoreClient=void 0,await e}}}function Hz(t,e,n){n||(n=sd);const r=Cr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(cr(s,e))return i;throw new j(V.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new j(V.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xk)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Di(e.host)&&Xp(e.host),r.initialize({options:e,instanceIdentifier:n})}function A6(t,e){const n=typeof t=="object"?t:xd(),r=typeof t=="string"?t:e||sd,i=Cr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cA("firestore");s&&b6(i,...s)}return i}function tt(t){if(t._terminated)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gP(t),t._firestoreClient}function gP(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new Y3(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fP(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new h6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Wz(t,e){hr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return yP(t,Ms.provider,{build:r=>new cv(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Kz(t){hr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();yP(t,Ms.provider,{build:n=>new oP(n,e.cacheSizeBytes)})}function yP(t,e,n){if((t=ge(t,Le))._firestoreClient||t._terminated)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new j(V.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},gP(t)}function Qz(t){if(t._initialized&&!t._terminated)throw new j(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ei.v())return Promise.resolve();const i=r+Ck;await ei.delete(i)}(zw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Yz(t){return function(n){const r=new Pt;return n.asyncQueue.enqueueAndForget(async()=>Y5(await dv(n),r)),r.promise}(tt(t=ge(t,Le)))}function Jz(t){return f6(tt(t=ge(t,Le)))}function Xz(t){return p6(tt(t=ge(t,Le)))}function Zz(t){return WL(t.app,"firestore",t._databaseId.database),t._delete()}function I1(t,e){const n=tt(t=ge(t,Le)),r=new x6;return w6(n,t._databaseId,e,r),r}function S6(t,e){return v6(tt(t=ge(t,Le)),e).then(n=>n?new Ct(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class R6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(ot.fromBase64String(e))}catch(n){throw new j(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:yt("string",Fn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function e8(){return new sa(p_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(ra(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:yt("string",ri._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new kr(e.vectorValues);throw new j(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:yt("string",kr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=/^__.*__$/;class P6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new rc(e,this.data,n,this.fieldTransforms)}}class _P{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class Pm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wP(this.Ac)&&k6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class C6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ia(e)}Cc(e,n,r,i=!1){return new Pm({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aa(t){const e=t._freezeSettings(),n=ia(t._databaseId);return new C6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cm(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);_v("Data must be an object, but it was:",o,r);const a=EP(r,o);let l,u;if(s.merge)l=new vn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=hd(e,h,n);if(!o.contains(m))throw new j(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);bP(d,m)||d.push(m)}l=new vn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new P6(new jt(a),l,u)}class qd extends oa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qd}}function vP(t,e,n){return new Pm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hv extends oa{_toFieldTransform(e){return new Fd(e.path,new jl)}isEqual(e){return e instanceof hv}}class fv extends oa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=vP(this,e,!0),r=this.vc.map(s=>la(s,n)),i=new zo(r);return new Fd(e.path,i)}isEqual(e){return e instanceof fv&&cr(this.vc,e.vc)}}class pv extends oa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=vP(this,e,!0),r=this.vc.map(s=>la(s,n)),i=new qo(r);return new Fd(e.path,i)}isEqual(e){return e instanceof pv&&cr(this.vc,e.vc)}}class mv extends oa{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Ul(e.serializer,WR(e.serializer,this.Fc));return new Fd(e.path,n)}isEqual(e){return e instanceof mv&&this.Fc===e.Fc}}function gv(t,e,n,r){const i=t.Cc(1,e,n);_v("Data must be an object, but it was:",i,r);const s=[],o=jt.empty();qs(r,(l,u)=>{const d=Nm(e,l,n);u=Z(u);const h=i.yc(d);if(u instanceof qd)s.push(d);else{const m=la(u,h);m!=null&&(s.push(d),o.set(d,m))}});const a=new vn(s);return new _P(o,a,i.fieldTransforms)}function yv(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[hd(e,r,n)],l=[i];if(s.length%2!=0)throw new j(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(hd(e,s[m])),l.push(s[m+1]);const u=[],d=jt.empty();for(let m=a.length-1;m>=0;--m)if(!bP(u,a[m])){const y=a[m];let I=l[m];I=Z(I);const S=o.yc(y);if(I instanceof qd)u.push(y);else{const N=la(I,S);N!=null&&(u.push(y),d.set(y,N))}}const h=new vn(u);return new _P(d,h,o.fieldTransforms)}function IP(t,e,n,r=!1){return la(n,t.Cc(r?4:3,e))}function la(t,e){if(TP(t=Z(t)))return _v("Unsupported field value:",e,t),EP(t,e);if(t instanceof oa)return function(r,i){if(!wP(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=la(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Se.fromDate(r);return{timestampValue:Bl(i.serializer,s)}}if(r instanceof Se){const s=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bl(i.serializer,s)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:ok(i.serializer,r._byteString)};if(r instanceof Ce){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Mw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kr)return function(o,a){return{mapValue:{fields:{[Aw]:{stringValue:Sw},[Vl]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Cw(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${um(r)}`)}(t,e)}function EP(t,e){const n={};return vR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(r,i)=>{const s=la(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof ri||t instanceof Fn||t instanceof Ce||t instanceof oa||t instanceof kr)}function _v(t,e,n){if(!TP(n)||!tR(n)){const r=um(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function hd(t,e,n){if((e=Z(e))instanceof sa)return e._internalPath;if(typeof e=="string")return Nm(t,e);throw Dp("Field path arguments must be of type string or ",t,!1,void 0,n)}const N6=new RegExp("[~\\*/\\[\\]]");function Nm(t,e,n){if(e.search(N6)>=0)throw Dp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sa(...e.split("."))._internalPath}catch{throw Dp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(V.INVALID_ARGUMENT,a+t+l)}function bP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D6 extends fd{data(){return super.data()}}function Dm(t,e){return typeof e=="string"?Nm(t,e):e instanceof sa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class Gd extends wv{}function kf(t,e,...n){let r=[];e instanceof wv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof uc).length,a=s.filter(l=>l instanceof Hd).length;if(o>1||o>0&&a>0)throw new j(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hd extends Gd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hd(e,n,r)}_apply(e){const n=this._parse(e);return SP(e._query,n),new Ct(e.firestore,e.converter,x_(e._query,n))}_parse(e){const n=aa(e.firestore);return function(s,o,a,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){T1(h,d);const I=[];for(const S of h)I.push(E1(l,s,S));m={arrayValue:{values:I}}}else m=E1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||T1(h,d),m=IP(a,o,h,d==="in"||d==="not-in");return we.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pf(t,e,n){const r=e,i=Dm("where",t);return Hd._create(i,r,n)}class uc extends wv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Re.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)SP(o,l),o=x_(o,l)}(e._query,n),new Ct(e.firestore,e.converter,x_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function t8(...t){return t.forEach(e=>RP("or",e)),uc._create("or",t)}function n8(...t){return t.forEach(e=>RP("and",e)),uc._create("and",t)}class vv extends Gd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ld(s,o)}(e._query,this._field,this._direction);return new Ct(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Mi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Cf(t,e="asc"){const n=e,r=Dm("orderBy",t);return vv._create(r,n)}class Lm extends Gd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lm(e,n,r)}_apply(e){return new Ct(e.firestore,e.converter,bp(e._query,this._limit,this._limitType))}}function ey(t){return nR("limit",t),Lm._create("limit",t,"F")}function r8(t){return nR("limitToLast",t),Lm._create("limitToLast",t,"L")}class Om extends Gd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Om(e,n,r)}_apply(e){const n=AP(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,s){return new Mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function i8(...t){return Om._create("startAt",t,!0)}function L6(...t){return Om._create("startAfter",t,!1)}class Vm extends Gd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vm(e,n,r)}_apply(e){const n=AP(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,s){return new Mi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function s8(...t){return Vm._create("endBefore",t,!1)}function o8(...t){return Vm._create("endAt",t,!0)}function AP(t,e,n,r){if(n[0]=Z(n[0]),n[0]instanceof fd)return function(s,o,a,l,u){if(!l)throw new j(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of _l(s))if(h.field.isKeyField())d.push(Bo(o,l.key));else{const m=l.data.field(h.field);if(mm(m))throw new j(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=h.field.canonicalString();throw new j(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new Os(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=aa(t.firestore);return function(o,a,l,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new j(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<d.length;I++){const S=d[I];if(m[I].field.isKeyField()){if(typeof S!="string")throw new j(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!kw(o)&&S.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);const N=o.path.child(he.fromString(S));if(!W.isDocumentKey(N))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const E=new W(N);y.push(Bo(a,E))}else{const N=IP(l,u,S);y.push(N)}}return new Os(y,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function E1(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new j(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&n.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(he.fromString(n));if(!W.isDocumentKey(r))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bo(t,new W(r))}if(n instanceof Ce)return Bo(t,n._key);throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(n)}.`)}function T1(t,e){if(!Array.isArray(t)||t.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function RP(t,e){if(!(e instanceof Hd||e instanceof uc))throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class kP{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Vl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>We(o.doubleValue));return new kr(n)}convertGeoPoint(e){return new ri(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(id(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=he.fromString(e);te(gk(r),9688,{name:e});const i=new Uo(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||dt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Iv extends kP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a8(t){return new dd("sum",hd("sum",t))}function l8(t){return new dd("avg",hd("average",t))}function O6(){return new dd("count")}function c8(t,e){var n,r;return t instanceof dd&&e instanceof dd&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function u8(t,e){return mP(t.query,e.query)&&cr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="NOT SUPPORTED";class ms{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qn extends fd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function d8(t,e,n){if(ra(e,qn._jsonSchema)){if(e.bundle===PP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ia(t._databaseId),i=hP(e.bundle,r),s=i.Wu(),o=new nv(i.getMetadata(),r);for(const d of s)o.Ga(d);const a=o.documents;if(a.length!==1)throw new j(V.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=vm(r,a[0].document),u=new W(he.fromString(e.bundleName));return new qn(t,new Iv(t),u,l,new ms(!1,!1),n||null)}}qn._jsonSchemaVersion="firestore/documentSnapshot/1.0",qn._jsonSchema={type:yt("string",qn._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Nf extends qn{data(e={}){return super.data(e)}}class Gn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nf(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Nf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Nf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:V6(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_w.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h8(t,e,n){if(ra(e,Gn._jsonSchema)){if(e.bundle===PP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ia(t._databaseId),i=hP(e.bundle,r),s=i.Wu(),o=new nv(i.getMetadata(),r);for(const m of s)o.Ga(m);if(o.queries.length!==1)throw new j(V.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Em(o.queries[0].bundledQuery),l=o.documents;let u=new Co;l.map(m=>{const y=vm(r,m.document);u=u.add(y)});const d=Qo.fromInitialDocuments(a,u,ce(),!1,!1),h=new Ct(t,n||null,a);return new Gn(t,new Iv(t),h,d)}}function V6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function f8(t,e){return t instanceof qn&&e instanceof qn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Gn&&e instanceof Gn&&t._firestore===e._firestore&&mP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){t=ge(t,Ce);const e=ge(t.firestore,Le);return uP(tt(e),t._key).then(n=>Ev(e,t,n))}Gn._jsonSchemaVersion="firestore/querySnapshot/1.0",Gn._jsonSchema={type:yt("string",Gn._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Ws extends kP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}function p8(t){t=ge(t,Ce);const e=ge(t.firestore,Le),n=tt(e),r=new Ws(e);return m6(n,t._key).then(i=>new qn(e,r,t._key,i,new ms(i!==null&&i.hasLocalMutations,!0),t.converter))}function m8(t){t=ge(t,Ce);const e=ge(t.firestore,Le);return uP(tt(e),t._key,{source:"server"}).then(n=>Ev(e,t,n))}function F_(t){t=ge(t,Ct);const e=ge(t.firestore,Le),n=tt(e),r=new Ws(e);return xP(t._query),dP(n,t._query).then(i=>new Gn(e,r,t,i))}function g8(t){t=ge(t,Ct);const e=ge(t.firestore,Le),n=tt(e),r=new Ws(e);return g6(n,t._query).then(i=>new Gn(e,r,t,i))}function y8(t){t=ge(t,Ct);const e=ge(t.firestore,Le),n=tt(e),r=new Ws(e);return dP(n,t._query,{source:"server"}).then(i=>new Gn(e,r,t,i))}function Wd(t,e,n){t=ge(t,Ce);const r=ge(t.firestore,Le),i=Mm(t.converter,e,n);return Kd(r,[Cm(aa(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ye.none())])}function _8(t,e,n,...r){t=ge(t,Ce);const i=ge(t.firestore,Le),s=aa(i);let o;return o=typeof(e=Z(e))=="string"||e instanceof sa?yv(s,"updateDoc",t._key,e,n,r):gv(s,"updateDoc",t._key,e),Kd(i,[o.toMutation(t._key,Ye.exists(!0))])}function w8(t){return Kd(ge(t.firestore,Le),[new ic(t._key,Ye.none())])}function v8(t,e){const n=ge(t.firestore,Le),r=Ar(t),i=Mm(t.converter,e);return Kd(n,[Cm(aa(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function pd(t,...e){var l,u,d;t=Z(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wl(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wl(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(t instanceof Ce)o=ge(t.firestore,Le),a=nc(t._key.path),s={next:h=>{e[r]&&e[r](Ev(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=ge(t,Ct);o=ge(h.firestore,Le),a=h._query;const m=new Ws(o);s={next:y=>{e[r]&&e[r](new Gn(o,m,h,y))},error:e[r+1],complete:e[r+2]},xP(t._query)}return function(m,y,I,S){const N=new Rm(S),E=new tv(y,N,I);return m.asyncQueue.enqueueAndForget(async()=>Xw(await Wl(m),E)),()=>{N.Nu(),m.asyncQueue.enqueueAndForget(async()=>Zw(await Wl(m),E))}}(tt(o),a,i,s)}function I8(t,e,...n){const r=Z(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){u.error=`snapshotJson missing required field: ${h}`;break}const m=l[h];if(typeof m!="string"){u.error=`snapshotJson field '${h}' must be a string.`;break}if(m.length===0){u.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?u.bundle=m:h==="bundleName"?u.bundleName=m:h==="bundleSource"&&(u.bundleSource=m)}return u}(e);if(i.error)throw new j(V.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||wl(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&wl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,h,m,y){let I,S=!1;return I1(u,d.bundle).then(()=>S6(u,d.bundleName)).then(E=>{E&&!S&&(y&&E.withConverter(y),I=pd(E,h||{},m))}).catch(E=>(m.error&&m.error(E),()=>{})),()=>{S||(S=!0,I&&I())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&wl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,h,m,y){let I,S=!1;return I1(u,d.bundle).then(()=>{if(!S){const E=new Ce(u,y||null,W.fromPath(d.bundleName));I=pd(E,h||{},m)}}).catch(E=>(m.error&&m.error(E),()=>{})),()=>{S||(S=!0,I&&I())}}(r,i,s,a,n[o])}throw new j(V.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function E8(t,e){return _6(tt(t=ge(t,Le)),wl(e)?e:{next:e})}function Kd(t,e){return function(r,i){const s=new Pt;return r.asyncQueue.enqueueAndForget(async()=>H5(await dv(r),i,s)),s.promise}(tt(t),e)}function Ev(t,e,n){const r=n.docs.get(e._key),i=new Ws(t);return new qn(t,i,e._key,r,new ms(n.hasPendingWrites,n.fromCache),e.converter)}function T8(t){return M6(t,{count:O6()})}function M6(t,e){const n=ge(t.firestore,Le),r=tt(n),i=wR(e,(s,o)=>new ek(o,s.aggregateType,s._internalFieldPath));return y6(r,t._query,i).then(s=>function(a,l,u){const d=new Ws(a);return new R6(l,d,u)}(n,t,s))}class F6{constructor(e){this.kind="memory",this._onlineComponentProvider=Ms.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new lv(void 0)}}toJSON(){return{kind:this.kind}}}class j6{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=q6(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class U6{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Hl.provider}toJSON(){return{kind:this.kind}}}class B6{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new lv(e)}}toJSON(){return{kind:this.kind}}}function b8(){return new U6}function x8(t){return new B6(t==null?void 0:t.cacheSizeBytes)}function A8(t){return new F6(t)}function S8(t){return new j6(t)}class $6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ms.provider,this._offlineComponentProvider={build:n=>new cv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class z6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ms.provider,this._offlineComponentProvider={build:n=>new oP(n,e==null?void 0:e.cacheSizeBytes)}}}function q6(t){return new $6(t==null?void 0:t.forceOwnership)}function R8(){return new z6}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=aa(e)}set(e,n,r){this._verifyNotCommitted();const i=gs(e,this._firestore),s=Mm(i.converter,n,r),o=Cm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ye.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=gs(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof sa?yv(this._dataReader,"WriteBatch.update",s._key,n,r,i):gv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=gs(e,this._firestore);return this._mutations=this._mutations.concat(new ic(n._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gs(t,e){if((t=Z(t)).firestore!==e)throw new j(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=aa(e)}get(e){const n=gs(e,this._firestore),r=new Iv(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return X(24041);const s=i[0];if(s.isFoundDocument())return new fd(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new fd(this._firestore,r,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,r){const i=gs(e,this._firestore),s=Mm(i.converter,n,r),o=Cm(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=gs(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof sa?yv(this._dataReader,"Transaction.update",s._key,n,r,i):gv(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=gs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6 extends W6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=gs(e,this._firestore),r=new Ws(this._firestore);return super.get(e).then(i=>new qn(this._firestore,r,n._key,i._document,new ms(!1,!1),n.converter))}}function k8(t,e,n){t=ge(t,Le);const r={...G6,...n};return function(s){if(s.maxAttempts<1)throw new j(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Pt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await cP(s);new d6(s.asyncQueue,u,a,o,l).ju()}),l.promise}(tt(t),i=>e(new K6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return new qd("deleteField")}function C8(){return new hv("serverTimestamp")}function N8(...t){return new fv("arrayUnion",t)}function D8(...t){return new pv("arrayRemove",t)}function L8(t){return new mv("increment",t)}function O8(t){return new kr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(t){return tt(t=ge(t,Le)),new H6(t,e=>Kd(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){const n=tt(t=ge(t,Le));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return hr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(d){throw new j(V.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=x1(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const m=Nm("setIndexConfiguration",x1(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new ko(m,2)):h.order==="ASCENDING"?d.push(new ko(m,0)):h.order==="DESCENDING"&&d.push(new ko(m,1))}a.push(new Pl(Pl.UNKNOWN_ID,u,d,Cl.empty()))}return a}(e);return I6(n,r)}function x1(t,e){if(typeof t[e]!="string")throw new j(V.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function F8(t){var i;t=ge(t,Le);const e=A1.get(t);if(e)return e;if(((i=tt(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new Q6(t);return A1.set(t,r),r}function j8(t){CP(t,!0)}function U8(t){CP(t,!1)}function B8(t){T6(tt(t._firestore)).then(e=>$("deleting all persistent cache indexes succeeded")).catch(e=>hr("deleting all persistent cache indexes failed",e))}function CP(t,e){E6(tt(t._firestore),e).then(n=>$(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>hr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const A1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){var r;const e=tt(ge(t.firestore,Le)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Im(n,Zt(t._query)).ft}function z8(t,e){var s;const n=wR(e,(o,a)=>new ek(a,o.aggregateType,o._internalFieldPath)),r=tt(ge(t.firestore,Le)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:hk(i,FR(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Tv.instance.onExistenceFilterMismatch(e)}}class Tv{constructor(){this.Mc=new Map}static get instance(){return Yh||(Yh=new Tv,function(n){if(Au)throw new Error("a TestingHooksSpi instance is already set");Au=n}(Yh)),Yh}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let Yh=null;(function(e,n=!0){(function(i){tc=i})(ea),ur(new Wn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Le(new l3(r.getProvider("auth-internal")),new d3(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new j(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uo(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jt(nT,rT,e),Jt(nT,rT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="firebasestorage.googleapis.com",DP="storageBucket",Y6=2*60*1e3,J6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Jn{constructor(e,n,r=0){super(ty(e),`Firebase Storage: ${n} (${ty(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ty(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function ty(t){return"storage/"+t}function bv(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(at.UNKNOWN,t)}function X6(t){return new ct(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z6(t){return new ct(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(at.UNAUTHENTICATED,t)}function tU(){return new ct(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nU(t){return new ct(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function rU(){return new ct(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iU(){return new ct(at.CANCELED,"User canceled the upload/download.")}function sU(t){return new ct(at.INVALID_URL,"Invalid URL '"+t+"'.")}function oU(t){return new ct(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aU(){return new ct(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DP+"' property when initializing the app?")}function lU(){return new ct(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cU(){return new ct(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uU(t){return new ct(at.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function j_(t){return new ct(at.INVALID_ARGUMENT,t)}function LP(){return new ct(at.APP_DELETED,"The Firebase app was deleted.")}function dU(t){return new ct(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ru(t,e){return new ct(at.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hc(t){throw new ct(at.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(r.path==="")return r;throw oU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},S=n===NP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${N}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:y,indices:I,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<b.length;P++){const U=b[P],z=U.regex.exec(e);if(z){const T=z[U.indices.bucket];let w=z[U.indices.path];w||(w=""),r=new Un(T,w),U.postModify(r);break}}if(r==null)throw sU(e);return r}}class hU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...N){u||(u=!0,e.apply(null,N))}function h(N){i=setTimeout(()=>{i=null,t(y,l())},N)}function m(){s&&clearTimeout(s)}function y(N,...E){if(u){m();return}if(N){m(),d.call(null,N,...E);return}if(l()||o){m(),d.call(null,N,...E);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let I=!1;function S(N){I||(I=!0,m(),!u&&(i!==null?(N||(a=2),clearTimeout(i),h(0)):N||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function pU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t){return t!==void 0}function gU(t){return typeof t=="object"&&!Array.isArray(t)}function xv(t){return typeof t=="string"||t instanceof String}function S1(t){return Av()&&t instanceof Blob}function Av(){return typeof Blob<"u"}function R1(t,e,n,r){if(r<e)throw j_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw j_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function OP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var No;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(No||(No={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n,r,i,s,o,a,l,u,d,h,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,S)=>{this.resolve_=I,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Jh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===No.NO_ERROR,l=s.getStatus();if(!a||yU(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===No.ABORT;r(!1,new Jh(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Jh(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());mU(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=bv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?LP():iU();o(l)}else{const l=rU();o(l)}};this.canceled_?n(!1,new Jh(!1,null,!0)):this.backoffId_=fU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function wU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function vU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function EU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function TU(t,e,n,r,i,s,o=!0,a=!1){const l=OP(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return IU(d,e),wU(d,n),vU(d,s),EU(d,r),new _U(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xU(...t){const e=bU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Av())return new Blob(t);throw new ct(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function AU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t){if(typeof atob>"u")throw uU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ny{constructor(e,n){this.data=e,this.contentType=n||null}}function RU(t,e){switch(t){case Jr.RAW:return new ny(VP(e));case Jr.BASE64:case Jr.BASE64URL:return new ny(MP(t,e));case Jr.DATA_URL:return new ny(PU(e),CU(e))}throw bv()}function VP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function kU(t){let e;try{e=decodeURIComponent(t)}catch{throw Ru(Jr.DATA_URL,"Malformed data URL.")}return VP(e)}function MP(t,e){switch(t){case Jr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ru(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ru(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=SU(e)}catch(i){throw i.message.includes("polyfill")?i:Ru(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class FP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ru(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=NU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function PU(t){const e=new FP(t);return e.base64?MP(Jr.BASE64,e.rest):kU(e.rest)}function CU(t){return new FP(t).contentType}function NU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){let r=0,i="";S1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(S1(this.data_)){const r=this.data_,i=AU(r,e,n);return i===null?null:new ds(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ds(r,!0)}}static getBlob(...e){if(Av()){const n=e.map(r=>r instanceof ds?r.data_:r);return new ds(xU.apply(null,n))}else{const n=e.map(o=>xv(o)?RU(Jr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ds(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){let e;try{e=JSON.parse(t)}catch{return null}return gU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function UP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e){return e}class nn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||OU}}let Xh=null;function VU(t){return!xv(t)||t.length<2?t:UP(t)}function BP(){if(Xh)return Xh;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(s,o){return VU(o)}const n=new nn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new nn("size");return i.xform=r,t.push(i),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),Xh=t,Xh}function MU(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Un(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function FU(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return MU(r,t),r}function $P(t,e,n){const r=jP(e);return r===null?null:FU(t,r,n)}function jU(t,e,n,r){const i=jP(e);if(i===null||!xv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),y=Sv(m,n,r),I=OP({alt:"media",token:u});return y+I})[0]}function UU(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class zP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){if(!t)throw bv()}function BU(t,e){function n(r,i){const s=$P(t,i,e);return qP(s!==null),s}return n}function $U(t,e){function n(r,i){const s=$P(t,i,e);return qP(s!==null),jU(s,i,t.host,t._protocol)}return n}function GP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=tU():i=eU():n.getStatus()===402?i=Z6(t.bucket):n.getStatus()===403?i=nU(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zU(t){const e=GP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=X6(t.path)),s.serverResponse=i.serverResponse,s}return n}function qU(t,e,n){const r=e.fullServerUrl(),i=Sv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new zP(i,s,$U(t,n),o);return a.errorHandler=zU(e),a}function GU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function HU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=GU(null,e)),r}function WU(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let P=0;P<2;P++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=HU(e,r,i),d=UU(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=ds.getBlob(h,r,m);if(y===null)throw lU();const I={name:u.fullPath},S=Sv(s,t.host,t._protocol),N="POST",E=t.maxUploadRetryTime,v=new zP(S,N,BU(t,n),E);return v.urlParams=I,v.headers=o,v.body=y.uploadData(),v.errorHandler=GP(e),v}class KU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=No.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=No.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=No.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Hc("cannot .send() more than once");if(Di(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class QU extends KU{initXhr(){this.xhr_.responseType="text"}}function HP(){return new QU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yo(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UP(this._location.path)}get storage(){return this._service}get parent(){const e=DU(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new Yo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw dU(e)}}function YU(t,e,n){t._throwIfRoot("uploadBytes");const r=WU(t.storage,t._location,BP(),new ds(e,!0),n);return t.storage.makeRequestWithTokens(r,HP).then(i=>({metadata:i,ref:t}))}function JU(t){t._throwIfRoot("getDownloadURL");const e=qU(t.storage,t._location,BP());return t.storage.makeRequestWithTokens(e,HP).then(n=>{if(n===null)throw cU();return n})}function XU(t,e){const n=LU(t._location.path,e),r=new Un(t._location.bucket,n);return new Yo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){return/^[A-Za-z]+:\/\//.test(t)}function e9(t,e){return new Yo(t,e)}function WP(t,e){if(t instanceof Rv){const n=t;if(n._bucket==null)throw aU();const r=new Yo(n,n._bucket);return e!=null?WP(r,e):r}else return e!==void 0?XU(t,e):t}function t9(t,e){if(e&&ZU(e)){if(t instanceof Rv)return e9(t,e);throw j_("To use ref(service, url), the first argument must be a Storage instance.")}else return WP(t,e)}function k1(t,e){const n=e==null?void 0:e[DP];return n==null?null:Un.makeFromBucketSpec(n,t)}function n9(t,e,n,r={}){t.host=`${e}:${n}`;const i=Di(e);i&&(Xp(`https://${t.host}/b`),$0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:hA(s,t.app.options.projectId))}class Rv{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=NP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Y6,this._maxUploadRetryTime=J6,this._requests=new Set,i!=null?this._bucket=Un.makeFromBucketSpec(i,this._host):this._bucket=k1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=k1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new hU(LP());{const o=TU(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const P1="@firebase/storage",C1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="storage";function md(t,e,n){return t=Z(t),YU(t,e,n)}function gd(t){return t=Z(t),JU(t)}function yd(t,e){return t=Z(t),t9(t,e)}function r9(t=xd(),e){t=Z(t);const r=Cr(t,KP).getImmediate({identifier:e}),i=cA("storage");return i&&i9(r,...i),r}function i9(t,e,n,r={}){n9(t,e,n,r)}function s9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Rv(n,r,i,e,ea)}function o9(){ur(new Wn(KP,s9,"PUBLIC").setMultipleInstances(!0)),Jt(P1,C1,""),Jt(P1,C1,"esm2020")}o9();var QP="5.0.1";function Lp(t,e){return new Promise(n=>setTimeout(n,t,e))}function a9(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function l9(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):Lp(Math.min(t,e))}function YP(t){return!!t&&typeof t.then=="function"}function N1(t,e){try{const n=t();YP(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function D1(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await a9())}return r}function _d(t){return t.then(void 0,()=>{}),t}function c9(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function u9(t,e){return!c9(t,e)}function kv(t){return parseInt(t)}function Ir(t){return parseFloat(t)}function pi(t,e){return typeof t=="number"&&isNaN(t)?e:t}function ln(t){return t.reduce((e,n)=>e+(n?1:0),0)}function JP(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function d9(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,d)=>{o[u]=o[u]||[],o[u].push(d)};for(;;){const u=a.exec(i[2]);if(!u)break;const d=u[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":{const h=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(h)l(h[1],(n=(e=h[4])!==null&&e!==void 0?e:h[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function h9(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function Xi(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let d=0,h=0,m=0,y=0;y+=s+u,m+=y>>>16,y&=65535,m+=i+l,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=n+o,d&=65535,t[0]=d<<16|h,t[1]=m<<16|y}function nr(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let d=0,h=0,m=0,y=0;y+=s*u,m+=y>>>16,y&=65535,m+=i*u,h+=m>>>16,m&=65535,m+=s*l,h+=m>>>16,m&=65535,h+=r*u,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,h+=s*a,d+=h>>>16,h&=65535,d+=n*u+r*l+i*a+s*o,d&=65535,t[0]=d<<16|h,t[1]=m<<16|y}function Ba(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function Ln(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function He(t,e){t[0]^=e[0],t[1]^=e[1]}const f9=[4283543511,3981806797],p9=[3301882366,444984403];function L1(t){const e=[0,t[0]>>>1];He(t,e),nr(t,f9),e[1]=t[0]>>>1,He(t,e),nr(t,p9),e[1]=t[0]>>>1,He(t,e)}const Zh=[2277735313,289559509],ef=[1291169091,658871167],O1=[0,5],m9=[0,1390208809],g9=[0,944331445];function y9(t,e){const n=h9(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let d;for(d=0;d<s;d=d+16)l[0]=n[d+4]|n[d+5]<<8|n[d+6]<<16|n[d+7]<<24,l[1]=n[d]|n[d+1]<<8|n[d+2]<<16|n[d+3]<<24,u[0]=n[d+12]|n[d+13]<<8|n[d+14]<<16|n[d+15]<<24,u[1]=n[d+8]|n[d+9]<<8|n[d+10]<<16|n[d+11]<<24,nr(l,Zh),Ba(l,31),nr(l,ef),He(o,l),Ba(o,27),Xi(o,a),nr(o,O1),Xi(o,m9),nr(u,ef),Ba(u,33),nr(u,Zh),He(a,u),Ba(a,31),Xi(a,o),nr(a,O1),Xi(a,g9);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const h=[0,0];switch(i){case 15:h[1]=n[d+14],Ln(h,48),He(u,h);case 14:h[1]=n[d+13],Ln(h,40),He(u,h);case 13:h[1]=n[d+12],Ln(h,32),He(u,h);case 12:h[1]=n[d+11],Ln(h,24),He(u,h);case 11:h[1]=n[d+10],Ln(h,16),He(u,h);case 10:h[1]=n[d+9],Ln(h,8),He(u,h);case 9:h[1]=n[d+8],He(u,h),nr(u,ef),Ba(u,33),nr(u,Zh),He(a,u);case 8:h[1]=n[d+7],Ln(h,56),He(l,h);case 7:h[1]=n[d+6],Ln(h,48),He(l,h);case 6:h[1]=n[d+5],Ln(h,40),He(l,h);case 5:h[1]=n[d+4],Ln(h,32),He(l,h);case 4:h[1]=n[d+3],Ln(h,24),He(l,h);case 3:h[1]=n[d+2],Ln(h,16),He(l,h);case 2:h[1]=n[d+1],Ln(h,8),He(l,h);case 1:h[1]=n[d],He(l,h),nr(l,Zh),Ba(l,31),nr(l,ef),He(o,l)}return He(o,r),He(a,r),Xi(o,a),Xi(a,o),L1(o),L1(a),Xi(o,a),Xi(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function _9(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function w9(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function v9(t){return typeof t!="function"}function I9(t,e){const n=_d(new Promise(r=>{const i=Date.now();N1(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(v9(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();N1(a,(...d)=>{const h=o+Date.now()-u;if(!d[0])return l({error:d[1],duration:h});l({value:d[1],duration:h})})}))})}));return function(){return n.then(i=>i())}}function E9(t,e,n,r){const i=Object.keys(t).filter(o=>u9(n,o)),s=_d(D1(i,o=>I9(t[o],e),r));return async function(){const a=await s,l=await D1(a,h=>_d(h()),r),u=await Promise.all(l),d={};for(let h=0;h<i.length;++h)d[i[h]]=u[h];return d}}function XP(){const t=window,e=navigator;return ln(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function T9(){const t=window,e=navigator;return ln(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!XP()}function Qd(){const t=window,e=navigator;return ln(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function Nr(){const t=window,e=navigator;return ln(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function Pv(){const t=window,{HTMLElement:e,Document:n}=t;return ln(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function Yd(){const t=window;return w9(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function ZP(){var t,e;const n=window;return ln(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function b9(){const t=window;return ln([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function x9(){const t=window,{URLPattern:e}=t;return ln(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function A9(){const t=window;return ln(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function Jd(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return ln([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function S9(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return ln(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function R9(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function k9(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function Cv(){const t=Qd(),e=ZP(),n=window,r=navigator,i="connection";return t?ln([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?ln(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function P9(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return ln(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function C9(){return L9()?-4:N9()}function N9(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(D9())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=O9(i),u=_d(a.then(d=>V9(d.getChannelData(0).subarray(n)),d=>{if(d.name==="timeout"||d.name==="suspended")return-3;throw d}));return()=>(l(),u)}function D9(){return Nr()&&!Pv()&&!A9()}function L9(){return Nr()&&Jd()&&Yd()||Qd()&&P9()&&x9()}function O9(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,d=0,h=0;t.oncomplete=I=>a(I.renderedBuffer);const m=()=>{setTimeout(()=>l(V1("timeout")),Math.min(500,h+5e3-Date.now()))},y=()=>{try{const I=t.startRendering();switch(YP(I)&&_d(I),t.state){case"running":h=Date.now(),u&&m();break;case"suspended":document.hidden||d++,u&&d>=3?l(V1("suspended")):setTimeout(y,500);break}}catch(I){l(I)}};y(),s=()=>{u||(u=!0,h>0&&m())}}),s]}function V9(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function V1(t){const e=new Error(t);return e.name=t,e}async function eC(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await Lp(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let d=!1;const h=()=>{d=!0,l()},m=S=>{d=!0,u(S)};a.onload=h,a.onerror=m;const{style:y}=a;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const I=()=>{var S,N;d||(((N=(S=a.contentWindow)===null||S===void 0?void 0:S.document)===null||N===void 0?void 0:N.readyState)==="complete"?h():setTimeout(I,10))};I()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await Lp(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function M9(t){const[e,n]=d9(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?F9(r.style,s):r.setAttribute(i,s)}return r}function F9(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function j9(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const U9="mmMwWLliI0O&1",B9="48px",$a=["monospace","sans-serif","serif"],M1=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function $9(){return eC(async(t,{document:e})=>{const n=e.body;n.style.fontSize=B9;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=y=>{const I=e.createElement("span"),{style:S}=I;return S.position="absolute",S.top="0",S.left="0",S.fontFamily=y,I.textContent=U9,r.appendChild(I),I},a=(y,I)=>o(`'${y}',${I}`),l=()=>$a.map(o),u=()=>{const y={};for(const I of M1)y[I]=$a.map(S=>a(I,S));return y},d=y=>$a.some((I,S)=>y[S].offsetWidth!==i[I]||y[S].offsetHeight!==s[I]),h=l(),m=u();n.appendChild(r);for(let y=0;y<$a.length;y++)i[$a[y]]=h[y].offsetWidth,s[$a[y]]=h[y].offsetHeight;return M1.filter(y=>d(m[y]))})}function z9(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function q9(){return G9(X9())}function G9(t){let e=!1,n,r;const[i,s]=H9();return W9(i,s)?(e=K9(s),t?n=r="skipped":[n,r]=Q9(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function H9(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function W9(t,e){return!!(e&&t.toDataURL)}function K9(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function Q9(t,e){Y9(t,e);const n=ry(t),r=ry(t);return n!==r?["unstable","unstable"]:(J9(t,e),[ry(t),n])}function Y9(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function J9(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function ry(t){return t.toDataURL()}function X9(){return Nr()&&Jd()&&Yd()}function Z9(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=kv(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function eB(){return navigator.oscpu}function tB(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))Qd()&&b9()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function nB(){return window.screen.colorDepth}function rB(){return pi(Ir(navigator.deviceMemory),void 0)}function iB(){if(!(Nr()&&Jd()&&Yd()))return sB()}function sB(){const t=screen,e=r=>pi(kv(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const oB=2500,aB=10;let Df,iy;function lB(){if(iy!==void 0)return;const t=()=>{const e=U_();B_(e)?iy=setTimeout(t,oB):(Df=e,iy=void 0)};t()}function cB(){return lB(),async()=>{let t=U_();if(B_(t)){if(Df)return[...Df];R9()&&(await k9(),t=U_())}return B_(t)||(Df=t),t}}function uB(){if(Nr()&&Jd()&&Yd())return()=>Promise.resolve(void 0);const t=cB();return async()=>{const e=await t(),n=r=>r===null?null:JP(r,aB);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function U_(){const t=screen;return[pi(Ir(t.availTop),null),pi(Ir(t.width)-Ir(t.availWidth)-pi(Ir(t.availLeft),0),null),pi(Ir(t.height)-Ir(t.availHeight)-pi(Ir(t.availTop),0),null),pi(Ir(t.availLeft),null)]}function B_(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function dB(){return pi(kv(navigator.hardwareConcurrency),void 0)}function hB(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-fB();return`UTC${n>=0?"+":""}${n}`}function fB(){const t=new Date().getFullYear();return Math.max(Ir(new Date(t,0,1).getTimezoneOffset()),Ir(new Date(t,6,1).getTimezoneOffset()))}function pB(){try{return!!window.sessionStorage}catch{return!0}}function mB(){try{return!!window.localStorage}catch{return!0}}function gB(){if(!(XP()||T9()))try{return!!window.indexedDB}catch{return!0}}function yB(){return!!window.openDatabase}function _B(){return navigator.cpuClass}function wB(){const{platform:t}=navigator;return t==="MacIntel"&&Nr()&&!Pv()?S9()?"iPad":"iPhone":t}function vB(){return navigator.vendor||""}function IB(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function EB(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function TB(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function bB({debug:t}={}){if(!xB())return;const e=TB(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await AB(r);t&&SB(e,i);const s=n.filter(o=>{const a=e[o];return ln(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function xB(){return Nr()||Cv()}async function AB(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};F1(r);for(let o=0;o<t.length;++o){const a=M9(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");F1(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await Lp(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function F1(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function SB(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function RB(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function kB(){if(j1("inverted"))return!0;if(j1("none"))return!1}function j1(t){return matchMedia(`(inverted-colors: ${t})`).matches}function PB(){if(U1("active"))return!0;if(U1("none"))return!1}function U1(t){return matchMedia(`(forced-colors: ${t})`).matches}const CB=100;function NB(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=CB;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function DB(){if(za("no-preference"))return 0;if(za("high")||za("more"))return 1;if(za("low")||za("less"))return-1;if(za("forced"))return 10}function za(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function LB(){if(B1("reduce"))return!0;if(B1("no-preference"))return!1}function B1(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function OB(){if($1("reduce"))return!0;if($1("no-preference"))return!1}function $1(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function VB(){if(z1("high"))return!0;if(z1("standard"))return!1}function z1(t){return matchMedia(`(dynamic-range: ${t})`).matches}const Ae=Math,rn=()=>0;function MB(){const t=Ae.acos||rn,e=Ae.acosh||rn,n=Ae.asin||rn,r=Ae.asinh||rn,i=Ae.atanh||rn,s=Ae.atan||rn,o=Ae.sin||rn,a=Ae.sinh||rn,l=Ae.cos||rn,u=Ae.cosh||rn,d=Ae.tan||rn,h=Ae.tanh||rn,m=Ae.exp||rn,y=Ae.expm1||rn,I=Ae.log1p||rn,S=w=>Ae.pow(Ae.PI,w),N=w=>Ae.log(w+Ae.sqrt(w*w-1)),E=w=>Ae.log(w+Ae.sqrt(w*w+1)),v=w=>Ae.log((1+w)/(1-w))/2,b=w=>Ae.exp(w)-1/Ae.exp(w)/2,P=w=>(Ae.exp(w)+1/Ae.exp(w))/2,U=w=>Ae.exp(w)-1,z=w=>(Ae.exp(2*w)-1)/(Ae.exp(2*w)+1),T=w=>Ae.log(1+w);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:N(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:E(1),atanh:i(.5),atanhPf:v(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:b(1),cos:l(10.000000000123),cosh:u(1),coshPf:P(1),tan:d(-1e300),tanh:h(1),tanhPf:z(1),exp:m(1),expm1:y(1),expm1Pf:U(1),log1p:I(10),log1pPf:T(10),powPI:S(-100)}}const FB="mmMwWLliI0fiflO&1",sy={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function jB(){return UB((t,e)=>{const n={},r={};for(const i of Object.keys(sy)){const[s={},o=FB]=sy[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(sy))r[i]=n[i].getBoundingClientRect().width;return r})}function UB(t,e=4e3){return eC((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",Qd()?s.style.zoom=`${1/r.devicePixelRatio}`:Nr()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function BB(){return navigator.pdfViewerEnabled}function $B(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function zB(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(qB())return-3;try{return t.canMakePayments()?1:0}catch(e){return GB(e)}}const qB=j9;function GB(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function HB(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const tC=-1,nC=-2,WB=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),KB=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),QB=["FRAGMENT_SHADER","VERTEX_SHADER"],YB=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],rC="WEBGL_debug_renderer_info",JB="WEBGL_polygon_mode";function XB({cache:t}){var e,n,r,i,s,o;const a=iC(t);if(!a)return tC;if(!oC(a))return nC;const l=sC()?null:a.getExtension(rC);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function ZB({cache:t}){const e=iC(t);if(!e)return tC;if(!oC(e))return nC;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const d of Object.keys(r))s.push(`${d}=${r[d]}`);const u=q1(e);for(const d of u){const h=e[d];o.push(`${d}=${h}${WB.has(h)?`=${e.getParameter(h)}`:""}`)}if(n)for(const d of n){if(d===rC&&sC()||d===JB&&n$())continue;const h=e.getExtension(d);if(!h){i.push(d);continue}for(const m of q1(h)){const y=h[m];a.push(`${m}=${y}${KB.has(y)?`=${e.getParameter(y)}`:""}`)}}for(const d of QB)for(const h of YB){const m=e$(e,d,h);l.push(`${d}.${h}=${m.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function iC(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function e$(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function q1(t){return Object.keys(t.__proto__).filter(t$)}function t$(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function sC(){return ZP()}function n$(){return Qd()||Nr()}function oC(t){return typeof t.getParameter=="function"}function r$(){if(!(Cv()||Nr()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function i$(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const s$={fonts:$9,domBlockers:bB,fontPreferences:jB,audio:C9,screenFrame:uB,canvas:q9,osCpu:eB,languages:tB,colorDepth:nB,deviceMemory:rB,screenResolution:iB,hardwareConcurrency:dB,timezone:hB,sessionStorage:pB,localStorage:mB,indexedDB:gB,openDatabase:yB,cpuClass:_B,platform:wB,plugins:z9,touchSupport:Z9,vendor:vB,vendorFlavors:IB,cookiesEnabled:EB,colorGamut:RB,invertedColors:kB,forcedColors:PB,monochrome:NB,contrast:DB,reducedMotion:LB,reducedTransparency:OB,hdr:VB,math:MB,pdfViewerEnabled:BB,architecture:$B,applePay:zB,privateClickMeasurement:HB,audioBaseLatency:r$,dateTimeLocale:i$,webGlBasics:XB,webGlExtensions:ZB};function o$(t){return E9(s$,t,[])}const a$="$ if upgrade to Pro: https://fpjs.dev/pro";function l$(t){const e=c$(t),n=u$(e);return{score:e,comment:a$.replace(/\$/g,`${n}`)}}function c$(t){if(Cv())return .4;if(Nr())return Pv()&&!(Jd()&&Yd())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function u$(t){return JP(.99+.01*t,1e-4)}function d$(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function aC(t){return JSON.stringify(t,(e,n)=>n instanceof Error?_9(n):n,2)}function lC(t){return y9(d$(t))}function h$(t){let e;const n=l$(t);return{get visitorId(){return e===void 0&&(e=lC(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:QP}}function f$(t=50){return l9(t,t*2)}function p$(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=h$(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${aC(s)}
\`\`\``),o}}}function m$(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${QP}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function g$(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&m$();const{delayFallback:n,debug:r}=t;await f$(n);const i=o$({cache:{},debug:r});return p$(i,r)}var y$={load:g$,hashComponents:lC,componentsToDebugString:aC};const _$={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},dc=IA(_$),cC=TV(dc),ns=i3(dc),Bn=A6(dc),Kl=r9(dc),w$=sM(dc,{backend:new Ad}),v$=oM(w$,{model:"gemini-2.5-flash-image-preview",generationConfig:{responseModalities:[AE.TEXT,AE.IMAGE]}});async function uC(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function I$(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function dC(){try{return(await w4(ns)).user}catch(t){throw console.error("Error signing in:",t),t}}function hC(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let oy=null,Mn=null;async function Nv(){return Mn||(oy||(oy=y$.load().then(t=>t.get()).then(t=>(Mn=t.visitorId,localStorage.setItem("moomhe_fingerprint",Mn),console.log("Browser fingerprint generated:",Mn),Mn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),Mn=e,e})),oy)}function E$(){if(Mn)return Mn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Mn=t,t):null}async function $_(){if(Mn)return Mn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Mn=t,t):await Nv()}Nv();async function fo(t){const e=hC(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:T$(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await Wd(Ar(Bn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function T$(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function ca(t,e=1920,n=1080,r=.8){if(t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const s=await(await fetch(t)).blob(),o=(await di(()=>import("./heic2any-d100f6ba.js").then(d=>d.h),[])).default,a=await o({blob:s,toType:"image/jpeg",quality:r}),l=Array.isArray(a)?a[0]:a,u=await new Promise(d=>{const h=new FileReader;h.onload=()=>d(h.result),h.readAsDataURL(l)});return console.log("HEIC converted to JPEG successfully"),await ca(u,e,n,r)}catch(i){throw console.error("Error converting HEIC image:",i),new Error("Failed to convert HEIC image to JPEG")}return new Promise((i,s)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{try{const a=document.createElement("canvas"),l=a.getContext("2d");let{width:u,height:d}=o;if(u<=e&&d<=n)a.width=u,a.height=d;else{const h=e/u,m=n/d,y=Math.min(h,m);u=Math.floor(u*y),d=Math.floor(d*y),a.width=u,a.height=d}l.drawImage(o,0,0,u,d),a.toBlob(h=>{h?(console.log(`Image compressed: Original ${o.width}x${o.height} -> ${u}x${d}, Size: ${(h.size/1024/1024).toFixed(2)}MB`),i(h)):s(new Error("Failed to create compressed image blob"))},"image/jpeg",r)}catch(a){console.error("Error compressing image:",a),s(a)}},o.onerror=()=>{s(new Error("Failed to load image for compression"))},o.src=t})}function b$(t,e=1920,n=1080,r=.8){return new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{ca(a.target.result,e,n,r).then(i).catch(s)},o.onerror=()=>s(new Error("Failed to read file")),o.readAsDataURL(t)})}function fC(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(d=>{d?r(d):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function x$(t,e,n){try{let r;try{r=await ca(e,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original:",I),r=await(await fetch(e)).blob()}let i;try{i=await fC(e)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=yd(Kl,`userHistory/${t}/${o}`),u=await md(l,r),d=await gd(u.ref),h=yd(Kl,`userHistory/${t}/${a}`),m=await md(h,i),y=await gd(m.ref);return{downloadURL:d,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function A$(t,e){try{const n=await new Promise(I=>{const S=new FileReader;S.onload=()=>I(S.result),S.readAsDataURL(e)});let r;try{r=await ca(n,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original file:",I),r=e}let i;try{i=await fC(n)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=yd(Kl,`userHistory/${t}/${o}`),u=await md(l,r),d=await gd(u.ref),h=yd(Kl,`userHistory/${t}/${a}`),m=await md(h,i),y=await gd(m.ref);return{downloadURL:d,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function S$(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await x$(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=Ar(zd(Bn,"userHistory"));return await Wd(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function pC(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await A$(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=Ar(zd(Bn,"userHistory"));return await Wd(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function R$(t){try{const e=zd(Bn,"userHistory"),n=kf(e,Pf("userId","==",t),Cf("createdAt","desc")),r=await F_(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function Qa(t,e=1,n=7){try{const r=zd(Bn,"userHistory");let i=null;if(e>1){const h=kf(r,Pf("userId","==",t),Cf("createdAt","desc"),ey((e-1)*n)),m=await F_(h);m.empty||(i=m.docs[m.docs.length-1])}let s;const o=n*2;i&&e>1?s=kf(r,Pf("userId","==",t),Cf("createdAt","desc"),L6(i),ey(o)):s=kf(r,Pf("userId","==",t),Cf("createdAt","desc"),ey(o));const a=await F_(s),l=[];a.forEach(h=>{const m=h.data();if(!m.isError){const y={id:h.id,...m};m.result&&m.result.storageUrl&&(y.storageUrl=m.result.storageUrl,y.thumbnailUrl=m.result.thumbnailUrl,y.filename=m.result.filename,y.thumbnailFilename=m.result.thumbnailFilename),m.objects&&(y.objects=m.objects),l.push(y)}});const u=l.slice(0,n),d=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${d}`),{history:u,hasMore:d}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function mC(t,e){try{let n;try{n=await ca(e,1920,1080,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=yd(Kl,`temp/${t}/${i}`),o=await md(s,n),a=await gd(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function fe(t,e={}){try{HA(cC,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const Lf=(t="email")=>fe("sign_up",{method:t}),gC=(t="email")=>fe("login",{method:t}),yC=()=>fe("anonymous_sign_in"),_C=()=>fe("logout"),z_=t=>fe("account_link",{success:t}),wC=t=>fe("image_upload",{file_type:t}),vC=()=>fe("object_image_upload"),IC=()=>fe("image_download"),EC=t=>fe("image_share",{platform:t}),TC=(t,e=!1)=>fe("generation_start",{prompt_type:t,has_object_image:e}),bC=(t,e)=>fe("generation_complete",{prompt_type:t,duration_ms:e}),Of=t=>fe("generation_error",{error_type:t}),Vf=(t,e,n)=>fe("limit_reached",{subscription:t,usage:e,limit:n}),q_=(t,e=0)=>fe("object_detection",{success:t,object_count:e}),k$=(t,e=null)=>fe("feature_use",{feature:t,value:e}),xC=t=>fe("style_select",{style:t}),AC=(t,e)=>fe("color_select",{color:t,category:e}),P$=t=>fe("angle_select",{angle:t}),SC=t=>fe("lighting_select",{lighting:t}),RC=t=>fe("furniture_select",{furniture:t}),kC=t=>fe("repairs_select",{repair:t}),PC=t=>fe("doors_windows_select",{option:t}),CC=t=>fe("bathroom_select",{option:t}),G_=()=>fe("onboarding_start"),NC=t=>fe("onboarding_step",{step:t}),DC=()=>fe("onboarding_complete"),LC=t=>fe("onboarding_skip",{at_step:t}),H_=()=>fe("subscription_modal_view"),OC=t=>fe("subscription_click",{tier:t}),VC=()=>fe("welcome_premium_show"),MC=()=>fe("history_click"),FC=t=>fe("history_load_more",{page:t}),jC=()=>fe("contact_form_submit"),UC=()=>fe("contact_form_success"),C$=t=>fe("category_select",{category:t}),N$=t=>fe("page_view",{page:t}),BC=()=>fe("app_open"),D$=Object.freeze(Object.defineProperty({__proto__:null,analytics:cC,app:dc,auth:ns,compressFile:b$,compressImage:ca,createOrUpdateUser:fo,db:Bn,fileToGenerativePart:uC,getDeviceFingerprint:$_,getDeviceId:hC,getFingerprint:E$,initFingerprint:Nv,loadUserHistory:R$,loadUserHistoryPaginated:Qa,logAnalyticsEvent:fe,model:v$,saveImageToHistory:S$,saveUploadToHistory:pC,signInUser:dC,storage:Kl,trackAccountLink:z_,trackAngleSelect:P$,trackAnonymousSignIn:yC,trackAppOpen:BC,trackBathroomSelect:CC,trackCategorySelect:C$,trackColorSelect:AC,trackContactFormSubmit:jC,trackContactFormSuccess:UC,trackDoorsWindowsSelect:PC,trackFeatureUse:k$,trackFurnitureSelect:RC,trackGenerationComplete:bC,trackGenerationError:Of,trackGenerationStart:TC,trackHistoryClick:MC,trackHistoryLoadMore:FC,trackImageDownload:IC,trackImageShare:EC,trackImageUpload:wC,trackLightingSelect:SC,trackLimitReached:Vf,trackLogin:gC,trackLogout:_C,trackObjectDetection:q_,trackObjectImageUpload:vC,trackOnboardingComplete:DC,trackOnboardingSkip:LC,trackOnboardingStart:G_,trackOnboardingStep:NC,trackPageView:N$,trackRepairsSelect:kC,trackSignUp:Lf,trackStyleSelect:xC,trackSubscriptionClick:OC,trackSubscriptionModalView:H_,trackWelcomePremiumShow:VC,uploadImageForSharing:mC,urlToFile:I$},Symbol.toStringTag,{value:"Module"}));class L${constructor(){Mv(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=pd(Ar(Bn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map}async submitImageGenerationRequest(e,n,r,i=null,s=null){try{const o=await e.getIdToken(),a={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:o,deviceId:s,prompt:n,imageData:r,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date},l=Ar(zd(Bn,"userHistory"));return await Wd(l,a),l.id}catch(o){throw console.error("Error submitting image generation request:",o),o}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=Ar(Bn,"genCount",r,"users",e),s=Ar(Bn,"users",e),[o,a]=await Promise.all([b1(i),b1(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},d=u.credits!==void 0?u.credits:0;return{count:l,limit:d}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const qa=new L$,O$=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const[s,o]=q.useState(null),[a,l]=q.useState({width:window.innerWidth,height:window.innerHeight}),[u,d]=q.useState(window.innerWidth<1024),h=e[t];q.useEffect(()=>{const P=()=>{const z=window.innerWidth<1024;if(d(z),l({width:window.innerWidth,height:window.innerHeight}),h.targetRef&&h.targetRef.current){const T=h.targetRef.current.getBoundingClientRect();T.width>0&&T.height>0?o(T):o(null)}else o(null)};P(),window.addEventListener("resize",P),window.addEventListener("scroll",P,!0);const U=setTimeout(P,500);return()=>{window.removeEventListener("resize",P),window.removeEventListener("scroll",P,!0),clearTimeout(U)}},[t,h]);const m=t===e.length-1;if(!s)return p.jsxs("div",{className:"fixed inset-0 z-[100]",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",dir:"rtl",children:[p.jsx("h3",{className:"font-bold text-xl text-primary-600",children:h.title}),p.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:p.jsx(Hu,{size:20})})]}),p.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:"rtl",children:h.description}),p.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[p.jsx("div",{className:"flex gap-1.5",children:e.map((P,U)=>p.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${U===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},U))}),p.jsxs("button",{onClick:m?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[m?"":"",!m&&p.jsx(KI,{size:16})]})]})]})})]});const y=300,I=200,S=20,N={};let E="";const v=s.left>a.width-350,b=s.left<350;if(v){N.left=s.left-y-S;let P=s.top+s.height/2-80;P=Math.max(20,Math.min(a.height-I-20,P)),N.top=P,E="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(b){N.left=s.right+S;let P=s.top+s.height/2-80;P=Math.max(20,Math.min(a.height-I-20,P)),N.top=P,E="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let P=s.left+s.width/2-y/2;P=Math.max(20,Math.min(a.width-y-20,P)),N.left=P;const U=s.top;a.height-s.bottom,U>I+S?(N.top=s.top-I+40,N.top=s.top-180,E="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(N.top=s.bottom+S,E="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}return p.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[p.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[p.jsx("defs",{children:p.jsxs("mask",{id:"spotlight-mask",children:[p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),p.jsx("rect",{x:s.left-5,y:s.top-5,width:s.width+10,height:s.height+10,rx:"12",fill:"black"})]})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),p.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:s.left-5,top:s.top-5,width:s.width+10,height:s.height+10}}),p.jsxs("div",{className:"absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl w-[300px] pointer-events-auto animate-bounce-in origin-center transition-all duration-300",style:N,children:[p.jsx("div",{className:`absolute w-0 h-0 border-solid ${E}`}),p.jsxs("div",{className:"flex justify-between items-start mb-2",dir:"rtl",children:[p.jsx("h3",{className:"font-bold text-lg text-primary-600",children:h.title}),p.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Hu,{size:16})})]}),p.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:"rtl",children:h.description}),p.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[p.jsx("div",{className:"flex gap-1",children:e.map((P,U)=>p.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${U===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},U))}),p.jsxs("button",{onClick:m?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[m?"":"",!m&&p.jsx(KI,{size:16})]})]})]})]})},V$=({color:t,onClose:e,onApply:n})=>{const[r,i]=q.useState(""),[s,o]=q.useState("all"),a=u=>{const d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return d?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null},l=()=>{const u=a(t.hex),d=u?`RGB(${u.r}, ${u.g}, ${u.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${d}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const h=/[\u0590-\u05FF]/.test(r);n(h?`  ${r}  ${t.value} (${t.ral}, ${d})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${d}) color completely and opaquely, covering the original color entirely`)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),p.jsx("h3",{className:"text-lg font-semibold text-white",children:" "})]}),p.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:p.jsx(Hu,{size:20})})]}),p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[p.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("span",{className:"font-medium text-white block",children:" "}),p.jsx("span",{className:"text-xs text-gray-400",children:"    "})]})]}),p.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[p.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("span",{className:"font-medium text-white block",children:" "}),p.jsx("span",{className:"text-xs text-gray-400",children:"   "})]})]})]}),s==="custom"&&p.jsxs("div",{className:"animate-slide-up",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:" ?"}),p.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:": , , ...",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),p.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:""}),p.jsxs("button",{onClick:l,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[p.jsx("span",{children:""}),p.jsx(e_,{size:16})]})]})]})]})})},G1=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=q.useState(!1);return q.useEffect(()=>{a(!0)},[]),!t||!o?null:B0.createPortal(p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[p.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(Hu,{className:"w-5 h-5"})}),p.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),p.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),p.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:p.jsx(ap,{className:"w-8 h-8 text-primary-400"})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?"   ":"   "}),p.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?`    (${s} ).         .`:`   ${s}   .        ,   .`}),p.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-xs text-gray-400 mb-1",children:" "}),p.jsxs("div",{className:"text-lg font-bold text-white",children:[i," "]})]}),p.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),p.jsxs("div",{className:"text-lg font-bold text-white",children:[s," "]})]})]}),p.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[p.jsx(ap,{className:"w-5 h-5"}),r>0?" ":"  "]}),p.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:" , "})]})]})}),document.body)},M$=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=q.useState(!1);return q.useEffect(()=>{i(!0)},[]),!t||!r?null:B0.createPortal(p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[p.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:p.jsx(Hu,{className:"w-5 h-5"})}),p.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),p.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),p.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:p.jsx(Rg,{size:16,fill:"currentColor"})}),p.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:p.jsx(Rg,{size:12,fill:"currentColor"})}),p.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:p.jsx(Rg,{size:14,fill:"currentColor"})})]}),p.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[p.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[p.jsx(ap,{className:"w-10 h-10 text-yellow-400"}),p.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:p.jsx(e_,{className:"w-4 h-4 text-white stroke-[3]"})})]}),p.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),p.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),p.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[p.jsx(ts,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[p.jsx(e_,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"    "})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[p.jsx(ap,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"  "})]})]}),p.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",p.jsx(ts,{className:"w-5 h-5"})]})]})]})}),document.body)};function F$(){var so;const[t,e]=q.useState(!1),[n,r]=q.useState(0),[i,s]=q.useState(null),[o,a]=q.useState(window.innerWidth<1024),[l,u]=q.useState(!1),d=q.useRef(null),h=q.useRef(null);q.useEffect(()=>{const A=()=>a(window.innerWidth<1024);return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const m=q.useRef(null),y=q.useRef(null),[I,S]=q.useState("  "),[N,E]=q.useState(null),[v,b]=q.useState("/assets/design_img.jpg"),[P,U]=q.useState(!1),[z,T]=q.useState(!1);q.useState(!1);const[w,x]=q.useState(!1),[k,C]=q.useState(!1),[L,R]=q.useState(!1),[$t,Xn]=q.useState(!1),[Zn,tn]=q.useState(!1),[Y,oe]=q.useState(!1),[se,Te]=q.useState([]),[J,Me]=q.useState(null),[_t,Sn]=q.useState(!1),[dn,Nt]=q.useState(!1),[Fm,Xd]=q.useState(!1),[hc,hn]=q.useState([]),[Zd,Ks]=q.useState(!1),[eh,Bi]=q.useState(null),[zt,Dt]=q.useState(""),[Dv,Qs]=q.useState(16/9),[ua,fc]=q.useState(""),[Ys,da]=q.useState(null),[Rn,$i]=q.useState(null),[ha,nt]=q.useState(1),[rt,er]=q.useState(!0),[zi,pc]=q.useState(!1),[jm,fr]=q.useState(!1),[th,fa]=q.useState(!1),[tr,Js]=q.useState("signup"),[Dr,pa]=q.useState(""),[mc,gc]=q.useState(""),[kn,yc]=q.useState(0),[it,si]=q.useState(0),[Lr,Xs]=q.useState(0),nh={0:"",1:"",2:"",3:""},[Pn,_c]=q.useState(""),[Tt,wc]=q.useState(!1),[ma,qi]=q.useState(!1),[rh,Um]=q.useState(!1),[oi,Bm]=q.useState(!1),[$m,ai]=q.useState(!1),[ih,ga]=q.useState(!1),[Zs,pr]=q.useState(null),[sh,ya]=q.useState(!1),[_a,mr]=q.useState(!1),[oh,vc]=q.useState(!1);q.useState(0);const[zm,Gi]=q.useState(!1),[wa,va]=q.useState(""),[gr,Or]=q.useState(""),[eo,ah]=q.useState(""),[Ic,Ec]=q.useState(!1),[lh,to]=q.useState(!1),[Ia,li]=q.useState("");q.useEffect(()=>{Zs&&J&&!J.isAnonymous&&(ai(!0),H_(),pr(null))},[J,Zs]);const Ea=A=>{const F=A.includes("starter")?"starter":A.includes("value")?"value":A.includes("pro")?"pro":"unknown";OC(F),Hi.current=!0,window.open(A,"_blank","noopener,noreferrer"),ai(!1),(!J||J.isAnonymous)&&ya(!0)},[qm,Tc]=q.useState(!1),[bc,xc]=q.useState(null),ch=q.useRef(null),Vr=q.useRef(null),bt=q.useRef(null);q.useRef(null);const no=q.useRef(!0),Hi=q.useRef(!1);q.useEffect(()=>{BC()},[]),q.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{e(!0),G_()},1e3)},[]);const Ta=()=>{e(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),DC()},Ne=()=>{if(n<3){const A=n+1;r(A),NC(A)}else Ta()},ba=()=>{LC(n),Ta()},Mr=()=>{H_(),ai(!0)},ro=[{title:" ",description:"      .   ?  ,   .",targetRef:o?h:d},{title:"  ",description:'      .  " "    .',targetRef:m},{title:" ",description:'  "" -AI       !',targetRef:y},{title:" :  ",description:'   ?   " "             .',targetRef:null}];q.useEffect(()=>{const A=D4(ns,async F=>{if(F){console.log("User UID:",F.uid),Me(F),Sn(!0),await fo(F),Nt(!0);try{const ue=await Qa(F.uid,1,7);Te(ue.history),er(ue.hasMore)}finally{Nt(!1)}const B=Ar(Bn,"users",F.uid),ie=pd(B,ue=>{if(ue.exists()){const pe=ue.data(),Fe=pe.subscription!==void 0?pe.subscription:0;si(Cn=>no.current?(no.current=!1,Fe):(Cn===0&&Fe>0&&Hi.current&&(vc(!0),VC(),Hi.current=!1),Fe)),yc(pe.credits!==void 0?pe.credits:0)}}),le=new Date,ve=`${String(le.getMonth()+1).padStart(2,"0")}-${le.getFullYear()}`,xe=Ar(Bn,"genCount",ve,"users",F.uid),ne=pd(xe,ue=>{ue.exists()?Xs(ue.data().count||0):Xs(0)});return()=>{ie(),ne()}}else try{const B=await dC();Me(B),Sn(!0),await fo(B),yC()}catch(B){console.error("Failed to sign in anonymously:",B)}});return()=>A()},[]),q.useEffect(()=>{if(!(window.innerWidth<1024)){const F=uh[I]||[];hn(F),console.log("Loaded default objects for category:",I,F)}},[I]);const uh={"  ":[" "," "," ","  ","  "," "," "," "," "," "," "," "]," ":[" '"," "," "," "," ","  ","  "," "," "," "," "," "]," ":["  "," "," "," "]," ":[" "," "]," ":[" "," ","' '"," "," "],"  ":[" "," "," "," "," "," "],:[" "," "," "," ''"," "]},dh=async A=>{const F=A.target.files[0];if(F){const B=F.type||F.name.split(".").pop().toLowerCase();wC(B);const ie=F.type==="image/heic"||F.type==="image/heif"||F.name.toLowerCase().endsWith(".heic")||F.name.toLowerCase().endsWith(".heif");ie&&console.log("HEIC file detected, converting to JPEG...");const le=new FileReader;le.onload=async ve=>{const xe=ve.target.result;let ne=xe;try{const ue=await ca(xe,1920,1080,.8),pe=new FileReader;ne=await new Promise(Fe=>{pe.onload=()=>Fe(pe.result),pe.readAsDataURL(ue)}),console.log("Image compressed for display")}catch(ue){console.warn("Failed to compress image for display, using original:",ue),ie&&console.error("HEIC conversion failed, please try uploading a JPEG or PNG image instead")}if(E(ne),b(ne),Qs(16/9),Bi(null),_t&&J){Nt(!0);try{const ue=await pC(J.uid,F,`Uploaded: ${F.name}`),pe=ue.id;console.log("Upload result ID:",pe),console.log("Upload result:",ue);const Fe=await Qa(J.uid,1,7);Te(Fe.history),nt(1),er(Fe.hasMore),Bi(pe),console.log("Set current history ID to newly uploaded image:",pe),console.log("Current history after reload:",Fe.history.map(Lt=>({id:Lt.id,prompt:Lt.prompt}))),window.innerWidth<1024||(console.log("About to detect objects for history ID:",pe),io(ne,pe))}catch(ue){console.error("Failed to save upload to Firebase:",ue)}finally{Nt(!1)}}else if(!(window.innerWidth<1024)){const pe=uh[I]||[];hn(pe)}},le.readAsDataURL(F)}},hh=()=>{ch.current.click()},Gm=async()=>{IC();try{let A=v;if(A.startsWith("https://firebasestorage.googleapis.com/")){const F=document.createElement("a");F.href=A,F.download="moomhe-design.png",F.target="_blank",document.body.appendChild(F),F.click(),document.body.removeChild(F)}else{const B=await(await fetch(A)).blob(),ie=window.URL.createObjectURL(B),le=document.createElement("a");le.href=ie,le.download="moomhe-design.png",document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(ie)}}catch(A){console.error("Download failed:",A);try{window.open(v,"_blank")}catch(F){console.error("Fallback download also failed:",F),alert("  .  .")}}},Hm=async()=>{EC("whatsapp");try{let A=v;const F=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(A.startsWith("data:"))try{U(!0);const{downloadURL:B}=await mC((J==null?void 0:J.uid)||"anonymous",A);A=B,console.log(" Image uploaded to temporary storage:",B)}catch(B){console.error("Error uploading image to Firebase:",B),alert("  .  .");return}finally{U(!1)}if(F){const B=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(A)}`;window.open(B,"_blank")}else{const B=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(A)}`;window.open(B,"_blank")}}catch(A){console.error("WhatsApp share failed:",A),alert("  .  .")}},Wm=async()=>{if(!gr.trim()&&!wa.trim()){li("     ");return}if(gr.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(gr)){li("    ");return}if(!eo.trim()){li("  ");return}li(""),Ec(!0),jC();try{const A=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,F={id:A,uid:(J==null?void 0:J.uid)||"anonymous",email:gr.trim()||null,phone:wa.trim()||null,message:eo.trim(),createdAt:new Date,userEmail:(J==null?void 0:J.email)||null,isAnonymous:(J==null?void 0:J.isAnonymous)||!0};await Wd(Ar(Bn,"supportMsgs",A),F),va(""),Or(""),ah(""),Gi(!1),to(!0),UC(),setTimeout(()=>to(!1),5e3)}catch(A){console.error("Error submitting contact form:",A),li("  .  .")}finally{Ec(!1)}},ci=A=>{MC();const F=A.storageUrl||A.imageUrl;if(b(F),Qs(16/9),Bi(A.id),A.objects){let B=A.objects;if(Array.isArray(A.objects)&&A.objects.length>0){const ie=A.objects[0];typeof ie=="string"&&ie.includes(",")&&(B=ie.split(",").map(le=>le.trim()).filter(le=>le.length>0))}else typeof A.objects=="string"&&(B=A.objects.split(",").map(ie=>ie.trim()).filter(ie=>ie.length>0));B.length>0?(hn(B),console.log("Loaded objects from history entry:",B)):(hn([]),console.log("No valid objects found in history entry"))}else hn([]),console.log("No objects field in history entry")},Fr=()=>{P||Xd(!0)},Ac=()=>{Xd(!1)},fh=A=>{const F=A.target,B=F.naturalWidth/F.naturalHeight;Qs(B)},ph=async A=>{const F=A.target.files[0];if(F){vC();const B=new FileReader;B.onload=ie=>{const le=new Image;le.onload=()=>{const ne=document.createElement("canvas");let ue=le.width,pe=le.height;const Fe=1200;(ue>Fe||pe>Fe)&&(ue>pe?(pe=Math.round(pe*Fe/ue),ue=Fe):(ue=Math.round(ue*Fe/pe),pe=Fe)),ne.width=ue,ne.height=pe,ne.getContext("2d").drawImage(le,0,0,ue,pe);const Lt=ne.toDataURL("image/jpeg",.9);da(Lt),fetch(Lt).then(ft=>ft.blob()).then(ft=>{const Nn=new File([ft],F.name,{type:"image/jpeg"});$i(Nn)})},le.src=ie.target.result,kc("  !      .");const ve="    ",xe=zt.trim();xe?xe.includes(ve)||Dt(`${xe} ${ve}`):Dt(ve)},B.readAsDataURL(F)}},ui=()=>{da(null),$i(null),bt.current&&(bt.current.value="")},Km=async A=>{if(A.preventDefault(),!(!Dr||!Pn)){if(tr==="signup"&&Pn!==mc){alert("  .  .");return}wc(!0);try{if(tr==="signup")if(J&&J.isAnonymous){const{linkWithCredential:B,EmailAuthProvider:ie}=await di(()=>import("./index.esm-8ca0dedf.js"),[]),le=ie.credential(Dr,Pn);try{const ve=await B(J,le);await fo(ve.user),z_(!0),Lf("email_link"),alert("  !    .")}catch(ve){if(z_(!1),ve.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:xe}=await di(()=>import("./index.esm-8ca0dedf.js"),[]),ne=await xe(ns,Dr,Pn);await jr(J.uid,ne.user.uid),await fo(ne.user),Lf("email_migrate"),alert("  !      .")}else throw ve}}else{const{createUserWithEmailAndPassword:B}=await di(()=>import("./index.esm-8ca0dedf.js"),[]),ie=await B(ns,Dr,Pn);await fo(ie.user),Lf("email"),alert("  !")}else{const{signInWithEmailAndPassword:F}=await di(()=>import("./index.esm-8ca0dedf.js"),[]),B=await F(ns,Dr,Pn);await fo(B.user),gC("email"),alert(" !")}fr(!1),pa(""),gc(""),_c(""),Js("signup")}catch(F){console.error("Authentication error:",F),F.code==="auth/email-already-in-use"?(alert("   .   ."),Js("login")):F.code==="auth/user-not-found"?(alert("  .    ."),Js("signup")):F.code==="auth/wrong-password"?alert(" .  ."):F.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{wc(!1)}}},Qm=A=>{A.preventDefault(),Km(A)},Ym=async()=>{if(!Dr){alert("    .");return}qi(!0);try{const{sendPasswordResetEmail:A}=await di(()=>import("./index.esm-8ca0dedf.js"),[]);await A(ns,Dr),alert("     .")}catch(A){console.error("Password reset error:",A),A.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{qi(!1)}},jr=async(A,F)=>{try{const{collection:B,query:ie,where:le,getDocs:ve,doc:xe,setDoc:ne,deleteDoc:ue}=await di(()=>import("./index.esm-9af55ffb.js"),[]),{db:pe}=await di(()=>Promise.resolve().then(()=>D$),void 0),Fe=B(pe,"userHistory"),Cn=ie(Fe,le("userId","==",A)),Lt=await ve(Cn),ft=[];if(Lt.forEach(Nn=>{const pn=Nn.data();pn.userId=F;const $r=xe(B(pe,"userHistory"));ft.push(ne($r,pn)),ft.push(ue(Nn.ref))}),await Promise.all(ft),console.log(`Migrated ${Lt.size} history entries from ${A} to ${F}`),_t){const Nn=await Qa(F,1,7);Te(Nn.history),nt(1),er(Nn.hasMore)}}catch(B){console.error("Error migrating user data:",B)}},Jm=async()=>{try{_C();const{signOut:A}=await di(()=>import("./index.esm-8ca0dedf.js"),[]);await A(ns),Te([]),hn([]),Me(null),Sn(!1),fa(!1),window.location.reload()}catch(A){console.error("Logout error:",A),alert(" .  .")}},xa=async()=>{if(!_t||!J||zi||!rt){console.log("Load more history blocked:",{isAuthenticated:_t,currentUser:!!J,isLoadingMoreHistory:zi,hasMoreHistory:rt});return}console.log("Loading more history, current page:",ha),pc(!0);try{const A=ha+1;FC(A);const F=await Qa(J.uid,A,7);console.log("Load more result:",{nextPage:A,historyCount:F.history.length,hasMore:F.hasMore}),F.history.length>0?(Te(B=>[...B,...F.history]),nt(A),er(F.hasMore)):er(!1)}catch(A){console.error("Failed to load more history:",A)}finally{pc(!1)}};q.useEffect(()=>{const A=F=>{rh&&Vr.current&&!Vr.current.contains(F.target)&&Um(!1),oi&&!F.target.closest(".suggestions-modal")&&Bm(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[rh,oi]);const Aa=A=>{const F=String(A.getDate()).padStart(2,"0"),B=String(A.getMonth()+1).padStart(2,"0"),ie=String(A.getFullYear()).slice(-2);return`${F}/${B}/${ie}`},Sa=A=>{const B=Math.floor((new Date-A)/1e3);return B<60?" ":B<3600?` ${Math.floor(B/60)} `:B<86400?` ${Math.floor(B/3600)} `:B<172800?"":B<604800?` ${Math.floor(B/86400)} `:B<2592e3?` ${Math.floor(B/604800)} `:B<31536e3?` ${Math.floor(B/2592e3)} `:` ${Math.floor(B/31536e3)} `},Sc=A=>{const F=A.createdAt;if(!F)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(F))return F;try{let B;if(F&&typeof F=="object"&&F.toDate?B=F.toDate():F&&typeof F=="object"&&F.seconds?B=new Date(F.seconds*1e3):B=new Date(F),!isNaN(B.getTime()))return Sa(B)}catch(B){console.warn("Failed to parse timestamp:",F,B)}return F||"  "},Ur=async()=>{if(zt.trim()){if(_t&&J&&!await qa.canMakeRequest(J.uid)){Vf(it,Lr,kn),mr(!0);return}U(!0);try{const A=zt;let F=A;Rn&&(F=`  , ${A}`),console.log(" Final prompt for AI:",F),await Br(F),Dt(""),da(null),$i(null),bt.current&&(bt.current.value="")}catch(A){console.error("Custom prompt failed:",A),A.message&&(A.message.includes("limit reached")||A.message.includes("credits"))?mr(!0):alert("  .  .")}finally{U(!1)}}},io=async(A,F)=>{if(!(!A||!F)){console.log("detectObjectsWithId called with historyId:",F),console.log("detectObjectsWithId called with imageUrl:",A),Ks(!0);try{if(_t&&J&&!await qa.canMakeRequest(J.uid)){mr(!0),Ks(!1);return}let B=A;if(A.startsWith("/assets/")||A.startsWith("./assets/"))try{const xe=await(await fetch(A)).blob();B=await new Promise(ue=>{const pe=new FileReader;pe.onload=()=>ue(pe.result),pe.readAsDataURL(xe)})}catch(ve){throw console.error("Error converting local image to data URL:",ve),new Error("Failed to load the image for object detection")}console.log("Submitting object detection request for history ID:",F);const ie=await $_(),le=await qa.submitObjectDetectionRequest(J,B,F,ie);if(console.log("Object detection result:",le),console.log("Objects will be saved to history ID:",F),le&&le.objects){console.log("Raw objects from server:",le.objects),console.log("Type of objects:",typeof le.objects);let ve=le.objects;if(q_(!0,Array.isArray(le.objects)?le.objects.length:0),Array.isArray(le.objects)&&le.objects.length>0){console.log("Objects is array, checking first element...");const xe=le.objects[0];typeof xe=="string"&&xe.includes(",")?(console.log("First element is comma-separated string, parsing..."),ve=xe.split(",").map(ne=>ne.trim()).filter(ne=>ne.length>0),console.log("Parsed objects array:",ve)):console.log("Using array as-is:",ve)}else typeof le.objects=="string"?(console.log("Parsing string objects..."),ve=le.objects.split(",").map(xe=>xe.trim()).filter(xe=>xe.length>0),console.log("Parsed objects array:",ve)):console.log("Objects is already an array:",ve);hn(ve),console.log("Final detected objects:",ve),F&&se.length>0&&(Te(xe=>xe.map(ne=>ne.id===F?{...ne,objects:ve}:ne)),console.log("Updated local imageHistory with detected objects for ID:",F,ve))}else hn([])}catch(B){console.error("Object detection failed:",B),q_(!1,0),hn([]),alert("  .  .")}finally{Ks(!1)}}},mh={:"#C1121C",:"#FF7514",:"#E5BE01",:"#287233",:"#1E2460",:"#6D3F5B",:"#78858B"," ":"#F4F4F4"},Rc={:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}]," ":[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},Ge=A=>{AC(A.value,ua),xc(A),Tc(!0)},Xm=A=>{Tc(!1),T(!1),xc(null),console.log(" Color Selection - Prompt being added to input and executing:",A);const F=zt.trim();let B;F?F.endsWith(" ")?B=`${F}${A}`:B=`${F}, ${A}`:B=A,Dt(B),Br(B),Dt("")},Zm=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],gh=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}],yh=[{name:"",value:"minimalist",prompt:"     - , ,  "},{name:"",value:"bohemian",prompt:"     - , , "},{name:"",value:"industrial",prompt:"     -   "},{name:"  ",value:"mid-century modern",prompt:"       - , , "},{name:"",value:"scandinavian",prompt:"     -  , , "},{name:"",value:"traditional",prompt:"     - , , "},{name:" ",value:"modern farmhouse",prompt:"      - , , "},{name:"",value:"contemporary",prompt:"     - , , "},{name:"",value:"coastal",prompt:"     - , , "},{name:" ",value:"art deco",prompt:"      - , "}],_h=A=>{x(!1),SC(A.value),console.log(" Lighting Selection - Prompt being added to input:",A.prompt),console.log(" Selected lighting:",A.name,A.value),ka(A.prompt)},Ra=A=>{C(!1),RC(A.value),console.log(" Furniture Selection - Prompt being added to input:",A.prompt),console.log(" Selected furniture:",A.name,A.value),ka(A.prompt)},wh=A=>{Xn(!1),xC(A.value),console.log(" Style Selection - Prompt being added to input and executing:",A.prompt),console.log(" Selected style:",A.name,A.value);const F=zt.trim();let B;F?F.endsWith(" ")?B=`${F}${A.prompt}`:B=`${F}, ${A.prompt}`:B=A.prompt,Dt(B),Br(B),Dt("")},fn=(A,F="other")=>{Zn?PC(A):Y?CC(A):L&&kC(A),tn(!1),oe(!1),R(!1);const B=zt.trim();let ie;B?B.endsWith(" ")?ie=`${B}${A}`:ie=`${B}, ${A}`:ie=A,Dt(ie),Br(ie),Dt("")},kc=A=>{s(A),setTimeout(()=>s(null),3e3)},ka=A=>{const F=zt.trim();let B;F?F.endsWith(" ")?B=`${F}${A}`:B=`${F} ${A}`:B=A,Dt(B),kc("  .     ")},Br=async A=>{var le,ve,xe;if(!v)return;const F=Date.now();U(!0);const ie=(ne=>ne.includes("")||ne.includes("")||ne.includes("")||ne.includes("")?"style":ne.includes("")||ne.includes("")?"color":ne.includes("")||ne.includes("")?"lighting":ne.includes("")||ne.includes("")||ne.includes("")||ne.includes("")?"furniture":ne.includes("")||ne.includes("")||ne.includes("")?"angle":ne.includes("")||ne.includes("")?"repairs":ne.includes("")||ne.includes("")?"doors_windows":ne.includes("")||ne.includes("")||ne.includes("")?"bathroom":"custom")(A);TC(ie,!!Rn);try{if(console.log(" AI Image Alteration - Prompt being sent:",A),console.log(" Main image URL:",v),console.log(" Object image available:",!!Rn),_t&&J&&!await qa.canMakeRequest(J.uid)){Vf(it,Lr,kn),mr(!0),U(!1);return}let ne=v;if(v.startsWith("/assets/")||v.startsWith("./assets/"))try{const ft=await(await fetch(v)).blob();ne=await new Promise(pn=>{const $r=new FileReader;$r.onload=()=>pn($r.result),$r.readAsDataURL(ft)})}catch(Lt){throw console.error("Error converting local image to data URL:",Lt),new Error("Failed to load the default image")}let ue=null;Rn?(console.log(" Processing object image file:",Rn.name,Rn.type,Rn.size),ue=await uC(Rn),console.log(" Object image processed successfully:",!!ue)):console.log(" No object image file available");const pe=await $_(),Fe=await qa.submitImageGenerationRequest(J,A,ne,ue,pe),Cn=await qa.waitForRequestCompletion(Fe);if(console.log("AI Service result:",Cn),Cn&&Cn.storageUrl){const Lt=Date.now()-F;bC(ie,Lt);const ft=Cn.storageUrl,Nn={imageUrl:ft,prompt:A,timestamp:Aa(new Date)};if(_t&&J){Nt(!0);try{const pn=await Qa(J.uid,1,7);Te(pn.history),nt(1),er(pn.hasMore)}catch(pn){console.error("Failed to reload history from Firebase:",pn)}finally{Nt(!1)}}else{const pn={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Nn};Te($r=>[pn,...$r]),nt(1),er(!0)}b(ft),Qs(16/9),Bi(null),da(null),$i(null),bt.current&&(bt.current.value="")}else alert("   .       .")}catch(ne){console.error("AI processing failed:",ne),(le=ne.message)!=null&&le.includes("limit reached")||(ve=ne.message)!=null&&ve.includes(" ")?(Of("limit_reached"),Vf(it,Lr,kn),mr(!0)):(xe=ne.message)!=null&&xe.includes("timeout")?(Of("timeout"),alert("    .  .")):(Of("unknown"),alert("  .       ."))}finally{U(!1)}},vh=[{title:" ",items:[{name:" ",description:"      ",icon:mn},{name:" ",description:"  ",icon:mn},{name:" ",description:"  ",icon:mn},{name:" -",description:"  - ( )",icon:mn},{name:"  ",description:"    ()",icon:mn},{name:" ",description:"  ",icon:mn},{name:" ",description:"  ",icon:mn},{name:" ",description:"     ",icon:mn}]},{title:" ",items:[{name:" ",description:"     ",icon:mn},{name:" ",description:"    ",icon:mn},{name:" ",description:"     ",icon:mn},{name:" ",description:"     ",icon:mn}]}],Pc=[{title:" ",items:[{name:" ",description:"    ",icon:Vt},{name:" ",description:"  ",icon:Vt}]},{title:" ",items:[{name:" ",description:"  ",icon:Vt},{name:" ",description:"  vintage",icon:Vt},{name:" ",description:"  ",icon:Vt}]},{title:" ",items:[{name:" ",description:"     ",icon:Vt},{name:"",description:" ",icon:Vt},{name:" ",description:"    ",icon:Vt}]},{title:" ",items:[{name:" ",description:"    ",icon:Vt},{name:" ",description:"  ",icon:Vt},{name:" ",description:"    ",icon:Vt}]},{title:" '/",items:[{name:"' ",description:" '   ",icon:Vt},{name:"' ",description:"  ",icon:Vt}]},{title:" ",items:[{name:"  ",description:"      ",icon:Vt},{name:"  ",description:"      ",icon:Vt}]}];return p.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",children:[p.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),p.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",p.jsx("span",{className:"text-lg sm:text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),p.jsxs("button",{onClick:Mr,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${it>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[it>0?p.jsx(Da,{className:"w-5 h-5"}):p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),p.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),p.jsx("defs",{children:p.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),p.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),p.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),it>0?p.jsxs("div",{className:"flex flex-col items-start leading-none",children:[p.jsx("span",{children:" "}),p.jsxs("span",{className:"text-[10px] opacity-80",children:[kn-Lr>0?kn-Lr:0," "]})]}):" "]}),p.jsx("button",{onClick:()=>{e(!0),G_()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"",children:p.jsx(TD,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>Gi(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:" ",children:p.jsx(Sg,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:Mr,className:"md:hidden flex items-center justify-center w-9 h-9 bg-gradient-to-r from-secondary-500 to-secondary-600 text-white rounded-full shadow-lg shadow-secondary-900/20",children:p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),p.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),p.jsx("defs",{children:p.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),p.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),p.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})}),p.jsx("button",{onClick:()=>J&&!J.isAnonymous?fa(!0):fr(!0),className:"flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:_t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:p.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((J==null?void 0:J.email)||"U")[0].toUpperCase()})}),p.jsxs("div",{className:"text-right hidden sm:block",children:[!(J!=null&&J.isAnonymous)&&p.jsx("div",{className:"text-xs text-textMuted",children:" -"}),p.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((J==null?void 0:J.email)||"").split("@")[0]||""})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:p.jsx(eE,{className:"w-4 h-4 text-white"})}),p.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:""})]})})]})]}),p.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[p.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-20 glass-panel rounded-2xl p-3 items-center overflow-y-auto scrollbar-hide animate-slide-in-right",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[p.jsxs("button",{ref:d,onClick:hh,disabled:P,className:"w-full aspect-square flex flex-col items-center justify-center gap-1 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:" ",children:[p.jsx(ZI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),p.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:""})]}),p.jsx("div",{className:"h-px w-full bg-white/10 my-2"}),[{icon:tE,label:" ",action:()=>Xn(!$t),active:$t},{icon:JI,label:"",action:()=>T(!z),active:z},{icon:XI,label:"",action:()=>C(!k),active:k},{icon:YI,label:"",action:()=>x(!w),active:w},{icon:mn,label:" ",action:()=>tn(!Zn),active:Zn},{icon:Vt,label:"",action:()=>oe(!Y),active:Y},{icon:La,label:" ",action:()=>R(!L),active:L}].map((A,F)=>p.jsxs("button",{ref:A.label===" "?m:null,onClick:A.action,disabled:P,className:`btn-icon w-full aspect-square flex flex-col items-center justify-center gap-1 group ${A.active?"btn-icon-active":""} disabled:opacity-50 disabled:cursor-not-allowed`,children:[p.jsx(A.icon,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${A.active?"text-primary-300":""}`}),p.jsx("span",{className:"text-[10px]",children:A.label})]},F))]})}),p.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[p.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[p.jsx("img",{src:v,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${P?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:Fr,onLoad:fh,style:{objectPosition:"center"}}),P&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[p.jsxs("div",{className:"w-20 h-20 relative",children:[p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),p.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:"  ..."})]}),p.jsxs("div",{className:"absolute top-4 right-4 flex flex-row gap-2 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-300 z-10",children:[p.jsx("button",{onClick:()=>bt.current.click(),className:`p-2 ${Rn?"bg-primary-500":"bg-black/50"} text-white rounded-lg backdrop-blur-md hover:bg-primary-600/70 transition-colors shadow-lg border border-white/10`,title:"  ",children:p.jsx(xD,{className:"w-5 h-5"})}),p.jsx("button",{onClick:Gm,className:"p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-green-600/70 transition-colors shadow-lg border border-white/10",title:" ",children:p.jsx(ED,{className:"w-5 h-5"})}),p.jsx("button",{onClick:Hm,className:"p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-green-600/70 transition-colors shadow-lg border border-white/10",title:" ",children:p.jsx(bD,{className:"w-5 h-5"})})]}),p.jsx("button",{onClick:()=>u(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:"",children:p.jsx(QI,{className:"w-5 h-5"})}),Ys&&p.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:p.jsx("img",{src:Ys,alt:"Object",className:"w-full h-full object-cover"})}),p.jsx("button",{onClick:ui,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:p.jsx("span",{className:"text-xs font-bold",children:""})})]})}),p.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),p.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx("input",{type:"text",value:zt,onChange:A=>Dt(A.target.value),placeholder:"   ... (:     ,   )",disabled:P,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:A=>A.key==="Enter"&&!P&&Ur()}),p.jsx(ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),zt&&p.jsx("button",{onClick:()=>!P&&Dt(""),disabled:P,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),p.jsxs("button",{ref:y,onClick:Ur,disabled:P||!zt.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("span",{children:""}),p.jsx(ts,{className:"w-4 h-4"})]})]})]}),p.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[p.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:" "}),p.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${P?"opacity-50 pointer-events-none":""}`,children:[se.length===0?p.jsxs("div",{className:"text-center py-10 opacity-50",children:[p.jsx(ts,{className:"w-8 h-8 mx-auto mb-2"}),p.jsx("p",{className:"text-xs",children:"  "})]}):se.map(A=>p.jsxs("div",{onClick:()=>!P&&ci(A),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[p.jsx("img",{src:A.thumbnailUrl||A.storageUrl||A.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),p.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[p.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:A.prompt||" "}),p.jsx("p",{className:"text-[10px] text-gray-400",children:Sc(A)})]})]},A.id)),dn&&p.jsx("div",{className:"flex justify-center py-4",children:p.jsx(jc,{className:"w-6 h-6 text-primary-400 animate-spin"})}),rt&&!dn&&se.length>0&&p.jsx("button",{onClick:xa,disabled:P,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),i&&p.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[p.jsx(ts,{className:"w-4 h-4 text-white flex-shrink-0"}),p.jsxs("span",{className:"text-sm font-medium",children:[p.jsx("span",{className:"md:inline block",children:"  ."}),p.jsx("span",{className:"hidden md:inline",children:" "}),p.jsx("span",{className:"md:inline block",children:"    "})]})]})]}),p.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:p.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[p.jsxs("div",{className:"relative",children:[Ys&&p.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:p.jsx("img",{src:Ys,alt:"Object",className:"w-full h-full object-cover"})}),p.jsx("button",{onClick:ui,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:p.jsx("span",{className:"text-xs font-bold",children:""})})]})}),p.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[p.jsx("input",{type:"text",value:zt,onChange:A=>Dt(A.target.value),placeholder:" ?",disabled:P,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:A=>A.key==="Enter"&&!P&&Ur()}),zt&&p.jsx("button",{onClick:()=>!P&&Dt(""),disabled:P,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),p.jsx("button",{onClick:Ur,disabled:!zt.trim()||P,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:p.jsx(ts,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide py-1 -mx-4 px-4",children:[p.jsxs("button",{ref:h,onClick:hh,disabled:P,className:"flex flex-col items-center gap-1 min-w-[60px] disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:p.jsx(ZI,{className:"w-5 h-5 text-blue-400"})}),p.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:""})]}),[{icon:tE,label:" ",action:()=>Xn(!0)},{icon:JI,label:"",action:()=>T(!0)},{icon:XI,label:"",action:()=>C(!0)},{icon:YI,label:"",action:()=>x(!0)},{icon:mn,label:" ",action:()=>tn(!0)},{icon:Vt,label:"",action:()=>oe(!0)},{icon:La,label:" ",action:()=>R(!0)}].map((A,F)=>p.jsxs("button",{onClick:A.action,disabled:P,className:"flex flex-col items-center gap-1 min-w-[60px] disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-surfaceHighlight/30 flex items-center justify-center border border-white/10 active:scale-95 transition-transform",children:p.jsx(A.icon,{className:"w-5 h-5 text-textMuted"})}),p.jsx("span",{className:"text-[10px] text-textMuted",children:A.label})]},F))]}),p.jsx("div",{className:"hidden",children:se.length>0&&p.jsxs("div",{className:`pt-2 border-t border-white/5 ${P?"opacity-50 pointer-events-none":""}`,children:[p.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[" (",se.length,")"]}),p.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:A=>{if(P)return;const{scrollLeft:F,scrollWidth:B,clientWidth:ie}=A.target;F+ie>=B-10&&rt&&!zi&&xa()},children:[se.map(A=>p.jsx("div",{onClick:()=>!P&&ci(A),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:p.jsx("img",{src:A.thumbnailUrl||A.storageUrl||A.imageUrl,alt:"",className:"w-full h-full object-cover"})},A.id)),zi&&p.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:p.jsx(jc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),rt&&!zi&&p.jsxs("button",{onClick:xa,disabled:P,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("span",{className:"text-[10px]",children:""}),p.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),l&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>u(!1)}),p.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[p.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[p.jsx(QI,{className:"w-5 h-5 text-primary-400"})," "]}),p.jsx("button",{onClick:()=>u(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:p.jsx("span",{className:"text-xl leading-none",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[se.length===0?p.jsxs("div",{className:"text-center py-8 opacity-50",children:[p.jsx(ts,{className:"w-6 h-6 mx-auto mb-2"}),p.jsx("p",{className:"text-xs text-gray-400",children:"  "})]}):se.map(A=>p.jsxs("div",{onClick:()=>{P||(ci(A),u(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[p.jsx("img",{src:A.thumbnailUrl||A.storageUrl||A.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:A.prompt||" "}),p.jsx("p",{className:"text-[10px] text-gray-400",children:Sc(A)})]})]},A.id)),dn&&p.jsx("div",{className:"flex justify-center py-2",children:p.jsx(jc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),rt&&!dn&&se.length>0&&p.jsx("button",{onClick:xa,disabled:P,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),Fm&&p.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 animate-fade-in",onClick:Ac,children:p.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh] w-full h-full flex items-center justify-center",children:[p.jsx("img",{src:v,alt:"Full size view",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",onClick:A=>A.stopPropagation()}),p.jsx("button",{onClick:Ac,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all duration-200 backdrop-blur-md border border-white/10 hover:border-white/20",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full backdrop-blur-md text-sm border border-white/10",children:"   "})]})}),z&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),p.jsx("button",{onClick:()=>T(!1),className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(mh).map(A=>p.jsx("button",{onClick:()=>fc(A),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${ua===A?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:A},A))}),p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(so=Rc[ua])==null?void 0:so.map((A,F)=>p.jsxs("button",{onClick:()=>Ge(A),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[p.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:p.jsx("div",{className:"absolute inset-0",style:{backgroundColor:A.hex}})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:A.name}),p.jsx("div",{className:"text-[10px] text-gray-500",children:A.ral})]})]},F))})]})]})}),[{show:k,close:()=>C(!1),title:"  ",options:gh,onSelect:Ra},{show:w,close:()=>x(!1),title:"  ",options:Zm,onSelect:_h},{show:$t,close:()=>Xn(!1),title:"  ",options:yh,onSelect:wh}].map((A,F)=>A.show&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:A.title}),p.jsx("button",{onClick:A.close,className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.options.map((B,ie)=>p.jsxs("button",{onClick:()=>A.onSelect(B),className:"flex items-center p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group",children:[p.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300",children:B.name}),p.jsx("div",{className:"text-xs text-gray-400",children:B.value})]})]},ie))})})]})},F)),(Zn||Y||L)&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:Zn?" ":Y?" ":"  /"}),p.jsx("button",{onClick:()=>{tn(!1),oe(!1),R(!1)},className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[p.jsx("p",{className:"text-center text-gray-400 mb-6",children:"    ."}),p.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[Zn&&vh.map((A,F)=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:A.title}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.items.map((B,ie)=>p.jsxs("button",{onClick:()=>{ka(B.description),tn(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[p.jsxs("div",{className:"flex justify-between items-center w-full",children:[p.jsx("span",{className:"font-medium",children:B.name}),p.jsx(B.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:B.description})]},ie))})]},F)),Y&&Pc.map((A,F)=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:A.title}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.items.map((B,ie)=>p.jsxs("button",{onClick:()=>{ka(B.description),oe(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[p.jsxs("div",{className:"flex justify-between items-center w-full",children:[p.jsx("span",{className:"font-medium",children:B.name}),p.jsx(B.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:B.description})]},ie))})]},F)),L&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("button",{onClick:()=>fn("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"   "}),p.jsx(La,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>fn("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"  "}),p.jsx(La,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>fn("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"   "}),p.jsx(La,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>fn("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"  "}),p.jsx(La,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),jm&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl",children:[p.jsx("button",{onClick:()=>fr(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white",children:""}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),p.jsxs("h1",{className:"relative text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",p.jsx("span",{className:"text-xl sm:text-2xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:tr==="login"?" ":"  "}),p.jsx("p",{className:"text-sm text-gray-400",children:"        ' "})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{type:"email",placeholder:"",value:Dr,onChange:A=>pa(A.target.value),className:"input-glass w-full"}),p.jsx("input",{type:"password",placeholder:"",value:Pn,onChange:A=>_c(A.target.value),className:"input-glass w-full"}),tr==="signup"&&p.jsx("input",{type:"password",placeholder:" ",value:mc,onChange:A=>gc(A.target.value),className:"input-glass w-full"}),p.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:["   ",p.jsx("a",{href:"/eula.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "}),"",p.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "})]}),p.jsx("button",{onClick:Qm,disabled:Tt,className:"btn-primary w-full py-3 text-lg mt-4",children:Tt?p.jsx(jc,{className:"w-6 h-6 animate-spin mx-auto"}):tr==="login"?"":""}),p.jsxs("div",{className:"flex justify-between items-center mt-6 text-sm",children:[p.jsx("button",{onClick:()=>Js(tr==="login"?"signup":"login"),className:"text-primary-300 hover:text-primary-200",children:tr==="login"?"  ? ":"  ? "}),tr==="login"&&p.jsx("button",{onClick:Ym,className:"text-gray-400 hover:text-white",children:" ?"})]})]})]})}),th&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:p.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),p.jsx("p",{className:"text-gray-400 mb-6",children:"    ?"}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:()=>fa(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:""}),p.jsx("button",{onClick:Jm,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),p.jsx("input",{ref:ch,type:"file",accept:"image/*",onChange:dh,className:"hidden"}),p.jsx("input",{ref:bt,type:"file",accept:"image/*",onChange:ph,className:"hidden"}),p.jsx(G1,{isOpen:_a,onClose:()=>mr(!1),onShowPricing:Mr,userSubscription:it,currentUsage:Lr,limit:kn}),p.jsx(M$,{isOpen:oh,onClose:()=>vc(!1),subscriptionName:nh[it]}),sh&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:p.jsx(Da,{size:32})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),p.jsxs("p",{className:"text-gray-300",children:["  ,   ",p.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),p.jsx("button",{onClick:()=>{ya(!1),Js("signup"),fr(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),p.jsx("button",{onClick:()=>ya(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),ih&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:p.jsx(eE,{size:32})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" "}),p.jsxs("p",{className:"text-gray-300",children:["       .",p.jsx("br",{}),"   ?"]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>{ga(!1),pr(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:" "}),p.jsx("button",{onClick:()=>{ga(!1),fr(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),$m&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[p.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[p.jsx("button",{onClick:()=>ai(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent",children:p.jsx("span",{className:"text-2xl leading-none",children:""})}),p.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:" "}),p.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:"   "}),p.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:"         .       ."})]}),p.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 scrollbar-custom",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-6 flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-white",children:"15"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"40  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"   "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:" "})]})]}),p.jsx("button",{onClick:()=>Ea("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:it===1,className:`w-full py-3 rounded-xl font-medium border block text-center ${it===1?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10"}`,children:it===1?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(Da,{className:"w-5 h-5"}),"  "]}):" "})]})]}),p.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[p.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:" "}),p.jsxs("div",{className:"mb-4 mt-2",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"25"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),p.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 33%  "})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{className:"font-medium",children:"100  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:" "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]})]}),p.jsx("button",{onClick:()=>Ea("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:it===2,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${it===2?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30"}`,children:it===2?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(Da,{className:"w-5 h-5"}),"  "]}):" "})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-6 flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-white",children:"39"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),p.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 48%  "})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"200  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  '"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"   "})]})]}),p.jsx("button",{onClick:()=>Ea("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:it===3,className:`w-full py-3 rounded-xl font-medium border block text-center ${it===3?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10"}`,children:it===3?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(Da,{className:"w-5 h-5"}),"  "]}):" "})]})]})]})}),p.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:"     .     . .."})]})}),t&&p.jsx(O$,{step:n,steps:ro,onNext:Ne,onSkip:ba,onComplete:Ta}),qm&&bc&&p.jsx(V$,{color:bc,onClose:()=>Tc(!1),onApply:Xm}),p.jsx(G1,{isOpen:_a,onClose:()=>mr(!1),onShowPricing:Mr,userSubscription:it,currentUsage:Lr,limit:kn}),zm&&p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[p.jsx(Sg,{className:"w-5 h-5 text-primary-400"})," "]}),p.jsx("button",{onClick:()=>{Gi(!1),li("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:p.jsx("span",{className:"text-2xl leading-none",children:""})})]}),p.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  !      ."})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[Ia&&p.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:Ia}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("input",{type:"tel",value:wa,onChange:A=>va(A.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("input",{type:"email",value:gr,onChange:A=>Or(A.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("textarea",{value:eo,onChange:A=>ah(A.target.value),placeholder:"   ...",rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:"rtl"})]}),p.jsx("p",{className:"text-xs text-gray-500 text-center",children:"*      "}),p.jsx("button",{onClick:Wm,disabled:Ic,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:Ic?p.jsxs(p.Fragment,{children:[p.jsx(jc,{className:"w-5 h-5 animate-spin"}),"..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Sg,{className:"w-5 h-5"})," "]})})]})]})}),lh&&p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[p.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:p.jsx(Da,{className:"w-10 h-10 text-emerald-400"})}),p.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:" !"})]}),p.jsxs("div",{className:"p-6 text-center",children:[p.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:["   .",p.jsx("br",{}),"   ."]}),p.jsx("button",{onClick:()=>to(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:""})]})]})})]})}ay.createRoot(document.getElementById("root")).render(p.jsx(oN.StrictMode,{children:p.jsx(F$,{})}));export{C4 as $,H$ as A,lz as B,pz as C,i3 as D,Ju as E,ss as F,as as G,Q$ as H,TM as I,Tz as J,Mz as K,FE as L,Z4 as M,QM as N,ki as O,Ro as P,gz as Q,Az as R,c_ as S,JF as T,oz as U,v4 as V,Rz as W,Dz as X,Vz as Y,bz as Z,D4 as _,Pd as a,Uo as a$,Y$ as a0,dM as a1,I4 as a2,kz as a3,Nz as a4,Oz as a5,AM as a6,Iz as a7,cz as a8,Z$ as a9,ni as aA,Ce as aB,qn as aC,sa as aD,oa as aE,Le as aF,j as aG,ri as aH,x6 as aI,Q6 as aJ,Ct as aK,uc as aL,Gd as aM,Nf as aN,Vm as aO,Hd as aP,Lm as aQ,vv as aR,Gn as aS,Om as aT,ms as aU,Se as aV,K6 as aW,kr as aX,H6 as aY,_w as aZ,ot as a_,sz as aa,mz as ab,w4 as ac,sw as ad,X$ as ae,iz as af,az as ag,Sz as ah,Cz as ai,Lz as aj,vz as ak,J$ as al,wz as am,hz as an,fz as ao,Pz as ap,dz as aq,_z as ar,yz as as,uz as at,nz as au,kP as av,dd as aw,R6 as ax,Fn as ay,Gz as az,kd as b,Cf as b$,W as b0,Uz as b1,o3 as b2,Qe as b3,q8 as b4,ge as b5,jz as b6,z8 as b7,$8 as b8,$z as b9,o8 as bA,s8 as bB,tt as bC,Kd as bD,M6 as bE,T8 as bF,b1 as bG,p8 as bH,m8 as bI,F_ as bJ,g8 as bK,y8 as bL,A6 as bM,F8 as bN,L8 as bO,Hz as bP,ey as bQ,r8 as bR,I1 as bS,b8 as bT,A8 as bU,x8 as bV,S6 as bW,pd as bX,I8 as bY,E8 as bZ,t8 as b_,hr as ba,g3 as bb,v8 as bc,c8 as bd,u8 as be,n8 as bf,D8 as bg,N8 as bh,l8 as bi,Qz as bj,zd as bk,zz as bl,b6 as bm,O6 as bn,B8 as bo,w8 as bp,P8 as bq,Xz as br,U8 as bs,Ar as bt,e8 as bu,d8 as bv,Wz as bw,Kz as bx,Jz as by,j8 as bz,K$ as c,S8 as c0,R8 as c1,q6 as c2,kf as c3,mP as c4,h8 as c5,qz as c6,k8 as c7,C8 as c8,Wd as c9,M8 as ca,Fz as cb,f8 as cc,L6 as cd,i8 as ce,a8 as cf,Zz as cg,_8 as ch,O8 as ci,Yz as cj,Pf as ck,V8 as cl,qC as cm,U$ as cn,ta as d,$$ as e,os as f,gf as g,G$ as h,yl as i,YF as j,z$ as k,q$ as l,gw as m,ls as n,tz as o,N4 as p,xz as q,U4 as r,QF as s,OS as t,T4 as u,ez as v,JM as w,rz as x,W$ as y,Ez as z};
