var IN=Object.defineProperty;var TN=(t,e,n)=>e in t?IN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var hb=(t,e,n)=>(TN(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function xN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wE={exports:{}},Ip={},vE={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=Symbol.for("react.element"),EN=Symbol.for("react.portal"),SN=Symbol.for("react.fragment"),AN=Symbol.for("react.strict_mode"),kN=Symbol.for("react.profiler"),CN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),PN=Symbol.for("react.forward_ref"),NN=Symbol.for("react.suspense"),DN=Symbol.for("react.memo"),LN=Symbol.for("react.lazy"),fb=Symbol.iterator;function MN(t){return t===null||typeof t!="object"?null:(t=fb&&t[fb]||t["@@iterator"],typeof t=="function"?t:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bE=Object.assign,IE={};function Uc(t,e,n){this.props=t,this.context=e,this.refs=IE,this.updater=n||_E}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function TE(){}TE.prototype=Uc.prototype;function A0(t,e,n){this.props=t,this.context=e,this.refs=IE,this.updater=n||_E}var k0=A0.prototype=new TE;k0.constructor=A0;bE(k0,Uc.prototype);k0.isPureReactComponent=!0;var mb=Array.isArray,xE=Object.prototype.hasOwnProperty,C0={current:null},EE={key:!0,ref:!0,__self:!0,__source:!0};function SE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xE.call(e,r)&&!EE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:uh,type:t,key:s,ref:o,props:i,_owner:C0.current}}function ON(t,e){return{$$typeof:uh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function R0(t){return typeof t=="object"&&t!==null&&t.$$typeof===uh}function VN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pb=/\/+/g;function Mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VN(""+t.key):e.toString(36)}function Wf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uh:case EN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Mg(o,0):r,mb(i)?(n="",t!=null&&(n=t.replace(pb,"$&/")+"/"),Wf(i,e,n,"",function(u){return u})):i!=null&&(R0(i)&&(i=ON(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(pb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",mb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Mg(s,a);o+=Wf(s,e,n,l,i)}else if(l=MN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Mg(s,a++),o+=Wf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hf(t,e,n){if(t==null)return t;var r=[],i=0;return Wf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},Gf={transition:null},FN={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:Gf,ReactCurrentOwner:C0};function AE(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:hf,forEach:function(t,e,n){hf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hf(t,function(){e++}),e},toArray:function(t){return hf(t,function(e){return e})||[]},only:function(t){if(!R0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Uc;pe.Fragment=SN;pe.Profiler=kN;pe.PureComponent=A0;pe.StrictMode=AN;pe.Suspense=NN;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;pe.act=AE;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)xE.call(e,l)&&!EE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:uh,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:RN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CN,_context:t},t.Consumer=t};pe.createElement=SE;pe.createFactory=function(t){var e=SE.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:PN,render:t}};pe.isValidElement=R0;pe.lazy=function(t){return{$$typeof:LN,_payload:{_status:-1,_result:t},_init:jN}};pe.memo=function(t,e){return{$$typeof:DN,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Gf.transition;Gf.transition={};try{t()}finally{Gf.transition=e}};pe.unstable_act=AE;pe.useCallback=function(t,e){return Tn.current.useCallback(t,e)};pe.useContext=function(t){return Tn.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Tn.current.useEffect(t,e)};pe.useId=function(){return Tn.current.useId()};pe.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Tn.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};pe.useRef=function(t){return Tn.current.useRef(t)};pe.useState=function(t){return Tn.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Tn.current.useTransition()};pe.version="18.3.1";vE.exports=pe;var j=vE.exports;const UN=xN(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN=j,zN=Symbol.for("react.element"),$N=Symbol.for("react.fragment"),WN=Object.prototype.hasOwnProperty,GN=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function kE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WN.call(e,r)&&!HN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zN,type:t,key:s,ref:o,props:i,_owner:GN.current}}Ip.Fragment=$N;Ip.jsx=kE;Ip.jsxs=kE;wE.exports=Ip;var d=wE.exports,$y={},CE={exports:{}},ir={},RE={exports:{}},PE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ie){var oe=Q.length;Q.push(ie);e:for(;0<oe;){var Ee=oe-1>>>1,we=Q[Ee];if(0<i(we,ie))Q[Ee]=ie,Q[oe]=we,oe=Ee;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ie=Q[0],oe=Q.pop();if(oe!==ie){Q[0]=oe;e:for(var Ee=0,we=Q.length,$e=we>>>1;Ee<$e;){var un=2*(Ee+1)-1,Vn=Q[un],dn=un+1,ct=Q[dn];if(0>i(Vn,oe))dn<we&&0>i(ct,Vn)?(Q[Ee]=ct,Q[dn]=oe,Ee=dn):(Q[Ee]=Vn,Q[un]=oe,Ee=un);else if(dn<we&&0>i(ct,oe))Q[Ee]=ct,Q[dn]=oe,Ee=dn;else break e}}return ie}function i(Q,ie){var oe=Q.sortIndex-ie.sortIndex;return oe!==0?oe:Q.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,y=!1,_=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Q){for(var ie=n(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=Q)r(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(u)}}function N(Q){if(A=!1,x(Q),!_)if(n(l)!==null)_=!0,Tr(U);else{var ie=n(u);ie!==null&&ce(N,ie.startTime-Q)}}function U(Q,ie){_=!1,A&&(A=!1,I(w),w=-1),y=!0;var oe=p;try{for(x(ie),f=n(l);f!==null&&(!(f.expirationTime>ie)||Q&&!R());){var Ee=f.callback;if(typeof Ee=="function"){f.callback=null,p=f.priorityLevel;var we=Ee(f.expirationTime<=ie);ie=t.unstable_now(),typeof we=="function"?f.callback=we:f===n(l)&&r(l),x(ie)}else r(l);f=n(l)}if(f!==null)var $e=!0;else{var un=n(u);un!==null&&ce(N,un.startTime-ie),$e=!1}return $e}finally{f=null,p=oe,y=!1}}var B=!1,T=null,w=-1,E=5,C=-1;function R(){return!(t.unstable_now()-C<E)}function M(){if(T!==null){var Q=t.unstable_now();C=Q;var ie=!0;try{ie=T(!0,Q)}finally{ie?k():(B=!1,T=null)}}else B=!1}var k;if(typeof b=="function")k=function(){b(M)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Je=Se.port2;Se.port1.onmessage=M,k=function(){Je.postMessage(null)}}else k=function(){P(M,0)};function Tr(Q){T=Q,B||(B=!0,k())}function ce(Q,ie){w=P(function(){Q(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,Tr(U))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var oe=p;p=ie;try{return Q()}finally{p=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ie){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var oe=p;p=Q;try{return ie()}finally{p=oe}},t.unstable_scheduleCallback=function(Q,ie,oe){var Ee=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ee+oe:Ee):oe=Ee,Q){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=oe+we,Q={id:h++,callback:ie,priorityLevel:Q,startTime:oe,expirationTime:we,sortIndex:-1},oe>Ee?(Q.sortIndex=oe,e(u,Q),n(l)===null&&Q===n(u)&&(A?(I(w),w=-1):A=!0,ce(N,oe-Ee))):(Q.sortIndex=we,e(l,Q),_||y||(_=!0,Tr(U))),Q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(Q){var ie=p;return function(){var oe=p;p=ie;try{return Q.apply(this,arguments)}finally{p=oe}}}})(PE);RE.exports=PE;var qN=RE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=j,tr=qN;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NE=new Set,_d={};function Ma(t,e){dc(t,e),dc(t+"Capture",e)}function dc(t,e){for(_d[t]=e,t=0;t<e.length;t++)NE.add(e[t])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wy=Object.prototype.hasOwnProperty,YN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gb={},yb={};function QN(t){return Wy.call(yb,t)?!0:Wy.call(gb,t)?!1:YN.test(t)?yb[t]=!0:(gb[t]=!0,!1)}function JN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XN(t,e,n,r){if(e===null||typeof e>"u"||JN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var P0=/[\-:]([a-z])/g;function N0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P0,N0);Yt[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P0,N0);Yt[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P0,N0);Yt[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function D0(t,e,n,r){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XN(e,n,i,r)&&(n=null),r||i===null?QN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ff=Symbol.for("react.element"),Fl=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),L0=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),LE=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),Hy=Symbol.for("react.suspense"),qy=Symbol.for("react.suspense_list"),O0=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),ME=Symbol.for("react.offscreen"),wb=Symbol.iterator;function Tu(t){return t===null||typeof t!="object"?null:(t=wb&&t[wb]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Og;function ju(t){if(Og===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Og=e&&e[1]||""}return`
`+Og+t}var Vg=!1;function jg(t,e){if(!t||Vg)return"";Vg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ju(t):""}function ZN(t){switch(t.tag){case 5:return ju(t.type);case 16:return ju("Lazy");case 13:return ju("Suspense");case 19:return ju("SuspenseList");case 0:case 2:case 15:return t=jg(t.type,!1),t;case 11:return t=jg(t.type.render,!1),t;case 1:return t=jg(t.type,!0),t;default:return""}}function Ky(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ul:return"Fragment";case Fl:return"Portal";case Gy:return"Profiler";case L0:return"StrictMode";case Hy:return"Suspense";case qy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LE:return(t.displayName||"Context")+".Consumer";case DE:return(t._context.displayName||"Context")+".Provider";case M0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O0:return e=t.displayName||null,e!==null?e:Ky(t.type)||"Memo";case Vs:e=t._payload,t=t._init;try{return Ky(t(e))}catch{}}return null}function e2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ky(e);case 8:return e===L0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t2(t){var e=OE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mf(t){t._valueTracker||(t._valueTracker=t2(t))}function VE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Em(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yy(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jE(t,e){e=e.checked,e!=null&&D0(t,"checked",e,!1)}function Qy(t,e){jE(t,e);var n=mo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jy(t,e.type,mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _b(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jy(t,e,n){(e!=="number"||Em(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fu=Array.isArray;function Jl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Xy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Fu(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mo(n)}}function FE(t,e){var n=mo(e.value),r=mo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ib(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function UE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?UE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pf,BE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pf=pf||document.createElement("div"),pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n2=["Webkit","ms","Moz","O"];Object.keys(Qu).forEach(function(t){n2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qu[e]=Qu[t]})});function zE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qu.hasOwnProperty(t)&&Qu[t]?(""+e).trim():e+"px"}function $E(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r2=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ew(t,e){if(e){if(r2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function tw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nw=null;function V0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var rw=null,Xl=null,Zl=null;function Tb(t){if(t=fh(t)){if(typeof rw!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Ap(e),rw(t.stateNode,t.type,e))}}function WE(t){Xl?Zl?Zl.push(t):Zl=[t]:Xl=t}function GE(){if(Xl){var t=Xl,e=Zl;if(Zl=Xl=null,Tb(t),e)for(t=0;t<e.length;t++)Tb(e[t])}}function HE(t,e){return t(e)}function qE(){}var Fg=!1;function KE(t,e,n){if(Fg)return t(e,n);Fg=!0;try{return HE(t,e,n)}finally{Fg=!1,(Xl!==null||Zl!==null)&&(qE(),GE())}}function Id(t,e){var n=t.stateNode;if(n===null)return null;var r=Ap(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var iw=!1;if(Hi)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){iw=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{iw=!1}function i2(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ju=!1,Sm=null,Am=!1,sw=null,s2={onError:function(t){Ju=!0,Sm=t}};function o2(t,e,n,r,i,s,o,a,l){Ju=!1,Sm=null,i2.apply(s2,arguments)}function a2(t,e,n,r,i,s,o,a,l){if(o2.apply(this,arguments),Ju){if(Ju){var u=Sm;Ju=!1,Sm=null}else throw Error(G(198));Am||(Am=!0,sw=u)}}function Oa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xb(t){if(Oa(t)!==t)throw Error(G(188))}function l2(t){var e=t.alternate;if(!e){if(e=Oa(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xb(i),t;if(s===r)return xb(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function QE(t){return t=l2(t),t!==null?JE(t):null}function JE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JE(t);if(e!==null)return e;t=t.sibling}return null}var XE=tr.unstable_scheduleCallback,Eb=tr.unstable_cancelCallback,c2=tr.unstable_shouldYield,u2=tr.unstable_requestPaint,wt=tr.unstable_now,d2=tr.unstable_getCurrentPriorityLevel,j0=tr.unstable_ImmediatePriority,ZE=tr.unstable_UserBlockingPriority,km=tr.unstable_NormalPriority,h2=tr.unstable_LowPriority,e1=tr.unstable_IdlePriority,Tp=null,fi=null;function f2(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(Tp,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:g2,m2=Math.log,p2=Math.LN2;function g2(t){return t>>>=0,t===0?32:31-(m2(t)/p2|0)|0}var gf=64,yf=4194304;function Uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Uu(a):(s&=o,s!==0&&(r=Uu(s)))}else o=n&~i,o!==0?r=Uu(o):s!==0&&(r=Uu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function y2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=y2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ow(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t1(){var t=gf;return gf<<=1,!(gf&4194240)&&(gf=64),t}function Ug(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function v2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function F0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function n1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r1,U0,i1,s1,o1,aw=!1,wf=[],eo=null,to=null,no=null,Td=new Map,xd=new Map,Us=[],_2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sb(t,e){switch(t){case"focusin":case"focusout":eo=null;break;case"dragenter":case"dragleave":to=null;break;case"mouseover":case"mouseout":no=null;break;case"pointerover":case"pointerout":Td.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xd.delete(e.pointerId)}}function Eu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fh(e),e!==null&&U0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function b2(t,e,n,r,i){switch(e){case"focusin":return eo=Eu(eo,t,e,n,r,i),!0;case"dragenter":return to=Eu(to,t,e,n,r,i),!0;case"mouseover":return no=Eu(no,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Td.set(s,Eu(Td.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xd.set(s,Eu(xd.get(s)||null,t,e,n,r,i)),!0}return!1}function a1(t){var e=ra(t.target);if(e!==null){var n=Oa(e);if(n!==null){if(e=n.tag,e===13){if(e=YE(n),e!==null){t.blockedOn=e,o1(t.priority,function(){i1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);nw=r,n.target.dispatchEvent(r),nw=null}else return e=fh(n),e!==null&&U0(e),t.blockedOn=n,!1;e.shift()}return!0}function Ab(t,e,n){Hf(t)&&n.delete(e)}function I2(){aw=!1,eo!==null&&Hf(eo)&&(eo=null),to!==null&&Hf(to)&&(to=null),no!==null&&Hf(no)&&(no=null),Td.forEach(Ab),xd.forEach(Ab)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,aw||(aw=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,I2)))}function Ed(t){function e(i){return Su(i,t)}if(0<wf.length){Su(wf[0],t);for(var n=1;n<wf.length;n++){var r=wf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(eo!==null&&Su(eo,t),to!==null&&Su(to,t),no!==null&&Su(no,t),Td.forEach(e),xd.forEach(e),n=0;n<Us.length;n++)r=Us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Us.length&&(n=Us[0],n.blockedOn===null);)a1(n),n.blockedOn===null&&Us.shift()}var ec=ns.ReactCurrentBatchConfig,Rm=!0;function T2(t,e,n,r){var i=Ne,s=ec.transition;ec.transition=null;try{Ne=1,B0(t,e,n,r)}finally{Ne=i,ec.transition=s}}function x2(t,e,n,r){var i=Ne,s=ec.transition;ec.transition=null;try{Ne=4,B0(t,e,n,r)}finally{Ne=i,ec.transition=s}}function B0(t,e,n,r){if(Rm){var i=lw(t,e,n,r);if(i===null)Qg(t,e,r,Pm,n),Sb(t,r);else if(b2(i,t,e,n,r))r.stopPropagation();else if(Sb(t,r),e&4&&-1<_2.indexOf(t)){for(;i!==null;){var s=fh(i);if(s!==null&&r1(s),s=lw(t,e,n,r),s===null&&Qg(t,e,r,Pm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Qg(t,e,r,null,n)}}var Pm=null;function lw(t,e,n,r){if(Pm=null,t=V0(r),t=ra(t),t!==null)if(e=Oa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pm=t,null}function l1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d2()){case j0:return 1;case ZE:return 4;case km:case h2:return 16;case e1:return 536870912;default:return 16}default:return 16}}var Ys=null,z0=null,qf=null;function c1(){if(qf)return qf;var t,e=z0,n=e.length,r,i="value"in Ys?Ys.value:Ys.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qf=i.slice(t,1<r?1-r:void 0)}function Kf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vf(){return!0}function kb(){return!1}function sr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vf:kb,this.isPropagationStopped=kb,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vf)},persist:function(){},isPersistent:vf}),e}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$0=sr(Bc),hh=at({},Bc,{view:0,detail:0}),E2=sr(hh),Bg,zg,Au,xp=at({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Au&&(Au&&t.type==="mousemove"?(Bg=t.screenX-Au.screenX,zg=t.screenY-Au.screenY):zg=Bg=0,Au=t),Bg)},movementY:function(t){return"movementY"in t?t.movementY:zg}}),Cb=sr(xp),S2=at({},xp,{dataTransfer:0}),A2=sr(S2),k2=at({},hh,{relatedTarget:0}),$g=sr(k2),C2=at({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),R2=sr(C2),P2=at({},Bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),N2=sr(P2),D2=at({},Bc,{data:0}),Rb=sr(D2),L2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=O2[t])?!!e[t]:!1}function W0(){return V2}var j2=at({},hh,{key:function(t){if(t.key){var e=L2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(t){return t.type==="keypress"?Kf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),F2=sr(j2),U2=at({},xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pb=sr(U2),B2=at({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),z2=sr(B2),$2=at({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),W2=sr($2),G2=at({},xp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H2=sr(G2),q2=[9,13,27,32],G0=Hi&&"CompositionEvent"in window,Xu=null;Hi&&"documentMode"in document&&(Xu=document.documentMode);var K2=Hi&&"TextEvent"in window&&!Xu,u1=Hi&&(!G0||Xu&&8<Xu&&11>=Xu),Nb=String.fromCharCode(32),Db=!1;function d1(t,e){switch(t){case"keyup":return q2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bl=!1;function Y2(t,e){switch(t){case"compositionend":return h1(e);case"keypress":return e.which!==32?null:(Db=!0,Nb);case"textInput":return t=e.data,t===Nb&&Db?null:t;default:return null}}function Q2(t,e){if(Bl)return t==="compositionend"||!G0&&d1(t,e)?(t=c1(),qf=z0=Ys=null,Bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u1&&e.locale!=="ko"?null:e.data;default:return null}}var J2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!J2[t.type]:e==="textarea"}function f1(t,e,n,r){WE(r),e=Nm(e,"onChange"),0<e.length&&(n=new $0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zu=null,Sd=null;function X2(t){x1(t,0)}function Ep(t){var e=Wl(t);if(VE(e))return t}function Z2(t,e){if(t==="change")return e}var m1=!1;if(Hi){var Wg;if(Hi){var Gg="oninput"in document;if(!Gg){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),Gg=typeof Mb.oninput=="function"}Wg=Gg}else Wg=!1;m1=Wg&&(!document.documentMode||9<document.documentMode)}function Ob(){Zu&&(Zu.detachEvent("onpropertychange",p1),Sd=Zu=null)}function p1(t){if(t.propertyName==="value"&&Ep(Sd)){var e=[];f1(e,Sd,t,V0(t)),KE(X2,e)}}function eD(t,e,n){t==="focusin"?(Ob(),Zu=e,Sd=n,Zu.attachEvent("onpropertychange",p1)):t==="focusout"&&Ob()}function tD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ep(Sd)}function nD(t,e){if(t==="click")return Ep(e)}function rD(t,e){if(t==="input"||t==="change")return Ep(e)}function iD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gr=typeof Object.is=="function"?Object.is:iD;function Ad(t,e){if(Gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Wy.call(e,i)||!Gr(t[i],e[i]))return!1}return!0}function Vb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jb(t,e){var n=Vb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vb(n)}}function g1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y1(){for(var t=window,e=Em();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Em(t.document)}return e}function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sD(t){var e=y1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g1(n.ownerDocument.documentElement,n)){if(r!==null&&H0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jb(n,s);var o=jb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oD=Hi&&"documentMode"in document&&11>=document.documentMode,zl=null,cw=null,ed=null,uw=!1;function Fb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uw||zl==null||zl!==Em(r)||(r=zl,"selectionStart"in r&&H0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ed&&Ad(ed,r)||(ed=r,r=Nm(cw,"onSelect"),0<r.length&&(e=new $0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zl)))}function _f(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $l={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},Hg={},w1={};Hi&&(w1=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function Sp(t){if(Hg[t])return Hg[t];if(!$l[t])return t;var e=$l[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w1)return Hg[t]=e[n];return t}var v1=Sp("animationend"),_1=Sp("animationiteration"),b1=Sp("animationstart"),I1=Sp("transitionend"),T1=new Map,Ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){T1.set(t,e),Ma(e,[t])}for(var qg=0;qg<Ub.length;qg++){var Kg=Ub[qg],aD=Kg.toLowerCase(),lD=Kg[0].toUpperCase()+Kg.slice(1);xo(aD,"on"+lD)}xo(v1,"onAnimationEnd");xo(_1,"onAnimationIteration");xo(b1,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(I1,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bu));function Bb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,a2(r,e,void 0,t),t.currentTarget=null}function x1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Bb(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Bb(i,a,u),s=l}}}if(Am)throw t=sw,Am=!1,sw=null,t}function He(t,e){var n=e[pw];n===void 0&&(n=e[pw]=new Set);var r=t+"__bubble";n.has(r)||(E1(e,t,2,!1),n.add(r))}function Yg(t,e,n){var r=0;e&&(r|=4),E1(n,t,r,e)}var bf="_reactListening"+Math.random().toString(36).slice(2);function kd(t){if(!t[bf]){t[bf]=!0,NE.forEach(function(n){n!=="selectionchange"&&(cD.has(n)||Yg(n,!1,t),Yg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bf]||(e[bf]=!0,Yg("selectionchange",!1,e))}}function E1(t,e,n,r){switch(l1(e)){case 1:var i=T2;break;case 4:i=x2;break;default:i=B0}n=i.bind(null,e,n,t),i=void 0,!iw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Qg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ra(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}KE(function(){var u=s,h=V0(n),f=[];e:{var p=T1.get(t);if(p!==void 0){var y=$0,_=t;switch(t){case"keypress":if(Kf(n)===0)break e;case"keydown":case"keyup":y=F2;break;case"focusin":_="focus",y=$g;break;case"focusout":_="blur",y=$g;break;case"beforeblur":case"afterblur":y=$g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Cb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=A2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=z2;break;case v1:case _1:case b1:y=R2;break;case I1:y=W2;break;case"scroll":y=E2;break;case"wheel":y=H2;break;case"copy":case"cut":case"paste":y=N2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Pb}var A=(e&4)!==0,P=!A&&t==="scroll",I=A?p!==null?p+"Capture":null:p;A=[];for(var b=u,x;b!==null;){x=b;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,I!==null&&(N=Id(b,I),N!=null&&A.push(Cd(b,N,x)))),P)break;b=b.return}0<A.length&&(p=new y(p,_,null,n,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==nw&&(_=n.relatedTarget||n.fromElement)&&(ra(_)||_[qi]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?ra(_):null,_!==null&&(P=Oa(_),_!==P||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(A=Cb,N="onMouseLeave",I="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(A=Pb,N="onPointerLeave",I="onPointerEnter",b="pointer"),P=y==null?p:Wl(y),x=_==null?p:Wl(_),p=new A(N,b+"leave",y,n,h),p.target=P,p.relatedTarget=x,N=null,ra(h)===u&&(A=new A(I,b+"enter",_,n,h),A.target=x,A.relatedTarget=P,N=A),P=N,y&&_)t:{for(A=y,I=_,b=0,x=A;x;x=Il(x))b++;for(x=0,N=I;N;N=Il(N))x++;for(;0<b-x;)A=Il(A),b--;for(;0<x-b;)I=Il(I),x--;for(;b--;){if(A===I||I!==null&&A===I.alternate)break t;A=Il(A),I=Il(I)}A=null}else A=null;y!==null&&zb(f,p,y,A,!1),_!==null&&P!==null&&zb(f,P,_,A,!0)}}e:{if(p=u?Wl(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var U=Z2;else if(Lb(p))if(m1)U=rD;else{U=tD;var B=eD}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(U=nD);if(U&&(U=U(t,u))){f1(f,U,n,h);break e}B&&B(t,p,u),t==="focusout"&&(B=p._wrapperState)&&B.controlled&&p.type==="number"&&Jy(p,"number",p.value)}switch(B=u?Wl(u):window,t){case"focusin":(Lb(B)||B.contentEditable==="true")&&(zl=B,cw=u,ed=null);break;case"focusout":ed=cw=zl=null;break;case"mousedown":uw=!0;break;case"contextmenu":case"mouseup":case"dragend":uw=!1,Fb(f,n,h);break;case"selectionchange":if(oD)break;case"keydown":case"keyup":Fb(f,n,h)}var T;if(G0)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bl?d1(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(u1&&n.locale!=="ko"&&(Bl||w!=="onCompositionStart"?w==="onCompositionEnd"&&Bl&&(T=c1()):(Ys=h,z0="value"in Ys?Ys.value:Ys.textContent,Bl=!0)),B=Nm(u,w),0<B.length&&(w=new Rb(w,t,null,n,h),f.push({event:w,listeners:B}),T?w.data=T:(T=h1(n),T!==null&&(w.data=T)))),(T=K2?Y2(t,n):Q2(t,n))&&(u=Nm(u,"onBeforeInput"),0<u.length&&(h=new Rb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}x1(f,e)})}function Cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Id(t,n),s!=null&&r.unshift(Cd(t,s,i)),s=Id(t,e),s!=null&&r.push(Cd(t,s,i))),t=t.return}return r}function Il(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zb(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Id(n,s),l!=null&&o.unshift(Cd(n,l,a))):i||(l=Id(n,s),l!=null&&o.push(Cd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uD=/\r\n?/g,dD=/\u0000|\uFFFD/g;function $b(t){return(typeof t=="string"?t:""+t).replace(uD,`
`).replace(dD,"")}function If(t,e,n){if(e=$b(e),$b(t)!==e&&n)throw Error(G(425))}function Dm(){}var dw=null,hw=null;function fw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mw=typeof setTimeout=="function"?setTimeout:void 0,hD=typeof clearTimeout=="function"?clearTimeout:void 0,Wb=typeof Promise=="function"?Promise:void 0,fD=typeof queueMicrotask=="function"?queueMicrotask:typeof Wb<"u"?function(t){return Wb.resolve(null).then(t).catch(mD)}:mw;function mD(t){setTimeout(function(){throw t})}function Jg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ed(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ed(e)}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zc=Math.random().toString(36).slice(2),li="__reactFiber$"+zc,Rd="__reactProps$"+zc,qi="__reactContainer$"+zc,pw="__reactEvents$"+zc,pD="__reactListeners$"+zc,gD="__reactHandles$"+zc;function ra(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qi]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gb(t);t!==null;){if(n=t[li])return n;t=Gb(t)}return e}t=n,n=t.parentNode}return null}function fh(t){return t=t[li]||t[qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Ap(t){return t[Rd]||null}var gw=[],Gl=-1;function Eo(t){return{current:t}}function Ke(t){0>Gl||(t.current=gw[Gl],gw[Gl]=null,Gl--)}function Be(t,e){Gl++,gw[Gl]=t.current,t.current=e}var po={},cn=Eo(po),Nn=Eo(!1),ga=po;function hc(t,e){var n=t.type.contextTypes;if(!n)return po;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dn(t){return t=t.childContextTypes,t!=null}function Lm(){Ke(Nn),Ke(cn)}function Hb(t,e,n){if(cn.current!==po)throw Error(G(168));Be(cn,e),Be(Nn,n)}function S1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,e2(t)||"Unknown",i));return at({},n,r)}function Mm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||po,ga=cn.current,Be(cn,t),Be(Nn,Nn.current),!0}function qb(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=S1(t,e,ga),r.__reactInternalMemoizedMergedChildContext=t,Ke(Nn),Ke(cn),Be(cn,t)):Ke(Nn),Be(Nn,n)}var Oi=null,kp=!1,Xg=!1;function A1(t){Oi===null?Oi=[t]:Oi.push(t)}function yD(t){kp=!0,A1(t)}function So(){if(!Xg&&Oi!==null){Xg=!0;var t=0,e=Ne;try{var n=Oi;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oi=null,kp=!1}catch(i){throw Oi!==null&&(Oi=Oi.slice(t+1)),XE(j0,So),i}finally{Ne=e,Xg=!1}}return null}var Hl=[],ql=0,Om=null,Vm=0,hr=[],fr=0,ya=null,ji=1,Fi="";function Go(t,e){Hl[ql++]=Vm,Hl[ql++]=Om,Om=t,Vm=e}function k1(t,e,n){hr[fr++]=ji,hr[fr++]=Fi,hr[fr++]=ya,ya=t;var r=ji;t=Fi;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-zr(e)+i|n<<i|r,Fi=s+t}else ji=1<<s|n<<i|r,Fi=t}function q0(t){t.return!==null&&(Go(t,1),k1(t,1,0))}function K0(t){for(;t===Om;)Om=Hl[--ql],Hl[ql]=null,Vm=Hl[--ql],Hl[ql]=null;for(;t===ya;)ya=hr[--fr],hr[fr]=null,Fi=hr[--fr],hr[fr]=null,ji=hr[--fr],hr[fr]=null}var Jn=null,Yn=null,tt=!1,Fr=null;function C1(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ya!==null?{id:ji,overflow:Fi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jn=t,Yn=null,!0):!1;default:return!1}}function yw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ww(t){if(tt){var e=Yn;if(e){var n=e;if(!Kb(t,e)){if(yw(t))throw Error(G(418));e=ro(n.nextSibling);var r=Jn;e&&Kb(t,e)?C1(r,n):(t.flags=t.flags&-4097|2,tt=!1,Jn=t)}}else{if(yw(t))throw Error(G(418));t.flags=t.flags&-4097|2,tt=!1,Jn=t}}}function Yb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function Tf(t){if(t!==Jn)return!1;if(!tt)return Yb(t),tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fw(t.type,t.memoizedProps)),e&&(e=Yn)){if(yw(t))throw R1(),Error(G(418));for(;e;)C1(t,e),e=ro(e.nextSibling)}if(Yb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Jn?ro(t.stateNode.nextSibling):null;return!0}function R1(){for(var t=Yn;t;)t=ro(t.nextSibling)}function fc(){Yn=Jn=null,tt=!1}function Y0(t){Fr===null?Fr=[t]:Fr.push(t)}var wD=ns.ReactCurrentBatchConfig;function ku(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function xf(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qb(t){var e=t._init;return e(t._payload)}function P1(t){function e(I,b){if(t){var x=I.deletions;x===null?(I.deletions=[b],I.flags|=16):x.push(b)}}function n(I,b){if(!t)return null;for(;b!==null;)e(I,b),b=b.sibling;return null}function r(I,b){for(I=new Map;b!==null;)b.key!==null?I.set(b.key,b):I.set(b.index,b),b=b.sibling;return I}function i(I,b){return I=ao(I,b),I.index=0,I.sibling=null,I}function s(I,b,x){return I.index=x,t?(x=I.alternate,x!==null?(x=x.index,x<b?(I.flags|=2,b):x):(I.flags|=2,b)):(I.flags|=1048576,b)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,b,x,N){return b===null||b.tag!==6?(b=sy(x,I.mode,N),b.return=I,b):(b=i(b,x),b.return=I,b)}function l(I,b,x,N){var U=x.type;return U===Ul?h(I,b,x.props.children,N,x.key):b!==null&&(b.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Vs&&Qb(U)===b.type)?(N=i(b,x.props),N.ref=ku(I,b,x),N.return=I,N):(N=tm(x.type,x.key,x.props,null,I.mode,N),N.ref=ku(I,b,x),N.return=I,N)}function u(I,b,x,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=oy(x,I.mode,N),b.return=I,b):(b=i(b,x.children||[]),b.return=I,b)}function h(I,b,x,N,U){return b===null||b.tag!==7?(b=ua(x,I.mode,N,U),b.return=I,b):(b=i(b,x),b.return=I,b)}function f(I,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=sy(""+b,I.mode,x),b.return=I,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ff:return x=tm(b.type,b.key,b.props,null,I.mode,x),x.ref=ku(I,null,b),x.return=I,x;case Fl:return b=oy(b,I.mode,x),b.return=I,b;case Vs:var N=b._init;return f(I,N(b._payload),x)}if(Fu(b)||Tu(b))return b=ua(b,I.mode,x,null),b.return=I,b;xf(I,b)}return null}function p(I,b,x,N){var U=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return U!==null?null:a(I,b,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ff:return x.key===U?l(I,b,x,N):null;case Fl:return x.key===U?u(I,b,x,N):null;case Vs:return U=x._init,p(I,b,U(x._payload),N)}if(Fu(x)||Tu(x))return U!==null?null:h(I,b,x,N,null);xf(I,x)}return null}function y(I,b,x,N,U){if(typeof N=="string"&&N!==""||typeof N=="number")return I=I.get(x)||null,a(b,I,""+N,U);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ff:return I=I.get(N.key===null?x:N.key)||null,l(b,I,N,U);case Fl:return I=I.get(N.key===null?x:N.key)||null,u(b,I,N,U);case Vs:var B=N._init;return y(I,b,x,B(N._payload),U)}if(Fu(N)||Tu(N))return I=I.get(x)||null,h(b,I,N,U,null);xf(b,N)}return null}function _(I,b,x,N){for(var U=null,B=null,T=b,w=b=0,E=null;T!==null&&w<x.length;w++){T.index>w?(E=T,T=null):E=T.sibling;var C=p(I,T,x[w],N);if(C===null){T===null&&(T=E);break}t&&T&&C.alternate===null&&e(I,T),b=s(C,b,w),B===null?U=C:B.sibling=C,B=C,T=E}if(w===x.length)return n(I,T),tt&&Go(I,w),U;if(T===null){for(;w<x.length;w++)T=f(I,x[w],N),T!==null&&(b=s(T,b,w),B===null?U=T:B.sibling=T,B=T);return tt&&Go(I,w),U}for(T=r(I,T);w<x.length;w++)E=y(T,I,w,x[w],N),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?w:E.key),b=s(E,b,w),B===null?U=E:B.sibling=E,B=E);return t&&T.forEach(function(R){return e(I,R)}),tt&&Go(I,w),U}function A(I,b,x,N){var U=Tu(x);if(typeof U!="function")throw Error(G(150));if(x=U.call(x),x==null)throw Error(G(151));for(var B=U=null,T=b,w=b=0,E=null,C=x.next();T!==null&&!C.done;w++,C=x.next()){T.index>w?(E=T,T=null):E=T.sibling;var R=p(I,T,C.value,N);if(R===null){T===null&&(T=E);break}t&&T&&R.alternate===null&&e(I,T),b=s(R,b,w),B===null?U=R:B.sibling=R,B=R,T=E}if(C.done)return n(I,T),tt&&Go(I,w),U;if(T===null){for(;!C.done;w++,C=x.next())C=f(I,C.value,N),C!==null&&(b=s(C,b,w),B===null?U=C:B.sibling=C,B=C);return tt&&Go(I,w),U}for(T=r(I,T);!C.done;w++,C=x.next())C=y(T,I,w,C.value,N),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?w:C.key),b=s(C,b,w),B===null?U=C:B.sibling=C,B=C);return t&&T.forEach(function(M){return e(I,M)}),tt&&Go(I,w),U}function P(I,b,x,N){if(typeof x=="object"&&x!==null&&x.type===Ul&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ff:e:{for(var U=x.key,B=b;B!==null;){if(B.key===U){if(U=x.type,U===Ul){if(B.tag===7){n(I,B.sibling),b=i(B,x.props.children),b.return=I,I=b;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Vs&&Qb(U)===B.type){n(I,B.sibling),b=i(B,x.props),b.ref=ku(I,B,x),b.return=I,I=b;break e}n(I,B);break}else e(I,B);B=B.sibling}x.type===Ul?(b=ua(x.props.children,I.mode,N,x.key),b.return=I,I=b):(N=tm(x.type,x.key,x.props,null,I.mode,N),N.ref=ku(I,b,x),N.return=I,I=N)}return o(I);case Fl:e:{for(B=x.key;b!==null;){if(b.key===B)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(I,b.sibling),b=i(b,x.children||[]),b.return=I,I=b;break e}else{n(I,b);break}else e(I,b);b=b.sibling}b=oy(x,I.mode,N),b.return=I,I=b}return o(I);case Vs:return B=x._init,P(I,b,B(x._payload),N)}if(Fu(x))return _(I,b,x,N);if(Tu(x))return A(I,b,x,N);xf(I,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(I,b.sibling),b=i(b,x),b.return=I,I=b):(n(I,b),b=sy(x,I.mode,N),b.return=I,I=b),o(I)):n(I,b)}return P}var mc=P1(!0),N1=P1(!1),jm=Eo(null),Fm=null,Kl=null,Q0=null;function J0(){Q0=Kl=Fm=null}function X0(t){var e=jm.current;Ke(jm),t._currentValue=e}function vw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tc(t,e){Fm=t,Q0=Kl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function yr(t){var e=t._currentValue;if(Q0!==t)if(t={context:t,memoizedValue:e,next:null},Kl===null){if(Fm===null)throw Error(G(308));Kl=t,Fm.dependencies={lanes:0,firstContext:t}}else Kl=Kl.next=t;return e}var ia=null;function Z0(t){ia===null?ia=[t]:ia.push(t)}function D1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Z0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ki(t,r)}function Ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var js=!1;function ev(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ki(t,n)}return i=r.interleaved,i===null?(e.next=e,Z0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ki(t,n)}function Yf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}function Jb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Um(t,e,n,r){var i=t.updateQueue;js=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,A=a;switch(p=e,y=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){f=_.call(y,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,p=typeof _=="function"?_.call(y,f,p):_,p==null)break e;f=at({},f,p);break e;case 2:js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);va|=o,t.lanes=o,t.memoizedState=f}}function Xb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var mh={},mi=Eo(mh),Pd=Eo(mh),Nd=Eo(mh);function sa(t){if(t===mh)throw Error(G(174));return t}function tv(t,e){switch(Be(Nd,e),Be(Pd,t),Be(mi,mh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zy(e,t)}Ke(mi),Be(mi,e)}function pc(){Ke(mi),Ke(Pd),Ke(Nd)}function M1(t){sa(Nd.current);var e=sa(mi.current),n=Zy(e,t.type);e!==n&&(Be(Pd,t),Be(mi,n))}function nv(t){Pd.current===t&&(Ke(mi),Ke(Pd))}var st=Eo(0);function Bm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zg=[];function rv(){for(var t=0;t<Zg.length;t++)Zg[t]._workInProgressVersionPrimary=null;Zg.length=0}var Qf=ns.ReactCurrentDispatcher,ey=ns.ReactCurrentBatchConfig,wa=0,ot=null,At=null,Ot=null,zm=!1,td=!1,Dd=0,vD=0;function Zt(){throw Error(G(321))}function iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gr(t[n],e[n]))return!1;return!0}function sv(t,e,n,r,i,s){if(wa=s,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qf.current=t===null||t.memoizedState===null?TD:xD,t=n(r,i),td){s=0;do{if(td=!1,Dd=0,25<=s)throw Error(G(301));s+=1,Ot=At=null,e.updateQueue=null,Qf.current=ED,t=n(r,i)}while(td)}if(Qf.current=$m,e=At!==null&&At.next!==null,wa=0,Ot=At=ot=null,zm=!1,e)throw Error(G(300));return t}function ov(){var t=Dd!==0;return Dd=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t,Ot}function wr(){if(At===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Ot===null?ot.memoizedState:Ot.next;if(e!==null)Ot=e,At=t;else{if(t===null)throw Error(G(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ot===null?ot.memoizedState=Ot=t:Ot=Ot.next=t}return Ot}function Ld(t,e){return typeof e=="function"?e(t):e}function ty(t){var e=wr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=At,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((wa&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ot.lanes|=h,va|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Gr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ot.lanes|=s,va|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ny(t){var e=wr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Gr(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function O1(){}function V1(t,e){var n=ot,r=wr(),i=e(),s=!Gr(r.memoizedState,i);if(s&&(r.memoizedState=i,kn=!0),r=r.queue,av(U1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,Md(9,F1.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(G(349));wa&30||j1(n,e,i)}return i}function j1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function F1(t,e,n,r){e.value=n,e.getSnapshot=r,B1(e)&&z1(t)}function U1(t,e,n){return n(function(){B1(e)&&z1(t)})}function B1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gr(t,n)}catch{return!0}}function z1(t){var e=Ki(t,1);e!==null&&$r(e,t,1,-1)}function Zb(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:t},e.queue=t,t=t.dispatch=ID.bind(null,ot,t),[e.memoizedState,t]}function Md(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $1(){return wr().memoizedState}function Jf(t,e,n,r){var i=ii();ot.flags|=t,i.memoizedState=Md(1|e,n,void 0,r===void 0?null:r)}function Cp(t,e,n,r){var i=wr();r=r===void 0?null:r;var s=void 0;if(At!==null){var o=At.memoizedState;if(s=o.destroy,r!==null&&iv(r,o.deps)){i.memoizedState=Md(e,n,s,r);return}}ot.flags|=t,i.memoizedState=Md(1|e,n,s,r)}function eI(t,e){return Jf(8390656,8,t,e)}function av(t,e){return Cp(2048,8,t,e)}function W1(t,e){return Cp(4,2,t,e)}function G1(t,e){return Cp(4,4,t,e)}function H1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q1(t,e,n){return n=n!=null?n.concat([t]):null,Cp(4,4,H1.bind(null,e,t),n)}function lv(){}function K1(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Y1(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q1(t,e,n){return wa&21?(Gr(n,e)||(n=t1(),ot.lanes|=n,va|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function _D(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=ey.transition;ey.transition={};try{t(!1),e()}finally{Ne=n,ey.transition=r}}function J1(){return wr().memoizedState}function bD(t,e,n){var r=oo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},X1(t))Z1(e,n);else if(n=D1(t,e,n,r),n!==null){var i=_n();$r(n,t,r,i),eS(n,e,r)}}function ID(t,e,n){var r=oo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(X1(t))Z1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gr(a,o)){var l=e.interleaved;l===null?(i.next=i,Z0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=D1(t,e,i,r),n!==null&&(i=_n(),$r(n,t,r,i),eS(n,e,r))}}function X1(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function Z1(t,e){td=zm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}var $m={readContext:yr,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useInsertionEffect:Zt,useLayoutEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useMutableSource:Zt,useSyncExternalStore:Zt,useId:Zt,unstable_isNewReconciler:!1},TD={readContext:yr,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:yr,useEffect:eI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jf(4194308,4,H1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jf(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bD.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:Zb,useDebugValue:lv,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=Zb(!1),e=t[0];return t=_D.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ot,i=ii();if(tt){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),jt===null)throw Error(G(349));wa&30||j1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,eI(U1.bind(null,r,s,t),[t]),r.flags|=2048,Md(9,F1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ii(),e=jt.identifierPrefix;if(tt){var n=Fi,r=ji;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xD={readContext:yr,useCallback:K1,useContext:yr,useEffect:av,useImperativeHandle:q1,useInsertionEffect:W1,useLayoutEffect:G1,useMemo:Y1,useReducer:ty,useRef:$1,useState:function(){return ty(Ld)},useDebugValue:lv,useDeferredValue:function(t){var e=wr();return Q1(e,At.memoizedState,t)},useTransition:function(){var t=ty(Ld)[0],e=wr().memoizedState;return[t,e]},useMutableSource:O1,useSyncExternalStore:V1,useId:J1,unstable_isNewReconciler:!1},ED={readContext:yr,useCallback:K1,useContext:yr,useEffect:av,useImperativeHandle:q1,useInsertionEffect:W1,useLayoutEffect:G1,useMemo:Y1,useReducer:ny,useRef:$1,useState:function(){return ny(Ld)},useDebugValue:lv,useDeferredValue:function(t){var e=wr();return At===null?e.memoizedState=t:Q1(e,At.memoizedState,t)},useTransition:function(){var t=ny(Ld)[0],e=wr().memoizedState;return[t,e]},useMutableSource:O1,useSyncExternalStore:V1,useId:J1,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _w(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rp={isMounted:function(t){return(t=t._reactInternals)?Oa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),i=oo(t),s=Wi(r,i);s.payload=e,n!=null&&(s.callback=n),e=io(t,s,i),e!==null&&($r(e,t,i,r),Yf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),i=oo(t),s=Wi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=io(t,s,i),e!==null&&($r(e,t,i,r),Yf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=oo(t),i=Wi(n,r);i.tag=2,e!=null&&(i.callback=e),e=io(t,i,r),e!==null&&($r(e,t,r,n),Yf(e,t,r))}};function tI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ad(n,r)||!Ad(i,s):!0}function tS(t,e,n){var r=!1,i=po,s=e.contextType;return typeof s=="object"&&s!==null?s=yr(s):(i=Dn(e)?ga:cn.current,r=e.contextTypes,s=(r=r!=null)?hc(t,i):po),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rp.enqueueReplaceState(e,e.state,null)}function bw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ev(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yr(s):(s=Dn(e)?ga:cn.current,i.context=hc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(_w(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rp.enqueueReplaceState(i,i.state,null),Um(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gc(t,e){try{var n="",r=e;do n+=ZN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ry(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Iw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SD=typeof WeakMap=="function"?WeakMap:Map;function nS(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gm||(Gm=!0,Nw=r),Iw(t,e)},n}function rS(t,e,n){n=Wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iw(t,e),typeof r!="function"&&(so===null?so=new Set([this]):so.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UD.bind(null,t,e,n),e.then(t,t))}function iI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,io(n,e,1))),n.lanes|=1),t)}var AD=ns.ReactCurrentOwner,kn=!1;function wn(t,e,n,r){e.child=t===null?N1(e,null,n,r):mc(e,t.child,n,r)}function oI(t,e,n,r,i){n=n.render;var s=e.ref;return tc(e,i),r=sv(t,e,n,r,s,i),n=ov(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(tt&&n&&q0(e),e.flags|=1,wn(t,e,r,i),e.child)}function aI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!gv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,iS(t,e,s,r,i)):(t=tm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ad,n(o,r)&&t.ref===e.ref)return Yi(t,e,i)}return e.flags|=1,t=ao(s,r),t.ref=e.ref,t.return=e,e.child=t}function iS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ad(s,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Yi(t,e,i)}return Tw(t,e,n,r,i)}function sS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ql,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(Ql,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Be(Ql,Gn),Gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Be(Ql,Gn),Gn|=r;return wn(t,e,i,n),e.child}function oS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tw(t,e,n,r,i){var s=Dn(n)?ga:cn.current;return s=hc(e,s),tc(e,i),n=sv(t,e,n,r,s,i),r=ov(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(tt&&r&&q0(e),e.flags|=1,wn(t,e,n,i),e.child)}function lI(t,e,n,r,i){if(Dn(n)){var s=!0;Mm(e)}else s=!1;if(tc(e,i),e.stateNode===null)Xf(t,e),tS(e,n,r),bw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=yr(u):(u=Dn(n)?ga:cn.current,u=hc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nI(e,o,r,u),js=!1;var p=e.memoizedState;o.state=p,Um(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Nn.current||js?(typeof h=="function"&&(_w(e,n,h,r),l=e.memoizedState),(a=js||tI(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,L1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Lr(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yr(l):(l=Dn(n)?ga:cn.current,l=hc(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&nI(e,o,r,l),js=!1,p=e.memoizedState,o.state=p,Um(e,r,o,i);var _=e.memoizedState;a!==f||p!==_||Nn.current||js?(typeof y=="function"&&(_w(e,n,y,r),_=e.memoizedState),(u=js||tI(e,n,u,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return xw(t,e,n,r,s,i)}function xw(t,e,n,r,i,s){oS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qb(e,n,!1),Yi(t,e,s);r=e.stateNode,AD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mc(e,t.child,null,s),e.child=mc(e,null,a,s)):wn(t,e,a,s),e.memoizedState=r.state,i&&qb(e,n,!0),e.child}function aS(t){var e=t.stateNode;e.pendingContext?Hb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hb(t,e.context,!1),tv(t,e.containerInfo)}function cI(t,e,n,r,i){return fc(),Y0(i),e.flags|=256,wn(t,e,n,r),e.child}var Ew={dehydrated:null,treeContext:null,retryLane:0};function Sw(t){return{baseLanes:t,cachePool:null,transitions:null}}function lS(t,e,n){var r=e.pendingProps,i=st.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Be(st,i&1),t===null)return ww(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dp(o,r,0,null),t=ua(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sw(n),e.memoizedState=Ew,t):cv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ao(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ao(a,s):(s=ua(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ew,r}return s=t.child,t=s.sibling,r=ao(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cv(t,e){return e=Dp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ef(t,e,n,r){return r!==null&&Y0(r),mc(e,t.child,null,n),t=cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ry(Error(G(422))),Ef(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dp({mode:"visible",children:r.children},i,0,null),s=ua(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mc(e,t.child,null,o),e.child.memoizedState=Sw(o),e.memoizedState=Ew,s);if(!(e.mode&1))return Ef(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=ry(s,r,void 0),Ef(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=jt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ki(t,i),$r(r,t,i,-1))}return pv(),r=ry(Error(G(421))),Ef(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yn=ro(i.nextSibling),Jn=e,tt=!0,Fr=null,t!==null&&(hr[fr++]=ji,hr[fr++]=Fi,hr[fr++]=ya,ji=t.id,Fi=t.overflow,ya=e),e=cv(e,r.children),e.flags|=4096,e)}function uI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vw(t.return,e,n)}function iy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function cS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wn(t,e,r.children,n),r=st.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uI(t,n,e);else if(t.tag===19)uI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(st,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),iy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}iy(e,!0,n,null,s);break;case"together":iy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),va|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CD(t,e,n){switch(e.tag){case 3:aS(e),fc();break;case 5:M1(e);break;case 1:Dn(e.type)&&Mm(e);break;case 4:tv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(jm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?lS(t,e,n):(Be(st,st.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);Be(st,st.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(st,st.current),r)break;return null;case 22:case 23:return e.lanes=0,sS(t,e,n)}return Yi(t,e,n)}var uS,Aw,dS,hS;uS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aw=function(){};dS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sa(mi.current);var s=null;switch(n){case"input":i=Yy(t,i),r=Yy(t,r),s=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),s=[];break;case"textarea":i=Xy(t,i),r=Xy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dm)}ew(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&He("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};hS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cu(t,e){if(!tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RD(t,e,n){var r=e.pendingProps;switch(K0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Dn(e.type)&&Lm(),en(e),null;case 3:return r=e.stateNode,pc(),Ke(Nn),Ke(cn),rv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(Mw(Fr),Fr=null))),Aw(t,e),en(e),null;case 5:nv(e);var i=sa(Nd.current);if(n=e.type,t!==null&&e.stateNode!=null)dS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return en(e),null}if(t=sa(mi.current),Tf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[li]=e,r[Rd]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<Bu.length;i++)He(Bu[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":vb(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":bb(r,s),He("invalid",r)}ew(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&If(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&If(r.textContent,a,t),i=["children",""+a]):_d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":mf(r),_b(r,s,!0);break;case"textarea":mf(r),Ib(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Dm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=UE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[li]=e,t[Rd]=r,uS(t,e,!1,!1),e.stateNode=t;e:{switch(o=tw(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bu.length;i++)He(Bu[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":vb(t,r),i=Yy(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),He("invalid",t);break;case"textarea":bb(t,r),i=Xy(t,r),He("invalid",t);break;default:i=r}ew(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$E(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bd(t,l):typeof l=="number"&&bd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_d.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&D0(t,s,l,o))}switch(n){case"input":mf(t),_b(t,r,!1);break;case"textarea":mf(t),Ib(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Jl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Jl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)hS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=sa(Nd.current),sa(mi.current),Tf(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(s=r.nodeValue!==n)&&(t=Jn,t!==null))switch(t.tag){case 3:If(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&If(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return en(e),null;case 13:if(Ke(st),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(tt&&Yn!==null&&e.mode&1&&!(e.flags&128))R1(),fc(),e.flags|=98560,s=!1;else if(s=Tf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[li]=e}else fc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),s=!1}else Fr!==null&&(Mw(Fr),Fr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?kt===0&&(kt=3):pv())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return pc(),Aw(t,e),t===null&&kd(e.stateNode.containerInfo),en(e),null;case 10:return X0(e.type._context),en(e),null;case 17:return Dn(e.type)&&Lm(),en(e),null;case 19:if(Ke(st),s=e.memoizedState,s===null)return en(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cu(s,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bm(t),o!==null){for(e.flags|=128,Cu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(st,st.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>yc&&(e.flags|=128,r=!0,Cu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!tt)return en(e),null}else 2*wt()-s.renderingStartTime>yc&&n!==1073741824&&(e.flags|=128,r=!0,Cu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=st.current,Be(st,r?n&1|2:n&1),e):(en(e),null);case 22:case 23:return mv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function PD(t,e){switch(K0(e),e.tag){case 1:return Dn(e.type)&&Lm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pc(),Ke(Nn),Ke(cn),rv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nv(e),null;case 13:if(Ke(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));fc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(st),null;case 4:return pc(),null;case 10:return X0(e.type._context),null;case 22:case 23:return mv(),null;case 24:return null;default:return null}}var Sf=!1,sn=!1,ND=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Yl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ut(t,e,r)}else n.current=null}function kw(t,e,n){try{n()}catch(r){ut(t,e,r)}}var dI=!1;function DD(t,e){if(dw=Rm,t=y1(),H0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(hw={focusedElem:t,selectionRange:n},Rm=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,P=_.memoizedState,I=e.stateNode,b=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:Lr(e.type,A),P);I.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){ut(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=dI,dI=!1,_}function nd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&kw(e,n,s)}i=i.next}while(i!==r)}}function Pp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fS(t){var e=t.alternate;e!==null&&(t.alternate=null,fS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[Rd],delete e[pw],delete e[pD],delete e[gD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mS(t){return t.tag===5||t.tag===3||t.tag===4}function hI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dm));else if(r!==4&&(t=t.child,t!==null))for(Rw(t,e,n),t=t.sibling;t!==null;)Rw(t,e,n),t=t.sibling}function Pw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pw(t,e,n),t=t.sibling;t!==null;)Pw(t,e,n),t=t.sibling}var Gt=null,Vr=!1;function Rs(t,e,n){for(n=n.child;n!==null;)pS(t,e,n),n=n.sibling}function pS(t,e,n){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(Tp,n)}catch{}switch(n.tag){case 5:sn||Yl(n,e);case 6:var r=Gt,i=Vr;Gt=null,Rs(t,e,n),Gt=r,Vr=i,Gt!==null&&(Vr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(Vr?(t=Gt,n=n.stateNode,t.nodeType===8?Jg(t.parentNode,n):t.nodeType===1&&Jg(t,n),Ed(t)):Jg(Gt,n.stateNode));break;case 4:r=Gt,i=Vr,Gt=n.stateNode.containerInfo,Vr=!0,Rs(t,e,n),Gt=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kw(n,e,o),i=i.next}while(i!==r)}Rs(t,e,n);break;case 1:if(!sn&&(Yl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ut(n,e,a)}Rs(t,e,n);break;case 21:Rs(t,e,n);break;case 22:n.mode&1?(sn=(r=sn)||n.memoizedState!==null,Rs(t,e,n),sn=r):Rs(t,e,n);break;default:Rs(t,e,n)}}function fI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ND),e.forEach(function(r){var i=zD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,Vr=!1;break e;case 3:Gt=a.stateNode.containerInfo,Vr=!0;break e;case 4:Gt=a.stateNode.containerInfo,Vr=!0;break e}a=a.return}if(Gt===null)throw Error(G(160));pS(s,o,i),Gt=null,Vr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ut(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gS(e,t),e=e.sibling}function gS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pr(e,t),ri(t),r&4){try{nd(3,t,t.return),Pp(3,t)}catch(A){ut(t,t.return,A)}try{nd(5,t,t.return)}catch(A){ut(t,t.return,A)}}break;case 1:Pr(e,t),ri(t),r&512&&n!==null&&Yl(n,n.return);break;case 5:if(Pr(e,t),ri(t),r&512&&n!==null&&Yl(n,n.return),t.flags&32){var i=t.stateNode;try{bd(i,"")}catch(A){ut(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jE(i,s),tw(a,o);var u=tw(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?$E(i,f):h==="dangerouslySetInnerHTML"?BE(i,f):h==="children"?bd(i,f):D0(i,h,f,u)}switch(a){case"input":Qy(i,s);break;case"textarea":FE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Jl(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Jl(i,!!s.multiple,s.defaultValue,!0):Jl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rd]=s}catch(A){ut(t,t.return,A)}}break;case 6:if(Pr(e,t),ri(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){ut(t,t.return,A)}}break;case 3:if(Pr(e,t),ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(A){ut(t,t.return,A)}break;case 4:Pr(e,t),ri(t);break;case 13:Pr(e,t),ri(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hv=wt())),r&4&&fI(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(sn=(u=sn)||h,Pr(e,t),sn=u):Pr(e,t),ri(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(p=ee,y=p.child,p.tag){case 0:case 11:case 14:case 15:nd(4,p,p.return);break;case 1:Yl(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){ut(r,n,A)}}break;case 5:Yl(p,p.return);break;case 22:if(p.memoizedState!==null){pI(f);continue}}y!==null?(y.return=p,ee=y):pI(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zE("display",o))}catch(A){ut(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(A){ut(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pr(e,t),ri(t),r&4&&fI(t);break;case 21:break;default:Pr(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mS(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bd(i,""),r.flags&=-33);var s=hI(t);Pw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hI(t);Rw(t,a,o);break;default:throw Error(G(161))}}catch(l){ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LD(t,e,n){ee=t,yS(t)}function yS(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||sn;a=Sf;var u=sn;if(Sf=o,(sn=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?gI(i):l!==null?(l.return=o,ee=l):gI(i);for(;s!==null;)ee=s,yS(s),s=s.sibling;ee=i,Sf=a,sn=u}mI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):mI(t)}}function mI(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:sn||Pp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Xb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ed(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}sn||e.flags&512&&Cw(e)}catch(p){ut(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function pI(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function gI(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pp(4,e)}catch(l){ut(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ut(e,i,l)}}var s=e.return;try{Cw(e)}catch(l){ut(e,s,l)}break;case 5:var o=e.return;try{Cw(e)}catch(l){ut(e,o,l)}}}catch(l){ut(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var MD=Math.ceil,Wm=ns.ReactCurrentDispatcher,uv=ns.ReactCurrentOwner,gr=ns.ReactCurrentBatchConfig,xe=0,jt=null,xt=null,Kt=0,Gn=0,Ql=Eo(0),kt=0,Od=null,va=0,Np=0,dv=0,rd=null,An=null,hv=0,yc=1/0,Mi=null,Gm=!1,Nw=null,so=null,Af=!1,Qs=null,Hm=0,id=0,Dw=null,Zf=-1,em=0;function _n(){return xe&6?wt():Zf!==-1?Zf:Zf=wt()}function oo(t){return t.mode&1?xe&2&&Kt!==0?Kt&-Kt:wD.transition!==null?(em===0&&(em=t1()),em):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:l1(t.type)),t):1}function $r(t,e,n,r){if(50<id)throw id=0,Dw=null,Error(G(185));dh(t,n,r),(!(xe&2)||t!==jt)&&(t===jt&&(!(xe&2)&&(Np|=n),kt===4&&Bs(t,Kt)),Ln(t,r),n===1&&xe===0&&!(e.mode&1)&&(yc=wt()+500,kp&&So()))}function Ln(t,e){var n=t.callbackNode;w2(t,e);var r=Cm(t,t===jt?Kt:0);if(r===0)n!==null&&Eb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Eb(n),e===1)t.tag===0?yD(yI.bind(null,t)):A1(yI.bind(null,t)),fD(function(){!(xe&6)&&So()}),n=null;else{switch(n1(r)){case 1:n=j0;break;case 4:n=ZE;break;case 16:n=km;break;case 536870912:n=e1;break;default:n=km}n=ES(n,wS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wS(t,e){if(Zf=-1,em=0,xe&6)throw Error(G(327));var n=t.callbackNode;if(nc()&&t.callbackNode!==n)return null;var r=Cm(t,t===jt?Kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qm(t,r);else{e=r;var i=xe;xe|=2;var s=_S();(jt!==t||Kt!==e)&&(Mi=null,yc=wt()+500,ca(t,e));do try{jD();break}catch(a){vS(t,a)}while(1);J0(),Wm.current=s,xe=i,xt!==null?e=0:(jt=null,Kt=0,e=kt)}if(e!==0){if(e===2&&(i=ow(t),i!==0&&(r=i,e=Lw(t,i))),e===1)throw n=Od,ca(t,0),Bs(t,r),Ln(t,wt()),n;if(e===6)Bs(t,r);else{if(i=t.current.alternate,!(r&30)&&!OD(i)&&(e=qm(t,r),e===2&&(s=ow(t),s!==0&&(r=s,e=Lw(t,s))),e===1))throw n=Od,ca(t,0),Bs(t,r),Ln(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Ho(t,An,Mi);break;case 3:if(Bs(t,r),(r&130023424)===r&&(e=hv+500-wt(),10<e)){if(Cm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mw(Ho.bind(null,t,An,Mi),e);break}Ho(t,An,Mi);break;case 4:if(Bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MD(r/1960))-r,10<r){t.timeoutHandle=mw(Ho.bind(null,t,An,Mi),r);break}Ho(t,An,Mi);break;case 5:Ho(t,An,Mi);break;default:throw Error(G(329))}}}return Ln(t,wt()),t.callbackNode===n?wS.bind(null,t):null}function Lw(t,e){var n=rd;return t.current.memoizedState.isDehydrated&&(ca(t,e).flags|=256),t=qm(t,e),t!==2&&(e=An,An=n,e!==null&&Mw(e)),t}function Mw(t){An===null?An=t:An.push.apply(An,t)}function OD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bs(t,e){for(e&=~dv,e&=~Np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function yI(t){if(xe&6)throw Error(G(327));nc();var e=Cm(t,0);if(!(e&1))return Ln(t,wt()),null;var n=qm(t,e);if(t.tag!==0&&n===2){var r=ow(t);r!==0&&(e=r,n=Lw(t,r))}if(n===1)throw n=Od,ca(t,0),Bs(t,e),Ln(t,wt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ho(t,An,Mi),Ln(t,wt()),null}function fv(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(yc=wt()+500,kp&&So())}}function _a(t){Qs!==null&&Qs.tag===0&&!(xe&6)&&nc();var e=xe;xe|=1;var n=gr.transition,r=Ne;try{if(gr.transition=null,Ne=1,t)return t()}finally{Ne=r,gr.transition=n,xe=e,!(xe&6)&&So()}}function mv(){Gn=Ql.current,Ke(Ql)}function ca(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hD(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(K0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lm();break;case 3:pc(),Ke(Nn),Ke(cn),rv();break;case 5:nv(r);break;case 4:pc();break;case 13:Ke(st);break;case 19:Ke(st);break;case 10:X0(r.type._context);break;case 22:case 23:mv()}n=n.return}if(jt=t,xt=t=ao(t.current,null),Kt=Gn=e,kt=0,Od=null,dv=Np=va=0,An=rd=null,ia!==null){for(e=0;e<ia.length;e++)if(n=ia[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ia=null}return t}function vS(t,e){do{var n=xt;try{if(J0(),Qf.current=$m,zm){for(var r=ot.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zm=!1}if(wa=0,Ot=At=ot=null,td=!1,Dd=0,uv.current=null,n===null||n.return===null){kt=1,Od=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=iI(o);if(y!==null){y.flags&=-257,sI(y,o,a,s,e),y.mode&1&&rI(s,u,e),e=y,l=u;var _=e.updateQueue;if(_===null){var A=new Set;A.add(l),e.updateQueue=A}else _.add(l);break e}else{if(!(e&1)){rI(s,u,e),pv();break e}l=Error(G(426))}}else if(tt&&a.mode&1){var P=iI(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),sI(P,o,a,s,e),Y0(gc(l,a));break e}}s=l=gc(l,a),kt!==4&&(kt=2),rd===null?rd=[s]:rd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=nS(s,l,e);Jb(s,I);break e;case 1:a=l;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(so===null||!so.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=rS(s,a,e);Jb(s,N);break e}}s=s.return}while(s!==null)}IS(n)}catch(U){e=U,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(1)}function _S(){var t=Wm.current;return Wm.current=$m,t===null?$m:t}function pv(){(kt===0||kt===3||kt===2)&&(kt=4),jt===null||!(va&268435455)&&!(Np&268435455)||Bs(jt,Kt)}function qm(t,e){var n=xe;xe|=2;var r=_S();(jt!==t||Kt!==e)&&(Mi=null,ca(t,e));do try{VD();break}catch(i){vS(t,i)}while(1);if(J0(),xe=n,Wm.current=r,xt!==null)throw Error(G(261));return jt=null,Kt=0,kt}function VD(){for(;xt!==null;)bS(xt)}function jD(){for(;xt!==null&&!c2();)bS(xt)}function bS(t){var e=xS(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?IS(t):xt=e,uv.current=null}function IS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PD(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,xt=null;return}}else if(n=RD(n,e,Gn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);kt===0&&(kt=5)}function Ho(t,e,n){var r=Ne,i=gr.transition;try{gr.transition=null,Ne=1,FD(t,e,n,r)}finally{gr.transition=i,Ne=r}return null}function FD(t,e,n,r){do nc();while(Qs!==null);if(xe&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(v2(t,s),t===jt&&(xt=jt=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Af||(Af=!0,ES(km,function(){return nc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gr.transition,gr.transition=null;var o=Ne;Ne=1;var a=xe;xe|=4,uv.current=null,DD(t,n),gS(n,t),sD(hw),Rm=!!dw,hw=dw=null,t.current=n,LD(n),u2(),xe=a,Ne=o,gr.transition=s}else t.current=n;if(Af&&(Af=!1,Qs=t,Hm=i),s=t.pendingLanes,s===0&&(so=null),f2(n.stateNode),Ln(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gm)throw Gm=!1,t=Nw,Nw=null,t;return Hm&1&&t.tag!==0&&nc(),s=t.pendingLanes,s&1?t===Dw?id++:(id=0,Dw=t):id=0,So(),null}function nc(){if(Qs!==null){var t=n1(Hm),e=gr.transition,n=Ne;try{if(gr.transition=null,Ne=16>t?16:t,Qs===null)var r=!1;else{if(t=Qs,Qs=null,Hm=0,xe&6)throw Error(G(331));var i=xe;for(xe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:nd(8,h,s)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var p=h.sibling,y=h.return;if(fS(h),h===u){ee=null;break}if(p!==null){p.return=y,ee=p;break}ee=y}}}var _=s.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nd(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,ee=I;break e}ee=s.return}}var b=t.current;for(ee=b;ee!==null;){o=ee;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ee=x;else e:for(o=b;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pp(9,a)}}catch(U){ut(a,a.return,U)}if(a===o){ee=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,ee=N;break e}ee=a.return}}if(xe=i,So(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(Tp,t)}catch{}r=!0}return r}finally{Ne=n,gr.transition=e}}return!1}function wI(t,e,n){e=gc(n,e),e=nS(t,e,1),t=io(t,e,1),e=_n(),t!==null&&(dh(t,1,e),Ln(t,e))}function ut(t,e,n){if(t.tag===3)wI(t,t,n);else for(;e!==null;){if(e.tag===3){wI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(so===null||!so.has(r))){t=gc(n,t),t=rS(e,t,1),e=io(e,t,1),t=_n(),e!==null&&(dh(e,1,t),Ln(e,t));break}}e=e.return}}function UD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(Kt&n)===n&&(kt===4||kt===3&&(Kt&130023424)===Kt&&500>wt()-hv?ca(t,0):dv|=n),Ln(t,e)}function TS(t,e){e===0&&(t.mode&1?(e=yf,yf<<=1,!(yf&130023424)&&(yf=4194304)):e=1);var n=_n();t=Ki(t,e),t!==null&&(dh(t,e,n),Ln(t,n))}function BD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),TS(t,n)}function zD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),TS(t,n)}var xS;xS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,CD(t,e,n);kn=!!(t.flags&131072)}else kn=!1,tt&&e.flags&1048576&&k1(e,Vm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xf(t,e),t=e.pendingProps;var i=hc(e,cn.current);tc(e,n),i=sv(null,e,r,t,i,n);var s=ov();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dn(r)?(s=!0,Mm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ev(e),i.updater=Rp,e.stateNode=i,i._reactInternals=e,bw(e,r,t,n),e=xw(null,e,r,!0,s,n)):(e.tag=0,tt&&s&&q0(e),wn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=WD(r),t=Lr(r,t),i){case 0:e=Tw(null,e,r,t,n);break e;case 1:e=lI(null,e,r,t,n);break e;case 11:e=oI(null,e,r,t,n);break e;case 14:e=aI(null,e,r,Lr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Tw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),lI(t,e,r,i,n);case 3:e:{if(aS(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,L1(t,e),Um(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gc(Error(G(423)),e),e=cI(t,e,r,n,i);break e}else if(r!==i){i=gc(Error(G(424)),e),e=cI(t,e,r,n,i);break e}else for(Yn=ro(e.stateNode.containerInfo.firstChild),Jn=e,tt=!0,Fr=null,n=N1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fc(),r===i){e=Yi(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return M1(e),t===null&&ww(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,fw(r,i)?o=null:s!==null&&fw(r,s)&&(e.flags|=32),oS(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&ww(e),null;case 13:return lS(t,e,n);case 4:return tv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mc(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),oI(t,e,r,i,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Be(jm,r._currentValue),r._currentValue=o,s!==null)if(Gr(s.value,o)){if(s.children===i.children&&!Nn.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),vw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tc(e,n),i=yr(i),r=r(i),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,i=Lr(r,e.pendingProps),i=Lr(r.type,i),aI(t,e,r,i,n);case 15:return iS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Xf(t,e),e.tag=1,Dn(r)?(t=!0,Mm(e)):t=!1,tc(e,n),tS(e,r,i),bw(e,r,i,n),xw(null,e,r,!0,t,n);case 19:return cS(t,e,n);case 22:return sS(t,e,n)}throw Error(G(156,e.tag))};function ES(t,e){return XE(t,e)}function $D(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new $D(t,e,n,r)}function gv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WD(t){if(typeof t=="function")return gv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===M0)return 11;if(t===O0)return 14}return 2}function ao(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")gv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ul:return ua(n.children,i,s,e);case L0:o=8,i|=8;break;case Gy:return t=mr(12,n,e,i|2),t.elementType=Gy,t.lanes=s,t;case Hy:return t=mr(13,n,e,i),t.elementType=Hy,t.lanes=s,t;case qy:return t=mr(19,n,e,i),t.elementType=qy,t.lanes=s,t;case ME:return Dp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case DE:o=10;break e;case LE:o=9;break e;case M0:o=11;break e;case O0:o=14;break e;case Vs:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ua(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function Dp(t,e,n,r){return t=mr(22,t,r,e),t.elementType=ME,t.lanes=n,t.stateNode={isHidden:!1},t}function sy(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function oy(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ug(0),this.expirationTimes=Ug(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ug(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yv(t,e,n,r,i,s,o,a,l){return t=new GD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ev(s),t}function HD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SS(t){if(!t)return po;t=t._reactInternals;e:{if(Oa(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Dn(n))return S1(t,n,e)}return e}function AS(t,e,n,r,i,s,o,a,l){return t=yv(n,r,!0,t,i,s,o,a,l),t.context=SS(null),n=t.current,r=_n(),i=oo(n),s=Wi(r,i),s.callback=e??null,io(n,s,i),t.current.lanes=i,dh(t,i,r),Ln(t,r),t}function Lp(t,e,n,r){var i=e.current,s=_n(),o=oo(i);return n=SS(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=io(i,e,o),t!==null&&($r(t,i,o,s),Yf(t,i,o)),o}function Km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wv(t,e){vI(t,e),(t=t.alternate)&&vI(t,e)}function qD(){return null}var kS=typeof reportError=="function"?reportError:function(t){console.error(t)};function vv(t){this._internalRoot=t}Mp.prototype.render=vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Lp(t,e,null,null)};Mp.prototype.unmount=vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_a(function(){Lp(null,t,null,null)}),e[qi]=null}};function Mp(t){this._internalRoot=t}Mp.prototype.unstable_scheduleHydration=function(t){if(t){var e=s1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Us.length&&e!==0&&e<Us[n].priority;n++);Us.splice(n,0,t),n===0&&a1(t)}};function _v(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _I(){}function KD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Km(o);s.call(u)}}var o=AS(e,r,t,0,null,!1,!1,"",_I);return t._reactRootContainer=o,t[qi]=o.current,kd(t.nodeType===8?t.parentNode:t),_a(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Km(l);a.call(u)}}var l=yv(t,0,!1,null,null,!1,!1,"",_I);return t._reactRootContainer=l,t[qi]=l.current,kd(t.nodeType===8?t.parentNode:t),_a(function(){Lp(e,l,n,r)}),l}function Vp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Km(o);a.call(l)}}Lp(e,o,t,i)}else o=KD(n,e,t,i,r);return Km(o)}r1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uu(e.pendingLanes);n!==0&&(F0(e,n|1),Ln(e,wt()),!(xe&6)&&(yc=wt()+500,So()))}break;case 13:_a(function(){var r=Ki(t,1);if(r!==null){var i=_n();$r(r,t,1,i)}}),wv(t,1)}};U0=function(t){if(t.tag===13){var e=Ki(t,134217728);if(e!==null){var n=_n();$r(e,t,134217728,n)}wv(t,134217728)}};i1=function(t){if(t.tag===13){var e=oo(t),n=Ki(t,e);if(n!==null){var r=_n();$r(n,t,e,r)}wv(t,e)}};s1=function(){return Ne};o1=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};rw=function(t,e,n){switch(e){case"input":if(Qy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ap(r);if(!i)throw Error(G(90));VE(r),Qy(r,i)}}}break;case"textarea":FE(t,n);break;case"select":e=n.value,e!=null&&Jl(t,!!n.multiple,e,!1)}};HE=fv;qE=_a;var YD={usingClientEntryPoint:!1,Events:[fh,Wl,Ap,WE,GE,fv]},Ru={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QD={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||qD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{Tp=kf.inject(QD),fi=kf}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YD;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_v(e))throw Error(G(200));return HD(t,e,null,n)};ir.createRoot=function(t,e){if(!_v(t))throw Error(G(299));var n=!1,r="",i=kS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yv(t,1,!1,null,null,n,!1,r,i),t[qi]=e.current,kd(t.nodeType===8?t.parentNode:t),new vv(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=QE(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return _a(t)};ir.hydrate=function(t,e,n){if(!Op(e))throw Error(G(200));return Vp(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!_v(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=kS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=AS(e,null,t,1,n??null,i,!1,s,o),t[qi]=e.current,kd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Mp(e)};ir.render=function(t,e,n){if(!Op(e))throw Error(G(200));return Vp(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!Op(t))throw Error(G(40));return t._reactRootContainer?(_a(function(){Vp(null,null,t,!1,function(){t._reactRootContainer=null,t[qi]=null})}),!0):!1};ir.unstable_batchedUpdates=fv;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Op(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Vp(t,e,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function CS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CS)}catch(t){console.error(t)}}CS(),CE.exports=ir;var jp=CE.exports,bI=jp;$y.createRoot=bI.createRoot,$y.hydrateRoot=bI.hydrateRoot;const JD="modulepreload",XD=function(t){return"/"+t},II={},Nr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=XD(s),s in II)return;II[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":JD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var ZD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tL=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>j.createElement("svg",{ref:u,...ZD,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${eL(t)}`,...l},[...e.map(([h,f])=>j.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ue=tL;const nL=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ow=ue("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),rL=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),si=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Vw=ue("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),TI=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),xI=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vd=ue("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),EI=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Lt=ue("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),SI=ue("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),AI=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),$n=ue("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),iL=ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),kI=ue("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),pn=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),RS=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),sL=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),ay=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),qo=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),oL=ue("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),aL=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),CI=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),lL=ue("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),RI=ue("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Ni=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Tl=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Di=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ly=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),xl=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),PI=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),cy=ue("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),Dr=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),uy=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),cL=ue("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),NI=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),nm=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Li=ue("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),nn=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uL=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new hL;const p=s<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fL=function(t){const e=PS(t);return NS.encodeByteArray(e,!0)},Ym=function(t){return fL(t).replace(/\./g,"")},DS=function(t){try{return NS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=()=>LS().__FIREBASE_DEFAULTS__,pL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},Fp=()=>{try{return uL()||mL()||pL()||gL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MS=t=>{var e,n;return(n=(e=Fp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OS=t=>{const e=MS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},VS=()=>{var t;return(t=Fp())==null?void 0:t.config},jS=t=>{var e;return(e=Fp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Up(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Ym(JSON.stringify(n)),Ym(JSON.stringify(o)),a].join(".")}const sd={};function wL(){const t={prod:[],emulator:[]};for(const e of Object.keys(sd))sd[e]?t.emulator.push(e):t.prod.push(e);return t}function vL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DI=!1;function bv(t,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||sd[t]===e||sd[t]||DI)return;sd[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=wL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{DI=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=vL(r),y=n("text"),_=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),P=document.getElementById(A)||document.createElement("a"),I=n("preprendIcon"),b=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(P,A);const N=u();l(b,I),x.append(b,_,P,N),document.body.appendChild(x)}s?(_.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _L(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function US(){var e;const t=(e=Fp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TL(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zS(){return!US()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $S(){return!US()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Iv(){try{return typeof indexedDB=="object"}catch{return!1}}function WS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function xL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EL,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new or(i,a,r)}}function SL(t,e){return t.replace(AL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AL=/\{\$([^}]+)}/g;function kL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(LI(s)&&LI(o)){if(!vr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function LI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $u(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function CL(t,e){const n=new RL(t,e);return n.subscribe.bind(n)}class RL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dy),i.error===void 0&&(i.error=dy),i.complete===void 0&&(i.complete=dy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=1e3,DL=2,LL=4*60*60*1e3,ML=.5;function MI(t,e=NL,n=DL){const r=e*Math.pow(n,t),i=Math.round(ML*r*(Math.random()-.5)*2);return Math.min(LL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class nr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jL(e))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ko){return this.instances.has(e)}getOptions(e=Ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ko){return this.component?this.component.multipleInstances?e:Ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VL(t){return t===Ko?void 0:t}function jL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const UL={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},BL=ge.INFO,zL={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},$L=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ph{constructor(e){this.name=e,this._logLevel=BL,this._logHandler=$L,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const WL=(t,e)=>e.some(n=>t instanceof n);let OI,VI;function GL(){return OI||(OI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HL(){return VI||(VI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GS=new WeakMap,jw=new WeakMap,HS=new WeakMap,hy=new WeakMap,Tv=new WeakMap;function qL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(lo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&GS.set(n,t)}).catch(()=>{}),Tv.set(e,t),e}function KL(t){if(jw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});jw.set(t,e)}let Fw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YL(t){Fw=t(Fw)}function QL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fy(this),e,...n);return HS.set(r,e.sort?e.sort():[e]),lo(r)}:HL().includes(t)?function(...e){return t.apply(fy(this),e),lo(GS.get(this))}:function(...e){return lo(t.apply(fy(this),e))}}function JL(t){return typeof t=="function"?QL(t):(t instanceof IDBTransaction&&KL(t),WL(t,GL())?new Proxy(t,Fw):t)}function lo(t){if(t instanceof IDBRequest)return qL(t);if(hy.has(t))return hy.get(t);const e=JL(t);return e!==t&&(hy.set(t,e),Tv.set(e,t)),e}const fy=t=>Tv.get(t);function qS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=lo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(lo(o.result),l.oldVersion,l.newVersion,lo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const XL=["get","getKey","getAll","getAllKeys","count"],ZL=["put","add","delete","clear"],my=new Map;function jI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(my.get(e))return my.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return my.set(e,s),s}YL(t=>({...t,get:(e,n,r)=>jI(e,n)||t.get(e,n,r),has:(e,n)=>!!jI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uw="@firebase/app",FI="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new ph("@firebase/app"),nM="@firebase/app-compat",rM="@firebase/analytics-compat",iM="@firebase/analytics",sM="@firebase/app-check-compat",oM="@firebase/app-check",aM="@firebase/auth",lM="@firebase/auth-compat",cM="@firebase/database",uM="@firebase/data-connect",dM="@firebase/database-compat",hM="@firebase/functions",fM="@firebase/functions-compat",mM="@firebase/installations",pM="@firebase/installations-compat",gM="@firebase/messaging",yM="@firebase/messaging-compat",wM="@firebase/performance",vM="@firebase/performance-compat",_M="@firebase/remote-config",bM="@firebase/remote-config-compat",IM="@firebase/storage",TM="@firebase/storage-compat",xM="@firebase/firestore",EM="@firebase/ai",SM="@firebase/firestore-compat",AM="firebase",kM="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="[DEFAULT]",CM={[Uw]:"fire-core",[nM]:"fire-core-compat",[iM]:"fire-analytics",[rM]:"fire-analytics-compat",[oM]:"fire-app-check",[sM]:"fire-app-check-compat",[aM]:"fire-auth",[lM]:"fire-auth-compat",[cM]:"fire-rtdb",[uM]:"fire-data-connect",[dM]:"fire-rtdb-compat",[hM]:"fire-fn",[fM]:"fire-fn-compat",[mM]:"fire-iid",[pM]:"fire-iid-compat",[gM]:"fire-fcm",[yM]:"fire-fcm-compat",[wM]:"fire-perf",[vM]:"fire-perf-compat",[_M]:"fire-rc",[bM]:"fire-rc-compat",[IM]:"fire-gcs",[TM]:"fire-gcs-compat",[xM]:"fire-fst",[SM]:"fire-fst-compat",[EM]:"fire-vertex","fire-js":"fire-js",[AM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map,RM=new Map,Bw=new Map;function UI(t,e){try{t.container.addComponent(e)}catch(n){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _r(t){const e=t.name;if(Bw.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;Bw.set(e,t);for(const n of Jm.values())UI(n,t);for(const n of RM.values())UI(n,t);return!0}function Hr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function PM(t,e,n=Qm){Hr(t,e).clearInstance(n)}function nt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new Va("app","Firebase",NM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=kM;function KS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw co.create("bad-app-name",{appName:String(i)});if(n||(n=VS()),!n)throw co.create("no-options");const s=Jm.get(i);if(s){if(vr(n,s.options)&&vr(r,s.config))return s;throw co.create("duplicate-app",{appName:i})}const o=new FL(i);for(const l of Bw.values())o.addComponent(l);const a=new DM(n,r,o);return Jm.set(i,a),a}function gh(t=Qm){const e=Jm.get(t);if(!e&&t===Qm&&VS())return KS();if(!e)throw co.create("no-app",{appName:t});return e}function on(t,e,n){let r=CM[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(o.join(" "));return}_r(new nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="firebase-heartbeat-database",MM=1,jd="firebase-heartbeat-store";let py=null;function YS(){return py||(py=qS(LM,MM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jd)}catch(n){console.warn(n)}}}}).catch(t=>{throw co.create("idb-open",{originalErrorMessage:t.message})})),py}async function OM(t){try{const n=(await YS()).transaction(jd),r=await n.objectStore(jd).get(QS(t));return await n.done,r}catch(e){if(e instanceof or)Qi.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qi.warn(n.message)}}}async function BI(t,e){try{const r=(await YS()).transaction(jd,"readwrite");await r.objectStore(jd).put(e,QS(t)),await r.done}catch(n){if(n instanceof or)Qi.warn(n.message);else{const r=co.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qi.warn(r.message)}}}function QS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=1024,jM=30;class FM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>jM){const o=zM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zI(),{heartbeatsToSend:r,unsentEntries:i}=UM(this._heartbeatsCache.heartbeats),s=Ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Qi.warn(n),""}}}function zI(){return new Date().toISOString().substring(0,10)}function UM(t,e=VM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$I(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$I(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Iv()?WS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $I(t){return Ym(JSON.stringify({version:2,heartbeats:t})).length}function zM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){_r(new nr("platform-logger",e=>new eM(e),"PRIVATE")),_r(new nr("heartbeat",e=>new FM(e),"PRIVATE")),on(Uw,FI,t),on(Uw,FI,"esm2020"),on("fire-js","")}$M("");var WM="firebase",GM="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on(WM,GM,"app");const JS="@firebase/installations",xv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=1e4,ZS=`w:${xv}`,eA="FIS_v2",HM="https://firebaseinstallations.googleapis.com/v1",qM=60*60*1e3,KM="installations",YM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ba=new Va(KM,YM,QM);function tA(t){return t instanceof or&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA({projectId:t}){return`${HM}/projects/${t}/installations`}function rA(t){return{token:t.token,requestStatus:2,expiresIn:XM(t.expiresIn),creationTime:Date.now()}}async function iA(t,e){const r=(await e.json()).error;return ba.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function sA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function JM(t,{refreshToken:e}){const n=sA(t);return n.append("Authorization",ZM(e)),n}async function oA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function XM(t){return Number(t.replace("s","000"))}function ZM(t){return`${eA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=nA(t),i=sA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:eA,appId:t.appId,sdkVersion:ZS},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await oA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:rA(u.authToken)}}else throw await iA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=/^[cdef][\w-]{21}$/,zw="";function rO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=iO(t);return nO.test(n)?n:zw}catch{return zw}}function iO(t){return tO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Map;function cA(t,e){const n=Bp(t);uA(n,e),sO(n,e)}function uA(t,e){const n=lA.get(t);if(n)for(const r of n)r(e)}function sO(t,e){const n=oO();n&&n.postMessage({key:t,fid:e}),aO()}let oa=null;function oO(){return!oa&&"BroadcastChannel"in self&&(oa=new BroadcastChannel("[Firebase] FID Change"),oa.onmessage=t=>{uA(t.data.key,t.data.fid)}),oa}function aO(){lA.size===0&&oa&&(oa.close(),oa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firebase-installations-database",cO=1,Ia="firebase-installations-store";let gy=null;function Ev(){return gy||(gy=qS(lO,cO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ia)}}})),gy}async function Xm(t,e){const n=Bp(t),i=(await Ev()).transaction(Ia,"readwrite"),s=i.objectStore(Ia),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&cA(t,e.fid),e}async function dA(t){const e=Bp(t),r=(await Ev()).transaction(Ia,"readwrite");await r.objectStore(Ia).delete(e),await r.done}async function zp(t,e){const n=Bp(t),i=(await Ev()).transaction(Ia,"readwrite"),s=i.objectStore(Ia),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&cA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(t){let e;const n=await zp(t.appConfig,r=>{const i=uO(r),s=dO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===zw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uO(t){const e=t||{fid:rO(),registrationStatus:0};return hA(e)}function dO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ba.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=hO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fO(t)}:{installationEntry:e}}async function hO(t,e){try{const n=await eO(t,e);return Xm(t.appConfig,n)}catch(n){throw tA(n)&&n.customData.serverCode===409?await dA(t.appConfig):await Xm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function fO(t){let e=await WI(t.appConfig);for(;e.registrationStatus===1;)await aA(100),e=await WI(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Sv(t);return r||n}return e}function WI(t){return zp(t,e=>{if(!e)throw ba.create("installation-not-found");return hA(e)})}function hA(t){return mO(t)?{fid:t.fid,registrationStatus:0}:t}function mO(t){return t.registrationStatus===1&&t.registrationTime+XS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO({appConfig:t,heartbeatServiceProvider:e},n){const r=gO(t,n),i=JM(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:ZS,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await oA(()=>fetch(r,a));if(l.ok){const u=await l.json();return rA(u)}else throw await iA("Generate Auth Token",l)}function gO(t,{fid:e}){return`${nA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Av(t,e=!1){let n;const r=await zp(t.appConfig,s=>{if(!fA(s))throw ba.create("not-registered");const o=s.authToken;if(!e&&vO(o))return s;if(o.requestStatus===1)return n=yO(t,e),s;{if(!navigator.onLine)throw ba.create("app-offline");const a=bO(s);return n=wO(t,a),a}});return n?await n:r.authToken}async function yO(t,e){let n=await GI(t.appConfig);for(;n.authToken.requestStatus===1;)await aA(100),n=await GI(t.appConfig);const r=n.authToken;return r.requestStatus===0?Av(t,e):r}function GI(t){return zp(t,e=>{if(!fA(e))throw ba.create("not-registered");const n=e.authToken;return IO(n)?{...e,authToken:{requestStatus:0}}:e})}async function wO(t,e){try{const n=await pO(t,e),r={...e,authToken:n};return await Xm(t.appConfig,r),n}catch(n){if(tA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await dA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Xm(t.appConfig,r)}throw n}}function fA(t){return t!==void 0&&t.registrationStatus===2}function vO(t){return t.requestStatus===2&&!_O(t)}function _O(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+qM}function bO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function IO(t){return t.requestStatus===1&&t.requestTime+XS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Sv(e);return r?r.catch(console.error):Av(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e=!1){const n=t;return await EO(n),(await Av(n,e)).token}async function EO(t){const{registrationPromise:e}=await Sv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){if(!t||!t.options)throw yy("App Configuration");if(!t.name)throw yy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yy(t){return ba.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="installations",AO="installations-internal",kO=t=>{const e=t.getProvider("app").getImmediate(),n=SO(e),r=Hr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CO=t=>{const e=t.getProvider("app").getImmediate(),n=Hr(e,mA).getImmediate();return{getId:()=>TO(n),getToken:i=>xO(n,i)}};function RO(){_r(new nr(mA,kO,"PUBLIC")),_r(new nr(AO,CO,"PRIVATE"))}RO();on(JS,xv);on(JS,xv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="analytics",PO="firebase_id",NO="origin",DO=60*1e3,LO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new ph("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xn=new Va("analytics","Analytics",MO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){if(!t.startsWith(kv)){const e=Xn.create("invalid-gtag-resource",{gtagURL:t});return Mn.warn(e.message),""}return t}function pA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jO(t,e){const n=VO("firebase-js-sdk-policy",{createScriptURL:OO}),r=document.createElement("script"),i=`${kv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function UO(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await pA(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Mn.error(a)}t("config",i,s)}async function BO(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await pA(n);for(const l of o){const u=a.find(f=>f.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Mn.error(s)}}function zO(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await BO(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await UO(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Mn.error(a)}}return i}function $O(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=zO(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function WO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(kv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=30,HO=1e3;class qO{constructor(e={},n=HO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const gA=new qO;function KO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function YO(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:KO(n)},i=LO.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function QO(t,e=gA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Xn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Xn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ZO;return setTimeout(async()=>{a.abort()},n!==void 0?n:DO),yA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function yA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=gA){var a;const{appId:s,measurementId:o}=t;try{await JO(r,e)}catch(l){if(o)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await YO(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!XO(u)){if(i.deleteThrottleMetadata(s),o)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?MI(n,i.intervalMillis,GO):MI(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,f),Mn.debug(`Calling attemptFetch again in ${h} millis`),yA(t,f,r,i)}}function JO(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XO(t){if(!(t instanceof or)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function eV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(){if(Iv())try{await WS()}catch(t){return Mn.warn(Xn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Mn.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function nV(t,e,n,r,i,s,o){const a=QO(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Mn.error(p)),e.push(a);const l=tV().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);WO(s)||jO(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[NO]="firebase",f.update=!0,h!=null&&(f[PO]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.app=e}_delete(){return delete od[this.app.options.appId],Promise.resolve()}}let od={},HI=[];const qI={};let wy="dataLayer",iV="gtag",KI,wA,YI=!1;function sV(){const t=[];if(BS()&&t.push("This is a browser extension environment."),xL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Xn.create("invalid-analytics-context",{errorInfo:e});Mn.warn(n.message)}}function oV(t,e,n){sV();const r=t.options.appId;if(!r)throw Xn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xn.create("no-api-key");if(od[r]!=null)throw Xn.create("already-exists",{id:r});if(!YI){FO(wy);const{wrappedGtag:s,gtagCore:o}=$O(od,HI,qI,wy,iV);wA=s,KI=o,YI=!0}return od[r]=nV(t,HI,qI,e,KI,wy,n),new rV(t)}function aV(t=gh()){t=Z(t);const e=Hr(t,Zm);return e.isInitialized()?e.getImmediate():lV(t)}function lV(t,e={}){const n=Hr(t,Zm);if(n.isInitialized()){const i=n.getImmediate();if(vr(e,n.getOptions()))return i;throw Xn.create("already-initialized")}return n.initialize({options:e})}function vA(t,e,n,r){t=Z(t),eV(wA,od[t.app.options.appId],e,n,r).catch(i=>Mn.error(i))}const QI="@firebase/analytics",JI="0.10.18";function cV(){_r(new nr(Zm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return oV(r,i,n)},"PUBLIC")),_r(new nr("analytics-internal",t,"PRIVATE")),on(QI,JI),on(QI,JI,"esm2020");function t(e){try{const n=e.getProvider(Zm).getImmediate();return{logEvent:(r,i,s)=>vA(n,r,i,s)}}catch(n){throw Xn.create("interop-component-reg-failed",{reason:n})}}}cV();var XI="@firebase/ai",ZI="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="AI",eT="us-central1",tT={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.backendType=e}}class $p extends bA{constructor(){super(_A.GOOGLE_AI)}}class Cv extends bA{constructor(e=eT){super(_A.VERTEX_AI),e?this.location=e:this.location=eT}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uV=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof Cv?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends or{constructor(e,n,r){const i=wc,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,pr),Object.setPrototypeOf(this,pr.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){if(t instanceof $p)return`${wc}/googleai`;if(t instanceof Cv)return`${wc}/vertexai/${t.location}`;throw new pr(Ui.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function hV(t){const e=t.split("/");if(e[0]!==wc)throw new pr(Ui.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new pr(Ui.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new Cv(r);case"googleai":return new $p;default:throw new pr(Ui.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new ph("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nT;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(nT||(nT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t=gh(),e){t=Z(t);const n=Hr(t,wc),r=(e==null?void 0:e.backend)??new $p,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=dV(r),o=n.getImmediate({identifier:s});return o.options=i,o}var Xo;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(Xo||(Xo={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return Ps.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===tT.ONLY_IN_CLOUD)return Ps.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===tT.ONLY_ON_DEVICE){if(n===Xo.UNAVAILABLE)throw new pr(Ui.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===Xo.DOWNLOADABLE||n===Xo.DOWNLOADING)&&(Ps.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==Xo.AVAILABLE?(Ps.debug(`On-device inference unavailable because availability is "${n}".`),!1):Mr.isOnDeviceRequest(e)?!0:(Ps.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Mr.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return Mr.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Mr.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return Mr.toStreamResponse(i)}async countTokens(e){throw new pr(Ui.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return Ps.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return Ps.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&Mr.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return Ps.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===Xo.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(Mr.toLanguageModelMessageContent));return{role:Mr.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new pr(Ui.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new pr(Ui.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}Mr.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function mV(t,e,n){if(typeof e<"u"&&t)return new Mr(e.LanguageModel,t,n)}function pV(t,{instanceIdentifier:e}){if(!e)throw new pr(Ui.ERROR,"AIService instance identifier is undefined.");const n=hV(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new uV(r,n,i,s,mV)}function gV(){_r(new nr(wc,pV,"PUBLIC").setMultipleInstances(!0)),on(XI,ZI),on(XI,ZI,"esm2020")}gV();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8={PHONE:"phone",TOTP:"totp"},N8={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},D8={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},L8={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},M8={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function IA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O8=yV,wV=IA,TA=new Va("auth","Firebase",IA()),V8={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new ph("@firebase/auth");function vV(t,...e){ep.logLevel<=ge.WARN&&ep.warn(`Auth (${ja}): ${t}`,...e)}function rm(t,...e){ep.logLevel<=ge.ERROR&&ep.error(`Auth (${ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw Pv(t,...e)}function bn(t,...e){return Pv(t,...e)}function Rv(t,e,n){const r={...wV(),[e]:n};return new Va("auth","Firebase",r).create(e,{appName:t.name})}function Ft(t){return Rv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&On(t,"argument-error"),Rv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TA.create(t,...e)}function H(t,e,...n){if(!t)throw Pv(e,...n)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rm(e),new Error(e)}function Ji(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Nv(){return rT()==="http:"||rT()==="https:"}function rT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Nv()||BS()||"connection"in navigator)?navigator.onLine:!0}function bV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ji(n>e,"Short delay should be less than long delay!"),this.isMobile=_L()||IL()}get(){return _V()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){Ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xV=new yh(3e4,6e4);function Ye(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qe(t,e,n,r,i={}){return EA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=$c({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return bL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&rs(t.emulatorConfig.host)&&(u.credentials="include"),xA.fetch()(await SA(t,t.config.apiHost,n,a),u)})}async function EA(t,e,n){t._canInitEmulator=!1;const r={...IV,...e};try{const i=new SV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rv(t,h,u);On(t,h)}}catch(i){if(i instanceof or)throw i;On(t,"network-request-failed",{message:String(i)})}}async function is(t,e,n,r,i={}){const s=await Qe(t,e,n,r,i);return"mfaPendingCredential"in s&&On(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function SA(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Dv(t.config,i):`${t.config.apiScheme}://${i}`;return TV.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function EV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),xV.get())})}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t){return t!==void 0&&t.getResponse!==void 0}function sT(t){return t!==void 0&&t.enterprise!==void 0}class AA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AV(t){return(await Qe(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function kA(t,e){return Qe(t,"GET","/v2/recaptchaConfig",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e){return Qe(t,"POST","/v1/accounts:delete",e)}async function CV(t,e){return Qe(t,"POST","/v1/accounts:update",e)}async function tp(t,e){return Qe(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t,e=!1){return Z(t).getIdToken(e)}async function RV(t,e=!1){const n=Z(t),r=await n.getIdToken(e),i=Wp(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ad(vy(i.auth_time)),issuedAtTime:ad(vy(i.iat)),expirationTime:ad(vy(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vy(t){return Number(t)*1e3}function Wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rm("JWT malformed, contained fewer than 3 sections"),null;try{const i=DS(n);return i?JSON.parse(i):(rm("Failed to decode base64 JWT payload"),null)}catch(i){return rm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function oT(t){const e=Wp(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof or&&PV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Xi(t,tp(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?CA(i.providerUserInfo):[],o=LV(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $w(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function DV(t){const e=Z(t);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function CA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e){const n=await EA(t,{},async()=>{const r=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await SA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&rs(t.emulatorConfig.host)&&(l.credentials="include"),xA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OV(t,e){return Qe(t,"POST","/v2/accounts:revokeToken",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=oT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await MV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rc;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rc,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new NV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $w(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xi(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RV(this,e)}reload(){return DV(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nt(this.auth.app))return Promise.reject(Ft(this.auth));const e=await this.getIdToken();return await Xi(this,kV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:_,stsTokenManager:A}=n;H(f&&A,e,"internal-error");const P=rc.fromJSON(this.name,A);H(typeof f=="string",e,"internal-error"),Ns(r,e.name),Ns(i,e.name),H(typeof p=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),Ns(s,e.name),Ns(o,e.name),Ns(a,e.name),Ns(l,e.name),Ns(u,e.name),Ns(h,e.name);const I=new Ur({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(I.providerData=_.map(b=>({...b}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new rc;i.updateFromServerResponse(n);const s=new Ur({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ud(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];H(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?CA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new rc;a.updateFromIdToken(r);const l=new Ur({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $w(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;function Bi(t){Ji(t instanceof Function,"Expected a class definition");let e=aT.get(t);return e?(Ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}RA.type="NONE";const lT=RA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e,n){return`firebase:${t}:${e}:${n}`}class ic{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=im(this.userKey,i.apiKey,s),this.fullPersistenceKey=im("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await tp(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ic(Bi(lT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Bi(lT);const o=im(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await tp(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Ur._fromGetAccountInfoResponse(e,p,h)}else f=Ur._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ic(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ic(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OA(e))return"Blackberry";if(VA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||DA(e))&&!e.includes("edge/"))return"Chrome";if(MA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PA(t=Ct()){return/firefox\//i.test(t)}function NA(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DA(t=Ct()){return/crios\//i.test(t)}function LA(t=Ct()){return/iemobile/i.test(t)}function MA(t=Ct()){return/android/i.test(t)}function OA(t=Ct()){return/blackberry/i.test(t)}function VA(t=Ct()){return/webos/i.test(t)}function Lv(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VV(t=Ct()){var e;return Lv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function jV(){return TL()&&document.documentMode===10}function jA(t=Ct()){return Lv(t)||MA(t)||VA(t)||OA(t)||/windows phone/i.test(t)||LA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e=[]){let n;switch(t){case"Browser":n=cT(Ct());break;case"Worker":n=`${cT(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e={}){return Qe(t,"GET","/v2/passwordPolicy",Ye(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=6;class zV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uT(this),this.idTokenSubscription=new uT(this),this.beforeStateQueue=new FV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ic.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tp(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(nt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nt(this.app))return Promise.reject(Ft(this));const n=e?Z(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nt(this.app)?Promise.reject(Ft(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nt(this.app)?Promise.reject(Ft(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UV(this),n=new zV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bi(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await ic.create(this,[Bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&vV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ft(t){return Z(t)}class uT{constructor(e){this.auth=e,this.observer=null,this.addObserver=CL(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WV(t){wh=t}function Mv(t){return wh.loadJS(t)}function GV(){return wh.recaptchaV2Script}function HV(){return wh.recaptchaEnterpriseScript}function qV(){return wh.gapiScript}function UA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=500,YV=6e4,Cf=1e12;class QV{constructor(e){this.auth=e,this.counter=Cf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new ZV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Cf;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Cf;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Cf;return(r=this._widgets.get(n))==null||r.execute(),""}}class JV{constructor(){this.enterprise=new XV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ej(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},YV)},KV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ej(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const tj="recaptcha-enterprise",ld="NO_RECAPTCHA";class BA{constructor(e){this.type=tj,this.auth=ft(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{kA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new AA(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;sT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(ld)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JV().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&sT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=HV();l.length!==0&&(l+=a),Mv(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Pu(t,e,n,r=!1,i=!1){const s=new BA(t);let o;if(i)o=ld;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function uo(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Pu(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Pu(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Pu(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Pu(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await Pu(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function zA(t){const e=ft(t),n=await kA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new AA(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new BA(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t,e){const n=Hr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(vr(s,e??{}))return i;On(i,"already-initialized")}return n.initialize({options:e})}function rj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ij(t,e,n){const r=ft(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=$A(e),{host:o,port:a}=sj(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(vr(u,r.config.emulator)&&vr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,rs(o)?(Up(`${s}//${o}${l}`),bv("Auth",!0)):i||oj()}function $A(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sj(t){const e=$A(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dT(o)}}}function dT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e){return Qe(t,"POST","/v1/accounts:resetPassword",Ye(t,e))}async function aj(t,e){return Qe(t,"POST","/v1/accounts:update",e)}async function lj(t,e){return Qe(t,"POST","/v1/accounts:signUp",e)}async function cj(t,e){return Qe(t,"POST","/v1/accounts:update",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(t,e){return is(t,"POST","/v1/accounts:signInWithPassword",Ye(t,e))}async function Gp(t,e){return Qe(t,"POST","/v1/accounts:sendOobCode",Ye(t,e))}async function dj(t,e){return Gp(t,e)}async function hj(t,e){return Gp(t,e)}async function fj(t,e){return Gp(t,e)}async function mj(t,e){return Gp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return is(t,"POST","/v1/accounts:signInWithEmailLink",Ye(t,e))}async function gj(t,e){return is(t,"POST","/v1/accounts:signInWithEmailLink",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends vh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uo(e,n,"signInWithPassword",uj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return pj(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uo(e,r,"signUpPassword",lj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gj(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e){return is(t,"POST","/v1/accounts:signInWithIdp",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="http://localhost";class Zi extends vh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Zi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gi(e,n)}buildRequest(){const e={requestUri:yj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$c(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e){return Qe(t,"POST","/v1/accounts:sendVerificationCode",Ye(t,e))}async function wj(t,e){return is(t,"POST","/v1/accounts:signInWithPhoneNumber",Ye(t,e))}async function vj(t,e){const n=await is(t,"POST","/v1/accounts:signInWithPhoneNumber",Ye(t,e));if(n.temporaryProof)throw Wu(t,"account-exists-with-different-credential",n);return n}const _j={USER_NOT_FOUND:"user-not-found"};async function bj(t,e){const n={...e,operation:"REAUTH"};return is(t,"POST","/v1/accounts:signInWithPhoneNumber",Ye(t,n),_j)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends vh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new da({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new da({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return wj(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return vj(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return bj(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new da({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tj(t){const e=zu($u(t)).link,n=e?zu($u(e)).deep_link_id:null,r=zu($u(t)).deep_link_id;return(r?zu($u(r)).link:null)||r||n||e||t}class _h{constructor(e){const n=zu($u(e)),r=n.apiKey??null,i=n.oobCode??null,s=Ij(n.mode??null);H(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Tj(e);try{return new _h(n)}catch{return null}}}function F8(t){return _h.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.providerId=Fa.PROVIDER_ID}static credential(e,n){return Bd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_h.parseLink(n);return H(r,"argument-error"),Bd._fromEmailAndCode(e,r.code,r.tenantId)}}Fa.PROVIDER_ID="password";Fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class sm extends Gc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),Zi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),Zi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return sm.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return sm.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new sm(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Gc{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zi._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $s.credential(n,r)}catch{return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com";$s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Gc{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="http://localhost";class zd extends vh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new zd(r,s)}static _create(e,n){return new zd(e,n)}buildRequest(){return{requestUri:xj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="saml.";class Ww extends ss{constructor(e){H(e.startsWith(Ej),"argument-error"),super(e)}static credentialFromResult(e){return Ww.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ww.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=zd.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return zd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends Gc{constructor(){super("twitter.com")}static credential(e,n){return Zi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return is(t,"POST","/v1/accounts:signUp",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ur._fromIdTokenResponse(e,r,i),o=fT(r);return new br({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=fT(r);return new br({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function fT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t){var i;if(nt(t.app))return Promise.reject(Ft(t));const e=ft(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new br({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await GA(e,{returnSecureToken:!0}),r=await br._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends or{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,np.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new np(e,n,r,i)}}function HA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?np._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(t,e){const n=Z(t);await Hp(!0,n,e);const{providerUserInfo:r}=await CV(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=qA(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ov(t,e,n=!1){const r=await Xi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return br._forOperation(t,"link",r)}async function Hp(t,e,n){await Ud(e);const r=qA(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e,n=!1){const{auth:r}=t;if(nt(r.app))return Promise.reject(Ft(r));const i="reauthenticate";try{const s=await Xi(t,HA(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=Wp(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),br._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&On(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(t,e,n=!1){if(nt(t.app))return Promise.reject(Ft(t));const r="signIn",i=await HA(t,r,e),s=await br._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Vv(t,e){return YA(ft(t),e)}async function Aj(t,e){const n=Z(t);return await Hp(!1,n,e.providerId),Ov(n,e)}async function kj(t,e){return KA(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e){return is(t,"POST","/v1/accounts:signInWithCustomToken",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B8(t,e){if(nt(t.app))return Promise.reject(Ft(t));const n=ft(t),r=await Cj(n,{token:e,returnSecureToken:!0}),i=await br._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?jv._fromServerResponse(e,n):"totpInfo"in n?Fv._fromServerResponse(e,n):On(e,"internal-error")}}class jv extends bh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new jv(n)}}class Fv extends bh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Fv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t,e,n){var r;H(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uv(t){const e=ft(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function z8(t,e,n){const r=ft(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&qp(r,i,n),await uo(r,i,"getOobCode",hj,"EMAIL_PASSWORD_PROVIDER")}async function $8(t,e,n){await WA(Z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uv(t),r})}async function W8(t,e){await cj(Z(t),{oobCode:e})}async function Rj(t,e){const n=Z(t),r=await WA(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=bh._fromServerResponse(ft(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function G8(t,e){const{data:n}=await Rj(Z(t),e);return n.email}async function H8(t,e,n){if(nt(t.app))return Promise.reject(Ft(t));const r=ft(t),o=await uo(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GA,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Uv(t),l}),a=await br._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function q8(t,e,n){return nt(t.app)?Promise.reject(Ft(t)):Vv(Z(t),Fa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Uv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8(t,e,n){const r=ft(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&qp(r,o,a)}s(i,n),await uo(r,i,"getOobCode",fj,"EMAIL_PASSWORD_PROVIDER")}function Y8(t,e){const n=_h.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Q8(t,e,n){if(nt(t.app))return Promise.reject(Ft(t));const r=Z(t),i=Fa.credentialWithLink(e,n||Fd());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pj(t,e){return Qe(t,"POST","/v1/accounts:createAuthUri",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(t,e){const n=Nv()?Fd():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Pj(Z(t),r);return i||[]}async function X8(t,e){const n=Z(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&qp(n.auth,i,e);const{email:s}=await dj(n.auth,i);s!==t.email&&await t.reload()}async function Z8(t,e,n){const r=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&qp(r.auth,s,n);const{email:o}=await mj(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e){return Qe(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Z(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xi(r,Nj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function t$(t,e){const n=Z(t);return nt(n.auth.app)?Promise.reject(Ft(n.auth)):QA(n,e,null)}function n$(t,e){return QA(Z(t),null,e)}async function QA(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Xi(t,aj(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=Wp(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new sc(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new Lj(r,n);case"github.com":return new Mj(r,n);case"google.com":return new Oj(r,n);case"twitter.com":return new Vj(r,n,t.screenName||null);case"custom":case"anonymous":return new sc(r,null);default:return new sc(r,e,n)}}class sc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class JA extends sc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class Lj extends sc{constructor(e,n){super(e,"facebook.com",n)}}class Mj extends JA{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Oj extends sc{constructor(e,n){super(e,"google.com",n)}}class Vj extends JA{constructor(e,n,r){super(e,"twitter.com",n,r)}}function r$(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Dj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t,e){return Z(t).setPersistence(e)}function s$(t){return zA(t)}async function o$(t,e){return ft(t).validatePassword(e)}function jj(t,e,n,r){return Z(t).onIdTokenChanged(e,n,r)}function Fj(t,e,n){return Z(t).beforeAuthStateChanged(e,n)}function Uj(t,e,n,r){return Z(t).onAuthStateChanged(e,n,r)}function a$(t){Z(t).useDeviceLanguage()}function l$(t,e){return Z(t).updateCurrentUser(e)}function c$(t){return Z(t).signOut()}function u$(t,e){return ft(t).revokeAccessToken(e)}async function d$(t){return Z(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new aa("enroll",e,n)}static _fromMfaPendingCredential(e){return new aa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return aa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return aa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ft(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>bh._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=aa._fromMfaPendingCredential(i.mfaPendingCredential);return new Bv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await br._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return H(n.user,r,"internal-error"),br._forOperation(n.user,n.operationType,u);default:On(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function h$(t,e){var i;const n=Z(t),r=e;return H(e.customData.operationType,n,"argument-error"),H((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),Bv._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:start",Ye(t,e))}function Bj(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(t,e))}function zj(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:start",Ye(t,e))}function $j(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(t,e))}function Wj(t,e){return Qe(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(t,e))}class zv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>bh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new zv(e)}async getSession(){return aa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Xi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Xi(this.user,Wj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const _y=new WeakMap;function f$(t){const e=Z(t);return _y.has(e)||_y.set(e,zv._fromUser(e)),_y.get(e)}const rp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rp,"1"),this.storage.removeItem(rp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1e3,Hj=10;class ZA extends XA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);jV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Hj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZA.type="LOCAL";const qj=ZA;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=1e3;function by(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Iy(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class ek{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Iy(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return by(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Iy(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Iy(e);if(window.cookieStore){const a=u=>{const h=u.changed.find(p=>p.name===r);h&&n(h.value),u.deleted.find(p=>p.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=by(r);const s=setInterval(()=>{const a=by(r);a!==i&&(n(a),i=a)},Kj),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}ek.type="COOKIE";const m$=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends XA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tk.type="SESSION";const nk=tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Kp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Yj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Yp("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return window}function Jj(t){Tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){return typeof Tt().WorkerGlobalScope<"u"&&typeof Tt().importScripts=="function"}async function Xj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function e4(){return $v()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebaseLocalStorageDb",t4=1,ip="firebaseLocalStorage",ik="fbase_key";class Ih{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qp(t,e){return t.transaction([ip],e?"readwrite":"readonly").objectStore(ip)}function n4(){const t=indexedDB.deleteDatabase(rk);return new Ih(t).toPromise()}function Gw(){const t=indexedDB.open(rk,t4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ip,{keyPath:ik})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ip)?e(r):(r.close(),await n4(),e(await Gw()))})})}async function pT(t,e,n){const r=Qp(t,!0).put({[ik]:e,value:n});return new Ih(r).toPromise()}async function r4(t,e){const n=Qp(t,!1).get(e),r=await new Ih(n).toPromise();return r===void 0?null:r.value}function gT(t,e){const n=Qp(t,!0).delete(e);return new Ih(n).toPromise()}const i4=800,s4=3;class sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>s4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $v()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kp._getInstance(e4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Xj(),!this.activeServiceWorker)return;this.sender=new Qj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gw();return await pT(e,rp,"1"),await gT(e,rp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>r4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qp(i,!1).getAll();return new Ih(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sk.type="LOCAL";const o4=sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return Qe(t,"POST","/v2/accounts/mfaSignIn:start",Ye(t,e))}function a4(t,e){return Qe(t,"POST","/v2/accounts/mfaSignIn:finalize",Ye(t,e))}function l4(t,e){return Qe(t,"POST","/v2/accounts/mfaSignIn:finalize",Ye(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=UA("rcb"),c4=new yh(3e4,6e4);class u4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Tt().grecaptcha)!=null&&e.render)}load(e,n=""){return H(d4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&iT(Tt().grecaptcha)?Promise.resolve(Tt().grecaptcha):new Promise((r,i)=>{const s=Tt().setTimeout(()=>{i(bn(e,"network-request-failed"))},c4.get());Tt()[Ty]=()=>{Tt().clearTimeout(s),delete Tt()[Ty];const a=Tt().grecaptcha;if(!a||!iT(a)){i(bn(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const f=l(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${GV()}?${$c({onload:Ty,render:"explicit",hl:n})}`;Mv(o).catch(()=>{clearTimeout(s),i(bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Tt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function d4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class h4{async load(e){return new QV(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="recaptcha",f4={theme:"light",type:"image"};class p${constructor(e,n,r={...f4}){this.parameters=r,this.type=cd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ft(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new h4:new u4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Tt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(Nv()&&!$v(),this.auth,"internal-error"),await m4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await AV(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function m4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=da._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function g$(t,e,n){if(nt(t.app))return Promise.reject(Ft(t));const r=ft(t),i=await Jp(r,e,Z(n));return new Wv(i,s=>Vv(r,s))}async function y$(t,e,n){const r=Z(t);await Hp(!1,r,"phone");const i=await Jp(r.auth,e,Z(n));return new Wv(i,s=>Aj(r,s))}async function w$(t,e,n){const r=Z(t);if(nt(r.auth.app))return Promise.reject(Ft(r.auth));const i=await Jp(r.auth,e,Z(n));return new Wv(i,s=>kj(r,s))}async function Jp(t,e,n){var r;if(!t._getRecaptchaConfig())try{await zA(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){H(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await uo(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===ld){H((n==null?void 0:n.type)===cd,h,"argument-error");const p=await xy(h,f,n);return mT(h,p)}return mT(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;H(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await uo(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===ld){H((n==null?void 0:n.type)===cd,f,"argument-error");const y=await xy(f,p,n);return yT(f,y)}return yT(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await uo(t,s,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===ld){H((n==null?void 0:n.type)===cd,u,"argument-error");const f=await xy(u,h,n);return hT(u,f)}return hT(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function v$(t,e){const n=Z(t);if(nt(n.auth.app))return Promise.reject(Ft(n.auth));await Ov(n,e)}async function xy(t,e,n){H(n.type===cd,t,"argument-error");const r=await n.verify();H(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this.providerId=oc.PROVIDER_ID,this.auth=ft(e)}verifyPhoneNumber(e,n){return Jp(this.auth,e,Z(n))}static credential(e,n){return da._fromVerification(e,n)}static credentialFromResult(e){const n=e;return oc.credentialFromTaggedObject(n)}static credentialFromError(e){return oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?da._fromTokenResponse(n,r):null}}oc.PROVIDER_ID="phone";oc.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){return e?Bi(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends vh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p4(t){return YA(t.auth,new Gv(t),t.bypassAuthState)}function g4(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),KA(n,new Gv(t),t.bypassAuthState)}async function y4(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),Ov(n,new Gv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p4;case"linkViaPopup":case"linkViaRedirect":return y4;case"reauthViaPopup":case"reauthViaRedirect":return g4;default:On(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new yh(2e3,1e4);async function _$(t,e,n){if(nt(t.app))return Promise.reject(bn(t,"operation-not-supported-in-this-environment"));const r=ft(t);Wc(t,e,ss);const i=Ua(r,n);return new zi(r,"signInViaPopup",e,i).executeNotNull()}async function b$(t,e,n){const r=Z(t);if(nt(r.auth.app))return Promise.reject(bn(r.auth,"operation-not-supported-in-this-environment"));Wc(r.auth,e,ss);const i=Ua(r.auth,n);return new zi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function I$(t,e,n){const r=Z(t);Wc(r.auth,e,ss);const i=Ua(r.auth,n);return new zi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class zi extends ok{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=Yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w4.get())};e()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="pendingRedirect",om=new Map;class _4 extends ok{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=om.get(this.auth._key());if(!e){try{const r=await b4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}om.set(this.auth._key(),e)}return this.bypassAuthState||om.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b4(t,e){const n=lk(e),r=ak(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Hv(t,e){return ak(t)._set(lk(e),"true")}function I4(t,e){om.set(t._key(),e)}function ak(t){return Bi(t._redirectPersistence)}function lk(t){return im(v4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t,e,n){return T4(t,e,n)}async function T4(t,e,n){if(nt(t.app))return Promise.reject(Ft(t));const r=ft(t);Wc(t,e,ss),await r._initializationPromise;const i=Ua(r,n);return await Hv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function x$(t,e,n){return x4(t,e,n)}async function x4(t,e,n){const r=Z(t);if(Wc(r.auth,e,ss),nt(r.auth.app))return Promise.reject(Ft(r.auth));await r.auth._initializationPromise;const i=Ua(r.auth,n);await Hv(i,r.auth);const s=await uk(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function E$(t,e,n){return E4(t,e,n)}async function E4(t,e,n){const r=Z(t);Wc(r.auth,e,ss),await r.auth._initializationPromise;const i=Ua(r.auth,n);await Hp(!1,r,e.providerId),await Hv(i,r.auth);const s=await uk(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function S$(t,e){return await ft(t)._initializationPromise,ck(t,e,!1)}async function ck(t,e,n=!1){if(nt(t.app))return Promise.reject(Ft(t));const r=ft(t),i=Ua(r,e),o=await new _4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function uk(t){const e=Yp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=10*60*1e3;class A4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dk(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S4&&this.cachedEventUids.clear(),this.cachedEventUids.has(wT(e))}saveEventToCache(e){this.cachedEventUids.add(wT(e)),this.lastProcessedEventTime=Date.now()}}function wT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e={}){return Qe(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P4=/^https?/;async function N4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await C4(t);for(const n of e)try{if(D4(n))return}catch{}On(t,"unauthorized-domain")}function D4(t){const e=Fd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!P4.test(n))return!1;if(R4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new yh(3e4,6e4);function vT(){const t=Tt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M4(t){return new Promise((e,n)=>{var i,s,o;function r(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),n(bn(t,"network-request-failed"))},timeout:L4.get()})}if((s=(i=Tt().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Tt().gapi)!=null&&o.load)r();else{const a=UA("iframefcb");return Tt()[a]=()=>{gapi.load?r():n(bn(t,"network-request-failed"))},Mv(`${qV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw am=null,e})}let am=null;function O4(t){return am=am||M4(t),am}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new yh(5e3,15e3),j4="__/auth/iframe",F4="emulator/auth/iframe",U4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z4(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dv(e,F4):`https://${t.config.authDomain}/${j4}`,r={apiKey:e.apiKey,appName:t.name,v:ja},i=B4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$c(r).slice(1)}`}async function $4(t){const e=await O4(t),n=Tt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:z4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),a=Tt().setTimeout(()=>{s(o)},V4.get());function l(){Tt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G4=500,H4=600,q4="_blank",K4="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y4(t,e,n,r=G4,i=H4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...W4,width:r.toString(),height:i.toString(),top:s,left:o},u=Ct().toLowerCase();n&&(a=DA(u)?q4:n),PA(u)&&(e=e||K4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,_])=>`${p}${y}=${_},`,"");if(VV(u)&&a!=="_self")return Q4(e||"",a),new _T(null);const f=window.open(e||"",a,h);H(f,t,"popup-blocked");try{f.focus()}catch{}return new _T(f)}function Q4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="__/auth/handler",X4="emulator/auth/handler",Z4=encodeURIComponent("fac");async function bT(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ja,eventId:i};if(e instanceof ss){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Gc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${Z4}=${encodeURIComponent(l)}`:"";return`${e5(t)}?${$c(a).slice(1)}${u}`}function e5({config:t}){return t.emulator?Dv(t,X4):`https://${t.authDomain}/${J4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="webStorageSupport";class t5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nk,this._completeRedirectFn=ck,this._overrideRedirectResult=I4}async _openPopup(e,n,r,i){var o;Ji((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await bT(e,n,r,Fd(),i);return Y4(e,s,Yp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await bT(e,n,r,Fd(),i);return Jj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ji(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $4(e),r=new A4(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ey,{type:Ey},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Ey];s!==void 0&&n(!!s),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jA()||NA()||Lv()}}const n5=t5;class hk{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ci("unexpected MultiFactorSessionType")}}}class qv extends hk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qv(e)}_finalizeEnroll(e,n,r){return Bj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return a4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class r5{constructor(){}static assertion(e){return qv._fromCredential(e)}}r5.FACTOR_ID="phone";class i5{static assertionForEnrollment(e,n){return $d._fromSecret(e,n)}static assertionForSignIn(e,n){return $d._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;H(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await zj(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Kv._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}i5.FACTOR_ID="totp";class $d extends hk{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new $d(n,void 0,e)}static _fromEnrollmentId(e,n){return new $d(n,e)}async _finalizeEnroll(e,n,r){return H(typeof this.secret<"u",e,"argument-error"),$j(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return l4(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class Kv{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new Kv(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(Rf(e)||Rf(n))&&(r=!0),r&&(Rf(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Rf(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Rf(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var IT="@firebase/auth",TT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a5(t){_r(new nr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FA(t)},u=new $V(r,i,s,l);return rj(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_r(new nr("auth-internal",e=>{const n=ft(e.getProvider("auth").getImmediate());return(r=>new s5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),on(IT,TT,o5(t)),on(IT,TT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=5*60,c5=jS("authIdTokenMaxAge")||l5;let xT=null;const u5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>c5)return;const i=n==null?void 0:n.token;xT!==i&&(xT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function d5(t=gh()){const e=Hr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nj(t,{popupRedirectResolver:n5,persistence:[o4,qj,nk]}),r=jS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=u5(s.toString());Fj(n,o,()=>o(n.currentUser)),jj(n,a=>o(a))}}const i=MS("auth");return i&&ij(n,`http://${i}`),n}function h5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}WV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",h5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a5("Browser");var ET=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ho,fk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function E(){}E.prototype=w.prototype,T.D=w.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(C,R,M){for(var k=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)k[Se-2]=arguments[Se];return w.prototype[R].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,E){E||(E=0);var C=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)C[R]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(R=0;16>R;++R)C[R]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=T.g[0],E=T.g[1],R=T.g[2];var M=T.g[3],k=w+(M^E&(R^M))+C[0]+3614090360&4294967295;w=E+(k<<7&4294967295|k>>>25),k=M+(R^w&(E^R))+C[1]+3905402710&4294967295,M=w+(k<<12&4294967295|k>>>20),k=R+(E^M&(w^E))+C[2]+606105819&4294967295,R=M+(k<<17&4294967295|k>>>15),k=E+(w^R&(M^w))+C[3]+3250441966&4294967295,E=R+(k<<22&4294967295|k>>>10),k=w+(M^E&(R^M))+C[4]+4118548399&4294967295,w=E+(k<<7&4294967295|k>>>25),k=M+(R^w&(E^R))+C[5]+1200080426&4294967295,M=w+(k<<12&4294967295|k>>>20),k=R+(E^M&(w^E))+C[6]+2821735955&4294967295,R=M+(k<<17&4294967295|k>>>15),k=E+(w^R&(M^w))+C[7]+4249261313&4294967295,E=R+(k<<22&4294967295|k>>>10),k=w+(M^E&(R^M))+C[8]+1770035416&4294967295,w=E+(k<<7&4294967295|k>>>25),k=M+(R^w&(E^R))+C[9]+2336552879&4294967295,M=w+(k<<12&4294967295|k>>>20),k=R+(E^M&(w^E))+C[10]+4294925233&4294967295,R=M+(k<<17&4294967295|k>>>15),k=E+(w^R&(M^w))+C[11]+2304563134&4294967295,E=R+(k<<22&4294967295|k>>>10),k=w+(M^E&(R^M))+C[12]+1804603682&4294967295,w=E+(k<<7&4294967295|k>>>25),k=M+(R^w&(E^R))+C[13]+4254626195&4294967295,M=w+(k<<12&4294967295|k>>>20),k=R+(E^M&(w^E))+C[14]+2792965006&4294967295,R=M+(k<<17&4294967295|k>>>15),k=E+(w^R&(M^w))+C[15]+1236535329&4294967295,E=R+(k<<22&4294967295|k>>>10),k=w+(R^M&(E^R))+C[1]+4129170786&4294967295,w=E+(k<<5&4294967295|k>>>27),k=M+(E^R&(w^E))+C[6]+3225465664&4294967295,M=w+(k<<9&4294967295|k>>>23),k=R+(w^E&(M^w))+C[11]+643717713&4294967295,R=M+(k<<14&4294967295|k>>>18),k=E+(M^w&(R^M))+C[0]+3921069994&4294967295,E=R+(k<<20&4294967295|k>>>12),k=w+(R^M&(E^R))+C[5]+3593408605&4294967295,w=E+(k<<5&4294967295|k>>>27),k=M+(E^R&(w^E))+C[10]+38016083&4294967295,M=w+(k<<9&4294967295|k>>>23),k=R+(w^E&(M^w))+C[15]+3634488961&4294967295,R=M+(k<<14&4294967295|k>>>18),k=E+(M^w&(R^M))+C[4]+3889429448&4294967295,E=R+(k<<20&4294967295|k>>>12),k=w+(R^M&(E^R))+C[9]+568446438&4294967295,w=E+(k<<5&4294967295|k>>>27),k=M+(E^R&(w^E))+C[14]+3275163606&4294967295,M=w+(k<<9&4294967295|k>>>23),k=R+(w^E&(M^w))+C[3]+4107603335&4294967295,R=M+(k<<14&4294967295|k>>>18),k=E+(M^w&(R^M))+C[8]+1163531501&4294967295,E=R+(k<<20&4294967295|k>>>12),k=w+(R^M&(E^R))+C[13]+2850285829&4294967295,w=E+(k<<5&4294967295|k>>>27),k=M+(E^R&(w^E))+C[2]+4243563512&4294967295,M=w+(k<<9&4294967295|k>>>23),k=R+(w^E&(M^w))+C[7]+1735328473&4294967295,R=M+(k<<14&4294967295|k>>>18),k=E+(M^w&(R^M))+C[12]+2368359562&4294967295,E=R+(k<<20&4294967295|k>>>12),k=w+(E^R^M)+C[5]+4294588738&4294967295,w=E+(k<<4&4294967295|k>>>28),k=M+(w^E^R)+C[8]+2272392833&4294967295,M=w+(k<<11&4294967295|k>>>21),k=R+(M^w^E)+C[11]+1839030562&4294967295,R=M+(k<<16&4294967295|k>>>16),k=E+(R^M^w)+C[14]+4259657740&4294967295,E=R+(k<<23&4294967295|k>>>9),k=w+(E^R^M)+C[1]+2763975236&4294967295,w=E+(k<<4&4294967295|k>>>28),k=M+(w^E^R)+C[4]+1272893353&4294967295,M=w+(k<<11&4294967295|k>>>21),k=R+(M^w^E)+C[7]+4139469664&4294967295,R=M+(k<<16&4294967295|k>>>16),k=E+(R^M^w)+C[10]+3200236656&4294967295,E=R+(k<<23&4294967295|k>>>9),k=w+(E^R^M)+C[13]+681279174&4294967295,w=E+(k<<4&4294967295|k>>>28),k=M+(w^E^R)+C[0]+3936430074&4294967295,M=w+(k<<11&4294967295|k>>>21),k=R+(M^w^E)+C[3]+3572445317&4294967295,R=M+(k<<16&4294967295|k>>>16),k=E+(R^M^w)+C[6]+76029189&4294967295,E=R+(k<<23&4294967295|k>>>9),k=w+(E^R^M)+C[9]+3654602809&4294967295,w=E+(k<<4&4294967295|k>>>28),k=M+(w^E^R)+C[12]+3873151461&4294967295,M=w+(k<<11&4294967295|k>>>21),k=R+(M^w^E)+C[15]+530742520&4294967295,R=M+(k<<16&4294967295|k>>>16),k=E+(R^M^w)+C[2]+3299628645&4294967295,E=R+(k<<23&4294967295|k>>>9),k=w+(R^(E|~M))+C[0]+4096336452&4294967295,w=E+(k<<6&4294967295|k>>>26),k=M+(E^(w|~R))+C[7]+1126891415&4294967295,M=w+(k<<10&4294967295|k>>>22),k=R+(w^(M|~E))+C[14]+2878612391&4294967295,R=M+(k<<15&4294967295|k>>>17),k=E+(M^(R|~w))+C[5]+4237533241&4294967295,E=R+(k<<21&4294967295|k>>>11),k=w+(R^(E|~M))+C[12]+1700485571&4294967295,w=E+(k<<6&4294967295|k>>>26),k=M+(E^(w|~R))+C[3]+2399980690&4294967295,M=w+(k<<10&4294967295|k>>>22),k=R+(w^(M|~E))+C[10]+4293915773&4294967295,R=M+(k<<15&4294967295|k>>>17),k=E+(M^(R|~w))+C[1]+2240044497&4294967295,E=R+(k<<21&4294967295|k>>>11),k=w+(R^(E|~M))+C[8]+1873313359&4294967295,w=E+(k<<6&4294967295|k>>>26),k=M+(E^(w|~R))+C[15]+4264355552&4294967295,M=w+(k<<10&4294967295|k>>>22),k=R+(w^(M|~E))+C[6]+2734768916&4294967295,R=M+(k<<15&4294967295|k>>>17),k=E+(M^(R|~w))+C[13]+1309151649&4294967295,E=R+(k<<21&4294967295|k>>>11),k=w+(R^(E|~M))+C[4]+4149444226&4294967295,w=E+(k<<6&4294967295|k>>>26),k=M+(E^(w|~R))+C[11]+3174756917&4294967295,M=w+(k<<10&4294967295|k>>>22),k=R+(w^(M|~E))+C[2]+718787259&4294967295,R=M+(k<<15&4294967295|k>>>17),k=E+(M^(R|~w))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var E=w-this.blockSize,C=this.B,R=this.h,M=0;M<w;){if(R==0)for(;M<=E;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(C[R++]=T.charCodeAt(M++),R==this.blockSize){i(this,C),R=0;break}}else for(;M<w;)if(C[R++]=T[M++],R==this.blockSize){i(this,C),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var E=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=E&255,E/=256;for(this.u(T),T=Array(16),w=E=0;4>w;++w)for(var C=0;32>C;C+=8)T[E++]=this.g[w]>>>C&255;return T};function s(T,w){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=w(T)}function o(T,w){this.h=w;for(var E=[],C=!0,R=T.length-1;0<=R;R--){var M=T[R]|0;C&&M==w||(E[R]=M,C=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(u(-T));for(var w=[],E=1,C=0;T>=E;C++)w[C]=T/E|0,E*=4294967296;return new o(w,0)}function h(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return P(h(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(w,8)),C=f,R=0;R<T.length;R+=8){var M=Math.min(8,T.length-R),k=parseInt(T.substring(R,R+M),w);8>M?(M=u(Math.pow(w,M)),C=C.j(M).add(u(k))):(C=C.j(E),C=C.add(u(k)))}return C}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-P(this).m();for(var T=0,w=1,E=0;E<this.g.length;E++){var C=this.i(E);T+=(0<=C?C:4294967296+C)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(A(this))return"-"+P(this).toString(T);for(var w=u(Math.pow(T,6)),E=this,C="";;){var R=N(E,w).g;E=I(E,R.j(w));var M=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=R,_(E))return M+C;for(;6>M.length;)M="0"+M;C=M+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function A(T){return T.h==-1}t.l=function(T){return T=I(this,T),A(T)?-1:_(T)?0:1};function P(T){for(var w=T.g.length,E=[],C=0;C<w;C++)E[C]=~T.g[C];return new o(E,~T.h).add(p)}t.abs=function(){return A(this)?P(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],C=0,R=0;R<=w;R++){var M=C+(this.i(R)&65535)+(T.i(R)&65535),k=(M>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);C=k>>>16,M&=65535,k&=65535,E[R]=k<<16|M}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(T,w){return T.add(P(w))}t.j=function(T){if(_(this)||_(T))return f;if(A(this))return A(T)?P(this).j(P(T)):P(P(this).j(T));if(A(T))return P(this.j(P(T)));if(0>this.l(y)&&0>T.l(y))return u(this.m()*T.m());for(var w=this.g.length+T.g.length,E=[],C=0;C<2*w;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<T.g.length;R++){var M=this.i(C)>>>16,k=this.i(C)&65535,Se=T.i(R)>>>16,Je=T.i(R)&65535;E[2*C+2*R]+=k*Je,b(E,2*C+2*R),E[2*C+2*R+1]+=M*Je,b(E,2*C+2*R+1),E[2*C+2*R+1]+=k*Se,b(E,2*C+2*R+1),E[2*C+2*R+2]+=M*Se,b(E,2*C+2*R+2)}for(C=0;C<w;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=w;C<2*w;C++)E[C]=0;return new o(E,0)};function b(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function x(T,w){this.g=T,this.h=w}function N(T,w){if(_(w))throw Error("division by zero");if(_(T))return new x(f,f);if(A(T))return w=N(P(T),w),new x(P(w.g),P(w.h));if(A(w))return w=N(T,P(w)),new x(P(w.g),w.h);if(30<T.g.length){if(A(T)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var E=p,C=w;0>=C.l(T);)E=U(E),C=U(C);var R=B(E,1),M=B(C,1);for(C=B(C,2),E=B(E,2);!_(C);){var k=M.add(C);0>=k.l(T)&&(R=R.add(E),M=k),C=B(C,1),E=B(E,1)}return w=I(T,R.j(w)),new x(R,w)}for(R=f;0<=T.l(w);){for(E=Math.max(1,Math.floor(T.m()/w.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),M=u(E),k=M.j(w);A(k)||0<k.l(T);)E-=C,M=u(E),k=M.j(w);_(M)&&(M=p),R=R.add(M),T=I(T,k)}return new x(R,T)}t.A=function(T){return N(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],C=0;C<w;C++)E[C]=this.i(C)&T.i(C);return new o(E,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],C=0;C<w;C++)E[C]=this.i(C)|T.i(C);return new o(E,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),E=[],C=0;C<w;C++)E[C]=this.i(C)^T.i(C);return new o(E,this.h^T.h)};function U(T){for(var w=T.g.length+1,E=[],C=0;C<w;C++)E[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(E,T.h)}function B(T,w){var E=w>>5;w%=32;for(var C=T.g.length-E,R=[],M=0;M<C;M++)R[M]=0<w?T.i(M+E)>>>w|T.i(M+E+1)<<32-w:T.i(M+E);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ho=o}).apply(typeof ET<"u"?ET:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mk,Gu,pk,lm,Hw,gk,yk,wk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var D=c[v];if(!(D in g))break e;g=g[D]}c=c[c.length-1],v=g[c],m=m(v),m!=v&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,v=!1,D={next:function(){if(!v&&g<c.length){var F=g++;return{value:m(F,c[F]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),c.apply(m,D)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function _(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(v,D,F){for(var q=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)q[Ce-2]=arguments[Ce];return m.prototype[D].apply(v,q)}}function A(c){const m=c.length;if(0<m){const g=Array(m);for(let v=0;v<m;v++)g[v]=c[v];return g}return[]}function P(c,m){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(l(v)){const D=c.length||0,F=v.length||0;c.length=D+F;for(let q=0;q<F;q++)c[D+q]=v[q]}else c.push(v)}}class I{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function N(c){return N[" "](c),c}N[" "]=function(){};var U=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function B(c,m,g){for(const v in c)m.call(g,c[v],v,c)}function T(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function w(c){const m={};for(const g in c)m[g]=c[g];return m}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,m){let g,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(g in v)c[g]=v[g];for(let F=0;F<E.length;F++)g=E[F],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function R(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function M(c){a.setTimeout(()=>{throw c},0)}function k(){var c=ie;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Se{constructor(){this.h=this.g=null}add(m,g){const v=Je.get();v.set(m,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Je=new I(()=>new Tr,c=>c.reset());class Tr{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Q=!1,ie=new Se,oe=()=>{const c=a.Promise.resolve(void 0);ce=()=>{c.then(Ee)}};var Ee=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(g){M(g)}var m=Je;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Q=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var un=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function Vn(c,m){if($e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(U){e:{try{N(m.nodeName);var D=!0;break e}catch{}D=!1}D||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:dn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Vn.aa.h.call(this)}}_(Vn,$e);var dn={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),jn=0;function Sg(c,m,g,v,D){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!v,this.ha=D,this.key=++jn,this.da=this.fa=!1}function Do(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xr(c){this.src=c,this.g={},this.h=0}xr.prototype.add=function(c,m,g,v,D){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var q=Yr(c,m,v,D);return-1<q?(m=c[q],g||(m.fa=!1)):(m=new Sg(m,this.src,F,!!v,D),m.fa=g,c.push(m)),m};function Kr(c,m){var g=m.type;if(g in c.g){var v=c.g[g],D=Array.prototype.indexOf.call(v,m,void 0),F;(F=0<=D)&&Array.prototype.splice.call(v,D,1),F&&(Do(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Yr(c,m,g,v){for(var D=0;D<c.length;++D){var F=c[D];if(!F.da&&F.listener==m&&F.capture==!!g&&F.ha==v)return D}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),_i={};function pt(c,m,g,v,D){if(v&&v.once)return se(c,m,g,v,D);if(Array.isArray(m)){for(var F=0;F<m.length;F++)pt(c,m[F],g,v,D);return null}return g=Lo(g),c&&c[ct]?c.K(m,g,u(v)?!!v.capture:!!v,D):ar(c,m,g,!1,v,D)}function ar(c,m,g,v,D,F){if(!m)throw Error("Invalid event type");var q=u(D)?!!D.capture:!!D,Ce=Jr(c);if(Ce||(c[Qr]=Ce=new xr(c)),g=Ce.add(m,g,v,q,F),g.proxy)return g;if(v=bi(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)un||(D=q),D===void 0&&(D=!1),c.addEventListener(m.toString(),v,D);else if(c.attachEvent)c.attachEvent(Ka(m.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function bi(){function c(g){return m.call(c.src,c.listener,g)}const m=Ya;return c}function se(c,m,g,v,D){if(Array.isArray(m)){for(var F=0;F<m.length;F++)se(c,m[F],g,v,D);return null}return g=Lo(g),c&&c[ct]?c.L(m,g,u(v)?!!v.capture:!!v,D):ar(c,m,g,!0,v,D)}function qa(c,m,g,v,D){if(Array.isArray(m))for(var F=0;F<m.length;F++)qa(c,m[F],g,v,D);else v=u(v)?!!v.capture:!!v,g=Lo(g),c&&c[ct]?(c=c.i,m=String(m).toString(),m in c.g&&(F=c.g[m],g=Yr(F,g,v,D),-1<g&&(Do(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete c.g[m],c.h--)))):c&&(c=Jr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Yr(m,g,v,D)),(g=-1<c?m[c]:null)&&Fn(g))}function Fn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ct])Kr(m.i,c);else{var g=c.type,v=c.proxy;m.removeEventListener?m.removeEventListener(g,v,c.capture):m.detachEvent?m.detachEvent(Ka(g),v):m.addListener&&m.removeListener&&m.removeListener(v),(g=Jr(m))?(Kr(g,c),g.h==0&&(g.src=null,m[Qr]=null)):Do(c)}}}function Ka(c){return c in _i?_i[c]:_i[c]="on"+c}function Ya(c,m){if(c.da)c=!0;else{m=new Vn(m,this);var g=c.listener,v=c.ha||c.src;c.fa&&Fn(c),c=g.call(v,m)}return c}function Jr(c){return c=c[Qr],c instanceof xr?c:null}var iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(c){return typeof c=="function"?c:(c[iu]||(c[iu]=function(m){return c.handleEvent(m)}),c[iu])}function zt(){we.call(this),this.i=new xr(this),this.M=this,this.F=null}_(zt,we),zt.prototype[ct]=!0,zt.prototype.removeEventListener=function(c,m,g,v){qa(this,c,m,g,v)};function gt(c,m){var g,v=c.F;if(v)for(g=[];v;v=v.F)g.push(v);if(c=c.M,v=m.type||m,typeof m=="string")m=new $e(m,c);else if(m instanceof $e)m.target=m.target||c;else{var D=m;m=new $e(v,c),C(m,D)}if(D=!0,g)for(var F=g.length-1;0<=F;F--){var q=m.g=g[F];D=Pt(q,v,!0,m)&&D}if(q=m.g=c,D=Pt(q,v,!0,m)&&D,D=Pt(q,v,!1,m)&&D,g)for(F=0;F<g.length;F++)q=m.g=g[F],D=Pt(q,v,!1,m)&&D}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],v=0;v<g.length;v++)Do(g[v]);delete c.g[m],c.h--}}this.F=null},zt.prototype.K=function(c,m,g,v){return this.i.add(String(c),m,!1,g,v)},zt.prototype.L=function(c,m,g,v){return this.i.add(String(c),m,!0,g,v)};function Pt(c,m,g,v){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var D=!0,F=0;F<m.length;++F){var q=m[F];if(q&&!q.da&&q.capture==g){var Ce=q.listener,St=q.ha||q.src;q.fa&&Kr(c.i,q),D=Ce.call(St,v)!==!1&&D}}return D&&!v.defaultPrevented}function bt(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Ag(c){c.g=bt(()=>{c.g=null,c.i&&(c.i=!1,Ag(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Qa extends we{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ag(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(c){we.call(this),this.h=c,this.g={}}_(Ii,we);var Bh=[];function Mo(c){B(c.g,function(m,g){this.g.hasOwnProperty(g)&&Fn(m)},c),c.g={}}Ii.prototype.N=function(){Ii.aa.N.call(this),Mo(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=a.JSON.stringify,Zr=a.JSON.parse,us=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ja(){}Ja.prototype.h=null;function ds(c){return c.h||(c.h=c.i())}function Ti(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xi(){$e.call(this,"d")}_(xi,$e);function Xa(){$e.call(this,"c")}_(Xa,$e);var Ei={},hs=null;function Za(){return hs=hs||new zt}Ei.La="serverreachability";function el(c){$e.call(this,Ei.La,c)}_(el,$e);function hn(c){const m=Za();gt(m,new el(m))}Ei.STAT_EVENT="statevent";function ei(c,m){$e.call(this,Ei.STAT_EVENT,c),this.stat=m}_(ei,$e);function Xe(c){const m=Za();gt(m,new ei(m,c))}Ei.Ma="timingevent";function su(c,m){$e.call(this,Ei.Ma,c),this.size=m}_(su,$e);function fs(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function ms(){this.g=!0}ms.prototype.xa=function(){this.g=!1};function yt(c,m,g,v,D,F){c.info(function(){if(c.g)if(F)for(var q="",Ce=F.split("&"),St=0;St<Ce.length;St++){var be=Ce[St].split("=");if(1<be.length){var Nt=be[0];be=be[1];var Dt=Nt.split("_");q=2<=Dt.length&&Dt[1]=="type"?q+(Nt+"="+be+"&"):q+(Nt+"=redacted&")}}else q=null;else q=F;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+m+`
`+g+`
`+q})}function kg(c,m,g,v,D,F,q){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+m+`
`+g+`
`+F+" "+q})}function je(c,m,g,v){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+lr(c,g)+(v?" "+v:"")})}function Cg(c,m){c.info(function(){return"TIMEOUT: "+m})}ms.prototype.info=function(){};function lr(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var v=g[c];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var F=D[0];if(F!="noop"&&F!="stop"&&F!="close")for(var q=1;q<D.length;q++)D[q]=""}}}}return Xr(g)}catch{return m}}var Oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function Vo(){}_(Vo,Ja),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Er=new Vo;function Sr(c,m,g,v){this.j=c,this.i=m,this.l=g,this.R=v||1,this.U=new Ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var Rg={},tl={};function nl(c,m,g){c.L=1,c.v=ys(cr(m)),c.m=g,c.P=!0,$h(c,null)}function $h(c,m){c.F=Date.now(),rl(c),c.A=cr(c.v);var g=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),fu(g.i,"t",v),c.C=0,g=c.j.J,c.h=new ou,c.g=af(c.j,g?m:null,!c.m),0<c.O&&(c.M=new Qa(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,v=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Bh[0]=D.toString()),D=Bh);for(var F=0;F<D.length;F++){var q=pt(g,D[F],v||m.handleEvent,!1,m.h||m);if(!q)break;m.g[q.key]=q}m=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),hn(),yt(c.i,c.u,c.A,c.l,c.R,c.m)}Sr.prototype.ca=function(c){c=c.target;const m=this.M;m&&Cr(c)==3?m.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{const Dt=Cr(this.g);var m=this.g.Ba();const ks=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Xh(this.g)))){this.J||Dt!=4||m==7||(m==8||0>=ks?hn(3):hn(2)),lu(this);var g=this.g.Z();this.X=g;t:if(au(this)){var v=Xh(this.g);c="";var D=v.length,F=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),ps(this);var q="";break t}this.h.i=new a.TextDecoder}for(m=0;m<D;m++)this.h.h=!0,c+=this.h.i.decode(v[m],{stream:!(F&&m==D-1)});v.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,kg(this.i,this.u,this.A,this.l,this.R,Dt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,St=this.g;if((Ce=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ce)){var be=Ce;break t}}be=null}if(g=be)je(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,il(this,g);else{this.o=!1,this.s=3,Xe(12),ti(this),ps(this);break e}}if(this.P){g=!0;let zn;for(;!this.J&&this.C<q.length;)if(zn=Pg(this,q),zn==tl){Dt==4&&(this.s=4,Xe(14),g=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Rg){this.s=4,Xe(15),je(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else je(this.i,this.l,zn,null),il(this,zn);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||q.length!=0||this.h.h||(this.s=1,Xe(16),g=!1),this.o=this.o&&g,!g)je(this.i,this.l,q,"[Invalid Chunked Response]"),ti(this),ps(this);else if(0<q.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),vl(Nt),Nt.M=!0,Xe(11))}}else je(this.i,this.l,q,null),il(this,q);Dt==4&&ti(this),this.o&&!this.J&&(Dt==4?sf(this.j,this):(this.o=!1,rl(this)))}else gl(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),ti(this),ps(this)}}}catch{}finally{}};function au(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Pg(c,m){var g=c.C,v=m.indexOf(`
`,g);return v==-1?tl:(g=Number(m.substring(g,v)),isNaN(g)?Rg:(v+=1,v+g>m.length?tl:(m=m.slice(v,v+g),c.C=v+g,m)))}Sr.prototype.cancel=function(){this.J=!0,ti(this)};function rl(c){c.S=Date.now()+c.I,jo(c,c.I)}function jo(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fs(p(c.ba,c),m)}function lu(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Sr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Cg(this.i,this.A),this.L!=2&&(hn(),Xe(17)),ti(this),this.s=2,ps(this)):jo(this,this.S-c)};function ps(c){c.j.G==0||c.J||sf(c.j,c)}function ti(c){lu(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Mo(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function il(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||uu(g.h,c))){if(!c.K&&uu(g.h,c)&&g.G==3){try{var v=g.Da.g.parse(m)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Es(g),yl(g);else break e;xs(g),Xe(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=fs(p(g.Za,g),6e3));if(1>=Si(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ni(g,11)}else if((c.K||g.g==c)&&Es(g),!b(m))for(D=g.Da.g.parse(m),m=0;m<D.length;m++){let be=D[m];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const Nt=be[3];Nt!=null&&(g.la=Nt,g.j.info("VER="+g.la));const Dt=be[4];Dt!=null&&(g.Aa=Dt,g.j.info("SVER="+g.Aa));const ks=be[5];ks!=null&&typeof ks=="number"&&0<ks&&(v=1.5*ks,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const zn=c.g;if(zn){const _l=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var F=v.h;F.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ol(F,F.h),F.h=null))}if(v.D){const _u=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(v.ya=_u,Me(v.I,v.D,_u))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var q=c;if(v.qa=of(v,v.J?v.ia:null,v.W),q.K){Wh(v.h,q);var Ce=q,St=v.L;St&&(Ce.I=St),Ce.B&&(lu(Ce),rl(Ce)),v.g=q}else nf(v);0<g.i.length&&zo(g)}else be[0]!="stop"&&be[0]!="close"||ni(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ni(g,7):ef(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}hn(4)}catch{}}var Ng=class{constructor(c,m){this.g=c,this.map=m}};function sl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Si(c){return c.h?1:c.g?c.g.size:0}function uu(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function ol(c,m){c.g?c.g.add(m):c.h=m}function Wh(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}sl.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function du(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return A(c.i)}function Dg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,v=0;v<g;v++)m.push(c[v]);return m}m=[],g=0;for(v in c)m[g++]=c[v];return m}function Lg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const v in c)m[g++]=v;return m}}}function En(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=Lg(c),v=Dg(c),D=v.length,F=0;F<D;F++)m.call(void 0,v[F],g&&g[F],c)}var Ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gs(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var v=c[g].indexOf("="),D=null;if(0<=v){var F=c[g].substring(0,v);D=c[g].substring(v+1)}else F=c[g];m(F,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function $t(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof $t){this.h=c.h,ki(this,c.j),this.o=c.o,this.g=c.g,Fo(this,c.s),this.l=c.l;var m=c.i,g=new _s;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),al(this,g),this.m=c.m}else c&&(m=String(c).match(Ai))?(this.h=!1,ki(this,m[1]||"",!0),this.o=ws(m[2]||""),this.g=ws(m[3]||"",!0),Fo(this,m[4]),this.l=ws(m[5]||"",!0),al(this,m[6]||"",!0),this.m=ws(m[7]||"")):(this.h=!1,this.i=new _s(null,this.h))}$t.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Wt(m,hu,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Wt(m,hu,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Wt(g,g.charAt(0)=="/"?Gh:vs,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Wt(g,Hh)),c.join("")};function cr(c){return new $t(c)}function ki(c,m,g){c.j=g?ws(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Fo(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function al(c,m,g){m instanceof _s?(c.i=m,Fe(c.i,c.h)):(g||(m=Wt(m,cl)),c.i=new _s(m,c.h))}function Me(c,m,g){c.i.set(m,g)}function ys(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ws(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wt(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,ll),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ll(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var hu=/[#\/\?@]/g,vs=/[#\?:]/g,Gh=/[#\?]/g,cl=/[#\?@]/g,Hh=/#/g;function _s(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ar(c){c.g||(c.g=new Map,c.h=0,c.i&&gs(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=_s.prototype,t.add=function(c,m){Ar(this),this.i=null,c=Bn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function qh(c,m){Ar(c),m=Bn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function ul(c,m){return Ar(c),m=Bn(c,m),c.g.has(m)}t.forEach=function(c,m){Ar(this),this.g.forEach(function(g,v){g.forEach(function(D){c.call(m,D,v,this)},this)},this)},t.na=function(){Ar(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let v=0;v<m.length;v++){const D=c[v];for(let F=0;F<D.length;F++)g.push(m[v])}return g},t.V=function(c){Ar(this);let m=[];if(typeof c=="string")ul(this,c)&&(m=m.concat(this.g.get(Bn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return Ar(this),this.i=null,c=Bn(this,c),ul(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function fu(c,m,g){qh(c,m),0<g.length&&(c.i=null,c.g.set(Bn(c,m),A(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var v=m[g];const F=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var D=F;q[v]!==""&&(D+="="+encodeURIComponent(String(q[v]))),c.push(D)}}return this.i=c.join("&")};function Bn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Fe(c,m){m&&!c.j&&(Ar(c),c.i=null,c.g.forEach(function(g,v){var D=v.toLowerCase();v!=D&&(qh(this,v),fu(this,D,g))},c)),c.j=m}function dl(c,m){const g=new ms;if(a.Image){const v=new Image;v.onload=y(Qt,g,"TestLoadImage: loaded",!0,m,v),v.onerror=y(Qt,g,"TestLoadImage: error",!1,m,v),v.onabort=y(Qt,g,"TestLoadImage: abort",!1,m,v),v.ontimeout=y(Qt,g,"TestLoadImage: timeout",!1,m,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else m(!1)}function Ue(c,m){const g=new ms,v=new AbortController,D=setTimeout(()=>{v.abort(),Qt(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:v.signal}).then(F=>{clearTimeout(D),F.ok?Qt(g,"TestPingServer: ok",!0,m):Qt(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(D),Qt(g,"TestPingServer: error",!1,m)})}function Qt(c,m,g,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(g)}catch{}}function Kh(){this.g=new us}function hl(c,m,g){const v=g||"";try{En(c,function(D,F){let q=D;u(D)&&(q=Xr(D)),m.push(v+F+"="+encodeURIComponent(q))})}catch(D){throw m.push(v+"type="+encodeURIComponent("_badmap")),D}}function fl(c){this.l=c.Ub||null,this.j=c.eb||!1}_(fl,Ja),fl.prototype.g=function(){return new bs(this.l,this.j)},fl.prototype.i=function(c){return function(){return c}}({});function bs(c,m){zt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bs,zt),t=bs.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Ri(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ml(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ml(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ci(this):Ri(this),this.readyState==3&&ml(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ci(this))},t.Qa=function(c){this.g&&(this.response=c,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ri(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function Ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yh(c){let m="";return B(c,function(g,v){m+=v,m+=":",m+=g,m+=`\r
`}),m}function Uo(c,m,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Yh(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Me(c,m,g))}function We(c){zt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(We,zt);var Qh=/^https?$/i,Jh=["POST","PUT"];t=We.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?ds(this.o):ds(Er),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(F){mu(this,F);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)g.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const F of v.keys())g.set(F,v.get(F));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jh,m,void 0))||v||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,q]of g)this.g.setRequestHeader(F,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pl(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){mu(this,F)}};function mu(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,kr(c),Is(c)}function kr(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,gt(this,"complete"),gt(this,"abort"),Is(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pu(this):this.bb())},t.bb=function(){pu(this)};function pu(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)bt(c.Ea,0,c);else if(gt(c,"readystatechange"),Cr(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var v;if(v=q===0){var D=String(c.D).match(Ai)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),v=!Qh.test(D?D.toLowerCase():"")}g=v}if(g)gt(c,"complete"),gt(c,"success");else{c.m=6;try{var F=2<Cr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",kr(c)}}finally{Is(c)}}}}function Is(c,m){if(c.g){pl(c);const g=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||gt(c,"ready");try{g.onreadystatechange=v}catch{}}}function pl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Zr(m)}};function Xh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gl(c){const m={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(b(c[v]))continue;var g=R(c[v]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=m[D]||[];m[D]=F,F.push(g)}T(m,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function Zh(c){this.Aa=0,this.i=[],this.j=new ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,c),this.cb=Bo("retryDelaySeedMs",1e4,c),this.Wa=Bo("forwardChannelMaxRetries",2,c),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sl(c&&c.concurrentRequestLimit),this.Da=new Kh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zh.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,v){Xe(0),this.W=c,this.H=m||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=of(this,null,this.W),zo(this)};function ef(c){if(gu(c),c.G==3){var m=c.U++,g=cr(c.I);if(Me(g,"SID",c.K),Me(g,"RID",m),Me(g,"TYPE","terminate"),Ts(c,g),m=new Sr(c,c.j,m),m.L=2,m.v=ys(cr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=af(m.j,null),m.g.ea(m.v)),m.F=Date.now(),rl(m)}wu(c)}function yl(c){c.g&&(vl(c),c.g.cancel(),c.g=null)}function gu(c){yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Es(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function zo(c){if(!cu(c.h)&&!c.s){c.s=!0;var m=c.Ga;ce||oe(),Q||(ce(),Q=!0),ie.add(m,c),c.B=0}}function tf(c,m){return Si(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fs(p(c.Ga,c,m),Ss(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new Sr(this,this.j,c);let F=this.o;if(this.S&&(F?(F=w(F),C(F,this.S)):F=this.S),this.m!==null||this.O||(D.H=F,F=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(m+=v,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=wl(this,D,m),g=cr(this.I),Me(g,"RID",c),Me(g,"CVER",22),this.D&&Me(g,"X-HTTP-Session-Id",this.D),Ts(this,g),F&&(this.O?m="headers="+encodeURIComponent(String(Yh(F)))+"&"+m:this.m&&Uo(g,this.m,F)),ol(this.h,D),this.Ua&&Me(g,"TYPE","init"),this.P?(Me(g,"$req",m),Me(g,"SID","null"),D.T=!0,nl(D,g,null)):nl(D,g,m),this.G=2}}else this.G==3&&(c?yu(this,c):this.i.length==0||cu(this.h)||yu(this))};function yu(c,m){var g;m?g=m.l:g=c.U++;const v=cr(c.I);Me(v,"SID",c.K),Me(v,"RID",g),Me(v,"AID",c.T),Ts(c,v),c.m&&c.o&&Uo(v,c.m,c.o),g=new Sr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=wl(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ol(c.h,g),nl(g,v,m)}function Ts(c,m){c.H&&B(c.H,function(g,v){Me(m,v,g)}),c.l&&En({},function(g,v){Me(m,v,g)})}function wl(c,m,g){g=Math.min(c.i.length,g);var v=c.l?p(c.l.Na,c.l,c):null;e:{var D=c.i;let F=-1;for(;;){const q=["count="+g];F==-1?0<g?(F=D[0].g,q.push("ofs="+F)):F=0:q.push("ofs="+F);let Ce=!0;for(let St=0;St<g;St++){let be=D[St].g;const Nt=D[St].map;if(be-=F,0>be)F=Math.max(0,D[St].g-100),Ce=!1;else try{hl(Nt,q,"req"+be+"_")}catch{v&&v(Nt)}}if(Ce){v=q.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,v}function nf(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;ce||oe(),Q||(ce(),Q=!0),ie.add(m,c),c.v=0}}function xs(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fs(p(c.Fa,c),Ss(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fs(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),yl(this),rf(this))};function vl(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function rf(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=cr(c.qa);Me(m,"RID","rpc"),Me(m,"SID",c.K),Me(m,"AID",c.T),Me(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(m,"TO",c.ja),Me(m,"TYPE","xmlhttp"),Ts(c,m),c.m&&c.o&&Uo(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=ys(cr(m)),g.m=null,g.P=!0,$h(g,c)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),xs(this),Xe(19))};function Es(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function sf(c,m){var g=null;if(c.g==m){Es(c),vl(c),c.g=null;var v=2}else if(uu(c.h,m))g=m.D,Wh(c.h,m),v=1;else return;if(c.G!=0){if(m.o)if(v==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var D=c.B;v=Za(),gt(v,new su(v,g)),zo(c)}else nf(c);else if(D=m.s,D==3||D==0&&0<m.X||!(v==1&&tf(c,m)||v==2&&xs(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),D){case 1:ni(c,5);break;case 4:ni(c,10);break;case 3:ni(c,6);break;default:ni(c,2)}}}function Ss(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function ni(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),v=c.Xa;const D=!v;v=new $t(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ki(v,"https"),ys(v),D?dl(v.toString(),g):Ue(v.toString(),g)}else Xe(2);c.G=0,c.l&&c.l.sa(m),wu(c),gu(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function wu(c){if(c.G=0,c.ka=[],c.l){const m=du(c.h);(m.length!=0||c.i.length!=0)&&(P(c.ka,m),P(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function of(c,m,g){var v=g instanceof $t?cr(g):new $t(g);if(v.g!="")m&&(v.g=m+"."+v.g),Fo(v,v.s);else{var D=a.location;v=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;var F=new $t(null);v&&ki(F,v),m&&(F.g=m),D&&Fo(F,D),g&&(F.l=g),v=F}return g=c.D,m=c.ya,g&&m&&Me(v,g,m),Me(v,"VER",c.la),Ts(c,v),v}function af(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new We(new fl({eb:g})):new We(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}t=vu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $o(){}$o.prototype.g=function(c,m){return new fn(c,m)};function fn(c,m){zt.call(this),this.g=new Zh(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!b(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!b(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new As(this)}_(fn,zt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){ef(this.g)},fn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Xr(c),c=g);m.i.push(new Ng(m.Ya++,c)),m.G==3&&zo(m)},fn.prototype.N=function(){this.g.l=null,delete this.j,ef(this.g),delete this.g,fn.aa.N.call(this)};function lf(c){xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}_(lf,xi);function cf(){Xa.call(this),this.status=1}_(cf,Xa);function As(c){this.g=c}_(As,vu),As.prototype.ua=function(){gt(this.g,"a")},As.prototype.ta=function(c){gt(this.g,new lf(c))},As.prototype.sa=function(c){gt(this.g,new cf)},As.prototype.ra=function(){gt(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,wk=function(){return new $o},yk=function(){return Za()},gk=Ei,Hw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oo.NO_ERROR=0,Oo.TIMEOUT=8,Oo.HTTP_ERROR=6,lm=Oo,zh.COMPLETE="complete",pk=zh,Ti.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",zt.prototype.listen=zt.prototype.K,Gu=Ti,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,mk=We}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const ST="@firebase/firestore",AT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new ph("@firebase/firestore");function Ll(){return go.logLevel}function A$(t){go.setLogLevel(t)}function W(t,...e){if(go.logLevel<=ge.DEBUG){const n=e.map(Yv);go.debug(`Firestore (${Hc}): ${t}`,...n)}}function vt(t,...e){if(go.logLevel<=ge.ERROR){const n=e.map(Yv);go.error(`Firestore (${Hc}): ${t}`,...n)}}function Ir(t,...e){if(go.logLevel<=ge.WARN){const n=e.map(Yv);go.warn(`Firestore (${Hc}): ${t}`,...n)}}function Yv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vk(t,r,n)}function vk(t,e,n){let r=`FIRESTORE (${Hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vt(r),new Error(r)}function te(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||vk(e,i,r)}function k$(t,e){t||J(57014,e)}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class m5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class p5{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){te(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ut,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ut)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new _k(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class g5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new g5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){te(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class C${getToken(){return Promise.resolve(new qw(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=v5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Kw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Sy(i)===Sy(s)?ae(i,s):Sy(i)?1:-1}return ae(t.length,e.length)}const _5=55296,b5=57343;function Sy(t){const e=t.charCodeAt(0);return e>=_5&&e<=b5}function vc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function bk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="__name__";class oi{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=oi.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=oi.isNumericId(e),i=oi.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?oi.extractNumericId(e).compare(oi.extractNumericId(n)):Kw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}}class he extends oi{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new he(n)}static emptyPath(){return new he([])}}const I5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends oi{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return I5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yw}static keyField(){return new rt([Yw])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(he.fromString(e))}static fromName(e){return new K(he.fromString(e).popFirst(5))}static empty(){return new K(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e,n){if(!n)throw new $(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T5(t,e,n,r){if(e===!0&&r===!0)throw new $(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kT(t){if(!K.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CT(t){if(K.isDocumentKey(t))throw new $(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ik(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xp(t);throw new $(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Tk(t,e){if(e<=0)throw new $(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ba(t,e){if(!Ik(t))throw new $(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new $(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-62135596800,PT=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*PT);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<RT)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PT}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ba(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Et("string",Re._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Re(0,0))}static max(){return new re(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;class bc{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Qw(t){return t.fields.find(e=>e.kind===2)}function Yo(t){return t.fields.filter(e=>e.kind!==2)}function x5(t,e){let n=ae(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=E5(t.fields[r],e.fields[r]),n!==0)return n;return ae(t.fields.length,e.fields.length)}bc.UNKNOWN_ID=-1;class ha{constructor(e,n){this.fieldPath=e,this.kind=n}}function E5(t,e){const n=rt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ae(t.kind,e.kind)}class Ic{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ic(0,rr.min())}}function xk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new rr(i,K.empty(),e)}function Ek(t){return new rr(t.readTime,t.key,_c)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(re.min(),K.empty(),_c)}static max(){return new rr(re.max(),K.empty(),_c)}}function Xv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ak{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==Sk)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="SimpleDb";class Zp{static open(e,n,r,i){try{return new Zp(n,e.transaction(i,r))}catch(s){throw new ud(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ut,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ud(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Zv(r.target.error);this.S.reject(new ud(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(Hn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new A5(n)}}class pi{static delete(e){return W(Hn,"Removing database:",e),Zo(LS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Iv())return!1;if(pi.F())return!0;const e=Ct(),n=pi.M(e),r=0<n&&n<10,i=kk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,pi.M(Ct())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(W(Hn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new $(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ud(e,o))},i.onupgradeneeded=s=>{W(Hn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{W(Hn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Zp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(W(Hn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class S5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Zo(this.U.delete())}}class ud extends ${constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ko(t){return t.name==="IndexedDbTransactionError"}class A5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W(Hn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(W(Hn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zo(r)}add(e){return W(Hn,"ADD",this.store.name,e,e),Zo(this.store.add(e))}get(e){return Zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),W(Hn,"GET",this.store.name,e,n),n))}delete(e){return W(Hn,"DELETE",this.store.name,e),Zo(this.store.delete(e))}count(){return W(Hn,"COUNT",this.store.name),Zo(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){W(Hn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=Zv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new S5(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const h=u.catch(f=>(l.done(),L.reject(f)));r.push(h)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zo(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Zv(r.target.error);n(i)}})}let NT=!1;function Zv(t){const e=pi.M(Ct());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NT||(NT=!0,setTimeout(()=>{throw r},0)),r}}return t}const dd="IndexBackfiller";class k5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){W(dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();W(dd,`Documents written: ${n}`)}catch(n){ko(n)?W(dd,"Ignoring IndexedDB error during index backfill: ",n):await Ao(n)}await this.re(6e4)})}}class C5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W(dd,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(W(dd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Ek(s);Xv(o,r)>0&&(r=o)}),new rr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=-1;function Th(t){return t==null}function Wd(t){return t===0&&1/t==-1/0}function Ck(t){return typeof t=="number"&&Number.isInteger(t)&&!Wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="";function an(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DT(e)),e=R5(t.get(n),e);return DT(e)}function R5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case sp:n+="";break;default:n+=s}}return n}function DT(t){return t+sp+""}function ui(t){const e=t.length;if(te(e>=2,64408,{path:t}),e===2)return te(t.charAt(0)===sp&&t.charAt(1)==="",56145,{path:t}),he.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(sp,s);switch((o<0||o>n)&&J(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J(61167,{path:t})}s=o+2}return new he(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="remoteDocuments",xh="owner",El="owner",Gd="mutationQueues",P5="userId",jr="mutations",LT="batchId",la="userMutationsIndex",MT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){return[t,an(e)]}function Rk(t,e,n){return[t,an(e),n]}const N5={},Tc="documentMutations",op="remoteDocumentsV14",D5=["prefixPath","collectionGroup","readTime","documentId"],um="documentKeyIndex",L5=["prefixPath","collectionGroup","documentId"],Pk="collectionGroupIndex",M5=["collectionGroup","readTime","prefixPath","documentId"],Hd="remoteDocumentGlobal",Jw="remoteDocumentGlobalKey",xc="targets",Nk="queryTargetsIndex",O5=["canonicalId","targetId"],Ec="targetDocuments",V5=["targetId","path"],e_="documentTargetsIndex",j5=["path","targetId"],ap="targetGlobalKey",fa="targetGlobal",qd="collectionParents",F5=["collectionId","parent"],Sc="clientMetadata",U5="clientId",eg="bundles",B5="bundleId",tg="namedQueries",z5="name",t_="indexConfiguration",$5="indexId",Xw="collectionGroupIndex",W5="collectionGroup",hd="indexState",G5=["indexId","uid"],Dk="sequenceNumberIndex",H5=["uid","sequenceNumber"],fd="indexEntries",q5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lk="documentKeyIndex",K5=["indexId","uid","orderedDocumentKey"],ng="documentOverlays",Y5=["userId","collectionPath","documentId"],Zw="collectionPathOverlayIndex",Q5=["userId","collectionPath","largestBatchId"],Mk="collectionGroupOverlayIndex",J5=["userId","collectionGroup","largestBatchId"],n_="globals",X5="name",Ok=[Gd,jr,Tc,Qo,xc,xh,fa,Ec,Sc,Hd,qd,eg,tg],Z5=[...Ok,ng],Vk=[Gd,jr,Tc,op,xc,xh,fa,Ec,Sc,Hd,qd,eg,tg,ng],jk=Vk,r_=[...jk,t_,hd,fd],eF=r_,Fk=[...r_,n_],tF=Fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends Ak{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rt(t,e){const n=Y(t);return pi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Uk(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Bk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}}class Nf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=i??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof De)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new De(this.comparator);return n.data=e,n}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new De(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zk("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const nF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(te(!!t,39018),typeof t=="string"){let e=0;const n=nF.exec(t);if(te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="server_timestamp",Wk="__type__",Gk="__previous_value__",Hk="__local_write_time__";function rg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Wk])==null?void 0:r.stringValue)===$k}function ig(t){const e=t.mapValue.fields[Gk];return rg(e)?ig(e):e}function Kd(t){const e=es(t.mapValue.fields[Hk].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Yd="(default)";class Ta{constructor(e,n){this.projectId=e,this.database=n||Yd}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__type__",qk="__max__",Js={mapValue:{fields:{__type__:{stringValue:qk}}}},s_="__vector__",Ac="value",dm={nullValue:"NULL_VALUE"};function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rg(t)?4:Kk(t)?9007199254740991:sg(t)?10:11:J(28295,{value:t})}function vi(t,e){if(t===e)return!0;const n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kd(t).isEqual(Kd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=es(i.timestampValue),a=es(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),a=et(s.doubleValue);return o===a?Wd(o)===Wd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vc(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(OT(o)!==OT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Qd(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function wo(t,e){if(t===e)return 0;const n=yo(t),r=yo(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=et(s.integerValue||s.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return jT(t.timestampValue,e.timestampValue);case 4:return jT(Kd(t),Kd(e));case 5:return Kw(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ts(s),l=ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ae(a[u],l[u]);if(h!==0)return h}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ae(et(s.latitude),et(o.latitude));return a!==0?a:ae(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return FT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,_,A;const a=s.fields||{},l=o.fields||{},u=(p=a[Ac])==null?void 0:p.arrayValue,h=(y=l[Ac])==null?void 0:y.arrayValue,f=ae(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:FT(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Js.mapValue&&o===Js.mapValue)return 0;if(s===Js.mapValue)return 1;if(o===Js.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Kw(l[f],h[f]);if(p!==0)return p;const y=wo(a[l[f]],u[h[f]]);if(y!==0)return y}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function jT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=es(t),r=es(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function FT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=wo(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function kc(t){return t0(t)}function t0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=t0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${t0(n.fields[o])}`;return i+"}"}(t.mapValue):J(61005,{value:t})}function hm(t){switch(yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ig(t);return e?16+hm(e):16;case 5:return 2*t.stringValue.length;case 6:return ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+hm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Co(r.fields,(s,o)=>{i+=s.length+hm(o)}),i}(t.mapValue);default:throw J(13486,{value:t})}}function xa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function n0(t){return!!t&&"integerValue"in t}function Jd(t){return!!t&&"arrayValue"in t}function UT(t){return!!t&&"nullValue"in t}function BT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fm(t){return!!t&&"mapValue"in t}function sg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[i_])==null?void 0:r.stringValue)===s_}function md(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=md(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=md(t.arrayValue.values[n]);return e}return{...t}}function Kk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qk}const Yk={mapValue:{fields:{[i_]:{stringValue:s_},[Ac]:{arrayValue:{}}}}};function iF(t){return"nullValue"in t?dm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?xa(Ta.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?sg(t)?Yk:{mapValue:{}}:J(35942,{value:t})}function sF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?xa(Ta.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Yk:"mapValue"in t?sg(t)?{mapValue:{}}:Js:J(61959,{value:t})}function zT(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $T(t,e){const n=wo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=md(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qt(md(this.value))}}function Qk(t){const e=[];return Co(t.fields,(n,r)=>{const i=new rt([n]);if(fm(r)){const s=Qk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qe(e,0,re.min(),re.min(),re.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new qe(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new qe(e,2,n,re.min(),re.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,re.min(),re.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.position=e,this.inclusive=n}}function WT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=wo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function oF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{}class ye extends Jk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aF(e,n,r):n==="array-contains"?new uF(e,r):n==="in"?new rC(e,r):n==="not-in"?new dF(e,r):n==="array-contains-any"?new hF(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lF(e,r):new cF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends Jk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pe(e,n)}matches(e){return Cc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Cc(t){return t.op==="and"}function r0(t){return t.op==="or"}function o_(t){return Xk(t)&&Cc(t)}function Xk(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function i0(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+kc(t.value);if(o_(t))return t.filters.map(e=>i0(e)).join(",");{const e=t.filters.map(n=>i0(n)).join(",");return`${t.op}(${e})`}}function Zk(t,e){return t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(t,e):t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Zk(o,i.filters[a]),!0):!1}(t,e):void J(19439)}function eC(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function tC(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${kc(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(tC).join(" ,")+"}"}(t):"Filter"}class aF extends ye{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class lF extends ye{constructor(e,n){super(e,"in",n),this.keys=nC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cF extends ye{constructor(e,n){super(e,"not-in",n),this.keys=nC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class uF extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jd(n)&&Qd(n.arrayValue,this.value)}}class rC extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qd(this.value.arrayValue,n)}}class dF extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qd(this.value.arrayValue,n)}}class hF extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function s0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new fF(t,e,n,r,i,s,o)}function Ea(t){const e=Y(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>i0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>kc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>kc(r)).join(",")),e.Te=n}return e.Te}function Eh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Zk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GT(t.startAt,e.startAt)&&GT(t.endAt,e.endAt)}function lp(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function cp(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function HT(t,e,n){let r=dm,i=!0;for(const s of cp(t,e)){let o=dm,a=!0;switch(s.op){case"<":case"<=":o=iF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=dm}zT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];zT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function qT(t,e,n){let r=Js,i=!0;for(const s of cp(t,e)){let o=Js,a=!0;switch(s.op){case">=":case">":o=sF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Js}$T({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];$T({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iC(t,e,n,r,i,s,o,a){return new os(t,e,n,r,i,s,o,a)}function qc(t){return new os(t)}function KT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function a_(t){return t.collectionGroup!==null}function ac(t){const e=Y(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new De(rt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Xd(s,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Xd(rt.keyField(),r))}return e.Ie}function ln(t){const e=Y(t);return e.Ee||(e.Ee=oC(e,ac(t))),e.Ee}function sC(t){const e=Y(t);return e.de||(e.de=oC(e,t.explicitOrderBy)),e.de}function oC(t,e){if(t.limitType==="F")return s0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xd(i.field,s)});const n=t.endAt?new vo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vo(t.startAt.position,t.startAt.inclusive):null;return s0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function o0(t,e){const n=t.filters.concat([e]);return new os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function up(t,e,n){return new os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sh(t,e){return Eh(ln(t),ln(e))&&t.limitType===e.limitType}function aC(t){return`${Ea(ln(t))}|lt:${t.limitType}`}function Ml(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tC(i)).join(", ")}]`),Th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>kc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>kc(i)).join(",")),`Target(${r})`}(ln(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ac(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=WT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,ac(r),i)||r.endAt&&!function(o,a,l){const u=WT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,ac(r),i))}(t,e)}function lC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cC(t){return(e,n)=>{let r=!1;for(const i of ac(t)){const s=mF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mF(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?wo(l,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new ze(K.comparator);function Pn(){return pF}const uC=new ze(K.comparator);function Hu(...t){let e=uC;for(const n of t)e=e.insert(n.key,n);return e}function dC(t){let e=uC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function di(){return pd()}function hC(){return pd()}function pd(){return new as(t=>t.toString(),(t,e)=>t.isEqual(e))}const gF=new ze(K.comparator),yF=new De(K.comparator);function le(...t){let e=yF;for(const n of t)e=e.add(n);return e}const wF=new De(ae);function l_(){return wF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function fC(t){return{integerValue:""+t}}function mC(t,e){return Ck(e)?fC(e):c_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this._=void 0}}function vF(t,e,n){return t instanceof Rc?function(i,s){const o={fields:{[Wk]:{stringValue:$k},[Hk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rg(s)&&(s=ig(s)),s&&(o.fields[Gk]=s),{mapValue:o}}(n,e):t instanceof Sa?gC(t,e):t instanceof Aa?yC(t,e):function(i,s){const o=pC(i,s),a=YT(o)+YT(i.Ae);return n0(o)&&n0(i.Ae)?fC(a):c_(i.serializer,a)}(t,e)}function _F(t,e,n){return t instanceof Sa?gC(t,e):t instanceof Aa?yC(t,e):n}function pC(t,e){return t instanceof Pc?function(r){return n0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Rc extends og{}class Sa extends og{constructor(e){super(),this.elements=e}}function gC(t,e){const n=wC(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Aa extends og{constructor(e){super(),this.elements=e}}function yC(t,e){let n=wC(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class Pc extends og{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function YT(t){return et(t.integerValue||t.doubleValue)}function wC(t){return Jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.field=e,this.transform=n}}function bF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sa&&i instanceof Sa||r instanceof Aa&&i instanceof Aa?vc(r.elements,i.elements,vi):r instanceof Pc&&i instanceof Pc?vi(r.Ae,i.Ae):r instanceof Rc&&i instanceof Rc}(t.transform,e.transform)}class IF{constructor(e,n){this.version=e,this.transformResults=n}}class it{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new it}static exists(e){return new it(void 0,e)}static updateTime(e){return new it(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ag{}function vC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yc(t.key,it.none()):new Kc(t.key,t.data,it.none());{const n=t.data,r=qt.empty();let i=new De(rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ls(t.key,r,new Rn(i.toArray()),it.none())}}function TF(t,e,n){t instanceof Kc?function(i,s,o){const a=i.value.clone(),l=JT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ls?function(i,s,o){if(!mm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=JT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(_C(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gd(t,e,n,r){return t instanceof Kc?function(s,o,a,l){if(!mm(s.precondition,o))return a;const u=s.value.clone(),h=XT(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ls?function(s,o,a,l){if(!mm(s.precondition,o))return a;const u=XT(s.fieldTransforms,l,o),h=o.data;return h.setAll(_C(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return mm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function xF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=pC(r.transform,i||null);s!=null&&(n===null&&(n=qt.empty()),n.set(r.field,s))}return n||null}function QT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vc(r,i,(s,o)=>bF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kc extends ag{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ls extends ag{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _C(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function JT(t,e,n){const r=new Map;te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_F(o,a,n[i]))}return r}function XT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,vF(s,o,e))}return r}class Yc extends ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u_ extends ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=vC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,(n,r)=>QT(n,r))&&vc(this.baseMutations,e.baseMutations,(n,r)=>QT(n,r))}}class h_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return gF}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new h_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Te;function IC(t){switch(t){case O.OK:return J(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function TC(t){if(t===void 0)return vt("GRPC error has no .code"),O.UNKNOWN;switch(t){case It.OK:return O.OK;case It.CANCELLED:return O.CANCELLED;case It.UNKNOWN:return O.UNKNOWN;case It.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case It.INTERNAL:return O.INTERNAL;case It.UNAVAILABLE:return O.UNAVAILABLE;case It.UNAUTHENTICATED:return O.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case It.NOT_FOUND:return O.NOT_FOUND;case It.ALREADY_EXISTS:return O.ALREADY_EXISTS;case It.PERMISSION_DENIED:return O.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case It.ABORTED:return O.ABORTED;case It.OUT_OF_RANGE:return O.OUT_OF_RANGE;case It.UNIMPLEMENTED:return O.UNIMPLEMENTED;case It.DATA_LOSS:return O.DATA_LOSS;default:return J(39323,{code:t})}}(Te=It||(It={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new ho([4294967295,4294967295],0);function ZT(t){const e=xC().encode(t),n=new fk;return n.update(e),new Uint8Array(n.digest())}function ex(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ho([n,r],0),new ho([i,s],0)]}class m_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qu(`Invalid padding: ${n}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ho.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ho.fromNumber(r)));return i.compare(SF)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ZT(e),[r,i]=ex(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new m_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=ZT(e),[r,i]=ex(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ch(re.min(),i,new ze(ae),Pn(),le())}}class Rh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rh(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class EC{constructor(e,n){this.targetId=e,this.Ce=n}}class SC{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tx{constructor(){this.ve=0,this.Fe=nx(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:s})}}),new Rh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=nx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AF{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=Df(),this.He=Df(),this.Ye=new ze(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(lp(s))if(r===0){const o=new K(s.path);this.et(n,o,qe.newNoDocument(o,re.min()))}else te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}yd==null||yd.lt(function(h,f,p,y,_){var I,b,x;const A={localCacheCount:h,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},P=f.unchangedNames;return P&&(A.bloomFilter={applied:_===0,hashCount:(P==null?void 0:P.hashCount)??0,bitmapLength:((b=(I=P==null?void 0:P.bits)==null?void 0:I.bitmap)==null?void 0:b.length)??0,padding:((x=P==null?void 0:P.bits)==null?void 0:x.padding)??0,mightContain:N=>(y==null?void 0:y.mightContain(N))??!1}),A}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ts(r).toUint8Array()}catch(l){if(l instanceof zk)return Ir("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new m_(o,i,s)}catch(l){return Ir(l instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&lp(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,qe.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ch(e,n,this.Ye,this.je,r);return this.je=Pn(),this.Je=Df(),this.He=Df(),this.Ye=new ze(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new De(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new De(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Df(){return new ze(K.comparator)}function nx(){return new ze(K.comparator)}const kF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),CF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),RF=(()=>({and:"AND",or:"OR"}))();class PF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function a0(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function Nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NF(t,e){return Nc(t,e.toTimestamp())}function _t(t){return te(!!t,49232),re.fromTimestamp(function(n){const r=es(n);return new Re(r.seconds,r.nanos)}(t))}function p_(t,e){return l0(t,e).canonicalString()}function l0(t,e){const n=function(i){return new he(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kC(t){const e=he.fromString(t);return te(VC(e),10190,{key:e.toString()}),e}function Zd(t,e){return p_(t.databaseId,e.path)}function gi(t,e){const n=kC(e);if(n.get(1)!==t.databaseId.projectId)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(PC(n))}function CC(t,e){return p_(t.databaseId,e)}function RC(t){const e=kC(t);return e.length===4?he.emptyPath():PC(e)}function c0(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PC(t){return te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function rx(t,e,n){return{name:Zd(t,e),fields:n.value.mapValue.fields}}function lg(t,e,n){const r=gi(t,e.name),i=_t(e.updateTime),s=e.createTime?_t(e.createTime):re.min(),o=new qt({mapValue:{fields:e.fields}}),a=qe.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function DF(t,e){return"found"in e?function(r,i){te(!!i.found,43571),i.found.name,i.found.updateTime;const s=gi(r,i.found.name),o=_t(i.found.updateTime),a=i.found.createTime?_t(i.found.createTime):re.min(),l=new qt({mapValue:{fields:i.found.fields}});return qe.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){te(!!i.missing,3894),te(!!i.readTime,22933);const s=gi(r,i.missing),o=_t(i.readTime);return qe.newNoDocument(s,o)}(t,e):J(7234,{result:e})}function LF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(te(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(te(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?O.UNKNOWN:TC(u.code);return new $(h,u.message||"")}(o);n=new SC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gi(t,r.document.name),s=_t(r.document.updateTime),o=r.document.createTime?_t(r.document.createTime):re.min(),a=new qt({mapValue:{fields:r.document.fields}}),l=qe.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new pm(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gi(t,r.document),s=r.readTime?_t(r.readTime):re.min(),o=qe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gi(t,r.document),s=r.removedTargetIds||[];n=new pm([],s,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new EF(i,s),a=r.targetId;n=new EC(a,o)}}return n}function eh(t,e){let n;if(e instanceof Kc)n={update:rx(t,e.key,e.value)};else if(e instanceof Yc)n={delete:Zd(t,e.key)};else if(e instanceof ls)n={update:rx(t,e.key,e.data),updateMask:UF(e.fieldMask)};else{if(!(e instanceof u_))return J(16599,{Vt:e.type});n={verify:Zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Sa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:NF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(t,e.precondition)),n}function u0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?it.updateTime(_t(s.updateTime)):s.exists!==void 0?it.exists(s.exists):it.none()}(e.currentDocument):it.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Rc;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Sa(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Aa(h)}else"increment"in a?l=new Pc(o,a.increment):J(16584,{proto:a});const u=rt.fromServerFormat(a.fieldPath);return new kh(u,l)}(t,i)):[];if(e.update){e.update.name;const i=gi(t,e.update.name),s=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Rn(u.map(h=>rt.fromServerFormat(h)))}(e.updateMask);return new ls(i,s,o,n,r)}return new Kc(i,s,n,r)}if(e.delete){const i=gi(t,e.delete);return new Yc(i,n)}if(e.verify){const i=gi(t,e.verify);return new u_(i,n)}return J(1463,{proto:e})}function MF(t,e){return t&&t.length>0?(te(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?_t(i.updateTime):_t(s);return o.isEqual(re.min())&&(o=_t(s)),new IF(o,i.transformResults||[])}(n,e))):[]}function NC(t,e){return{documents:[CC(t,e.path)]}}function cg(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CC(t,i);const s=function(u){if(u.length!==0)return OC(Pe.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Hs(p.field),direction:VF(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=a0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function DC(t,e,n,r){const{ft:i,parent:s}=cg(t,e),o={},a=[];let l=0;return n.forEach(u=>{const h=r?u.alias:"aggregate_"+l++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:Hs(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:Hs(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function LC(t){let e=RC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){te(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=MC(f);return p instanceof Pe&&o_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new Xd(Ol(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Th(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new vo(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new vo(y,p)}(n.endAt)),iC(e,i,o,s,a,"F",l,u)}function OF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function MC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ol(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ol(n.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ol(n.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ol(n.unaryFilter.field);return ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return ye.create(Ol(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(r=>MC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function VF(t){return kF[t]}function jF(t){return CF[t]}function FF(t){return RF[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Ol(t){return rt.fromServerFormat(t.fieldPath)}function OC(t){return t instanceof ye?function(n){if(n.op==="=="){if(BT(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(UT(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BT(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(UT(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:jF(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const r=n.getFilters().map(i=>OC(i));return r.length===1?r[0]:{compositeFilter:{op:FF(n.op),filters:r}}}(t):J(54877,{filter:t})}function UF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,r,i,s=re.min(),o=re.min(),a=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.yt=e}}function BF(t,e){let n;if(e.document)n=lg(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=Ca(e.noDocument.readTime);n=qe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J(56709);{const r=K.fromSegments(e.unknownDocument.path),i=Ca(e.unknownDocument.version);n=qe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Re(i[0],i[1]);return re.fromTimestamp(s)}(e.readTime)),n}function ix(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Zd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Nc(s,o.version.toTimestamp()),createTime:Nc(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ka(e.version)};else{if(!e.isUnknownDocument())return J(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:ka(e.version)}}return r}function dp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ka(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ca(t){const e=new Re(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function ea(t,e){const n=(e.baseMutations||[]).map(s=>u0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>u0(t.yt,s)),i=Re.fromMillis(e.localWriteTimeMs);return new d_(e.batchId,i,n,r)}function Ku(t){const e=Ca(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ca(t.lastLimboFreeSnapshotVersion):re.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return te(o===1,1966,{count:o}),ln(qc(RC(s.documents[0])))}(t.query):function(s){return ln(LC(s))}(t.query),new $i(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function FC(t,e){const n=ka(e.snapshotVersion),r=ka(e.lastLimboFreeSnapshotVersion);let i;i=lp(e.target)?NC(t.yt,e.target):cg(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ea(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ug(t){const e=LC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?up(e,e.limit,"L"):e}function Ay(t,e){return new f_(e.largestBatchId,u0(t.yt,e.overlayMutation))}function sx(t,e){const n=e.path.lastSegment();return[t,an(e.path.popLast()),n]}function ox(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ka(r.readTime),documentKey:an(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{getBundleMetadata(e,n){return ax(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ca(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ax(e).put(function(i){return{bundleId:i.id,createTime:ka(_t(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return lx(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:ug(s.bundledQuery),readTime:Ca(s.readTime)}}(r)})}saveNamedQuery(e,n){return lx(e).put(function(i){return{name:i.name,readTime:ka(_t(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function ax(t){return Rt(t,eg)}function lx(t){return Rt(t,tg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new dg(e,r)}getOverlay(e,n){return Nu(e).get(sx(this.userId,n)).next(r=>r?Ay(this.serializer,r):null)}getOverlays(e,n){const r=di();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new f_(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(an(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Nu(e).Z(Zw,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=di(),s=an(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Nu(e).J(Zw,o).next(a=>{for(const l of a){const u=Ay(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=di();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Nu(e).ee({index:Mk,range:a},(l,u,h)=>{const f=Ay(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}St(e,n){return Nu(e).put(function(i,s,o){const[a,l,u]=sx(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:eh(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Nu(t){return Rt(t,ng)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{bt(e){return Rt(e,n_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?dt.fromUint8Array(r):dt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(et(e.integerValue));else if("doubleValue"in e){const r=et(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Wd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=es(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ts(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Kk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):sg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):J(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Ac,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(et(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ta.Kt=new ta;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=255;function WF(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function cx(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=WF(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class GF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=cx(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=cx(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Al),this.sn(255)}_n(){this.an(Al),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Al?(this.sn(Al),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Al?(this.an(Al),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HF{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class qF{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Du{constructor(){this.cn=new GF,this.ln=new HF(this.cn),this.hn=new qF(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new na(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:gm(this.En),directionalValue:gm(this.dn),orderedDocumentKey:gm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ds(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ux(t.En,e.En),n!==0?n:(n=ux(t.dn,e.dn),n!==0?n:K.comparator(t.In,e.In)))}function ux(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function gm(t){return $S()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function dx(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class hx{constructor(e){this.mn=new De((n,r)=>rt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Qw(e);if(n!==void 0&&!this.wn(n))return!1;const r=Yo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new De(rt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ha(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ha(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ha(r.field,r.dir==="asc"?0:1)));return new bc(bc.UNKNOWN_ID,this.collectionId,n,Ic.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){var n,r;if(te(t instanceof ye||t instanceof Pe,20012),t instanceof ye){if(t instanceof rC){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>ye.create(t.field,"==",s)))||[];return Pe.create(i,"or")}return t}const e=t.filters.map(i=>UC(i));return Pe.create(e,t.op)}function KF(t){if(t.getFilters().length===0)return[];const e=f0(UC(t));return te(BC(e),7391),d0(e)||h0(e)?[e]:e.getFilters()}function d0(t){return t instanceof ye}function h0(t){return t instanceof Pe&&o_(t)}function BC(t){return d0(t)||h0(t)||function(n){if(n instanceof Pe&&r0(n)){for(const r of n.getFilters())if(!d0(r)&&!h0(r))return!1;return!0}return!1}(t)}function f0(t){if(te(t instanceof ye||t instanceof Pe,34018),t instanceof ye)return t;if(t.filters.length===1)return f0(t.filters[0]);const e=t.filters.map(r=>f0(r));let n=Pe.create(e,t.op);return n=hp(n),BC(n)?n:(te(n instanceof Pe,64498),te(Cc(n),40251),te(n.filters.length>1,57927),n.filters.reduce((r,i)=>g_(r,i)))}function g_(t,e){let n;return te(t instanceof ye||t instanceof Pe,38388),te(e instanceof ye||e instanceof Pe,25473),n=t instanceof ye?e instanceof ye?function(i,s){return Pe.create([i,s],"and")}(t,e):fx(t,e):e instanceof ye?fx(e,t):function(i,s){if(te(i.filters.length>0&&s.filters.length>0,48005),Cc(i)&&Cc(s))return eC(i,s.getFilters());const o=r0(i)?i:s,a=r0(i)?s:i,l=o.filters.map(u=>g_(u,a));return Pe.create(l,"or")}(t,e),hp(n)}function fx(t,e){if(Cc(e))return eC(e,t.getFilters());{const n=e.filters.map(r=>g_(t,r));return Pe.create(n,"or")}}function hp(t){if(te(t instanceof ye||t instanceof Pe,11850),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return hp(e[0]);if(Xk(t))return t;const n=e.map(i=>hp(i)),r=[];return n.forEach(i=>{i instanceof ye?r.push(i):i instanceof Pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.Cn=new y_}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(rr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class y_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new De(he.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new De(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="IndexedDbIndexManager",Lf=new Uint8Array(0);class QF{constructor(e,n){this.databaseId=n,this.vn=new y_,this.Fn=new as(r=>Ea(r),(r,i)=>Eh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:an(i)};return px(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[bk(n),""],!1,!0);return px(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ui(o.parent))}return r})}addFieldIndex(e,n){const r=Lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Cl(e);return s.next(a=>{o.put(ox(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Lu(e),i=Cl(e),s=kl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Lu(e),r=kl(e),i=Cl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new hx(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=kl(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=le();const a=[];return L.forEach(s,(l,u)=>{W(mx,`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${Ea(n)}`);const h=function(x,N){const U=Qw(N);if(U===void 0)return null;for(const B of cp(x,U.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(u,l),f=function(x,N){const U=new Map;for(const B of Yo(N))for(const T of cp(x,B.fieldPath))switch(T.op){case"==":case"in":U.set(B.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return U.set(B.fieldPath.canonicalString(),T.value),Array.from(U.values())}return null}(u,l),p=function(x,N){const U=[];let B=!0;for(const T of Yo(N)){const w=T.kind===0?HT(x,T.fieldPath,x.startAt):qT(x,T.fieldPath,x.startAt);U.push(w.value),B&&(B=w.inclusive)}return new vo(U,B)}(u,l),y=function(x,N){const U=[];let B=!0;for(const T of Yo(N)){const w=T.kind===0?qT(x,T.fieldPath,x.endAt):HT(x,T.fieldPath,x.endAt);U.push(w.value),B&&(B=w.inclusive)}return new vo(U,B)}(u,l),_=this.On(l,u,p),A=this.On(l,u,y),P=this.Nn(l,u,f),I=this.Bn(l.indexId,h,_,p.inclusive,A,y.inclusive,P);return L.forEach(I,b=>r.Y(b,n.limit).next(x=>{x.forEach(N=>{const U=K.fromSegments(N.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=KF(Pe.create(e.filters,"and")).map(r=>s0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.Ln(n[f/u]):Lf,y=this.kn(e,p,r[f%u],i),_=this.qn(e,p,s[f%u],o),A=a.map(P=>this.kn(e,p,P,!0));h.push(...this.createRange(y,_,A))}return h}kn(e,n,r,i){const s=new na(e,K.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new na(e,K.empty(),n,r);return i?s.An():s}xn(e,n){const r=new hx(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new De(rt.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Du;for(const i of Yo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ta.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Du;return ta.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Du;return ta.Kt.Dt(xa(this.databaseId,n),r.Pn(function(s){const o=Yo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Du);let s=0;for(const o of Yo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Jd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ta.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Du;l.seed(a.un()),ta.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Lu(e),i=Cl(e);return(n?r.J(Xw,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new Ic(f.sequenceNumber,new rr(Ca(f.readTime),new K(ui(f.documentKey)),f.largestBatchId)):Ic.empty(),y=h.fields.map(([_,A])=>new ha(rt.fromServerFormat(_),A));return new bc(h.indexId,h.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Lu(e),s=Cl(e);return this.Gn(e).next(o=>i.J(Xw,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(ox(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const h=this.jn(s,l);return u.isEqual(h)?L.resolve():this.Jn(e,s,l,u,h)}))))})}Hn(e,n,r,i){return kl(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return kl(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=kl(e);let s=new De(Ds);return i.ee({index:Lk,range:IDBKeyRange.only([r.indexId,this.uid,gm(this.$n(r,n))])},(o,a)=>{s=s.add(new na(r.indexId,n,dx(a.arrayValue),dx(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new De(Ds);const i=this.Qn(n,e);if(i==null)return r;const s=Qw(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Jd(o))for(const a of o.arrayValue.values||[])r=r.add(new na(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new na(n.indexId,e.key,Lf,i));return r}Jn(e,n,r,i,s){W(mx,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const y=l.getIterator(),_=u.getIterator();let A=Sl(y),P=Sl(_);for(;A||P;){let I=!1,b=!1;if(A&&P){const x=h(A,P);x<0?b=!0:x>0&&(I=!0)}else A!=null?b=!0:I=!0;I?(f(P),P=Sl(_)):b?(p(A),A=Sl(y)):(A=Sl(y),P=Sl(_))}}(i,s,Ds,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return Cl(e).ee({index:Dk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ds(o,a)).filter((o,a,l)=>!a||Ds(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ds(o,e),l=Ds(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Lf,K.empty()),l=i[o+1].Vn(this.uid,Lf,K.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Ds(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(gx)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||J(44426))).next(gx)}}function px(t){return Rt(t,qd)}function kl(t){return Rt(t,fd)}function Lu(t){return Rt(t,t_)}function Cl(t){return Rt(t,hd)}function gx(t){te(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Xv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new rr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zC=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e,n){const r=t.store(jr),i=t.store(Tc),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{te(a===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=Rk(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return L.waitFor(s).next(()=>u)}function fp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(zC,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class hg{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){te(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new hg(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).ee({index:la,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Vl(e),o=Ls(e);return o.add({}).next(a=>{te(typeof a=="number",49019);const l=new d_(a,n,r,i),u=function(y,_,A){const P=A.baseMutations.map(b=>eh(y.yt,b)),I=A.mutations.map(b=>eh(y.yt,b));return{userId:_,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:P,mutations:I}}(this.serializer,this.userId,l),h=[];let f=new De((p,y)=>ae(p.canonicalString(),y.canonicalString()));for(const p of i){const y=Rk(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,N5))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Ls(e).get(n).next(r=>r?(te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),ea(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ls(e).ee({index:la,range:i},(o,a,l)=>{a.userId===this.userId&&(te(a.batchId>=r,47524,{tr:r}),s=ea(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fo;return Ls(e).ee({index:la,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,fo],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).J(la,n).next(r=>r.map(i=>ea(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Vl(e).ee({range:i},(o,a,l)=>{const[u,h,f]=o,p=ui(h);if(u===this.userId&&n.path.isEqual(p))return Ls(e).get(f).next(y=>{if(!y)throw J(61480,{nr:o,batchId:f});te(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:f}),s.push(ea(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new De(ae);const i=[];return n.forEach(s=>{const o=cm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Vl(e).ee({range:a},(u,h,f)=>{const[p,y,_]=u,A=ui(y);p===this.userId&&s.path.isEqual(A)?r=r.add(_):f.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=cm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new De(ae);return Vl(e).ee({range:o},(l,u,h)=>{const[f,p,y]=l,_=ui(p);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(y)):h.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ls(e).get(s).next(o=>{if(o===null)throw J(35274,{batchId:s});te(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(ea(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return $C(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Vl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ui(s[1]);i.push(l)}else a.done()}).next(()=>{te(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return WC(e,this.userId,n)}_r(e){return GC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:fo,lastStreamToken:""})}}function WC(t,e,n){const r=cm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Vl(t).ee({range:s,X:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Ls(t){return Rt(t,jr)}function Vl(t){return Rt(t,Tc)}function GC(t){return Rt(t,Gd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ra(0)}static cr(){return new Ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Ra(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>re.fromTimestamp(new Re(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Rl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(te(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Rl(e).ee((o,a)=>{const l=Ku(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Rl(e).ee((r,i)=>{const s=Ku(i);n(s)})}lr(e){return wx(e).get(ap).next(n=>(te(n!==null,2888),n))}hr(e,n){return wx(e).put(ap,n)}Pr(e,n){return Rl(e).put(FC(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ea(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Rl(e).ee({range:i,index:Nk},(o,a,l)=>{const u=Ku(a);Eh(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=qs(e);return n.forEach(o=>{const a=an(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=qs(e);return L.forEach(n,s=>{const o=an(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=qs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qs(e);let s=le();return i.ee({range:r,X:!0},(o,a,l)=>{const u=ui(o[1]),h=new K(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=an(n.path),i=IDBKeyRange.bound([r],[bk(r)],!1,!0);let s=0;return qs(e).ee({index:e_,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Rl(e).get(n).next(r=>r?Ku(r):null)}}function Rl(t){return Rt(t,xc)}function wx(t){return Rt(t,fa)}function qs(t){return Rt(t,Ec)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="LruGarbageCollector",HC=1048576;function _x([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class XF{constructor(e){this.Ir=e,this.buffer=new De(_x),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_x(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(vx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?W(vx,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.Vr(3e5)})}}class ZF{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cn.ce);const r=new XF(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(yx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ll()<=ge.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function KC(t,e){return new ZF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n){this.db=e,this.garbageCollector=KC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Mf(e,r)}removeReference(e,n,r){return Mf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Mf(e,n)}br(e,n){return function(i,s){let o=!1;return GC(i).te(a=>WC(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,re.min()),qs(e).delete(function(f){return[0,an(f.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Mf(e,n)}Sr(e,n){const r=qs(e);let i,s=Cn.ce;return r.ee({index:e_},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.ce&&n(new K(ui(i)),s),s=u,i=l):s=Cn.ce}).next(()=>{s!==Cn.ce&&n(new K(ui(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(t,e){return qs(t).put(function(r,i){return{targetId:0,path:an(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new as(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Wo(e).put(r)}removeEntry(e,n,r){return Wo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=qe.newInvalidDocument(n);return Wo(e).ee({index:um,range:IDBKeyRange.only(Mu(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:qe.newInvalidDocument(n)};return Wo(e).ee({index:um,range:IDBKeyRange.only(Mu(n))},(i,s)=>{r={document:this.Cr(n,s),size:fp(s)}}).next(()=>r)}getEntries(e,n){let r=Pn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Pn(),i=new ze(K.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,fp(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new De(Tx);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Mu(i.first()),Mu(i.last())),o=i.getIterator();let a=o.getNext();return Wo(e).ee({index:um,range:s},(l,u,h)=>{const f=K.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Tx(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(Mu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),dp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=Pn();for(const f of u){const p=this.Cr(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Ah(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Pn();const o=Ix(n,r),a=Ix(n,rr.max());return Wo(e).ee({index:Pk,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.Cr(K.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new n3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return bx(e).get(Jw).next(n=>(te(!!n,20021),n))}Dr(e,n){return bx(e).put(Jw,n)}Cr(e,n){if(n){const r=BF(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return qe.newInvalidDocument(e)}}function QC(t){return new t3(t)}class n3 extends YC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new as(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new De((s,o)=>ae(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=ix(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=fp(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=ix(this.Nr.serializer,o.convertToNoDocument(re.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function bx(t){return Rt(t,Hd)}function Wo(t){return Rt(t,op)}function Mu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ix(t,e){const n=e.documentKey.path.toArray();return[t,dp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tx(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ae(n[s],r[s]),i)return i;return i=ae(n.length,r.length),i||(i=ae(n[n.length-2],r[r.length-2]),i||ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gd(r.mutation,i,Rn.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pn();const o=pd(),a=function(){return pd()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ls)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),gd(h.mutation,u,h.mutation.getFieldMask(),Re.now())):o.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new r3(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=pd();let i=new ze((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Rn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=hC();h.forEach(p=>{if(!s.has(p)){const y=vC(n.get(p),r.get(p));y!==null&&f.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(di());let a=_c,l=s;return o.next(u=>L.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,le())).next(h=>({batchId:a,changes:dC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hu();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(f,p){return new os(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,qe.newInvalidDocument(h)))});let a=Hu();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&gd(h.mutation,u,Rn.empty(),Re.now()),Ah(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_t(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ug(i.bundledQuery),readTime:_t(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.overlays=new ze(K.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=di();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=di(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ze((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=di(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new f_(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.Qr=new De(Mt.$r),this.Ur=new De(Mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Mt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Mt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new he([])),r=new Mt(n,e),i=new Mt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new he([])),r=new Mt(n,e),i=new Mt(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Mt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new De(Mt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new d_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?fo:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Mt(n,0),i=new Mt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new De(ae);return n.forEach(i=>{const s=new Mt(i,0),o=new Mt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Mt(new K(s),0);let a=new De(ae);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new Mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Mt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.ri=e,this.docs=function(){return new ze(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qe.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pn();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Xv(Ek(h),r)<=0||(i.has(h.key)||Ah(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c3(this)}getSize(e){return L.resolve(this.size)}}class c3 extends YC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.persistence=e,this.si=new as(n=>Ea(n),Eh),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new w_,this.targetCount=0,this.ai=Ra.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ra(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new o3,this.referenceDelegate=e(this),this.Pi=new u3(this),this.indexManager=new YF,this.remoteDocumentCache=function(i){return new l3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new jC(n),this.Ii=new i3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new a3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new d3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class d3 extends Ak{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new w_,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class mp{constructor(e,n){this.persistence=e,this.pi=new as(r=>an(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=KC(this,n)}static mi(e,n){return new mp(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hm(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Zp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(xh)}(e),function(l){l.createObjectStore(Gd,{keyPath:P5}),l.createObjectStore(jr,{keyPath:LT,autoIncrement:!0}).createIndex(la,MT,{unique:!0}),l.createObjectStore(Tc)}(e),xx(e),function(l){l.createObjectStore(Qo)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Ec),l.deleteObjectStore(xc),l.deleteObjectStore(fa)}(e),xx(e)),o=o.next(()=>function(l){const u=l.store(fa),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put(ap,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(jr).J().next(f=>{l.deleteObjectStore(jr),l.createObjectStore(jr,{keyPath:LT,autoIncrement:!0}).createIndex(la,MT,{unique:!0});const p=u.store(jr),y=f.map(_=>p.put(_));return L.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Sc,{keyPath:U5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Hd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(eg,{keyPath:B5})})(e),function(l){l.createObjectStore(tg,{keyPath:z5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(ng,{keyPath:Y5});u.createIndex(Zw,Q5,{unique:!1}),u.createIndex(Mk,J5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(op,{keyPath:D5});u.createIndex(um,L5),u.createIndex(Pk,M5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Qo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(t_,{keyPath:$5,autoIncrement:!0}).createIndex(Xw,W5,{unique:!1}),l.createObjectStore(hd,{keyPath:G5}).createIndex(Dk,H5,{unique:!1}),l.createObjectStore(fd,{keyPath:q5}).createIndex(Lk,K5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(hd).clear()}).next(()=>{n.objectStore(fd).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(n_,{keyPath:X5})})(e)})),r<18&&i>=18&&$S()&&(o=o.next(()=>{n.objectStore(hd).clear()}).next(()=>{n.objectStore(fd).clear()})),o}wi(e){let n=0;return e.store(Qo).ee((r,i)=>{n+=fp(i)}).next(()=>{const r={byteSize:n};return e.store(Hd).put(Jw,r)})}yi(e){const n=e.store(Gd),r=e.store(jr);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,fo],[s.userId,s.lastAcknowledgedBatchId]);return r.J(la,o).next(a=>L.forEach(a,l=>{te(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ea(this.serializer,l);return $C(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(Ec),r=e.store(Qo);return e.store(fa).get(ap).next(i=>{const s=[];return r.ee((o,a)=>{const l=new he(o),u=function(f){return[0,an(f)]}(l);s.push(n.get(u).next(h=>h?L.resolve():(f=>n.put({targetId:0,path:an(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(qd,{keyPath:F5});const r=n.store(qd),i=new y_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:an(l)})}};return n.store(Qo).ee({X:!0},(o,a)=>{const l=new he(o);return s(l.popLast())}).next(()=>n.store(Tc).ee({X:!0},([o,a,l],u)=>{const h=ui(a);return s(h.popLast())}))}Di(e){const n=e.store(xc);return n.ee((r,i)=>{const s=Ku(i),o=FC(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Qo),i=[];return r.ee((s,o)=>{const a=n.store(op),l=function(f){return f.document?new K(he.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):J(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(jr),i=QC(this.serializer),s=new v_(fg.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??le();ea(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const h=new Vt(u),f=dg.wt(this.serializer,h),p=s.getIndexManager(h),y=hg.wt(h,this.serializer,p,s.referenceDelegate);return new JC(i,y,f,p).recalculateAndSaveOverlaysForDocumentKeys(new e0(n,Cn.ce),l).next()})})}}function xx(t){t.createObjectStore(Ec,{keyPath:V5}).createIndex(e_,j5,{unique:!0}),t.createObjectStore(xc,{keyPath:"targetId"}).createIndex(Nk,O5,{unique:!0}),t.createObjectStore(fa)}const Ms="IndexedDbPersistence",ky=18e5,Cy=5e3,Ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XC="main";class __{constructor(e,n,r,i,s,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!__.v())throw new $(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new e3(this,i),this.$i=n+XC,this.serializer=new jC(l),this.Ui=new pi(this.$i,this.Ni,new h3(this.serializer)),this.hi=new $F,this.Pi=new JF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QC(this.serializer),this.Ii=new zF,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&vt(Ms,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(O.FAILED_PRECONDITION,Ry);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Of(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ko(e))return W(Ms,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(Ms,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Ou(e).get(El).next(n=>L.resolve(this.es(n)))}ts(e){return Of(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ky)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Rt(n,Sc);return r.J().next(i=>{const s=this.ss(i,ky),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Ou(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Cy)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new $(O.FAILED_PRECONDITION,Ry);return!1}}return!(!this.networkEnabled||!this.inForeground)||Of(e).J().next(r=>this.ss(r,Cy).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W(Ms,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[xh,Sc],e=>{const n=new e0(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Of(e).J().next(n=>this.ss(n,ky).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return hg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QF(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return dg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){W(Ms,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?tF:l===17?Fk:l===16?eF:l===15?r_:l===14?jk:l===13?Vk:l===12?Z5:l===11?Ok:void J(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new e0(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new $(O.FAILED_PRECONDITION,Sk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Ou(e).get(El).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Cy)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new $(O.FAILED_PRECONDITION,Ry)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ou(e).put(El,n)}static v(){return pi.v()}Zi(e){const n=Ou(e);return n.get(El).next(r=>this.es(r)?(W(Ms,"Releasing primary lease."),n.delete(El)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;zS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return W(Ms,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt(Ms,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ou(t){return Rt(t,xh)}function Of(t){return Rt(t,Sc)}function b_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new I_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return zS()?8:kk(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new f3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ll()<=ge.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ml(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Ll()<=ge.DEBUG&&W("QueryEngine","Query:",Ml(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ll()<=ge.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ml(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(n))):L.resolve())}ys(e,n){if(KT(n))return L.resolve(null);let r=ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=up(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,up(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return KT(n)||i.isEqual(re.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Ll()<=ge.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ml(n)),this.vs(e,o,n,xk(i,_c)).next(a=>a))})}Ds(e,n){let r=new De(cC(e));return n.forEach((i,s)=>{Ah(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Ll()<=ge.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ml(n)),this.ps.getDocumentsMatchingQuery(e,n,rr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LocalStore",m3=3e8;class p3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ze(ae),this.xs=new as(s=>Ea(s),Eh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function eR(t,e,n,r){return new p3(t,e,n,r)}async function tR(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=le();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function g3(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let y=L.resolve();return p.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(A=>{const P=u.docVersions.get(_);te(P!==null,48541),A.version.compareTo(P)<0&&(f.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nR(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function y3(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(dt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(A,P,I){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=m3?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let l=Pn(),u=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(rR(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(re.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function rR(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W(T_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function w3(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dc(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new $i(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Lc(t,e,n){const r=Y(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ko(o))throw o;W(T_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function pp(t,e,n){const r=Y(t);let i=re.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Y(l),p=f.xs.get(h);return p!==void 0?L.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,ln(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:le())).next(a=>(oR(r,lC(e),a),{documents:a,Qs:s})))}function iR(t,e){const n=Y(t),r=Y(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function sR(t,e){const n=Y(t),r=n.Os.get(e)||re.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,xk(r,_c),Number.MAX_SAFE_INTEGER)).then(i=>(oR(n,e,i),i))}function oR(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function v3(t,e,n,r){const i=Y(t);let s=le(),o=Pn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(s=s.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(h,f)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await Dc(i,function(h){return ln(qc(he.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>rR(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function _3(t,e,n=le()){const r=await Dc(t,ln(ug(e.bundledQuery))),i=Y(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=_t(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(dt.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="firestore_clients";function Ex(t,e){return`${aR}_${t}_${e}`}const lR="firestore_mutations";function Sx(t,e,n){let r=`${lR}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const cR="firestore_targets";function Py(t,e){return`${cR}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="SharedClientState";class gp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new $(i.error.code,i.error.message))),o?new gp(e,n,i.state,s):(vt(ai,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new $(r.error.code,r.error.message))),s?new wd(e,r.state,i):(vt(ai,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=l_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Ck(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new yp(e,s):(vt(ai,`Failed to parse client data for instance '${e}': ${n}`),null)}}class x_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new x_(n.clientId,n.onlineState):(vt(ai,`Failed to parse online state: ${e}`),null)}}class m0{constructor(){this.activeTargetIds=l_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ny{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ze(ae),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=Ex(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new m0),this.ro=new RegExp(`^${aR}_${o}_([^_]*)$`),this.io=new RegExp(`^${lR}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${cR}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(Ex(this.persistenceKey,r));if(i){const s=yp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Py(this.persistenceKey,e));if(i){const s=wd.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Py(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W(ai,"READ",e,n),n}setItem(e,n){W(ai,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){W(ai,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(W(ai,"EVENT",n.key,n.newValue),n.key===this.eo)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Cn.ce;if(s!=null)try{const a=JSON.parse(s);te(typeof a=="number",30636,{So:s}),o=a}catch(a){vt(ai,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new gp(this.currentUser,e,n,r),s=Sx(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=Sx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Py(this.persistenceKey,e),s=new wd(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return yp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return gp.Ws(new Vt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return wd.Ws(i,n)}uo(e){return x_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);W(ai,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=l_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class uR{constructor(){this.Mo=new m0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new m0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="ConnectivityMonitor";class kx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(Ax,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(Ax,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf=null;function p0(){return Vf===null?Vf=function(){return 268435456+Math.round(2147483648*Math.random())}():Vf++,"0x"+Vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="RestConnection",I3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class T3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Yd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=p0(),a=this.zo(e,n.toUriEncodedString());W(Dy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=rs(u);return this.Jo(e,a,l,r,h).then(f=>(W(Dy,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ir(Dy,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=I3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class E3 extends T3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=p0();return new Promise((a,l)=>{const u=new mk;u.setWithCredentials(!0),u.listenOnce(pk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lm.NO_ERROR:const f=u.getResponseJson();W(tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case lm.TIMEOUT:W(tn,`RPC '${e}' ${o} timed out`),l(new $(O.DEADLINE_EXCEEDED,"Request time out"));break;case lm.HTTP_ERROR:const p=u.getStatus();if(W(tn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const A=function(I){const b=I.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(b)>=0?b:O.UNKNOWN}(_.status);l(new $(A,_.message))}else l(new $(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $(O.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{W(tn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);W(tn,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=p0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wk(),a=yk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(tn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,y=!1;const _=new x3({Yo:P=>{y?W(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(W(tn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(tn,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Zo:()=>f.close()}),A=(P,I,b)=>{P.listen(I,x=>{try{b(x)}catch(N){setTimeout(()=>{throw N},0)}})};return A(f,Gu.EventType.OPEN,()=>{y||(W(tn,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),A(f,Gu.EventType.CLOSE,()=>{y||(y=!0,W(tn,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(f))}),A(f,Gu.EventType.ERROR,P=>{y||(y=!0,Ir(tn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),_.a_(new $(O.UNAVAILABLE,"The operation could not be completed")))}),A(f,Gu.EventType.MESSAGE,P=>{var I;if(!y){const b=P.data[0];te(!!b,16349);const x=b,N=(x==null?void 0:x.error)||((I=x[0])==null?void 0:I.error);if(N){W(tn,`RPC '${e}' stream ${i} received error:`,N);const U=N.status;let B=function(E){const C=It[E];if(C!==void 0)return TC(C)}(U),T=N.message;B===void 0&&(B=O.INTERNAL,T="Unknown error status: "+U+" with message "+N.message),y=!0,_.a_(new $(B,T)),f.close()}else W(tn,`RPC '${e}' stream ${i} received:`,b),_.u_(b)}}),A(a,gk.STAT_EVENT,P=>{P.stat===Hw.PROXY?W(tn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Hw.NOPROXY&&W(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(){return typeof window<"u"?window:null}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){return new PF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="PersistentStream";class hR{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new E_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(vt(n.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new $(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(Cx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(Cx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S3 extends hR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LF(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?_t(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=c0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=lp(l)?{documents:NC(s,l)}:{query:cg(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=AC(s,o.resumeToken);const u=a0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=Nc(s,o.snapshotVersion.toTimestamp());const u=a0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=OF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=c0(this.serializer),n.removeTarget=e,this.q_(n)}}class A3 extends hR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=MF(e.writeResults,e.commitTime),r=_t(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=c0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eh(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{}class C3 extends k3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,l0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,l0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class R3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="RemoteStore";class P3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ro(this)&&(W(Pa,"Restarting streams for network reachability change."),await async function(l){const u=Y(l);u.Ea.add(4),await Qc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ph(u)}(this))})}),this.Ra=new R3(r,i)}}async function Ph(t){if(Ro(t))for(const e of t.da)await e(!0)}async function Qc(t){for(const e of t.da)await e(!1)}function mg(t,e){const n=Y(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),k_(n)?A_(n):Xc(n).O_()&&S_(n,e))}function Mc(t,e){const n=Y(t),r=Xc(n);n.Ia.delete(e),r.O_()&&fR(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ro(n)&&n.Ra.set("Unknown"))}function S_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xc(t).Y_(e)}function fR(t,e){t.Va.Ue(e),Xc(t).Z_(e)}function A_(t){t.Va=new AF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xc(t).start(),t.Ra.ua()}function k_(t){return Ro(t)&&!Xc(t).x_()&&t.Ia.size>0}function Ro(t){return Y(t).Ea.size===0}function mR(t){t.Va=void 0}async function N3(t){t.Ra.set("Online")}async function D3(t){t.Ia.forEach((e,n)=>{S_(t,e)})}async function L3(t,e){mR(t),k_(t)?(t.Ra.ha(e),A_(t)):t.Ra.set("Unknown")}async function M3(t,e,n){if(t.Ra.set("Online"),e instanceof SC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){W(Pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wp(t,r)}else if(e instanceof pm?t.Va.Ze(e):e instanceof EC?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await nR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),fR(s,l);const f=new $i(h.target,l,u,h.sequenceNumber);S_(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W(Pa,"Failed to raise snapshot:",r),await wp(t,r)}}async function wp(t,e,n){if(!ko(e))throw e;t.Ea.add(1),await Qc(t),t.Ra.set("Offline"),n||(n=()=>nR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Pa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ph(t)})}function pR(t,e){return e().catch(n=>wp(t,n,e))}async function Jc(t){const e=Y(t),n=_o(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fo;for(;O3(e);)try{const i=await w3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,V3(e,i)}catch(i){await wp(e,i)}gR(e)&&yR(e)}function O3(t){return Ro(t)&&t.Ta.length<10}function V3(t,e){t.Ta.push(e);const n=_o(t);n.O_()&&n.X_&&n.ea(e.mutations)}function gR(t){return Ro(t)&&!_o(t).x_()&&t.Ta.length>0}function yR(t){_o(t).start()}async function j3(t){_o(t).ra()}async function F3(t){const e=_o(t);for(const n of t.Ta)e.ea(n.mutations)}async function U3(t,e,n){const r=t.Ta.shift(),i=h_.from(r,e,n);await pR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Jc(t)}async function B3(t,e){e&&_o(t).X_&&await async function(r,i){if(function(o){return IC(o)&&o!==O.ABORTED}(i.code)){const s=r.Ta.shift();_o(r).B_(),await pR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Jc(r)}}(t,e),gR(t)&&yR(t)}async function Rx(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),W(Pa,"RemoteStore received new credentials");const r=Ro(n);n.Ea.add(3),await Qc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function g0(t,e){const n=Y(t);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await Qc(n),n.Ra.set("Unknown"))}function Xc(t){return t.ma||(t.ma=function(n,r,i){const s=Y(n);return s.sa(),new S3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:N3.bind(null,t),t_:D3.bind(null,t),r_:L3.bind(null,t),H_:M3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),k_(t)?A_(t):t.Ra.set("Unknown")):(await t.ma.stop(),mR(t))})),t.ma}function _o(t){return t.fa||(t.fa=function(n,r,i){const s=Y(n);return s.sa(),new A3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:j3.bind(null,t),r_:B3.bind(null,t),ta:F3.bind(null,t),na:U3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Jc(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Pa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new C_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zc(t,e){if(vt("AsyncQueue",`${e}: ${t}`),ko(t))return new $(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Hu(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.ga=new ze(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Na{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Na(e,n,ma.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $3{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Y(n),s=i.queries;i.queries=Nx(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new $(O.ABORTED,"Firestore shutting down"))}}function Nx(){return new as(t=>aC(t),Sh)}async function R_(t,e){const n=Y(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new z3,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Zc(o,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&N_(n)}async function P_(t,e){const n=Y(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function W3(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&N_(n)}function G3(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function N_(t){t.Ca.forEach(e=>{e.next()})}var y0,Dx;(Dx=y0||(y0={})).Ma="default",Dx.Cache="cache";class D_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==y0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.serializer=e}$s(e){return gi(this.serializer,e)}Us(e){return e.metadata.exists?lg(this.serializer,e.document,!1):qe.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return _t(e)}}class L_{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=vR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=he.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Lx(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||le()).add(s);n.set(o,a)}}return n}async ja(e){const n=await v3(e,new Lx(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await _3(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function vR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.key=e}}class bR{constructor(e){this.key=e}}class IR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=cC(e),this.tu=new ma(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Px,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),y=Ah(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;p&&y?p.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),P=!0):this.su(p,y)||(r.track({type:2,doc:y}),P=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),P=!0):p&&!y&&(r.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,_){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:P})}};return A(y)-A(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Na(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Px,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new bR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new _R(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Na.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Po="SyncEngine";class H3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q3{constructor(e){this.key=e,this.hu=!1}}class K3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new as(a=>aC(a),Sh),this.Iu=new Map,this.Eu=new Set,this.du=new ze(K.comparator),this.Au=new Map,this.Ru=new w_,this.Vu={},this.mu=new Map,this.fu=Ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y3(t,e,n=!0){const r=pg(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await TR(r,e,n,!0),i}async function Q3(t,e){const n=pg(t);await TR(n,e,!0,!1)}async function TR(t,e,n,r){const i=await Dc(t.localStore,ln(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await M_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&mg(t.remoteStore,i),a}async function M_(t,e,n,r,i){t.pu=(f,p,y)=>async function(A,P,I,b){let x=P.view.ru(I);x.Cs&&(x=await pp(A.localStore,P.query,!1).then(({documents:T})=>P.view.ru(T,x)));const N=b&&b.targetChanges.get(P.targetId),U=b&&b.targetMismatches.get(P.targetId)!=null,B=P.view.applyChanges(x,A.isPrimaryClient,N,U);return w0(A,P.targetId,B.au),B.snapshot}(t,f,p,y);const s=await pp(t.localStore,e,!0),o=new IR(e,s.Qs),a=o.ru(s.documents),l=Rh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);w0(t,n,u.au);const h=new H3(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function J3(t,e,n){const r=Y(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Sh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mc(r.remoteStore,i.targetId),Oc(r,i.targetId)}).catch(Ao)):(Oc(r,i.targetId),await Lc(r.localStore,i.targetId,!0))}async function X3(t,e){const n=Y(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mc(n.remoteStore,r.targetId))}async function Z3(t,e,n){const r=F_(t);try{const i=await function(o,a){const l=Y(o),u=Re.now(),h=a.reduce((y,_)=>y.add(_.key),le());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Pn(),A=le();return l.Ns.getEntries(y,h).next(P=>{_=P,_.forEach((I,b)=>{b.isValidDocument()||(A=A.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(P=>{f=P;const I=[];for(const b of a){const x=xF(b,f.get(b.key).overlayedDocument);x!=null&&I.push(new ls(b.key,x,Qk(x.value.mapValue),it.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,I,a)}).next(P=>{p=P;const I=P.applyToLocalDocumentSet(f,A);return l.documentOverlayCache.saveOverlays(y,P.batchId,I)})}).then(()=>({batchId:p.batchId,changes:dC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new ze(ae)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await cs(r,i.changes),await Jc(r.remoteStore)}catch(i){const s=Zc(i,"Failed to persist write");n.reject(s)}}async function xR(t,e){const n=Y(t);try{const r=await y3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?te(o.hu,14607):i.removedDocuments.size>0&&(te(o.hu,42227),o.hu=!1))}),await cs(n,r,e)}catch(r){await Ao(r)}}function Mx(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Y(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&N_(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eU(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new ze(K.comparator);o=o.insert(s,qe.newNoDocument(s,re.min()));const a=le().add(s),l=new Ch(re.min(),new Map,new ze(ae),o,a);await xR(r,l),r.du=r.du.remove(s),r.Au.delete(e),j_(r)}else await Lc(r.localStore,e,!1).then(()=>Oc(r,e,n)).catch(Ao)}async function tU(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await g3(n.localStore,e);V_(n,r,null),O_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cs(n,i)}catch(i){await Ao(i)}}async function nU(t,e,n){const r=Y(t);try{const i=await function(o,a){const l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(te(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);V_(r,e,n),O_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cs(r,i)}catch(i){await Ao(i)}}async function rU(t,e){const n=Y(t);Ro(n.remoteStore)||W(Po,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Y(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===fo)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Zc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function O_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function V_(t,e,n){const r=Y(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Oc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ER(t,r)})}function ER(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),j_(t))}function w0(t,e,n){for(const r of n)r instanceof _R?(t.Ru.addReference(r.key,e),iU(t,r)):r instanceof bR?(W(Po,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ER(t,r.key)):J(19791,{wu:r})}function iU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Po,"New document in limbo: "+n),t.Eu.add(r),j_(t))}function j_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(he.fromString(e)),r=t.fu.next();t.Au.set(r,new q3(n)),t.du=t.du.insert(n,r),mg(t.remoteStore,new $i(ln(qc(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function cs(t,e,n){const r=Y(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=I_.As(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=Y(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,p=>L.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>L.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!ko(f))throw f;W(T_,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(p,A)}}}(r.localStore,s))}async function sU(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){W(Po,"User change. New user:",e.toKey());const r=await tR(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(O.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cs(n,r.Ls)}}function oU(t,e){const n=Y(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function aU(t,e){const n=Y(t),r=await pp(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&w0(n,e.targetId,i.au),i}async function lU(t,e){const n=Y(t);return sR(n.localStore,e).then(r=>cs(n,r))}async function cU(t,e,n,r){const i=Y(t),s=await function(a,l){const u=Y(a),h=Y(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Jc(i.remoteStore):n==="acknowledged"||n==="rejected"?(V_(i,e,r||null),O_(i,e),function(a,l){Y(Y(a).mutationQueue).ir(l)}(i.localStore,e)):J(6720,"Unknown batchState",{Su:n}),await cs(i,s)):W(Po,"Cannot apply mutation batch with id: "+e)}async function uU(t,e){const n=Y(t);if(pg(n),F_(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Ox(n,r.toArray());n.gu=!0,await g0(n.remoteStore,!0);for(const s of i)mg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Oc(n,o),Lc(n.localStore,o,!0))),Mc(n.remoteStore,o)}),await i,await Ox(n,r),function(o){const a=Y(o);a.Au.forEach((l,u)=>{Mc(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new ze(K.comparator)}(n),n.gu=!1,await g0(n.remoteStore,!1)}}async function Ox(t,e,n){const r=Y(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Dc(r.localStore,ln(l[0]));for(const u of l){const h=r.Tu.get(u),f=await aU(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await iR(r.localStore,o);a=await Dc(r.localStore,u),await M_(r,SR(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function SR(t){return iC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dU(t){return function(n){return Y(Y(n).persistence).Ts()}(Y(t).localStore)}async function hU(t,e,n,r){const i=Y(t);if(i.gu)return void W(Po,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await sR(i.localStore,lC(s[0])),a=Ch.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dt.EMPTY_BYTE_STRING);await cs(i,o,a);break}case"rejected":await Lc(i.localStore,e,!0),Oc(i,e,r);break;default:J(64155,n)}}async function fU(t,e,n){const r=pg(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W(Po,"Adding an already active target "+i);continue}const s=await iR(r.localStore,i),o=await Dc(r.localStore,s);await M_(r,SR(s),o.targetId,!1,o.resumeToken),mg(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Lc(r.localStore,i,!1).then(()=>{Mc(r.remoteStore,i),Oc(r,i)}).catch(Ao)}}function pg(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eU.bind(null,e),e.Pu.H_=W3.bind(null,e.eventManager),e.Pu.yu=G3.bind(null,e.eventManager),e}function F_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nU.bind(null,e),e}function mU(t,e,n){const r=Y(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,_){const A=Y(y),P=_t(_.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",I=>A.Ii.getBundleMetadata(I,_.id)).then(I=>!!I&&I.createTime.compareTo(P)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(vR(l));const u=new L_(l,o.serializer);let h=await o.bu();for(;h;){const p=await u.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await u.ja(s.localStore);return await cs(s,f.Ha,void 0),await function(y,_){const A=Y(y);return A.persistence.runTransaction("Save bundle","readwrite",P=>A.Ii.saveBundleMetadata(P,_))}(s.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return Ir(Po,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=za(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return eR(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new v_(fg.mi,this.serializer)}Du(e){return new uR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class U_ extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){te(this.persistence.referenceDelegate instanceof mp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new v_(r=>mp.mi(r,n),this.serializer)}}class B_ extends Vc{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await F_(this.xu.syncEngine),await Jc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return eR(this.persistence,new ZC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new qC(r,e.asyncQueue,n)}Mu(e,n){const r=new C5(n,this.persistence);return new k5(e.asyncQueue,r)}Cu(e){const n=b_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new __(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,dR(),ym(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new uR}}class AR extends B_{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Ny&&(this.sharedClientState.syncEngine={Co:cU.bind(null,n),vo:hU.bind(null,n),Fo:fU.bind(null,n),Ts:dU.bind(null,n),Do:lU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await uU(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=dR();if(!Ny.v(n))throw new $(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=b_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ny(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class bo{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sU.bind(null,this.syncEngine),await g0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $3}()}createDatastore(e){const n=za(e.databaseInfo.databaseId),r=function(s){return new E3(s)}(e.databaseInfo);return function(s,o,a,l){return new C3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new P3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Mx(this.syncEngine,n,0),function(){return kx.v()?new kx:new b3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new K3(i,s,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Y(i);W(Pa,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bo.provider={build:()=>new bo};function Vx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Ut,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new wR(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new wR(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new $(O.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Y(i),a={documents:s.map(f=>Zd(o.serializer,f))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,he.emptyPath(),a,s.length),u=new Map;l.forEach(f=>{const p=DF(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=u.get(f.toString());te(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new u_(i,this.precondition(i)))}),await async function(r,i){const s=Y(r),o={writes:i.map(a=>eh(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,he.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J(50498,{Gu:e.constructor.name});n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?it.exists(!1):it.updateTime(n):it.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new $(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return it.updateTime(n)}return it.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new E_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new yU(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Th(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!IC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="FirestoreClient";class vU{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=Qv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(Io,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Io,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ly(t,e){t.asyncQueue.verifyOperationInProgress(),W(Io,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z_(t);W(Io,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Rx(e.remoteStore,i)),t._onlineComponents=e}async function z_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Io,"Using user provided OfflineComponentProvider");try{await Ly(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Ly(t,new Vc)}}else W(Io,"Using default OfflineComponentProvider"),await Ly(t,new U_(void 0));return t._offlineComponents}async function yg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Io,"Using user provided OnlineComponentProvider"),await jx(t,t._uninitializedComponentsProvider._online)):(W(Io,"Using default OnlineComponentProvider"),await jx(t,new bo))),t._onlineComponents}function kR(t){return z_(t).then(e=>e.persistence)}function eu(t){return z_(t).then(e=>e.localStore)}function CR(t){return yg(t).then(e=>e.remoteStore)}function $_(t){return yg(t).then(e=>e.syncEngine)}function RR(t){return yg(t).then(e=>e.datastore)}async function jc(t){const e=await yg(t),n=e.eventManager;return n.onListen=Y3.bind(null,e.syncEngine),n.onUnlisten=J3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X3.bind(null,e.syncEngine),n}function _U(t){return t.asyncQueue.enqueue(async()=>{const e=await kR(t),n=await CR(t);return e.setNetworkEnabled(!0),function(i){const s=Y(i);return s.Ea.delete(0),Ph(s)}(n)})}function bU(t){return t.asyncQueue.enqueue(async()=>{const e=await kR(t),n=await CR(t);return e.setNetworkEnabled(!1),async function(i){const s=Y(i);s.Ea.add(0),await Qc(s),s.Ra.set("Offline")}(n)})}function IU(t,e){const n=new Ut;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,h){const f=Y(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new $(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=Zc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await eu(t),e,n)),n.promise}function PR(t,e,n={}){const r=new Ut;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new gg({next:p=>{h.Nu(),o.enqueueAndForget(()=>P_(s,f));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new $(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?u.reject(new $(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new D_(qc(a.path),h,{includeMetadataChanges:!0,qa:!0});return R_(s,f)}(await jc(t),t.asyncQueue,e,n,r)),r.promise}function TU(t,e){const n=new Ut;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await pp(i,s,!0),l=new IR(s,a.Qs),u=l.ru(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const l=Zc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await eu(t),e,n)),n.promise}function NR(t,e,n={}){const r=new Ut;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new gg({next:p=>{h.Nu(),o.enqueueAndForget(()=>P_(s,f)),p.fromCache&&l.source==="server"?u.reject(new $(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new D_(a,h,{includeMetadataChanges:!0,qa:!0});return R_(s,f)}(await jc(t),t.asyncQueue,e,n,r)),r.promise}function xU(t,e,n){const r=new Ut;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await RR(t);r.resolve(async function(o,a,l){var A;const u=Y(o),{request:h,gt:f,parent:p}=DC(u.serializer,sC(a),l);u.connection.$o||delete h.parent;const y=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(P=>!!P.result);te(y.length===1,64727);const _=(A=y[0].result)==null?void 0:A.aggregateFields;return Object.keys(_).reduce((P,I)=>(P[f[I]]=_[I],P),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function EU(t,e){const n=new gg(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).Ca.add(s),s.next()}(await jc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).Ca.delete(s)}(await jc(t),n))}}function SU(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?xC().encode(o):o,function(h,f){return new pU(h,f)}(function(h,f){if(h instanceof Uint8Array)return Vx(h,f);if(h instanceof ArrayBuffer)return Vx(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,za(e));t.asyncQueue.enqueueAndForget(async()=>{mU(await $_(t),i,r)})}function AU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Y(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await eu(t),e))}function DR(t,e){return function(r,i){return new gU(r,i)}(t,e)}function kU(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=Y(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(f,p,y,_,A){f=[...f],p=[...p],f.sort(y),p.sort(y);const P=f.length,I=p.length;let b=0,x=0;for(;b<I&&x<P;){const N=y(f[x],p[b]);N<0?A(f[x++]):N>0?_(p[b++]):(b++,x++)}for(;b<I;)_(p[b++]);for(;x<P;)A(f[x++])}(u,i,x5,h=>{a.push(o.addFieldIndex(l,h))},h=>{a.push(o.deleteFieldIndex(l,h))})).next(()=>L.waitFor(a)))}(await eu(t),e))}function CU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){Y(r).Fs.Vs=i}(await eu(t),e))}function RU(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Y(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await eu(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firestore.googleapis.com",Ux=!0;class Bx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MR,this.ssl=Ux}else this.host=e.host,this.ssl=e.ssl??Ux;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HC)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new f5;switch(r.type){case"firstParty":return new y5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fx.get(n);r&&(W("ComponentProvider","Removing Datastore"),Fx.delete(n),r.terminate())}(this),Promise.resolve()}}function PU(t,e,n,r={}){var u;t=me(t,Nh);const i=rs(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Up(`https://${a}`),bv("Firestore",!0)),s.host!==MR&&s.host!==a&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!vr(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Vt.MOCK_USER;else{h=FS(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vt(p)}t._authCredentials=new m5(new _k(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bt(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ba(n,Le._jsonSchema))return new Le(e,r||null,new K(he.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:Et("string",Le._jsonSchemaVersion),referencePath:Et("string")};class yi extends Bt{constructor(e,n,r){super(e,n,qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new K(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Da(t,e,...n){if(t=Z(t),Jv("collection","path",e),t instanceof Nh){const r=he.fromString(e,...n);return CT(r),new yi(t,null,r)}{if(!(t instanceof Le||t instanceof yi))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return CT(r),new yi(t.firestore,null,r)}}function N$(t,e){if(t=me(t,Nh),Jv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bt(t,null,function(r){return new os(he.emptyPath(),r)}(e))}function Br(t,e,...n){if(t=Z(t),arguments.length===1&&(e=Qv.newId()),Jv("doc","path",e),t instanceof Nh){const r=he.fromString(e,...n);return kT(r),new Le(t,null,new K(r))}{if(!(t instanceof Le||t instanceof yi))throw new $(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return kT(r),new Le(t.firestore,t instanceof yi?t.converter:null,new K(r))}}function D$(t,e){return t=Z(t),e=Z(e),(t instanceof Le||t instanceof yi)&&(e instanceof Le||e instanceof yi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function OR(t,e){return t=Z(t),e=Z(e),t instanceof Bt&&e instanceof Bt&&t.firestore===e.firestore&&Sh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="AsyncQueue";class $x{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new E_(this,"async_queue_retry"),this._c=()=>{const r=ym();r&&W(zx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ut;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;W(zx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",Wx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=C_.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:Wx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Wx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class NU{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ut,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$=-1;class Ve extends Nh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $x,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $x(e),this._firestoreClient=void 0,await e}}}function M$(t,e,n){n||(n=Yd);const r=Hr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(vr(s,e))return i;throw new $(O.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new $(O.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HC)throw new $(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&rs(e.host)&&Up(e.host),r.initialize({options:e,instanceIdentifier:n})}function DU(t,e){const n=typeof t=="object"?t:gh(),r=typeof t=="string"?t:e||Yd,i=Hr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=OS("firestore");s&&PU(i,...s)}return i}function lt(t){if(t._terminated)throw new $(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VR(t),t._firestoreClient}function VR(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new rF(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new vU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function O$(t,e){Ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return jR(t,bo.provider,{build:r=>new B_(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function V$(t){Ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();jR(t,bo.provider,{build:n=>new AR(n,e.cacheSizeBytes)})}function jR(t,e,n){if((t=me(t,Ve))._firestoreClient||t._terminated)throw new $(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new $(O.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},VR(t)}function j$(t){if(t._initialized&&!t._terminated)throw new $(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ut;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!pi.v())return Promise.resolve();const i=r+XC;await pi.delete(i)}(b_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function F$(t){return function(n){const r=new Ut;return n.asyncQueue.enqueueAndForget(async()=>rU(await $_(n),r)),r.promise}(lt(t=me(t,Ve)))}function U$(t){return _U(lt(t=me(t,Ve)))}function B$(t){return bU(lt(t=me(t,Ve)))}function z$(t){return PM(t.app,"firestore",t._databaseId.database),t._delete()}function Gx(t,e){const n=lt(t=me(t,Ve)),r=new NU;return SU(n,t._databaseId,e,r),r}function LU(t,e){return AU(lt(t=me(t,Ve)),e).then(n=>n?new Bt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class MU{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(dt.fromBase64String(e))}catch(n){throw new $(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ba(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Et("string",Kn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function $$(){return new $a(Yw)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wi._jsonSchemaVersion}}static fromJSON(e){if(Ba(e,wi._jsonSchema))return new wi(e.latitude,e.longitude)}}wi._jsonSchemaVersion="firestore/geoPoint/1.0",wi._jsonSchema={type:Et("string",wi._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ba(e,Wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Wr(e.vectorValues);throw new $(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:Et("string",Wr._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^__.*__$/;class VU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class FR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class wg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(UR(this.Ac)&&OU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||za(e)}Cc(e,n,r,i=!1){return new wg({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ga(t){const e=t._freezeSettings(),n=za(t._databaseId);return new jU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vg(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Q_("Data must be an object, but it was:",o,r);const a=$R(r,o);let l,u;if(s.merge)l=new Rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=nh(e,f,n);if(!o.contains(p))throw new $(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);GR(h,p)||h.push(p)}l=new Rn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new VU(new qt(a),l,u)}class Dh extends Wa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dh}}function BR(t,e,n){return new wg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W_ extends Wa{_toFieldTransform(e){return new kh(e.path,new Rc)}isEqual(e){return e instanceof W_}}class G_ extends Wa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=BR(this,e,!0),r=this.vc.map(s=>Ha(s,n)),i=new Sa(r);return new kh(e.path,i)}isEqual(e){return e instanceof G_&&vr(this.vc,e.vc)}}class H_ extends Wa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=BR(this,e,!0),r=this.vc.map(s=>Ha(s,n)),i=new Aa(r);return new kh(e.path,i)}isEqual(e){return e instanceof H_&&vr(this.vc,e.vc)}}class q_ extends Wa{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Pc(e.serializer,mC(e.serializer,this.Fc));return new kh(e.path,n)}isEqual(e){return e instanceof q_&&this.Fc===e.Fc}}function K_(t,e,n,r){const i=t.Cc(1,e,n);Q_("Data must be an object, but it was:",i,r);const s=[],o=qt.empty();Co(r,(l,u)=>{const h=_g(e,l,n);u=Z(u);const f=i.yc(h);if(u instanceof Dh)s.push(h);else{const p=Ha(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Rn(s);return new FR(o,a,i.fieldTransforms)}function Y_(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[nh(e,r,n)],l=[i];if(s.length%2!=0)throw new $(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(nh(e,s[p])),l.push(s[p+1]);const u=[],h=qt.empty();for(let p=a.length-1;p>=0;--p)if(!GR(u,a[p])){const y=a[p];let _=l[p];_=Z(_);const A=o.yc(y);if(_ instanceof Dh)u.push(y);else{const P=Ha(_,A);P!=null&&(u.push(y),h.set(y,P))}}const f=new Rn(u);return new FR(h,f,o.fieldTransforms)}function zR(t,e,n,r=!1){return Ha(n,t.Cc(r?4:3,e))}function Ha(t,e){if(WR(t=Z(t)))return Q_("Unsupported field value:",e,t),$R(t,e);if(t instanceof Wa)return function(r,i){if(!UR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ha(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Re.fromDate(r);return{timestampValue:Nc(i.serializer,s)}}if(r instanceof Re){const s=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nc(i.serializer,s)}}if(r instanceof wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:AC(i.serializer,r._byteString)};if(r instanceof Le){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:p_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wr)return function(o,a){return{mapValue:{fields:{[i_]:{stringValue:s_},[Ac]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return c_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Xp(r)}`)}(t,e)}function $R(t,e){const n={};return Bk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,i)=>{const s=Ha(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof wi||t instanceof Kn||t instanceof Le||t instanceof Wa||t instanceof Wr)}function Q_(t,e,n){if(!WR(n)||!Ik(n)){const r=Xp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function nh(t,e,n){if((e=Z(e))instanceof $a)return e._internalPath;if(typeof e=="string")return _g(t,e);throw vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const FU=new RegExp("[~\\*/\\[\\]]");function _g(t,e,n){if(e.search(FU)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $a(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(O.INVALID_ARGUMENT,a+t+l)}function GR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UU extends rh{data(){return super.data()}}function bg(t,e){return typeof e=="string"?_g(t,e):e instanceof $a?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J_{}class Lh extends J_{}function cc(t,e,...n){let r=[];e instanceof J_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof tu).length,a=s.filter(l=>l instanceof Mh).length;if(o>1||o>0&&a>0)throw new $(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mh extends Lh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return KR(e._query,n),new Bt(e.firestore,e.converter,o0(e._query,n))}_parse(e){const n=Ga(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qx(f,h);const _=[];for(const A of f)_.push(Hx(l,s,A));p={arrayValue:{values:_}}}else p=Hx(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qx(f,h),p=zR(a,o,f,h==="in"||h==="not-in");return ye.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wm(t,e,n){const r=e,i=bg("where",t);return Mh._create(i,r,n)}class tu extends J_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tu(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)KR(o,l),o=o0(o,l)}(e._query,n),new Bt(e.firestore,e.converter,o0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function W$(...t){return t.forEach(e=>YR("or",e)),tu._create("or",t)}function G$(...t){return t.forEach(e=>YR("and",e)),tu._create("and",t)}class X_ extends Lh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new X_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xd(s,o)}(e._query,this._field,this._direction);return new Bt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new os(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function uc(t,e="asc"){const n=e,r=bg("orderBy",t);return X_._create(r,n)}class Ig extends Lh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ig(e,n,r)}_apply(e){return new Bt(e.firestore,e.converter,up(e._query,this._limit,this._limitType))}}function My(t){return Tk("limit",t),Ig._create("limit",t,"F")}function H$(t){return Tk("limitToLast",t),Ig._create("limitToLast",t,"L")}class Tg extends Lh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Tg(e,n,r)}_apply(e){const n=qR(e,this.type,this._docOrFields,this._inclusive);return new Bt(e.firestore,e.converter,function(i,s){return new os(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function q$(...t){return Tg._create("startAt",t,!0)}function BU(...t){return Tg._create("startAfter",t,!1)}class xg extends Lh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xg(e,n,r)}_apply(e){const n=qR(e,this.type,this._docOrFields,this._inclusive);return new Bt(e.firestore,e.converter,function(i,s){return new os(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function K$(...t){return xg._create("endBefore",t,!1)}function Y$(...t){return xg._create("endAt",t,!0)}function qR(t,e,n,r){if(n[0]=Z(n[0]),n[0]instanceof rh)return function(s,o,a,l,u){if(!l)throw new $(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of ac(s))if(f.field.isKeyField())h.push(xa(o,l.key));else{const p=l.data.field(f.field);if(rg(p))throw new $(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=f.field.canonicalString();throw new $(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new vo(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ga(t.firestore);return function(o,a,l,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new $(O.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let _=0;_<h.length;_++){const A=h[_];if(p[_].field.isKeyField()){if(typeof A!="string")throw new $(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!a_(o)&&A.indexOf("/")!==-1)throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);const P=o.path.child(he.fromString(A));if(!K.isDocumentKey(P))throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const I=new K(P);y.push(xa(a,I))}else{const P=zR(l,u,A);y.push(P)}}return new vo(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Hx(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new $(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a_(e)&&n.indexOf("/")!==-1)throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(he.fromString(n));if(!K.isDocumentKey(r))throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xa(t,new K(r))}if(n instanceof Le)return xa(t,n._key);throw new $(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(n)}.`)}function qx(t,e){if(!Array.isArray(t)||t.length===0)throw new $(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function YR(t,e){if(!(e instanceof Mh||e instanceof tu))throw new $(O.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class QR{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ac].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new Wr(n)}convertGeoPoint(e){return new wi(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kd(e));default:return null}}convertTimestamp(e){const n=es(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=he.fromString(e);te(VC(r),9688,{name:e});const i=new Ta(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Z_ extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t){return new th("sum",nh("sum",t))}function J$(t){return new th("avg",nh("average",t))}function zU(){return new th("count")}function X$(t,e){var n,r;return t instanceof th&&e instanceof th&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function Z$(t,e){return OR(t.query,e.query)&&vr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="NOT SUPPORTED";class Xs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zn extends rh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function eW(t,e,n){if(Ba(e,Zn._jsonSchema)){if(e.bundle===JR)throw new $(O.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=za(t._databaseId),i=DR(e.bundle,r),s=i.Wu(),o=new L_(i.getMetadata(),r);for(const h of s)o.Ga(h);const a=o.documents;if(a.length!==1)throw new $(O.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=lg(r,a[0].document),u=new K(he.fromString(e.bundleName));return new Zn(t,new Z_(t),u,l,new Xs(!1,!1),n||null)}}Zn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zn._jsonSchema={type:Et("string",Zn._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class vm extends Zn{data(e={}){return super.data(e)}}class er{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vm(this._firestore,this._userDataWriter,r.key,r,new Xs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new vm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new vm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$U(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=er._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tW(t,e,n){if(Ba(e,er._jsonSchema)){if(e.bundle===JR)throw new $(O.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=za(t._databaseId),i=DR(e.bundle,r),s=i.Wu(),o=new L_(i.getMetadata(),r);for(const p of s)o.Ga(p);if(o.queries.length!==1)throw new $(O.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=ug(o.queries[0].bundledQuery),l=o.documents;let u=new ma;l.map(p=>{const y=lg(r,p.document);u=u.add(y)});const h=Na.fromInitialDocuments(a,u,le(),!1,!1),f=new Bt(t,n||null,a);return new er(t,new Z_(t),f,h)}}function $U(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}function nW(t,e){return t instanceof Zn&&e instanceof Zn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof er&&e instanceof er&&t._firestore===e._firestore&&OR(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){t=me(t,Le);const e=me(t.firestore,Ve);return PR(lt(e),t._key).then(n=>eb(e,t,n))}er._jsonSchemaVersion="firestore/querySnapshot/1.0",er._jsonSchema={type:Et("string",er._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class No extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function rW(t){t=me(t,Le);const e=me(t.firestore,Ve),n=lt(e),r=new No(e);return IU(n,t._key).then(i=>new Zn(e,r,t._key,i,new Xs(i!==null&&i.hasLocalMutations,!0),t.converter))}function iW(t){t=me(t,Le);const e=me(t.firestore,Ve);return PR(lt(e),t._key,{source:"server"}).then(n=>eb(e,t,n))}function ih(t){t=me(t,Bt);const e=me(t.firestore,Ve),n=lt(e),r=new No(e);return HR(t._query),NR(n,t._query).then(i=>new er(e,r,t,i))}function sW(t){t=me(t,Bt);const e=me(t.firestore,Ve),n=lt(e),r=new No(e);return TU(n,t._query).then(i=>new er(e,r,t,i))}function oW(t){t=me(t,Bt);const e=me(t.firestore,Ve),n=lt(e),r=new No(e);return NR(n,t._query,{source:"server"}).then(i=>new er(e,r,t,i))}function Oh(t,e,n){t=me(t,Le);const r=me(t.firestore,Ve),i=Eg(t.converter,e,n);return Vh(r,[vg(Ga(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,it.none())])}function aW(t,e,n,...r){t=me(t,Le);const i=me(t.firestore,Ve),s=Ga(i);let o;return o=typeof(e=Z(e))=="string"||e instanceof $a?Y_(s,"updateDoc",t._key,e,n,r):K_(s,"updateDoc",t._key,e),Vh(i,[o.toMutation(t._key,it.exists(!0))])}function lW(t){return Vh(me(t.firestore,Ve),[new Yc(t._key,it.none())])}function cW(t,e){const n=me(t.firestore,Ve),r=Br(t),i=Eg(t.converter,e);return Vh(n,[vg(Ga(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,it.exists(!1))]).then(()=>r)}function sh(t,...e){var l,u,h;t=Z(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||lc(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lc(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,a;if(t instanceof Le)o=me(t.firestore,Ve),a=qc(t._key.path),s={next:f=>{e[r]&&e[r](eb(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=me(t,Bt);o=me(f.firestore,Ve),a=f._query;const p=new No(o);s={next:y=>{e[r]&&e[r](new er(o,p,f,y))},error:e[r+1],complete:e[r+2]},HR(t._query)}return function(p,y,_,A){const P=new gg(A),I=new D_(y,P,_);return p.asyncQueue.enqueueAndForget(async()=>R_(await jc(p),I)),()=>{P.Nu(),p.asyncQueue.enqueueAndForget(async()=>P_(await jc(p),I))}}(lt(o),a,i,s)}function uW(t,e,...n){const r=Z(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const f of h){if(!(f in l)){u.error=`snapshotJson missing required field: ${f}`;break}const p=l[f];if(typeof p!="string"){u.error=`snapshotJson field '${f}' must be a string.`;break}if(p.length===0){u.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?u.bundle=p:f==="bundleName"?u.bundleName=p:f==="bundleSource"&&(u.bundleSource=p)}return u}(e);if(i.error)throw new $(O.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||lc(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&lc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let _,A=!1;return Gx(u,h.bundle).then(()=>LU(u,h.bundleName)).then(I=>{I&&!A&&(y&&I.withConverter(y),_=sh(I,f||{},p))}).catch(I=>(p.error&&p.error(I),()=>{})),()=>{A||(A=!0,_&&_())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&lc(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let _,A=!1;return Gx(u,h.bundle).then(()=>{if(!A){const I=new Le(u,y||null,K.fromPath(h.bundleName));_=sh(I,f||{},p)}}).catch(I=>(p.error&&p.error(I),()=>{})),()=>{A||(A=!0,_&&_())}}(r,i,s,a,n[o])}throw new $(O.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function dW(t,e){return EU(lt(t=me(t,Ve)),lc(e)?e:{next:e})}function Vh(t,e){return function(r,i){const s=new Ut;return r.asyncQueue.enqueueAndForget(async()=>Z3(await $_(r),i,s)),s.promise}(lt(t),e)}function eb(t,e,n){const r=n.docs.get(e._key),i=new No(t);return new Zn(t,i,e._key,r,new Xs(n.hasPendingWrites,n.fromCache),e.converter)}function hW(t){return WU(t,{count:zU()})}function WU(t,e){const n=me(t.firestore,Ve),r=lt(n),i=Uk(e,(s,o)=>new bC(o,s.aggregateType,s._internalFieldPath));return xU(r,t._query,i).then(s=>function(a,l,u){const h=new No(a);return new MU(l,h,u)}(n,t,s))}class GU{constructor(e){this.kind="memory",this._onlineComponentProvider=bo.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new U_(void 0)}}toJSON(){return{kind:this.kind}}}class HU{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=JU(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class qU{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Vc.provider}toJSON(){return{kind:this.kind}}}class KU{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new U_(e)}}toJSON(){return{kind:this.kind}}}function fW(){return new qU}function mW(t){return new KU(t==null?void 0:t.cacheSizeBytes)}function pW(t){return new GU(t)}function gW(t){return new HU(t)}class YU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bo.provider,this._offlineComponentProvider={build:n=>new B_(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class QU{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=bo.provider,this._offlineComponentProvider={build:n=>new AR(n,e==null?void 0:e.cacheSizeBytes)}}}function JU(t){return new YU(t==null?void 0:t.forceOwnership)}function yW(){return new QU}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ga(e)}set(e,n,r){this._verifyNotCommitted();const i=Zs(e,this._firestore),s=Eg(i.converter,n,r),o=vg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,it.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Zs(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof $a?Y_(this._dataReader,"WriteBatch.update",s._key,n,r,i):K_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,it.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zs(e,this._firestore);return this._mutations=this._mutations.concat(new Yc(n._key,it.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zs(t,e){if((t=Z(t)).firestore!==e)throw new $(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ga(e)}get(e){const n=Zs(e,this._firestore),r=new Z_(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return J(24041);const s=i[0];if(s.isFoundDocument())return new rh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new rh(this._firestore,r,n._key,null,n.converter);throw J(18433,{doc:s})})}set(e,n,r){const i=Zs(e,this._firestore),s=Eg(i.converter,n,r),o=vg(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Zs(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof $a?Y_(this._dataReader,"Transaction.update",s._key,n,r,i):K_(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Zs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6 extends e6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Zs(e,this._firestore),r=new No(this._firestore);return super.get(e).then(i=>new Zn(this._firestore,r,n._key,i._document,new Xs(!1,!1),n.converter))}}function wW(t,e,n){t=me(t,Ve);const r={...XU,...n};return function(s){if(s.maxAttempts<1)throw new $(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Ut;return s.asyncQueue.enqueueAndForget(async()=>{const u=await RR(s);new wU(s.asyncQueue,u,a,o,l).ju()}),l.promise}(lt(t),i=>e(new t6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(){return new Dh("deleteField")}function _W(){return new W_("serverTimestamp")}function bW(...t){return new G_("arrayUnion",t)}function IW(...t){return new H_("arrayRemove",t)}function TW(t){return new q_("increment",t)}function xW(t){return new Wr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(t){return lt(t=me(t,Ve)),new ZU(t,e=>Vh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t,e){const n=lt(t=me(t,Ve));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Ir("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(h){throw new $(O.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=Yx(l,"collectionGroup"),h=[];if(Array.isArray(l.fields))for(const f of l.fields){const p=_g("setIndexConfiguration",Yx(f,"fieldPath"));f.arrayConfig==="CONTAINS"?h.push(new ha(p,2)):f.order==="ASCENDING"?h.push(new ha(p,0)):f.order==="DESCENDING"&&h.push(new ha(p,1))}a.push(new bc(bc.UNKNOWN_ID,u,h,Ic.empty()))}return a}(e);return kU(n,r)}function Yx(t,e){if(typeof t[e]!="string")throw new $(O.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function AW(t){var i;t=me(t,Ve);const e=Qx.get(t);if(e)return e;if(((i=lt(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new n6(t);return Qx.set(t,r),r}function kW(t){XR(t,!0)}function CW(t){XR(t,!1)}function RW(t){RU(lt(t._firestore)).then(e=>W("deleting all persistent cache indexes succeeded")).catch(e=>Ir("deleting all persistent cache indexes failed",e))}function XR(t,e){CU(lt(t._firestore),e).then(n=>W(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Ir(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const Qx=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){var r;const e=lt(me(t.firestore,Ve)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:cg(n,ln(t._query)).ft}function NW(t,e){var s;const n=Uk(e,(o,a)=>new bC(a,o.aggregateType,o._internalFieldPath)),r=lt(me(t.firestore,Ve)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:DC(i,sC(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return tb.instance.onExistenceFilterMismatch(e)}}class tb{constructor(){this.Mc=new Map}static get instance(){return jf||(jf=new tb,function(n){if(yd)throw new Error("a TestingHooksSpi instance is already set");yd=n}(jf)),jf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let jf=null;(function(e,n=!0){(function(i){Hc=i})(ja),_r(new nr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ve(new p5(r.getProvider("auth-internal")),new w5(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),on(ST,AT,e),on(ST,AT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebasestorage.googleapis.com",eP="storageBucket",r6=2*60*1e3,i6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends or{constructor(e,n,r=0){super(Oy(e),`Firebase Storage: ${n} (${Oy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function Oy(t){return"storage/"+t}function nb(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(ht.UNKNOWN,t)}function s6(t){return new mt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function o6(t){return new mt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function a6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(ht.UNAUTHENTICATED,t)}function l6(){return new mt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function c6(t){return new mt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function u6(){return new mt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d6(){return new mt(ht.CANCELED,"User canceled the upload/download.")}function h6(t){return new mt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function f6(t){return new mt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function m6(){return new mt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eP+"' property when initializing the app?")}function p6(){return new mt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g6(){return new mt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function y6(t){return new mt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function v0(t){return new mt(ht.INVALID_ARGUMENT,t)}function tP(){return new mt(ht.APP_DELETED,"The Firebase app was deleted.")}function w6(t){return new mt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new mt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new mt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qn.makeFromUrl(e,n)}catch{return new Qn(e,"")}if(r.path==="")return r;throw f6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},A=n===ZR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",I=new RegExp(`^https?://${A}/${i}/${P}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:y,indices:_,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<x.length;N++){const U=x[N],B=U.regex.exec(e);if(B){const T=B[U.indices.bucket];let w=B[U.indices.path];w||(w=""),r=new Qn(T,w),U.postModify(r);break}}if(r==null)throw h6(e);return r}}class v6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function f(P){i=setTimeout(()=>{i=null,t(y,l())},P)}function p(){s&&clearTimeout(s)}function y(P,...I){if(u){p();return}if(P){p(),h.call(null,P,...I);return}if(l()||o){p(),h.call(null,P,...I);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let _=!1;function A(P){_||(_=!0,p(),!u&&(i!==null?(P||(a=2),clearTimeout(i),f(0)):P||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function b6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){return t!==void 0}function T6(t){return typeof t=="object"&&!Array.isArray(t)}function rb(t){return typeof t=="string"||t instanceof String}function Jx(t){return ib()&&t instanceof Blob}function ib(){return typeof Blob<"u"}function Xx(t,e,n,r){if(r<e)throw v0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw v0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var pa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pa||(pa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,A)=>{this.resolve_=_,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ff(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pa.NO_ERROR,l=s.getStatus();if(!a||x6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===pa.ABORT;r(!1,new Ff(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ff(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());I6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=nb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?tP():d6();o(l)}else{const l=u6();o(l)}};this.canceled_?n(!1,new Ff(!1,null,!0)):this.backoffId_=_6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ff{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function S6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function A6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function R6(t,e,n,r,i,s,o=!0,a=!1){const l=nP(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return k6(h,e),S6(h,n),A6(h,s),C6(h,r),new E6(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function N6(...t){const e=P6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ib())return new Blob(t);throw new mt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function D6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t){if(typeof atob>"u")throw y6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vy{constructor(e,n){this.data=e,this.contentType=n||null}}function M6(t,e){switch(t){case hi.RAW:return new Vy(rP(e));case hi.BASE64:case hi.BASE64URL:return new Vy(iP(t,e));case hi.DATA_URL:return new Vy(V6(e),j6(e))}throw nb()}function rP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function O6(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(hi.DATA_URL,"Malformed data URL.")}return rP(e)}function iP(t,e){switch(t){case hi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case hi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L6(e)}catch(i){throw i.message.includes("polyfill")?i:vd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class sP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vd(hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=F6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function V6(t){const e=new sP(t);return e.base64?iP(hi.BASE64,e.rest):O6(e.rest)}function j6(t){return new sP(t).contentType}function F6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){let r=0,i="";Jx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Jx(this.data_)){const r=this.data_,i=D6(r,e,n);return i===null?null:new Ks(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(ib()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(N6.apply(null,n))}else{const n=e.map(o=>rb(o)?M6(hi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ks(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){let e;try{e=JSON.parse(t)}catch{return null}return T6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t,e){return e}class gn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||z6}}let Uf=null;function $6(t){return!rb(t)||t.length<2?t:aP(t)}function lP(){if(Uf)return Uf;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(s,o){return $6(o)}const n=new gn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new gn("size");return i.xform=r,t.push(i),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),Uf=t,Uf}function W6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Qn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function G6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return W6(r,t),r}function cP(t,e,n){const r=oP(e);return r===null?null:G6(t,r,n)}function H6(t,e,n,r){const i=oP(e);if(i===null||!rb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),y=sb(p,n,r),_=nP({alt:"media",token:u});return y+_})[0]}function q6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class uP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){if(!t)throw nb()}function K6(t,e){function n(r,i){const s=cP(t,i,e);return dP(s!==null),s}return n}function Y6(t,e){function n(r,i){const s=cP(t,i,e);return dP(s!==null),H6(s,i,t.host,t._protocol)}return n}function hP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=l6():i=a6():n.getStatus()===402?i=o6(t.bucket):n.getStatus()===403?i=c6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Q6(t){const e=hP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=s6(t.path)),s.serverResponse=i.serverResponse,s}return n}function J6(t,e,n){const r=e.fullServerUrl(),i=sb(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new uP(i,s,Y6(t,n),o);return a.errorHandler=Q6(e),a}function X6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Z6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=X6(null,e)),r}function eB(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let N=0;N<2;N++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=Z6(e,r,i),h=q6(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",y=Ks.getBlob(f,r,p);if(y===null)throw p6();const _={name:u.fullPath},A=sb(s,t.host,t._protocol),P="POST",I=t.maxUploadRetryTime,b=new uP(A,P,K6(t,n),I);return b.urlParams=_,b.headers=o,b.body=y.uploadData(),b.errorHandler=hP(e),b}class tB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Vu("cannot .send() more than once");if(rs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nB extends tB{initXhr(){this.xhr_.responseType="text"}}function fP(){return new nB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this._service=e,n instanceof Qn?this._location=n:this._location=Qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new La(e,n)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aP(this._location.path)}get storage(){return this._service}get parent(){const e=U6(this._location.path);if(e===null)return null;const n=new Qn(this._location.bucket,e);return new La(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w6(e)}}function rB(t,e,n){t._throwIfRoot("uploadBytes");const r=eB(t.storage,t._location,lP(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,fP).then(i=>({metadata:i,ref:t}))}function iB(t){t._throwIfRoot("getDownloadURL");const e=J6(t.storage,t._location,lP());return t.storage.makeRequestWithTokens(e,fP).then(n=>{if(n===null)throw g6();return n})}function sB(t,e){const n=B6(t._location.path,e),r=new Qn(t._location.bucket,n);return new La(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(t){return/^[A-Za-z]+:\/\//.test(t)}function aB(t,e){return new La(t,e)}function mP(t,e){if(t instanceof ob){const n=t;if(n._bucket==null)throw m6();const r=new La(n,n._bucket);return e!=null?mP(r,e):r}else return e!==void 0?sB(t,e):t}function lB(t,e){if(e&&oB(e)){if(t instanceof ob)return aB(t,e);throw v0("To use ref(service, url), the first argument must be a Storage instance.")}else return mP(t,e)}function Zx(t,e){const n=e==null?void 0:e[eP];return n==null?null:Qn.makeFromBucketSpec(n,t)}function cB(t,e,n,r={}){t.host=`${e}:${n}`;const i=rs(e);i&&(Up(`https://${t.host}/b`),bv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:FS(s,t.app.options.projectId))}class ob{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=ZR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=r6,this._maxUploadRetryTime=i6,this._requests=new Set,i!=null?this._bucket=Qn.makeFromBucketSpec(i,this._host):this._bucket=Zx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=Zx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new La(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new v6(tP());{const o=R6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const eE="@firebase/storage",tE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="storage";function oh(t,e,n){return t=Z(t),rB(t,e,n)}function ah(t){return t=Z(t),iB(t)}function lh(t,e){return t=Z(t),lB(t,e)}function uB(t=gh(),e){t=Z(t);const r=Hr(t,pP).getImmediate({identifier:e}),i=OS("storage");return i&&dB(r,...i),r}function dB(t,e,n,r={}){cB(t,e,n,r)}function hB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ob(n,r,i,e,ja)}function fB(){_r(new nr(pP,hB,"PUBLIC").setMultipleInstances(!0)),on(eE,tE,""),on(eE,tE,"esm2020")}fB();var gP="5.0.1";function _p(t,e){return new Promise(n=>setTimeout(n,t,e))}function mB(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function pB(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):_p(Math.min(t,e))}function yP(t){return!!t&&typeof t.then=="function"}function nE(t,e){try{const n=t();yP(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function rE(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await mB())}return r}function ch(t){return t.then(void 0,()=>{}),t}function gB(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function yB(t,e){return!gB(t,e)}function ab(t){return parseInt(t)}function Or(t){return parseFloat(t)}function Vi(t,e){return typeof t=="number"&&isNaN(t)?e:t}function In(t){return t.reduce((e,n)=>e+(n?1:0),0)}function wP(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function wB(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,h)=>{o[u]=o[u]||[],o[u].push(h)};for(;;){const u=a.exec(i[2]);if(!u)break;const h=u[0];switch(h[0]){case".":l("class",h.slice(1));break;case"#":l("id",h.slice(1));break;case"[":{const f=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(h);if(f)l(f[1],(n=(e=f[4])!==null&&e!==void 0?e:f[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function vB(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function Os(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s+u,p+=y>>>16,y&=65535,p+=i+l,f+=p>>>16,p&=65535,f+=r+a,h+=f>>>16,f&=65535,h+=n+o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function dr(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s*u,p+=y>>>16,y&=65535,p+=i*u,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,f+=s*a,h+=f>>>16,f&=65535,h+=n*u+r*l+i*a+s*o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function Pl(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function Wn(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function Ze(t,e){t[0]^=e[0],t[1]^=e[1]}const _B=[4283543511,3981806797],bB=[3301882366,444984403];function iE(t){const e=[0,t[0]>>>1];Ze(t,e),dr(t,_B),e[1]=t[0]>>>1,Ze(t,e),dr(t,bB),e[1]=t[0]>>>1,Ze(t,e)}const Bf=[2277735313,289559509],zf=[1291169091,658871167],sE=[0,5],IB=[0,1390208809],TB=[0,944331445];function xB(t,e){const n=vB(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let h;for(h=0;h<s;h=h+16)l[0]=n[h+4]|n[h+5]<<8|n[h+6]<<16|n[h+7]<<24,l[1]=n[h]|n[h+1]<<8|n[h+2]<<16|n[h+3]<<24,u[0]=n[h+12]|n[h+13]<<8|n[h+14]<<16|n[h+15]<<24,u[1]=n[h+8]|n[h+9]<<8|n[h+10]<<16|n[h+11]<<24,dr(l,Bf),Pl(l,31),dr(l,zf),Ze(o,l),Pl(o,27),Os(o,a),dr(o,sE),Os(o,IB),dr(u,zf),Pl(u,33),dr(u,Bf),Ze(a,u),Pl(a,31),Os(a,o),dr(a,sE),Os(a,TB);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const f=[0,0];switch(i){case 15:f[1]=n[h+14],Wn(f,48),Ze(u,f);case 14:f[1]=n[h+13],Wn(f,40),Ze(u,f);case 13:f[1]=n[h+12],Wn(f,32),Ze(u,f);case 12:f[1]=n[h+11],Wn(f,24),Ze(u,f);case 11:f[1]=n[h+10],Wn(f,16),Ze(u,f);case 10:f[1]=n[h+9],Wn(f,8),Ze(u,f);case 9:f[1]=n[h+8],Ze(u,f),dr(u,zf),Pl(u,33),dr(u,Bf),Ze(a,u);case 8:f[1]=n[h+7],Wn(f,56),Ze(l,f);case 7:f[1]=n[h+6],Wn(f,48),Ze(l,f);case 6:f[1]=n[h+5],Wn(f,40),Ze(l,f);case 5:f[1]=n[h+4],Wn(f,32),Ze(l,f);case 4:f[1]=n[h+3],Wn(f,24),Ze(l,f);case 3:f[1]=n[h+2],Wn(f,16),Ze(l,f);case 2:f[1]=n[h+1],Wn(f,8),Ze(l,f);case 1:f[1]=n[h],Ze(l,f),dr(l,Bf),Pl(l,31),dr(l,zf),Ze(o,l)}return Ze(o,r),Ze(a,r),Os(o,a),Os(a,o),iE(o),iE(a),Os(o,a),Os(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function EB(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function SB(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function AB(t){return typeof t!="function"}function kB(t,e){const n=ch(new Promise(r=>{const i=Date.now();nE(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(AB(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();nE(a,(...h)=>{const f=o+Date.now()-u;if(!h[0])return l({error:h[1],duration:f});l({value:h[1],duration:f})})}))})}));return function(){return n.then(i=>i())}}function CB(t,e,n,r){const i=Object.keys(t).filter(o=>yB(n,o)),s=ch(rE(i,o=>kB(t[o],e),r));return async function(){const a=await s,l=await rE(a,f=>ch(f()),r),u=await Promise.all(l),h={};for(let f=0;f<i.length;++f)h[i[f]]=u[f];return h}}function vP(){const t=window,e=navigator;return In(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function RB(){const t=window,e=navigator;return In(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!vP()}function jh(){const t=window,e=navigator;return In(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function qr(){const t=window,e=navigator;return In(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function lb(){const t=window,{HTMLElement:e,Document:n}=t;return In(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function Fh(){const t=window;return SB(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function _P(){var t,e;const n=window;return In(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function PB(){const t=window;return In([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function NB(){const t=window,{URLPattern:e}=t;return In(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function DB(){const t=window;return In(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function Uh(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return In([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function LB(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return In(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function MB(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function OB(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function cb(){const t=jh(),e=_P(),n=window,r=navigator,i="connection";return t?In([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?In(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function VB(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return In(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function jB(){return BB()?-4:FB()}function FB(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(UB())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=zB(i),u=ch(a.then(h=>$B(h.getChannelData(0).subarray(n)),h=>{if(h.name==="timeout"||h.name==="suspended")return-3;throw h}));return()=>(l(),u)}function UB(){return qr()&&!lb()&&!DB()}function BB(){return qr()&&Uh()&&Fh()||jh()&&VB()&&NB()}function zB(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,h=0,f=0;t.oncomplete=_=>a(_.renderedBuffer);const p=()=>{setTimeout(()=>l(oE("timeout")),Math.min(500,f+5e3-Date.now()))},y=()=>{try{const _=t.startRendering();switch(yP(_)&&ch(_),t.state){case"running":f=Date.now(),u&&p();break;case"suspended":document.hidden||h++,u&&h>=3?l(oE("suspended")):setTimeout(y,500);break}}catch(_){l(_)}};y(),s=()=>{u||(u=!0,f>0&&p())}}),s]}function $B(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function oE(t){const e=new Error(t);return e.name=t,e}async function bP(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await _p(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let h=!1;const f=()=>{h=!0,l()},p=A=>{h=!0,u(A)};a.onload=f,a.onerror=p;const{style:y}=a;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const _=()=>{var A,P;h||(((P=(A=a.contentWindow)===null||A===void 0?void 0:A.document)===null||P===void 0?void 0:P.readyState)==="complete"?f():setTimeout(_,10))};_()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await _p(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function WB(t){const[e,n]=wB(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?GB(r.style,s):r.setAttribute(i,s)}return r}function GB(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function HB(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const qB="mmMwWLliI0O&1",KB="48px",Nl=["monospace","sans-serif","serif"],aE=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function YB(){return bP(async(t,{document:e})=>{const n=e.body;n.style.fontSize=KB;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=y=>{const _=e.createElement("span"),{style:A}=_;return A.position="absolute",A.top="0",A.left="0",A.fontFamily=y,_.textContent=qB,r.appendChild(_),_},a=(y,_)=>o(`'${y}',${_}`),l=()=>Nl.map(o),u=()=>{const y={};for(const _ of aE)y[_]=Nl.map(A=>a(_,A));return y},h=y=>Nl.some((_,A)=>y[A].offsetWidth!==i[_]||y[A].offsetHeight!==s[_]),f=l(),p=u();n.appendChild(r);for(let y=0;y<Nl.length;y++)i[Nl[y]]=f[y].offsetWidth,s[Nl[y]]=f[y].offsetHeight;return aE.filter(y=>h(p[y]))})}function QB(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function JB(){return XB(sz())}function XB(t){let e=!1,n,r;const[i,s]=ZB();return ez(i,s)?(e=tz(s),t?n=r="skipped":[n,r]=nz(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function ZB(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function ez(t,e){return!!(e&&t.toDataURL)}function tz(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function nz(t,e){rz(t,e);const n=jy(t),r=jy(t);return n!==r?["unstable","unstable"]:(iz(t,e),[jy(t),n])}function rz(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function iz(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function jy(t){return t.toDataURL()}function sz(){return qr()&&Uh()&&Fh()}function oz(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=ab(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function az(){return navigator.oscpu}function lz(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))jh()&&PB()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function cz(){return window.screen.colorDepth}function uz(){return Vi(Or(navigator.deviceMemory),void 0)}function dz(){if(!(qr()&&Uh()&&Fh()))return hz()}function hz(){const t=screen,e=r=>Vi(ab(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const fz=2500,mz=10;let _m,Fy;function pz(){if(Fy!==void 0)return;const t=()=>{const e=_0();b0(e)?Fy=setTimeout(t,fz):(_m=e,Fy=void 0)};t()}function gz(){return pz(),async()=>{let t=_0();if(b0(t)){if(_m)return[..._m];MB()&&(await OB(),t=_0())}return b0(t)||(_m=t),t}}function yz(){if(qr()&&Uh()&&Fh())return()=>Promise.resolve(void 0);const t=gz();return async()=>{const e=await t(),n=r=>r===null?null:wP(r,mz);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function _0(){const t=screen;return[Vi(Or(t.availTop),null),Vi(Or(t.width)-Or(t.availWidth)-Vi(Or(t.availLeft),0),null),Vi(Or(t.height)-Or(t.availHeight)-Vi(Or(t.availTop),0),null),Vi(Or(t.availLeft),null)]}function b0(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function wz(){return Vi(ab(navigator.hardwareConcurrency),void 0)}function vz(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-_z();return`UTC${n>=0?"+":""}${n}`}function _z(){const t=new Date().getFullYear();return Math.max(Or(new Date(t,0,1).getTimezoneOffset()),Or(new Date(t,6,1).getTimezoneOffset()))}function bz(){try{return!!window.sessionStorage}catch{return!0}}function Iz(){try{return!!window.localStorage}catch{return!0}}function Tz(){if(!(vP()||RB()))try{return!!window.indexedDB}catch{return!0}}function xz(){return!!window.openDatabase}function Ez(){return navigator.cpuClass}function Sz(){const{platform:t}=navigator;return t==="MacIntel"&&qr()&&!lb()?LB()?"iPad":"iPhone":t}function Az(){return navigator.vendor||""}function kz(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function Cz(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function Rz(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function Pz({debug:t}={}){if(!Nz())return;const e=Rz(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await Dz(r);t&&Lz(e,i);const s=n.filter(o=>{const a=e[o];return In(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function Nz(){return qr()||cb()}async function Dz(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};lE(r);for(let o=0;o<t.length;++o){const a=WB(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");lE(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await _p(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function lE(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function Lz(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function Mz(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function Oz(){if(cE("inverted"))return!0;if(cE("none"))return!1}function cE(t){return matchMedia(`(inverted-colors: ${t})`).matches}function Vz(){if(uE("active"))return!0;if(uE("none"))return!1}function uE(t){return matchMedia(`(forced-colors: ${t})`).matches}const jz=100;function Fz(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=jz;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function Uz(){if(Dl("no-preference"))return 0;if(Dl("high")||Dl("more"))return 1;if(Dl("low")||Dl("less"))return-1;if(Dl("forced"))return 10}function Dl(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function Bz(){if(dE("reduce"))return!0;if(dE("no-preference"))return!1}function dE(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function zz(){if(hE("reduce"))return!0;if(hE("no-preference"))return!1}function hE(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function $z(){if(fE("high"))return!0;if(fE("standard"))return!1}function fE(t){return matchMedia(`(dynamic-range: ${t})`).matches}const ke=Math,yn=()=>0;function Wz(){const t=ke.acos||yn,e=ke.acosh||yn,n=ke.asin||yn,r=ke.asinh||yn,i=ke.atanh||yn,s=ke.atan||yn,o=ke.sin||yn,a=ke.sinh||yn,l=ke.cos||yn,u=ke.cosh||yn,h=ke.tan||yn,f=ke.tanh||yn,p=ke.exp||yn,y=ke.expm1||yn,_=ke.log1p||yn,A=w=>ke.pow(ke.PI,w),P=w=>ke.log(w+ke.sqrt(w*w-1)),I=w=>ke.log(w+ke.sqrt(w*w+1)),b=w=>ke.log((1+w)/(1-w))/2,x=w=>ke.exp(w)-1/ke.exp(w)/2,N=w=>(ke.exp(w)+1/ke.exp(w))/2,U=w=>ke.exp(w)-1,B=w=>(ke.exp(2*w)-1)/(ke.exp(2*w)+1),T=w=>ke.log(1+w);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:P(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:I(1),atanh:i(.5),atanhPf:b(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:x(1),cos:l(10.000000000123),cosh:u(1),coshPf:N(1),tan:h(-1e300),tanh:f(1),tanhPf:B(1),exp:p(1),expm1:y(1),expm1Pf:U(1),log1p:_(10),log1pPf:T(10),powPI:A(-100)}}const Gz="mmMwWLliI0fiflO&1",Uy={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function Hz(){return qz((t,e)=>{const n={},r={};for(const i of Object.keys(Uy)){const[s={},o=Gz]=Uy[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(Uy))r[i]=n[i].getBoundingClientRect().width;return r})}function qz(t,e=4e3){return bP((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",jh()?s.style.zoom=`${1/r.devicePixelRatio}`:qr()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function Kz(){return navigator.pdfViewerEnabled}function Yz(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function Qz(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(Jz())return-3;try{return t.canMakePayments()?1:0}catch(e){return Xz(e)}}const Jz=HB;function Xz(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function Zz(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const IP=-1,TP=-2,e9=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),t9=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),n9=["FRAGMENT_SHADER","VERTEX_SHADER"],r9=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],xP="WEBGL_debug_renderer_info",i9="WEBGL_polygon_mode";function s9({cache:t}){var e,n,r,i,s,o;const a=EP(t);if(!a)return IP;if(!AP(a))return TP;const l=SP()?null:a.getExtension(xP);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function o9({cache:t}){const e=EP(t);if(!e)return IP;if(!AP(e))return TP;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const h of Object.keys(r))s.push(`${h}=${r[h]}`);const u=mE(e);for(const h of u){const f=e[h];o.push(`${h}=${f}${e9.has(f)?`=${e.getParameter(f)}`:""}`)}if(n)for(const h of n){if(h===xP&&SP()||h===i9&&c9())continue;const f=e.getExtension(h);if(!f){i.push(h);continue}for(const p of mE(f)){const y=f[p];a.push(`${p}=${y}${t9.has(y)?`=${e.getParameter(y)}`:""}`)}}for(const h of n9)for(const f of r9){const p=a9(e,h,f);l.push(`${h}.${f}=${p.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function EP(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function a9(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function mE(t){return Object.keys(t.__proto__).filter(l9)}function l9(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function SP(){return _P()}function c9(){return jh()||qr()}function AP(t){return typeof t.getParameter=="function"}function u9(){if(!(cb()||qr()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function d9(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const h9={fonts:YB,domBlockers:Pz,fontPreferences:Hz,audio:jB,screenFrame:yz,canvas:JB,osCpu:az,languages:lz,colorDepth:cz,deviceMemory:uz,screenResolution:dz,hardwareConcurrency:wz,timezone:vz,sessionStorage:bz,localStorage:Iz,indexedDB:Tz,openDatabase:xz,cpuClass:Ez,platform:Sz,plugins:QB,touchSupport:oz,vendor:Az,vendorFlavors:kz,cookiesEnabled:Cz,colorGamut:Mz,invertedColors:Oz,forcedColors:Vz,monochrome:Fz,contrast:Uz,reducedMotion:Bz,reducedTransparency:zz,hdr:$z,math:Wz,pdfViewerEnabled:Kz,architecture:Yz,applePay:Qz,privateClickMeasurement:Zz,audioBaseLatency:u9,dateTimeLocale:d9,webGlBasics:s9,webGlExtensions:o9};function f9(t){return CB(h9,t,[])}const m9="$ if upgrade to Pro: https://fpjs.dev/pro";function p9(t){const e=g9(t),n=y9(e);return{score:e,comment:m9.replace(/\$/g,`${n}`)}}function g9(t){if(cb())return .4;if(qr())return lb()&&!(Uh()&&Fh())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function y9(t){return wP(.99+.01*t,1e-4)}function w9(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function kP(t){return JSON.stringify(t,(e,n)=>n instanceof Error?EB(n):n,2)}function CP(t){return xB(w9(t))}function v9(t){let e;const n=p9(t);return{get visitorId(){return e===void 0&&(e=CP(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:gP}}function _9(t=50){return pB(t,t*2)}function b9(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=v9(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${kP(s)}
\`\`\``),o}}}function I9(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${gP}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function T9(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&I9();const{delayFallback:n,debug:r}=t;await _9(n);const i=f9({cache:{},debug:r});return b9(i,r)}var x9={load:T9,hashComponents:CP,componentsToDebugString:kP};const E9={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},nu=KS(E9),RP=aV(nu),Fs=d5(nu),vn=DU(nu),Fc=uB(nu);fV(nu,{backend:new $p});async function PP(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function S9(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function NP(){try{return(await Sj(Fs)).user}catch(t){throw console.error("Error signing in:",t),t}}function DP(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let By=null,qn=null;async function ub(){return qn||(By||(By=x9.load().then(t=>t.get()).then(t=>(qn=t.visitorId,localStorage.setItem("moomhe_fingerprint",qn),console.log("Browser fingerprint generated:",qn),qn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),qn=e,e})),By)}function A9(){if(qn)return qn;const t=localStorage.getItem("moomhe_fingerprint");return t?(qn=t,t):null}async function I0(){if(qn)return qn;const t=localStorage.getItem("moomhe_fingerprint");return t?(qn=t,t):await ub()}ub();async function Jo(t){const e=DP(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:k9(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await Oh(Br(vn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function k9(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function To(t,e=1536,n=.8,r=!1){if(r||t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const o=await(await fetch(t)).blob();if(o.type==="image/jpeg"||o.type==="image/png"||o.type==="image/webp"){console.log("File already in displayable format, skipping HEIC conversion");const h=await new Promise(f=>{const p=new FileReader;p.onload=()=>f(p.result),p.readAsDataURL(o)});return await To(h,e,n)}const{heicTo:a}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]),l=await a({blob:o,type:"image/jpeg",quality:n}),u=await new Promise(h=>{const f=new FileReader;f.onload=()=>h(f.result),f.readAsDataURL(l)});return console.log("HEIC converted to JPEG successfully"),await To(u,e,n)}catch(s){throw console.error("Error converting HEIC image:",s),new Error("Failed to convert HEIC image to JPEG")}return new Promise((s,o)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{try{const l=document.createElement("canvas"),u=l.getContext("2d");let{width:h,height:f}=a;const p=h,y=f;if(h<=e&&f<=e)l.width=h,l.height=f;else{const _=h/f;h>f?(h=e,f=Math.round(e/_)):(f=e,h=Math.round(e*_)),l.width=h,l.height=f}u.drawImage(a,0,0,h,f),l.toBlob(_=>{_?(console.log(`Image compressed: Original ${p}x${y} -> ${h}x${f} (max ${e}), Size: ${(_.size/1024/1024).toFixed(2)}MB`),s(_)):o(new Error("Failed to create compressed image blob"))},"image/jpeg",n)}catch(l){console.error("Error compressing image:",l),o(l)}},a.onerror=()=>{o(new Error("Failed to load image for compression"))},a.src=t})}function C9(t,e=1536,n=.8){return new Promise((r,i)=>{const s=new FileReader;s.onload=o=>{To(o.target.result,e,n).then(r).catch(i)},s.onerror=()=>i(new Error("Failed to read file")),s.readAsDataURL(t)})}function LP(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(h=>{h?r(h):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function R9(t,e,n){try{let r;try{r=await To(e,1536,.8)}catch(_){console.warn("Failed to compress image, using original:",_),r=await(await fetch(e)).blob()}let i;try{i=await LP(e)}catch(_){console.warn("Failed to create thumbnail, using compressed image:",_),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=lh(Fc,`userHistory/${t}/${o}`),u=await oh(l,r),h=await ah(u.ref),f=lh(Fc,`userHistory/${t}/${a}`),p=await oh(f,i),y=await ah(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function P9(t,e){try{const n=await new Promise(_=>{const A=new FileReader;A.onload=()=>_(A.result),A.readAsDataURL(e)});let r;try{r=await To(n,1536,.8)}catch(_){console.warn("Failed to compress image, using original file:",_),r=e}let i;try{i=await LP(n)}catch(_){console.warn("Failed to create thumbnail, using compressed image:",_),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=lh(Fc,`userHistory/${t}/${o}`),u=await oh(l,r),h=await ah(u.ref),f=lh(Fc,`userHistory/${t}/${a}`),p=await oh(f,i),y=await ah(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function N9(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await R9(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=Br(Da(vn,"userHistory"));return await Oh(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function MP(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await P9(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=Br(Da(vn,"userHistory"));return await Oh(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function D9(t){try{const e=Da(vn,"userHistory"),n=cc(e,wm("userId","==",t),uc("createdAt","desc")),r=await ih(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename,o.result.originalImageUrl&&(a.originalImageUrl=o.result.originalImageUrl)),o.originalImageUrl?a.originalImageUrl=o.originalImageUrl:o.imageData&&typeof o.imageData=="string"&&o.imageData.startsWith("http")&&(a.originalImageUrl=o.imageData),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function jl(t,e=1,n=7){try{const r=Da(vn,"userHistory");let i=null;if(e>1){const f=cc(r,wm("userId","==",t),uc("createdAt","desc"),My((e-1)*n)),p=await ih(f);p.empty||(i=p.docs[p.docs.length-1])}let s;const o=n*2;i&&e>1?s=cc(r,wm("userId","==",t),uc("createdAt","desc"),BU(i),My(o)):s=cc(r,wm("userId","==",t),uc("createdAt","desc"),My(o));const a=await ih(s),l=[];a.forEach(f=>{const p=f.data();if(!p.isError){const y={id:f.id,...p};p.result&&p.result.storageUrl&&(y.storageUrl=p.result.storageUrl,y.thumbnailUrl=p.result.thumbnailUrl,y.filename=p.result.filename,y.thumbnailFilename=p.result.thumbnailFilename,p.result.originalImageUrl&&(y.originalImageUrl=p.result.originalImageUrl)),p.originalImageUrl?y.originalImageUrl=p.originalImageUrl:p.imageData&&typeof p.imageData=="string"&&p.imageData.startsWith("http")&&(y.originalImageUrl=p.imageData),p.objects&&(y.objects=p.objects),l.push(y)}});const u=l.slice(0,n),h=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${h}`),{history:u,hasMore:h}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function T0(t,e){try{let n;try{n=await To(e,1536,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=lh(Fc,`temp/${t}/${i}`),o=await oh(s,n),a=await ah(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function fe(t,e={}){try{vA(RP,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const bm=(t="email")=>fe("sign_up",{method:t}),OP=(t="email")=>fe("login",{method:t}),VP=()=>fe("anonymous_sign_in"),jP=()=>fe("logout"),x0=t=>fe("account_link",{success:t}),FP=t=>fe("image_upload",{file_type:t}),UP=()=>fe("object_image_upload"),BP=()=>fe("image_download"),zP=t=>fe("image_share",{platform:t}),$P=(t,e=!1)=>fe("generation_start",{prompt_type:t,has_object_image:e}),WP=(t,e)=>fe("generation_complete",{prompt_type:t,duration_ms:e}),Im=t=>fe("generation_error",{error_type:t}),Tm=(t,e,n)=>fe("limit_reached",{subscription:t,usage:e,limit:n}),L9=(t,e=0)=>fe("object_detection",{success:t,object_count:e}),xm=(t,e=null)=>fe("feature_use",{feature:t,value:e}),GP=t=>fe("style_select",{style:t}),HP=(t,e)=>fe("color_select",{color:t,category:e}),M9=t=>fe("angle_select",{angle:t}),qP=t=>fe("lighting_select",{lighting:t}),KP=t=>fe("furniture_select",{furniture:t}),YP=t=>fe("repairs_select",{repair:t}),QP=t=>fe("doors_windows_select",{option:t}),JP=t=>fe("bathroom_select",{option:t}),E0=()=>fe("onboarding_start"),XP=t=>fe("onboarding_step",{step:t}),ZP=()=>fe("onboarding_complete"),eN=t=>fe("onboarding_skip",{at_step:t}),S0=()=>fe("subscription_modal_view"),tN=t=>fe("subscription_click",{tier:t}),nN=()=>fe("welcome_premium_show"),rN=()=>fe("history_click"),iN=t=>fe("history_load_more",{page:t}),sN=()=>fe("contact_form_submit"),oN=()=>fe("contact_form_success"),O9=t=>fe("category_select",{category:t}),V9=t=>fe("page_view",{page:t}),aN=()=>fe("app_open"),j9=Object.freeze(Object.defineProperty({__proto__:null,analytics:RP,app:nu,auth:Fs,compressFile:C9,compressImage:To,createOrUpdateUser:Jo,db:vn,fileToGenerativePart:PP,getDeviceFingerprint:I0,getDeviceId:DP,getFingerprint:A9,initFingerprint:ub,loadUserHistory:D9,loadUserHistoryPaginated:jl,logAnalyticsEvent:fe,saveImageToHistory:N9,saveUploadToHistory:MP,signInUser:NP,storage:Fc,trackAccountLink:x0,trackAngleSelect:M9,trackAnonymousSignIn:VP,trackAppOpen:aN,trackBathroomSelect:JP,trackCategorySelect:O9,trackColorSelect:HP,trackContactFormSubmit:sN,trackContactFormSuccess:oN,trackDoorsWindowsSelect:QP,trackFeatureUse:xm,trackFurnitureSelect:KP,trackGenerationComplete:WP,trackGenerationError:Im,trackGenerationStart:$P,trackHistoryClick:rN,trackHistoryLoadMore:iN,trackImageDownload:BP,trackImageShare:zP,trackImageUpload:FP,trackLightingSelect:qP,trackLimitReached:Tm,trackLogin:OP,trackLogout:jP,trackObjectDetection:L9,trackObjectImageUpload:UP,trackOnboardingComplete:ZP,trackOnboardingSkip:eN,trackOnboardingStart:E0,trackOnboardingStep:XP,trackPageView:V9,trackRepairsSelect:YP,trackSignUp:bm,trackStyleSelect:GP,trackSubscriptionClick:tN,trackSubscriptionModalView:S0,trackWelcomePremiumShow:nN,uploadImageForSharing:T0,urlToFile:S9},Symbol.toStringTag,{value:"Module"}));class F9{constructor(){hb(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=sh(Br(vn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map,this.useExperimentalModel=!0}setUseExperimentalModel(e){this.useExperimentalModel=e,console.log(`[AIService] Experimental model (GPT-image-1.5) ${e?"ENABLED":"DISABLED"}`)}isExperimentalModelEnabled(){return this.useExperimentalModel}async submitImageGenerationRequest(e,n,r,i=null,s=null,o=null){try{const a=await e.getIdToken(),l=o!==null?o:this.useExperimentalModel;l&&console.log("[AIService] Using EXPERIMENTAL GPT-image-1.5 model for this request");const u={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:a,deviceId:s,prompt:n,imageData:r,originalImageUrl:r&&r.startsWith("http")?r:null,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date,useExperimentalModel:l},h=Br(Da(vn,"userHistory"));return await Oh(h,u),h.id}catch(a){throw console.error("Error submitting image generation request:",a),a}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=Br(vn,"genCount",r,"users",e),s=Br(vn,"users",e),[o,a]=await Promise.all([Kx(i),Kx(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},h=u.credits!==void 0?u.credits:0;return{count:l,limit:h}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const $f=new F9,U9={appTitle:" AI",appName:"",categoryKitchen:"",categoryKidsBedroom:" ",categoryBathroom:"",categoryLivingRoom:" ",categoryMasterBedroom:"  ",readyDesigns:" ",guest:"",loginToSaveDesigns:"   ",loggedOutSuccess:"   ",login:" ",logout:" ",createAccount:" ",createNewAccount:" ",welcomeBack:" !   ",joinUs:"       ",email:" ",password:" ",confirmPassword:"  ",fillAllFields:"   ",passwordsNotMatch:"   ",loginButton:" ",createAccountButton:" ",forgotPassword:"  ",enterEmailFirst:"     ",passwordResetEmailSent:"      !       .",passwordResetError:"       ",termsAgreement:"    ",termsOfService:" ",and:"",privacyPolicy:" ",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"  ...",creatingAccount:"  ...",loginSuccess:"   ! ",accountCreated:"   ! ",loginError:"   ",userNotFound:"  ",wrongPassword:"  ",emailInUse:"   ",weakPassword:"   ",invalidEmail:"    ",exitAccount:"  ",loginWithEmail:"     ",uploadImage:" ",clickToUploadImage:"     ",gallery:"",camera:"",uploadItem:" ",redesign:" ",more:"",moreOptions:" ",history:"",noHistoryYet:"   ",uploadedImagesWillAppear:"     ",whatToChange:"  ",uploadImageFirst:"   ",uploadingImage:"  ...",errorUploadingImage:"   ",itemImageLoaded:"   !      .",addAttachedItem:"    ",processingStarting:" ...",processingMagic:" ",processing:" ...",connectingToCloud:"  ... ",sendingToAI:"   AI... ",analyzingItem:"  ... ",creatingDesign:"  ... ",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",selectDesignStyle:"  ",colorPalette:" ",selectLightingType:"  ",selectFurnitureType:"  ",selectRepairType:"  /",bathroomOptions:" ",whatToDo:"   ",describeChange:"  ...",cancel:"",execute:"",confirm:"",close:"",tryAgain:"  ",mySubscription:"",creditsRemaining:"{count}  ",upgradeToPremium:"  ",iHaveCoupon:" ",enterCouponCode:"      ",enterCouponCodeTitle:"  ",couponCode:" ",mustEnterCoupon:"   ",couponActivated:"   !",errorRedeemingCoupon:"   ",redeemCoupon:" ",creditsAddedToAccount:"  {count}   ! ",contactUs:" ",phone:"",message:"",writeYourMessage:"  ...",sendMessage:" ",messageSentSuccess:"   !",contentNotAllowed:"  ",requestFailed:" ",oopsSomethingWrong:"!   ",errorUnknown:"  ",imageSavedToGallery:"    !",errorDownloadingImage:"   ",errorSharing:"  ",comparison:"",download:"",share:"",revertToOriginal:" ",loveItSave:"! ",language:"",selectLanguage:" ",languageChanged:"  ",create:"",tutorial:"",designHistory:" ",professionalSubscription:" ",moreTools:" ",colors:"",aiDesigner:" AI",aiDesignerActiveClickToDisable:" -  ",aiDesignerInactiveClickToEnable:"  -  ",promptPlaceholder:"  ... (:         )",bathroomShort:"",skip:"",next:"",finish:"",later:"",loginNow:"  ",startDesigning:" ",thankYou:" !",sending:" ...",onboardingUploadTitle:" ",onboardingUploadDesc:"      .        .",onboardingStyleTitle:"  ",onboardingStyleDesc:'      .  " "   .',onboardingCreateTitle:" ",onboardingCreateDesc:'  ""        !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'       " "      .'},B9={appTitle:"Experto AI",appName:"Experto",categoryKitchen:"Cocina",categoryKidsBedroom:"Dormitorio infantil",categoryBathroom:"Bao",categoryLivingRoom:"Sala de estar",categoryMasterBedroom:"Dormitorio principal",readyDesigns:"Galera de diseos",guest:"Invitado",loginToSaveDesigns:"Inicia sesin para guardar tus diseos",loggedOutSuccess:"Sesin cerrada con xito",login:"Iniciar sesin",logout:"Cerrar sesin",createAccount:"Crear cuenta",createNewAccount:"Nueva cuenta",welcomeBack:"Bienvenido de nuevo! Inicia sesin para continuar",joinUs:"nete a nosotros para guardar diseos y acceder a todas las funciones",email:"Correo electrnico",password:"Contrasea",confirmPassword:"Confirmar contrasea",fillAllFields:"Por favor, completa todos los campos",passwordsNotMatch:"Las contraseas no coinciden",loginButton:"Iniciar sesin",createAccountButton:"Crear cuenta",forgotPassword:"Olvidaste tu contrasea?",enterEmailFirst:"Por favor, introduce primero tu correo electrnico",passwordResetEmailSent:"Correo de restablecimiento enviado! Revisa tu bandeja de entrada y spam.",passwordResetError:"Error al enviar el correo de restablecimiento",termsAgreement:"Al iniciar sesin aceptas los",termsOfService:"Trminos de servicio",and:"y",privacyPolicy:"Poltica de privacidad",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"Iniciando sesin...",creatingAccount:"Creando cuenta...",loginSuccess:"Sesin iniciada con xito! ",accountCreated:"Cuenta creada con xito! ",loginError:"Error de inicio de sesin",userNotFound:"Usuario no encontrado",wrongPassword:"Contrasea incorrecta",emailInUse:"El correo ya est en uso",weakPassword:"La contrasea es muy dbil",invalidEmail:"Correo electrnico invlido",exitAccount:"Salir de la cuenta",loginWithEmail:"Inicia sesin con tu correo para guardar tus diseos",uploadImage:"Subir imagen",clickToUploadImage:"Haz clic aqu para subir una imagen de la galera",gallery:"Galera",camera:"Cmara",uploadItem:"Aadir elemento",redesign:"Redisear",more:"Ms",moreOptions:"Ms opciones",history:"Historial",noHistoryYet:"An no hay historial",uploadedImagesWillAppear:"Las imgenes que subas y edites aparecern aqu",whatToChange:"Qu cambiar?",uploadImageFirst:"Por favor, sube una imagen primero",uploadingImage:"Subiendo imagen...",errorUploadingImage:"Error al subir la imagen",itemImageLoaded:"Imagen del elemento cargada! Describe en el prompt dnde aadirlo.",addAttachedItem:"Aadir el elemento adjunto a la imagen",processingStarting:"Iniciando...",processingMagic:"La magia est sucediendo",processing:"Procesando...",connectingToCloud:"Conectando a la nube... ",sendingToAI:"Enviando a AI... ",analyzingItem:"Analizando elemento... ",creatingDesign:"Creando diseo... ",designStyle:"Estilo de diseo",wallColor:"Cambiar color",lighting:"Iluminacin",furniture:"Muebles",doorsWindows:"Puertas y ventanas",bathroom:"Bao",repairs:"Reparaciones",general:"General",selectDesignStyle:"Seleccionar estilo de diseo",colorPalette:"Paleta de colores",selectLightingType:"Seleccionar tipo de iluminacin",selectFurnitureType:"Seleccionar tipo de mueble",selectRepairType:"Seleccionar tipo de reparacin/dao",bathroomOptions:"Opciones de bao",whatToDo:"Qu hacer?",describeChange:"Describe el cambio deseado...",cancel:"Cancelar",execute:"Ejecutar",confirm:"Confirmar",close:"Cerrar",tryAgain:"Intentar de nuevo",mySubscription:"Mi suscripcin",creditsRemaining:"{count} crditos restantes",upgradeToPremium:"Actualizar a Premium",iHaveCoupon:"Tengo un cupn",enterCouponCode:"Introduce el cdigo del cupn para obtener crditos gratis",enterCouponCodeTitle:"Introducir cdigo de cupn",couponCode:"Cdigo de cupn",mustEnterCoupon:"Debes introducir un cdigo de cupn",couponActivated:"Cupn activado con xito!",errorRedeemingCoupon:"Error al canjear el cupn",redeemCoupon:"Canjear cupn",creditsAddedToAccount:"{count} crditos aadidos a tu cuenta! ",contactUs:"Contctanos",phone:"Telfono",message:"Mensaje",writeYourMessage:"Escribe tu mensaje aqu...",sendMessage:"Enviar mensaje",messageSentSuccess:"Mensaje enviado con xito!",contentNotAllowed:"Contenido no permitido",requestFailed:"Solicitud fallida",oopsSomethingWrong:"Ups! Algo sali mal",errorUnknown:"Error desconocido",imageSavedToGallery:"Imagen guardada en la galera!",errorDownloadingImage:"Error al descargar la imagen",errorSharing:"Error al compartir",comparison:"Comparacin",download:"Descargar",share:"Compartir",revertToOriginal:"Volver al original",loveItSave:"Me encanta! Guardar",language:"Idioma",selectLanguage:"Seleccionar idioma",languageChanged:"Idioma cambiado",create:"Crear",tutorial:"Tutorial",designHistory:"Historial de diseos",professionalSubscription:"Plan profesional",moreTools:"Ms herramientas",colors:"Colores",aiDesigner:"Diseador AI",aiDesignerActiveClickToDisable:"Activo - Clic para desactivar",aiDesignerInactiveClickToEnable:"Inactivo - Clic para activar",promptPlaceholder:"Describe el diseo deseado... (ej: cambia el sof a azul, aade plantas en la esquina)",bathroomShort:"Bao",skip:"Saltar",next:"Siguiente",finish:"Terminar",later:"Ms tarde",loginNow:"Iniciar sesin ahora",startDesigning:"Empezar a disear",thankYou:"Gracias!",sending:"Enviando...",onboardingUploadTitle:"Subir imagen",onboardingUploadDesc:"Comienza subiendo una foto de la habitacin que quieres disear. No tienes una? No te preocupes, usaremos una imagen de ejemplo.",onboardingStyleTitle:"Elige un estilo de rediseo",onboardingStyleDesc:'Selecciona tu estilo preferido del men lateral. Prueba "Redisear" para ver diferentes opciones.',onboardingCreateTitle:"Crear diseo",onboardingCreateDesc:'Haz clic en "Crear" y la IA redisear tu habitacin en segundos!',onboardingItemTipTitle:"Consejo: Aadir elemento",onboardingItemTipDesc:'Quieres aadir un mueble especfico? Usa el botn "Aadir elemento" para subir una imagen de un objeto e incorporarlo al diseo.'},z9={appTitle:"Experte AI",appName:"Experte",categoryKitchen:"Kche",categoryKidsBedroom:"Kinderzimmer",categoryBathroom:"Badezimmer",categoryLivingRoom:"Wohnzimmer",categoryMasterBedroom:"Schlafzimmer",readyDesigns:"Design-Galerie",guest:"Gast",loginToSaveDesigns:"Melden Sie sich an, um Ihre Designs zu speichern",loggedOutSuccess:"Erfolgreich abgemeldet",login:"Anmelden",logout:"Abmelden",createAccount:"Konto erstellen",createNewAccount:"Neues Konto",welcomeBack:"Willkommen zurck! Melden Sie sich an, um fortzufahren",joinUs:"Treten Sie uns bei, um Designs zu speichern und auf alle Funktionen zuzugreifen",email:"E-Mail",password:"Passwort",confirmPassword:"Passwort besttigen",fillAllFields:"Bitte fllen Sie alle Felder aus",passwordsNotMatch:"Passwrter stimmen nicht berein",loginButton:"Anmelden",createAccountButton:"Konto erstellen",forgotPassword:"Passwort vergessen?",enterEmailFirst:"Bitte geben Sie zuerst eine E-Mail-Adresse ein",passwordResetEmailSent:"E-Mail zum Zurcksetzen des Passworts gesendet! berprfen Sie Ihren Posteingang und Spam-Ordner.",passwordResetError:"Fehler beim Senden der E-Mail zum Zurcksetzen des Passworts",termsAgreement:"Mit der Anmeldung stimmen Sie den",termsOfService:"Nutzungsbedingungen",and:"und",privacyPolicy:"Datenschutzrichtlinie",loggingIn:"Anmeldung...",creatingAccount:"Konto wird erstellt...",loginSuccess:"Erfolgreich angemeldet! ",accountCreated:"Konto erfolgreich erstellt! ",loginError:"Anmeldefehler",userNotFound:"Benutzer nicht gefunden",wrongPassword:"Falsches Passwort",emailInUse:"E-Mail bereits in Verwendung",weakPassword:"Passwort ist zu schwach",invalidEmail:"Ungltige E-Mail-Adresse",exitAccount:"Konto verlassen",loginWithEmail:"Melden Sie sich mit E-Mail an, um Ihre Designs zu speichern",uploadImage:"Bild hochladen",clickToUploadImage:"Klicken Sie hier, um ein Bild aus der Galerie hochzuladen",gallery:"Galerie",camera:"Kamera",uploadItem:"Element hinzufgen",redesign:"Neu gestalten",more:"Mehr",moreOptions:"Weitere Optionen",history:"Verlauf",noHistoryYet:"Noch kein Verlauf",uploadedImagesWillAppear:"Bilder, die Sie hochladen und bearbeiten, erscheinen hier",whatToChange:"Was ndern?",uploadImageFirst:"Bitte laden Sie zuerst ein Bild hoch",uploadingImage:"Bild wird hochgeladen...",errorUploadingImage:"Fehler beim Hochladen des Bildes",processingStarting:"Starten...",processingMagic:"Die Magie geschieht",processing:"Verarbeitung...",connectingToCloud:"Verbindung zur Cloud... ",sendingToAI:"Senden an AI... ",analyzingItem:"Element analysieren... ",creatingDesign:"Design erstellen... ",designStyle:"Designstil",wallColor:"Farbe ndern",lighting:"Beleuchtung",furniture:"Mbel",doorsWindows:"Tren & Fenster",bathroom:"Badezimmer",repairs:"Reparaturen",general:"Allgemein",selectDesignStyle:"Designstil auswhlen",colorPalette:"Farbpalette",colorReds:"Rottne",colorOranges:"Orangetne",colorYellows:"Gelbtne",colorGreens:"Grntne",colorBlues:"Blautne",colorPurples:"Violetttne",colorGrays:"Grautne",colorWhitesAndBlacks:"Wei & Schwarz",selectLightingType:"Beleuchtungsart auswhlen",selectFurnitureType:"Mbeltyp auswhlen",selectRepairType:"Reparatur-/Schadenstyp auswhlen",bathroomOptions:"Badezimmeroptionen",pleaseSelectOption:"Bitte whlen Sie eine Option aus der Liste unten.",repairEverything:"Alles reparieren",fixAndRepairEverything:"Alles richten und reparieren",messUpEverything:"Alles durcheinander bringen",destroyAndCauseDamage:"Alles zerstren und beschdigen",windowOptions:"Fensteroptionen",doorOptions:"Troptionen",fixedWindow:"Festverglasung",slidingWindow:"Schiebefenster",casementWindow:"Flgelfenster",tiltTurnWindow:"Dreh-Kipp-Fenster",awningWindow:"Markisenfenster",doubleHungWindow:"Schiebefenster vertikal",pocketWindow:"Taschenfenster",archWindow:"Bogenfenster",pocketDoor:"Schiebetr in der Wand",frenchDoors:"Franzsische Tren",louverDoor:"Lamellentr",barnDoor:"Scheunentr",toiletOptions:"WC-Optionen",bathtubOptions:"Badewannenoptionen",showerOptions:"Duschoptionen",sinkOptions:"Waschbeckenoptionen",jacuzziSpaOptions:"Whirlpool/Spa-Optionen",poolOptions:"Pool-Optionen",bidetSeat:"Bidet-Sitz",toiletSeat:"WC-Sitz",freestandingTub:"Freistehende Wanne",vintageTub:"Vintage-Wanne",standardTub:"Standard-Wanne",rainShower:"Regendusche",showerEnclosure:"Duschkabine",slidingShower:"Schiebetr-Dusche",pedestalSink:"Standwaschbecken",stainlessSink:"Edelstahlsple",undermountSink:"Einbauwaschbecken",builtInJacuzzi:"Einbau-Whirlpool",portableJacuzzi:"Mobiler Whirlpool",ingroundPool:"Einbau-Pool",abovegroundPool:"Aufstell-Pool",whatToDo:"Was tun?",describeChange:"Beschreiben Sie die gewnschte nderung...",cancel:"Abbrechen",execute:"Ausfhren",confirm:"Besttigen",close:"Schlieen",tryAgain:"Erneut versuchen",mySubscription:"Mein Abonnement",creditsRemaining:"{count} Credits brig",upgradeToPremium:"Auf Premium upgraden",iHaveCoupon:"Ich habe einen Gutschein",enterCouponCode:"Gutscheincode eingeben, um kostenlose Credits zu erhalten",enterCouponCodeTitle:"Gutscheincode eingeben",couponCode:"Gutscheincode",mustEnterCoupon:"Sie mssen einen Gutscheincode eingeben",couponActivated:"Gutschein erfolgreich aktiviert!",errorRedeemingCoupon:"Fehler beim Einlsen des Gutscheins",redeemCoupon:"Gutschein einlsen",creditsAddedToAccount:"{count} Credits zu Ihrem Konto hinzugefgt! ",contactUs:"Kontaktieren Sie uns",phone:"Telefon",message:"Nachricht",writeYourMessage:"Schreiben Sie hier Ihre Nachricht...",sendMessage:"Nachricht senden",messageSentSuccess:"Nachricht erfolgreich gesendet!",contentNotAllowed:"Inhalt nicht erlaubt",requestFailed:"Anfrage fehlgeschlagen",oopsSomethingWrong:"Hoppla! Etwas ist schief gelaufen",errorUnknown:"Unbekannter Fehler",imageSavedToGallery:"Bild in Galerie gespeichert!",errorDownloadingImage:"Fehler beim Herunterladen des Bildes",errorSharing:"Fehler beim Teilen",comparison:"Vergleich",download:"Herunterladen",share:"Teilen",revertToOriginal:"Zum Original zurckkehren",loveItSave:"Gefllt mir! Speichern",whatsApp:"WhatsApp",products:"Produkte",cancelSearch:"Suche abbrechen",searchSimilarProducts:"hnliche Produkte suchen",whatDoYouThink:"Was halten Sie vom neuen Design?",dragSliderForComparison:"Ziehen Sie den Schieberegler fr den Vergleich",returnToOriginal:"Zum Originalbild zurckkehren",loveItSaveDesign:"Gefllt mir! Design speichern",language:"Sprache",selectLanguage:"Sprache auswhlen",languageChanged:"Sprache gendert",create:"Erstellen",tutorial:"Anleitung",designHistory:"Designverlauf",professionalSubscription:"Professioneller Plan",moreTools:"Weitere Werkzeuge",colors:"Farben",aiDesigner:"AI-Designer",aiDesignerActiveClickToDisable:"Aktiv - Klicken zum Deaktivieren",aiDesignerInactiveClickToEnable:"Inaktiv - Klicken zum Aktivieren",yourDesigner:"Ihr Designer",iHaveIdeasForYou:"Ich habe ein paar Ideen fr Sie!",heyIHaveGreatIdeas:"Hey! Ich habe tolle Ideen, um diesen Raum aufzuwerten ",noThanks:"Nein danke",processingNewDesign:"Verarbeite neues Design...",promptPlaceholder:"Beschreiben Sie das gewnschte Design... (z.B. Sofa blau frben, Pflanzen in der Ecke hinzufgen)",bathroomShort:"Bad",skip:"berspringen",next:"Weiter",finish:"Fertig",later:"Spter",loginNow:"Jetzt anmelden",startDesigning:"Design starten",thankYou:"Danke!",sending:"Wird gesendet...",changeColor:"Farbe ndern",allWalls:"Alle Wnde",paintAllWallsInRoom:"Alle Wnde im Raum streichen",paintAllWalls:"Alle Wnde im Raum streichen",specificObject:"Bestimmtes Objekt",chooseWhatToPaint:"Whlen Sie, was Sie streichen mchten",selectWhatToPaint:"Whlen Sie, was Sie streichen mchten",whatToPaint:"Was streichen?",paintExamplePlaceholder:"z.B. Tr, Fensterrahmen, Decke...",specialLaunchPrices:"Spezielle Einfhrungspreise ",upgradeYourDesignAbilities:"Erweitern Sie Ihre Design-Fhigkeiten mit professionellen Werkzeugen und unbegrenzten Mglichkeiten",starter:"Starter",value:"Wert",professional:"Professionell",perMonth:"/Monat",imagesPerMonth:"{count} Bilder pro Monat",accessToAllTools:"Zugang zu allen Design-Werkzeugen",emailSupport:"E-Mail-Support",yourCurrentPlan:"Ihr aktueller Plan",selectPlan:"Plan auswhlen",mostValue:"Bestes Preis-Leistungs-Verhltnis",savePerImage:"35% pro Bild sparen",earlyAccess:"Frher Zugang zu neuen Funktionen",prioritySupport:"Prioritts-Support",historyStorage:"Verlaufsspeicherung",forProfessionals:"Fr Profis ",unlimitedImages:"Unbegrenzte Bilder",premiumSupport:"Premium-Support",commercialLicense:"Kommerzielle Lizenz",forIndustryProfessionals:"Fr Branchenprofis",save42PerImage:"42% pro Bild sparen",allAdvancedFeatures:"Alle erweiterten Funktionen",subscriptionDisclaimer:"Sie knnen Ihr Abonnement jederzeit kndigen. Die Abrechnung wird jeden Monat automatisch erneuert.",creditsDepletedThisMonth:"Credits diesen Monat aufgebraucht",reachedFreeLimit:"Kostenloses Limit erreicht",creditsDepletedDesc:"Ihre monatlichen Credits sind aufgebraucht. Upgraden Sie fr mehr.",reachedFreeLimitDesc:"Sie haben alle {limit} kostenlosen Credits verbraucht. Um ohne Einschrnkungen weiterzuarbeiten, upgraden Sie auf ein professionelles Abonnement.",currentUsage:"Aktuelle Nutzung",designs:"Designs",limitLabel:"Limit",upgradePlan:"Plan upgraden",goToProfessional:"Zu Professionell wechseln",notNowThanks:"Nicht jetzt, danke",imageUploadedSuccess:"Bild erfolgreich hochgeladen!",describeWhatToChange:"Beschreiben Sie im Eingabefeld unten, was Sie am Design ndern mchten",gotItLetsStart:"Verstanden, los geht's!",onboardingUploadTitle:"Bild hochladen",onboardingUploadDesc:"Laden Sie ein Bild Ihres Raumes hoch, um mit dem Design zu beginnen",onboardingStyleTitle:"Designstil whlen",onboardingStyleDesc:"Whlen Sie einen Designstil, der zu Ihnen passt",onboardingCreateTitle:"Design erstellen",onboardingCreateDesc:"Beschreiben Sie, was Sie ndern mchten, und klicken Sie auf Erstellen",onboardingItemTipTitle:"Element hinzufgen",onboardingItemTipDesc:"Fgen Sie Mbel, Dekoration oder andere Elemente zu Ihrem Design hinzu"},$9={appTitle:"Expert AI",appName:"Expert",categoryKitchen:"Cuisine",categoryKidsBedroom:"Chambre d'enfant",categoryBathroom:"Salle de bain",categoryLivingRoom:"Salon",categoryMasterBedroom:"Chambre principale",readyDesigns:"Galerie de designs",guest:"Invit",loginToSaveDesigns:"Connectez-vous pour sauvegarder vos designs",loggedOutSuccess:"Dconnexion russie",login:"Connexion",logout:"Dconnexion",createAccount:"Crer un compte",createNewAccount:"Nouveau compte",welcomeBack:"Bienvenue ! Connectez-vous pour continuer",joinUs:"Rejoignez-nous pour sauvegarder vos designs et accder  toutes les fonctionnalits",email:"E-mail",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",fillAllFields:"Veuillez remplir tous les champs",passwordsNotMatch:"Les mots de passe ne correspondent pas",loginButton:"Se connecter",createAccountButton:"Crer un compte",forgotPassword:"Mot de passe oubli ?",enterEmailFirst:"Veuillez d'abord entrer une adresse e-mail",passwordResetEmailSent:"E-mail de rinitialisation envoy ! Vrifiez votre bote de rception et spam.",passwordResetError:"Erreur lors de l'envoi de l'e-mail de rinitialisation",termsAgreement:"En vous connectant, vous acceptez les",termsOfService:"Conditions d'utilisation",and:"et",privacyPolicy:"Politique de confidentialit",loggingIn:"Connexion en cours...",creatingAccount:"Cration du compte...",loginSuccess:"Connexion russie ! ",accountCreated:"Compte cr avec succs ! ",loginError:"Erreur de connexion",userNotFound:"Utilisateur non trouv",wrongPassword:"Mot de passe incorrect",emailInUse:"E-mail dj utilis",weakPassword:"Le mot de passe est trop faible",invalidEmail:"Adresse e-mail invalide",exitAccount:"Quitter le compte",loginWithEmail:"Connectez-vous avec votre e-mail pour sauvegarder vos designs",uploadImage:"Tlcharger une image",clickToUploadImage:"Cliquez ici pour tlcharger une image de la galerie",gallery:"Galerie",camera:"Camra",uploadItem:"Ajouter un lment",redesign:"Redessiner",more:"Plus",moreOptions:"Plus d'options",history:"Historique",noHistoryYet:"Pas encore d'historique",uploadedImagesWillAppear:"Les images que vous tlchargez et ditez apparatront ici",whatToChange:"Quoi changer ?",uploadImageFirst:"Veuillez d'abord tlcharger une image",uploadingImage:"Tlchargement de l'image...",errorUploadingImage:"Erreur lors du tlchargement de l'image",processingStarting:"Dmarrage...",processingMagic:"La magie opre",processing:"Traitement...",connectingToCloud:"Connexion au cloud... ",sendingToAI:"Envoi  l'AI... ",analyzingItem:"Analyse de l'lment... ",creatingDesign:"Cration du design... ",designStyle:"Style de design",wallColor:"Changer la couleur",lighting:"clairage",furniture:"Mobilier",doorsWindows:"Portes et fentres",bathroom:"Salle de bain",repairs:"Rparations",general:"Gnral",selectDesignStyle:"Slectionner le style de design",colorPalette:"Palette de couleurs",selectLightingType:"Slectionner le type d'clairage",selectFurnitureType:"Slectionner le type de meuble",selectRepairType:"Slectionner le type de rparation/dommage",bathroomOptions:"Options de salle de bain",whatToDo:"Que faire ?",describeChange:"Dcrivez le changement souhait...",cancel:"Annuler",execute:"Excuter",confirm:"Confirmer",close:"Fermer",tryAgain:"Ressayer",mySubscription:"Mon abonnement",creditsRemaining:"{count} crdits restants",upgradeToPremium:"Passer  Premium",iHaveCoupon:"J'ai un coupon",enterCouponCode:"Entrez le code coupon pour obtenir des crdits gratuits",enterCouponCodeTitle:"Entrer le code coupon",couponCode:"Code coupon",mustEnterCoupon:"Vous devez entrer un code coupon",couponActivated:"Coupon activ avec succs !",errorRedeemingCoupon:"Erreur lors de l'utilisation du coupon",redeemCoupon:"Utiliser le coupon",creditsAddedToAccount:"{count} crdits ajouts  votre compte ! ",contactUs:"Contactez-nous",phone:"Tlphone",message:"Message",writeYourMessage:"crivez votre message ici...",sendMessage:"Envoyer le message",messageSentSuccess:"Message envoy avec succs !",contentNotAllowed:"Contenu non autoris",requestFailed:"chec de la requte",oopsSomethingWrong:"Oups ! Quelque chose s'est mal pass",errorUnknown:"Erreur inconnue",imageSavedToGallery:"Image sauvegarde dans la galerie !",errorDownloadingImage:"Erreur lors du tlchargement de l'image",errorSharing:"Erreur lors du partage",comparison:"Comparaison",download:"Tlcharger",share:"Partager",revertToOriginal:"Revenir  l'original",loveItSave:"J'adore ! Sauvegarder",language:"Langue",selectLanguage:"Slectionner la langue",languageChanged:"Langue change",create:"Crer",tutorial:"Tutoriel",designHistory:"Historique des designs",professionalSubscription:"Plan professionnel",moreTools:"Plus d'outils",colors:"Couleurs",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Actif - Cliquez pour dsactiver",aiDesignerInactiveClickToEnable:"Inactif - Cliquez pour activer",yourDesigner:"Votre Designer",iHaveIdeasForYou:"J'ai quelques ides pour vous !",heyIHaveGreatIdeas:"Salut ! J'ai de superbes ides pour amliorer cette pice ",noThanks:"Non merci",processingNewDesign:"Traitement du nouveau design...",promptPlaceholder:"Dcrivez le design souhait... (ex: changer le canap en bleu, ajouter des plantes dans le coin)",bathroomShort:"Bain",skip:"Passer",next:"Suivant",finish:"Terminer",later:"Plus tard",loginNow:"Se connecter maintenant",startDesigning:"Commencer  designer",thankYou:"Merci !",sending:"Envoi...",specialLaunchPrices:"Prix de lancement spciaux ",upgradeYourDesignAbilities:"Amliorez vos capacits de design avec des outils professionnels et des possibilits illimites",starter:"Dbutant",value:"Valeur",professional:"Professionnel",perMonth:"/mois",imagesPerMonth:"{count} images par mois",accessToAllTools:"Accs  tous les outils de design",emailSupport:"Support par e-mail",yourCurrentPlan:"Votre plan actuel",selectPlan:"Choisir ce plan",mostValue:"Meilleur rapport qualit-prix",savePerImage:"conomisez 35% par image",earlyAccess:"Accs anticip aux nouvelles fonctionnalits",prioritySupport:"Support prioritaire",historyStorage:"Stockage de l'historique",forProfessionals:"Pour les pros ",unlimitedImages:"Images illimites",premiumSupport:"Support premium",commercialLicense:"Licence commerciale",forIndustryProfessionals:"Pour les professionnels du secteur",save42PerImage:"conomisez 42% par image",allAdvancedFeatures:"Toutes les fonctionnalits avances",subscriptionDisclaimer:"Vous pouvez annuler votre abonnement  tout moment. La facturation est automatiquement renouvele chaque mois.",creditsDepletedThisMonth:"Crdits puiss ce mois-ci",reachedFreeLimit:"Limite gratuite atteinte",creditsDepletedDesc:"Vos crdits mensuels sont puiss. Passez  un plan suprieur pour en obtenir plus.",reachedFreeLimitDesc:"Vous avez utilis tous vos {limit} crdits gratuits. Pour continuer sans restrictions, passez  un abonnement professionnel.",currentUsage:"Utilisation actuelle",designs:"Designs",limitLabel:"Limite",upgradePlan:"Amliorer le plan",goToProfessional:"Passer au plan professionnel",notNowThanks:"Pas maintenant, merci",imageUploadedSuccess:"Image tlcharge avec succs !",describeWhatToChange:"Dcrivez dans le champ ci-dessous ce que vous souhaitez modifier dans le design",gotItLetsStart:"Compris, commenons !",changeColor:"Changer la couleur",allWalls:"Tous les murs",paintAllWallsInRoom:"Peindre tous les murs de la pice",specificObject:"Objet spcifique",chooseWhatToPaint:"Choisir quoi peindre",selectWhatToPaint:"Slectionnez ce que vous voulez peindre",whatToPaint:"Quoi peindre ?",paintExamplePlaceholder:"ex: porte, cadre de fentre, plafond...",whatsApp:"WhatsApp",products:"Produits",cancelSearch:"Annuler la recherche",searchSimilarProducts:"Rechercher des produits similaires",whatDoYouThink:"Que pensez-vous du nouveau design ?",dragSliderForComparison:"Faites glisser le curseur pour comparer",returnToOriginal:"Retourner  l'image originale",loveItSaveDesign:"J'adore ! Sauvegarder le design",reds:"Rouges",oranges:"Oranges",yellows:"Jaunes",greens:"Verts",blues:"Bleus",purples:"Violets",greys:"Gris",blacksAndWhites:"Noirs et blancs",repairEverything:"Tout rparer",fixAndRepairEverything:"Rparer et rnover tout",messUpEverything:"Tout abmer",destroyAndCauseDamage:"Dtruire et causer des dgts",windowOptions:"Options de fentre",doorOptions:"Options de porte",pleaseSelectOption:"Veuillez slectionner une option dans la liste ci-dessous",fixedWindow:"Fentre fixe",slidingWindow:"Fentre coulissante",casementWindow:"Fentre  battant",tiltTurnWindow:"Fentre oscillo-battante",awningWindow:"Fentre  auvent",doubleHungWindow:"Fentre  guillotine",pocketWindow:"Fentre escamotable",archWindow:"Fentre en arc",pocketDoor:"Porte escamotable",frenchDoors:"Portes franaises",louverDoor:"Porte  persiennes",barnDoor:"Porte de grange",bathroomOptions:"Options de salle de bain",selectRepairType:"Slectionner le type de rparation",toiletOptions:"Options de toilettes",bathtubOptions:"Options de baignoire",showerOptions:"Options de douche",sinkOptions:"Options de lavabo",jacuzziSpaOptions:"Options de jacuzzi/spa",poolOptions:"Options de piscine",bidetSeat:"Sige de bidet",toiletSeat:"Sige de toilette",freestandingTub:"Baignoire lot",vintageTub:"Baignoire vintage",standardTub:"Baignoire standard",rainShower:"Douche pluie",showerEnclosure:"Cabine de douche",slidingShower:"Douche coulissante",pedestalSink:"Lavabo sur pied",stainlessSink:"Lavabo en inox",undermountSink:"Lavabo encastr",builtInJacuzzi:"Jacuzzi encastr",portableJacuzzi:"Jacuzzi portable",ingroundPool:"Piscine enterre",abovegroundPool:"Piscine hors-sol",onboardingUploadTitle:"Tlcharger une image",onboardingUploadDesc:"Commencez par tlcharger une photo de la pice que vous souhaitez designer. Vous n'en avez pas ? Pas de souci, nous utiliserons une image d'exemple.",onboardingStyleTitle:"Choisir un style de redesign",onboardingStyleDesc:'Slectionnez votre style prfr dans le menu latral. Essayez "Redesigner" pour voir diffrentes options.',onboardingCreateTitle:"Crer le design",onboardingCreateDesc:`Cliquez sur "Crer" et l'IA redesignera votre pice en quelques secondes !`,onboardingItemTipTitle:"Astuce : Ajouter un lment",onboardingItemTipDesc:`Vous voulez ajouter un meuble spcifique ? Utilisez le bouton "Ajouter un lment" pour tlcharger une image d'un objet et l'incorporer dans le design.`},W9={appTitle:"Esperto AI",appName:"Esperto",categoryKitchen:"Cucina",categoryKidsBedroom:"Camera dei bambini",categoryBathroom:"Bagno",categoryLivingRoom:"Soggiorno",categoryMasterBedroom:"Camera da letto",readyDesigns:"Galleria design",guest:"Ospite",loginToSaveDesigns:"Accedi per salvare i tuoi design",loggedOutSuccess:"Disconnessione riuscita",login:"Accedi",logout:"Esci",createAccount:"Crea account",createNewAccount:"Nuovo account",email:"Email",password:"Password",confirmPassword:"Conferma password",fillAllFields:"Compila tutti i campi",passwordsNotMatch:"Le password non corrispondono",uploadImage:"Carica immagine",gallery:"Galleria",camera:"Fotocamera",uploadItem:"Aggiungi elemento",redesign:"Ridisegna",more:"Altro",moreOptions:"Altre opzioni",history:"Cronologia",whatToChange:"Cosa cambiare?",processing:"Elaborazione...",designStyle:"Stile di design",wallColor:"Cambia colore",lighting:"Illuminazione",furniture:"Mobili",doorsWindows:"Porte e finestre",bathroom:"Bagno",repairs:"Riparazioni",general:"Generale",selectDesignStyle:"Seleziona stile di design",colorPalette:"Palette colori",selectLightingType:"Seleziona tipo di illuminazione",selectFurnitureType:"Seleziona tipo di mobile",cancel:"Annulla",execute:"Esegui",confirm:"Conferma",close:"Chiudi",tryAgain:"Riprova",mySubscription:"Il mio abbonamento",creditsRemaining:"{count} crediti rimanenti",upgradeToPremium:"Passa a Premium",iHaveCoupon:"Ho un coupon",enterCouponCode:"Inserisci il codice coupon per ottenere crediti gratuiti",couponCode:"Codice coupon",redeemCoupon:"Riscatta coupon",contactUs:"Contattaci",phone:"Telefono",message:"Messaggio",sendMessage:"Invia messaggio",contentNotAllowed:"Contenuto non consentito",requestFailed:"Richiesta fallita",oopsSomethingWrong:"Ops! Qualcosa  andato storto",comparison:"Confronto",download:"Scarica",share:"Condividi",language:"Lingua",selectLanguage:"Seleziona lingua",languageChanged:"Lingua cambiata",create:"Crea",tutorial:"Tutorial",designHistory:"Cronologia design",professionalSubscription:"Piano professionale",moreTools:"Altri strumenti",colors:"Colori",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Attivo - Clicca per disattivare",aiDesignerInactiveClickToEnable:"Inattivo - Clicca per attivare",promptPlaceholder:"Descrivi il design desiderato... (es: cambia il divano in blu, aggiungi piante nell'angolo)",bathroomShort:"Bagno",skip:"Salta",next:"Avanti",finish:"Fine",later:"Dopo",loginNow:"Accedi ora",startDesigning:"Inizia a progettare",thankYou:"Grazie!",sending:"Invio...",onboardingUploadTitle:"Carica immagine",onboardingUploadDesc:"Inizia caricando una foto della stanza che vuoi progettare. Non ne hai una? Nessun problema, useremo un'immagine di esempio.",onboardingStyleTitle:"Scegli uno stile di redesign",onboardingStyleDesc:'Seleziona il tuo stile preferito dal menu laterale. Prova "Ridisegna" per vedere diverse opzioni.',onboardingCreateTitle:"Crea il design",onboardingCreateDesc:`Clicca su "Crea" e l'IA ridisegner la tua stanza in pochi secondi!`,onboardingItemTipTitle:"Suggerimento: Aggiungi elemento",onboardingItemTipDesc:`Vuoi aggiungere un mobile specifico? Usa il pulsante "Aggiungi elemento" per caricare un'immagine di un oggetto e incorporarlo nel design.`},G9={appTitle:"Especialista AI",appName:"Especialista",categoryKitchen:"Cozinha",categoryKidsBedroom:"Quarto infantil",categoryBathroom:"Banheiro",categoryLivingRoom:"Sala de estar",categoryMasterBedroom:"Quarto principal",readyDesigns:"Galeria de designs",guest:"Convidado",loginToSaveDesigns:"Faa login para salvar seus designs",loggedOutSuccess:"Logout realizado com sucesso",login:"Entrar",logout:"Sair",createAccount:"Criar conta",createNewAccount:"Nova conta",email:"E-mail",password:"Senha",confirmPassword:"Confirmar senha",fillAllFields:"Por favor, preencha todos os campos",passwordsNotMatch:"As senhas no coincidem",uploadImage:"Enviar imagem",gallery:"Galeria",camera:"Cmera",uploadItem:"Adicionar item",redesign:"Redesenhar",more:"Mais",moreOptions:"Mais opes",history:"Histrico",whatToChange:"O que mudar?",processing:"Processando...",designStyle:"Estilo de design",wallColor:"Mudar cor",lighting:"Iluminao",furniture:"Mveis",doorsWindows:"Portas e janelas",bathroom:"Banheiro",repairs:"Reparos",general:"Geral",selectDesignStyle:"Selecionar estilo de design",colorPalette:"Paleta de cores",selectLightingType:"Selecionar tipo de iluminao",selectFurnitureType:"Selecionar tipo de mvel",cancel:"Cancelar",execute:"Executar",confirm:"Confirmar",close:"Fechar",tryAgain:"Tentar novamente",mySubscription:"Minha assinatura",creditsRemaining:"{count} crditos restantes",upgradeToPremium:"Atualizar para Premium",iHaveCoupon:"Tenho um cupom",enterCouponCode:"Digite o cdigo do cupom para obter crditos grtis",couponCode:"Cdigo do cupom",redeemCoupon:"Resgatar cupom",contactUs:"Fale conosco",phone:"Telefone",message:"Mensagem",sendMessage:"Enviar mensagem",contentNotAllowed:"Contedo no permitido",requestFailed:"Solicitao falhou",oopsSomethingWrong:"Ops! Algo deu errado",comparison:"Comparao",download:"Baixar",share:"Compartilhar",language:"Idioma",selectLanguage:"Selecionar idioma",languageChanged:"Idioma alterado",create:"Criar",tutorial:"Tutorial",designHistory:"Histrico de designs",professionalSubscription:"Plano profissional",moreTools:"Mais ferramentas",colors:"Cores",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Ativo - Clique para desativar",aiDesignerInactiveClickToEnable:"Inativo - Clique para ativar",promptPlaceholder:"Descreva o design desejado... (ex: mude o sof para azul, adicione plantas no canto)",bathroomShort:"Banho",skip:"Pular",next:"Prximo",finish:"Finalizar",later:"Depois",loginNow:"Entrar agora",startDesigning:"Comear a projetar",thankYou:"Obrigado!",sending:"Enviando...",onboardingUploadTitle:"Carregar imagem",onboardingUploadDesc:"Comece carregando uma foto do cmodo que voc quer projetar. No tem uma? Sem problemas, usaremos uma imagem de exemplo.",onboardingStyleTitle:"Escolha um estilo de redesign",onboardingStyleDesc:'Selecione seu estilo preferido no menu lateral. Tente "Redesenhar" para ver diferentes opes.',onboardingCreateTitle:"Criar design",onboardingCreateDesc:'Clique em "Criar" e a IA ir redesenhar seu cmodo em segundos!',onboardingItemTipTitle:"Dica: Adicionar elemento",onboardingItemTipDesc:'Quer adicionar um mvel especfico? Use o boto "Adicionar elemento" para carregar uma imagem de um objeto e incorpor-lo ao design.'},H9={appTitle:"Expert AI",appName:"Expert",categoryKitchen:"Keuken",categoryKidsBedroom:"Kinderkamer",categoryBathroom:"Badkamer",categoryLivingRoom:"Woonkamer",categoryMasterBedroom:"Slaapkamer",readyDesigns:"Ontwerpgalerij",guest:"Gast",login:"Inloggen",logout:"Uitloggen",createAccount:"Account aanmaken",email:"E-mail",password:"Wachtwoord",uploadImage:"Afbeelding uploaden",gallery:"Galerij",camera:"Camera",uploadItem:"Item toevoegen",redesign:"Herontwerpen",more:"Meer",history:"Geschiedenis",whatToChange:"Wat wijzigen?",processing:"Verwerken...",designStyle:"Ontwerpstijl",wallColor:"Kleur wijzigen",lighting:"Verlichting",furniture:"Meubels",doorsWindows:"Deuren en ramen",bathroom:"Badkamer",repairs:"Reparaties",general:"Algemeen",cancel:"Annuleren",confirm:"Bevestigen",close:"Sluiten",tryAgain:"Opnieuw proberen",mySubscription:"Mijn abonnement",creditsRemaining:"{count} credits over",upgradeToPremium:"Upgrade naar Premium",iHaveCoupon:"Ik heb een coupon",couponCode:"Couponcode",redeemCoupon:"Coupon inwisselen",contactUs:"Contact",phone:"Telefoon",message:"Bericht",sendMessage:"Bericht verzenden",comparison:"Vergelijking",download:"Downloaden",share:"Delen",language:"Taal",selectLanguage:"Taal selecteren",create:"Maken",tutorial:"Handleiding",moreTools:"Meer tools",colors:"Kleuren",aiDesigner:"AI-ontwerper",promptPlaceholder:"Beschrijf het gewenste ontwerp... (bijv: verander de bank naar blauw, voeg planten toe in de hoek)",bathroomShort:"Bad",skip:"Overslaan",next:"Volgende",finish:"Voltooien",thankYou:"Dank u!",sending:"Verzenden...",onboardingUploadTitle:"Afbeelding uploaden",onboardingUploadDesc:"Begin met het uploaden van een foto van de kamer die je wilt ontwerpen. Heb je er geen? Geen probleem, we gebruiken een voorbeeldafbeelding.",onboardingStyleTitle:"Kies een herontwerpstijl",onboardingStyleDesc:'Selecteer je favoriete stijl in het zijmenu. Probeer "Herontwerpen" om verschillende opties te zien.',onboardingCreateTitle:"Ontwerp maken",onboardingCreateDesc:'Klik op "Maken" en de AI zal je kamer in seconden herontwerpen!',onboardingItemTipTitle:"Tip: Element toevoegen",onboardingItemTipDesc:'Wil je een specifiek meubelstuk toevoegen? Gebruik de knop "Element toevoegen" om een afbeelding van een object te uploaden en in het ontwerp op te nemen.'},q9={appTitle:"AI",appName:"",categoryKitchen:"",categoryKidsBedroom:"",categoryBathroom:"",categoryLivingRoom:"",categoryMasterBedroom:"",readyDesigns:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... (: )",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:"",onboardingCreateTitle:"",onboardingCreateDesc:"AI",onboardingItemTipTitle:"",onboardingItemTipDesc:""},K9={appTitle:" AI",appName:"",categoryKitchen:"",categoryKidsBedroom:" ",categoryBathroom:"",categoryLivingRoom:"",categoryMasterBedroom:"",readyDesigns:" ",guest:"",login:"",logout:"",createAccount:" ",email:"",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:" ?",processing:" ...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:" ",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:" ",couponCode:" ",redeemCoupon:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:"  ",colors:"",aiDesigner:"AI ",promptPlaceholder:"  ... (:   ,   )",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:" ...",onboardingUploadTitle:" ",onboardingUploadDesc:"    .    ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:'    . ""    .',onboardingCreateTitle:" ",onboardingCreateDesc:'""  AI     !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'   ? " "       .'},Y9={appTitle:"AI",appName:"",categoryKitchen:"",categoryKidsBedroom:"",categoryBathroom:"",categoryLivingRoom:"",categoryMasterBedroom:"",readyDesigns:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... ()",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:'""',onboardingCreateTitle:"",onboardingCreateDesc:'""AI',onboardingItemTipTitle:"",onboardingItemTipDesc:'""'},Q9={appTitle:"AI",appName:"",categoryKitchen:"",categoryKidsBedroom:"",categoryBathroom:"",categoryLivingRoom:"",categoryMasterBedroom:"",readyDesigns:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... ()",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:'""',onboardingCreateTitle:"",onboardingCreateDesc:'""AI',onboardingItemTipTitle:"",onboardingItemTipDesc:'""'},J9={appTitle:"Expert AI",appName:"Expert",guest:"Host",login:"Pihlsit",logout:"Odhlsit",email:"E-mail",password:"Heslo",uploadImage:"Nahrt obrzek",gallery:"Galerie",camera:"Fotoapart",uploadItem:"Pidat poloku",redesign:"Petvoit",more:"Vce",history:"Historie",whatToChange:"Co zmnit?",processing:"Zpracovn...",designStyle:"Styl designu",wallColor:"Zmnit barvu",lighting:"Osvtlen",furniture:"Nbytek",doorsWindows:"Dvee a okna",bathroom:"Koupelna",repairs:"Opravy",general:"Obecn",cancel:"Zruit",confirm:"Potvrdit",close:"Zavt",mySubscription:"Moje pedplatn",creditsRemaining:"{count} kredit zbv",upgradeToPremium:"Pejt na Premium",iHaveCoupon:"Mm kupon",couponCode:"Kd kuponu",contactUs:"Kontaktujte ns",phone:"Telefon",message:"Zprva",sendMessage:"Odeslat zprvu",comparison:"Srovnn",download:"Sthnout",share:"Sdlet",language:"Jazyk",selectLanguage:"Vybrat jazyk",create:"Vytvoit",tutorial:"Nvod",moreTools:"Dal nstroje",colors:"Barvy",aiDesigner:"AI Designer",promptPlaceholder:"Popite poadovan design...",bathroomShort:"Koupelna",skip:"Peskoit",next:"Dal",finish:"Dokonit",thankYou:"Dkujeme!",sending:"Odesln...",onboardingUploadTitle:"Nahrt obrzek",onboardingUploadDesc:"Zante nahrnm fotky mstnosti, kterou chcete navrhnout.",onboardingStyleTitle:"Vyberte styl redesignu",onboardingStyleDesc:"Vyberte svj oblben styl v postrannm menu.",onboardingCreateTitle:"Vytvoit design",onboardingCreateDesc:'Kliknte na "Vytvoit" a AI petvo v pokoj!',onboardingItemTipTitle:"Tip: Pidat prvek",onboardingItemTipDesc:'Chcete pidat konkrtn nbytek? Pouijte tlatko "Pidat prvek".'},X9={appTitle:"Expert AI",appName:"Expert",guest:"Gst",login:"Log ind",logout:"Log ud",email:"E-mail",password:"Adgangskode",uploadImage:"Upload billede",gallery:"Galleri",camera:"Kamera",uploadItem:"Tilfj element",redesign:"Redesign",more:"Mere",history:"Historik",whatToChange:"Hvad skal ndres?",processing:"Behandler...",designStyle:"Designstil",wallColor:"Skift farve",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Dre og vinduer",bathroom:"Badevrelse",repairs:"Reparationer",general:"Generelt",cancel:"Annuller",confirm:"Bekrft",close:"Luk",mySubscription:"Mit abonnement",creditsRemaining:"{count} kreditter tilbage",upgradeToPremium:"Opgrader til Premium",iHaveCoupon:"Jeg har en kupon",couponCode:"Kuponkode",contactUs:"Kontakt os",phone:"Telefon",message:"Besked",sendMessage:"Send besked",comparison:"Sammenligning",download:"Download",share:"Del",language:"Sprog",selectLanguage:"Vlg sprog",create:"Opret",tutorial:"Vejledning",moreTools:"Flere vrktjer",colors:"Farver",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv det nskede design...",bathroomShort:"Bad",skip:"Spring over",next:"Nste",finish:"Afslut",thankYou:"Tak!",sending:"Sender...",onboardingUploadTitle:"Upload billede",onboardingUploadDesc:"Start med at uploade et foto af det rum, du vil designe.",onboardingStyleTitle:"Vlg en redesign-stil",onboardingStyleDesc:"Vlg din foretrukne stil i sidemenuen.",onboardingCreateTitle:"Opret design",onboardingCreateDesc:'Klik p "Opret" og AI vil redesigne dit rum!',onboardingItemTipTitle:"Tip: Tilfj element",onboardingItemTipDesc:'Vil du tilfje et specifikt mbel? Brug knappen "Tilfj element".'},Z9={appTitle:"Expert AI",appName:"Expert",guest:"",login:"",logout:"",email:"Email",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:"  ;",processing:"...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:"  ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",mySubscription:"  ",creditsRemaining:"{count}  ",upgradeToPremium:"  Premium",iHaveCoupon:" ",couponCode:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:" ",colors:"",aiDesigner:"AI Designer",promptPlaceholder:"   ...",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:"...",onboardingUploadTitle:" ",onboardingUploadDesc:"         .",onboardingStyleTitle:"  ",onboardingStyleDesc:"        .",onboardingCreateTitle:" ",onboardingCreateDesc:'   ""   AI     !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'     ;    " ".'},e8={appTitle:"Expert AI",appName:"Expert",guest:"Klaline",login:"Logi sisse",logout:"Logi vlja",email:"E-post",password:"Parool",uploadImage:"Laadi pilt les",gallery:"Galerii",camera:"Kaamera",uploadItem:"Lisa element",redesign:"Kujunda mber",more:"Rohkem",history:"Ajalugu",whatToChange:"Mida muuta?",processing:"Ttlemine...",designStyle:"Disainistiil",wallColor:"Muuda vrvi",lighting:"Valgustus",furniture:"Mbel",doorsWindows:"Uksed ja aknad",bathroom:"Vannituba",repairs:"Remont",general:"ldine",cancel:"Thista",confirm:"Kinnita",close:"Sulge",mySubscription:"Minu tellimus",creditsRemaining:"{count} krediiti alles",upgradeToPremium:"Tienda Premiumiks",iHaveCoupon:"Mul on kupong",couponCode:"Kupongi kood",contactUs:"Vta hendust",phone:"Telefon",message:"Snum",sendMessage:"Saada snum",comparison:"Vrdlus",download:"Laadi alla",share:"Jaga",language:"Keel",selectLanguage:"Vali keel",create:"Loo",tutorial:"Juhend",moreTools:"Rohkem triistu",colors:"Vrvid",aiDesigner:"AI Disainer",promptPlaceholder:"Kirjelda soovitud disaini...",bathroomShort:"Vann",skip:"Jta vahele",next:"Jrgmine",finish:"Lpeta",thankYou:"Aith!",sending:"Saatmine...",onboardingUploadTitle:"Laadi pilt les",onboardingUploadDesc:"Alusta laadides les foto toast, mida soovid kujundada.",onboardingStyleTitle:"Vali mber kujundamise stiil",onboardingStyleDesc:"Vali oma lemmik stiil klgmenst.",onboardingCreateTitle:"Loo disain",onboardingCreateDesc:'Klpsa "Loo" ja AI kujundab su toa mber!',onboardingItemTipTitle:"Vihje: Lisa element",onboardingItemTipDesc:'Soovid lisada konkreetse mblieseme? Kasuta nuppu "Lisa element".'},t8={appTitle:"Expert AI",appName:"Expert",guest:"Vieras",login:"Kirjaudu",logout:"Kirjaudu ulos",email:"Shkposti",password:"Salasana",uploadImage:"Lataa kuva",gallery:"Galleria",camera:"Kamera",uploadItem:"Lis kohde",redesign:"Suunnittele uudelleen",more:"Lis",history:"Historia",whatToChange:"Mit muuttaa?",processing:"Ksitelln...",designStyle:"Suunnittelutyyli",wallColor:"Vaihda vri",lighting:"Valaistus",furniture:"Huonekalut",doorsWindows:"Ovet ja ikkunat",bathroom:"Kylpyhuone",repairs:"Korjaukset",general:"Yleinen",cancel:"Peruuta",confirm:"Vahvista",close:"Sulje",mySubscription:"Tilaukseni",creditsRemaining:"{count} krediitti jljell",upgradeToPremium:"Pivit Premiumiin",iHaveCoupon:"Minulla on kuponki",couponCode:"Kuponkikoodi",contactUs:"Ota yhteytt",phone:"Puhelin",message:"Viesti",sendMessage:"Lhet viesti",comparison:"Vertailu",download:"Lataa",share:"Jaa",language:"Kieli",selectLanguage:"Valitse kieli",create:"Luo",tutorial:"Opas",moreTools:"Lis tykaluja",colors:"Vrit",aiDesigner:"AI-suunnittelija",promptPlaceholder:"Kuvaile haluamasi suunnittelu...",bathroomShort:"Kylpy",skip:"Ohita",next:"Seuraava",finish:"Valmis",thankYou:"Kiitos!",sending:"Lhetetn...",onboardingUploadTitle:"Lataa kuva",onboardingUploadDesc:"Aloita lataamalla kuva huoneesta, jonka haluat suunnitella.",onboardingStyleTitle:"Valitse uudelleensuunnittelun tyyli",onboardingStyleDesc:"Valitse suosikkityylisi sivuvalikosta.",onboardingCreateTitle:"Luo suunnitelma",onboardingCreateDesc:'Napsauta "Luo" ja AI suunnittelee huoneesi uudelleen!',onboardingItemTipTitle:"Vinkki: Lis elementti",onboardingItemTipDesc:'Haluatko list tietyn huonekalun? Kyt "Lis elementti" -painiketta.'},n8={appTitle:"Saineola AI",appName:"Saineola",guest:"Aoi",login:"Logil isteach",logout:"Logil amach",email:"Romhphost",password:"Pasfhocal",uploadImage:"Uasldil omh",gallery:"Gaileara",camera:"Ceamara",uploadItem:"Cuir mr leis",redesign:"Athdearadh",more:"Nos m",history:"Stair",whatToChange:"Cad le hathr?",processing:"Ag priseil...",designStyle:"Stl dearaidh",wallColor:"Athraigh dath",lighting:"Soilsi",furniture:"Troscn",doorsWindows:"Doirse agus fuinneoga",bathroom:"Seomra folctha",repairs:"Deisichin",general:"Ginearlta",cancel:"Cealaigh",confirm:"Deimhnigh",close:"Dn",mySubscription:"Mo shntis",creditsRemaining:"{count} creidiint fgtha",upgradeToPremium:"Uasghrdaigh go Primhe",iHaveCoupon:"T cpon agam",couponCode:"Cd cpin",contactUs:"Dan teagmhil linn",phone:"Fn",message:"Teachtaireacht",sendMessage:"Seol teachtaireacht",comparison:"Comparid",download:"osldil",share:"Roinn",language:"Teanga",selectLanguage:"Roghnaigh teanga",create:"Cruthaigh",tutorial:"Teagasc",moreTools:"Tuilleadh uirlis",colors:"Dathanna",aiDesigner:"Dearthir AI",promptPlaceholder:"Dan cur sos ar an dearadh at uait...",bathroomShort:"Folcadh",skip:"Scipeil",next:"Ar aghaidh",finish:"Crochnaigh",thankYou:"Go raibh maith agat!",sending:"Ag seoladh...",onboardingUploadTitle:"Uasldil omh",onboardingUploadDesc:"Tosaigh ag uasldil grianghraf den seomra a theastaonn uait a dhearadh.",onboardingStyleTitle:"Roghnaigh stl athdearaidh",onboardingStyleDesc:"Roghnaigh do stl is fearr leat n roghchlr taobh.",onboardingCreateTitle:"Cruthaigh dearadh",onboardingCreateDesc:'Cliceil "Cruthaigh" agus danfaidh an AI athdearadh ar do sheomra!',onboardingItemTipTitle:"Leid: Cuir mr leis",onboardingItemTipDesc:'Ar mhaith leat posa troscin ar leith a chur leis? sid an cnaipe "Cuir mr leis".'},r8={appTitle:"Expert AI",appName:"Expert",guest:"Gost",login:"Prijava",logout:"Odjava",email:"E-pota",password:"Lozinka",uploadImage:"Prenesi sliku",gallery:"Galerija",camera:"Kamera",uploadItem:"Dodaj stavku",redesign:"Redizajniraj",more:"Vie",history:"Povijest",whatToChange:"to promijeniti?",processing:"Obrada...",designStyle:"Stil dizajna",wallColor:"Promijeni boju",lighting:"Rasvjeta",furniture:"Namjetaj",doorsWindows:"Vrata i prozori",bathroom:"Kupaonica",repairs:"Popravci",general:"Openito",cancel:"Odustani",confirm:"Potvrdi",close:"Zatvori",mySubscription:"Moja pretplata",creditsRemaining:"{count} kredita preostalo",upgradeToPremium:"Nadogradi na Premium",iHaveCoupon:"Imam kupon",couponCode:"Kod kupona",contactUs:"Kontaktirajte nas",phone:"Telefon",message:"Poruka",sendMessage:"Poalji poruku",comparison:"Usporedba",download:"Preuzmi",share:"Podijeli",language:"Jezik",selectLanguage:"Odaberi jezik",create:"Stvori",tutorial:"Vodi",moreTools:"Vie alata",colors:"Boje",aiDesigner:"AI Dizajner",promptPlaceholder:"Opiite eljeni dizajn...",bathroomShort:"Kupaonica",skip:"Preskoi",next:"Dalje",finish:"Zavri",thankYou:"Hvala!",sending:"Slanje...",onboardingUploadTitle:"Prenesi sliku",onboardingUploadDesc:"Zaponite uitavanjem fotografije sobe koju elite dizajnirati.",onboardingStyleTitle:"Odaberite stil redizajna",onboardingStyleDesc:"Odaberite eljeni stil iz bonog izbornika.",onboardingCreateTitle:"Kreiraj dizajn",onboardingCreateDesc:'Kliknite "Stvori" i AI e redizajnirati vau sobu!',onboardingItemTipTitle:"Savjet: Dodaj element",onboardingItemTipDesc:'elite dodati odreeni komad namjetaja? Koristite gumb "Dodaj stavku".'},i8={appTitle:"Expert AI",appName:"Expert",guest:"Vendg",login:"Bejelentkezs",logout:"Kijelentkezs",email:"E-mail",password:"Jelsz",uploadImage:"Kp feltltse",gallery:"Galria",camera:"Kamera",uploadItem:"Elem hozzadsa",redesign:"jratervezs",more:"Tbb",history:"Elzmnyek",whatToChange:"Mit vltoztassunk?",processing:"Feldolgozs...",designStyle:"Tervezsi stlus",wallColor:"Szn mdostsa",lighting:"Vilgts",furniture:"Btor",doorsWindows:"Ajtk s ablakok",bathroom:"Frdszoba",repairs:"Javtsok",general:"ltalnos",cancel:"Mgse",confirm:"Megersts",close:"Bezrs",mySubscription:"Elfizetsem",creditsRemaining:"{count} kredit maradt",upgradeToPremium:"Frissts Premiumra",iHaveCoupon:"Van kuponom",couponCode:"Kuponkd",contactUs:"Kapcsolat",phone:"Telefon",message:"zenet",sendMessage:"zenet kldse",comparison:"sszehasonlts",download:"Letlts",share:"Megoszts",language:"Nyelv",selectLanguage:"Nyelv kivlasztsa",create:"Ltrehozs",tutorial:"tmutat",moreTools:"Tovbbi eszkzk",colors:"Sznek",aiDesigner:"AI Tervez",promptPlaceholder:"rja le a kvnt dizjnt...",bathroomShort:"Frd",skip:"Kihagys",next:"Kvetkez",finish:"Befejezs",thankYou:"Ksznjk!",sending:"Klds...",onboardingUploadTitle:"Kp feltltse",onboardingUploadDesc:"Kezdje el egy fnykp feltltsvel a szobrl, amelyet tervezni szeretne.",onboardingStyleTitle:"Vlasszon jratervezsi stlust",onboardingStyleDesc:"Vlassza ki kedvenc stlust az oldals menbl.",onboardingCreateTitle:"Terv ltrehozsa",onboardingCreateDesc:'Kattintson a "Ltrehozs" gombra, s az AI jratervezi a szobjt!',onboardingItemTipTitle:"Tipp: Elem hozzadsa",onboardingItemTipDesc:'Szeretne hozzadni egy adott btordarabot? Hasznlja az "Elem hozzadsa" gombot.'},s8={appTitle:"Expert AI",appName:"Expert",guest:"Gestur",login:"Innskr",logout:"tskr",email:"Netfang",password:"Lykilor",uploadImage:"Hlaa upp mynd",gallery:"Myndasafn",camera:"Myndavl",uploadItem:"Bta vi hlut",redesign:"Endurhanna",more:"Meira",history:"Saga",whatToChange:"Hva  a breyta?",processing:"Vinnur...",designStyle:"Hnnunarstll",wallColor:"Breyta lit",lighting:"Lsing",furniture:"Hsggn",doorsWindows:"Hurir og gluggar",bathroom:"Baherbergi",repairs:"Vigerir",general:"Almennt",cancel:"Htta vi",confirm:"Stafesta",close:"Loka",mySubscription:"skriftin mn",creditsRemaining:"{count} inneign eftir",upgradeToPremium:"Uppfra  Premium",iHaveCoupon:"g er me afslttarka",couponCode:"Afslttarki",contactUs:"Hafu samband",phone:"Smi",message:"Skilabo",sendMessage:"Senda skilabo",comparison:"Samanburur",download:"Skja",share:"Deila",language:"Tunguml",selectLanguage:"Velja tunguml",create:"Ba til",tutorial:"Leibeiningar",moreTools:"Fleiri verkfri",colors:"Litir",aiDesigner:"AI Hnnuur",promptPlaceholder:"Lstu skilegri hnnun...",bathroomShort:"Ba",skip:"Sleppa",next:"Nsta",finish:"Ljka",thankYou:"Takk!",sending:"Sendir...",onboardingUploadTitle:"Hlaa upp mynd",onboardingUploadDesc:"Byrjau  a hlaa upp mynd af herberginu sem  vilt hanna.",onboardingStyleTitle:"Veldu endurhnnunarstl",onboardingStyleDesc:"Veldu upphalds stlinn inn r hliarvalmyndinni.",onboardingCreateTitle:"Ba til hnnun",onboardingCreateDesc:'Smelltu  "Ba til" og gervigreindin mun endurhanna herbergi itt!',onboardingItemTipTitle:"bending: Bta vi hlut",onboardingItemTipDesc:'Viltu bta vi tilteknu hsgagni? Notau "Bta vi hlut" hnappinn.'},o8={appTitle:" AI",appName:"",guest:"",login:"",logout:"",email:"-",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:" ?",processing:"...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:"  ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:" ",couponCode:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:" ",colors:"",aiDesigner:"AI ",promptPlaceholder:"  ...",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:"...",onboardingUploadTitle:" ",onboardingUploadDesc:"    ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:"     .",onboardingCreateTitle:" ",onboardingCreateDesc:' ""  AI   !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'   ?  " " .'},a8={appTitle:"Ekspertas AI",appName:"Ekspertas",guest:"Sveias",login:"Prisijungti",logout:"Atsijungti",email:"El. patas",password:"Slaptaodis",uploadImage:"kelti nuotrauk",gallery:"Galerija",camera:"Kamera",uploadItem:"Pridti element",redesign:"Perdaryti dizain",more:"Daugiau",history:"Istorija",whatToChange:"K keisti?",processing:"Apdorojama...",designStyle:"Dizaino stilius",wallColor:"Keisti spalv",lighting:"Apvietimas",furniture:"Baldai",doorsWindows:"Durys ir langai",bathroom:"Vonios kambarys",repairs:"Remontas",general:"Bendra",cancel:"Ataukti",confirm:"Patvirtinti",close:"Udaryti",mySubscription:"Mano prenumerata",creditsRemaining:"Liko {count} kredit",upgradeToPremium:"Pereiti  Premium",iHaveCoupon:"Turiu kupon",couponCode:"Kupono kodas",contactUs:"Susisiekite",phone:"Telefonas",message:"inut",sendMessage:"Sisti inut",comparison:"Palyginimas",download:"Atsisisti",share:"Dalintis",language:"Kalba",selectLanguage:"Pasirinkti kalb",create:"Kurti",tutorial:"Vadovas",moreTools:"Daugiau ranki",colors:"Spalvos",aiDesigner:"AI Dizaineris",promptPlaceholder:"Apibdinkite norim dizain...",bathroomShort:"Vonia",skip:"Praleisti",next:"Kitas",finish:"Baigti",thankYou:"Ai!",sending:"Siuniama...",onboardingUploadTitle:"kelti nuotrauk",onboardingUploadDesc:"Pradkite keldami nuotrauk kambario, kur norite suprojektuoti.",onboardingStyleTitle:"Pasirinkite naujo dizaino stili",onboardingStyleDesc:"Pasirinkite mgstam stili oniniame meniu.",onboardingCreateTitle:"Sukurti dizain",onboardingCreateDesc:'Spustelkite "Kurti" ir AI perdizainuos js kambar!',onboardingItemTipTitle:"Patarimas: Pridti element",onboardingItemTipDesc:'Norite pridti konkret bald? Naudokite mygtuk "Pridti element".'},l8={appTitle:"Expert AI",appName:"Expert",guest:"Gjest",login:"Logg inn",logout:"Logg ut",email:"E-post",password:"Passord",uploadImage:"Last opp bilde",gallery:"Galleri",camera:"Kamera",uploadItem:"Legg til element",redesign:"Redesign",more:"Mer",history:"Historikk",whatToChange:"Hva skal endres?",processing:"Behandler...",designStyle:"Designstil",wallColor:"Endre farge",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Drer og vinduer",bathroom:"Bad",repairs:"Reparasjoner",general:"Generelt",cancel:"Avbryt",confirm:"Bekreft",close:"Lukk",mySubscription:"Mitt abonnement",creditsRemaining:"{count} kreditter igjen",upgradeToPremium:"Oppgrader til Premium",iHaveCoupon:"Jeg har en kupong",couponCode:"Kupongkode",contactUs:"Kontakt oss",phone:"Telefon",message:"Melding",sendMessage:"Send melding",comparison:"Sammenligning",download:"Last ned",share:"Del",language:"Sprk",selectLanguage:"Velg sprk",create:"Opprett",tutorial:"Veiledning",moreTools:"Flere verkty",colors:"Farger",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv nsket design...",bathroomShort:"Bad",skip:"Hopp over",next:"Neste",finish:"Fullfr",thankYou:"Takk!",sending:"Sender...",onboardingUploadTitle:"Last opp bilde",onboardingUploadDesc:"Begynn med  laste opp et bilde av rommet du vil designe.",onboardingStyleTitle:"Velg en redesignstil",onboardingStyleDesc:"Velg din foretrukne stil fra sidemenyen.",onboardingCreateTitle:"Opprett design",onboardingCreateDesc:'Klikk p "Opprett" og AI vil redesigne rommet ditt!',onboardingItemTipTitle:"Tips: Legg til element",onboardingItemTipDesc:'Vil du legge til et spesifikt mbel? Bruk knappen "Legg til element".'},c8={appTitle:"Expert AI",appName:"Expert",guest:"Go",login:"Zaloguj",logout:"Wyloguj",email:"E-mail",password:"Haso",uploadImage:"Przelij zdjcie",gallery:"Galeria",camera:"Aparat",uploadItem:"Dodaj element",redesign:"Przeprojektuj",more:"Wicej",history:"Historia",whatToChange:"Co zmieni?",processing:"Przetwarzanie...",designStyle:"Styl projektowy",wallColor:"Zmie kolor",lighting:"Owietlenie",furniture:"Meble",doorsWindows:"Drzwi i okna",bathroom:"azienka",repairs:"Naprawy",general:"Oglne",cancel:"Anuluj",confirm:"Potwierd",close:"Zamknij",mySubscription:"Moja subskrypcja",creditsRemaining:"Pozostao {count} kredytw",upgradeToPremium:"Uaktualnij do Premium",iHaveCoupon:"Mam kupon",couponCode:"Kod kuponu",contactUs:"Kontakt",phone:"Telefon",message:"Wiadomo",sendMessage:"Wylij wiadomo",comparison:"Porwnanie",download:"Pobierz",share:"Udostpnij",language:"Jzyk",selectLanguage:"Wybierz jzyk",create:"Utwrz",tutorial:"Poradnik",moreTools:"Wicej narzdzi",colors:"Kolory",aiDesigner:"Projektant AI",promptPlaceholder:"Opisz podany projekt...",bathroomShort:"azienka",skip:"Pomi",next:"Dalej",finish:"Zakocz",thankYou:"Dzikujemy!",sending:"Wysyanie...",onboardingUploadTitle:"Przelij zdjcie",onboardingUploadDesc:"Zacznij od przesania zdjcia pokoju, ktry chcesz zaprojektowa.",onboardingStyleTitle:"Wybierz styl przeprojektowania",onboardingStyleDesc:"Wybierz swj ulubiony styl z menu bocznego.",onboardingCreateTitle:"Utwrz projekt",onboardingCreateDesc:'Kliknij "Utwrz" a AI przeprojektuje Twj pokj!',onboardingItemTipTitle:"Wskazwka: Dodaj element",onboardingItemTipDesc:'Chcesz doda konkretny mebel? Uyj przycisku "Dodaj element".'},u8={appTitle:"Expert AI",appName:"Expert",guest:"Oaspete",login:"Conectare",logout:"Deconectare",email:"E-mail",password:"Parol",uploadImage:"ncarc imagine",gallery:"Galerie",camera:"Camer",uploadItem:"Adaug element",redesign:"Redesign",more:"Mai mult",history:"Istoric",whatToChange:"Ce s schimbm?",processing:"Se proceseaz...",designStyle:"Stil de design",wallColor:"Schimb culoarea",lighting:"Iluminat",furniture:"Mobilier",doorsWindows:"Ui i ferestre",bathroom:"Baie",repairs:"Reparaii",general:"General",cancel:"Anuleaz",confirm:"Confirm",close:"nchide",mySubscription:"Abonamentul meu",creditsRemaining:"{count} credite rmase",upgradeToPremium:"Upgrade la Premium",iHaveCoupon:"Am un cupon",couponCode:"Cod cupon",contactUs:"Contacteaz-ne",phone:"Telefon",message:"Mesaj",sendMessage:"Trimite mesaj",comparison:"Comparaie",download:"Descarc",share:"Distribuie",language:"Limb",selectLanguage:"Selecteaz limba",create:"Creeaz",tutorial:"Tutorial",moreTools:"Mai multe instrumente",colors:"Culori",aiDesigner:"Designer AI",promptPlaceholder:"Descrie designul dorit...",bathroomShort:"Baie",skip:"Sari",next:"Urmtorul",finish:"Finalizeaz",thankYou:"Mulumim!",sending:"Se trimite...",onboardingUploadTitle:"ncarc imagine",onboardingUploadDesc:"ncepe prin ncrcarea unei fotografii a camerei pe care vrei s o proiectezi.",onboardingStyleTitle:"Alege un stil de redesign",onboardingStyleDesc:"Selecteaz stilul preferat din meniul lateral.",onboardingCreateTitle:"Creeaz design",onboardingCreateDesc:'Apas pe "Creeaz" i AI va redesigna camera ta!',onboardingItemTipTitle:"Sfat: Adaug element",onboardingItemTipDesc:'Vrei s adaugi o pies de mobilier specific? Folosete butonul "Adaug element".'},d8={appTitle:"Expert AI",appName:"Expert",guest:"Gost",login:"Prijava",logout:"Odjava",email:"E-pota",password:"Geslo",uploadImage:"Naloi sliko",gallery:"Galerija",camera:"Kamera",uploadItem:"Dodaj element",redesign:"Preoblikuj",more:"Ve",history:"Zgodovina",whatToChange:"Kaj spremeniti?",processing:"Obdelava...",designStyle:"Slog oblikovanja",wallColor:"Spremeni barvo",lighting:"Osvetlitev",furniture:"Pohitvo",doorsWindows:"Vrata in okna",bathroom:"Kopalnica",repairs:"Popravila",general:"Splono",cancel:"Preklii",confirm:"Potrdi",close:"Zapri",mySubscription:"Moja naronina",creditsRemaining:"Preostalo {count} kreditov",upgradeToPremium:"Nadgradi na Premium",iHaveCoupon:"Imam kupon",couponCode:"Koda kupona",contactUs:"Kontaktirajte nas",phone:"Telefon",message:"Sporoilo",sendMessage:"Polji sporoilo",comparison:"Primerjava",download:"Prenesi",share:"Deli",language:"Jezik",selectLanguage:"Izberi jezik",create:"Ustvari",tutorial:"Vodi",moreTools:"Ve orodij",colors:"Barve",aiDesigner:"AI Oblikovalec",promptPlaceholder:"Opiite eleno oblikovanje...",bathroomShort:"Kopalnica",skip:"Preskoi",next:"Naprej",finish:"Konaj",thankYou:"Hvala!",sending:"Poiljanje...",onboardingUploadTitle:"Naloi sliko",onboardingUploadDesc:"Zanite z nalaganjem fotografije sobe, ki jo elite oblikovati.",onboardingStyleTitle:"Izberite slog preoblikovanja",onboardingStyleDesc:"Izberite svoj najljubi slog iz stranskega menija.",onboardingCreateTitle:"Ustvarite oblikovanje",onboardingCreateDesc:'Kliknite "Ustvari" in AI bo preoblikoval vao sobo!',onboardingItemTipTitle:"Nasvet: Dodajte element",onboardingItemTipDesc:'elite dodati doloen kos pohitva? Uporabite gumb "Dodaj element".'},h8={appTitle:"Expert AI",appName:"Expert",guest:"Gst",login:"Logga in",logout:"Logga ut",email:"E-post",password:"Lsenord",uploadImage:"Ladda upp bild",gallery:"Galleri",camera:"Kamera",uploadItem:"Lgg till objekt",redesign:"Designa om",more:"Mer",history:"Historik",whatToChange:"Vad ska ndras?",processing:"Bearbetar...",designStyle:"Designstil",wallColor:"ndra frg",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Drrar och fnster",bathroom:"Badrum",repairs:"Reparationer",general:"Allmnt",cancel:"Avbryt",confirm:"Bekrfta",close:"Stng",mySubscription:"Min prenumeration",creditsRemaining:"{count} krediter kvar",upgradeToPremium:"Uppgradera till Premium",iHaveCoupon:"Jag har en kupong",couponCode:"Kupongkod",contactUs:"Kontakta oss",phone:"Telefon",message:"Meddelande",sendMessage:"Skicka meddelande",comparison:"Jmfrelse",download:"Ladda ner",share:"Dela",language:"Sprk",selectLanguage:"Vlj sprk",create:"Skapa",tutorial:"Handledning",moreTools:"Fler verktyg",colors:"Frger",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv nskad design...",bathroomShort:"Bad",skip:"Hoppa ver",next:"Nsta",finish:"Slutfr",thankYou:"Tack!",sending:"Skickar...",onboardingUploadTitle:"Ladda upp bild",onboardingUploadDesc:"Brja med att ladda upp ett foto av rummet du vill designa.",onboardingStyleTitle:"Vlj en omdesignstil",onboardingStyleDesc:"Vlj din favoritstil frn sidomenyn.",onboardingCreateTitle:"Skapa design",onboardingCreateDesc:'Klicka p "Skapa" s omdesignar AI ditt rum!',onboardingItemTipTitle:"Tips: Lgg till element",onboardingItemTipDesc:'Vill du lgga till en specifik mbel? Anvnd knappen "Lgg till objekt".'},f8={IL:"he",SA:"ar",AE:"ar",EG:"ar",JO:"ar",LB:"ar",SY:"ar",IQ:"ar",KW:"ar",QA:"ar",BH:"ar",OM:"ar",YE:"ar",LY:"ar",TN:"ar",MA:"ar",DZ:"ar",DE:"de",AT:"de",CH:"de",LI:"de",ES:"es",MX:"es",AR:"es",CO:"es",PE:"es",VE:"es",CL:"es",EC:"es",GT:"es",CU:"es",BO:"es",DO:"es",HN:"es",PY:"es",SV:"es",NI:"es",CR:"es",PA:"es",UY:"es",PR:"es",FR:"fr",BE:"fr",CA:"fr",SN:"fr",CI:"fr",ML:"fr",BF:"fr",NE:"fr",TG:"fr",BJ:"fr",GA:"fr",CG:"fr",CD:"fr",CM:"fr",MG:"fr",HT:"fr",IT:"it",SM:"it",VA:"it",PT:"pt",BR:"pt",AO:"pt",MZ:"pt",NL:"nl",PL:"pl",RU:"en",BY:"en",KZ:"en",UA:"en",JP:"ja",KR:"ko",CN:"zh",TW:"zh",HK:"zh_HK",MO:"zh_HK",SE:"sv",NO:"nb",DK:"da",FI:"fi",CZ:"cs",HU:"hu",RO:"ro",GR:"el",CY:"el",HR:"hr",SI:"sl",LT:"lt",EE:"et",IS:"is",GE:"ka",IE:"ga",US:"en",GB:"en",AU:"en",NZ:"en",ZA:"en",IN:"en",PH:"en",SG:"en",MY:"en",NG:"en",KE:"en",GH:"en",TZ:"en",UG:"en",ZW:"en",JM:"en",TT:"en",BB:"en",BS:"en",BZ:"en",GY:"en"},zy=["he","ar"],bp=[{code:"en",name:"English",nativeName:"English"},{code:"ar",name:"Arabic",nativeName:""},{code:"cs",name:"Czech",nativeName:"etina"},{code:"da",name:"Danish",nativeName:"Dansk"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"el",name:"Greek",nativeName:""},{code:"es",name:"Spanish",nativeName:"Espaol"},{code:"et",name:"Estonian",nativeName:"Eesti"},{code:"fi",name:"Finnish",nativeName:"Suomi"},{code:"fr",name:"French",nativeName:"Franais"},{code:"ga",name:"Irish",nativeName:"Gaeilge"},{code:"he",name:"Hebrew",nativeName:""},{code:"hr",name:"Croatian",nativeName:"Hrvatski"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"is",name:"Icelandic",nativeName:"slenska"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"ja",name:"Japanese",nativeName:""},{code:"ka",name:"Georgian",nativeName:""},{code:"ko",name:"Korean",nativeName:""},{code:"lt",name:"Lithuanian",nativeName:"Lietuvi"},{code:"nb",name:"Norwegian",nativeName:"Norsk"},{code:"nl",name:"Dutch",nativeName:"Nederlands"},{code:"pl",name:"Polish",nativeName:"Polski"},{code:"pt",name:"Portuguese",nativeName:"Portugus"},{code:"ro",name:"Romanian",nativeName:"Romn"},{code:"sl",name:"Slovenian",nativeName:"Slovenina"},{code:"sv",name:"Swedish",nativeName:"Svenska"},{code:"zh_HK",name:"Cantonese",nativeName:""},{code:"zh",name:"Chinese",nativeName:""}],Yu={en:{appTitle:"Expert AI",appName:"Expert",guest:"Guest",loginToSaveDesigns:"Log in to save your designs",loggedOutSuccess:"Logged out successfully",login:"Login",logout:"Logout",createAccount:"Create Account",createNewAccount:"New Account",welcomeBack:"Welcome back! Log in to continue",joinUs:"Join us to save designs and access all features",email:"Email",password:"Password",confirmPassword:"Confirm Password",fillAllFields:"Please fill all fields",passwordsNotMatch:"Passwords do not match",loginButton:"Log In",createAccountButton:"Create Account",forgotPassword:"Forgot password?",enterEmailFirst:"Please enter an email address first",passwordResetEmailSent:"Password reset email sent! Check your inbox and spam folder.",passwordResetError:"Error sending password reset email",termsAgreement:"By logging in you agree to the",termsOfService:"Terms of Service",and:"and",privacyPolicy:"Privacy Policy",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"Logging in...",creatingAccount:"Creating account...",loginSuccess:"Logged in successfully! ",accountCreated:"Account created successfully! ",loginError:"Login error",userNotFound:"User not found",wrongPassword:"Wrong password",emailInUse:"Email already in use",weakPassword:"Password is too weak",invalidEmail:"Invalid email address",exitAccount:"Exit account",loginWithEmail:"Log in with email to save your designs",uploadImage:"Upload Image",clickToUploadImage:"Click here to upload an image from gallery",gallery:"Gallery",camera:"Camera",uploadItem:"Add Item",redesign:"Redesign",readyDesigns:"Design Gallery",categoryKitchen:"Kitchen",categoryKidsBedroom:"Kids Bedroom",categoryBathroom:"Bathroom",categoryLivingRoom:"Living Room",categoryMasterBedroom:"Master Bedroom",comingSoon:"Coming soon...",newDesignsWillBeAdded:"New designs will be added here",more:"More",moreOptions:"More Options",history:"History",noHistoryYet:"No history yet",uploadedImagesWillAppear:"Images you upload and edit will appear here",whatToChange:"What to change?",uploadImageFirst:"Please upload an image first",uploadingImage:"Uploading image...",errorUploadingImage:"Error uploading image",itemImageLoaded:"Item image loaded! Describe in the prompt where to add it.",addAttachedItem:"Add the attached item to the image",processingStarting:"Starting...",processingMagic:"The magic is happening",processing:"Processing...",connectingToCloud:"Connecting to cloud... ",sendingToAI:"Sending to AI... ",analyzingItem:"Analyzing item... ",creatingDesign:"Creating design... ",funPhrase1:"Sending the image through another dimension... ",funPhrase2:"Teaching the AI to appreciate good design... ",funPhrase3:"Convincing the pixels to cooperate... ",funPhrase4:"A little digital magic on the way... ",funPhrase5:"Asking the AI what it thinks... ",funPhrase6:"Mixing colors like a real artist... ",funPhrase7:"Calculating the perfect angle... ",funPhrase8:"Adding some style to your life... ",funPhrase9:"Making the room look more expensive... ",funPhrase10:"Activating the design magic... ",funPhrase11:"Consulting with the digital interior designers... ",funPhrase12:"Trying not to get too excited about the result... ",funPhrase13:"You'll see something amazing in a moment... ",funPhrase14:"Making sure everything is perfect for you... ",designStyle:"Design Style",wallColor:"Change Color",lighting:"Lighting",furniture:"Furniture",doorsWindows:"Doors & Windows",bathroom:"Bathroom",repairs:"Repairs",general:"General",selectDesignStyle:"Select Design Style",colorPalette:"Color Palette",colorReds:"Reds",colorOranges:"Oranges",colorYellows:"Yellows",colorGreens:"Greens",colorBlues:"Blues",colorPurples:"Purples",colorGrays:"Grays",colorWhitesAndBlacks:"Whites & Blacks",selectLightingType:"Select Lighting Type",selectFurnitureType:"Select Furniture Type",selectRepairType:"Select Repair/Damage Type",bathroomOptions:"Bathroom Options",pleaseSelectOption:"Please select an option from the list below.",repairEverything:"Repair everything",fixAndRepairEverything:"Fix and repair everything",messUpEverything:"Mess up everything",destroyAndCauseDamage:"Destroy and cause damage to everything",windowOptions:"Window Options",doorOptions:"Door Options",fixedWindow:"Fixed Window",slidingWindow:"Sliding Window",casementWindow:"Casement Window",tiltTurnWindow:"Tilt-Turn Window",awningWindow:"Awning Window",doubleHungWindow:"Double-Hung Window",pocketWindow:"Pocket Window",archWindow:"Arch Window",pocketDoor:"Pocket Door",frenchDoors:"French Doors",louverDoor:"Louver Door",barnDoor:"Barn Door",toiletOptions:"Toilet Options",bathtubOptions:"Bathtub Options",showerOptions:"Shower Options",sinkOptions:"Sink Options",jacuzziSpaOptions:"Jacuzzi/Spa Options",poolOptions:"Pool Options",bidetSeat:"Bidet Seat",toiletSeat:"Toilet Seat",freestandingTub:"Freestanding Tub",vintageTub:"Vintage Tub",standardTub:"Standard Tub",rainShower:"Rain Shower",showerEnclosure:"Shower Enclosure",slidingShower:"Sliding Shower",pedestalSink:"Pedestal Sink",stainlessSink:"Stainless Sink",undermountSink:"Undermount Sink",builtInJacuzzi:"Built-in Jacuzzi",portableJacuzzi:"Portable Jacuzzi",ingroundPool:"Inground Pool",abovegroundPool:"Above-ground Pool",whatToDo:"What to do?",describeChange:"Describe the desired change...",cancel:"Cancel",execute:"Execute",confirm:"Confirm",close:"Close",tryAgain:"Try Again",colorChange:"Change Color",allWalls:"All Walls",paintAllWalls:"Paint all walls in the room",specificObject:"Specific Object",selectWhatToPaint:"Choose what you want to paint",exampleObjects:"For example: sofa, ceiling, cabinet...",professionalSubscription:"Professional Plan",specialLaunchPrices:"Special launch prices ",purchaseFailed:"Purchase failed",yourCurrentPlan:"Your current plan",selectPlan:"Select Plan",perMonth:"/month",starterPlan:"Starter",valuePlan:"Value",proPlan:"Professional",imagesPerMonth:"{count} images per month",whatsappSupport:"WhatsApp Support",historyStorage:"History Storage",vipWhatsappSupport:"VIP WhatsApp Support",processingPriority:"Processing Priority",bestValue:"Best value: 4x more images! ",forProfessionals:"For professionals ",allDesignTools:"All design tools",fastSupport:"Fast support",noAds:"No ads",restorePurchases:"Restore Purchases",mySubscription:"My Subscription",creditsRemaining:"{count} credits remaining",upgradeToPremium:"Upgrade to Premium",iHaveCoupon:"I have a coupon",enterCouponCode:"Enter coupon code to get free credits",enterCouponCodeTitle:"Enter Coupon Code",enterCouponCodeSubtitle:"Enter the coupon code you received to get free credits",couponCode:"Coupon code",mustEnterCoupon:"You must enter a coupon code",couponActivated:"Coupon activated successfully!",errorRedeemingCoupon:"Error redeeming coupon",redeemCoupon:"Redeem Coupon",creditsAddedToAccount:"{count} credits added to your account! ",contactUs:"Contact Us",contactSubtitle:"We'd love to hear from you! Fill in the details and we'll get back to you soon.",phone:"Phone",message:"Message",writeYourMessage:"Write your message here...",enterPhoneOrEmail:"* Please enter at least phone or email",pleaseEnterPhoneOrEmail:"Please enter at least phone or email",pleaseEnterMessage:"Please enter a message",errorSendingMessage:"Error sending message. Please try again.",sendMessage:"Send Message",messageSentSuccess:"Message sent successfully!",contentNotAllowed:"Content Not Allowed",requestFailed:"Request Failed",oopsSomethingWrong:"Oops! Something went wrong",moderationError:`Cannot process this image or request.

The image or request may contain content that is not allowed for processing.

Try with a different image or change the request.`,timeoutError:`The request took too long.

Please try again later.`,genericError:`We couldn't process the request.

Try again or contact support if the issue persists.`,errorUnknown:"Unknown error",imageSavedToGallery:"Image saved to gallery!",errorDownloadingImage:"Error downloading image",errorSharing:"Error sharing",shareText:` I designed this with MoomHe AI!
 Want to try it too? https://moomhe.com`,comparison:"Comparison",download:"Download",share:"Share",revertToOriginal:"Revert to Original",loveItSave:"Love it! Save",whatsApp:"WhatsApp",products:"Products",cancelSearch:"Cancel Search",searchSimilarProducts:"Search Similar Products",whatDoYouThink:"What do you think of the new design?",dragSliderForComparison:"Drag the slider for full comparison",returnToOriginal:"Return to Original Image",loveItSaveDesign:"Love it! Save the Design",creditsFinishedThisMonth:"Credits finished for this month",creditsRanOut:"Credits ran out for this month",freeLimitReached:"You've reached the free usage limit",reachedFreeLimit:"You've reached the free usage limit",creditsLimitReached:"You've reached your credits limit. You can upgrade to a larger plan or wait until next month.",freeCreditsUsed:"You've used all your free credits. To continue designing without limits and get advanced features, upgrade to a professional plan.",currentUsage:"Current Usage",limit:"Limit",designs:"designs",upgradePlan:"Upgrade Plan",goToProfessionalPlan:"Go to Professional Plan",goPro:"Go Pro",notNowThanks:"Not now, thanks",welcomeToPlan:"Welcome to {planName} plan!",thankYouForJoining:"Thank you for joining our subscribers family. Your account has been upgraded successfully and you now have access to all advanced features and additional credits.",creditsAddedToYourAccount:"Credits added to your account",unlimitedStyleAccess:"Unlimited access to all styles",supportCreators:"Support for creators and designers",startDesigning:"Start Designing",secureYourSubscription:"Secure Your Subscription",secureSubscriptionMessage:`To not lose the subscription you purchased, we recommend logging in with email.

This way you can restore your subscription on a new device or after reinstalling.`,later:"Later",loginNow:"Login Now",onboardingUploadTitle:"Upload Image",onboardingUploadDesc:"Start by uploading a photo of the room you want to design. Don't have one? No worries, we'll use a sample image.",onboardingStyleTitle:"Choose Redesign Style",onboardingStyleDesc:'Select your preferred style from the side menu. Try "Redesign" to see different options.',onboardingCreateTitle:"Create Design",onboardingCreateDesc:'Click "Create" and the AI will redesign your room in seconds!',onboardingItemTipTitle:"Extra Tip: Add Item",onboardingItemTipDesc:'Want to add a specific piece of furniture? Use the "Add Item" button to upload an image of an item and incorporate it into the design.',skip:"Skip",next:"Next",finish:"Finish",promptAddedToInput:"Prompt added - you can edit it and then tap Create",styleMediterranean:"Modern Mediterranean",styleWarmMinimalism:"Warm Minimalism",styleBiophilic:"Biophilic",styleModernLuxury:"Modern Luxury",styleJapandi:"Japandi",styleScandinavian:"Scandinavian",styleBohoChic:"Boho Chic",styleIndustrial:"Industrial",styleEarthyNatural:"Earthy Natural",styleJerusalem:"Jerusalem",styleMinimalist:"Minimalist",styleModernClassic:"Modern Classic",colorCategoryReds:"Reds",colorCategoryOranges:"Oranges",colorCategoryYellows:"Yellows",colorCategoryGreens:"Greens",colorCategoryBlues:"Blues",colorCategoryPurples:"Purples",colorCategoryGrays:"Grays",colorCategoryWhitesBlacks:"Whites & Blacks",lightingRecessed:"Recessed Lighting",lightingPendant:"Pendant Light",lightingChandelier:"Chandelier",lightingTableLamp:"Table Lamp",lightingFloorLamp:"Floor Lamp",lightingWallSconce:"Wall Sconce",lightingTrack:"Track Lighting",lightingCeiling:"Ceiling Fixture",lightingUnderCabinet:"Under-Cabinet Lighting",lightingDecorative:"Decorative Lights",lightingDay:"Day",lightingNight:"Night",lightingSunset:"Sunset",lightingSunrise:"Sunrise",furnitureSofa:"Sofa",furnitureSectional:"Sectional Sofa",furnitureArmchair:"Armchair",furnitureAccentChair:"Accent Chair",furnitureDiningChair:"Dining Chair",furnitureBarStool:"Bar Stool",furnitureSingleBed:"Single Bed",furnitureDoubleBed:"Double Bed",furnitureBeanbag:"Beanbag",furnitureOttoman:"Ottoman",furnitureBench:"Bench",furnitureCoffeeTable:"Coffee Table",furnitureEndTable:"End Table",furnitureNightstand:"Nightstand",furnitureDiningTable:"Dining Table",furnitureDesk:"Desk",furnitureDresser:"Dresser",furnitureWardrobe:"Wardrobe",furnitureBookcase:"Bookcase",furnitureTvStand:"TV Stand",furnitureCabinets:"Kitchen Cabinets",repairsFixEverything:"Fix everything",repairsRepairAll:"Fix and repair everything",repairsMessUp:"Mess up everything",repairsDestroy:"Destroy and cause damage to everything",windowPicture:"Picture Window",windowSliding:"Sliding Window",windowCasement:"Casement Window",windowTiltTurn:"Tilt and Turn Window",windowAwning:"Awning Window",windowSash:"Sash Window",windowPocket:"Pocket Window",windowArched:"Arched Window",doorPocket:"Pocket Door",doorFrench:"French Doors",doorLouvered:"Louvered Door",doorBarn:"Barn Door",searchWithLens:"Search",selectAreaToSearch:"Draw a rectangle around the item you want to search",searchingWithGoogleLens:"Searching with Google Lens...",selectAreaWithinImage:"Please select an area within the image",googleLensSearchFailed:"Search failed. Please try again.",deleteAccount:"Delete Account",deleteAccountWarning1Title:"Delete Account",deleteAccountWarning1Message:"Are you sure you want to delete your account? This will delete all your information and images and cannot be undone.",deleteAccountWarning2Title:"Final Confirmation",deleteAccountWarning2Message:"This action is irreversible! All your history and images will be permanently deleted. Are you 100% sure?",deleteAccountConfirm:"Yes, Delete Account",deletingAccount:"Deleting account...",accountDeleted:"Account deleted successfully",errorDeletingAccount:"Error deleting account",language:"Language",selectLanguage:"Select Language",languageChanged:"Language changed",create:"Create",subscriptionFree:"Free",subscriptionStarter:"Starter",subscriptionValue:"Value",subscriptionPro:"Professional",interiorDesign:"Interior & Exterior Design",repairsDamages:"Repairs & Damages",changeColor:"Change Color",angle:"Angle",addPlants:"Add Plants",enhanceLighting:"Enhance Lighting",addAccessories:"Add Accessories",addDetails:"Add Details",addMakeup:"Add Makeup",addBackground:"Add Background",bathroomShort:"Bathroom",tutorial:"Tutorial",designHistory:"Design History",activeSubscription:"Active Subscription",credits:"credits",loggedInAs:"Logged in as",promptPlaceholder:"Describe the desired design... (e.g., change the sofa to blue, add plants in the corner)",moreTools:"More Tools",colors:"Colors",aiDesigner:"AI Designer",aiDesignerActiveClickToDisable:"Active - Click to disable",aiDesignerInactiveClickToEnable:"Inactive - Click to enable",yourDesigner:"Your Designer",iHaveIdeasForYou:"I have some ideas for you!",heyIHaveGreatIdeas:"Hey! I have some great ideas to upgrade this room ",noThanks:"No thanks",processingNewDesign:"Processing new design...",promptUpdated:"Prompt updated. Click 'Create' to execute",tipClickMore:' Tip: Click "More" for shortcuts like colors, furniture, lighting and more!',writeRequestAndCreate:'Write your request below and click "Create"',loginRequired:"Login Required",loginRequiredMessage:"You need to log in or create an account to purchase a subscription.",wantToLogin:"Do you want to go to login?",thankYou:"Thank you!",messageReceived:"Your message has been received successfully.",willGetBack:"We will get back to you as soon as possible.",sending:"Sending...",creditsDepletedThisMonth:"Credits depleted this month",creditsDepletedDesc:"You've reached your credit limit ({limit} credits). You can upgrade to a larger plan or wait until next month.",reachedFreeLimitDesc:"You've used all {limit} of your free credits. To continue designing without limits and get advanced features, upgrade to a professional subscription.",limitLabel:"Limit",goToProfessional:"Go Professional",imageUploadedSuccess:"Great! Image uploaded",describeWhatToChange:`Now describe what you'd like to change in the image. For example: "Change the wall color to blue" or "Add plants in the corner".`,gotItLetsStart:"Got it, let's start!",upgradeYourDesignAbilities:"Upgrade your design capabilities with our great subscription plans. Choose the plan that best fits your needs.",accessToAllTools:"Access to all design tools",emailSupport:"Email support",savePerImage:"Save 35% per image",prioritySupport:"Priority support",earlyAccess:"Early access to new features",unlimitedImages:"Unlimited images",premiumSupport:"Premium support",commercialLicense:"Commercial license",unlimitedDesigns:"Unlimited designs!",currentPlanBadge:"Current",save42PerImage:"Save 42% per image",allAdvancedFeatures:"All advanced features",forIndustryProfessionals:"For industry professionals",subscriptionDisclaimer:"You can cancel your subscription at any time. Billing renews automatically each month.",categoryInteriorExterior:"Interior & Exterior Design",categoryGardensBalconies:"Gardens & Balconies",categoryVehicles:"Vehicles & Two-Wheelers",categoryTattoos:"Tattoos",categoryMakeupBeauty:"Makeup & Beauty",categoryAdvertisingProducts:"Advertising & Products",roomKitchens:"Kitchens",roomLivingRooms:"Living Rooms",roomBathrooms:"Bathrooms",roomAdultBedrooms:"Adult Bedrooms",roomKidsBedrooms:"Kids Bedrooms",roomDiningAreas:"Dining Areas",roomOffices:"Home Offices",roomBalconies:"Balconies",roomGardens:"Gardens",roomEntrances:"Entrances",categoryProfileImage:"Profile & Image"},he:{appTitle:" AI",appName:"",guest:"",loginToSaveDesigns:"     ",loggedOutSuccess:" ",login:"",logout:"",createAccount:" ",createNewAccount:" ",welcomeBack:" !   ",joinUs:"        ",email:"",password:"",confirmPassword:" ",fillAllFields:"    ",passwordsNotMatch:"  ",loginButton:"",createAccountButton:" ",forgotPassword:" ?",enterEmailFirst:"    ",passwordResetEmailSent:"   !      .",passwordResetError:"    ",termsAgreement:"   ",termsOfService:" ",and:"",privacyPolicy:" ",privacyPolicyUrl:"https://moomhe.com/privacy.html",termsOfServiceUrl:"https://moomhe.com/eula.html",loggingIn:"...",creatingAccount:" ...",loginSuccess:" ! ",accountCreated:"  ! ",loginError:" ",userNotFound:"  ",wrongPassword:" ",emailInUse:"  ",weakPassword:"  ",invalidEmail:"   ",exitAccount:" ",loginWithEmail:"       ",uploadImage:" ",clickToUploadImage:"     ",gallery:"",camera:"",uploadItem:" ",redesign:" ",readyDesigns:" ",categoryKitchen:"",categoryKidsBedroom:" ",categoryBathroom:" ",categoryLivingRoom:"",categoryMasterBedroom:" ",comingSoon:"...",newDesignsWillBeAdded:"   ",more:"",moreOptions:" ",history:"",noHistoryYet:"  ",uploadedImagesWillAppear:"    ",whatToChange:" ?",uploadImageFirst:"   ",uploadingImage:" ...",errorUploadingImage:"  ",itemImageLoaded:"  !     .",addAttachedItem:"    ",processingStarting:"...",processingMagic:" ",processing:"...",connectingToCloud:" ... ",sendingToAI:" -AI... ",analyzingItem:" ... ",creatingDesign:" ... ",funPhrase1:"    ... ",funPhrase2:"      ... ",funPhrase3:"    ... ",funPhrase4:"   ... ",funPhrase5:"      ... ",funPhrase6:"    ... ",funPhrase7:"   ... ",funPhrase8:"    ... ",funPhrase9:"    ... ",funPhrase10:"   ... ",funPhrase11:"    ... ",funPhrase12:"     ... ",funPhrase13:"    ... ",funPhrase14:"   ... ",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",selectDesignStyle:"  ",colorPalette:" ",colorReds:"",colorOranges:"",colorYellows:"",colorGreens:"",colorBlues:"",colorPurples:"",colorGrays:"",colorWhitesAndBlacks:" ",selectLightingType:"  ",selectFurnitureType:"  ",selectRepairType:"  /",bathroomOptions:" ",pleaseSelectOption:"    .",repairEverything:"  ",fixAndRepairEverything:"   ",messUpEverything:"  ",destroyAndCauseDamage:"   ",windowOptions:" ",doorOptions:" ",fixedWindow:" ",slidingWindow:" ",casementWindow:" ",tiltTurnWindow:" -",awningWindow:"  ",doubleHungWindow:" ",pocketWindow:" ",archWindow:" ",pocketDoor:" ",frenchDoors:" ",louverDoor:" ",barnDoor:" ",toiletOptions:" ",bathtubOptions:" ",showerOptions:" ",sinkOptions:" ",jacuzziSpaOptions:" '/",poolOptions:" ",bidetSeat:" ",toiletSeat:" ",freestandingTub:" ",vintageTub:" ",standardTub:" ",rainShower:" ",showerEnclosure:"",slidingShower:" ",pedestalSink:" ",stainlessSink:" ",undermountSink:" ",builtInJacuzzi:"' ",portableJacuzzi:"' ",ingroundPool:"  ",abovegroundPool:"  ",whatToDo:" ?",describeChange:"   ...",cancel:"",execute:"",confirm:"",close:"",tryAgain:" ",colorChange:" ",allWalls:" ",paintAllWalls:"    ",specificObject:" ",selectWhatToPaint:"    ",exampleObjects:": , , ...",professionalSubscription:" ",specialLaunchPrices:"   ",purchaseFailed:" ",yourCurrentPlan:"  ",selectPlan:" ",perMonth:"/",starterPlan:"",valuePlan:"",proPlan:"",imagesPerMonth:"{count}  ",whatsappSupport:" ",historyStorage:" ",vipWhatsappSupport:" VIP ",processingPriority:" ",bestValue:" :  4  ! ",forProfessionals:" ",allDesignTools:"  ",fastSupport:" ",noAds:" ",restorePurchases:" ",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:"  ",enterCouponCode:"      ",enterCouponCodeTitle:"  ",enterCouponCodeSubtitle:"        ",couponCode:" ",mustEnterCoupon:"   ",couponActivated:"  !",errorRedeemingCoupon:"  ",redeemCoupon:" ",creditsAddedToAccount:"{count}   ! ",contactUs:" ",contactSubtitle:"  !      .",phone:"",message:"",writeYourMessage:"    ...",enterPhoneOrEmail:"*      ",pleaseEnterPhoneOrEmail:"     ",pleaseEnterMessage:"  ",errorSendingMessage:"  .   .",sendMessage:" ",messageSentSuccess:"  !",contentNotAllowed:"  ",requestFailed:" ",oopsSomethingWrong:"!  ",moderationError:`      .

        .

       .`,timeoutError:`    .

   .`,genericError:`    .

       .`,errorUnknown:"  ",imageSavedToGallery:"  !",errorDownloadingImage:"  ",errorSharing:" ",shareText:`      AI!
   ? https://moomhe.com`,comparison:"",download:"",share:"",revertToOriginal:" ",loveItSave:"! ",whatsApp:"",products:"",cancelSearch:" ",searchSimilarProducts:"  ",whatDoYouThink:"    ?",dragSliderForComparison:"     ",returnToOriginal:"  ",loveItSaveDesign:"!   ",creditsFinishedThisMonth:"  ",creditsRanOut:"  ",freeLimitReached:"   ",reachedFreeLimit:"   ",creditsLimitReached:"   .          .",freeCreditsUsed:"    .        ,   .",currentUsage:" ",limit:"",designs:"",upgradePlan:" ",goToProfessionalPlan:"  ",goPro:" ",notNowThanks:" , ",welcomeToPlan:"   {planName}!",thankYouForJoining:"    .             .",creditsAddedToYourAccount:"  ",unlimitedStyleAccess:"    ",supportCreators:"  ",startDesigning:" ",secureYourSubscription:"   ",secureSubscriptionMessage:`     ,     .

          .`,later:" ",loginNow:" ",onboardingUploadTitle:" ",onboardingUploadDesc:"      .   ?  ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:'      .  " "    .',onboardingCreateTitle:" ",onboardingCreateDesc:'  "" -AI       !',onboardingItemTipTitle:" :  ",onboardingItemTipDesc:'   ?   " "        .',skip:"",next:"",finish:"",promptAddedToInput:"  -      ",styleMediterranean:"  ",styleWarmMinimalism:" ",styleBiophilic:"",styleModernLuxury:" ",styleJapandi:"",styleScandinavian:"",styleBohoChic:" ",styleIndustrial:"",styleEarthyNatural:" ",styleJerusalem:"",styleMinimalist:"",styleModernClassic:" ",colorCategoryReds:"",colorCategoryOranges:"",colorCategoryYellows:"",colorCategoryGreens:"",colorCategoryBlues:"",colorCategoryPurples:"",colorCategoryGrays:"",colorCategoryWhitesBlacks:" ",lightingRecessed:" ",lightingPendant:" ",lightingChandelier:"",lightingTableLamp:" ",lightingFloorLamp:" ",lightingWallSconce:" ",lightingTrack:" ",lightingCeiling:"  ",lightingUnderCabinet:"  ",lightingDecorative:" ",lightingDay:"",lightingNight:"",lightingSunset:"",lightingSunrise:"",furnitureSofa:"",furnitureSectional:" ",furnitureArmchair:"",furnitureAccentChair:" ",furnitureDiningChair:" ",furnitureBarStool:" ",furnitureSingleBed:" ",furnitureDoubleBed:" ",furnitureBeanbag:"",furnitureOttoman:"",furnitureBench:"",furnitureCoffeeTable:" ",furnitureEndTable:" ",furnitureNightstand:" ",furnitureDiningTable:" ",furnitureDesk:" ",furnitureDresser:"",furnitureWardrobe:" ",furnitureBookcase:"",furnitureTvStand:" ",furnitureCabinets:" ",repairsFixEverything:" ",repairsRepairAll:"  ",repairsMessUp:" ",repairsDestroy:"    ",windowPicture:" ",windowSliding:" ",windowCasement:" ",windowTiltTurn:"  ",windowAwning:" ",windowSash:" ",windowPocket:" ",windowArched:" ",doorPocket:" ",doorFrench:" ",doorLouvered:" ",doorBarn:" ",searchWithLens:"",selectAreaToSearch:"     ",searchingWithGoogleLens:" -Google Lens...",selectAreaWithinImage:"   ",googleLensSearchFailed:" .  .",deleteAccount:" ",deleteAccountWarning1Title:" ",deleteAccountWarning1Message:"       ?             .",deleteAccountWarning2Title:" ",deleteAccountWarning2Message:"   !      .    -100%?",deleteAccountConfirm:",   ",deletingAccount:" ...",accountDeleted:"  ",errorDeletingAccount:"  ",language:"",selectLanguage:" ",languageChanged:" ",create:"",subscriptionFree:"",subscriptionStarter:"",subscriptionValue:"",subscriptionPro:"",interiorDesign:"  ",repairsDamages:" ",changeColor:" ",angle:"",addPlants:" ",enhanceLighting:" ",addAccessories:" ",addDetails:" ",addMakeup:" ",addBackground:" ",bathroomShort:"",tutorial:"",designHistory:" ",activeSubscription:" ",credits:"",loggedInAs:" -",promptPlaceholder:"   ... (:     ,   )",moreTools:" ",colors:"",aiDesigner:" AI",aiDesignerActiveClickToDisable:" -  ",aiDesignerInactiveClickToEnable:" -  ",yourDesigner:" ",iHaveIdeasForYou:"    !",heyIHaveGreatIdeas:"!         ",noThanks:" ",processingNewDesign:"  ...",promptUpdated:"  .   ''  ",tipClickMore:' :   ""      , ,  !',writeRequestAndCreate:'       ""',loginRequired:" ",loginRequiredMessage:"       .",wantToLogin:"   ?",thankYou:" !",messageReceived:"   .",willGetBack:"   .",sending:"...",creditsDepletedThisMonth:"   ",creditsDepletedDesc:"    ({limit} ).         .",reachedFreeLimitDesc:"   {limit}   .        ,   .",limitLabel:"",goToProfessional:"  ",imageUploadedSuccess:"!  ",describeWhatToChange:'     . : "    "  "  ".',gotItLetsStart:",  !",upgradeYourDesignAbilities:"         .       .",accessToAllTools:"   ",emailSupport:" ",savePerImage:" 35%  ",prioritySupport:" ",earlyAccess:"   ",unlimitedImages:"  ",premiumSupport:" ",commercialLicense:" ",unlimitedDesigns:"  !",currentPlanBadge:"",save42PerImage:" 42%  ",allAdvancedFeatures:"  ",forIndustryProfessionals:"  ",subscriptionDisclaimer:"     .     . ..",categoryInteriorExterior:"  ",categoryGardensBalconies:" ",categoryVehicles:"  ",categoryTattoos:"",categoryMakeupBeauty:" ",categoryAdvertisingProducts:" ",roomKitchens:"",roomLivingRooms:"",roomBathrooms:" ",roomAdultBedrooms:"  ",roomKidsBedrooms:"  ",roomDiningAreas:" ",roomOffices:" ",roomBalconies:"",roomGardens:"",roomEntrances:"",categoryProfileImage:" "},ar:U9,es:B9,de:z9,fr:$9,it:W9,pt:G9,nl:H9,ja:q9,ko:K9,zh:Y9,zh_HK:Q9,cs:J9,da:X9,el:Z9,et:e8,fi:t8,ga:n8,hr:r8,hu:i8,is:s8,ka:o8,lt:a8,nb:l8,pl:c8,ro:u8,sl:d8,sv:h8},lN=j.createContext();async function pE(){try{return(await(await fetch("https://api.country.is/")).json()).country}catch(t){return console.warn("Could not get country by IP:",t),null}}function m8(t){return f8[t]||"en"}function p8(){const t=navigator.language||navigator.userLanguage,e=t.split("-")[0];return Yu[e]?e:t==="zh-HK"||t==="zh-TW"?"zh_HK":"en"}function g8({children:t}){const[e,n]=j.useState(()=>{const p=localStorage.getItem("app_language");return p&&Yu[p]?p:p8()}),[r,i]=j.useState(zy.includes(e)),[s,o]=j.useState(null),[a,l]=j.useState(!1);j.useEffect(()=>{localStorage.getItem("app_language")?pE().then(y=>{y&&o(y),l(!0)}):pE().then(y=>{if(y){o(y);const _=m8(y);Yu[_]&&(n(_),i(zy.includes(_)))}l(!0)})},[]),j.useEffect(()=>{document.documentElement.dir=r?"rtl":"ltr",document.documentElement.lang=e},[r,e]);const f={language:e,setLanguage:p=>{bp.some(_=>_.code===p)&&(n(p),i(zy.includes(p)),localStorage.setItem("app_language",p))},t:(p,y={})=>{var A,P;let _=((A=Yu[e])==null?void 0:A[p])||((P=Yu.en)==null?void 0:P[p])||p;return Object.keys(y).forEach(I=>{_=_.replace(new RegExp(`\\{${I}\\}`,"g"),y[I])}),_},isRTL:r,countryCode:s,isInitialized:a,supportedLanguages:bp};return d.jsx(lN.Provider,{value:f,children:t})}function ru(){const t=j.useContext(lN);if(!t)throw new Error("useLocalization must be used within a LocalizationProvider");return t}const y8=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const{t:s,isRTL:o}=ru(),[a,l]=j.useState(null),[u,h]=j.useState({width:window.innerWidth,height:window.innerHeight}),[f,p]=j.useState(window.innerWidth<1024),y=e[t];j.useEffect(()=>{const N=()=>{const B=window.innerWidth<1024;if(p(B),h({width:window.innerWidth,height:window.innerHeight}),y.targetRef&&y.targetRef.current){const T=y.targetRef.current.getBoundingClientRect();T.width>0&&T.height>0?l(T):l(null)}else l(null)};N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0);const U=setTimeout(N,500);return()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0),clearTimeout(U)}},[t,y]);const _=t===e.length-1;if(!a)return d.jsxs("div",{className:"fixed inset-0 z-[100]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",dir:o?"rtl":"ltr",children:[d.jsx("h3",{className:"font-bold text-xl text-primary-600",children:y.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(nn,{size:20})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:o?"rtl":"ltr",children:y.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:o?"rtl":"ltr",children:[d.jsx("div",{className:"flex gap-1.5",children:e.map((N,U)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${U===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},U))}),d.jsxs("button",{onClick:_?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[s(_?"finish":"next"),!_&&(o?d.jsx(TI,{size:16}):d.jsx(xI,{size:16}))]})]})]})})]});const A=f?Math.min(280,u.width-40):300,P=200,I=f?12:20,b={};let x="";if(f){let N=(u.width-A)/2;b.left=N,b.width=A;const U=a.top;u.height-a.bottom,U>P+I+50?(b.top=a.top-P-I+20,x="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(b.top=a.bottom+I,x="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]"),b.top=Math.max(20,Math.min(u.height-P-20,b.top))}else{const N=a.left>u.width-350,U=a.left<350;if(N){b.left=a.left-A-I;let B=a.top+a.height/2-80;B=Math.max(20,Math.min(u.height-P-20,B)),b.top=B,x="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(U){b.left=a.right+I;let B=a.top+a.height/2-80;B=Math.max(20,Math.min(u.height-P-20,B)),b.top=B,x="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let B=a.left+a.width/2-A/2;B=Math.max(20,Math.min(u.width-A-20,B)),b.left=B;const T=a.top;u.height-a.bottom,T>P+I?(b.top=a.top-180,x="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(b.top=a.bottom+I,x="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}}return d.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[d.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[d.jsx("defs",{children:d.jsxs("mask",{id:"spotlight-mask",children:[d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),d.jsx("rect",{x:a.left-5,y:a.top-5,width:a.width+10,height:a.height+10,rx:"12",fill:"black"})]})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),d.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:a.left-5,top:a.top-5,width:a.width+10,height:a.height+10}}),d.jsxs("div",{className:`absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl pointer-events-auto animate-bounce-in origin-center transition-all duration-300 ${f?"":"w-[300px]"}`,style:b,children:[d.jsx("div",{className:`absolute w-0 h-0 border-solid ${x}`}),d.jsxs("div",{className:"flex justify-between items-start mb-2",dir:o?"rtl":"ltr",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:y.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(nn,{size:16})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:o?"rtl":"ltr",children:y.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:o?"rtl":"ltr",children:[d.jsx("div",{className:"flex gap-1",children:e.map((N,U)=>d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${U===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},U))}),d.jsxs("button",{onClick:_?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[s(_?"finish":"next"),!_&&(o?d.jsx(TI,{size:16}):d.jsx(xI,{size:16}))]})]})]})]})},w8=({color:t,onClose:e,onApply:n})=>{const[r,i]=j.useState(""),[s,o]=j.useState("all"),{t:a,isRTL:l}=ru(),u=f=>{const p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return p?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16)}:null},h=()=>{const f=u(t.hex),p=f?`RGB(${f.r}, ${f.g}, ${f.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${p}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const y=/[\u0590-\u05FF]/.test(r);n(y?`  ${r}  ${t.value} (${t.ral}, ${p})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${p}) color completely and opaquely, covering the original color entirely`)}};return d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",dir:l?"rtl":"ltr",children:d.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:a("changeColor")})]}),d.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:d.jsx(nn,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:a("allWalls")}),d.jsx("span",{className:"text-xs text-gray-400",children:a("paintAllWallsInRoom")})]})]}),d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:a("specificObject")}),d.jsx("span",{className:"text-xs text-gray-400",children:a("chooseWhatToPaint")})]})]})]}),s==="custom"&&d.jsxs("div",{className:"animate-slide-up",children:[d.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:a("whatToPaint")}),d.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:a("paintExamplePlaceholder"),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),d.jsxs("div",{className:`pt-2 flex ${l?"justify-start":"justify-end"} gap-3`,children:[d.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:a("cancel")}),d.jsxs("button",{onClick:h,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[d.jsx("span",{children:a("confirm")}),d.jsx(Vw,{size:16})]})]})]})]})})},gE=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=j.useState(!1),{t:l,isRTL:u}=ru();return j.useEffect(()=>{a(!0)},[]),!t||!o?null:jp.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",dir:u?"rtl":"ltr",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[d.jsx("button",{onClick:e,className:`absolute top-4 ${u?"left-4":"right-4"} z-20 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors`,children:d.jsx(nn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:d.jsx(Vd,{className:"w-8 h-8 text-primary-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?l("creditsDepletedThisMonth"):l("reachedFreeLimit")}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?l("creditsDepletedDesc",{limit:s}):l("reachedFreeLimitDesc",{limit:s})}),d.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[d.jsxs("div",{className:u?"text-right":"text-left",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:l("currentUsage")}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[i," ",l("designs")]})]}),d.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),d.jsxs("div",{className:u?"text-right":"text-left",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:l("limitLabel")}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[s," ",l("designs")]})]})]}),d.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[d.jsx(Vd,{className:"w-5 h-5"}),r>0?l("upgradePlan"):l("goToProfessional")]}),d.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:l("notNowThanks")})]})]})}),document.body)},v8=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=j.useState(!1);return j.useEffect(()=>{i(!0)},[]),!t||!r?null:jp.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:d.jsx(nn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:d.jsx(uy,{size:16,fill:"currentColor"})}),d.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:d.jsx(uy,{size:12,fill:"currentColor"})}),d.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:d.jsx(uy,{size:14,fill:"currentColor"})})]}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[d.jsx(Vd,{className:"w-10 h-10 text-yellow-400"}),d.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:d.jsx(Vw,{className:"w-4 h-4 text-white stroke-[3]"})})]}),d.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),d.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Dr,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Vw,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"    "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[d.jsx(Vd,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]})]}),d.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",d.jsx(Dr,{className:"w-5 h-5"})]})]})]})}),document.body)},yE=({beforeImage:t,afterImage:e})=>{const[n,r]=j.useState(50),i=j.useRef(null),s=j.useRef(!1),o=h=>{s.current=!0,l(h)},a=()=>{s.current=!1},l=h=>{if(!i.current)return;let f;h.touches?f=h.touches[0].clientX:f=h.clientX;const p=i.current.getBoundingClientRect(),_=Math.max(0,Math.min(f-p.left,p.width))/p.width*100;r(_)},u=h=>{s.current&&l(h)};return d.jsxs("div",{className:"relative w-full h-full select-none overflow-hidden group cursor-col-resize",ref:i,onMouseDown:o,onTouchStart:o,onMouseMove:u,onTouchMove:u,onMouseUp:a,onMouseLeave:a,onTouchEnd:a,children:[d.jsx("img",{src:e,alt:"After",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),d.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden select-none",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:d.jsx("img",{src:t,alt:"Before",className:"absolute inset-0 w-full h-full object-contain select-none",draggable:!1})}),d.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-col-resize z-10 shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{left:`${n}%`},children:d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg text-primary-600 transition-transform group-hover:scale-110",children:d.jsx(Ow,{size:16})})}),d.jsx("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""}),d.jsx("div",{className:"absolute bottom-4 right-4 bg-primary-600/80 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""})]})},_8=({isOpen:t,onClose:e,user:n,userCredits:r,userUsage:i,userSubscription:s,onLogin:o,onLogout:a,onSubscriptionClick:l,onRedeemCoupon:u,onCouponSuccess:h})=>{const{t:f,language:p,setLanguage:y,isRTL:_}=ru(),[A,P]=j.useState(!1),[I,b]=j.useState(!1),[x,N]=j.useState(""),[U,B]=j.useState(null),[T,w]=j.useState("");if(!t)return null;const E=n&&!n.isAnonymous&&n.email,C=((n==null?void 0:n.email)||"U")[0].toUpperCase(),R=()=>{if(B(null),w(""),N(""),s>0){B("error"),w(f("errorRedeemingCoupon")),P(!1);return}P(!0)},M=async()=>{if(!x.trim()){B("error"),w(f("mustEnterCoupon"));return}B("loading"),w("");try{const Se=await u(x.trim());Se.success?(N(""),P(!1),B(null),w(""),e(),h&&h(Se.creditsAdded||0)):(B("error"),w(Se.error||f("errorRedeemingCoupon")))}catch(Se){B("error"),w(Se.message||f("errorRedeemingCoupon"))}},k=bp.find(Se=>Se.code===p);return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",dir:_?"rtl":"ltr",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm bg-[#1a1a2e] rounded-3xl overflow-hidden shadow-2xl animate-scale-up border border-white/10 max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 p-6 text-center border-b border-white/5",children:[d.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-1 mb-3 shadow-lg shadow-purple-500/20",children:d.jsx("div",{className:"w-full h-full rounded-full bg-[#1a1a2e] flex items-center justify-center text-3xl font-bold text-white",children:E?C:d.jsx(nm,{className:"w-8 h-8 text-gray-300"})})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:E?n.displayName||n.email.split("@")[0]:f("guest")}),d.jsx("p",{className:"text-sm text-gray-400",children:E?n.email:f("loginToSaveDesigns")})]}),d.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1",children:[d.jsxs("button",{onClick:()=>{l(),e()},className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 hover:from-amber-500/20 hover:to-orange-500/20 border border-amber-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(Vd,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("mySubscription")}),d.jsx("div",{className:"text-xs text-amber-400/80",children:r-i>0?f("creditsRemaining",{count:r-i}):f("upgradeToPremium")})]})]}),d.jsx("div",{className:"text-amber-400 text-lg",children:_?"":""})]}),d.jsxs("div",{className:"space-y-3",children:[A?d.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[d.jsx(SI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:f("enterCouponCodeTitle")})]}),d.jsx("input",{type:"text",value:x,onChange:Se=>N(Se.target.value.replace(/\s/g,"").toUpperCase()),placeholder:f("couponCode"),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50 text-center tracking-wider uppercase",disabled:U==="loading",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{P(!1),N(""),B(null),w("")},className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 font-medium transition-colors",disabled:U==="loading",children:f("cancel")}),d.jsx("button",{onClick:M,disabled:U==="loading"||!x.trim(),className:"flex-1 py-2.5 rounded-xl bg-emerald-500/80 hover:bg-emerald-500 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:U==="loading"?d.jsxs(d.Fragment,{children:[d.jsx(qo,{className:"w-4 h-4 animate-spin"}),f("processing")]}):f("redeemCoupon")})]})]}):d.jsxs("button",{onClick:R,className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 hover:from-emerald-500/20 hover:to-teal-500/20 border border-emerald-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(SI,{className:"w-5 h-5 text-emerald-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("iHaveCoupon")}),d.jsx("div",{className:"text-xs text-emerald-400/80",children:f("enterCouponCode")})]})]}),d.jsx("div",{className:"text-emerald-400 text-lg",children:_?"":""})]}),U&&T&&d.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-xl text-sm ${U==="success"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":U==="error"?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-white/10 text-gray-300"}`,children:[U==="success"?d.jsx(si,{className:"w-4 h-4 flex-shrink-0"}):U==="error"?d.jsx(nL,{className:"w-4 h-4 flex-shrink-0"}):null,d.jsx("span",{children:T})]})]}),I?d.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/20 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-violet-400 mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(AI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:f("selectLanguage")})]}),d.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-white/10 rounded",children:d.jsx(nn,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:bp.map(Se=>d.jsxs("button",{onClick:()=>{y(Se.code),b(!1)},className:`w-full px-3 py-2.5 rounded-xl text-sm flex items-center justify-between transition-all ${p===Se.code?"bg-violet-500/30 border border-violet-500/50":"bg-white/5 border border-transparent hover:bg-white/10"}`,children:[d.jsx("span",{className:"text-white",children:Se.nativeName}),p===Se.code&&d.jsx(si,{className:"w-4 h-4 text-violet-400"})]},Se.code))})]}):d.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-violet-500/10 to-purple-500/10 hover:from-violet-500/20 hover:to-purple-500/20 border border-violet-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-violet-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(AI,{className:"w-5 h-5 text-violet-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("language")}),d.jsx("div",{className:"text-xs text-violet-400/80",children:(k==null?void 0:k.nativeName)||"English"})]})]}),d.jsx("div",{className:"text-violet-400 text-lg",children:_?"":""})]}),d.jsxs("button",{onClick:()=>{E?a():o(),e()},className:`w-full flex items-center justify-between p-4 rounded-2xl border transition-all group ${E?"bg-red-500/10 hover:bg-red-500/20 border-red-500/20":"bg-blue-500/10 hover:bg-blue-500/20 border-blue-500/20"}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform ${E?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:E?d.jsx(aL,{className:"w-5 h-5"}):d.jsx(oL,{className:"w-5 h-5"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f(E?"logout":"login")}),d.jsx("div",{className:`text-xs ${E?"text-red-400/80":"text-blue-400/80"}`,children:f(E?"exitAccount":"loginWithEmail")})]})]}),d.jsx("div",{className:E?"text-red-400 text-lg":"text-blue-400 text-lg",children:_?"":""})]})]}),d.jsx("button",{onClick:e,className:`absolute top-4 ${_?"left-4":"right-4"} p-2 text-gray-400 hover:text-white transition-colors`,children:d.jsx(nn,{className:"w-5 h-5"})})]})]})},cN="moomhe_thumb_",uN="v2_",dN=t=>{let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36)},b8=t=>{try{const e=cN+uN+dN(t);return localStorage.getItem(e)}catch{return null}},I8=(t,e)=>{try{const n=cN+uN+dN(t);localStorage.setItem(n,e)}catch(n){console.warn("Could not cache thumbnail:",n)}},T8=({src:t,alt:e,className:n})=>{const[r,i]=j.useState(null),[s,o]=j.useState(!0),[a,l]=j.useState(!1);return j.useEffect(()=>{if(!t){o(!1),l(!0);return}const u=b8(t);if(u){i(u),o(!1);return}o(!0),l(!1);const h=new Image;h.crossOrigin="anonymous",h.onload=()=>{try{const f=document.createElement("canvas");f.width=h.width,f.height=h.height,f.getContext("2d").drawImage(h,0,0);const y=f.toDataURL("image/jpeg",.8);I8(t,y),i(y)}catch{i(t)}o(!1)},h.onerror=()=>{i(t),o(!1)},h.src=t},[t]),s?d.jsx("div",{className:`${n} flex items-center justify-center bg-white/5`,children:d.jsx("div",{className:"w-7 h-7 border-2 border-secondary-400/30 border-t-secondary-400 rounded-full animate-spin"})}):a||!r?d.jsx("div",{className:`${n} flex items-center justify-center bg-white/5`,children:d.jsx(RS,{className:"w-8 h-8 text-gray-600"})}):d.jsx("img",{src:r,alt:e,className:n})},x8=({design:t,onClick:e})=>{const[n,r]=j.useState(!1);return d.jsxs("button",{onClick:e,onMouseDown:()=>r(!0),onMouseUp:()=>r(!1),onMouseLeave:()=>r(!1),className:`
        rounded-xl overflow-hidden 
        bg-white/[0.05]
        border transition-all duration-200 group
        ${n?"border-secondary-400/50 scale-[0.98]":"border-white/[0.1] hover:border-secondary-400/40 hover:bg-white/[0.08]"}
      `,children:[d.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[d.jsx(T8,{src:t.urlThumb||t.url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),n&&d.jsx("div",{className:"absolute inset-0 bg-secondary-400/10 pointer-events-none"})]}),d.jsxs("div",{className:"p-3 bg-white/[0.03] border-t border-white/[0.08] flex items-center gap-2",children:[d.jsx("p",{className:"text-sm text-white font-medium truncate flex-1",children:t.title}),d.jsx("div",{className:"w-6 h-6 rounded-md bg-secondary-400/15 flex items-center justify-center flex-shrink-0",children:d.jsx(rL,{className:"w-3.5 h-3.5 text-secondary-300"})})]})]})},hN=(t,e)=>{switch(t.id.toLowerCase().replace(/[\s-]/g,"_")){case"kitchen":case"kitchens":return e("categoryKitchen")||t.label;case"kids_bedroom":case"kids_bedrooms":case"kidsbedroom":return e("categoryKidsBedroom")||t.label;case"bathroom":case"bathrooms":return e("categoryBathroom")||t.label;case"living_room":case"living_rooms":case"livingroom":return e("categoryLivingRoom")||t.label;case"master_bedroom":case"master_bedrooms":case"masterbedroom":return e("categoryMasterBedroom")||t.label;default:return t.label}},E8=({category:t,isActive:e,onClick:n,t:r})=>{const i=hN(t,r);return d.jsx("button",{onClick:n,className:`
        px-5 py-2.5 rounded-full text-sm font-medium whitespace-nowrap 
        transition-all duration-200
        ${e?"bg-secondary-500 text-white border border-secondary-400/50":"bg-white/[0.04] text-gray-400 hover:bg-white/[0.08] hover:text-gray-200 border border-white/[0.08]"}
      `,children:i})},S8=({isOpen:t,onClose:e,onSelectDesign:n})=>{const[r,i]=j.useState(!1),[s,o]=j.useState([]),[a,l]=j.useState(null),[u,h]=j.useState([]),[f,p]=j.useState(!1),[y,_]=j.useState(!1),[A,P]=j.useState(!1),{t:I,isRTL:b}=ru(),x=j.useRef({}),N=j.useRef(null);return j.useEffect(()=>{i(!0)},[]),j.useEffect(()=>{if(A||!t)return;async function U(){p(!0);try{const B=cc(Da(vn,"preDesigns"),uc("createdAt","asc")),T=await ih(B),w=[];T.forEach(E=>{w.push({id:E.id,...E.data()})}),o(w),P(!0),w.length>0&&!a&&l(w[0].id)}catch(B){console.error("Error loading categories:",B)}finally{p(!1)}}U()},[t,A,a]),j.useEffect(()=>{if(!a)return;if(x.current[a]){h(x.current[a]);return}async function U(){_(!0);try{const B=cc(Da(vn,"preDesigns",a,"items"),uc("createdAt","asc")),T=await ih(B),w=[];T.forEach(E=>{w.push({id:E.id,...E.data()})}),x.current[a]=w,h(w)}catch(B){console.error("Error loading designs:",B),h([])}finally{_(!1)}}U()},[a]),r?jp.createPortal(d.jsxs("div",{className:`
        fixed inset-0 z-[100] flex items-center justify-center p-4
        transition-all duration-300 ease-out
        ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
      `,dir:b?"rtl":"ltr",children:[d.jsx("div",{className:`
          absolute inset-0 bg-black/80 backdrop-blur-md
          transition-opacity duration-300
          ${t?"opacity-100":"opacity-0"}
        `,onClick:e}),d.jsxs("div",{className:`
          relative w-[92vw] max-w-6xl h-[88vh] flex flex-col
          rounded-2xl overflow-hidden
          bg-[#141D2E]
          border border-white/[0.1]
          transition-all duration-300 ease-out
          ${t?"scale-100 translate-y-0":"scale-95 translate-y-8"}
        `,children:[d.jsxs("div",{className:"relative px-6 pt-5 pb-4 border-b border-white/[0.08]",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"w-10 h-1 rounded-full bg-white/20"})}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3.5",children:[d.jsx("div",{className:"w-11 h-11 rounded-lg bg-secondary-400/15 border border-secondary-400/25 flex items-center justify-center",children:d.jsx(sL,{className:"w-5 h-5 text-secondary-300"})}),d.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-white",children:I("readyDesigns")})]}),d.jsx("button",{onClick:e,className:"w-10 h-10 rounded-lg bg-white/[0.05] border border-white/[0.08] flex items-center justify-center text-gray-400 hover:text-white hover:bg-white/[0.1] transition-all duration-200",children:d.jsx(nn,{className:"w-5 h-5"})})]})]}),d.jsx("div",{className:"relative px-5 py-4",children:d.jsx("div",{className:"flex gap-2.5 overflow-x-auto scrollbar-hide pb-1",children:f?d.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 text-gray-400",children:[d.jsx("div",{className:"w-4 h-4 border-2 border-secondary-400/30 border-t-secondary-400 rounded-full animate-spin"}),d.jsx("span",{className:"text-sm",children:I("loading")||"Loading..."})]}):s.length>0?s.map(U=>d.jsx(E8,{category:U,isActive:a===U.id,onClick:()=>{l(U.id),N.current&&(N.current.scrollTop=0)},t:I},U.id)):d.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:I("noCategories")||"No categories"})})}),d.jsx("div",{ref:N,className:"flex-1 overflow-y-auto px-6 pb-6 scrollbar-custom",children:y?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[d.jsx("div",{className:"w-16 h-16 rounded-xl bg-secondary-400/10 border border-secondary-400/20 flex items-center justify-center mb-5",children:d.jsx("div",{className:"w-8 h-8 border-[2.5px] border-secondary-400/30 border-t-secondary-400 rounded-full animate-spin"})}),d.jsx("p",{className:"text-gray-400 font-medium",children:I("loadingDesigns")||"Loading designs..."})]}):u.length>0?d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:u.map(U=>d.jsx(x8,{design:U,onClick:()=>{if(n){const B=s.find(T=>T.id===a);n({url:U.url,thumbnail:U.urlThumb||U.url,title:U.title,id:U.id,categoryId:a,categoryLabel:B?hN(B,I):a})}}},U.id))}):d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[d.jsx("div",{className:"w-20 h-20 rounded-xl bg-white/[0.05] border border-white/[0.08] flex items-center justify-center mb-5",children:d.jsx(RS,{className:"w-9 h-9 text-gray-600"})}),d.jsx("p",{className:"text-white font-semibold text-lg mb-1.5",children:I("comingSoon")||"Coming soon..."}),d.jsx("p",{className:"text-gray-500 text-sm",children:I("newDesignsWillBeAdded")||"New designs will be added here"})]})})]})]}),document.body):null};function A8(){var db;const{t,language:e,setLanguage:n,isRTL:r,countryCode:i}=ru(),[s,o]=j.useState(!1),[a,l]=j.useState(!1),[u,h]=j.useState(0),[f,p]=j.useState(null),[y,_]=j.useState(!1),[A,P]=j.useState(()=>localStorage.getItem("hasSeenFirstUploadTip")==="true"),[I,b]=j.useState(window.innerWidth<1024),[x,N]=j.useState(!1),U=j.useRef(null),B=j.useRef(null),T=j.useRef(null),w=j.useRef(null);j.useEffect(()=>{const S=()=>b(window.innerWidth<1024);return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const E=j.useRef(null),C=j.useRef(null),R=j.useRef(null),M=j.useRef(null);j.useRef(null),j.useRef(null),j.useState("  ");const[k,Se]=j.useState(null),[Je,Tr]=j.useState("/assets/design_img.jpg"),[ce,Q]=j.useState(!1),[ie,oe]=j.useState(!1),[Ee,we]=j.useState(!1),[$e,un]=j.useState(!1),[Vn,dn]=j.useState(!1),[ct,jn]=j.useState(!1),[Sg,Do]=j.useState(!1),[xr,Kr]=j.useState(!1),[Yr,Qr]=j.useState(!1),[_i,pt]=j.useState(!1),[ar,bi]=j.useState([]),[se,qa]=j.useState(null),[Fn,Ka]=j.useState(!1),[Ya,Jr]=j.useState(!1),[iu,Lo]=j.useState(!1),[zt,gt]=j.useState(null),[Pt,bt]=j.useState(""),[Ag,Qa]=j.useState(16/9),[Ii,Bh]=j.useState("reds"),[Mo,Xr]=j.useState(null),[Zr,us]=j.useState(null),[Ja,ds]=j.useState(1),[Ti,Un]=j.useState(!0),[xi,Xa]=j.useState(!1),[Ei,hs]=j.useState(!1),[Za,el]=j.useState(!1),[hn,ei]=j.useState("signup"),[Xe,su]=j.useState(""),[fs,ms]=j.useState(""),[yt,kg]=j.useState(0),[je,Cg]=j.useState(0),[lr,Oo]=j.useState(0),zh={0:t("subscriptionFree"),1:t("subscriptionStarter"),2:t("subscriptionValue"),3:t("subscriptionPro")},[Er,Vo]=j.useState(""),[Sr,ou]=j.useState(!1),[Rg,tl]=j.useState(!1),[nl,$h]=j.useState(!1),[au,Pg]=j.useState(!1),[rl,jo]=j.useState(!1),[lu,ps]=j.useState(!1),[ti,il]=j.useState(null),[Ng,sl]=j.useState(!1),[cu,Si]=j.useState(!1),[uu,ol]=j.useState(!1);j.useState(0);const[Wh,du]=j.useState(!1),[Dg,Lg]=j.useState(0),[En,Ai]=j.useState(null),[gs,$t]=j.useState(!1),[cr,ki]=j.useState(!1),[Fo,al]=j.useState(!1),[Me,ys]=j.useState(!1),[ws,Wt]=j.useState(!1),[ll,hu]=j.useState(""),[vs,Gh]=j.useState(""),[cl,Hh]=j.useState(""),[_s,Ar]=j.useState(!1),[qh,ul]=j.useState(!1),[fu,Bn]=j.useState(""),[Fe,dl]=j.useState(!1),[Ue,Qt]=j.useState(null),[Kh,hl]=j.useState(!1),[fl,bs]=j.useState(!1);j.useRef(null);const ml=j.useRef(null),Ci=j.useRef(null);j.useEffect(()=>{ti&&se&&!se.isAnonymous&&(jo(!0),S0(),il(null))},[se,ti]);const Ri=S=>{const V=S.includes("starter")?"starter":S.includes("value")?"value":S.includes("pro")?"pro":"unknown";tN(V),Is.current=!0,window.open(S,"_blank","noopener,noreferrer"),jo(!1),(!se||se.isAnonymous)&&sl(!0)},[Yh,Uo]=j.useState(!1),[We,Qh]=j.useState(null),Jh=j.useRef(null),mu=j.useRef(null),kr=j.useRef(null);j.useRef(null);const pu=j.useRef(!0),Is=j.useRef(!1);j.useEffect(()=>{aN()},[]),j.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{o(!0),E0()},1e3)},[]);const pl=()=>{o(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),ZP()},Cr=()=>{if(u<3){const S=u+1;h(S),XP(S)}else pl()},Xh=()=>{eN(u),pl()},gl=()=>{S0(),jo(!0)},Bo=[{title:t("onboardingUploadTitle"),description:t("onboardingUploadDesc"),targetRef:I?B:U},{title:t("onboardingStyleTitle"),description:t("onboardingStyleDesc"),targetRef:I?C:E},{title:t("onboardingCreateTitle"),description:t("onboardingCreateDesc"),targetRef:I?M:R},{title:t("onboardingItemTipTitle"),description:t("onboardingItemTipDesc"),targetRef:I?w:T}];j.useEffect(()=>{const S=Uj(Fs,async V=>{if(V){console.log("User UID:",V.uid),qa(V),Ka(!0),await Jo(V),Jr(!0);try{const Ie=await jl(V.uid,1,7);if(bi(Ie.history),Un(Ie.hasMore),Ie.history.length>0){const _e=Ie.history[0],ne=_e.storageUrl||_e.imageUrl;ne&&(Tr(ne),gt(_e.id),_e.originalImageUrl&&Ai(_e.originalImageUrl))}}finally{Jr(!1)}const z=Br(vn,"users",V.uid),X=sh(z,Ie=>{if(Ie.exists()){const _e=Ie.data(),ne=_e.subscription!==void 0?_e.subscription:0;Cg(Ge=>pu.current?(pu.current=!1,ne):(Ge===0&&ne>0&&Is.current&&(ol(!0),nN(),Is.current=!1),ne)),kg(_e.credits!==void 0?_e.credits:0)}}),de=new Date,Ae=`${String(de.getMonth()+1).padStart(2,"0")}-${de.getFullYear()}`,ve=Br(vn,"genCount",Ae,"users",V.uid),Oe=sh(ve,Ie=>{Ie.exists()?Oo(Ie.data().count||0):Oo(0)});return()=>{X(),Oe()}}else try{const z=await NP();qa(z),Ka(!0),await Jo(z),VP()}catch(z){console.error("Failed to sign in anonymously:",z)}});return()=>S()},[]);const Zh=[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("lighting"),action:()=>un(!$e),icon:ay},{name:t("furniture"),action:()=>dn(!Vn),icon:cy},{name:t("doorsWindows"),action:()=>Kr(!xr),icon:pn},{name:t("bathroomShort"),action:()=>Qr(!Yr),icon:Lt}];(()=>({[t("categoryInteriorExterior")]:Zh,[t("categoryGardensBalconies")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("addPlants"),action:()=>Jt("Add beautiful plants and flowers to this garden"),icon:cL},{name:t("enhanceLighting"),action:()=>Jt("Enhance the outdoor lighting"),icon:xl}],[t("categoryVehicles")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("enhanceLighting"),action:()=>Jt("Enhance the lighting and reflections on this vehicle"),icon:xl},{name:t("addAccessories"),action:()=>Jt("Add accessories and modifications to this vehicle"),icon:Tl}],[t("categoryTattoos")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("enhanceLighting"),action:()=>Jt("Enhance the lighting to show the tattoo details"),icon:xl},{name:t("addDetails"),action:()=>Jt("Add more details and shading to this tattoo"),icon:Tl}],[t("categoryMakeupBeauty")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("enhanceLighting"),action:()=>Jt("Enhance the lighting for better makeup visibility"),icon:xl},{name:t("addMakeup"),action:()=>Jt("Add more makeup and beauty enhancements"),icon:Dr}],[t("categoryAdvertisingProducts")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("enhanceLighting"),action:()=>Jt("Enhance the product lighting and presentation"),icon:xl},{name:t("addDetails"),action:()=>Jt("Add product details and features"),icon:Tl}],[t("categoryProfileImage")]:[{name:t("readyDesigns"),action:()=>Wt(!0),icon:Li},{name:t("repairsDamages"),action:()=>jn(!ct),icon:$n},{name:t("changeColor"),action:()=>oe(!ie),icon:Ni},{name:t("angle"),action:()=>we(!Ee),icon:Di},{name:t("enhanceLighting"),action:()=>Jt("Enhance the portrait lighting"),icon:xl},{name:t("addBackground"),action:()=>Jt("Add a professional background"),icon:Tl}]}))();const yl=async S=>{const V=S.target.files[0];if(V){const z=V.type||V.name.split(".").pop().toLowerCase();FP(z);const X=V.type==="image/heic"||V.type==="image/heif"||V.name.toLowerCase().endsWith(".heic")||V.name.toLowerCase().endsWith(".heif");let de=V;if(X){console.log("HEIC file detected, converting to JPEG...",{name:V.name,type:V.type,size:V.size});try{if(V.type==="image/jpeg"||V.type==="image/png"||V.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),de=V;else{const{heicTo:ve}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]);de=await ve({blob:V,type:"image/jpeg",quality:.9}),console.log("HEIC converted to JPEG successfully:",{type:de.type,size:de.size})}}catch(ve){console.error("HEIC conversion failed:",ve),console.error("Error details:",ve.message,ve.stack),alert(`Failed to convert HEIC image: ${ve.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const Ae=new FileReader;Ae.onload=async ve=>{const Oe=ve.target.result;let Ie=Oe;try{const _e=await To(Oe,1536,.8),ne=new FileReader;Ie=await new Promise(Ge=>{ne.onload=()=>Ge(ne.result),ne.readAsDataURL(_e)}),console.log("Image compressed for display")}catch(_e){console.warn("Failed to compress image for display, using original:",_e)}if(Se(Ie),Tr(Ie),Ai(null),$t(!1),Qa(16/9),gt(null),A||setTimeout(()=>{_(!0)},1e3),Fn&&se){Jr(!0);try{const _e=await MP(se.uid,V,`Uploaded: ${V.name}`),ne=_e.id;console.log("Upload result ID:",ne),console.log("Upload result:",_e);const Ge=await jl(se.uid,1,7);bi(Ge.history),ds(1),Un(Ge.hasMore),gt(ne),console.log("Set current history ID to newly uploaded image:",ne),console.log("Current history after reload:",Ge.history.map(Xt=>({id:Xt.id,prompt:Xt.prompt})))}catch(_e){console.error("Failed to save upload to Firebase:",_e)}finally{Jr(!1)}}},Ae.readAsDataURL(de)}},gu=()=>{Jh.current.click()},zo=async()=>{BP();try{const z=await(await fetch(Je)).blob(),X=window.URL.createObjectURL(z),de=document.createElement("a");de.href=X,de.download=`moomhe-design-${Date.now()}.png`,document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(X)}catch(S){console.error("Download failed:",S);try{window.open(Je,"_blank")}catch(V){console.error("Fallback download also failed:",V),alert("  .  .")}}},tf=()=>{dl(!0),Qt(null),xm("google_lens_start")},yu=S=>{var de,Ae,ve,Oe;if(!Fe)return;const V=S.currentTarget.getBoundingClientRect(),z=(S.clientX||((Ae=(de=S.touches)==null?void 0:de[0])==null?void 0:Ae.clientX))-V.left,X=(S.clientY||((Oe=(ve=S.touches)==null?void 0:ve[0])==null?void 0:Oe.clientY))-V.top;hl(!0),Qt({startX:z,startY:X,endX:z,endY:X})},Ts=S=>{var de,Ae,ve,Oe;if(!Kh||!Fe)return;const V=S.currentTarget.getBoundingClientRect(),z=Math.max(0,Math.min((S.clientX||((Ae=(de=S.touches)==null?void 0:de[0])==null?void 0:Ae.clientX))-V.left,V.width)),X=Math.max(0,Math.min((S.clientY||((Oe=(ve=S.touches)==null?void 0:ve[0])==null?void 0:Oe.clientY))-V.top,V.height));Qt(Ie=>Ie?{...Ie,endX:z,endY:X}:null)},wl=async()=>{if(!Kh||!Ue)return;hl(!1);const S=Math.abs(Ue.endX-Ue.startX),V=Math.abs(Ue.endY-Ue.startY);if(S<20||V<20){Qt(null);return}await nf()},nf=async()=>{if(!(!Ue||!ml.current||!Ci.current)){bs(!0),xm("google_lens_search");try{const S=ml.current,z=Ci.current.getBoundingClientRect(),X=S.getBoundingClientRect(),de=X.width,Ae=X.height,ve=X.left-z.left,Oe=X.top-z.top,Ie=S.naturalWidth/de,_e=S.naturalHeight/Ae,ne=Math.min(Ue.startX,Ue.endX),Ge=Math.min(Ue.startY,Ue.endY),Xt=Math.abs(Ue.endX-Ue.startX),Cs=Math.abs(Ue.endY-Ue.startY),mn=ne-ve,Sn=Ge-Oe,Rr=Math.max(0,mn*Ie),Iu=Math.max(0,Sn*_e),ur=Math.min(Xt*Ie,S.naturalWidth-Rr),Pi=Math.min(Cs*_e,S.naturalHeight-Iu);if(ur<=0||Pi<=0){alert("   "),bs(!1);return}const yN=await fetch(Je).then(bN=>bN.blob()),wN=await createImageBitmap(yN),bl=document.createElement("canvas");bl.width=Math.max(1,Math.round(ur)),bl.height=Math.max(1,Math.round(Pi)),bl.getContext("2d").drawImage(wN,Math.round(Rr),Math.round(Iu),Math.round(ur),Math.round(Pi),0,0,bl.width,bl.height);const{downloadURL:vN}=await T0((se==null?void 0:se.uid)||"anonymous",bl.toDataURL("image/jpeg",.9)),_N=`https://lens.google.com/uploadbyurl?url=${encodeURIComponent(vN)}`;window.open(_N,"_blank","noopener,noreferrer"),dl(!1),Qt(null)}catch(S){console.error("Google Lens search failed:",S),alert(" .  .")}finally{bs(!1)}}},xs=()=>{dl(!1),Qt(null),hl(!1)},vl=async()=>{zP("whatsapp");try{let S=Je;const V=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(S.startsWith("data:"))try{Q(!0);const{downloadURL:z}=await T0((se==null?void 0:se.uid)||"anonymous",S);S=z,console.log(" Image uploaded to temporary storage:",z)}catch(z){console.error("Error uploading image to Firebase:",z),alert("  .  .");return}finally{Q(!1)}if(V){const z=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(S)}`;window.open(z,"_blank")}else{const z=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(S)}`;window.open(z,"_blank")}}catch(S){console.error("WhatsApp share failed:",S),alert("  .  .")}},rf=async()=>{if(!vs.trim()&&!ll.trim()){Bn("     ");return}if(vs.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(vs)){Bn("    ");return}if(!cl.trim()){Bn("  ");return}Bn(""),Ar(!0),sN();try{const S=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,V={id:S,uid:(se==null?void 0:se.uid)||"anonymous",email:vs.trim()||null,phone:ll.trim()||null,message:cl.trim(),createdAt:new Date,userEmail:(se==null?void 0:se.email)||null,isAnonymous:(se==null?void 0:se.isAnonymous)||!0};let z=null;try{const X=await fetch("https://formspree.io/f/xkgdpbjg",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:vs.trim()||null,phone:ll.trim()||null,message:cl.trim()})});if(!X.ok){const de=await X.text();z=`HTTP ${X.status}: ${de}`,console.error("Formspree error:",z)}}catch(X){z=`Network error: ${X.message}`,console.error("Formspree network error:",X)}await Oh(Br(vn,"supportMsgs",S),{...V,formspreeError:z}),hu(""),Gh(""),Hh(""),ys(!1),ul(!0),oN(),setTimeout(()=>ul(!1),5e3)}catch(S){console.error("Error submitting contact form:",S),Bn("  .  .")}finally{Ar(!1)}},Es=S=>{rN();const V=S.storageUrl||S.imageUrl;Tr(V),S.originalImageUrl?(Ai(S.originalImageUrl),$t(!1)):(Ai(null),$t(!1)),Qa(16/9),gt(S.id)},sf=()=>{ce||(Lo(!0),En&&$t(!0),al(!1),ki(!0))},Ss=()=>{Lo(!1),$t(!1),al(!1),ki(!1),dl(!1),Qt(null),hl(!1)},ni=()=>{En&&(Tr(En),Ai(null)),Ss()},wu=()=>{ki(!0)},of=S=>{const V=S.target,z=V.naturalWidth/V.naturalHeight;Qa(z)},af=async S=>{const V=S.target.files[0];if(V){UP();const z=V.type==="image/heic"||V.type==="image/heif"||V.name.toLowerCase().endsWith(".heic")||V.name.toLowerCase().endsWith(".heif");let X=V;if(z){console.log("HEIC object image detected, converting to JPEG...",{name:V.name,type:V.type,size:V.size});try{if(V.type==="image/jpeg"||V.type==="image/png"||V.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),X=V;else{const{heicTo:Ae}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]);X=await Ae({blob:V,type:"image/jpeg",quality:.9}),console.log("HEIC object image converted to JPEG successfully")}}catch(Ae){console.error("HEIC conversion failed:",Ae),alert(`Failed to convert HEIC image: ${Ae.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const de=new FileReader;de.onload=Ae=>{const ve=new Image;ve.onload=()=>{const _e=document.createElement("canvas");let ne=ve.width,Ge=ve.height;const Xt=1200;(ne>Xt||Ge>Xt)&&(ne>Ge?(Ge=Math.round(Ge*Xt/ne),ne=Xt):(ne=Math.round(ne*Xt/Ge),Ge=Xt)),_e.width=ne,_e.height=Ge,_e.getContext("2d").drawImage(ve,0,0,ne,Ge);const mn=_e.toDataURL("image/jpeg",.9);Xr(mn),fetch(mn).then(Sn=>Sn.blob()).then(Sn=>{const Rr=new File([Sn],V.name,{type:"image/jpeg"});us(Rr)})},ve.src=Ae.target.result,df("  !      .");const Oe="    ",Ie=Pt.trim();Ie?Ie.includes(Oe)||bt(`${Ie} ${Oe}`):bt(Oe)},de.readAsDataURL(X)}},vu=()=>{kr.current.click()},$o=()=>{Xr(null),us(null),kr.current&&(kr.current.value="")},fn=async S=>{if(S.preventDefault(),!(!Xe||!Er)){if(hn==="signup"&&Er!==fs){alert("  .  .");return}ou(!0);try{if(hn==="signup")if(se&&se.isAnonymous){const{linkWithCredential:z,EmailAuthProvider:X}=await Nr(()=>import("./index.esm-05958d32.js"),[]),de=X.credential(Xe,Er);try{const Ae=await z(se,de);await Jo(Ae.user),x0(!0),bm("email_link"),alert("  !    .")}catch(Ae){if(x0(!1),Ae.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:ve}=await Nr(()=>import("./index.esm-05958d32.js"),[]),Oe=await ve(Fs,Xe,Er);await As(se.uid,Oe.user.uid),await Jo(Oe.user),bm("email_migrate"),alert("  !      .")}else throw Ae}}else{const{createUserWithEmailAndPassword:z}=await Nr(()=>import("./index.esm-05958d32.js"),[]),X=await z(Fs,Xe,Er);await Jo(X.user),bm("email"),alert("  !")}else{const{signInWithEmailAndPassword:V}=await Nr(()=>import("./index.esm-05958d32.js"),[]),z=await V(Fs,Xe,Er);await Jo(z.user),OP("email"),alert(" !")}hs(!1),su(""),ms(""),Vo(""),ei("signup")}catch(V){console.error("Authentication error:",V),V.code==="auth/email-already-in-use"?(alert("   .   ."),ei("login")):V.code==="auth/user-not-found"?(alert("  .    ."),ei("signup")):V.code==="auth/wrong-password"?alert(" .  ."):V.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{ou(!1)}}},lf=S=>{S.preventDefault(),fn(S)},cf=async()=>{if(!Xe){alert("    .");return}tl(!0);try{const{sendPasswordResetEmail:S}=await Nr(()=>import("./index.esm-05958d32.js"),[]);await S(Fs,Xe),alert("     .")}catch(S){console.error("Password reset error:",S),S.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{tl(!1)}},As=async(S,V)=>{try{const{collection:z,query:X,where:de,getDocs:Ae,doc:ve,setDoc:Oe,deleteDoc:Ie}=await Nr(()=>import("./index.esm-0ae3d0f3.js"),[]),{db:_e}=await Nr(()=>Promise.resolve().then(()=>j9),void 0),ne=z(_e,"userHistory"),Ge=X(ne,de("userId","==",S)),Xt=await Ae(Ge),Cs=[];if(Xt.forEach(mn=>{const Sn=mn.data();Sn.userId=V;const Rr=ve(z(_e,"userHistory"));Cs.push(Oe(Rr,Sn)),Cs.push(Ie(mn.ref))}),await Promise.all(Cs),console.log(`Migrated ${Xt.size} history entries from ${S} to ${V}`),Fn){const mn=await jl(V,1,7);bi(mn.history),ds(1),Un(mn.hasMore)}}catch(z){console.error("Error migrating user data:",z)}},c=async()=>{try{jP();const{signOut:S}=await Nr(()=>import("./index.esm-05958d32.js"),[]);await S(Fs),bi([]),qa(null),Ka(!1),el(!1),window.location.reload()}catch(S){console.error("Logout error:",S),alert(" .  .")}},m=async S=>{try{const V=await se.getIdToken(),z=await I0(),de=await(await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/redeemCoupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({couponCode:S,authToken:V,deviceId:z})})).json();return de.success&&xm("coupon_redeemed",S),de}catch(V){return console.error("Coupon redemption error:",V),{success:!1,error:"  .  ."}}},g=async()=>{if(!Fn||!se||xi||!Ti){console.log("Load more history blocked:",{isAuthenticated:Fn,currentUser:!!se,isLoadingMoreHistory:xi,hasMoreHistory:Ti});return}console.log("Loading more history, current page:",Ja),Xa(!0);try{const S=Ja+1;iN(S);const V=await jl(se.uid,S,7);console.log("Load more result:",{nextPage:S,historyCount:V.history.length,hasMore:V.hasMore}),V.history.length>0?(bi(z=>[...z,...V.history]),ds(S),Un(V.hasMore)):Un(!1)}catch(S){console.error("Failed to load more history:",S)}finally{Xa(!1)}};j.useEffect(()=>{const S=V=>{nl&&mu.current&&!mu.current.contains(V.target)&&$h(!1),au&&!V.target.closest(".suggestions-modal")&&Pg(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[nl,au]);const v=S=>{const V=String(S.getDate()).padStart(2,"0"),z=String(S.getMonth()+1).padStart(2,"0"),X=String(S.getFullYear()).slice(-2);return`${V}/${z}/${X}`},D=S=>{const z=Math.floor((new Date-S)/1e3);return z<60?" ":z<3600?` ${Math.floor(z/60)} `:z<86400?` ${Math.floor(z/3600)} `:z<172800?"":z<604800?` ${Math.floor(z/86400)} `:z<2592e3?` ${Math.floor(z/604800)} `:z<31536e3?` ${Math.floor(z/2592e3)} `:` ${Math.floor(z/31536e3)} `},F=S=>{const V=S.createdAt;if(!V)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(V))return V;try{let z;if(V&&typeof V=="object"&&V.toDate?z=V.toDate():V&&typeof V=="object"&&V.seconds?z=new Date(V.seconds*1e3):z=new Date(V),!isNaN(z.getTime()))return D(z)}catch(z){console.warn("Failed to parse timestamp:",V,z)}return V||"  "},q=async()=>{if(Pt.trim()){if(Fn&&se&&!await $f.canMakeRequest(se.uid)){Tm(je,lr,yt),Si(!0);return}Q(!0);try{const S=Pt;let V=S;const z=/^[A-Za-z]/.test(S.trim());Zr&&!z&&(V=`  , ${S}`),console.log(" Final prompt for AI:",V),await bu(V),bt(""),Xr(null),us(null),kr.current&&(kr.current.value="")}catch(S){console.error("Custom prompt failed:",S),S.message&&(S.message.includes("limit reached")||S.message.includes("credits"))?Si(!0):alert("  .  .")}finally{Q(!1)}}},Ce={reds:"#C1121C",oranges:"#FF7514",yellows:"#E5BE01",greens:"#287233",blues:"#1E2460",purples:"#6D3F5B",grays:"#78858B",whitesAndBlacks:"#F4F4F4"},St={reds:t("colorReds"),oranges:t("colorOranges"),yellows:t("colorYellows"),greens:t("colorGreens"),blues:t("colorBlues"),purples:t("colorPurples"),grays:t("colorGrays"),whitesAndBlacks:t("colorWhitesAndBlacks")},be={reds:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],oranges:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],yellows:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],greens:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],blues:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],purples:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],grays:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}],whitesAndBlacks:[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},Nt=S=>{HP(S.value,Ii),Qh(S),Uo(!0)},Dt=S=>{Uo(!1),oe(!1),Qh(null),console.log(" Color Selection - Prompt being added to input and executing:",S);const V=Pt.trim();let z;V?V.endsWith(" ")?z=`${V}${S}`:z=`${V}, ${S}`:z=S,bt(z),bu(z),bt("")},ks=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],zn=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}];t("repairEverything"),t("fixAndRepairEverything"),t("messUpEverything"),t("destroyAndCauseDamage");const _l=[{name:"  ",value:"mediterranean-modern",thumbnail:"/assets/styles/mediterranean.png",prompt:"Transform this room into a Modern Mediterranean interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use natural materials like Jerusalem stone walls, terracotta tiles, and light oak wood flooring. Add arched doorways and windows. Use a warm color palette with white, cream, sand, and olive green accents. Include linen curtains, woven textures, ceramic vases with olive branches, and modern furniture with clean lines. Maximize natural light with large windows. Add indoor plants like olive trees and succulents. Create an airy, relaxed, and sophisticated atmosphere inspired by Israeli coastal living."},{name:" ",value:"warm-minimalism",thumbnail:"/assets/styles/warm-minimalism.jpg",prompt:"Transform this room into Warm Minimalism interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Keep the space clean and uncluttered but add warmth through natural materials. Use oak wood floors, cream-colored walls, and natural stone accents. Include low-profile modern furniture in warm neutrals like camel, beige, and soft terracotta. Add texture through wool rugs, linen cushions, and organic cotton throws. Use rounded furniture edges and soft curves. Include subtle decorative elements like a single large plant, minimalist art, and sculptural ceramic pieces. Emphasize natural light with sheer curtains. Create a serene, cozy, and sophisticated atmosphere."},{name:"",value:"biophilic",thumbnail:"/assets/styles/biophilic.jpg",prompt:"Transform this room into Biophilic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a strong connection to nature inside the home. Add abundant indoor plants including large statement plants like fiddle leaf figs, monstera, and hanging pothos. Use natural materials throughout: raw wood furniture, stone surfaces, bamboo accents, and cork flooring. Include a living green wall or plant shelf. Use earthy colors: forest green, terracotta, sand, and natural wood tones. Maximize natural light through existing windows. Include water features or natural elements like driftwood and pebbles. Create a fresh, calming, and nature-immersive atmosphere."},{name:" ",value:"modern-luxury",thumbnail:"/assets/styles/modern-luxury.jpg",prompt:"Transform this room into Modern Luxury interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an elegant and sophisticated high-end space. Use premium materials: Italian marble floors or feature walls, rich wood veneers, brushed brass or gold metal accents. Include designer furniture with sculptural forms and plush velvet upholstery in jewel tones like emerald green, sapphire blue, or deep burgundy. Add statement lighting fixtures like a modern chandelier or sculptural pendant lights. Use a refined color palette with charcoal, cream, and metallic accents. Include floor-to-ceiling curtains, large abstract art, and designer accessories. Create a glamorous, refined, and opulent atmosphere."},{name:"",value:"japandi",thumbnail:"/assets/styles/japandi.jpg",prompt:"Transform this room into Japandi interior design style - a fusion of Japanese and Scandinavian aesthetics. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a muted, neutral color palette with soft whites, warm grays, and natural wood tones. Include low-profile furniture with clean lines and natural materials like light ash or oak wood. Add Japanese elements: shoji-style screens, floor cushions, bonsai plants, and ceramic pottery. Incorporate Scandinavian hygge with cozy textiles, wool throws, and sheepskin rugs. Keep the space minimal and functional with hidden storage. Use paper lanterns or simple pendant lighting. Add indoor plants like bamboo or peace lilies. Create a zen-like, harmonious, and tranquil atmosphere."},{name:"",value:"scandinavian",thumbnail:"/assets/styles/scandinavian.jpg",prompt:"Transform this room into Scandinavian interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a bright, airy color palette dominated by white and light gray walls. Add light wood floors in birch or pine. Include minimalist furniture with clean lines and functional design in natural wood and white finishes. Add cozy textiles: chunky knit blankets, sheepskin throws, and soft wool rugs. Include statement lighting with modern pendant lamps. Use indoor plants like eucalyptus and ferns for natural touches. Add black accents through frames, fixtures, and accessories for contrast. Keep decor minimal but meaningful. Create a bright, cozy, and hygge-inspired atmosphere with excellent natural lighting."},{name:" ",value:"boho-chic",thumbnail:"/assets/styles/boho.jpg",prompt:"Transform this room into Bohemian Chic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an eclectic, artistic, and free-spirited space. Layer rich textures with Moroccan rugs, macram wall hangings, and woven baskets. Use warm, earthy colors mixed with vibrant accents: terracotta, mustard yellow, teal, and burnt orange. Include rattan and wicker furniture, vintage pieces, and floor cushions. Add abundant plants in decorative pots, hanging planters, and trailing vines. Include global-inspired decor: Turkish lanterns, Indian textiles, and African baskets. Add fairy lights or warm Edison bulb lighting. Create a relaxed, artistic, and globally-inspired atmosphere full of personality and warmth."},{name:"",value:"industrial",thumbnail:"/assets/styles/industrial.jpg",prompt:"Transform this room into Industrial interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Expose raw architectural elements: brick walls, concrete ceilings, metal pipes, and ductwork. Use a color palette of charcoal gray, black, rust, and raw concrete tones. Include metal and iron furniture: steel-framed shelving, iron coffee tables, and metal bar stools. Add distressed leather sofas and vintage factory-style lighting with exposed bulbs. Include reclaimed wood elements for warmth: wooden dining tables, floating shelves, or accent walls. Add large factory-style mirrors. Include industrial accessories: metal clocks, wire baskets, and vintage signs. Create a raw, edgy, urban loft atmosphere with character and history."},{name:" ",value:"earthy-natural",thumbnail:"/assets/styles/earthy-natural.jpg",prompt:"Transform this room into Earthy Natural interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a grounded, organic, and serene space connected to nature. Use a warm earth-tone color palette: terracotta, ochre, olive green, warm browns, and sandy beige. Include natural materials: raw wood furniture, stone surfaces, clay pottery, and jute or sisal rugs. Add textured walls with lime wash or clay plaster in warm tones. Include linen and cotton textiles in natural undyed colors. Add organic shapes and handcrafted elements: ceramic vases, woven baskets, and artisanal objects. Include large indoor plants and dried flowers or pampas grass. Create a warm, grounded, and nature-inspired sanctuary."},{name:"",value:"jerusalem",thumbnail:"/assets/styles/jerusalem.jpg",prompt:"Transform this room into Contemporary Israeli interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a bright, modern space that reflects Mediterranean living. Use Jerusalem stone or natural stone feature walls, terrazzo floors, and light wood accents. Use a neutral palette with white walls, warm beige, and pops of earthy colors like olive and terracotta. Add modern Israeli design furniture with clean lines and functional aesthetics. Include local crafts: ceramic pieces, woven textiles, and modern Israeli art. Add olive branches, succulents, and Mediterranean plants. Create an airy, sophisticated, and culturally-rooted atmosphere that celebrates Israeli design heritage."},{name:"",value:"minimalist",thumbnail:"/assets/styles/minimalist.jpg",prompt:"Transform this room into Minimalist interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a clean, uncluttered, and intentional space. Use an all-white or monochromatic color palette with subtle texture variations. Include streamlined furniture with geometric forms and hidden storage solutions. Keep surfaces completely clear with minimal decorative objects - only one or two statement pieces. Use high-quality materials: polished concrete floors, seamless white walls, and sleek fixtures. Add architectural interest through recessed lighting, clean lines, and negative space. Include one bold statement element like a large plant or single artwork. Create a serene, peaceful, and focused atmosphere where less is more."},{name:" ",value:"modern-classic",thumbnail:"/assets/styles/modern-classic.jpg",prompt:"Transform this room into Modern Classic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Blend timeless elegance with contemporary comfort. Use a sophisticated color palette of cream, soft gray, navy blue, and gold accents. Include classic architectural details: crown moldings, wainscoting, and paneled walls with modern interpretation. Add furniture that combines classic silhouettes with updated fabrics: tufted sofas, wingback chairs in modern fabrics, and elegant side tables. Include crystal or modern chandeliers and wall sconces. Add marble surfaces, silk or velvet textiles, and gilded mirrors. Include fresh flowers, classic art, and refined accessories. Create an elegant, sophisticated, and timeless atmosphere that feels both grand and welcoming."}],_u=S=>{un(!1),qP(S.value),console.log(" Lighting Selection - Prompt being added to input:",S.prompt),console.log(" Selected lighting:",S.name,S.value),Jt(S.prompt)},fN=S=>{dn(!1),KP(S.value),console.log(" Furniture Selection - Prompt being added to input:",S.prompt),console.log(" Selected furniture:",S.name,S.value),Jt(S.prompt)},mN=S=>{Do(!1),GP(S.value),console.log(" Style Selection - Prompt being added to input and executing:",S.prompt),console.log(" Selected style:",S.name,S.value);const V=Pt.trim();let z;V?V.endsWith(" ")?z=`${V}${S.prompt}`:z=`${V}, ${S.prompt}`:z=S.prompt,bt(z),bu(z),bt("")},uf=(S,V="other")=>{xr?QP(S):Yr?JP(S):ct&&YP(S),Kr(!1),Qr(!1),jn(!1);const z=Pt.trim();let X;z?z.endsWith(" ")?X=`${z}${S}`:X=`${z}, ${S}`:X=S,bt(X),bu(X),bt("")},df=S=>{p(S),setTimeout(()=>p(null),3e3)},Jt=S=>{const V=Pt.trim();let z;V?V.endsWith(" ")?z=`${V}${S}`:z=`${V} ${S}`:z=S,bt(z),df(t("promptUpdated"))},bu=async(S,V=null)=>{var Oe,Ie,_e;if(!Je)return;const z=V&&V.inlineData,X=z?null:V||Zr,de=Date.now();Q(!0);const ve=(ne=>ne.includes("")||ne.includes("")||ne.includes("")||ne.includes("")?"style":ne.includes("")||ne.includes("")?"color":ne.includes("")||ne.includes("")?"lighting":ne.includes("")||ne.includes("")||ne.includes("")||ne.includes("")?"furniture":ne.includes("")||ne.includes("")||ne.includes("")?"angle":ne.includes("")||ne.includes("")?"repairs":ne.includes("")||ne.includes("")?"doors_windows":ne.includes("")||ne.includes("")||ne.includes("")?"bathroom":"custom")(S);$P(ve,!!(z||X)),Ai(Je),$t(!1);try{if(console.log(" AI Image Alteration - Prompt being sent:",S),console.log(" Main image URL:",Je),console.log(" Object image available:",!!(z||X)),Fn&&se&&!await $f.canMakeRequest(se.uid)){Tm(je,lr,yt),Si(!0),Q(!1);return}let ne=Je;if(Je.startsWith("/assets/")||Je.startsWith("./assets/"))try{const Rr=await(await fetch(Je)).blob();ne=await new Promise(ur=>{const Pi=new FileReader;Pi.onload=()=>ur(Pi.result),Pi.readAsDataURL(Rr)})}catch(Sn){throw console.error("Error converting local image to data URL:",Sn),new Error("Failed to load the default image")}let Ge=null;z?(Ge=V,console.log(" Using pre-built object image data")):X?(console.log(" Processing object image file:",X.name,X.type,X.size),Ge=await PP(X),console.log(" Object image processed successfully:",!!Ge)):console.log(" No object image file available");const Xt=await I0(),Cs=await $f.submitImageGenerationRequest(se,S,ne,Ge,Xt),mn=await $f.waitForRequestCompletion(Cs);if(console.log("AI Service result:",mn),mn&&mn.storageUrl){const Sn=Date.now()-de;WP(ve,Sn);const Rr=mn.storageUrl,Iu={imageUrl:Rr,prompt:S,timestamp:v(new Date)};if(Fn&&se){Jr(!0);try{const ur=await jl(se.uid,1,7);bi(ur.history),ds(1),Un(ur.hasMore)}catch(ur){console.error("Failed to reload history from Firebase:",ur)}finally{Jr(!1)}}else{const ur={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Iu};bi(Pi=>[ur,...Pi]),ds(1),Un(!0)}Tr(Rr),Qa(16/9),gt(null),Xr(null),us(null),kr.current&&(kr.current.value=""),bt(""),Lo(!0),$t(!0),al(!0),ki(!1)}else alert("   .       .")}catch(ne){console.error("AI processing failed:",ne),(Oe=ne.message)!=null&&Oe.includes("limit reached")||(Ie=ne.message)!=null&&Ie.includes(" ")?(Im("limit_reached"),Tm(je,lr,yt),Si(!0)):(_e=ne.message)!=null&&_e.includes("timeout")?(Im("timeout"),alert("    .  .")):(Im("unknown"),alert("  .       ."))}finally{Q(!1)}},pN=[{titleKey:"windowOptions",items:[{nameKey:"fixedWindow",name:"Fixed Window",description:"Add a large picture window with fixed view",icon:pn},{nameKey:"slidingWindow",name:"Sliding Window",description:"Add a sliding window",icon:pn},{nameKey:"casementWindow",name:"Casement Window",description:"Add a casement window",icon:pn},{nameKey:"tiltTurnWindow",name:"Tilt-Turn Window",description:"Add a tilt-turn window",icon:pn},{nameKey:"awningWindow",name:"Awning Window",description:"Add an awning window",icon:pn},{nameKey:"doubleHungWindow",name:"Double-Hung Window",description:"Add a double-hung window",icon:pn},{nameKey:"pocketWindow",name:"Pocket Window",description:"Add a pocket window",icon:pn},{nameKey:"archWindow",name:"Arch Window",description:"Add an arch window to expand the space",icon:pn}]},{titleKey:"doorOptions",items:[{nameKey:"pocketDoor",name:"Pocket Door",description:"Add a pocket door that slides into the wall",icon:pn},{nameKey:"frenchDoors",name:"French Doors",description:"Add French doors with glass panels",icon:pn},{nameKey:"louverDoor",name:"Louver Door",description:"Add a louver door with ventilation slats",icon:pn},{nameKey:"barnDoor",name:"Barn Door",description:"Add a barn door with exposed track",icon:pn}]}],gN=[{titleKey:"toiletOptions",items:[{nameKey:"bidetSeat",name:"Bidet Seat",description:"Add a heated bidet toilet seat",icon:Lt},{nameKey:"toiletSeat",name:"Toilet Seat",description:"Add a toilet seat",icon:Lt}]},{titleKey:"bathtubOptions",items:[{nameKey:"freestandingTub",name:"Freestanding Tub",description:"Add a freestanding bathtub",icon:Lt},{nameKey:"vintageTub",name:"Vintage Tub",description:"Add a vintage bathtub",icon:Lt},{nameKey:"standardTub",name:"Standard Tub",description:"Add a standard bathtub",icon:Lt}]},{titleKey:"showerOptions",items:[{nameKey:"rainShower",name:"Rain Shower",description:"Add a shower with rain head system",icon:Lt},{nameKey:"showerEnclosure",name:"Shower Enclosure",description:"Add a shower enclosure",icon:Lt},{nameKey:"slidingShower",name:"Sliding Shower",description:"Add a shower enclosure with sliding doors",icon:Lt}]},{titleKey:"sinkOptions",items:[{nameKey:"pedestalSink",name:"Pedestal Sink",description:"Add a classic pedestal sink",icon:Lt},{nameKey:"stainlessSink",name:"Stainless Sink",description:"Add a stainless steel sink",icon:Lt},{nameKey:"undermountSink",name:"Undermount Sink",description:"Add a white ceramic undermount sink",icon:Lt}]},{titleKey:"jacuzziSpaOptions",items:[{nameKey:"builtInJacuzzi",name:"Built-in Jacuzzi",description:"Add a built-in jacuzzi with tiles",icon:Lt},{nameKey:"portableJacuzzi",name:"Portable Jacuzzi",description:"Add a standard portable jacuzzi",icon:Lt}]},{titleKey:"poolOptions",items:[{nameKey:"ingroundPool",name:"Inground Pool",description:"Add a custom concrete inground pool",icon:Lt},{nameKey:"abovegroundPool",name:"Above-ground Pool",description:"Add an above-ground pool with metal frame",icon:Lt}]}];return d.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",dir:r?"rtl":"ltr",children:[d.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:[t("appName"),d.jsx("span",{className:`text-lg sm:text-xl align-super ${r?"mr-1":"ml-1"} bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light`,children:"AI"})]})]})}),d.jsxs("button",{onClick:gl,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${je>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[je>0?d.jsx(si,{className:"w-5 h-5"}):d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),je>0?d.jsxs("div",{className:"flex flex-col items-start leading-none",children:[d.jsx("span",{children:t("activeSubscription")}),d.jsxs("span",{className:"text-[10px] opacity-80",children:[yt-lr>0?yt-lr:0," ",t("credits")]})]}):t("professionalSubscription")]}),d.jsx("button",{onClick:()=>{h(0),o(!0),E0()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:t("tutorial"),children:d.jsx(iL,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>ys(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:t("contactUs"),children:d.jsx(lL,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"md:hidden flex items-center bg-surface/50 backdrop-blur-md rounded-full border border-white/10 p-1 pl-3 pr-1 gap-1",children:d.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-3",children:[Fn?d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((se==null?void 0:se.email)||"U")[0].toUpperCase()})}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center",children:d.jsx(nm,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30",children:[d.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:yt-lr>0?yt-lr:0}),d.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})]})]})}),d.jsx("button",{onClick:()=>l(!0),className:"hidden md:flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:Fn?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((se==null?void 0:se.email)||"U")[0].toUpperCase()})}),d.jsxs("div",{className:"text-right hidden sm:block",children:[!(se!=null&&se.isAnonymous)&&d.jsx("div",{className:"text-xs text-textMuted",children:t("loggedInAs")}),d.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((se==null?void 0:se.email)||"").split("@")[0]||t("guest")})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(nm,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:t("login")})]})})]})]}),d.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[d.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-28 glass-panel rounded-2xl p-3 items-center animate-slide-in-right relative",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"flex flex-col gap-2.5 w-full",children:[d.jsxs("button",{ref:U,onClick:gu,disabled:ce,className:"w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:t("uploadImage"),children:[d.jsx(NI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),d.jsx("span",{className:"text-[11px] text-blue-300 font-medium",children:t("uploadImage")})]}),d.jsxs("button",{ref:T,onClick:vu,disabled:ce,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group ${Zr?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/50":"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 hover:border-green-400/50"} hover:from-green-500/30 hover:to-emerald-500/30 border rounded-xl transition-all duration-300 shadow-lg shadow-green-500/10 hover:shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed`,title:t("uploadItem"),children:[d.jsx(Tl,{className:`w-6 h-6 group-hover:scale-110 transition-transform ${Zr?"text-primary-400":"text-green-400"}`}),d.jsx("span",{className:`text-[11px] font-medium ${Zr?"text-primary-300":"text-green-300"}`,children:t("uploadItem")})]}),d.jsx("div",{className:"h-px w-full bg-white/10 my-1"}),d.jsxs("button",{ref:E,onClick:()=>Wt(!0),disabled:ce,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-400/30 hover:border-purple-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20 ${ws?"ring-2 ring-purple-400/50":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:t("readyDesigns"),children:[d.jsx(Li,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-purple-400"}),d.jsx("span",{className:"text-[11px] text-purple-300 font-medium",children:t("readyDesigns")})]}),d.jsxs("button",{onClick:()=>pt(!_i),disabled:ce,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-surfaceHighlight/40 border border-white/80 rounded-xl transition-all duration-300 ${_i?"bg-surfaceHighlight/60":"hover:bg-surfaceHighlight/50"} disabled:opacity-50 disabled:cursor-not-allowed`,title:t("moreTools"),children:[d.jsx(RI,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${_i?"text-primary-300":"text-textMuted"}`}),d.jsx("span",{className:"text-[11px] text-textMuted font-medium",children:t("more")})]})]})}),_i&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>pt(!1)}),d.jsxs("div",{className:`hidden lg:block fixed top-1/2 -translate-y-1/2 w-48 bg-surface/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-white/10 z-50 animate-fade-in ${r?"right-32":"left-32"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm font-medium text-white",children:t("moreTools")}),d.jsx("button",{onClick:()=>pt(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(nn,{className:"w-4 h-4 text-textMuted"})})]}),d.jsx("div",{className:"flex flex-col gap-1",children:[{icon:Ni,label:t("colors"),action:()=>{oe(!ie),pt(!1)}},{icon:cy,label:t("furniture"),action:()=>{dn(!Vn),pt(!1)}},{icon:ay,label:t("lighting"),action:()=>{un(!$e),pt(!1)}},{icon:pn,label:t("doorsWindows"),action:()=>{Kr(!xr),pt(!1)}},{icon:Lt,label:t("bathroomShort"),action:()=>{Qr(!Yr),pt(!1)}},{icon:$n,label:t("repairs"),action:()=>{jn(!ct),pt(!1)}}].map((S,V)=>d.jsxs("button",{onClick:S.action,disabled:ce,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors text-right disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(S.icon,{className:"w-5 h-5 text-primary-400"}),d.jsx("span",{className:"text-sm text-white",children:S.label})]},V))})]})]}),d.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[d.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[gs&&En?d.jsx(yE,{beforeImage:En,afterImage:Je}):d.jsx("img",{src:Je,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${ce?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:sf,onLoad:of,style:{objectPosition:"center"}}),ce&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[d.jsxs("div",{className:"w-20 h-20 relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),d.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:t("processingNewDesign")})]}),d.jsx("button",{onClick:()=>N(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:t("history"),children:d.jsx(kI,{className:"w-5 h-5"})}),Mo&&d.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:Mo,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:$o,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),d.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",value:Pt,onChange:S=>bt(S.target.value),placeholder:t("promptPlaceholder"),disabled:ce,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:S=>S.key==="Enter"&&!ce&&q()}),d.jsx(Dr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),Pt&&d.jsx("button",{onClick:()=>!ce&&bt(""),disabled:ce,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),d.jsxs("button",{ref:R,onClick:q,disabled:ce||!Pt.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{children:t("create")}),d.jsx(Dr,{className:"w-4 h-4"})]})]})]}),d.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[d.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:t("designHistory")}),d.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${ce?"opacity-50 pointer-events-none":""}`,children:[ar.length===0?d.jsxs("div",{className:"text-center py-10 opacity-50",children:[d.jsx(Dr,{className:"w-8 h-8 mx-auto mb-2"}),d.jsx("p",{className:"text-xs",children:t("noHistoryYet")})]}):ar.map(S=>d.jsxs("div",{onClick:()=>!ce&&Es(S),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),d.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[d.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:S.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:F(S)})]})]},S.id)),Ya&&d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(qo,{className:"w-6 h-6 text-primary-400 animate-spin"})}),Ti&&!Ya&&ar.length>0&&d.jsx("button",{onClick:g,disabled:ce,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),f&&d.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[d.jsx(Dr,{className:"w-4 h-4 text-white flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:[d.jsx("span",{className:"md:inline block",children:"  ."}),d.jsx("span",{className:"hidden md:inline",children:" "}),d.jsx("span",{className:"md:inline block",children:t("promptUpdated")})]})]}),y&&d.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:()=>{_(!1),P(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},children:[d.jsx("div",{className:"absolute inset-0 bg-black/70"}),d.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-44 lg:bottom-32 w-[90%] max-w-[340px] bg-white text-gray-900 p-5 rounded-2xl shadow-2xl animate-bounce-in",dir:r?"rtl":"ltr",onClick:S=>S.stopPropagation(),children:[d.jsx("div",{className:"absolute bottom-[-8px] left-1/2 -translate-x-1/2 w-0 h-0 border-solid border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("h3",{className:"font-bold text-lg text-primary-600",children:[" ",t("imageUploadedSuccess")]}),d.jsx("button",{onClick:()=>{_(!1),P(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(nn,{size:18})})]}),d.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:[t("describeWhatToChange"),d.jsx("br",{}),d.jsx("br",{}),t("tipClickMore")]}),d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary-50 rounded-xl mb-4",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("span",{className:"text-sm text-primary-700 font-medium",children:t("writeRequestAndCreate")})]}),d.jsx("button",{onClick:()=>{_(!1),P(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg",children:t("gotItLetsStart")})]})]})]}),d.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:d.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[d.jsxs("div",{className:"relative",children:[Mo&&d.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:Mo,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:$o,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[d.jsx("input",{type:"text",value:Pt,onChange:S=>bt(S.target.value),placeholder:t("whatToChange"),disabled:ce,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:S=>S.key==="Enter"&&!ce&&q()}),Pt&&d.jsx("button",{onClick:()=>!ce&&bt(""),disabled:ce,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),d.jsx("button",{ref:M,onClick:q,disabled:!Pt.trim()||ce,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(Dr,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex justify-center gap-4 py-1",children:[d.jsxs("button",{ref:B,onClick:gu,disabled:ce,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:d.jsx(NI,{className:"w-6 h-6 text-blue-400"})}),d.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:t("uploadImage")})]}),d.jsxs("button",{ref:w,onClick:vu,disabled:ce,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl ${Zr?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/40":"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-400/40"} flex items-center justify-center border active:scale-95 transition-transform shadow-lg shadow-green-500/20`,children:d.jsx(Tl,{className:`w-6 h-6 ${Zr?"text-primary-400":"text-green-400"}`})}),d.jsx("span",{className:`text-[10px] font-medium ${Zr?"text-primary-300":"text-green-300"}`,children:t("uploadItem")})]}),d.jsxs("button",{ref:C,onClick:()=>Wt(!0),disabled:ce,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center border border-purple-400/40 active:scale-95 transition-transform shadow-lg shadow-purple-500/20",children:d.jsx(Li,{className:"w-6 h-6 text-purple-400"})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:t("readyDesigns")})]}),d.jsxs("button",{onClick:()=>pt(!0),disabled:ce,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surfaceHighlight/40 flex items-center justify-center border border-white/80 active:scale-95 transition-transform",children:d.jsx(RI,{className:"w-6 h-6 text-textMuted"})}),d.jsx("span",{className:"text-[10px] text-textMuted font-medium",children:t("more")})]})]}),_i&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>pt(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t("moreTools")}),d.jsx("button",{onClick:()=>pt(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(nn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:Ni,label:t("colors"),action:()=>{oe(!0),pt(!1)}},{icon:cy,label:t("furniture"),action:()=>{dn(!0),pt(!1)}},{icon:ay,label:t("lighting"),action:()=>{un(!0),pt(!1)}},{icon:pn,label:t("doorsWindows"),action:()=>{Kr(!0),pt(!1)}},{icon:Lt,label:t("bathroomShort"),action:()=>{Qr(!0),pt(!1)}},{icon:$n,label:t("repairs"),action:()=>{jn(!0),pt(!1)}}].map((S,V)=>d.jsxs("button",{onClick:S.action,disabled:ce,className:"flex flex-col items-center gap-2 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(S.icon,{className:"w-7 h-7 text-primary-400"}),d.jsx("span",{className:"text-xs text-white font-medium",children:S.label})]},V))})]})]}),d.jsx("div",{className:"hidden",children:ar.length>0&&d.jsxs("div",{className:`pt-2 border-t border-white/5 ${ce?"opacity-50 pointer-events-none":""}`,children:[d.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[t("history")," (",ar.length,")"]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:S=>{if(ce)return;const{scrollLeft:V,scrollWidth:z,clientWidth:X}=S.target;V+X>=z-10&&Ti&&!xi&&g()},children:[ar.map(S=>d.jsx("div",{onClick:()=>!ce&&Es(S),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-full h-full object-cover"})},S.id)),xi&&d.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:d.jsx(qo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Ti&&!xi&&d.jsxs("button",{onClick:g,disabled:ce,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{className:"text-[10px]",children:t("more")}),d.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),x&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>N(!1)}),d.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(kI,{className:"w-5 h-5 text-primary-400"}),t("designHistory")]}),d.jsx("button",{onClick:()=>N(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:d.jsx("span",{className:"text-xl leading-none",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[ar.length===0?d.jsxs("div",{className:"text-center py-8 opacity-50",children:[d.jsx(Dr,{className:"w-6 h-6 mx-auto mb-2"}),d.jsx("p",{className:"text-xs text-gray-400",children:t("noHistoryYet")})]}):ar.map(S=>d.jsxs("div",{onClick:()=>{ce||(Es(S),N(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:S.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:F(S)})]})]},S.id)),Ya&&d.jsx("div",{className:"flex justify-center py-2",children:d.jsx(qo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Ti&&!Ya&&ar.length>0&&d.jsx("button",{onClick:g,disabled:ce,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),iu&&d.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 md:p-8 animate-fade-in",onClick:Ss,children:d.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center gap-4",onClick:S=>S.stopPropagation(),children:[d.jsx("button",{onClick:Ss,className:"absolute top-2 right-2 bg-black/40 hover:bg-black/60 text-white p-2 md:p-3 rounded-full backdrop-blur-md border border-white/10 z-50 transition-all hover:scale-110",children:d.jsx(nn,{className:"w-5 h-5 md:w-6 md:h-6"})}),d.jsxs("div",{ref:Ci,className:`flex-1 w-full relative flex items-center justify-center overflow-hidden rounded-2xl bg-black/50 border border-white/5 ${I?"mb-20":""} ${Fe?"cursor-crosshair":""}`,onMouseDown:Fe?yu:void 0,onMouseMove:Fe?Ts:void 0,onMouseUp:Fe?wl:void 0,onMouseLeave:Fe?wl:void 0,onTouchStart:Fe?yu:void 0,onTouchMove:Fe?Ts:void 0,onTouchEnd:Fe?wl:void 0,children:[En&&gs&&!Fe?d.jsx(yE,{beforeImage:En,afterImage:Je}):d.jsx("img",{ref:ml,src:Je,alt:"Full size view",className:`max-w-full max-h-full object-contain rounded-lg shadow-2xl ${Fe?"select-none pointer-events-none":""}`,draggable:!1,crossOrigin:"anonymous"}),Fe&&Ue&&d.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 pointer-events-none",style:{left:Math.min(Ue.startX,Ue.endX),top:Math.min(Ue.startY,Ue.endY),width:Math.abs(Ue.endX-Ue.startX),height:Math.abs(Ue.endY-Ue.startY)},children:d.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"  "})}),Fe&&!Ue&&d.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-30 pointer-events-none",children:d.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-sm text-white px-4 py-2 rounded-full text-center shadow-lg flex items-center gap-2",children:[d.jsx(ly,{className:"w-4 h-4"}),d.jsx("p",{className:"text-sm font-medium",children:"    "})]})}),fl&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-20",children:d.jsxs("div",{className:"text-center",children:[d.jsx(qo,{className:"w-10 h-10 text-blue-400 animate-spin mx-auto mb-2"}),d.jsx("p",{className:"text-white",children:" -Google Lens..."})]})})]}),I?Fo&&!cr&&En?d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/90 backdrop-blur-xl border-t border-white/10 px-3 py-3 pb-7 z-50",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:ni,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 active:bg-white/10 transition-all",children:[d.jsx(Di,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:" "})]}),d.jsxs("button",{onClick:wu,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold active:from-emerald-600 active:to-teal-600 transition-all",children:[d.jsx(si,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:t("loveItSave")})]})]})}):d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-surface/95 backdrop-blur-xl border-t border-white/10 p-2 pb-8 z-50 grid grid-cols-5 gap-1",children:[d.jsxs("button",{onClick:()=>$t(!gs),disabled:!En||Fe,className:`flex flex-col items-center justify-center gap-1 p-2 rounded-xl transition-all ${gs?"text-primary-300 bg-primary-500/20":"text-gray-400 hover:text-white disabled:opacity-30"}`,children:[d.jsx(Ow,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("comparison")})]}),Fe?d.jsxs("button",{onClick:xs,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 bg-red-500/10 hover:bg-red-500/20 transition-all",children:[d.jsx(nn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("cancel")})]}):d.jsxs("button",{onClick:tf,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-blue-400 bg-blue-500/10 hover:bg-blue-500/20 transition-all",children:[d.jsx(ly,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("products")})]}),d.jsxs("button",{onClick:vl,disabled:Fe,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-green-400 bg-green-500/10 hover:bg-green-500/20 transition-all disabled:opacity-30",children:[d.jsx(PI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("whatsApp")})]}),d.jsxs("button",{onClick:zo,disabled:Fe,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all disabled:opacity-30",children:[d.jsx(EI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("download")})]}),d.jsxs("button",{onClick:Fe?xs:Ss,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 hover:bg-red-500/10 transition-all",children:[d.jsx(nn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("close")})]})]}):Fo&&!cr&&En?d.jsx("div",{className:"w-full flex justify-center",children:d.jsx("div",{className:"bg-gradient-to-r from-surface/95 via-surface/90 to-surface/95 backdrop-blur-xl p-6 rounded-3xl border border-white/10 shadow-2xl",children:d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 shadow-lg shadow-amber-500/30",children:d.jsx(Dr,{className:"w-7 h-7 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white",children:t("whatDoYouThink")}),d.jsx("p",{className:"text-sm text-gray-400",children:t("dragSliderForComparison")})]})]}),d.jsx("div",{className:"w-px h-12 bg-white/10"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:ni,className:"flex items-center gap-2 px-5 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/20 transition-all whitespace-nowrap group",children:[d.jsx(Di,{className:"w-5 h-5 group-hover:-rotate-45 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("returnToOriginal")})]}),d.jsxs("button",{onClick:wu,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold hover:from-emerald-600 hover:to-teal-600 transition-all shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/40 whitespace-nowrap group",children:[d.jsx(si,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{children:t("loveItSaveDesign")})]})]})]})})}):d.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-900/90 via-gray-800/90 to-gray-900/90 backdrop-blur-xl p-4 px-8 rounded-2xl border border-white/15 shadow-2xl shadow-black/50",children:[d.jsxs("button",{onClick:()=>$t(!gs),disabled:!En||Fe,className:`group flex items-center gap-2.5 px-5 py-3.5 rounded-xl border transition-all duration-200 whitespace-nowrap ${gs?"bg-primary-500/25 text-primary-300 border-primary-500/40 shadow-lg shadow-primary-500/20":"bg-white/5 text-gray-300 border-white/10 hover:bg-white/10 hover:border-white/20 hover:text-white hover:scale-[1.02] disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100"}`,children:[d.jsx(Ow,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("comparison")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),Fe?d.jsxs("button",{onClick:xs,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl border border-red-500/30 hover:border-red-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/20",children:[d.jsx(nn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("cancelSearch")})]}):d.jsxs("button",{onClick:tf,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-blue-600/20 hover:bg-blue-600/35 text-blue-400 hover:text-blue-300 rounded-xl border border-blue-500/30 hover:border-blue-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-blue-500/20",children:[d.jsx(ly,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("searchSimilarProducts")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:vl,disabled:Fe,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-green-600/20 hover:bg-green-600/35 text-green-400 hover:text-green-300 rounded-xl border border-green-500/30 hover:border-green-500/50 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-green-500/20",children:[d.jsx(PI,{className:"w-5 h-5 group-hover:scale-110 group-hover:-rotate-12 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("whatsApp")})]}),d.jsxs("button",{onClick:zo,disabled:Fe,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-white/10 hover:bg-white/20 text-white rounded-xl border border-white/15 hover:border-white/30 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-white/10",children:[d.jsx(EI,{className:"w-5 h-5 group-hover:translate-y-0.5 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("download")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:Fe?xs:Ss,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/10 hover:bg-red-500/25 text-red-400 hover:text-red-300 rounded-xl border border-red-500/20 hover:border-red-500/40 transition-all duration-200 whitespace-nowrap hover:scale-[1.02]",children:[d.jsx(nn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("close")})]})]})]})}),ie&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",dir:r?"rtl":"ltr",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t("colorPalette")}),d.jsx("button",{onClick:()=>oe(!1),className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(Ce).map(S=>d.jsx("button",{onClick:()=>Bh(S),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${Ii===S?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:St[S]},S))}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(db=be[Ii])==null?void 0:db.map((S,V)=>d.jsxs("button",{onClick:()=>Nt(S),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[d.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:S.hex}})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:S.name}),d.jsx("div",{className:"text-[10px] text-gray-500",children:S.ral})]})]},V))})]})]})}),[{show:Vn,close:()=>dn(!1),title:t("selectFurnitureType"),options:zn,onSelect:fN},{show:$e,close:()=>un(!1),title:t("selectLightingType"),options:ks,onSelect:_u},{show:Sg,close:()=>Do(!1),title:t("selectDesignStyle"),options:_l,onSelect:mN}].map((S,V)=>S.show&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:S.title}),d.jsx("button",{onClick:S.close,className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.options.map((z,X)=>d.jsxs("button",{onClick:()=>S.onSelect(z),className:`flex items-center p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group ${z.thumbnail?"h-24":""}`,children:[z.thumbnail?d.jsx("div",{className:"ml-3 h-20 w-auto min-w-[80px] rounded-lg overflow-hidden flex-shrink-0 border border-white/10 group-hover:border-primary-500/50 transition-colors bg-black/20",children:d.jsx("img",{src:z.thumbnail,alt:z.name,className:"h-full w-auto object-contain"})}):d.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform flex-shrink-0",children:""}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300 truncate",children:r?z.name:z.value}),d.jsx("div",{className:"text-xs text-gray-400 truncate",children:r?z.value:z.name})]})]},X))})})]})},V)),(xr||Yr||ct)&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t(xr?"doorsWindows":Yr?"bathroomOptions":"selectRepairType")}),d.jsx("button",{onClick:()=>{Kr(!1),Qr(!1),jn(!1)},className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[d.jsx("p",{className:"text-center text-gray-400 mb-6",children:t("pleaseSelectOption")}),d.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[xr&&pN.map((S,V)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:t(S.titleKey)}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.items.map((z,X)=>d.jsxs("button",{onClick:()=>{Jt(z.description),Kr(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:r?t(z.nameKey):z.name}),d.jsx(z.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:z.description})]},X))})]},V)),Yr&&gN.map((S,V)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:t(S.titleKey)}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.items.map((z,X)=>d.jsxs("button",{onClick:()=>{Jt(z.description),Qr(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:r?t(z.nameKey):z.name}),d.jsx(z.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:z.description})]},X))})]},V)),ct&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:()=>uf("fix and repair everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("fixAndRepairEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>uf("repair everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("repairEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>uf("destroy and cause damage to everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("destroyAndCauseDamage")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>uf("mess up everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("messUpEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),Ei&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl overflow-hidden",children:[d.jsx("button",{onClick:()=>hs(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white z-10",children:""}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:[t("appName"),d.jsx("span",{className:`text-xl align-super ${r?"mr-1":"ml-1"} bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light`,children:"AI"})]})]})}),d.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 mb-4 relative",children:[d.jsx("div",{className:`absolute inset-y-1 w-[calc(50%-4px)] bg-primary-600 shadow-lg rounded-lg transition-all duration-300 ease-in-out ${hn==="signup"?"left-[50%]":"left-1"}`}),d.jsx("button",{onClick:()=>ei("signup"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${hn==="signup"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:t("createNewAccount")}),d.jsx("button",{onClick:()=>ei("login"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${hn==="login"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:t("login")})]}),d.jsx("p",{className:"text-sm text-gray-400 min-h-[20px]",children:t(hn==="login"?"welcomeBack":"joinUs")})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"email",placeholder:t("email"),value:Xe,onChange:S=>su(S.target.value),className:"input-glass w-full"}),d.jsx("input",{type:"password",placeholder:t("password"),value:Er,onChange:S=>Vo(S.target.value),className:"input-glass w-full"}),hn==="signup"&&d.jsx("div",{className:"animate-slide-down",children:d.jsx("input",{type:"password",placeholder:t("confirmPassword"),value:fs,onChange:S=>ms(S.target.value),className:"input-glass w-full"})}),d.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:[t("termsAgreement"),d.jsx("a",{href:t("termsOfServiceUrl"),target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:t("termsOfService")}),t("and"),d.jsx("a",{href:t("privacyPolicyUrl"),target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:t("privacyPolicy")})]}),d.jsx("button",{onClick:lf,disabled:Sr,className:"btn-primary w-full py-3 text-lg mt-4",children:Sr?d.jsx(qo,{className:"w-6 h-6 animate-spin mx-auto"}):t(hn==="login"?"loginButton":"createAccountButton")}),d.jsx("div",{className:"flex justify-center items-center mt-4 text-sm",children:hn==="login"&&d.jsx("button",{onClick:cf,className:"text-gray-400 hover:text-white text-xs",children:t("forgotPassword")})})]})]})}),Za&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t("logout")}),d.jsx("p",{className:"text-gray-400 mb-6",children:e==="he"?"    ?":"Are you sure you want to log out?"}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:()=>el(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:t("cancel")}),d.jsx("button",{onClick:c,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),d.jsx("input",{ref:Jh,type:"file",accept:"image/*",onChange:yl,className:"hidden"}),d.jsx("input",{ref:kr,type:"file",accept:"image/*",onChange:af,className:"hidden"}),d.jsx(gE,{isOpen:cu,onClose:()=>Si(!1),onShowPricing:gl,userSubscription:je,currentUsage:lr,limit:yt}),d.jsx(S8,{isOpen:ws,onClose:()=>Wt(!1),onSelectDesign:async S=>{if(console.log("Selected design:",S),Wt(!1),!Je){df("      ");return}try{const z=await(await fetch(S.url)).blob(),X=await new Promise(_e=>{const ne=new FileReader;ne.onload=()=>_e(ne.result),ne.readAsDataURL(z)}),de=new File([z],`preset_${S.id}.jpg`,{type:"image/jpeg"}),Ae=X.split(",")[1],ve=X.split(";")[0].split(":")[1],Oe={inlineData:{data:Ae,mimeType:ve}};console.log(" Pre-built objectImageData, mimeType:",ve,"dataLength:",Ae.length),Xr(X),us(de);let Ie="";S.categoryId==="kitchen"||S.categoryId==="kitchens"?Ie="Use the design of the second image and apply it to the first image while NOT changing the first image room structure, windows, doors and point of view. Do not remove doors.":Ie=`Use the attached image as a reference design. Apply this ${S.categoryLabel} style to the room while maintaining the same structure, proportion, room size, windows, doors and camera angle. Do not remove doors.`,bt(Ie),await bu(Ie,Oe),Xr(null),us(null),bt("")}catch(V){console.error("Error loading preset design:",V),df("  "),Q(!1)}}}),d.jsx(_8,{isOpen:a,onClose:()=>l(!1),user:se,userCredits:yt,userUsage:lr,userSubscription:je,onLogin:()=>{ei("login"),hs(!0)},onLogout:()=>el(!0),onSubscriptionClick:gl,onRedeemCoupon:m,onCouponSuccess:S=>{Lg(S),du(!0)}}),d.jsx(v8,{isOpen:uu,onClose:()=>ol(!1),subscriptionName:zh[je]}),Wh&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-emerald-900/90 to-teal-900/90 rounded-3xl overflow-hidden shadow-2xl border border-emerald-500/30 animate-scale-up",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-4 left-8 w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),d.jsx("div",{className:"absolute top-12 right-12 w-2 h-2 bg-emerald-300 rounded-full animate-bounce",style:{animationDelay:"0.3s"}}),d.jsx("div",{className:"absolute top-8 left-1/3 w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),d.jsx("div",{className:"absolute top-16 right-1/4 w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),d.jsxs("div",{className:"relative p-8 text-center",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/30 animate-pulse",children:d.jsx(Dr,{className:"w-12 h-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" ! "}),d.jsxs("div",{className:"my-6 py-4 px-6 rounded-2xl bg-white/10 border border-white/20",children:[d.jsx("div",{className:"text-5xl font-bold text-emerald-300 mb-1",children:Dg}),d.jsx("div",{className:"text-emerald-100/80 text-lg",children:"  "})]}),d.jsx("p",{className:"text-emerald-100/70 mb-6",children:" ! "}),d.jsx("button",{onClick:()=>du(!1),className:"w-full py-4 rounded-2xl bg-white text-emerald-900 font-bold text-lg hover:bg-emerald-50 transition-colors shadow-lg",children:",  !"})]})]})}),Ng&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:d.jsx(si,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),d.jsxs("p",{className:"text-gray-300",children:["  ,   ",d.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),d.jsx("button",{onClick:()=>{sl(!1),ei("signup"),hs(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),d.jsx("button",{onClick:()=>sl(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),lu&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:d.jsx(nm,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:t("loginRequired")}),d.jsxs("p",{className:"text-gray-300",children:[t("loginRequiredMessage"),d.jsx("br",{}),t("wantToLogin")]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>{ps(!1),il(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:t("notNowThanks")}),d.jsx("button",{onClick:()=>{ps(!1),hs(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),rl&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",dir:r?"rtl":"ltr",children:[d.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[d.jsx("button",{onClick:()=>jo(!1),className:`absolute top-4 ${r?"left-4":"right-4"} text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent`,children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:t("professionalSubscription")}),d.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:t("specialLaunchPrices")}),d.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:t("upgradeYourDesignAbilities")})]}),d.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 pt-6 md:pt-8 scrollbar-custom",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-5 md:p-6 flex flex-col h-full",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t("starter")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-white",children:"19"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("imagesPerMonth",{count:50})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("accessToAllTools")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("emailSupport")})]})]}),d.jsx("button",{onClick:()=>Ri("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:je===1&&yt===50,className:`w-full py-3 rounded-xl font-medium border block text-center ${je===1&&yt===50?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10 hover:bg-white/10 transition-all"}`,children:je===1&&yt===50?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(si,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]}),d.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:t("mostValue")}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t("value")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"49"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:t("savePerImage")})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{className:"font-medium",children:t("imagesPerMonth",{count:200})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("earlyAccess")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("prioritySupport")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("historyStorage")})]})]}),d.jsx("button",{onClick:()=>Ri("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:je===2&&yt===200,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${je===2&&yt===200?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30 hover:from-secondary-400 hover:to-secondary-500 transition-all"}`,children:je===2&&yt===200?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(si,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-amber-900/30 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/30 border border-amber-500/30 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-amber-900/10",children:[d.jsxs("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-amber-500 to-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:[" ",t("forProfessionals")]}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:t("professional")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:"99"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:t("save42PerImage")})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{className:"font-medium",children:t("imagesPerMonth",{count:450})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("allAdvancedFeatures")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("premiumSupport")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("forIndustryProfessionals")})]})]}),d.jsx("button",{onClick:()=>Ri("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:je===3&&yt===450,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${je===3&&yt===450?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-amber-500 to-yellow-500 text-black shadow-amber-900/30 hover:from-amber-400 hover:to-yellow-400 transition-all"}`,children:je===3&&yt===450?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(si,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]})]})}),d.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:t("subscriptionDisclaimer")})]})}),s&&d.jsx(y8,{step:u,steps:Bo,onNext:Cr,onSkip:Xh,onComplete:pl}),Yh&&We&&d.jsx(w8,{color:We,onClose:()=>Uo(!1),onApply:Dt}),d.jsx(gE,{isOpen:cu,onClose:()=>Si(!1),onShowPricing:gl,userSubscription:je,currentUsage:lr,limit:yt}),Me&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(CI,{className:"w-5 h-5 text-primary-400"}),t("contactUs")]}),d.jsx("button",{onClick:()=>{ys(!1),Bn("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:d.jsx("span",{className:"text-2xl leading-none",children:""})})]}),d.jsx("p",{className:"text-gray-400 text-sm mt-2",children:t("contactSubtitle")})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[fu&&d.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:fu}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("phone")}),d.jsx("input",{type:"tel",value:ll,onChange:S=>hu(S.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("email")}),d.jsx("input",{type:"email",value:vs,onChange:S=>Gh(S.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("message")}),d.jsx("textarea",{value:cl,onChange:S=>Hh(S.target.value),placeholder:t("writeYourMessage"),rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:r?"rtl":"ltr"})]}),d.jsx("p",{className:"text-xs text-gray-500 text-center",children:t("enterPhoneOrEmail")}),d.jsx("button",{onClick:rf,disabled:_s,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:_s?d.jsxs(d.Fragment,{children:[d.jsx(qo,{className:"w-5 h-5 animate-spin"}),t("sending")]}):d.jsxs(d.Fragment,{children:[d.jsx(CI,{className:"w-5 h-5"}),t("sendMessage")]})})]})]})}),qh&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[d.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:d.jsx(si,{className:"w-10 h-10 text-emerald-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:t("messageSentSuccess")})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:[e==="he"?"   .":"Your message has been received successfully.",d.jsx("br",{}),e==="he"?"   .":"We will get back to you as soon as possible."]}),d.jsx("button",{onClick:()=>ul(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:t("close")})]})]})})]})}$y.createRoot(document.getElementById("root")).render(d.jsx(UN.StrictMode,{children:d.jsx(g8,{children:d.jsx(A8,{})})}));export{jj as $,M8 as A,J8 as B,r$ as C,d5 as D,Bd as E,zs as F,Ws as G,j8 as H,RV as I,h$ as J,S$ as K,lT as L,o4 as M,nj as N,Zi as O,da as P,s$ as Q,p$ as R,Ww as S,i5 as T,Y8 as U,Aj as V,y$ as W,I$ as X,E$ as Y,f$ as Z,Uj as _,_h as a,Ta as a$,F8 as a0,wV as a1,kj as a2,w$ as a3,b$ as a4,x$ as a5,DV as a6,u$ as a7,X8 as a8,z8 as a9,yi as aA,Le as aB,Zn as aC,$a as aD,Wa as aE,Ve as aF,$ as aG,wi as aH,NU as aI,n6 as aJ,Bt as aK,tu as aL,Lh as aM,vm as aN,xg as aO,Mh as aP,Ig as aQ,X_ as aR,er as aS,Tg as aT,Xs as aU,Re as aV,t6 as aW,Wr as aX,ZU as aY,Qv as aZ,dt as a_,K8 as aa,i$ as ab,Sj as ac,Vv as ad,B8 as ae,q8 as af,Q8 as ag,g$ as ah,_$ as ai,T$ as aj,c$ as ak,U8 as al,l$ as am,t$ as an,n$ as ao,v$ as ap,e$ as aq,a$ as ar,o$ as as,Z8 as at,G8 as au,QR as av,th as aw,MU as ax,Kn as ay,L$ as az,vh as b,uc as b$,K as b0,C$ as b1,f5 as b2,rt as b3,DW as b4,me as b5,k$ as b6,NW as b7,PW as b8,P$ as b9,Y$ as bA,K$ as bB,lt as bC,Vh as bD,WU as bE,hW as bF,Kx as bG,rW as bH,iW as bI,ih as bJ,sW as bK,oW as bL,DU as bM,AW as bN,TW as bO,M$ as bP,My as bQ,H$ as bR,Gx as bS,fW as bT,pW as bU,mW as bV,LU as bW,sh as bX,uW as bY,dW as bZ,W$ as b_,Ir as ba,T5 as bb,cW as bc,X$ as bd,Z$ as be,G$ as bf,IW as bg,bW as bh,J$ as bi,j$ as bj,Da as bk,N$ as bl,PU as bm,zU as bn,RW as bo,lW as bp,vW as bq,B$ as br,CW as bs,Br as bt,$$ as bu,eW as bv,O$ as bw,V$ as bx,U$ as by,kW as bz,V8 as c,gW as c0,yW as c1,JU as c2,cc as c3,OR as c4,tW as c5,D$ as c6,wW as c7,_W as c8,Oh as c9,SW as ca,A$ as cb,nW as cc,BU as cd,q$ as ce,Q$ as cf,z$ as cg,aW as ch,xW as ci,F$ as cj,wm as ck,EW as cl,Fa as d,P8 as e,$s as f,sm as g,L8 as h,oc as i,r5 as j,N8 as k,D8 as l,Kv as m,Gs as n,W8 as o,Fj as p,m$ as q,qj as r,n5 as s,nk as t,Rj as u,$8 as v,ij as w,H8 as x,O8 as y,d$ as z};
