var qC=Object.defineProperty;var HC=(t,e,n)=>e in t?qC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ov=(t,e,n)=>(HC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var z$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W1={exports:{}},zp={},K1={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=Symbol.for("react.element"),KC=Symbol.for("react.portal"),QC=Symbol.for("react.fragment"),YC=Symbol.for("react.strict_mode"),JC=Symbol.for("react.profiler"),XC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),eN=Symbol.for("react.forward_ref"),tN=Symbol.for("react.suspense"),nN=Symbol.for("react.memo"),rN=Symbol.for("react.lazy"),Vv=Symbol.iterator;function iN(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var Q1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y1=Object.assign,J1={};function rc(t,e,n){this.props=t,this.context=e,this.refs=J1,this.updater=n||Q1}rc.prototype.isReactComponent={};rc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X1(){}X1.prototype=rc.prototype;function K_(t,e,n){this.props=t,this.context=e,this.refs=J1,this.updater=n||Q1}var Q_=K_.prototype=new X1;Q_.constructor=K_;Y1(Q_,rc.prototype);Q_.isPureReactComponent=!0;var Mv=Array.isArray,Z1=Object.prototype.hasOwnProperty,Y_={current:null},eb={key:!0,ref:!0,__self:!0,__source:!0};function tb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Z1.call(e,r)&&!eb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Sd,type:t,key:s,ref:o,props:i,_owner:Y_.current}}function sN(t,e){return{$$typeof:Sd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sd}function oN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fv=/\/+/g;function ig(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oN(""+t.key):e.toString(36)}function uf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sd:case KC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ig(o,0):r,Mv(i)?(n="",t!=null&&(n=t.replace(Fv,"$&/")+"/"),uf(i,e,n,"",function(u){return u})):i!=null&&(J_(i)&&(i=sN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Mv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ig(s,a);o+=uf(s,e,n,l,i)}else if(l=iN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ig(s,a++),o+=uf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ph(t,e,n){if(t==null)return t;var r=[],i=0;return uf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function aN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},df={transition:null},lN={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:df,ReactCurrentOwner:Y_};function nb(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Ph,forEach:function(t,e,n){Ph(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ph(t,function(){e++}),e},toArray:function(t){return Ph(t,function(e){return e})||[]},only:function(t){if(!J_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=rc;pe.Fragment=QC;pe.Profiler=JC;pe.PureComponent=K_;pe.StrictMode=YC;pe.Suspense=tN;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lN;pe.act=nb;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Y1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Y_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Z1.call(e,l)&&!eb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Sd,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:ZC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XC,_context:t},t.Consumer=t};pe.createElement=tb;pe.createFactory=function(t){var e=tb.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:eN,render:t}};pe.isValidElement=J_;pe.lazy=function(t){return{$$typeof:rN,_payload:{_status:-1,_result:t},_init:aN}};pe.memo=function(t,e){return{$$typeof:nN,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=df.transition;df.transition={};try{t()}finally{df.transition=e}};pe.unstable_act=nb;pe.useCallback=function(t,e){return fn.current.useCallback(t,e)};pe.useContext=function(t){return fn.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};pe.useEffect=function(t,e){return fn.current.useEffect(t,e)};pe.useId=function(){return fn.current.useId()};pe.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return fn.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};pe.useRef=function(t){return fn.current.useRef(t)};pe.useState=function(t){return fn.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return fn.current.useTransition()};pe.version="18.3.1";K1.exports=pe;var B=K1.exports;const cN=WC(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN=B,dN=Symbol.for("react.element"),hN=Symbol.for("react.fragment"),fN=Object.prototype.hasOwnProperty,pN=uN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mN={key:!0,ref:!0,__self:!0,__source:!0};function rb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fN.call(e,r)&&!mN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dN,type:t,key:s,ref:o,props:i,_owner:pN.current}}zp.Fragment=hN;zp.jsx=rb;zp.jsxs=rb;W1.exports=zp;var p=W1.exports,uy={},ib={exports:{}},Qn={},sb={exports:{}},ob={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,re){var oe=Y.length;Y.push(re);e:for(;0<oe;){var Pe=oe-1>>>1,we=Y[Pe];if(0<i(we,re))Y[Pe]=re,Y[oe]=we,oe=Pe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],oe=Y.pop();if(oe!==re){Y[0]=oe;e:for(var Pe=0,we=Y.length,De=we>>>1;Pe<De;){var nn=2*(Pe+1)-1,rn=Y[nn],sn=nn+1,be=Y[sn];if(0>i(rn,oe))sn<we&&0>i(be,rn)?(Y[Pe]=be,Y[sn]=oe,Pe=sn):(Y[Pe]=rn,Y[nn]=oe,Pe=nn);else if(sn<we&&0>i(be,oe))Y[Pe]=be,Y[sn]=oe,Pe=sn;else break e}}return re}function i(Y,re){var oe=Y.sortIndex-re.sortIndex;return oe!==0?oe:Y.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,m=3,y=!1,I=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Y){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=Y)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=n(u)}}function L(Y){if(S=!1,T(Y),!I)if(n(l)!==null)I=!0,Vi(U);else{var re=n(u);re!==null&&mn(L,re.startTime-Y)}}function U(Y,re){I=!1,S&&(S=!1,E(_),_=-1),y=!0;var oe=m;try{for(T(re),h=n(l);h!==null&&(!(h.expirationTime>re)||Y&&!P());){var Pe=h.callback;if(typeof Pe=="function"){h.callback=null,m=h.priorityLevel;var we=Pe(h.expirationTime<=re);re=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),T(re)}else r(l);h=n(l)}if(h!==null)var De=!0;else{var nn=n(u);nn!==null&&mn(L,nn.startTime-re),De=!1}return De}finally{h=null,m=oe,y=!1}}var G=!1,x=null,_=-1,A=5,b=-1;function P(){return!(t.unstable_now()-b<A)}function O(){if(x!==null){var Y=t.unstable_now();b=Y;var re=!0;try{re=x(!0,Y)}finally{re?R():(G=!1,x=null)}}else G=!1}var R;if(typeof v=="function")R=function(){v(O)};else if(typeof MessageChannel<"u"){var tn=new MessageChannel,Xn=tn.port2;tn.port1.onmessage=O,R=function(){Xn.postMessage(null)}}else R=function(){C(O,0)};function Vi(Y){x=Y,G||(G=!0,R())}function mn(Y,re){_=C(function(){Y(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Vi(U))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var oe=m;m=re;try{return Y()}finally{m=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var oe=m;m=Y;try{return re()}finally{m=oe}},t.unstable_scheduleCallback=function(Y,re,oe){var Pe=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Pe+oe:Pe):oe=Pe,Y){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=oe+we,Y={id:d++,callback:re,priorityLevel:Y,startTime:oe,expirationTime:we,sortIndex:-1},oe>Pe?(Y.sortIndex=oe,e(u,Y),n(l)===null&&Y===n(u)&&(S?(E(_),_=-1):S=!0,mn(L,oe-Pe))):(Y.sortIndex=we,e(l,Y),I||y||(I=!0,Vi(U))),Y},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Y){var re=m;return function(){var oe=m;m=re;try{return Y.apply(this,arguments)}finally{m=oe}}}})(ob);sb.exports=ob;var gN=sb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yN=B,Hn=gN;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ab=new Set,Fu={};function la(t,e){Rl(t,e),Rl(t+"Capture",e)}function Rl(t,e){for(Fu[t]=e,t=0;t<e.length;t++)ab.add(e[t])}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dy=Object.prototype.hasOwnProperty,_N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jv={},Uv={};function wN(t){return dy.call(Uv,t)?!0:dy.call(jv,t)?!1:_N.test(t)?Uv[t]=!0:(jv[t]=!0,!1)}function vN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IN(t,e,n,r){if(e===null||typeof e>"u"||vN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function Z_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(X_,Z_);Bt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(X_,Z_);Bt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(X_,Z_);Bt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function e0(t,e,n,r){var i=Bt.hasOwnProperty(e)?Bt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IN(e,n,i,r)&&(n=null),r||i===null?wN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Si=yN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ch=Symbol.for("react.element"),il=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),hy=Symbol.for("react.profiler"),lb=Symbol.for("react.provider"),cb=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),fy=Symbol.for("react.suspense"),py=Symbol.for("react.suspense_list"),r0=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),ub=Symbol.for("react.offscreen"),Bv=Symbol.iterator;function Uc(t){return t===null||typeof t!="object"?null:(t=Bv&&t[Bv]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,sg;function nu(t){if(sg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sg=e&&e[1]||""}return`
`+sg+t}var og=!1;function ag(t,e){if(!t||og)return"";og=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{og=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nu(t):""}function EN(t){switch(t.tag){case 5:return nu(t.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return t=ag(t.type,!1),t;case 11:return t=ag(t.type.render,!1),t;case 1:return t=ag(t.type,!0),t;default:return""}}function my(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sl:return"Fragment";case il:return"Portal";case hy:return"Profiler";case t0:return"StrictMode";case fy:return"Suspense";case py:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cb:return(t.displayName||"Context")+".Consumer";case lb:return(t._context.displayName||"Context")+".Provider";case n0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r0:return e=t.displayName||null,e!==null?e:my(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return my(t(e))}catch{}}return null}function TN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return my(e);case 8:return e===t0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function db(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bN(t){var e=db(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nh(t){t._valueTracker||(t._valueTracker=bN(t))}function hb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=db(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gy(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $v(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fb(t,e){e=e.checked,e!=null&&e0(t,"checked",e,!1)}function yy(t,e){fb(t,e);var n=Vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_y(t,e.type,n):e.hasOwnProperty("defaultValue")&&_y(t,e.type,Vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _y(t,e,n){(e!=="number"||qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function gl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(ru(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vs(n)}}function pb(t,e){var n=Vs(e.value),r=Vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dh,gb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dh=Dh||document.createElement("div"),Dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ju(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xN=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(t){xN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fu[e]=fu[t]})});function yb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fu.hasOwnProperty(t)&&fu[t]?(""+e).trim():e+"px"}function _b(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var AN=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iy(t,e){if(e){if(AN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Ey(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ty=null;function i0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var by=null,yl=null,_l=null;function Hv(t){if(t=Pd(t)){if(typeof by!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Kp(e),by(t.stateNode,t.type,e))}}function wb(t){yl?_l?_l.push(t):_l=[t]:yl=t}function vb(){if(yl){var t=yl,e=_l;if(_l=yl=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function Ib(t,e){return t(e)}function Eb(){}var lg=!1;function Tb(t,e,n){if(lg)return t(e,n);lg=!0;try{return Ib(t,e,n)}finally{lg=!1,(yl!==null||_l!==null)&&(Eb(),vb())}}function Uu(t,e){var n=t.stateNode;if(n===null)return null;var r=Kp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var xy=!1;if(yi)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){xy=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{xy=!1}function SN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var pu=!1,Hf=null,Wf=!1,Ay=null,RN={onError:function(t){pu=!0,Hf=t}};function kN(t,e,n,r,i,s,o,a,l){pu=!1,Hf=null,SN.apply(RN,arguments)}function PN(t,e,n,r,i,s,o,a,l){if(kN.apply(this,arguments),pu){if(pu){var u=Hf;pu=!1,Hf=null}else throw Error(q(198));Wf||(Wf=!0,Ay=u)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wv(t){if(ca(t)!==t)throw Error(q(188))}function CN(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wv(i),t;if(s===r)return Wv(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function xb(t){return t=CN(t),t!==null?Ab(t):null}function Ab(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ab(t);if(e!==null)return e;t=t.sibling}return null}var Sb=Hn.unstable_scheduleCallback,Kv=Hn.unstable_cancelCallback,NN=Hn.unstable_shouldYield,DN=Hn.unstable_requestPaint,ht=Hn.unstable_now,LN=Hn.unstable_getCurrentPriorityLevel,s0=Hn.unstable_ImmediatePriority,Rb=Hn.unstable_UserBlockingPriority,Kf=Hn.unstable_NormalPriority,ON=Hn.unstable_LowPriority,kb=Hn.unstable_IdlePriority,Gp=null,Qr=null;function VN(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Gp,t,void 0,(t.current.flags&128)===128)}catch{}}var Rr=Math.clz32?Math.clz32:jN,MN=Math.log,FN=Math.LN2;function jN(t){return t>>>=0,t===0?32:31-(MN(t)/FN|0)|0}var Lh=64,Oh=4194304;function iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=iu(a):(s&=o,s!==0&&(r=iu(s)))}else o=n&~i,o!==0?r=iu(o):s!==0&&(r=iu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Rr(e),i=1<<n,r|=t[n],e&=~i;return r}function UN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Rr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=UN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Sy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pb(){var t=Lh;return Lh<<=1,!(Lh&4194240)&&(Lh=64),t}function cg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rr(e),t[e]=n}function $N(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Rr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function o0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Rr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function Cb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nb,a0,Db,Lb,Ob,Ry=!1,Vh=[],Es=null,Ts=null,bs=null,Bu=new Map,$u=new Map,ls=[],zN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qv(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(e.pointerId)}}function $c(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pd(e),e!==null&&a0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GN(t,e,n,r,i){switch(e){case"focusin":return Es=$c(Es,t,e,n,r,i),!0;case"dragenter":return Ts=$c(Ts,t,e,n,r,i),!0;case"mouseover":return bs=$c(bs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bu.set(s,$c(Bu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$u.set(s,$c($u.get(s)||null,t,e,n,r,i)),!0}return!1}function Vb(t){var e=Po(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=bb(n),e!==null){t.blockedOn=e,Ob(t.priority,function(){Db(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ky(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ty=r,n.target.dispatchEvent(r),Ty=null}else return e=Pd(n),e!==null&&a0(e),t.blockedOn=n,!1;e.shift()}return!0}function Yv(t,e,n){hf(t)&&n.delete(e)}function qN(){Ry=!1,Es!==null&&hf(Es)&&(Es=null),Ts!==null&&hf(Ts)&&(Ts=null),bs!==null&&hf(bs)&&(bs=null),Bu.forEach(Yv),$u.forEach(Yv)}function zc(t,e){t.blockedOn===e&&(t.blockedOn=null,Ry||(Ry=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,qN)))}function zu(t){function e(i){return zc(i,t)}if(0<Vh.length){zc(Vh[0],t);for(var n=1;n<Vh.length;n++){var r=Vh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Es!==null&&zc(Es,t),Ts!==null&&zc(Ts,t),bs!==null&&zc(bs,t),Bu.forEach(e),$u.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)Vb(n),n.blockedOn===null&&ls.shift()}var wl=Si.ReactCurrentBatchConfig,Yf=!0;function HN(t,e,n,r){var i=Re,s=wl.transition;wl.transition=null;try{Re=1,l0(t,e,n,r)}finally{Re=i,wl.transition=s}}function WN(t,e,n,r){var i=Re,s=wl.transition;wl.transition=null;try{Re=4,l0(t,e,n,r)}finally{Re=i,wl.transition=s}}function l0(t,e,n,r){if(Yf){var i=ky(t,e,n,r);if(i===null)wg(t,e,r,Jf,n),Qv(t,r);else if(GN(i,t,e,n,r))r.stopPropagation();else if(Qv(t,r),e&4&&-1<zN.indexOf(t)){for(;i!==null;){var s=Pd(i);if(s!==null&&Nb(s),s=ky(t,e,n,r),s===null&&wg(t,e,r,Jf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wg(t,e,r,null,n)}}var Jf=null;function ky(t,e,n,r){if(Jf=null,t=i0(r),t=Po(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jf=t,null}function Mb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LN()){case s0:return 1;case Rb:return 4;case Kf:case ON:return 16;case kb:return 536870912;default:return 16}default:return 16}}var ys=null,c0=null,ff=null;function Fb(){if(ff)return ff;var t,e=c0,n=e.length,r,i="value"in ys?ys.value:ys.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ff=i.slice(t,1<r?1-r:void 0)}function pf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mh(){return!0}function Jv(){return!1}function Yn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mh:Jv,this.isPropagationStopped=Jv,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),e}var ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u0=Yn(ic),kd=rt({},ic,{view:0,detail:0}),KN=Yn(kd),ug,dg,Gc,qp=rt({},kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gc&&(Gc&&t.type==="mousemove"?(ug=t.screenX-Gc.screenX,dg=t.screenY-Gc.screenY):dg=ug=0,Gc=t),ug)},movementY:function(t){return"movementY"in t?t.movementY:dg}}),Xv=Yn(qp),QN=rt({},qp,{dataTransfer:0}),YN=Yn(QN),JN=rt({},kd,{relatedTarget:0}),hg=Yn(JN),XN=rt({},ic,{animationName:0,elapsedTime:0,pseudoElement:0}),ZN=Yn(XN),e2=rt({},ic,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t2=Yn(e2),n2=rt({},ic,{data:0}),Zv=Yn(n2),r2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function d0(){return o2}var a2=rt({},kd,{key:function(t){if(t.key){var e=r2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d0,charCode:function(t){return t.type==="keypress"?pf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),l2=Yn(a2),c2=rt({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eI=Yn(c2),u2=rt({},kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d0}),d2=Yn(u2),h2=rt({},ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),f2=Yn(h2),p2=rt({},qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),m2=Yn(p2),g2=[9,13,27,32],h0=yi&&"CompositionEvent"in window,mu=null;yi&&"documentMode"in document&&(mu=document.documentMode);var y2=yi&&"TextEvent"in window&&!mu,jb=yi&&(!h0||mu&&8<mu&&11>=mu),tI=String.fromCharCode(32),nI=!1;function Ub(t,e){switch(t){case"keyup":return g2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ol=!1;function _2(t,e){switch(t){case"compositionend":return Bb(e);case"keypress":return e.which!==32?null:(nI=!0,tI);case"textInput":return t=e.data,t===tI&&nI?null:t;default:return null}}function w2(t,e){if(ol)return t==="compositionend"||!h0&&Ub(t,e)?(t=Fb(),ff=c0=ys=null,ol=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jb&&e.locale!=="ko"?null:e.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v2[t.type]:e==="textarea"}function $b(t,e,n,r){wb(r),e=Xf(e,"onChange"),0<e.length&&(n=new u0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gu=null,Gu=null;function I2(t){Zb(t,0)}function Hp(t){var e=cl(t);if(hb(e))return t}function E2(t,e){if(t==="change")return e}var zb=!1;if(yi){var fg;if(yi){var pg="oninput"in document;if(!pg){var iI=document.createElement("div");iI.setAttribute("oninput","return;"),pg=typeof iI.oninput=="function"}fg=pg}else fg=!1;zb=fg&&(!document.documentMode||9<document.documentMode)}function sI(){gu&&(gu.detachEvent("onpropertychange",Gb),Gu=gu=null)}function Gb(t){if(t.propertyName==="value"&&Hp(Gu)){var e=[];$b(e,Gu,t,i0(t)),Tb(I2,e)}}function T2(t,e,n){t==="focusin"?(sI(),gu=e,Gu=n,gu.attachEvent("onpropertychange",Gb)):t==="focusout"&&sI()}function b2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hp(Gu)}function x2(t,e){if(t==="click")return Hp(e)}function A2(t,e){if(t==="input"||t==="change")return Hp(e)}function S2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cr=typeof Object.is=="function"?Object.is:S2;function qu(t,e){if(Cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!dy.call(e,i)||!Cr(t[i],e[i]))return!1}return!0}function oI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aI(t,e){var n=oI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oI(n)}}function qb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hb(){for(var t=window,e=qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qf(t.document)}return e}function f0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function R2(t){var e=Hb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qb(n.ownerDocument.documentElement,n)){if(r!==null&&f0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=aI(n,s);var o=aI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var k2=yi&&"documentMode"in document&&11>=document.documentMode,al=null,Py=null,yu=null,Cy=!1;function lI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cy||al==null||al!==qf(r)||(r=al,"selectionStart"in r&&f0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yu&&qu(yu,r)||(yu=r,r=Xf(Py,"onSelect"),0<r.length&&(e=new u0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=al)))}function Fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ll={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},mg={},Wb={};yi&&(Wb=document.createElement("div").style,"AnimationEvent"in window||(delete ll.animationend.animation,delete ll.animationiteration.animation,delete ll.animationstart.animation),"TransitionEvent"in window||delete ll.transitionend.transition);function Wp(t){if(mg[t])return mg[t];if(!ll[t])return t;var e=ll[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wb)return mg[t]=e[n];return t}var Kb=Wp("animationend"),Qb=Wp("animationiteration"),Yb=Wp("animationstart"),Jb=Wp("transitionend"),Xb=new Map,cI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){Xb.set(t,e),la(e,[t])}for(var gg=0;gg<cI.length;gg++){var yg=cI[gg],P2=yg.toLowerCase(),C2=yg[0].toUpperCase()+yg.slice(1);qs(P2,"on"+C2)}qs(Kb,"onAnimationEnd");qs(Qb,"onAnimationIteration");qs(Yb,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(Jb,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N2=new Set("cancel close invalid load scroll toggle".split(" ").concat(su));function uI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PN(r,e,void 0,t),t.currentTarget=null}function Zb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;uI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;uI(i,a,u),s=l}}}if(Wf)throw t=Ay,Wf=!1,Ay=null,t}function Be(t,e){var n=e[Vy];n===void 0&&(n=e[Vy]=new Set);var r=t+"__bubble";n.has(r)||(ex(e,t,2,!1),n.add(r))}function _g(t,e,n){var r=0;e&&(r|=4),ex(n,t,r,e)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Hu(t){if(!t[jh]){t[jh]=!0,ab.forEach(function(n){n!=="selectionchange"&&(N2.has(n)||_g(n,!1,t),_g(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jh]||(e[jh]=!0,_g("selectionchange",!1,e))}}function ex(t,e,n,r){switch(Mb(e)){case 1:var i=HN;break;case 4:i=WN;break;default:i=l0}n=i.bind(null,e,n,t),i=void 0,!xy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Po(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Tb(function(){var u=s,d=i0(n),h=[];e:{var m=Xb.get(t);if(m!==void 0){var y=u0,I=t;switch(t){case"keypress":if(pf(n)===0)break e;case"keydown":case"keyup":y=l2;break;case"focusin":I="focus",y=hg;break;case"focusout":I="blur",y=hg;break;case"beforeblur":case"afterblur":y=hg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=YN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=d2;break;case Kb:case Qb:case Yb:y=ZN;break;case Jb:y=f2;break;case"scroll":y=KN;break;case"wheel":y=m2;break;case"copy":case"cut":case"paste":y=t2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=eI}var S=(e&4)!==0,C=!S&&t==="scroll",E=S?m!==null?m+"Capture":null:m;S=[];for(var v=u,T;v!==null;){T=v;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,E!==null&&(L=Uu(v,E),L!=null&&S.push(Wu(v,L,T)))),C)break;v=v.return}0<S.length&&(m=new y(m,I,null,n,d),h.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Ty&&(I=n.relatedTarget||n.fromElement)&&(Po(I)||I[_i]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=u,I=I?Po(I):null,I!==null&&(C=ca(I),I!==C||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=u),y!==I)){if(S=Xv,L="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=eI,L="onPointerLeave",E="onPointerEnter",v="pointer"),C=y==null?m:cl(y),T=I==null?m:cl(I),m=new S(L,v+"leave",y,n,d),m.target=C,m.relatedTarget=T,L=null,Po(d)===u&&(S=new S(E,v+"enter",I,n,d),S.target=T,S.relatedTarget=C,L=S),C=L,y&&I)t:{for(S=y,E=I,v=0,T=S;T;T=Ba(T))v++;for(T=0,L=E;L;L=Ba(L))T++;for(;0<v-T;)S=Ba(S),v--;for(;0<T-v;)E=Ba(E),T--;for(;v--;){if(S===E||E!==null&&S===E.alternate)break t;S=Ba(S),E=Ba(E)}S=null}else S=null;y!==null&&dI(h,m,y,S,!1),I!==null&&C!==null&&dI(h,C,I,S,!0)}}e:{if(m=u?cl(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=E2;else if(rI(m))if(zb)U=A2;else{U=b2;var G=T2}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=x2);if(U&&(U=U(t,u))){$b(h,U,n,d);break e}G&&G(t,m,u),t==="focusout"&&(G=m._wrapperState)&&G.controlled&&m.type==="number"&&_y(m,"number",m.value)}switch(G=u?cl(u):window,t){case"focusin":(rI(G)||G.contentEditable==="true")&&(al=G,Py=u,yu=null);break;case"focusout":yu=Py=al=null;break;case"mousedown":Cy=!0;break;case"contextmenu":case"mouseup":case"dragend":Cy=!1,lI(h,n,d);break;case"selectionchange":if(k2)break;case"keydown":case"keyup":lI(h,n,d)}var x;if(h0)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ol?Ub(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(jb&&n.locale!=="ko"&&(ol||_!=="onCompositionStart"?_==="onCompositionEnd"&&ol&&(x=Fb()):(ys=d,c0="value"in ys?ys.value:ys.textContent,ol=!0)),G=Xf(u,_),0<G.length&&(_=new Zv(_,t,null,n,d),h.push({event:_,listeners:G}),x?_.data=x:(x=Bb(n),x!==null&&(_.data=x)))),(x=y2?_2(t,n):w2(t,n))&&(u=Xf(u,"onBeforeInput"),0<u.length&&(d=new Zv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=x))}Zb(h,e)})}function Wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uu(t,n),s!=null&&r.unshift(Wu(t,s,i)),s=Uu(t,e),s!=null&&r.push(Wu(t,s,i))),t=t.return}return r}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Uu(n,s),l!=null&&o.unshift(Wu(n,l,a))):i||(l=Uu(n,s),l!=null&&o.push(Wu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var D2=/\r\n?/g,L2=/\u0000|\uFFFD/g;function hI(t){return(typeof t=="string"?t:""+t).replace(D2,`
`).replace(L2,"")}function Uh(t,e,n){if(e=hI(e),hI(t)!==e&&n)throw Error(q(425))}function Zf(){}var Ny=null,Dy=null;function Ly(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Oy=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,fI=typeof Promise=="function"?Promise:void 0,V2=typeof queueMicrotask=="function"?queueMicrotask:typeof fI<"u"?function(t){return fI.resolve(null).then(t).catch(M2)}:Oy;function M2(t){setTimeout(function(){throw t})}function vg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zu(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sc=Math.random().toString(36).slice(2),Gr="__reactFiber$"+sc,Ku="__reactProps$"+sc,_i="__reactContainer$"+sc,Vy="__reactEvents$"+sc,F2="__reactListeners$"+sc,j2="__reactHandles$"+sc;function Po(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_i]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pI(t);t!==null;){if(n=t[Gr])return n;t=pI(t)}return e}t=n,n=t.parentNode}return null}function Pd(t){return t=t[Gr]||t[_i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Kp(t){return t[Ku]||null}var My=[],ul=-1;function Hs(t){return{current:t}}function Ge(t){0>ul||(t.current=My[ul],My[ul]=null,ul--)}function Fe(t,e){ul++,My[ul]=t.current,t.current=e}var Ms={},en=Hs(Ms),bn=Hs(!1),Go=Ms;function kl(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xn(t){return t=t.childContextTypes,t!=null}function ep(){Ge(bn),Ge(en)}function mI(t,e,n){if(en.current!==Ms)throw Error(q(168));Fe(en,e),Fe(bn,n)}function tx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,TN(t)||"Unknown",i));return rt({},n,r)}function tp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,Go=en.current,Fe(en,t),Fe(bn,bn.current),!0}function gI(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=tx(t,e,Go),r.__reactInternalMemoizedMergedChildContext=t,Ge(bn),Ge(en),Fe(en,t)):Ge(bn),Fe(bn,n)}var li=null,Qp=!1,Ig=!1;function nx(t){li===null?li=[t]:li.push(t)}function U2(t){Qp=!0,nx(t)}function Ws(){if(!Ig&&li!==null){Ig=!0;var t=0,e=Re;try{var n=li;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}li=null,Qp=!1}catch(i){throw li!==null&&(li=li.slice(t+1)),Sb(s0,Ws),i}finally{Re=e,Ig=!1}}return null}var dl=[],hl=0,np=null,rp=0,rr=[],ir=0,qo=null,ui=1,di="";function wo(t,e){dl[hl++]=rp,dl[hl++]=np,np=t,rp=e}function rx(t,e,n){rr[ir++]=ui,rr[ir++]=di,rr[ir++]=qo,qo=t;var r=ui;t=di;var i=32-Rr(r)-1;r&=~(1<<i),n+=1;var s=32-Rr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ui=1<<32-Rr(e)+i|n<<i|r,di=s+t}else ui=1<<s|n<<i|r,di=t}function p0(t){t.return!==null&&(wo(t,1),rx(t,1,0))}function m0(t){for(;t===np;)np=dl[--hl],dl[hl]=null,rp=dl[--hl],dl[hl]=null;for(;t===qo;)qo=rr[--ir],rr[ir]=null,di=rr[--ir],rr[ir]=null,ui=rr[--ir],rr[ir]=null}var $n=null,jn=null,Ye=!1,xr=null;function ix(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$n=t,jn=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$n=t,jn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qo!==null?{id:ui,overflow:di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$n=t,jn=null,!0):!1;default:return!1}}function Fy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jy(t){if(Ye){var e=jn;if(e){var n=e;if(!yI(t,e)){if(Fy(t))throw Error(q(418));e=xs(n.nextSibling);var r=$n;e&&yI(t,e)?ix(r,n):(t.flags=t.flags&-4097|2,Ye=!1,$n=t)}}else{if(Fy(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ye=!1,$n=t}}}function _I(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function Bh(t){if(t!==$n)return!1;if(!Ye)return _I(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ly(t.type,t.memoizedProps)),e&&(e=jn)){if(Fy(t))throw sx(),Error(q(418));for(;e;)ix(t,e),e=xs(e.nextSibling)}if(_I(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jn=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jn=null}}else jn=$n?xs(t.stateNode.nextSibling):null;return!0}function sx(){for(var t=jn;t;)t=xs(t.nextSibling)}function Pl(){jn=$n=null,Ye=!1}function g0(t){xr===null?xr=[t]:xr.push(t)}var B2=Si.ReactCurrentBatchConfig;function qc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function $h(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wI(t){var e=t._init;return e(t._payload)}function ox(t){function e(E,v){if(t){var T=E.deletions;T===null?(E.deletions=[v],E.flags|=16):T.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=ks(E,v),E.index=0,E.sibling=null,E}function s(E,v,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<v?(E.flags|=2,v):T):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,T,L){return v===null||v.tag!==6?(v=Rg(T,E.mode,L),v.return=E,v):(v=i(v,T),v.return=E,v)}function l(E,v,T,L){var U=T.type;return U===sl?d(E,v,T.props.children,L,T.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===is&&wI(U)===v.type)?(L=i(v,T.props),L.ref=qc(E,v,T),L.return=E,L):(L=If(T.type,T.key,T.props,null,E.mode,L),L.ref=qc(E,v,T),L.return=E,L)}function u(E,v,T,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=kg(T,E.mode,L),v.return=E,v):(v=i(v,T.children||[]),v.return=E,v)}function d(E,v,T,L,U){return v===null||v.tag!==7?(v=Fo(T,E.mode,L,U),v.return=E,v):(v=i(v,T),v.return=E,v)}function h(E,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rg(""+v,E.mode,T),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ch:return T=If(v.type,v.key,v.props,null,E.mode,T),T.ref=qc(E,null,v),T.return=E,T;case il:return v=kg(v,E.mode,T),v.return=E,v;case is:var L=v._init;return h(E,L(v._payload),T)}if(ru(v)||Uc(v))return v=Fo(v,E.mode,T,null),v.return=E,v;$h(E,v)}return null}function m(E,v,T,L){var U=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:a(E,v,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ch:return T.key===U?l(E,v,T,L):null;case il:return T.key===U?u(E,v,T,L):null;case is:return U=T._init,m(E,v,U(T._payload),L)}if(ru(T)||Uc(T))return U!==null?null:d(E,v,T,L,null);$h(E,T)}return null}function y(E,v,T,L,U){if(typeof L=="string"&&L!==""||typeof L=="number")return E=E.get(T)||null,a(v,E,""+L,U);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ch:return E=E.get(L.key===null?T:L.key)||null,l(v,E,L,U);case il:return E=E.get(L.key===null?T:L.key)||null,u(v,E,L,U);case is:var G=L._init;return y(E,v,T,G(L._payload),U)}if(ru(L)||Uc(L))return E=E.get(T)||null,d(v,E,L,U,null);$h(v,L)}return null}function I(E,v,T,L){for(var U=null,G=null,x=v,_=v=0,A=null;x!==null&&_<T.length;_++){x.index>_?(A=x,x=null):A=x.sibling;var b=m(E,x,T[_],L);if(b===null){x===null&&(x=A);break}t&&x&&b.alternate===null&&e(E,x),v=s(b,v,_),G===null?U=b:G.sibling=b,G=b,x=A}if(_===T.length)return n(E,x),Ye&&wo(E,_),U;if(x===null){for(;_<T.length;_++)x=h(E,T[_],L),x!==null&&(v=s(x,v,_),G===null?U=x:G.sibling=x,G=x);return Ye&&wo(E,_),U}for(x=r(E,x);_<T.length;_++)A=y(x,E,_,T[_],L),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?_:A.key),v=s(A,v,_),G===null?U=A:G.sibling=A,G=A);return t&&x.forEach(function(P){return e(E,P)}),Ye&&wo(E,_),U}function S(E,v,T,L){var U=Uc(T);if(typeof U!="function")throw Error(q(150));if(T=U.call(T),T==null)throw Error(q(151));for(var G=U=null,x=v,_=v=0,A=null,b=T.next();x!==null&&!b.done;_++,b=T.next()){x.index>_?(A=x,x=null):A=x.sibling;var P=m(E,x,b.value,L);if(P===null){x===null&&(x=A);break}t&&x&&P.alternate===null&&e(E,x),v=s(P,v,_),G===null?U=P:G.sibling=P,G=P,x=A}if(b.done)return n(E,x),Ye&&wo(E,_),U;if(x===null){for(;!b.done;_++,b=T.next())b=h(E,b.value,L),b!==null&&(v=s(b,v,_),G===null?U=b:G.sibling=b,G=b);return Ye&&wo(E,_),U}for(x=r(E,x);!b.done;_++,b=T.next())b=y(x,E,_,b.value,L),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?_:b.key),v=s(b,v,_),G===null?U=b:G.sibling=b,G=b);return t&&x.forEach(function(O){return e(E,O)}),Ye&&wo(E,_),U}function C(E,v,T,L){if(typeof T=="object"&&T!==null&&T.type===sl&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ch:e:{for(var U=T.key,G=v;G!==null;){if(G.key===U){if(U=T.type,U===sl){if(G.tag===7){n(E,G.sibling),v=i(G,T.props.children),v.return=E,E=v;break e}}else if(G.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===is&&wI(U)===G.type){n(E,G.sibling),v=i(G,T.props),v.ref=qc(E,G,T),v.return=E,E=v;break e}n(E,G);break}else e(E,G);G=G.sibling}T.type===sl?(v=Fo(T.props.children,E.mode,L,T.key),v.return=E,E=v):(L=If(T.type,T.key,T.props,null,E.mode,L),L.ref=qc(E,v,T),L.return=E,E=L)}return o(E);case il:e:{for(G=T.key;v!==null;){if(v.key===G)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(E,v.sibling),v=i(v,T.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=kg(T,E.mode,L),v.return=E,E=v}return o(E);case is:return G=T._init,C(E,v,G(T._payload),L)}if(ru(T))return I(E,v,T,L);if(Uc(T))return S(E,v,T,L);$h(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,T),v.return=E,E=v):(n(E,v),v=Rg(T,E.mode,L),v.return=E,E=v),o(E)):n(E,v)}return C}var Cl=ox(!0),ax=ox(!1),ip=Hs(null),sp=null,fl=null,y0=null;function _0(){y0=fl=sp=null}function w0(t){var e=ip.current;Ge(ip),t._currentValue=e}function Uy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vl(t,e){sp=t,y0=fl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(y0!==t)if(t={context:t,memoizedValue:e,next:null},fl===null){if(sp===null)throw Error(q(308));fl=t,sp.dependencies={lanes:0,firstContext:t}}else fl=fl.next=t;return e}var Co=null;function v0(t){Co===null?Co=[t]:Co.push(t)}function lx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,v0(e)):(n.next=i.next,i.next=n),e.interleaved=n,wi(t,r)}function wi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function I0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function As(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wi(t,n)}return i=r.interleaved,i===null?(e.next=e,v0(r)):(e.next=i.next,i.next=e),r.interleaved=e,wi(t,n)}function mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o0(t,n)}}function vI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function op(t,e,n,r){var i=t.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,S=a;switch(m=e,y=n,S.tag){case 1:if(I=S.payload,typeof I=="function"){h=I.call(y,h,m);break e}h=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=S.payload,m=typeof I=="function"?I.call(y,h,m):I,m==null)break e;h=rt({},h,m);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=h):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wo|=o,t.lanes=o,t.memoizedState=h}}function II(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Cd={},Yr=Hs(Cd),Qu=Hs(Cd),Yu=Hs(Cd);function No(t){if(t===Cd)throw Error(q(174));return t}function E0(t,e){switch(Fe(Yu,e),Fe(Qu,t),Fe(Yr,Cd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vy(e,t)}Ge(Yr),Fe(Yr,e)}function Nl(){Ge(Yr),Ge(Qu),Ge(Yu)}function ux(t){No(Yu.current);var e=No(Yr.current),n=vy(e,t.type);e!==n&&(Fe(Qu,t),Fe(Yr,n))}function T0(t){Qu.current===t&&(Ge(Yr),Ge(Qu))}var tt=Hs(0);function ap(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Eg=[];function b0(){for(var t=0;t<Eg.length;t++)Eg[t]._workInProgressVersionPrimary=null;Eg.length=0}var gf=Si.ReactCurrentDispatcher,Tg=Si.ReactCurrentBatchConfig,Ho=0,nt=null,vt=null,Rt=null,lp=!1,_u=!1,Ju=0,$2=0;function Ht(){throw Error(q(321))}function x0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cr(t[n],e[n]))return!1;return!0}function A0(t,e,n,r,i,s){if(Ho=s,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gf.current=t===null||t.memoizedState===null?H2:W2,t=n(r,i),_u){s=0;do{if(_u=!1,Ju=0,25<=s)throw Error(q(301));s+=1,Rt=vt=null,e.updateQueue=null,gf.current=K2,t=n(r,i)}while(_u)}if(gf.current=cp,e=vt!==null&&vt.next!==null,Ho=0,Rt=vt=nt=null,lp=!1,e)throw Error(q(300));return t}function S0(){var t=Ju!==0;return Ju=0,t}function Br(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function lr(){if(vt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Rt===null?nt.memoizedState:Rt.next;if(e!==null)Rt=e,vt=t;else{if(t===null)throw Error(q(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Rt===null?nt.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Xu(t,e){return typeof e=="function"?e(t):e}function bg(t){var e=lr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((Ho&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,nt.lanes|=d,Wo|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Cr(r,e.memoizedState)||(vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,nt.lanes|=s,Wo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xg(t){var e=lr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cr(s,e.memoizedState)||(vn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dx(){}function hx(t,e){var n=nt,r=lr(),i=e(),s=!Cr(r.memoizedState,i);if(s&&(r.memoizedState=i,vn=!0),r=r.queue,R0(mx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,Zu(9,px.bind(null,n,r,i,e),void 0,null),Pt===null)throw Error(q(349));Ho&30||fx(n,e,i)}return i}function fx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function px(t,e,n,r){e.value=n,e.getSnapshot=r,gx(e)&&yx(t)}function mx(t,e,n){return n(function(){gx(e)&&yx(t)})}function gx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cr(t,n)}catch{return!0}}function yx(t){var e=wi(t,1);e!==null&&kr(e,t,1,-1)}function EI(t){var e=Br();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:t},e.queue=t,t=t.dispatch=q2.bind(null,nt,t),[e.memoizedState,t]}function Zu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _x(){return lr().memoizedState}function yf(t,e,n,r){var i=Br();nt.flags|=t,i.memoizedState=Zu(1|e,n,void 0,r===void 0?null:r)}function Yp(t,e,n,r){var i=lr();r=r===void 0?null:r;var s=void 0;if(vt!==null){var o=vt.memoizedState;if(s=o.destroy,r!==null&&x0(r,o.deps)){i.memoizedState=Zu(e,n,s,r);return}}nt.flags|=t,i.memoizedState=Zu(1|e,n,s,r)}function TI(t,e){return yf(8390656,8,t,e)}function R0(t,e){return Yp(2048,8,t,e)}function wx(t,e){return Yp(4,2,t,e)}function vx(t,e){return Yp(4,4,t,e)}function Ix(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ex(t,e,n){return n=n!=null?n.concat([t]):null,Yp(4,4,Ix.bind(null,e,t),n)}function k0(){}function Tx(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bx(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xx(t,e,n){return Ho&21?(Cr(n,e)||(n=Pb(),nt.lanes|=n,Wo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vn=!0),t.memoizedState=n)}function z2(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Tg.transition;Tg.transition={};try{t(!1),e()}finally{Re=n,Tg.transition=r}}function Ax(){return lr().memoizedState}function G2(t,e,n){var r=Rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sx(t))Rx(e,n);else if(n=lx(t,e,n,r),n!==null){var i=un();kr(n,t,r,i),kx(n,e,r)}}function q2(t,e,n){var r=Rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sx(t))Rx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cr(a,o)){var l=e.interleaved;l===null?(i.next=i,v0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=lx(t,e,i,r),n!==null&&(i=un(),kr(n,t,r,i),kx(n,e,r))}}function Sx(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function Rx(t,e){_u=lp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o0(t,n)}}var cp={readContext:ar,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},H2={readContext:ar,useCallback:function(t,e){return Br().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:TI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yf(4194308,4,Ix.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yf(4194308,4,t,e)},useInsertionEffect:function(t,e){return yf(4,2,t,e)},useMemo:function(t,e){var n=Br();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Br();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=G2.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=Br();return t={current:t},e.memoizedState=t},useState:EI,useDebugValue:k0,useDeferredValue:function(t){return Br().memoizedState=t},useTransition:function(){var t=EI(!1),e=t[0];return t=z2.bind(null,t[1]),Br().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,i=Br();if(Ye){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Pt===null)throw Error(q(349));Ho&30||fx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,TI(mx.bind(null,r,s,t),[t]),r.flags|=2048,Zu(9,px.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Br(),e=Pt.identifierPrefix;if(Ye){var n=di,r=ui;n=(r&~(1<<32-Rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},W2={readContext:ar,useCallback:Tx,useContext:ar,useEffect:R0,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:vx,useMemo:bx,useReducer:bg,useRef:_x,useState:function(){return bg(Xu)},useDebugValue:k0,useDeferredValue:function(t){var e=lr();return xx(e,vt.memoizedState,t)},useTransition:function(){var t=bg(Xu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:dx,useSyncExternalStore:hx,useId:Ax,unstable_isNewReconciler:!1},K2={readContext:ar,useCallback:Tx,useContext:ar,useEffect:R0,useImperativeHandle:Ex,useInsertionEffect:wx,useLayoutEffect:vx,useMemo:bx,useReducer:xg,useRef:_x,useState:function(){return xg(Xu)},useDebugValue:k0,useDeferredValue:function(t){var e=lr();return vt===null?e.memoizedState=t:xx(e,vt.memoizedState,t)},useTransition:function(){var t=xg(Xu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:dx,useSyncExternalStore:hx,useId:Ax,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function By(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jp={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),i=Rs(t),s=mi(r,i);s.payload=e,n!=null&&(s.callback=n),e=As(t,s,i),e!==null&&(kr(e,t,i,r),mf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),i=Rs(t),s=mi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=As(t,s,i),e!==null&&(kr(e,t,i,r),mf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Rs(t),i=mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=As(t,i,r),e!==null&&(kr(e,t,r,n),mf(e,t,r))}};function bI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!qu(n,r)||!qu(i,s):!0}function Px(t,e,n){var r=!1,i=Ms,s=e.contextType;return typeof s=="object"&&s!==null?s=ar(s):(i=xn(e)?Go:en.current,r=e.contextTypes,s=(r=r!=null)?kl(t,i):Ms),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jp.enqueueReplaceState(e,e.state,null)}function $y(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},I0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ar(s):(s=xn(e)?Go:en.current,i.context=kl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(By(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jp.enqueueReplaceState(i,i.state,null),op(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dl(t,e){try{var n="",r=e;do n+=EN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ag(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Q2=typeof WeakMap=="function"?WeakMap:Map;function Cx(t,e,n){n=mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dp||(dp=!0,Zy=r),zy(t,e)},n}function Nx(t,e,n){n=mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zy(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function AI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Q2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cD.bind(null,t,e,n),e.then(t,t))}function SI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function RI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mi(-1,1),e.tag=2,As(n,e,1))),n.lanes|=1),t)}var Y2=Si.ReactCurrentOwner,vn=!1;function cn(t,e,n,r){e.child=t===null?ax(e,null,n,r):Cl(e,t.child,n,r)}function kI(t,e,n,r,i){n=n.render;var s=e.ref;return vl(e,i),r=A0(t,e,n,r,s,i),n=S0(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vi(t,e,i)):(Ye&&n&&p0(e),e.flags|=1,cn(t,e,r,i),e.child)}function PI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!M0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dx(t,e,s,r,i)):(t=If(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qu,n(o,r)&&t.ref===e.ref)return vi(t,e,i)}return e.flags|=1,t=ks(s,r),t.ref=e.ref,t.return=e,e.child=t}function Dx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(qu(s,r)&&t.ref===e.ref)if(vn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(vn=!0);else return e.lanes=t.lanes,vi(t,e,i)}return Gy(t,e,n,r,i)}function Lx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ml,On),On|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(ml,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Fe(ml,On),On|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Fe(ml,On),On|=r;return cn(t,e,i,n),e.child}function Ox(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gy(t,e,n,r,i){var s=xn(n)?Go:en.current;return s=kl(e,s),vl(e,i),n=A0(t,e,n,r,s,i),r=S0(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,vi(t,e,i)):(Ye&&r&&p0(e),e.flags|=1,cn(t,e,n,i),e.child)}function CI(t,e,n,r,i){if(xn(n)){var s=!0;tp(e)}else s=!1;if(vl(e,i),e.stateNode===null)_f(t,e),Px(e,n,r),$y(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=xn(n)?Go:en.current,u=kl(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&xI(e,o,r,u),ss=!1;var m=e.memoizedState;o.state=m,op(e,r,o,i),l=e.memoizedState,a!==r||m!==l||bn.current||ss?(typeof d=="function"&&(By(e,n,d,r),l=e.memoizedState),(a=ss||bI(e,n,a,r,m,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:vr(e.type,a),o.props=u,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ar(l):(l=xn(n)?Go:en.current,l=kl(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&xI(e,o,r,l),ss=!1,m=e.memoizedState,o.state=m,op(e,r,o,i);var I=e.memoizedState;a!==h||m!==I||bn.current||ss?(typeof y=="function"&&(By(e,n,y,r),I=e.memoizedState),(u=ss||bI(e,n,u,r,m,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return qy(t,e,n,r,s,i)}function qy(t,e,n,r,i,s){Ox(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gI(e,n,!1),vi(t,e,s);r=e.stateNode,Y2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cl(e,t.child,null,s),e.child=Cl(e,null,a,s)):cn(t,e,a,s),e.memoizedState=r.state,i&&gI(e,n,!0),e.child}function Vx(t){var e=t.stateNode;e.pendingContext?mI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mI(t,e.context,!1),E0(t,e.containerInfo)}function NI(t,e,n,r,i){return Pl(),g0(i),e.flags|=256,cn(t,e,n,r),e.child}var Hy={dehydrated:null,treeContext:null,retryLane:0};function Wy(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mx(t,e,n){var r=e.pendingProps,i=tt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(tt,i&1),t===null)return jy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=em(o,r,0,null),t=Fo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wy(n),e.memoizedState=Hy,t):P0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return J2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ks(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ks(a,s):(s=Fo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hy,r}return s=t.child,t=s.sibling,r=ks(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function P0(t,e){return e=em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zh(t,e,n,r){return r!==null&&g0(r),Cl(e,t.child,null,n),t=P0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ag(Error(q(422))),zh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=em({mode:"visible",children:r.children},i,0,null),s=Fo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Cl(e,t.child,null,o),e.child.memoizedState=Wy(o),e.memoizedState=Hy,s);if(!(e.mode&1))return zh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Ag(s,r,void 0),zh(t,e,o,r)}if(a=(o&t.childLanes)!==0,vn||a){if(r=Pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wi(t,i),kr(r,t,i,-1))}return V0(),r=Ag(Error(q(421))),zh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jn=xs(i.nextSibling),$n=e,Ye=!0,xr=null,t!==null&&(rr[ir++]=ui,rr[ir++]=di,rr[ir++]=qo,ui=t.id,di=t.overflow,qo=e),e=P0(e,r.children),e.flags|=4096,e)}function DI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uy(t.return,e,n)}function Sg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Fx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(cn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&DI(t,n,e);else if(t.tag===19)DI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fe(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ap(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ap(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sg(e,!0,n,null,s);break;case"together":Sg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _f(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X2(t,e,n){switch(e.tag){case 3:Vx(e),Pl();break;case 5:ux(e);break;case 1:xn(e.type)&&tp(e);break;case 4:E0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fe(ip,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?Mx(t,e,n):(Fe(tt,tt.current&1),t=vi(t,e,n),t!==null?t.sibling:null);Fe(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,Lx(t,e,n)}return vi(t,e,n)}var jx,Ky,Ux,Bx;jx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ky=function(){};Ux=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,No(Yr.current);var s=null;switch(n){case"input":i=gy(t,i),r=gy(t,r),s=[];break;case"select":i=rt({},i,{value:void 0}),r=rt({},r,{value:void 0}),s=[];break;case"textarea":i=wy(t,i),r=wy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zf)}Iy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Bx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hc(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z2(t,e,n){var r=e.pendingProps;switch(m0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return xn(e.type)&&ep(),Wt(e),null;case 3:return r=e.stateNode,Nl(),Ge(bn),Ge(en),b0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(n_(xr),xr=null))),Ky(t,e),Wt(e),null;case 5:T0(e);var i=No(Yu.current);if(n=e.type,t!==null&&e.stateNode!=null)Ux(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Wt(e),null}if(t=No(Yr.current),Bh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[Ku]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<su.length;i++)Be(su[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":$v(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":Gv(r,s),Be("invalid",r)}Iy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Uh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Uh(r.textContent,a,t),i=["children",""+a]):Fu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Nh(r),zv(r,s,!0);break;case"textarea":Nh(r),qv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gr]=e,t[Ku]=r,jx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ey(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<su.length;i++)Be(su[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":$v(t,r),i=gy(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=rt({},r,{value:void 0}),Be("invalid",t);break;case"textarea":Gv(t,r),i=wy(t,r),Be("invalid",t);break;default:i=r}Iy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_b(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&gb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ju(t,l):typeof l=="number"&&ju(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",t):l!=null&&e0(t,s,l,o))}switch(n){case"input":Nh(t),zv(t,r,!1);break;case"textarea":Nh(t),qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?gl(t,!!r.multiple,s,!1):r.defaultValue!=null&&gl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)Bx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=No(Yu.current),No(Yr.current),Bh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,(s=r.nodeValue!==n)&&(t=$n,t!==null))switch(t.tag){case 3:Uh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gr]=e,e.stateNode=r}return Wt(e),null;case 13:if(Ge(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&jn!==null&&e.mode&1&&!(e.flags&128))sx(),Pl(),e.flags|=98560,s=!1;else if(s=Bh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[Gr]=e}else Pl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else xr!==null&&(n_(xr),xr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?It===0&&(It=3):V0())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return Nl(),Ky(t,e),t===null&&Hu(e.stateNode.containerInfo),Wt(e),null;case 10:return w0(e.type._context),Wt(e),null;case 17:return xn(e.type)&&ep(),Wt(e),null;case 19:if(Ge(tt),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hc(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ap(t),o!==null){for(e.flags|=128,Hc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&ht()>Ll&&(e.flags|=128,r=!0,Hc(s,!1),e.lanes=4194304)}else{if(!r)if(t=ap(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ye)return Wt(e),null}else 2*ht()-s.renderingStartTime>Ll&&n!==1073741824&&(e.flags|=128,r=!0,Hc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,n=tt.current,Fe(tt,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return O0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function eD(t,e){switch(m0(e),e.tag){case 1:return xn(e.type)&&ep(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nl(),Ge(bn),Ge(en),b0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return T0(e),null;case 13:if(Ge(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Pl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(tt),null;case 4:return Nl(),null;case 10:return w0(e.type._context),null;case 22:case 23:return O0(),null;case 24:return null;default:return null}}var Gh=!1,Yt=!1,tD=typeof WeakSet=="function"?WeakSet:Set,Z=null;function pl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function Qy(t,e,n){try{n()}catch(r){st(t,e,r)}}var LI=!1;function nD(t,e){if(Ny=Yf,t=Hb(),f0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dy={focusedElem:t,selectionRange:n},Yf=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var S=I.memoizedProps,C=I.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?S:vr(e.type,S),C);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(L){st(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return I=LI,LI=!1,I}function wu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qy(e,n,s)}i=i.next}while(i!==r)}}function Xp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $x(t){var e=t.alternate;e!==null&&(t.alternate=null,$x(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[Ku],delete e[Vy],delete e[F2],delete e[j2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zx(t){return t.tag===5||t.tag===3||t.tag===4}function OI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zf));else if(r!==4&&(t=t.child,t!==null))for(Jy(t,e,n),t=t.sibling;t!==null;)Jy(t,e,n),t=t.sibling}function Xy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xy(t,e,n),t=t.sibling;t!==null;)Xy(t,e,n),t=t.sibling}var Mt=null,Tr=!1;function Xi(t,e,n){for(n=n.child;n!==null;)Gx(t,e,n),n=n.sibling}function Gx(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Gp,n)}catch{}switch(n.tag){case 5:Yt||pl(n,e);case 6:var r=Mt,i=Tr;Mt=null,Xi(t,e,n),Mt=r,Tr=i,Mt!==null&&(Tr?(t=Mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(Tr?(t=Mt,n=n.stateNode,t.nodeType===8?vg(t.parentNode,n):t.nodeType===1&&vg(t,n),zu(t)):vg(Mt,n.stateNode));break;case 4:r=Mt,i=Tr,Mt=n.stateNode.containerInfo,Tr=!0,Xi(t,e,n),Mt=r,Tr=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qy(n,e,o),i=i.next}while(i!==r)}Xi(t,e,n);break;case 1:if(!Yt&&(pl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){st(n,e,a)}Xi(t,e,n);break;case 21:Xi(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,Xi(t,e,n),Yt=r):Xi(t,e,n);break;default:Xi(t,e,n)}}function VI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tD),e.forEach(function(r){var i=dD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mt=a.stateNode,Tr=!1;break e;case 3:Mt=a.stateNode.containerInfo,Tr=!0;break e;case 4:Mt=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(Mt===null)throw Error(q(160));Gx(s,o,i),Mt=null,Tr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){st(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qx(e,t),e=e.sibling}function qx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wr(e,t),Ur(t),r&4){try{wu(3,t,t.return),Xp(3,t)}catch(S){st(t,t.return,S)}try{wu(5,t,t.return)}catch(S){st(t,t.return,S)}}break;case 1:wr(e,t),Ur(t),r&512&&n!==null&&pl(n,n.return);break;case 5:if(wr(e,t),Ur(t),r&512&&n!==null&&pl(n,n.return),t.flags&32){var i=t.stateNode;try{ju(i,"")}catch(S){st(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fb(i,s),Ey(a,o);var u=Ey(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?_b(i,h):d==="dangerouslySetInnerHTML"?gb(i,h):d==="children"?ju(i,h):e0(i,d,h,u)}switch(a){case"input":yy(i,s);break;case"textarea":pb(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?gl(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?gl(i,!!s.multiple,s.defaultValue,!0):gl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ku]=s}catch(S){st(t,t.return,S)}}break;case 6:if(wr(e,t),Ur(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){st(t,t.return,S)}}break;case 3:if(wr(e,t),Ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zu(e.containerInfo)}catch(S){st(t,t.return,S)}break;case 4:wr(e,t),Ur(t);break;case 13:wr(e,t),Ur(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(D0=ht())),r&4&&VI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(u=Yt)||d,wr(e,t),Yt=u):wr(e,t),Ur(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Z=t,d=t.child;d!==null;){for(h=Z=d;Z!==null;){switch(m=Z,y=m.child,m.tag){case 0:case 11:case 14:case 15:wu(4,m,m.return);break;case 1:pl(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(S){st(r,n,S)}}break;case 5:pl(m,m.return);break;case 22:if(m.memoizedState!==null){FI(h);continue}}y!==null?(y.return=m,Z=y):FI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yb("display",o))}catch(S){st(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(S){st(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wr(e,t),Ur(t),r&4&&VI(t);break;case 21:break;default:wr(e,t),Ur(t)}}function Ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zx(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ju(i,""),r.flags&=-33);var s=OI(t);Xy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=OI(t);Jy(t,a,o);break;default:throw Error(q(161))}}catch(l){st(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rD(t,e,n){Z=t,Hx(t)}function Hx(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Gh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Yt;a=Gh;var u=Yt;if(Gh=o,(Yt=l)&&!u)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?jI(i):l!==null?(l.return=o,Z=l):jI(i);for(;s!==null;)Z=s,Hx(s),s=s.sibling;Z=i,Gh=a,Yt=u}MI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):MI(t)}}function MI(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Xp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&II(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}II(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&zu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Yt||e.flags&512&&Yy(e)}catch(m){st(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function FI(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function jI(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xp(4,e)}catch(l){st(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){st(e,i,l)}}var s=e.return;try{Yy(e)}catch(l){st(e,s,l)}break;case 5:var o=e.return;try{Yy(e)}catch(l){st(e,o,l)}}}catch(l){st(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var iD=Math.ceil,up=Si.ReactCurrentDispatcher,C0=Si.ReactCurrentOwner,or=Si.ReactCurrentBatchConfig,ve=0,Pt=null,_t=null,Ut=0,On=0,ml=Hs(0),It=0,ed=null,Wo=0,Zp=0,N0=0,vu=null,wn=null,D0=0,Ll=1/0,ai=null,dp=!1,Zy=null,Ss=null,qh=!1,_s=null,hp=0,Iu=0,e_=null,wf=-1,vf=0;function un(){return ve&6?ht():wf!==-1?wf:wf=ht()}function Rs(t){return t.mode&1?ve&2&&Ut!==0?Ut&-Ut:B2.transition!==null?(vf===0&&(vf=Pb()),vf):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Mb(t.type)),t):1}function kr(t,e,n,r){if(50<Iu)throw Iu=0,e_=null,Error(q(185));Rd(t,n,r),(!(ve&2)||t!==Pt)&&(t===Pt&&(!(ve&2)&&(Zp|=n),It===4&&cs(t,Ut)),An(t,r),n===1&&ve===0&&!(e.mode&1)&&(Ll=ht()+500,Qp&&Ws()))}function An(t,e){var n=t.callbackNode;BN(t,e);var r=Qf(t,t===Pt?Ut:0);if(r===0)n!==null&&Kv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kv(n),e===1)t.tag===0?U2(UI.bind(null,t)):nx(UI.bind(null,t)),V2(function(){!(ve&6)&&Ws()}),n=null;else{switch(Cb(r)){case 1:n=s0;break;case 4:n=Rb;break;case 16:n=Kf;break;case 536870912:n=kb;break;default:n=Kf}n=eA(n,Wx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Wx(t,e){if(wf=-1,vf=0,ve&6)throw Error(q(327));var n=t.callbackNode;if(Il()&&t.callbackNode!==n)return null;var r=Qf(t,t===Pt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fp(t,r);else{e=r;var i=ve;ve|=2;var s=Qx();(Pt!==t||Ut!==e)&&(ai=null,Ll=ht()+500,Mo(t,e));do try{aD();break}catch(a){Kx(t,a)}while(1);_0(),up.current=s,ve=i,_t!==null?e=0:(Pt=null,Ut=0,e=It)}if(e!==0){if(e===2&&(i=Sy(t),i!==0&&(r=i,e=t_(t,i))),e===1)throw n=ed,Mo(t,0),cs(t,r),An(t,ht()),n;if(e===6)cs(t,r);else{if(i=t.current.alternate,!(r&30)&&!sD(i)&&(e=fp(t,r),e===2&&(s=Sy(t),s!==0&&(r=s,e=t_(t,s))),e===1))throw n=ed,Mo(t,0),cs(t,r),An(t,ht()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:vo(t,wn,ai);break;case 3:if(cs(t,r),(r&130023424)===r&&(e=D0+500-ht(),10<e)){if(Qf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Oy(vo.bind(null,t,wn,ai),e);break}vo(t,wn,ai);break;case 4:if(cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Rr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iD(r/1960))-r,10<r){t.timeoutHandle=Oy(vo.bind(null,t,wn,ai),r);break}vo(t,wn,ai);break;case 5:vo(t,wn,ai);break;default:throw Error(q(329))}}}return An(t,ht()),t.callbackNode===n?Wx.bind(null,t):null}function t_(t,e){var n=vu;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=fp(t,e),t!==2&&(e=wn,wn=n,e!==null&&n_(e)),t}function n_(t){wn===null?wn=t:wn.push.apply(wn,t)}function sD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cs(t,e){for(e&=~N0,e&=~Zp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Rr(e),r=1<<n;t[n]=-1,e&=~r}}function UI(t){if(ve&6)throw Error(q(327));Il();var e=Qf(t,0);if(!(e&1))return An(t,ht()),null;var n=fp(t,e);if(t.tag!==0&&n===2){var r=Sy(t);r!==0&&(e=r,n=t_(t,r))}if(n===1)throw n=ed,Mo(t,0),cs(t,e),An(t,ht()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vo(t,wn,ai),An(t,ht()),null}function L0(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Ll=ht()+500,Qp&&Ws())}}function Ko(t){_s!==null&&_s.tag===0&&!(ve&6)&&Il();var e=ve;ve|=1;var n=or.transition,r=Re;try{if(or.transition=null,Re=1,t)return t()}finally{Re=r,or.transition=n,ve=e,!(ve&6)&&Ws()}}function O0(){On=ml.current,Ge(ml)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,O2(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(m0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ep();break;case 3:Nl(),Ge(bn),Ge(en),b0();break;case 5:T0(r);break;case 4:Nl();break;case 13:Ge(tt);break;case 19:Ge(tt);break;case 10:w0(r.type._context);break;case 22:case 23:O0()}n=n.return}if(Pt=t,_t=t=ks(t.current,null),Ut=On=e,It=0,ed=null,N0=Zp=Wo=0,wn=vu=null,Co!==null){for(e=0;e<Co.length;e++)if(n=Co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Co=null}return t}function Kx(t,e){do{var n=_t;try{if(_0(),gf.current=cp,lp){for(var r=nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lp=!1}if(Ho=0,Rt=vt=nt=null,_u=!1,Ju=0,C0.current=null,n===null||n.return===null){It=1,ed=e,_t=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=SI(o);if(y!==null){y.flags&=-257,RI(y,o,a,s,e),y.mode&1&&AI(s,u,e),e=y,l=u;var I=e.updateQueue;if(I===null){var S=new Set;S.add(l),e.updateQueue=S}else I.add(l);break e}else{if(!(e&1)){AI(s,u,e),V0();break e}l=Error(q(426))}}else if(Ye&&a.mode&1){var C=SI(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),RI(C,o,a,s,e),g0(Dl(l,a));break e}}s=l=Dl(l,a),It!==4&&(It=2),vu===null?vu=[s]:vu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Cx(s,l,e);vI(s,E);break e;case 1:a=l;var v=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ss===null||!Ss.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=Nx(s,a,e);vI(s,L);break e}}s=s.return}while(s!==null)}Jx(n)}catch(U){e=U,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(1)}function Qx(){var t=up.current;return up.current=cp,t===null?cp:t}function V0(){(It===0||It===3||It===2)&&(It=4),Pt===null||!(Wo&268435455)&&!(Zp&268435455)||cs(Pt,Ut)}function fp(t,e){var n=ve;ve|=2;var r=Qx();(Pt!==t||Ut!==e)&&(ai=null,Mo(t,e));do try{oD();break}catch(i){Kx(t,i)}while(1);if(_0(),ve=n,up.current=r,_t!==null)throw Error(q(261));return Pt=null,Ut=0,It}function oD(){for(;_t!==null;)Yx(_t)}function aD(){for(;_t!==null&&!NN();)Yx(_t)}function Yx(t){var e=Zx(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?Jx(t):_t=e,C0.current=null}function Jx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eD(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,_t=null;return}}else if(n=Z2(n,e,On),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);It===0&&(It=5)}function vo(t,e,n){var r=Re,i=or.transition;try{or.transition=null,Re=1,lD(t,e,n,r)}finally{or.transition=i,Re=r}return null}function lD(t,e,n,r){do Il();while(_s!==null);if(ve&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($N(t,s),t===Pt&&(_t=Pt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qh||(qh=!0,eA(Kf,function(){return Il(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=or.transition,or.transition=null;var o=Re;Re=1;var a=ve;ve|=4,C0.current=null,nD(t,n),qx(n,t),R2(Dy),Yf=!!Ny,Dy=Ny=null,t.current=n,rD(n),DN(),ve=a,Re=o,or.transition=s}else t.current=n;if(qh&&(qh=!1,_s=t,hp=i),s=t.pendingLanes,s===0&&(Ss=null),VN(n.stateNode),An(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dp)throw dp=!1,t=Zy,Zy=null,t;return hp&1&&t.tag!==0&&Il(),s=t.pendingLanes,s&1?t===e_?Iu++:(Iu=0,e_=t):Iu=0,Ws(),null}function Il(){if(_s!==null){var t=Cb(hp),e=or.transition,n=Re;try{if(or.transition=null,Re=16>t?16:t,_s===null)var r=!1;else{if(t=_s,_s=null,hp=0,ve&6)throw Error(q(331));var i=ve;for(ve|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:wu(8,d,s)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var m=d.sibling,y=d.return;if($x(d),d===u){Z=null;break}if(m!==null){m.return=y,Z=m;break}Z=y}}}var I=s.alternate;if(I!==null){var S=I.child;if(S!==null){I.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wu(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Z=E;break e}Z=s.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Z=T;else e:for(o=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xp(9,a)}}catch(U){st(a,a.return,U)}if(a===o){Z=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,Z=L;break e}Z=a.return}}if(ve=i,Ws(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Gp,t)}catch{}r=!0}return r}finally{Re=n,or.transition=e}}return!1}function BI(t,e,n){e=Dl(n,e),e=Cx(t,e,1),t=As(t,e,1),e=un(),t!==null&&(Rd(t,1,e),An(t,e))}function st(t,e,n){if(t.tag===3)BI(t,t,n);else for(;e!==null;){if(e.tag===3){BI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=Dl(n,t),t=Nx(e,t,1),e=As(e,t,1),t=un(),e!==null&&(Rd(e,1,t),An(e,t));break}}e=e.return}}function cD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Ut&n)===n&&(It===4||It===3&&(Ut&130023424)===Ut&&500>ht()-D0?Mo(t,0):N0|=n),An(t,e)}function Xx(t,e){e===0&&(t.mode&1?(e=Oh,Oh<<=1,!(Oh&130023424)&&(Oh=4194304)):e=1);var n=un();t=wi(t,e),t!==null&&(Rd(t,e,n),An(t,n))}function uD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xx(t,n)}function dD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Xx(t,n)}var Zx;Zx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vn=!1,X2(t,e,n);vn=!!(t.flags&131072)}else vn=!1,Ye&&e.flags&1048576&&rx(e,rp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_f(t,e),t=e.pendingProps;var i=kl(e,en.current);vl(e,n),i=A0(null,e,r,t,i,n);var s=S0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(r)?(s=!0,tp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,I0(e),i.updater=Jp,e.stateNode=i,i._reactInternals=e,$y(e,r,t,n),e=qy(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&p0(e),cn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_f(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fD(r),t=vr(r,t),i){case 0:e=Gy(null,e,r,t,n);break e;case 1:e=CI(null,e,r,t,n);break e;case 11:e=kI(null,e,r,t,n);break e;case 14:e=PI(null,e,r,vr(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),Gy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),CI(t,e,r,i,n);case 3:e:{if(Vx(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cx(t,e),op(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dl(Error(q(423)),e),e=NI(t,e,r,n,i);break e}else if(r!==i){i=Dl(Error(q(424)),e),e=NI(t,e,r,n,i);break e}else for(jn=xs(e.stateNode.containerInfo.firstChild),$n=e,Ye=!0,xr=null,n=ax(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pl(),r===i){e=vi(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return ux(e),t===null&&jy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ly(r,i)?o=null:s!==null&&Ly(r,s)&&(e.flags|=32),Ox(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&jy(e),null;case 13:return Mx(t,e,n);case 4:return E0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cl(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),kI(t,e,r,i,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fe(ip,r._currentValue),r._currentValue=o,s!==null)if(Cr(s.value,o)){if(s.children===i.children&&!bn.current){e=vi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Uy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Uy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}cn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vl(e,n),i=ar(i),r=r(i),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,i=vr(r,e.pendingProps),i=vr(r.type,i),PI(t,e,r,i,n);case 15:return Dx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vr(r,i),_f(t,e),e.tag=1,xn(r)?(t=!0,tp(e)):t=!1,vl(e,n),Px(e,r,i),$y(e,r,i,n),qy(null,e,r,!0,t,n);case 19:return Fx(t,e,n);case 22:return Lx(t,e,n)}throw Error(q(156,e.tag))};function eA(t,e){return Sb(t,e)}function hD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new hD(t,e,n,r)}function M0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fD(t){if(typeof t=="function")return M0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n0)return 11;if(t===r0)return 14}return 2}function ks(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function If(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")M0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sl:return Fo(n.children,i,s,e);case t0:o=8,i|=8;break;case hy:return t=sr(12,n,e,i|2),t.elementType=hy,t.lanes=s,t;case fy:return t=sr(13,n,e,i),t.elementType=fy,t.lanes=s,t;case py:return t=sr(19,n,e,i),t.elementType=py,t.lanes=s,t;case ub:return em(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lb:o=10;break e;case cb:o=9;break e;case n0:o=11;break e;case r0:o=14;break e;case is:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=sr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Fo(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function em(t,e,n,r){return t=sr(22,t,r,e),t.elementType=ub,t.lanes=n,t.stateNode={isHidden:!1},t}function Rg(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function kg(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cg(0),this.expirationTimes=cg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function F0(t,e,n,r,i,s,o,a,l){return t=new pD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I0(s),t}function mD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:il,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tA(t){if(!t)return Ms;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(xn(n))return tx(t,n,e)}return e}function nA(t,e,n,r,i,s,o,a,l){return t=F0(n,r,!0,t,i,s,o,a,l),t.context=tA(null),n=t.current,r=un(),i=Rs(n),s=mi(r,i),s.callback=e??null,As(n,s,i),t.current.lanes=i,Rd(t,i,r),An(t,r),t}function tm(t,e,n,r){var i=e.current,s=un(),o=Rs(i);return n=tA(n),e.context===null?e.context=n:e.pendingContext=n,e=mi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=As(i,e,o),t!==null&&(kr(t,i,o,s),mf(t,i,o)),o}function pp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $I(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function j0(t,e){$I(t,e),(t=t.alternate)&&$I(t,e)}function gD(){return null}var rA=typeof reportError=="function"?reportError:function(t){console.error(t)};function U0(t){this._internalRoot=t}nm.prototype.render=U0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));tm(t,e,null,null)};nm.prototype.unmount=U0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){tm(null,t,null,null)}),e[_i]=null}};function nm(t){this._internalRoot=t}nm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&Vb(t)}};function B0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zI(){}function yD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=pp(o);s.call(u)}}var o=nA(e,r,t,0,null,!1,!1,"",zI);return t._reactRootContainer=o,t[_i]=o.current,Hu(t.nodeType===8?t.parentNode:t),Ko(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=pp(l);a.call(u)}}var l=F0(t,0,!1,null,null,!1,!1,"",zI);return t._reactRootContainer=l,t[_i]=l.current,Hu(t.nodeType===8?t.parentNode:t),Ko(function(){tm(e,l,n,r)}),l}function im(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=pp(o);a.call(l)}}tm(e,o,t,i)}else o=yD(n,e,t,i,r);return pp(o)}Nb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iu(e.pendingLanes);n!==0&&(o0(e,n|1),An(e,ht()),!(ve&6)&&(Ll=ht()+500,Ws()))}break;case 13:Ko(function(){var r=wi(t,1);if(r!==null){var i=un();kr(r,t,1,i)}}),j0(t,1)}};a0=function(t){if(t.tag===13){var e=wi(t,134217728);if(e!==null){var n=un();kr(e,t,134217728,n)}j0(t,134217728)}};Db=function(t){if(t.tag===13){var e=Rs(t),n=wi(t,e);if(n!==null){var r=un();kr(n,t,e,r)}j0(t,e)}};Lb=function(){return Re};Ob=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};by=function(t,e,n){switch(e){case"input":if(yy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Kp(r);if(!i)throw Error(q(90));hb(r),yy(r,i)}}}break;case"textarea":pb(t,n);break;case"select":e=n.value,e!=null&&gl(t,!!n.multiple,e,!1)}};Ib=L0;Eb=Ko;var _D={usingClientEntryPoint:!1,Events:[Pd,cl,Kp,wb,vb,L0]},Wc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wD={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xb(t),t===null?null:t.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||gD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{Gp=Hh.inject(wD),Qr=Hh}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_D;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B0(e))throw Error(q(200));return mD(t,e,null,n)};Qn.createRoot=function(t,e){if(!B0(t))throw Error(q(299));var n=!1,r="",i=rA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=F0(t,1,!1,null,null,n,!1,r,i),t[_i]=e.current,Hu(t.nodeType===8?t.parentNode:t),new U0(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=xb(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return Ko(t)};Qn.hydrate=function(t,e,n){if(!rm(e))throw Error(q(200));return im(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!B0(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nA(e,null,t,1,n??null,i,!1,s,o),t[_i]=e.current,Hu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new nm(e)};Qn.render=function(t,e,n){if(!rm(e))throw Error(q(200));return im(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!rm(t))throw Error(q(40));return t._reactRootContainer?(Ko(function(){im(null,null,t,!1,function(){t._reactRootContainer=null,t[_i]=null})}),!0):!1};Qn.unstable_batchedUpdates=L0;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rm(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return im(t,e,n,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function iA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iA)}catch(t){console.error(t)}}iA(),ib.exports=Qn;var $0=ib.exports,GI=$0;uy.createRoot=GI.createRoot,uy.hydrateRoot=GI.hydrateRoot;const vD="modulepreload",ID=function(t){return"/"+t},qI={},oi=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ID(s),s in qI)return;qI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":vD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var ED={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const TD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bD=(t,e)=>{const n=B.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>B.createElement("svg",{ref:u,...ED,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${TD(t)}`,...l},[...e.map(([d,h])=>B.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var qe=bD;const sA=qe("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),$a=qe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),r_=qe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),HI=qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),mp=qe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),xD=qe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vt=qe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),za=qe("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),AD=qe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),WI=qe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),yn=qe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),KI=qe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Kc=qe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),QI=qe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),YI=qe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),JI=qe("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),XI=qe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ZI=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),eE=qe("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),os=qe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Pg=qe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),tE=qe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Cg=qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),nE=qe("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Ps=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),SD=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},aA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[d],n[h],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new kD;const m=s<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),h!==64){const I=u<<6&192|h;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PD=function(t){const e=oA(t);return aA.encodeByteArray(e,!0)},gp=function(t){return PD(t).replace(/\./g,"")},lA=function(t){try{return aA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=()=>cA().__FIREBASE_DEFAULTS__,ND=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lA(t[1]);return e&&JSON.parse(e)},sm=()=>{try{return SD()||CD()||ND()||DD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uA=t=>{var e,n;return(n=(e=sm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dA=t=>{const e=uA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hA=()=>{var t;return(t=sm())==null?void 0:t.config},fA=t=>{var e;return(e=sm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function om(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[gp(JSON.stringify(n)),gp(JSON.stringify(o)),a].join(".")}const Eu={};function OD(){const t={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?t.emulator.push(e):t.prod.push(e);return t}function VD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let rE=!1;function z0(t,e){if(typeof window>"u"||typeof document>"u"||!Ri(window.location.host)||Eu[t]===e||Eu[t]||rE)return;Eu[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=OD().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{rE=!0,o()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=VD(r),y=n("text"),I=document.getElementById(y)||document.createElement("span"),S=n("learnmore"),C=document.getElementById(S)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;a(T),d(C,S);const L=u();l(v,E),T.append(v,I,C,L),document.body.appendChild(T)}s?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function mA(){var e;const t=(e=sm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UD(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yA(){return!mA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){return!mA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function G0(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function BD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$D,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}}function zD(t,e){return t.replace(GD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GD=/\{\$([^}]+)}/g;function qD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(iE(s)&&iE(o)){if(!cr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function iE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function au(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HD(t,e){const n=new WD(t,e);return n.subscribe.bind(n)}class WD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ng),i.error===void 0&&(i.error=Ng),i.complete===void 0&&(i.complete=Ng);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ng(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=1e3,YD=2,JD=4*60*60*1e3,XD=.5;function sE(t,e=QD,n=YD){const r=e*Math.pow(n,t),i=Math.round(XD*r*(Math.random()-.5)*2);return Math.min(JD,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t){return t&&t._delegate?t._delegate:t}class Wn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tL(e))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Io){return this.instances.has(e)}getOptions(e=Io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Io){return this.component?this.component.multipleInstances?e:Io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eL(t){return t===Io?void 0:t}function tL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const rL={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},iL=me.INFO,sL={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},oL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nd{constructor(e){this.name=e,this._logLevel=iL,this._logHandler=oL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const aL=(t,e)=>e.some(n=>t instanceof n);let oE,aE;function lL(){return oE||(oE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cL(){return aE||(aE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vA=new WeakMap,i_=new WeakMap,IA=new WeakMap,Dg=new WeakMap,q0=new WeakMap;function uL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vA.set(n,t)}).catch(()=>{}),q0.set(e,t),e}function dL(t){if(i_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});i_.set(t,e)}let s_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hL(t){s_=t(s_)}function fL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lg(this),e,...n);return IA.set(r,e.sort?e.sort():[e]),Cs(r)}:cL().includes(t)?function(...e){return t.apply(Lg(this),e),Cs(vA.get(this))}:function(...e){return Cs(t.apply(Lg(this),e))}}function pL(t){return typeof t=="function"?fL(t):(t instanceof IDBTransaction&&dL(t),aL(t,lL())?new Proxy(t,s_):t)}function Cs(t){if(t instanceof IDBRequest)return uL(t);if(Dg.has(t))return Dg.get(t);const e=pL(t);return e!==t&&(Dg.set(t,e),q0.set(e,t)),e}const Lg=t=>q0.get(t);function EA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Cs(o.result),l.oldVersion,l.newVersion,Cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const mL=["get","getKey","getAll","getAllKeys","count"],gL=["put","add","delete","clear"],Og=new Map;function lE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Og.get(e))return Og.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Og.set(e,s),s}hL(t=>({...t,get:(e,n,r)=>lE(e,n)||t.get(e,n,r),has:(e,n)=>!!lE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_L(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _L(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const o_="@firebase/app",cE="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new Nd("@firebase/app"),wL="@firebase/app-compat",vL="@firebase/analytics-compat",IL="@firebase/analytics",EL="@firebase/app-check-compat",TL="@firebase/app-check",bL="@firebase/auth",xL="@firebase/auth-compat",AL="@firebase/database",SL="@firebase/data-connect",RL="@firebase/database-compat",kL="@firebase/functions",PL="@firebase/functions-compat",CL="@firebase/installations",NL="@firebase/installations-compat",DL="@firebase/messaging",LL="@firebase/messaging-compat",OL="@firebase/performance",VL="@firebase/performance-compat",ML="@firebase/remote-config",FL="@firebase/remote-config-compat",jL="@firebase/storage",UL="@firebase/storage-compat",BL="@firebase/firestore",$L="@firebase/ai",zL="@firebase/firestore-compat",GL="firebase",qL="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",HL={[o_]:"fire-core",[wL]:"fire-core-compat",[IL]:"fire-analytics",[vL]:"fire-analytics-compat",[TL]:"fire-app-check",[EL]:"fire-app-check-compat",[bL]:"fire-auth",[xL]:"fire-auth-compat",[AL]:"fire-rtdb",[SL]:"fire-data-connect",[RL]:"fire-rtdb-compat",[kL]:"fire-fn",[PL]:"fire-fn-compat",[CL]:"fire-iid",[NL]:"fire-iid-compat",[DL]:"fire-fcm",[LL]:"fire-fcm-compat",[OL]:"fire-perf",[VL]:"fire-perf-compat",[ML]:"fire-rc",[FL]:"fire-rc-compat",[jL]:"fire-gcs",[UL]:"fire-gcs-compat",[BL]:"fire-fst",[zL]:"fire-fst-compat",[$L]:"fire-vertex","fire-js":"fire-js",[GL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,WL=new Map,a_=new Map;function uE(t,e){try{t.container.addComponent(e)}catch(n){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ur(t){const e=t.name;if(a_.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;a_.set(e,t);for(const n of _p.values())uE(n,t);for(const n of WL.values())uE(n,t);return!0}function Nr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function KL(t,e,n=yp){Nr(t,e).clearInstance(n)}function ze(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new ua("app","Firebase",QL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=qL;function TA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:yp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ns.create("bad-app-name",{appName:String(i)});if(n||(n=hA()),!n)throw Ns.create("no-options");const s=_p.get(i);if(s){if(cr(n,s.options)&&cr(r,s.config))return s;throw Ns.create("duplicate-app",{appName:i})}const o=new nL(i);for(const l of a_.values())o.addComponent(l);const a=new YL(n,r,o);return _p.set(i,a),a}function Dd(t=yp){const e=_p.get(t);if(!e&&t===yp&&hA())return TA();if(!e)throw Ns.create("no-app",{appName:t});return e}function Jt(t,e,n){let r=HL[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(o.join(" "));return}ur(new Wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="firebase-heartbeat-database",XL=1,td="firebase-heartbeat-store";let Vg=null;function bA(){return Vg||(Vg=EA(JL,XL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(td)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Vg}async function ZL(t){try{const n=(await bA()).transaction(td),r=await n.objectStore(td).get(xA(t));return await n.done,r}catch(e){if(e instanceof Jn)Ii.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ii.warn(n.message)}}}async function dE(t,e){try{const r=(await bA()).transaction(td,"readwrite");await r.objectStore(td).put(e,xA(t)),await r.done}catch(n){if(n instanceof Jn)Ii.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ii.warn(r.message)}}}function xA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=1024,tO=30;class nO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>tO){const o=sO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ii.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hE(),{heartbeatsToSend:r,unsentEntries:i}=rO(this._heartbeatsCache.heartbeats),s=gp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ii.warn(n),""}}}function hE(){return new Date().toISOString().substring(0,10)}function rO(t,e=eO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G0()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return dE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function fE(t){return gp(JSON.stringify({version:2,heartbeats:t})).length}function sO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){ur(new Wn("platform-logger",e=>new yL(e),"PRIVATE")),ur(new Wn("heartbeat",e=>new nO(e),"PRIVATE")),Jt(o_,cE,t),Jt(o_,cE,"esm2020"),Jt("fire-js","")}oO("");var aO="firebase",lO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(aO,lO,"app");const AA="@firebase/installations",H0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1e4,RA=`w:${H0}`,kA="FIS_v2",cO="https://firebaseinstallations.googleapis.com/v1",uO=60*60*1e3,dO="installations",hO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qo=new ua(dO,hO,fO);function PA(t){return t instanceof Jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA({projectId:t}){return`${cO}/projects/${t}/installations`}function NA(t){return{token:t.token,requestStatus:2,expiresIn:mO(t.expiresIn),creationTime:Date.now()}}async function DA(t,e){const r=(await e.json()).error;return Qo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function LA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function pO(t,{refreshToken:e}){const n=LA(t);return n.append("Authorization",gO(e)),n}async function OA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function mO(t){return Number(t.replace("s","000"))}function gO(t){return`${kA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=CA(t),i=LA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:kA,appId:t.appId,sdkVersion:RA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await OA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:NA(u.authToken)}}else throw await DA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=/^[cdef][\w-]{21}$/,l_="";function vO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=IO(t);return wO.test(n)?n:l_}catch{return l_}}function IO(t){return _O(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Map;function FA(t,e){const n=am(t);jA(n,e),EO(n,e)}function jA(t,e){const n=MA.get(t);if(n)for(const r of n)r(e)}function EO(t,e){const n=TO();n&&n.postMessage({key:t,fid:e}),bO()}let Do=null;function TO(){return!Do&&"BroadcastChannel"in self&&(Do=new BroadcastChannel("[Firebase] FID Change"),Do.onmessage=t=>{jA(t.data.key,t.data.fid)}),Do}function bO(){MA.size===0&&Do&&(Do.close(),Do=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="firebase-installations-database",AO=1,Yo="firebase-installations-store";let Mg=null;function W0(){return Mg||(Mg=EA(xO,AO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yo)}}})),Mg}async function wp(t,e){const n=am(t),i=(await W0()).transaction(Yo,"readwrite"),s=i.objectStore(Yo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&FA(t,e.fid),e}async function UA(t){const e=am(t),r=(await W0()).transaction(Yo,"readwrite");await r.objectStore(Yo).delete(e),await r.done}async function lm(t,e){const n=am(t),i=(await W0()).transaction(Yo,"readwrite"),s=i.objectStore(Yo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&FA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(t){let e;const n=await lm(t.appConfig,r=>{const i=SO(r),s=RO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===l_?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function SO(t){const e=t||{fid:vO(),registrationStatus:0};return BA(e)}function RO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Qo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=kO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:PO(t)}:{installationEntry:e}}async function kO(t,e){try{const n=await yO(t,e);return wp(t.appConfig,n)}catch(n){throw PA(n)&&n.customData.serverCode===409?await UA(t.appConfig):await wp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function PO(t){let e=await pE(t.appConfig);for(;e.registrationStatus===1;)await VA(100),e=await pE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await K0(t);return r||n}return e}function pE(t){return lm(t,e=>{if(!e)throw Qo.create("installation-not-found");return BA(e)})}function BA(t){return CO(t)?{fid:t.fid,registrationStatus:0}:t}function CO(t){return t.registrationStatus===1&&t.registrationTime+SA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO({appConfig:t,heartbeatServiceProvider:e},n){const r=DO(t,n),i=pO(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:RA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await OA(()=>fetch(r,a));if(l.ok){const u=await l.json();return NA(u)}else throw await DA("Generate Auth Token",l)}function DO(t,{fid:e}){return`${CA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(t,e=!1){let n;const r=await lm(t.appConfig,s=>{if(!$A(s))throw Qo.create("not-registered");const o=s.authToken;if(!e&&VO(o))return s;if(o.requestStatus===1)return n=LO(t,e),s;{if(!navigator.onLine)throw Qo.create("app-offline");const a=FO(s);return n=OO(t,a),a}});return n?await n:r.authToken}async function LO(t,e){let n=await mE(t.appConfig);for(;n.authToken.requestStatus===1;)await VA(100),n=await mE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Q0(t,e):r}function mE(t){return lm(t,e=>{if(!$A(e))throw Qo.create("not-registered");const n=e.authToken;return jO(n)?{...e,authToken:{requestStatus:0}}:e})}async function OO(t,e){try{const n=await NO(t,e),r={...e,authToken:n};return await wp(t.appConfig,r),n}catch(n){if(PA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await UA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await wp(t.appConfig,r)}throw n}}function $A(t){return t!==void 0&&t.registrationStatus===2}function VO(t){return t.requestStatus===2&&!MO(t)}function MO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+uO}function FO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function jO(t){return t.requestStatus===1&&t.requestTime+SA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t){const e=t,{installationEntry:n,registrationPromise:r}=await K0(e);return r?r.catch(console.error):Q0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e=!1){const n=t;return await $O(n),(await Q0(n,e)).token}async function $O(t){const{registrationPromise:e}=await K0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){if(!t||!t.options)throw Fg("App Configuration");if(!t.name)throw Fg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fg(t){return Qo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="installations",GO="installations-internal",qO=t=>{const e=t.getProvider("app").getImmediate(),n=zO(e),r=Nr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},HO=t=>{const e=t.getProvider("app").getImmediate(),n=Nr(e,zA).getImmediate();return{getId:()=>UO(n),getToken:i=>BO(n,i)}};function WO(){ur(new Wn(zA,qO,"PUBLIC")),ur(new Wn(GO,HO,"PRIVATE"))}WO();Jt(AA,H0);Jt(AA,H0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="analytics",KO="firebase_id",QO="origin",YO=60*1e3,JO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new Nd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new ua("analytics","Analytics",XO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){if(!t.startsWith(Y0)){const e=zn.create("invalid-gtag-resource",{gtagURL:t});return Sn.warn(e.message),""}return t}function GA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function eV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function tV(t,e){const n=eV("firebase-js-sdk-policy",{createScriptURL:ZO}),r=document.createElement("script"),i=`${Y0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function nV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function rV(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await GA(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Sn.error(a)}t("config",i,s)}async function iV(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await GA(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Sn.error(s)}}function sV(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await iV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await rV(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Sn.error(a)}}return i}function oV(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=sV(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function aV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Y0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=30,cV=1e3;class uV{constructor(e={},n=cV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qA=new uV;function dV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function hV(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:dV(n)},i=JO.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function fV(t,e=qA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw zn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new gV;return setTimeout(async()=>{a.abort()},n!==void 0?n:YO),HA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function HA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=qA){var a;const{appId:s,measurementId:o}=t;try{await pV(r,e)}catch(l){if(o)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await hV(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!mV(u)){if(i.deleteThrottleMetadata(s),o)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const d=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?sE(n,i.intervalMillis,lV):sE(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(s,h),Sn.debug(`Calling attemptFetch again in ${d} millis`),HA(t,h,r,i)}}function pV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function mV(t){if(!(t instanceof Jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class gV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(){if(G0())try{await wA()}catch(t){return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wV(t,e,n,r,i,s,o){const a=fV(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Sn.error(m)),e.push(a);const l=_V().then(m=>{if(m)return r.getId()}),[u,d]=await Promise.all([a,l]);aV(s)||tV(s,u.measurementId),i("js",new Date);const h=(o==null?void 0:o.config)??{};return h[QO]="firebase",h.update=!0,d!=null&&(h[KO]=d),i("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.app=e}_delete(){return delete Tu[this.app.options.appId],Promise.resolve()}}let Tu={},gE=[];const yE={};let jg="dataLayer",IV="gtag",_E,WA,wE=!1;function EV(){const t=[];if(gA()&&t.push("This is a browser extension environment."),BD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=zn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(n.message)}}function TV(t,e,n){EV();const r=t.options.appId;if(!r)throw zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(Tu[r]!=null)throw zn.create("already-exists",{id:r});if(!wE){nV(jg);const{wrappedGtag:s,gtagCore:o}=oV(Tu,gE,yE,jg,IV);WA=s,_E=o,wE=!0}return Tu[r]=wV(t,gE,yE,e,_E,jg,n),new vV(t)}function bV(t=Dd()){t=X(t);const e=Nr(t,vp);return e.isInitialized()?e.getImmediate():xV(t)}function xV(t,e={}){const n=Nr(t,vp);if(n.isInitialized()){const i=n.getImmediate();if(cr(e,n.getOptions()))return i;throw zn.create("already-initialized")}return n.initialize({options:e})}function KA(t,e,n,r){t=X(t),yV(WA,Tu[t.app.options.appId],e,n,r).catch(i=>Sn.error(i))}const vE="@firebase/analytics",IE="0.10.18";function AV(){ur(new Wn(vp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return TV(r,i,n)},"PUBLIC")),ur(new Wn("analytics-internal",t,"PRIVATE")),Jt(vE,IE),Jt(vE,IE,"esm2020");function t(e){try{const n=e.getProvider(vp).getImmediate();return{logEvent:(r,i,s)=>KA(n,r,i,s)}}catch(n){throw zn.create("interop-component-reg-failed",{reason:n})}}}AV();var EE="@firebase/ai",c_="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="AI",TE="us-central1",SV="firebasevertexai.googleapis.com",RV="v1beta",bE=c_,kV="gl-js",PV=180*1e3,CV="gemini-2.0-flash-lite";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=["user","model","function","system"],QA={HARM_SEVERITY_NEGLIGIBLE:"HARM_SEVERITY_NEGLIGIBLE",HARM_SEVERITY_LOW:"HARM_SEVERITY_LOW",HARM_SEVERITY_MEDIUM:"HARM_SEVERITY_MEDIUM",HARM_SEVERITY_HIGH:"HARM_SEVERITY_HIGH",HARM_SEVERITY_UNSUPPORTED:"HARM_SEVERITY_UNSUPPORTED"},AE={STOP:"STOP",MAX_TOKENS:"MAX_TOKENS",SAFETY:"SAFETY",RECITATION:"RECITATION",OTHER:"OTHER",BLOCKLIST:"BLOCKLIST",PROHIBITED_CONTENT:"PROHIBITED_CONTENT",SPII:"SPII",MALFORMED_FUNCTION_CALL:"MALFORMED_FUNCTION_CALL"},SE={TEXT:"TEXT",IMAGE:"IMAGE",AUDIO:"AUDIO"},RE={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.backendType=e}}class Ld extends YA{constructor(){super(ki.GOOGLE_AI)}}class cm extends YA{constructor(e=TE){super(ki.VERTEX_AI),e?this.location=e:this.location=TE}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NV=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof cm?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce extends Jn{constructor(e,n,r){const i=Ol,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,ce),Object.setPrototypeOf(this,ce.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){if(t instanceof Ld)return`${Ol}/googleai`;if(t instanceof cm)return`${Ol}/vertexai/${t.location}`;throw new ce(he.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function LV(t){const e=t.split("/");if(e[0]!==Ol)throw new ce(he.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new ce(he.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new cm(r);case"googleai":return new Ld;default:throw new ce(he.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){var r,i,s,o,a,l,u;if((i=(r=e.app)==null?void 0:r.options)!=null&&i.apiKey)if((o=(s=e.app)==null?void 0:s.options)!=null&&o.projectId)if((l=(a=e.app)==null?void 0:a.options)!=null&&l.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location,backend:e.backend},ze(e.app)&&e.app.settings.appCheckToken){const d=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:d})}else e.appCheck&&((u=e.options)!=null&&u.useLimitedUseAppCheckTokens?this._apiSettings.getAppCheckToken=()=>e.appCheck.getLimitedUseToken():this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken()),this.model=bu.normalizeModelName(n,this._apiSettings.backend.backendType)}else throw new ce(he.NO_APP_ID,'The "appId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid app ID.');else throw new ce(he.NO_PROJECT_ID,'The "projectId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid project ID.');else throw new ce(he.NO_API_KEY,'The "apiKey" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid API key.')}static normalizeModelName(e,n){return n===ki.GOOGLE_AI?bu.normalizeGoogleAIModelName(e):bu.normalizeVertexAIModelName(e)}static normalizeGoogleAIModelName(e){return`models/${e}`}static normalizeVertexAIModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Nd("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(nd||(nd={}));class JA{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiSettings=r,this.stream=i,this.requestOptions=s}toString(){const e=new URL(this.baseUrl);return e.pathname=`/${this.apiVersion}/${this.modelPath}:${this.task}`,e.search=this.queryParams.toString(),e.toString()}get baseUrl(){var e;return((e=this.requestOptions)==null?void 0:e.baseUrl)||`https://${SV}`}get apiVersion(){return RV}get modelPath(){if(this.apiSettings.backend instanceof Ld)return`projects/${this.apiSettings.project}/${this.model}`;if(this.apiSettings.backend instanceof cm)return`projects/${this.apiSettings.project}/locations/${this.apiSettings.backend.location}/${this.model}`;throw new ce(he.ERROR,`Invalid backend: ${JSON.stringify(this.apiSettings.backend)}`)}get queryParams(){const e=new URLSearchParams;return this.stream&&e.set("alt","sse"),e}}function OV(){const t=[];return t.push(`${kV}/${bE}`),t.push(`fire/${bE}`),t.join(" ")}async function VV(t){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",OV()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){const n=await t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&_n.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){const n=await t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e}async function MV(t,e,n,r,i,s){const o=new JA(t,e,n,r,s);return{url:o.toString(),fetchOptions:{method:"POST",headers:await VV(o),body:i}}}async function J0(t,e,n,r,i,s){const o=new JA(t,e,n,r,s);let a,l;try{const u=await MV(t,e,n,r,i,s),d=(s==null?void 0:s.timeout)!=null&&s.timeout>=0?s.timeout:PV,h=new AbortController;if(l=setTimeout(()=>h.abort(),d),u.fetchOptions.signal=h.signal,a=await fetch(u.url,u.fetchOptions),!a.ok){let m="",y;try{const I=await a.json();m=I.error.message,I.error.details&&(m+=` ${JSON.stringify(I.error.details)}`,y=I.error.details)}catch{}throw a.status===403&&y&&y.some(I=>I.reason==="SERVICE_DISABLED")&&y.some(I=>{var S,C;return(C=(S=I.links)==null?void 0:S[0])==null?void 0:C.description.includes("Google developers console API activation")})?new ce(he.API_NOT_ENABLED,`The Firebase AI SDK requires the Firebase AI API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${o.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:y}):new ce(he.FETCH_ERROR,`Error fetching from ${o}: [${a.status} ${a.statusText}] ${m}`,{status:a.status,statusText:a.statusText,errorDetails:y})}}catch(u){let d=u;throw u.code!==he.FETCH_ERROR&&u.code!==he.API_NOT_ENABLED&&u instanceof Error&&(d=new ce(he.ERROR,`Error fetching from ${o.toString()}: ${u.message}`),d.stack=u.stack),d}finally{l&&clearTimeout(l)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&_n.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),XA(t.candidates[0]))throw new ce(he.RESPONSE_ERROR,`Response error: ${Lo(t)}. Response body stored in error.response`,{response:t});return!0}else return!1}function Ip(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),FV(t)}function FV(t){return t.text=()=>{if(Wh(t))return kE(t,e=>!e.thought);if(t.promptFeedback)throw new ce(he.RESPONSE_ERROR,`Text not available. ${Lo(t)}`,{response:t});return""},t.thoughtSummary=()=>{if(Wh(t)){const e=kE(t,n=>!!n.thought);return e===""?void 0:e}else if(t.promptFeedback)throw new ce(he.RESPONSE_ERROR,`Thought summary not available. ${Lo(t)}`,{response:t})},t.inlineDataParts=()=>{if(Wh(t))return UV(t);if(t.promptFeedback)throw new ce(he.RESPONSE_ERROR,`Data not available. ${Lo(t)}`,{response:t})},t.functionCalls=()=>{if(Wh(t))return jV(t);if(t.promptFeedback)throw new ce(he.RESPONSE_ERROR,`Function call not available. ${Lo(t)}`,{response:t})},t}function kE(t,e){var r,i,s,o;const n=[];if((i=(r=t.candidates)==null?void 0:r[0].content)!=null&&i.parts)for(const a of(o=(s=t.candidates)==null?void 0:s[0].content)==null?void 0:o.parts)a.text&&e(a)&&n.push(a.text);return n.length>0?n.join(""):""}function jV(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.functionCall&&e.push(o.functionCall);if(e.length>0)return e}function UV(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.inlineData&&e.push(o);if(e.length>0)return e}const BV=[AE.RECITATION,AE.SAFETY];function XA(t){return!!t.finishReason&&BV.some(e=>e===t.finishReason)}function Lo(t){var n,r,i;let e="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)e+="Response was blocked",(n=t.promptFeedback)!=null&&n.blockReason&&(e+=` due to ${t.promptFeedback.blockReason}`),(r=t.promptFeedback)!=null&&r.blockReasonMessage&&(e+=`: ${t.promptFeedback.blockReasonMessage}`);else if((i=t.candidates)!=null&&i[0]){const s=t.candidates[0];XA(s)&&(e+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(e+=`: ${s.finishMessage}`))}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){var e,n;if((e=t.safetySettings)==null||e.forEach(r=>{if(r.method)throw new ce(he.UNSUPPORTED,"SafetySetting.method is not supported in the the Gemini Developer API. Please remove this property.")}),(n=t.generationConfig)!=null&&n.topK){const r=Math.round(t.generationConfig.topK);r!==t.generationConfig.topK&&(_n.warn("topK in GenerationConfig has been rounded to the nearest integer to match the format for requests to the Gemini Developer API."),t.generationConfig.topK=r)}return t}function X0(t){return{candidates:t.candidates?zV(t.candidates):void 0,prompt:t.promptFeedback?GV(t.promptFeedback):void 0,usageMetadata:t.usageMetadata}}function $V(t,e){return{generateContentRequest:{model:e,...t}}}function zV(t){const e=[];let n;return e&&t.forEach(r=>{var o;let i;if(r.citationMetadata&&(i={citations:r.citationMetadata.citationSources}),r.safetyRatings&&(n=r.safetyRatings.map(a=>({...a,severity:a.severity??QA.HARM_SEVERITY_UNSUPPORTED,probabilityScore:a.probabilityScore??0,severityScore:a.severityScore??0}))),(o=r.content)!=null&&o.parts.some(a=>a==null?void 0:a.videoMetadata))throw new ce(he.UNSUPPORTED,"Part.videoMetadata is not supported in the Gemini Developer API. Please remove this property.");const s={index:r.index,content:r.content,finishReason:r.finishReason,finishMessage:r.finishMessage,safetyRatings:n,citationMetadata:i,groundingMetadata:r.groundingMetadata};e.push(s)}),e}function GV(t){const e=[];return t.safetyRatings.forEach(r=>{e.push({category:r.category,probability:r.probability,severity:r.severity??QA.HARM_SEVERITY_UNSUPPORTED,probabilityScore:r.probabilityScore??0,severityScore:r.severityScore??0,blocked:r.blocked})}),{blockReason:t.blockReason,safetyRatings:e,blockReasonMessage:t.blockReasonMessage}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function qV(t,e){const n=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=KV(n),[i,s]=r.tee();return{stream:WV(i,e),response:HV(s,e)}}async function HV(t,e){const n=[],r=t.getReader();for(;;){const{done:i,value:s}=await r.read();if(i){let o=QV(n);return e.backend.backendType===ki.GOOGLE_AI&&(o=X0(o)),Ip(o)}n.push(s)}}async function*WV(t,e){const n=t.getReader();for(;;){const{value:r,done:i}=await n.read();if(i)break;let s;e.backend.backendType===ki.GOOGLE_AI?s=Ip(X0(r)):s=Ip(r),yield s}}function KV(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new ce(he.PARSE_FAILED,"Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(PE),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new ce(he.PARSE_FAILED,`Error parsing JSON response: "${l[1]}`));return}r.enqueue(u),i=i.substring(l[0].length),l=i.match(PE)}return s()})}}})}function QV(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const s=i.index||0;if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:i.index}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,n.candidates[s].groundingMetadata=i.groundingMetadata,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[]});const o={};for(const a of i.content.parts){if(a.text!==void 0){if(a.text==="")continue;o.text=a.text}if(a.functionCall&&(o.functionCall=a.functionCall),Object.keys(o).length===0)throw new ce(he.INVALID_CONTENT,"Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[s].content.parts.push(o)}}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(t,e,n,r){return t.backend.backendType===ki.GOOGLE_AI&&(n=ZA(n)),J0(e,nd.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r)}async function eS(t,e,n,r,i){let s;return r&&await r.isAvailable(n)?s=await r.generateContentStream(n):s=await YV(t,e,n,i),qV(s,t)}async function JV(t,e,n,r){return t.backend.backendType===ki.GOOGLE_AI&&(n=ZA(n)),J0(e,nd.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)}async function tS(t,e,n,r,i){let s;r&&await r.isAvailable(n)?s=await r.generateContent(n):s=await JV(t,e,n,i);const o=await XV(s,t);return{response:Ip(o)}}async function XV(t,e){const n=await t.json();return e.backend.backendType===ki.GOOGLE_AI?X0(n):n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function u_(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return ZV(e)}function ZV(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new ce(he.INVALID_CONTENT,"Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!r&&!i)throw new ce(he.INVALID_CONTENT,"No Content is provided for sending chat message.");return r?e:n}function Ug(t){let e;return t.contents?e=t:e={contents:[u_(t)]},t.systemInstruction&&(e.systemInstruction=nS(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=["text","inlineData","functionCall","functionResponse","thought","thoughtSignature"],eM={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","thought","thoughtSignature"],system:["text"]},NE={user:["model"],function:["model"],model:["user","function"],system:[]};function tM(t){let e=null;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new ce(he.INVALID_CONTENT,`First Content should be with role 'user', got ${r}`);if(!xE.includes(r))throw new ce(he.INVALID_CONTENT,`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(xE)}`);if(!Array.isArray(i))throw new ce(he.INVALID_CONTENT,"Content should have 'parts' property with an array of Parts");if(i.length===0)throw new ce(he.INVALID_CONTENT,"Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,thought:0,thoughtSignature:0};for(const a of i)for(const l of CE)l in a&&(s[l]+=1);const o=eM[r];for(const a of CE)if(!o.includes(a)&&s[a]>0)throw new ce(he.INVALID_CONTENT,`Content with role '${r}' can't contain '${a}' part`);if(e&&!NE[r].includes(e.role))throw new ce(he.INVALID_CONTENT,`Content with role '${r}' can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(NE)}`);e=n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="SILENT_ERROR";class nM{constructor(e,n,r,i,s){this.model=n,this.chromeAdapter=r,this.params=i,this.requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,i!=null&&i.history&&(tM(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var s,o,a,l,u;await this._sendPromise;const n=u_(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(l=this.params)==null?void 0:l.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]};let i={};return this._sendPromise=this._sendPromise.then(()=>tS(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions)).then(d=>{var h,m;if(d.response.candidates&&d.response.candidates.length>0){this._history.push(n);const y={parts:((h=d.response.candidates)==null?void 0:h[0].content.parts)||[],role:((m=d.response.candidates)==null?void 0:m[0].content.role)||"model"};this._history.push(y)}else{const y=Lo(d.response);y&&_n.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}i=d}),await this._sendPromise,i}async sendMessageStream(e){var s,o,a,l,u;await this._sendPromise;const n=u_(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(l=this.params)==null?void 0:l.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]},i=eS(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>i).catch(d=>{throw new Error(DE)}).then(d=>d.response).then(d=>{if(d.candidates&&d.candidates.length>0){this._history.push(n);const h={...d.candidates[0].content};h.role||(h.role="model"),this._history.push(h)}else{const h=Lo(d);h&&_n.warn(`sendMessageStream() was unsuccessful. ${h}. Inspect response object for details.`)}}).catch(d=>{d.message!==DE&&_n.error(d)}),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,n,r){let i="";if(t.backend.backendType===ki.GOOGLE_AI){const o=$V(n,e);i=JSON.stringify(o)}else i=JSON.stringify(n);return(await J0(e,nd.COUNT_TOKENS,t,!1,i,r)).json()}async function iM(t,e,n,r,i){return r&&await r.isAvailable(n)?(await r.countTokens(n)).json():rM(t,e,n,i)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM extends bu{constructor(e,n,r,i){super(e,n.model),this.chromeAdapter=i,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=nS(n.systemInstruction),this.requestOptions=r||{}}async generateContent(e){const n=Ug(e);return tS(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}async generateContentStream(e){const n=Ug(e);return eS(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}startChat(e){return new nM(this._apiSettings,this.model,this.chromeAdapter,{tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,generationConfig:this.generationConfig,safetySettings:this.safetySettings,...e},this.requestOptions)}async countTokens(e){const n=Ug(e);return iM(this._apiSettings,this.model,n,this.chromeAdapter)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t=Dd(),e){t=X(t);const n=Nr(t,Ol),r=(e==null?void 0:e.backend)??new Ld,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=DV(r),o=n.getImmediate({identifier:s});return o.options=i,o}function aM(t,e,n){var o;const r=e;let i;if(r.mode?i=r.inCloudParams||{model:CV}:i=e,!i.model)throw new ce(he.NO_MODEL,"Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");const s=(o=t.chromeAdapterFactory)==null?void 0:o.call(t,r.mode,typeof window>"u"?void 0:window,r.onDeviceParams);return new sM(t,i,n,s)}var xo;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(xo||(xo={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return _n.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===RE.ONLY_IN_CLOUD)return _n.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===RE.ONLY_ON_DEVICE){if(n===xo.UNAVAILABLE)throw new ce(he.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===xo.DOWNLOADABLE||n===xo.DOWNLOADING)&&(_n.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==xo.AVAILABLE?(_n.debug(`On-device inference unavailable because availability is "${n}".`),!1):Ir.isOnDeviceRequest(e)?!0:(_n.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Ir.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return Ir.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Ir.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return Ir.toStreamResponse(i)}async countTokens(e){throw new ce(he.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return _n.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return _n.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&Ir.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return _n.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===xo.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(Ir.toLanguageModelMessageContent));return{role:Ir.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new ce(he.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new ce(he.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}Ir.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function lM(t,e,n){if(typeof e<"u"&&t)return new Ir(e.LanguageModel,t,n)}function cM(t,{instanceIdentifier:e}){if(!e)throw new ce(he.ERROR,"AIService instance identifier is undefined.");const n=LV(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new NV(r,n,i,s,lM)}function uM(){ur(new Wn(Ol,cM,"PUBLIC").setMultipleInstances(!0)),Jt(EE,c_),Jt(EE,c_,"esm2020")}uM();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$={PHONE:"phone",TOTP:"totp"},H$={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W$={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},K$={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},Q$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function rS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y$=dM,hM=rS,iS=new ua("auth","Firebase",rS()),J$={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=new Nd("@firebase/auth");function fM(t,...e){Ep.logLevel<=me.WARN&&Ep.warn(`Auth (${da}): ${t}`,...e)}function Ef(t,...e){Ep.logLevel<=me.ERROR&&Ep.error(`Auth (${da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw ew(t,...e)}function dn(t,...e){return ew(t,...e)}function Z0(t,e,n){const r={...hM(),[e]:n};return new ua("auth","Firebase",r).create(e,{appName:t.name})}function Ct(t){return Z0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ac(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rn(t,"argument-error"),Z0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ew(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iS.create(t,...e)}function H(t,e,...n){if(!t)throw ew(e,...n)}function qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ef(e),new Error(e)}function Ei(t,e){t||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function tw(){return LE()==="http:"||LE()==="https:"}function LE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tw()||gA()||"connection"in navigator)?navigator.onLine:!0}function mM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ei(n>e,"Short delay should be less than long delay!"),this.isMobile=MD()||jD()}get(){return pM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t,e){Ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_M=new Od(3e4,6e4);function He(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function We(t,e,n,r,i={}){return oS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=oc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return FD()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(u.credentials="include"),sS.fetch()(await aS(t,t.config.apiHost,n,a),u)})}async function oS(t,e,n){t._canInitEmulator=!1;const r={...gM,...e};try{const i=new vM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Z0(t,d,u);Rn(t,d)}}catch(i){if(i instanceof Jn)throw i;Rn(t,"network-request-failed",{message:String(i)})}}async function Pi(t,e,n,r,i={}){const s=await We(t,e,n,r,i);return"mfaPendingCredential"in s&&Rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function aS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?nw(t.config,i):`${t.config.apiScheme}://${i}`;return yM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function wM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),_M.get())})}}function lu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){return t!==void 0&&t.getResponse!==void 0}function VE(t){return t!==void 0&&t.enterprise!==void 0}class lS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t){return(await We(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function cS(t,e){return We(t,"GET","/v2/recaptchaConfig",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){return We(t,"POST","/v1/accounts:delete",e)}async function TM(t,e){return We(t,"POST","/v1/accounts:update",e)}async function Tp(t,e){return We(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t,e=!1){return X(t).getIdToken(e)}async function bM(t,e=!1){const n=X(t),r=await n.getIdToken(e),i=um(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xu(Bg(i.auth_time)),issuedAtTime:xu(Bg(i.iat)),expirationTime:xu(Bg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bg(t){return Number(t)*1e3}function um(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const i=lA(n);return i?JSON.parse(i):(Ef("Failed to decode base64 JWT payload"),null)}catch(i){return Ef("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ME(t){const e=um(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&xM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ti(t,Tp(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?uS(i.providerUserInfo):[],o=RM(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new d_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function SM(t){const e=X(t);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e){const n=await oS(t,{},async()=>{const r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await aS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(l.credentials="include"),sS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PM(t,e){return We(t,"POST","/v2/accounts:revokeToken",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ME(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=ME(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await kM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new El;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ar{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new AM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new d_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ti(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bM(this,e)}reload(){return SM(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ze(this.auth.app))return Promise.reject(Ct(this.auth));const e=await this.getIdToken();return await Ti(this,EM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:y,providerData:I,stsTokenManager:S}=n;H(h&&S,e,"internal-error");const C=El.fromJSON(this.name,S);H(typeof h=="string",e,"internal-error"),Zi(r,e.name),Zi(i,e.name),H(typeof m=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),Zi(s,e.name),Zi(o,e.name),Zi(a,e.name),Zi(l,e.name),Zi(u,e.name),Zi(d,e.name);const E=new Ar({uid:h,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:C,createdAt:u,lastLoginAt:d});return I&&Array.isArray(I)&&(E.providerData=I.map(v=>({...v}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new El;i.updateFromServerResponse(n);const s=new Ar({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await id(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];H(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new El;a.updateFromIdToken(r);const l=new Ar({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new d_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;function hi(t){Ei(t instanceof Function,"Expected a class definition");let e=FE.get(t);return e?(Ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dS.type="NONE";const jE=dS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Tf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Tf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Tp(this.auth,{idToken:e}).catch(()=>{});return n?Ar._fromGetAccountInfoResponse(this.auth,n,e):null}return Ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(hi(jE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||hi(jE);const o=Tf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const m=await Tp(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Ar._fromGetAccountInfoResponse(e,m,d)}else h=Ar._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Tl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Tl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yS(e))return"Blackberry";if(_S(e))return"Webos";if(fS(e))return"Safari";if((e.includes("chrome/")||pS(e))&&!e.includes("edge/"))return"Chrome";if(gS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hS(t=Et()){return/firefox\//i.test(t)}function fS(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pS(t=Et()){return/crios\//i.test(t)}function mS(t=Et()){return/iemobile/i.test(t)}function gS(t=Et()){return/android/i.test(t)}function yS(t=Et()){return/blackberry/i.test(t)}function _S(t=Et()){return/webos/i.test(t)}function rw(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CM(t=Et()){var e;return rw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function NM(){return UD()&&document.documentMode===10}function wS(t=Et()){return rw(t)||gS(t)||_S(t)||yS(t)||/windows phone/i.test(t)||mS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e=[]){let n;switch(t){case"Browser":n=UE(Et());break;case"Worker":n=`${UE(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e={}){return We(t,"GET","/v2/passwordPolicy",He(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=6;class VM{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??OM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BE(this),this.idTokenSubscription=new BE(this),this.beforeStateQueue=new DM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Tp(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ze(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ze(this.app))return Promise.reject(Ct(this));const n=e?X(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ze(this.app)?Promise.reject(Ct(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ze(this.app)?Promise.reject(Ct(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LM(this),n=new VM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hi(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&fM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lt(t){return X(t)}class BE{constructor(e){this.auth=e,this.observer=null,this.addObserver=HD(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FM(t){Vd=t}function iw(t){return Vd.loadJS(t)}function jM(){return Vd.recaptchaV2Script}function UM(){return Vd.recaptchaEnterpriseScript}function BM(){return Vd.gapiScript}function IS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=500,zM=6e4,Kh=1e12;class GM{constructor(e){this.auth=e,this.counter=Kh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new WM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Kh;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Kh;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Kh;return(r=this._widgets.get(n))==null||r.execute(),""}}class qM{constructor(){this.enterprise=new HM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=KM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},zM)},$M))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function KM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const QM="recaptcha-enterprise",Au="NO_RECAPTCHA";class ES{constructor(e){this.type=QM,this.auth=lt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{cS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new lS(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;VE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Au)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&VE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UM();l.length!==0&&(l+=a),iw(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Qc(t,e,n,r=!1,i=!1){const s=new ES(t);let o;if(i)o=Au;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ds(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qc(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Qc(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await Qc(t,e,n,!1,!0);return r(t,d)}return Promise.reject(l)})}else{const a=await Qc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function TS(t){const e=lt(t),n=await cS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lS(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new ES(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e){const n=Nr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cr(s,e??{}))return i;Rn(i,"already-initialized")}return n.initialize({options:e})}function JM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XM(t,e,n){const r=lt(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=bS(e),{host:o,port:a}=ZM(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(cr(u,r.config.emulator)&&cr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ri(o)?(om(`${s}//${o}${l}`),z0("Auth",!0)):i||e4()}function bS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZM(t){const e=bS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$E(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$E(o)}}}function $E(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,n){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,e){return We(t,"POST","/v1/accounts:resetPassword",He(t,e))}async function t4(t,e){return We(t,"POST","/v1/accounts:update",e)}async function n4(t,e){return We(t,"POST","/v1/accounts:signUp",e)}async function r4(t,e){return We(t,"POST","/v1/accounts:update",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e){return Pi(t,"POST","/v1/accounts:signInWithPassword",He(t,e))}async function dm(t,e){return We(t,"POST","/v1/accounts:sendOobCode",He(t,e))}async function s4(t,e){return dm(t,e)}async function o4(t,e){return dm(t,e)}async function a4(t,e){return dm(t,e)}async function l4(t,e){return dm(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",He(t,e))}async function u4(t,e){return Pi(t,"POST","/v1/accounts:signInWithEmailLink",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Md{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new sd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ds(e,n,"signInWithPassword",i4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c4(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ds(e,r,"signUpPassword",n4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return u4(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t,e){return Pi(t,"POST","/v1/accounts:signInWithIdp",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="http://localhost";class bi extends Md{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new bi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}buildRequest(){const e={requestUri:d4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t,e){return We(t,"POST","/v1/accounts:sendVerificationCode",He(t,e))}async function h4(t,e){return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,e))}async function f4(t,e){const n=await Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,e));if(n.temporaryProof)throw lu(t,"account-exists-with-different-credential",n);return n}const p4={USER_NOT_FOUND:"user-not-found"};async function m4(t,e){const n={...e,operation:"REAUTH"};return Pi(t,"POST","/v1/accounts:signInWithPhoneNumber",He(t,n),p4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Md{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new jo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new jo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return h4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return f4(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return m4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new jo({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y4(t){const e=ou(au(t)).link,n=e?ou(au(e)).deep_link_id:null,r=ou(au(t)).deep_link_id;return(r?ou(au(r)).link:null)||r||n||e||t}class Fd{constructor(e){const n=ou(au(e)),r=n.apiKey??null,i=n.oobCode??null,s=g4(n.mode??null);H(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=y4(e);try{return new Fd(n)}catch{return null}}}function Z$(t){return Fd.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,n){return sd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Fd.parseLink(n);return H(r,"argument-error"),sd._fromEmailAndCode(e,r.code,r.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bf extends lc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),bi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),bi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return bf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return bf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new bf(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends lc{constructor(){super("facebook.com")}static credential(e){return bi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bi._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ds.credential(n,r)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends lc{constructor(){super("github.com")}static credential(e){return bi._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="http://localhost";class od extends Md{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new od(r,s)}static _create(e,n){return new od(e,n)}buildRequest(){return{requestUri:_4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="saml.";class h_ extends Ci{constructor(e){H(e.startsWith(w4),"argument-error"),super(e)}static credentialFromResult(e){return h_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return h_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=od.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return od._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends lc{constructor(){super("twitter.com")}static credential(e,n){return bi._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fs.credential(n,r)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e){return Pi(t,"POST","/v1/accounts:signUp",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ar._fromIdTokenResponse(e,r,i),o=GE(r);return new dr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=GE(r);return new dr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function GE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t){var i;if(ze(t.app))return Promise.reject(Ct(t));const e=lt(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new dr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await AS(e,{returnSecureToken:!0}),r=await dr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Jn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,bp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new bp(e,n,r,i)}}function SS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bp._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(t,e){const n=X(t);await hm(!0,n,e);const{providerUserInfo:r}=await TM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=RS(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function sw(t,e,n=!1){const r=await Ti(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return dr._forOperation(t,"link",r)}async function hm(t,e,n){await id(e);const r=RS(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(t,e,n=!1){const{auth:r}=t;if(ze(r.app))return Promise.reject(Ct(r));const i="reauthenticate";try{const s=await Ti(t,SS(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=um(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),dr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){if(ze(t.app))return Promise.reject(Ct(t));const r="signIn",i=await SS(t,r,e),s=await dr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ow(t,e){return PS(lt(t),e)}async function I4(t,e){const n=X(t);return await hm(!1,n,e.providerId),sw(n,e)}async function E4(t,e){return kS(X(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e){return Pi(t,"POST","/v1/accounts:signInWithCustomToken",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tz(t,e){if(ze(t.app))return Promise.reject(Ct(t));const n=lt(t),r=await T4(n,{token:e,returnSecureToken:!0}),i=await dr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?aw._fromServerResponse(e,n):"totpInfo"in n?lw._fromServerResponse(e,n):Rn(e,"internal-error")}}class aw extends jd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new aw(n)}}class lw extends jd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new lw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e,n){var r;H(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(t){const e=lt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nz(t,e,n){const r=lt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&fm(r,i,n),await Ds(r,i,"getOobCode",o4,"EMAIL_PASSWORD_PROVIDER")}async function rz(t,e,n){await xS(X(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cw(t),r})}async function iz(t,e){await r4(X(t),{oobCode:e})}async function b4(t,e){const n=X(t),r=await xS(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=jd._fromServerResponse(lt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function sz(t,e){const{data:n}=await b4(X(t),e);return n.email}async function oz(t,e,n){if(ze(t.app))return Promise.reject(Ct(t));const r=lt(t),o=await Ds(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AS,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&cw(t),l}),a=await dr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function az(t,e,n){return ze(t.app)?Promise.reject(Ct(t)):ow(X(t),ha.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(t,e,n){const r=lt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&fm(r,o,a)}s(i,n),await Ds(r,i,"getOobCode",a4,"EMAIL_PASSWORD_PROVIDER")}function cz(t,e){const n=Fd.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function uz(t,e,n){if(ze(t.app))return Promise.reject(Ct(t));const r=X(t),i=ha.credentialWithLink(e,n||rd());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ow(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e){return We(t,"POST","/v1/accounts:createAuthUri",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(t,e){const n=tw()?rd():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await x4(X(t),r);return i||[]}async function hz(t,e){const n=X(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&fm(n.auth,i,e);const{email:s}=await s4(n.auth,i);s!==t.email&&await t.reload()}async function fz(t,e,n){const r=X(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&fm(r.auth,s,n);const{email:o}=await l4(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e){return We(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pz(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=X(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ti(r,A4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function mz(t,e){const n=X(t);return ze(n.auth.app)?Promise.reject(Ct(n.auth)):CS(n,e,null)}function gz(t,e){return CS(X(t),null,e)}async function CS(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ti(t,t4(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=um(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new bl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new R4(r,n);case"github.com":return new k4(r,n);case"google.com":return new P4(r,n);case"twitter.com":return new C4(r,n,t.screenName||null);case"custom":case"anonymous":return new bl(r,null);default:return new bl(r,e,n)}}class bl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class NS extends bl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class R4 extends bl{constructor(e,n){super(e,"facebook.com",n)}}class k4 extends NS{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class P4 extends bl{constructor(e,n){super(e,"google.com",n)}}class C4 extends NS{constructor(e,n,r){super(e,"twitter.com",n,r)}}function yz(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:S4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _z(t,e){return X(t).setPersistence(e)}function wz(t){return TS(t)}async function vz(t,e){return lt(t).validatePassword(e)}function N4(t,e,n,r){return X(t).onIdTokenChanged(e,n,r)}function D4(t,e,n){return X(t).beforeAuthStateChanged(e,n)}function L4(t,e,n,r){return X(t).onAuthStateChanged(e,n,r)}function Iz(t){X(t).useDeviceLanguage()}function Ez(t,e){return X(t).updateCurrentUser(e)}function Tz(t){return X(t).signOut()}function bz(t,e){return lt(t).revokeAccessToken(e)}async function xz(t){return X(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Oo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Oo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Oo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Oo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=lt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>jd._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=Oo._fromMfaPendingCredential(i.mfaPendingCredential);return new uw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const d=await dr._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return H(n.user,r,"internal-error"),dr._forOperation(n.user,n.operationType,u);default:Rn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Az(t,e){var i;const n=X(t),r=e;return H(e.customData.operationType,n,"argument-error"),H((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),uw._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e){return We(t,"POST","/v2/accounts/mfaEnrollment:start",He(t,e))}function O4(t,e){return We(t,"POST","/v2/accounts/mfaEnrollment:finalize",He(t,e))}function V4(t,e){return We(t,"POST","/v2/accounts/mfaEnrollment:start",He(t,e))}function M4(t,e){return We(t,"POST","/v2/accounts/mfaEnrollment:finalize",He(t,e))}function F4(t,e){return We(t,"POST","/v2/accounts/mfaEnrollment:withdraw",He(t,e))}class dw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>jd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new dw(e)}async getSession(){return Oo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ti(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ti(this.user,F4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const $g=new WeakMap;function Sz(t){const e=X(t);return $g.has(e)||$g.set(e,dw._fromUser(e)),$g.get(e)}const xp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xp,"1"),this.storage.removeItem(xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1e3,U4=10;class LS extends DS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);NM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,U4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LS.type="LOCAL";const B4=LS;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=1e3;function zg(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Gg(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class OS{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Gg(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return zg(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Gg(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Gg(e);if(window.cookieStore){const a=u=>{const d=u.changed.find(m=>m.name===r);d&&n(d.value),u.deleted.find(m=>m.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=zg(r);const s=setInterval(()=>{const a=zg(r);a!==i&&(n(a),i=a)},$4),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}OS.type="COOKIE";const Rz=OS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends DS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VS.type="SESSION";const MS=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await z4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=mm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return window}function q4(t){yt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){return typeof yt().WorkerGlobalScope<"u"&&typeof yt().importScripts=="function"}async function H4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function K4(){return hw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebaseLocalStorageDb",Q4=1,Ap="firebaseLocalStorage",jS="fbase_key";class Ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gm(t,e){return t.transaction([Ap],e?"readwrite":"readonly").objectStore(Ap)}function Y4(){const t=indexedDB.deleteDatabase(FS);return new Ud(t).toPromise()}function f_(){const t=indexedDB.open(FS,Q4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ap,{keyPath:jS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ap)?e(r):(r.close(),await Y4(),e(await f_()))})})}async function HE(t,e,n){const r=gm(t,!0).put({[jS]:e,value:n});return new Ud(r).toPromise()}async function J4(t,e){const n=gm(t,!1).get(e),r=await new Ud(n).toPromise();return r===void 0?null:r.value}function WE(t,e){const n=gm(t,!0).delete(e);return new Ud(n).toPromise()}const X4=800,Z4=3;class US{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await f_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Z4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pm._getInstance(K4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await H4(),!this.activeServiceWorker)return;this.sender=new G4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await f_();return await HE(e,xp,"1"),await WE(e,xp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>J4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gm(i,!1).getAll();return new Ud(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}US.type="LOCAL";const eF=US;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t,e){return We(t,"POST","/v2/accounts/mfaSignIn:start",He(t,e))}function tF(t,e){return We(t,"POST","/v2/accounts/mfaSignIn:finalize",He(t,e))}function nF(t,e){return We(t,"POST","/v2/accounts/mfaSignIn:finalize",He(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=IS("rcb"),rF=new Od(3e4,6e4);class iF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=yt().grecaptcha)!=null&&e.render)}load(e,n=""){return H(sF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&OE(yt().grecaptcha)?Promise.resolve(yt().grecaptcha):new Promise((r,i)=>{const s=yt().setTimeout(()=>{i(dn(e,"network-request-failed"))},rF.get());yt()[qg]=()=>{yt().clearTimeout(s),delete yt()[qg];const a=yt().grecaptcha;if(!a||!OE(a)){i(dn(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${jM()}?${oc({onload:qg,render:"explicit",hl:n})}`;iw(o).catch(()=>{clearTimeout(s),i(dn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=yt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function sF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class oF{async load(e){return new GM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="recaptcha",aF={theme:"light",type:"image"};class kz{constructor(e,n,r={...aF}){this.parameters=r,this.type=Su,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=lt(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oF:new iF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=yt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(tw()&&!hw(),this.auth,"internal-error"),await lF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IM(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function lF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=jo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Pz(t,e,n){if(ze(t.app))return Promise.reject(Ct(t));const r=lt(t),i=await ym(r,e,X(n));return new fw(i,s=>ow(r,s))}async function Cz(t,e,n){const r=X(t);await hm(!1,r,"phone");const i=await ym(r.auth,e,X(n));return new fw(i,s=>I4(r,s))}async function Nz(t,e,n){const r=X(t);if(ze(r.auth.app))return Promise.reject(Ct(r.auth));const i=await ym(r.auth,e,X(n));return new fw(i,s=>E4(r,s))}async function ym(t,e,n){var r;if(!t._getRecaptchaConfig())try{await TS(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){H(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ds(t,o,"mfaSmsEnrollment",async(d,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Au){H((n==null?void 0:n.type)===Su,d,"argument-error");const m=await Hg(d,h,n);return qE(d,m)}return qE(d,h)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;H(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ds(t,a,"mfaSmsSignIn",async(h,m)=>{if(m.phoneSignInInfo.captchaResponse===Au){H((n==null?void 0:n.type)===Su,h,"argument-error");const y=await Hg(h,m,n);return KE(h,y)}return KE(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ds(t,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===Au){H((n==null?void 0:n.type)===Su,u,"argument-error");const h=await Hg(u,d,n);return zE(u,h)}return zE(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function Dz(t,e){const n=X(t);if(ze(n.auth.app))return Promise.reject(Ct(n.auth));await sw(n,e)}async function Hg(t,e,n){H(n.type===Su,t,"argument-error");const r=await n.verify();H(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.providerId=xl.PROVIDER_ID,this.auth=lt(e)}verifyPhoneNumber(e,n){return ym(this.auth,e,X(n))}static credential(e,n){return jo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return xl.credentialFromTaggedObject(n)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?jo._fromTokenResponse(n,r):null}}xl.PROVIDER_ID="phone";xl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t,e){return e?hi(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends Md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function cF(t){return PS(t.auth,new pw(t),t.bypassAuthState)}function uF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),kS(n,new pw(t),t.bypassAuthState)}async function dF(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),sw(n,new pw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cF;case"linkViaPopup":case"linkViaRedirect":return dF;case"reauthViaPopup":case"reauthViaRedirect":return uF;default:Rn(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=new Od(2e3,1e4);async function Lz(t,e,n){if(ze(t.app))return Promise.reject(dn(t,"operation-not-supported-in-this-environment"));const r=lt(t);ac(t,e,Ci);const i=fa(r,n);return new fi(r,"signInViaPopup",e,i).executeNotNull()}async function Oz(t,e,n){const r=X(t);if(ze(r.auth.app))return Promise.reject(dn(r.auth,"operation-not-supported-in-this-environment"));ac(r.auth,e,Ci);const i=fa(r.auth,n);return new fi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Vz(t,e,n){const r=X(t);ac(r.auth,e,Ci);const i=fa(r.auth,n);return new fi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class fi extends BS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hF.get())};e()}}fi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="pendingRedirect",xf=new Map;class pF extends BS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xf.get(this.auth._key());if(!e){try{const r=await mF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mF(t,e){const n=zS(e),r=$S(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function mw(t,e){return $S(t)._set(zS(e),"true")}function gF(t,e){xf.set(t._key(),e)}function $S(t){return hi(t._redirectPersistence)}function zS(t){return Tf(fF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(t,e,n){return yF(t,e,n)}async function yF(t,e,n){if(ze(t.app))return Promise.reject(Ct(t));const r=lt(t);ac(t,e,Ci),await r._initializationPromise;const i=fa(r,n);return await mw(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Fz(t,e,n){return _F(t,e,n)}async function _F(t,e,n){const r=X(t);if(ac(r.auth,e,Ci),ze(r.auth.app))return Promise.reject(Ct(r.auth));await r.auth._initializationPromise;const i=fa(r.auth,n);await mw(i,r.auth);const s=await qS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function jz(t,e,n){return wF(t,e,n)}async function wF(t,e,n){const r=X(t);ac(r.auth,e,Ci),await r.auth._initializationPromise;const i=fa(r.auth,n);await hm(!1,r,e.providerId),await mw(i,r.auth);const s=await qS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Uz(t,e){return await lt(t)._initializationPromise,GS(t,e,!1)}async function GS(t,e,n=!1){if(ze(t.app))return Promise.reject(Ct(t));const r=lt(t),i=fa(r,e),o=await new pF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function qS(t){const e=mm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=10*60*1e3;class IF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vF&&this.cachedEventUids.clear(),this.cachedEventUids.has(QE(e))}saveEventToCache(e){this.cachedEventUids.add(QE(e)),this.lastProcessedEventTime=Date.now()}}function QE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(t,e={}){return We(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xF=/^https?/;async function AF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TF(t);for(const n of e)try{if(SF(n))return}catch{}Rn(t,"unauthorized-domain")}function SF(t){const e=rd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xF.test(n))return!1;if(bF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=new Od(3e4,6e4);function YE(){const t=yt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kF(t){return new Promise((e,n)=>{var i,s,o;function r(){YE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{YE(),n(dn(t,"network-request-failed"))},timeout:RF.get()})}if((s=(i=yt().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=yt().gapi)!=null&&o.load)r();else{const a=IS("iframefcb");return yt()[a]=()=>{gapi.load?r():n(dn(t,"network-request-failed"))},iw(`${BM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Af=null,e})}let Af=null;function PF(t){return Af=Af||kF(t),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new Od(5e3,15e3),NF="__/auth/iframe",DF="emulator/auth/iframe",LF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VF(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nw(e,DF):`https://${t.config.authDomain}/${NF}`,r={apiKey:e.apiKey,appName:t.name,v:da},i=OF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${oc(r).slice(1)}`}async function MF(t){const e=await PF(t),n=yt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:VF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=dn(t,"network-request-failed"),a=yt().setTimeout(()=>{s(o)},CF.get());function l(){yt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jF=500,UF=600,BF="_blank",$F="http://localhost";class JE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zF(t,e,n,r=jF,i=UF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...FF,width:r.toString(),height:i.toString(),top:s,left:o},u=Et().toLowerCase();n&&(a=pS(u)?BF:n),hS(u)&&(e=e||$F,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(CM(u)&&a!=="_self")return GF(e||"",a),new JE(null);const h=window.open(e||"",a,d);H(h,t,"popup-blocked");try{h.focus()}catch{}return new JE(h)}function GF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="__/auth/handler",HF="emulator/auth/handler",WF=encodeURIComponent("fac");async function XE(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:da,eventId:i};if(e instanceof Ci){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof lc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${WF}=${encodeURIComponent(l)}`:"";return`${KF(t)}?${oc(a).slice(1)}${u}`}function KF({config:t}){return t.emulator?nw(t,HF):`https://${t.authDomain}/${qF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="webStorageSupport";class QF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MS,this._completeRedirectFn=GS,this._overrideRedirectResult=gF}async _openPopup(e,n,r,i){var o;Ei((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await XE(e,n,r,rd(),i);return zF(e,s,mm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await XE(e,n,r,rd(),i);return q4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ei(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MF(e),r=new IF(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wg,{type:Wg},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Wg];s!==void 0&&n(!!s),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wS()||fS()||rw()}}const YF=QF;class WS{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return qr("unexpected MultiFactorSessionType")}}}class gw extends WS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new gw(e)}_finalizeEnroll(e,n,r){return O4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return tF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class JF{constructor(){}static assertion(e){return gw._fromCredential(e)}}JF.FACTOR_ID="phone";class XF{static assertionForEnrollment(e,n){return ad._fromSecret(e,n)}static assertionForSignIn(e,n){return ad._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;H(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await V4(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return yw._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}XF.FACTOR_ID="totp";class ad extends WS{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new ad(n,void 0,e)}static _fromEnrollmentId(e,n){return new ad(n,e)}async _finalizeEnroll(e,n,r){return H(typeof this.secret<"u",e,"argument-error"),M4(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return nF(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class yw{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new yw(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(Qh(e)||Qh(n))&&(r=!0),r&&(Qh(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Qh(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Qh(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var ZE="@firebase/auth",eT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t3(t){ur(new Wn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vS(t)},u=new MM(r,i,s,l);return JM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ur(new Wn("auth-internal",e=>{const n=lt(e.getProvider("auth").getImmediate());return(r=>new ZF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(ZE,eT,e3(t)),Jt(ZE,eT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=5*60,r3=fA("authIdTokenMaxAge")||n3;let tT=null;const i3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>r3)return;const i=n==null?void 0:n.token;tT!==i&&(tT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function s3(t=Dd()){const e=Nr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YM(t,{popupRedirectResolver:YF,persistence:[eF,B4,MS]}),r=fA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=i3(s.toString());D4(n,o,()=>o(n.currentUser)),N4(n,a=>o(a))}}const i=uA("auth");return i&&XM(n,`http://${i}`),n}function o3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}FM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=dn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",o3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t3("Browser");var nT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,KS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,_){function A(){}A.prototype=_.prototype,x.D=_.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(b,P,O){for(var R=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)R[tn-2]=arguments[tn];return _.prototype[P].apply(b,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,_,A){A||(A=0);var b=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)b[P]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(P=0;16>P;++P)b[P]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=x.g[0],A=x.g[1],P=x.g[2];var O=x.g[3],R=_+(O^A&(P^O))+b[0]+3614090360&4294967295;_=A+(R<<7&4294967295|R>>>25),R=O+(P^_&(A^P))+b[1]+3905402710&4294967295,O=_+(R<<12&4294967295|R>>>20),R=P+(A^O&(_^A))+b[2]+606105819&4294967295,P=O+(R<<17&4294967295|R>>>15),R=A+(_^P&(O^_))+b[3]+3250441966&4294967295,A=P+(R<<22&4294967295|R>>>10),R=_+(O^A&(P^O))+b[4]+4118548399&4294967295,_=A+(R<<7&4294967295|R>>>25),R=O+(P^_&(A^P))+b[5]+1200080426&4294967295,O=_+(R<<12&4294967295|R>>>20),R=P+(A^O&(_^A))+b[6]+2821735955&4294967295,P=O+(R<<17&4294967295|R>>>15),R=A+(_^P&(O^_))+b[7]+4249261313&4294967295,A=P+(R<<22&4294967295|R>>>10),R=_+(O^A&(P^O))+b[8]+1770035416&4294967295,_=A+(R<<7&4294967295|R>>>25),R=O+(P^_&(A^P))+b[9]+2336552879&4294967295,O=_+(R<<12&4294967295|R>>>20),R=P+(A^O&(_^A))+b[10]+4294925233&4294967295,P=O+(R<<17&4294967295|R>>>15),R=A+(_^P&(O^_))+b[11]+2304563134&4294967295,A=P+(R<<22&4294967295|R>>>10),R=_+(O^A&(P^O))+b[12]+1804603682&4294967295,_=A+(R<<7&4294967295|R>>>25),R=O+(P^_&(A^P))+b[13]+4254626195&4294967295,O=_+(R<<12&4294967295|R>>>20),R=P+(A^O&(_^A))+b[14]+2792965006&4294967295,P=O+(R<<17&4294967295|R>>>15),R=A+(_^P&(O^_))+b[15]+1236535329&4294967295,A=P+(R<<22&4294967295|R>>>10),R=_+(P^O&(A^P))+b[1]+4129170786&4294967295,_=A+(R<<5&4294967295|R>>>27),R=O+(A^P&(_^A))+b[6]+3225465664&4294967295,O=_+(R<<9&4294967295|R>>>23),R=P+(_^A&(O^_))+b[11]+643717713&4294967295,P=O+(R<<14&4294967295|R>>>18),R=A+(O^_&(P^O))+b[0]+3921069994&4294967295,A=P+(R<<20&4294967295|R>>>12),R=_+(P^O&(A^P))+b[5]+3593408605&4294967295,_=A+(R<<5&4294967295|R>>>27),R=O+(A^P&(_^A))+b[10]+38016083&4294967295,O=_+(R<<9&4294967295|R>>>23),R=P+(_^A&(O^_))+b[15]+3634488961&4294967295,P=O+(R<<14&4294967295|R>>>18),R=A+(O^_&(P^O))+b[4]+3889429448&4294967295,A=P+(R<<20&4294967295|R>>>12),R=_+(P^O&(A^P))+b[9]+568446438&4294967295,_=A+(R<<5&4294967295|R>>>27),R=O+(A^P&(_^A))+b[14]+3275163606&4294967295,O=_+(R<<9&4294967295|R>>>23),R=P+(_^A&(O^_))+b[3]+4107603335&4294967295,P=O+(R<<14&4294967295|R>>>18),R=A+(O^_&(P^O))+b[8]+1163531501&4294967295,A=P+(R<<20&4294967295|R>>>12),R=_+(P^O&(A^P))+b[13]+2850285829&4294967295,_=A+(R<<5&4294967295|R>>>27),R=O+(A^P&(_^A))+b[2]+4243563512&4294967295,O=_+(R<<9&4294967295|R>>>23),R=P+(_^A&(O^_))+b[7]+1735328473&4294967295,P=O+(R<<14&4294967295|R>>>18),R=A+(O^_&(P^O))+b[12]+2368359562&4294967295,A=P+(R<<20&4294967295|R>>>12),R=_+(A^P^O)+b[5]+4294588738&4294967295,_=A+(R<<4&4294967295|R>>>28),R=O+(_^A^P)+b[8]+2272392833&4294967295,O=_+(R<<11&4294967295|R>>>21),R=P+(O^_^A)+b[11]+1839030562&4294967295,P=O+(R<<16&4294967295|R>>>16),R=A+(P^O^_)+b[14]+4259657740&4294967295,A=P+(R<<23&4294967295|R>>>9),R=_+(A^P^O)+b[1]+2763975236&4294967295,_=A+(R<<4&4294967295|R>>>28),R=O+(_^A^P)+b[4]+1272893353&4294967295,O=_+(R<<11&4294967295|R>>>21),R=P+(O^_^A)+b[7]+4139469664&4294967295,P=O+(R<<16&4294967295|R>>>16),R=A+(P^O^_)+b[10]+3200236656&4294967295,A=P+(R<<23&4294967295|R>>>9),R=_+(A^P^O)+b[13]+681279174&4294967295,_=A+(R<<4&4294967295|R>>>28),R=O+(_^A^P)+b[0]+3936430074&4294967295,O=_+(R<<11&4294967295|R>>>21),R=P+(O^_^A)+b[3]+3572445317&4294967295,P=O+(R<<16&4294967295|R>>>16),R=A+(P^O^_)+b[6]+76029189&4294967295,A=P+(R<<23&4294967295|R>>>9),R=_+(A^P^O)+b[9]+3654602809&4294967295,_=A+(R<<4&4294967295|R>>>28),R=O+(_^A^P)+b[12]+3873151461&4294967295,O=_+(R<<11&4294967295|R>>>21),R=P+(O^_^A)+b[15]+530742520&4294967295,P=O+(R<<16&4294967295|R>>>16),R=A+(P^O^_)+b[2]+3299628645&4294967295,A=P+(R<<23&4294967295|R>>>9),R=_+(P^(A|~O))+b[0]+4096336452&4294967295,_=A+(R<<6&4294967295|R>>>26),R=O+(A^(_|~P))+b[7]+1126891415&4294967295,O=_+(R<<10&4294967295|R>>>22),R=P+(_^(O|~A))+b[14]+2878612391&4294967295,P=O+(R<<15&4294967295|R>>>17),R=A+(O^(P|~_))+b[5]+4237533241&4294967295,A=P+(R<<21&4294967295|R>>>11),R=_+(P^(A|~O))+b[12]+1700485571&4294967295,_=A+(R<<6&4294967295|R>>>26),R=O+(A^(_|~P))+b[3]+2399980690&4294967295,O=_+(R<<10&4294967295|R>>>22),R=P+(_^(O|~A))+b[10]+4293915773&4294967295,P=O+(R<<15&4294967295|R>>>17),R=A+(O^(P|~_))+b[1]+2240044497&4294967295,A=P+(R<<21&4294967295|R>>>11),R=_+(P^(A|~O))+b[8]+1873313359&4294967295,_=A+(R<<6&4294967295|R>>>26),R=O+(A^(_|~P))+b[15]+4264355552&4294967295,O=_+(R<<10&4294967295|R>>>22),R=P+(_^(O|~A))+b[6]+2734768916&4294967295,P=O+(R<<15&4294967295|R>>>17),R=A+(O^(P|~_))+b[13]+1309151649&4294967295,A=P+(R<<21&4294967295|R>>>11),R=_+(P^(A|~O))+b[4]+4149444226&4294967295,_=A+(R<<6&4294967295|R>>>26),R=O+(A^(_|~P))+b[11]+3174756917&4294967295,O=_+(R<<10&4294967295|R>>>22),R=P+(_^(O|~A))+b[2]+718787259&4294967295,P=O+(R<<15&4294967295|R>>>17),R=A+(O^(P|~_))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+_&4294967295,x.g[1]=x.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,_){_===void 0&&(_=x.length);for(var A=_-this.blockSize,b=this.B,P=this.h,O=0;O<_;){if(P==0)for(;O<=A;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<_;)if(b[P++]=x.charCodeAt(O++),P==this.blockSize){i(this,b),P=0;break}}else for(;O<_;)if(b[P++]=x[O++],P==this.blockSize){i(this,b),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var _=1;_<x.length-8;++_)x[_]=0;var A=8*this.o;for(_=x.length-8;_<x.length;++_)x[_]=A&255,A/=256;for(this.u(x),x=Array(16),_=A=0;4>_;++_)for(var b=0;32>b;b+=8)x[A++]=this.g[_]>>>b&255;return x};function s(x,_){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=_(x)}function o(x,_){this.h=_;for(var A=[],b=!0,P=x.length-1;0<=P;P--){var O=x[P]|0;b&&O==_||(A[P]=O,b=!1)}this.g=A}var a={};function l(x){return-128<=x&&128>x?s(x,function(_){return new o([_|0],0>_?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return C(u(-x));for(var _=[],A=1,b=0;x>=A;b++)_[b]=x/A|0,A*=4294967296;return new o(_,0)}function d(x,_){if(x.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(x.charAt(0)=="-")return C(d(x.substring(1),_));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(_,8)),b=h,P=0;P<x.length;P+=8){var O=Math.min(8,x.length-P),R=parseInt(x.substring(P,P+O),_);8>O?(O=u(Math.pow(_,O)),b=b.j(O).add(u(R))):(b=b.j(A),b=b.add(u(R)))}return b}var h=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-C(this).m();for(var x=0,_=1,A=0;A<this.g.length;A++){var b=this.i(A);x+=(0<=b?b:4294967296+b)*_,_*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(S(this))return"-"+C(this).toString(x);for(var _=u(Math.pow(x,6)),A=this,b="";;){var P=L(A,_).g;A=E(A,P.j(_));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=P,I(A))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(var _=0;_<x.g.length;_++)if(x.g[_]!=0)return!1;return!0}function S(x){return x.h==-1}t.l=function(x){return x=E(this,x),S(x)?-1:I(x)?0:1};function C(x){for(var _=x.g.length,A=[],b=0;b<_;b++)A[b]=~x.g[b];return new o(A,~x.h).add(m)}t.abs=function(){return S(this)?C(this):this},t.add=function(x){for(var _=Math.max(this.g.length,x.g.length),A=[],b=0,P=0;P<=_;P++){var O=b+(this.i(P)&65535)+(x.i(P)&65535),R=(O>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);b=R>>>16,O&=65535,R&=65535,A[P]=R<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(x,_){return x.add(C(_))}t.j=function(x){if(I(this)||I(x))return h;if(S(this))return S(x)?C(this).j(C(x)):C(C(this).j(x));if(S(x))return C(this.j(C(x)));if(0>this.l(y)&&0>x.l(y))return u(this.m()*x.m());for(var _=this.g.length+x.g.length,A=[],b=0;b<2*_;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<x.g.length;P++){var O=this.i(b)>>>16,R=this.i(b)&65535,tn=x.i(P)>>>16,Xn=x.i(P)&65535;A[2*b+2*P]+=R*Xn,v(A,2*b+2*P),A[2*b+2*P+1]+=O*Xn,v(A,2*b+2*P+1),A[2*b+2*P+1]+=R*tn,v(A,2*b+2*P+1),A[2*b+2*P+2]+=O*tn,v(A,2*b+2*P+2)}for(b=0;b<_;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=_;b<2*_;b++)A[b]=0;return new o(A,0)};function v(x,_){for(;(x[_]&65535)!=x[_];)x[_+1]+=x[_]>>>16,x[_]&=65535,_++}function T(x,_){this.g=x,this.h=_}function L(x,_){if(I(_))throw Error("division by zero");if(I(x))return new T(h,h);if(S(x))return _=L(C(x),_),new T(C(_.g),C(_.h));if(S(_))return _=L(x,C(_)),new T(C(_.g),_.h);if(30<x.g.length){if(S(x)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,b=_;0>=b.l(x);)A=U(A),b=U(b);var P=G(A,1),O=G(b,1);for(b=G(b,2),A=G(A,2);!I(b);){var R=O.add(b);0>=R.l(x)&&(P=P.add(A),O=R),b=G(b,1),A=G(A,1)}return _=E(x,P.j(_)),new T(P,_)}for(P=h;0<=x.l(_);){for(A=Math.max(1,Math.floor(x.m()/_.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=u(A),R=O.j(_);S(R)||0<R.l(x);)A-=b,O=u(A),R=O.j(_);I(O)&&(O=m),P=P.add(O),x=E(x,R)}return new T(P,x)}t.A=function(x){return L(this,x).h},t.and=function(x){for(var _=Math.max(this.g.length,x.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)&x.i(b);return new o(A,this.h&x.h)},t.or=function(x){for(var _=Math.max(this.g.length,x.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)|x.i(b);return new o(A,this.h|x.h)},t.xor=function(x){for(var _=Math.max(this.g.length,x.g.length),A=[],b=0;b<_;b++)A[b]=this.i(b)^x.i(b);return new o(A,this.h^x.h)};function U(x){for(var _=x.g.length+1,A=[],b=0;b<_;b++)A[b]=x.i(b)<<1|x.i(b-1)>>>31;return new o(A,x.h)}function G(x,_){var A=_>>5;_%=32;for(var b=x.g.length-A,P=[],O=0;O<b;O++)P[O]=0<_?x.i(O+A)>>>_|x.i(O+A+1)<<32-_:x.i(O+A);return new o(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ls=o}).apply(typeof nT<"u"?nT:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QS,cu,YS,Sf,p_,JS,XS,ZS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var N=c[w];if(!(N in g))break e;g=g[N]}c=c[c.length-1],w=g[c],f=f(w),f!=w&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var g=0,w=!1,N={next:function(){if(!w&&g<c.length){var M=g++;return{value:f(M,c[M]),done:!1}}return w=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,g){return c.call.apply(c.bind,arguments)}function h(c,f,g){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,w),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function m(c,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function y(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function I(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(w,N,M){for(var Q=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)Q[Ve-2]=arguments[Ve];return f.prototype[N].apply(w,Q)}}function S(c){const f=c.length;if(0<f){const g=Array(f);for(let w=0;w<f;w++)g[w]=c[w];return g}return[]}function C(c,f){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const N=c.length||0,M=w.length||0;c.length=N+M;for(let Q=0;Q<M;Q++)c[N+Q]=w[Q]}else c.push(w)}}class E{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function L(c){return L[" "](c),c}L[" "]=function(){};var U=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function G(c,f,g){for(const w in c)f.call(g,c[w],w,c)}function x(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function _(c){const f={};for(const g in c)f[g]=c[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,f){let g,w;for(let N=1;N<arguments.length;N++){w=arguments[N];for(g in w)c[g]=w[g];for(let M=0;M<A.length;M++)g=A[M],Object.prototype.hasOwnProperty.call(w,g)&&(c[g]=w[g])}}function P(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function O(c){a.setTimeout(()=>{throw c},0)}function R(){var c=re;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class tn{constructor(){this.h=this.g=null}add(f,g){const w=Xn.get();w.set(f,g),this.h?this.h.next=w:this.g=w,this.h=w}}var Xn=new E(()=>new Vi,c=>c.reset());class Vi{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let mn,Y=!1,re=new tn,oe=()=>{const c=a.Promise.resolve(void 0);mn=()=>{c.then(Pe)}};var Pe=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(g){O(g)}var f=Xn;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}Y=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function rn(c,f){if(De.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(U){e:{try{L(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:sn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&rn.aa.h.call(this)}}I(rn,De);var sn={2:"touch",3:"pen",4:"mouse"};rn.prototype.h=function(){rn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),fr=0;function ni(c,f,g,w,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!w,this.ha=N,this.key=++fr,this.da=this.fa=!1}function ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Mi(c){this.src=c,this.g={},this.h=0}Mi.prototype.add=function(c,f,g,w,N){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var Q=eo(c,f,w,N);return-1<Q?(f=c[Q],g||(f.fa=!1)):(f=new ni(f,this.src,M,!!w,N),f.fa=g,c.push(f)),f};function kn(c,f){var g=f.type;if(g in c.g){var w=c.g[g],N=Array.prototype.indexOf.call(w,f,void 0),M;(M=0<=N)&&Array.prototype.splice.call(w,N,1),M&&(ne(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function eo(c,f,g,w){for(var N=0;N<c.length;++N){var M=c[N];if(!M.da&&M.listener==f&&M.capture==!!g&&M.ha==w)return N}return-1}var Fi="closure_lm_"+(1e6*Math.random()|0),Lr={};function oh(c,f,g,w,N){if(w&&w.once)return to(c,f,g,w,N);if(Array.isArray(f)){for(var M=0;M<f.length;M++)oh(c,f[M],g,w,N);return null}return g=ji(g),c&&c[be]?c.K(f,g,u(w)?!!w.capture:!!w,N):vc(c,f,g,!1,w,N)}function vc(c,f,g,w,N,M){if(!f)throw Error("Invalid event type");var Q=u(N)?!!N.capture:!!N,Ve=no(c);if(Ve||(c[Fi]=Ve=new Mi(c)),g=Ve.add(f,g,w,Q,M),g.proxy)return g;if(w=Lv(),g.proxy=w,w.src=c,w.listener=g,c.addEventListener)nn||(N=Q),N===void 0&&(N=!1),c.addEventListener(f.toString(),w,N);else if(c.attachEvent)c.attachEvent(Hm(f.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Lv(){function c(g){return f.call(c.src,c.listener,g)}const f=Ia;return c}function to(c,f,g,w,N){if(Array.isArray(f)){for(var M=0;M<f.length;M++)to(c,f[M],g,w,N);return null}return g=ji(g),c&&c[be]?c.L(f,g,u(w)?!!w.capture:!!w,N):vc(c,f,g,!0,w,N)}function $t(c,f,g,w,N){if(Array.isArray(f))for(var M=0;M<f.length;M++)$t(c,f[M],g,w,N);else w=u(w)?!!w.capture:!!w,g=ji(g),c&&c[be]?(c=c.i,f=String(f).toString(),f in c.g&&(M=c.g[f],g=eo(M,g,w,N),-1<g&&(ne(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete c.g[f],c.h--)))):c&&(c=no(c))&&(f=c.g[f.toString()],c=-1,f&&(c=eo(f,g,w,N)),(g=-1<c?f[c]:null)&&bt(g))}function bt(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[be])kn(f.i,c);else{var g=c.type,w=c.proxy;f.removeEventListener?f.removeEventListener(g,w,c.capture):f.detachEvent?f.detachEvent(Hm(g),w):f.addListener&&f.removeListener&&f.removeListener(w),(g=no(f))?(kn(g,c),g.h==0&&(g.src=null,f[Fi]=null)):ne(c)}}}function Hm(c){return c in Lr?Lr[c]:Lr[c]="on"+c}function Ia(c,f){if(c.da)c=!0;else{f=new rn(f,this);var g=c.listener,w=c.ha||c.src;c.fa&&bt(c),c=g.call(w,f)}return c}function no(c){return c=c[Fi],c instanceof Mi?c:null}var Ic="__closure_events_fn_"+(1e9*Math.random()>>>0);function ji(c){return typeof c=="function"?c:(c[Ic]||(c[Ic]=function(f){return c.handleEvent(f)}),c[Ic])}function ut(){we.call(this),this.i=new Mi(this),this.M=this,this.F=null}I(ut,we),ut.prototype[be]=!0,ut.prototype.removeEventListener=function(c,f,g,w){$t(this,c,f,g,w)};function Ee(c,f){var g,w=c.F;if(w)for(g=[];w;w=w.F)g.push(w);if(c=c.M,w=f.type||f,typeof f=="string")f=new De(f,c);else if(f instanceof De)f.target=f.target||c;else{var N=f;f=new De(w,c),b(f,N)}if(N=!0,g)for(var M=g.length-1;0<=M;M--){var Q=f.g=g[M];N=ri(Q,w,!0,f)&&N}if(Q=f.g=c,N=ri(Q,w,!0,f)&&N,N=ri(Q,w,!1,f)&&N,g)for(M=0;M<g.length;M++)Q=f.g=g[M],N=ri(Q,w,!1,f)&&N}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],w=0;w<g.length;w++)ne(g[w]);delete c.g[f],c.h--}}this.F=null},ut.prototype.K=function(c,f,g,w){return this.i.add(String(c),f,!1,g,w)},ut.prototype.L=function(c,f,g,w){return this.i.add(String(c),f,!0,g,w)};function ri(c,f,g,w){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,M=0;M<f.length;++M){var Q=f[M];if(Q&&!Q.da&&Q.capture==g){var Ve=Q.listener,Ot=Q.ha||Q.src;Q.fa&&kn(c.i,Q),N=Ve.call(Ot,w)!==!1&&N}}return N&&!w.defaultPrevented}function Ec(c,f,g){if(typeof c=="function")g&&(c=m(c,g));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ui(c){c.g=Ec(()=>{c.g=null,c.i&&(c.i=!1,Ui(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class Bi extends we{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(c){we.call(this),this.h=c,this.g={}}I(Pn,we);var $i=[];function Tc(c){G(c.g,function(f,g){this.g.hasOwnProperty(g)&&bt(f)},c),c.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),Tc(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bc=a.JSON.stringify,zi=a.JSON.parse,Wm=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Gi(){}Gi.prototype.h=null;function pr(c){return c.h||(c.h=c.i())}function qi(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ea(){De.call(this,"d")}I(Ea,De);function Ta(){De.call(this,"c")}I(Ta,De);var Or={},Zn=null;function ba(){return Zn=Zn||new ut}Or.La="serverreachability";function dt(c){De.call(this,Or.La,c)}I(dt,De);function ro(c){const f=ba();Ee(f,new dt(f))}Or.STAT_EVENT="statevent";function er(c,f){De.call(this,Or.STAT_EVENT,c),this.stat=f}I(er,De);function xt(c){const f=ba();Ee(f,new er(f,c))}Or.Ma="timingevent";function ah(c,f){De.call(this,Or.Ma,c),this.size=f}I(ah,De);function Cn(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Hi(){this.g=!0}Hi.prototype.xa=function(){this.g=!1};function lh(c,f,g,w,N,M){c.info(function(){if(c.g)if(M)for(var Q="",Ve=M.split("&"),Ot=0;Ot<Ve.length;Ot++){var Ie=Ve[Ot].split("=");if(1<Ie.length){var Gt=Ie[0];Ie=Ie[1];var qt=Gt.split("_");Q=2<=qt.length&&qt[1]=="type"?Q+(Gt+"="+Ie+"&"):Q+(Gt+"=redacted&")}}else Q=null;else Q=M;return"XMLHTTP REQ ("+w+") [attempt "+N+"]: "+f+`
`+g+`
`+Q})}function ch(c,f,g,w,N,M,Q){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+N+"]: "+f+`
`+g+`
`+M+" "+Q})}function io(c,f,g,w){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dh(c,g)+(w?" "+w:"")})}function uh(c,f){c.info(function(){return"TIMEOUT: "+f})}Hi.prototype.info=function(){};function dh(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var w=g[c];if(!(2>w.length)){var N=w[1];if(Array.isArray(N)&&!(1>N.length)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(var Q=1;Q<N.length;Q++)N[Q]=""}}}}return bc(g)}catch{return f}}var xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ac;function Aa(){}I(Aa,Gi),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Ac=new Aa;function Nn(c,f,g,w){this.j=c,this.i=f,this.l=g,this.R=w||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hh}function hh(){this.i=null,this.g="",this.h=!1}var Sc={},Sa={};function Ra(c,f,g){c.L=1,c.v=oo(zt(f)),c.m=g,c.P=!0,fh(c,null)}function fh(c,f){c.F=Date.now(),mr(c),c.A=zt(c.v);var g=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Ih(g.i,"t",w),c.C=0,g=c.j.J,c.h=new hh,c.g=xe(c.j,g?f:null,!c.m),0<c.O&&(c.M=new Bi(m(c.Y,c,c.g),c.O)),f=c.U,g=c.g,w=c.ca;var N="readystatechange";Array.isArray(N)||(N&&($i[0]=N.toString()),N=$i);for(var M=0;M<N.length;M++){var Q=oh(g,N[M],w||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),ro(),lh(c.i,c.u,c.A,c.l,c.R,c.m)}Nn.prototype.ca=function(c){c=c.target;const f=this.M;f&&yr(c)==3?f.j():this.Y(c)},Nn.prototype.Y=function(c){try{if(c==this.g)e:{const qt=yr(this.g);var f=this.g.Ba();const Ua=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Ah(this.g)))){this.J||qt!=4||f==7||(f==8||0>=Ua?ro(3):ro(2)),Pa(this);var g=this.g.Z();this.X=g;t:if(ka(this)){var w=Ah(this.g);c="";var N=w.length,M=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tr(this),ii(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(w[f],{stream:!(M&&f==N-1)});w.length=0,this.h.g+=c,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,ch(this.i,this.u,this.A,this.l,this.R,qt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Ot=this.g;if((Ve=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ve)){var Ie=Ve;break t}}Ie=null}if(g=Ie)io(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wi(this,g);else{this.o=!1,this.s=3,xt(12),tr(this),ii(this);break e}}if(this.P){g=!0;let _r;for(;!this.J&&this.C<Q.length;)if(_r=ph(this,Q),_r==Sa){qt==4&&(this.s=4,xt(14),g=!1),io(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==Sc){this.s=4,xt(15),io(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else io(this.i,this.l,_r,null),Wi(this,_r);if(ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||Q.length!=0||this.h.h||(this.s=1,xt(16),g=!1),this.o=this.o&&g,!g)io(this.i,this.l,Q,"[Invalid Chunked Response]"),tr(this),ii(this);else if(0<Q.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),F(Gt),Gt.M=!0,xt(11))}}else io(this.i,this.l,Q,null),Wi(this,Q);qt==4&&tr(this),this.o&&!this.J&&(qt==4?Oe(this.j,this):(this.o=!1,mr(this)))}else ng(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),tr(this),ii(this)}}}catch{}finally{}};function ka(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ph(c,f){var g=c.C,w=f.indexOf(`
`,g);return w==-1?Sa:(g=Number(f.substring(g,w)),isNaN(g)?Sc:(w+=1,w+g>f.length?Sa:(f=f.slice(w,w+g),c.C=w+g,f)))}Nn.prototype.cancel=function(){this.J=!0,tr(this)};function mr(c){c.S=Date.now()+c.I,mh(c,c.I)}function mh(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Cn(m(c.ba,c),f)}function Pa(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Nn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(uh(this.i,this.A),this.L!=2&&(ro(),xt(17)),tr(this),this.s=2,ii(this)):mh(this,this.S-c)};function ii(c){c.j.G==0||c.J||Oe(c.j,c)}function tr(c){Pa(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Tc(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Wi(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Da(g.h,c))){if(!c.K&&Da(g.h,c)&&g.G==3){try{var w=g.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var N=w;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ae(g),Fa(g);else break e;k(g),xt(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=Cn(m(g.Za,g),6e3));if(1>=Na(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ze(g,11)}else if((c.K||g.g==c)&&ae(g),!v(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let Ie=N[f];if(g.T=Ie[0],Ie=Ie[1],g.G==2)if(Ie[0]=="c"){g.K=Ie[1],g.ia=Ie[2];const Gt=Ie[3];Gt!=null&&(g.la=Gt,g.j.info("VER="+g.la));const qt=Ie[4];qt!=null&&(g.Aa=qt,g.j.info("SVER="+g.Aa));const Ua=Ie[5];Ua!=null&&typeof Ua=="number"&&0<Ua&&(w=1.5*Ua,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const _r=c.g;if(_r){const kh=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kh){var M=w.h;M.g||kh.indexOf("spdy")==-1&&kh.indexOf("quic")==-1&&kh.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(si(M,M.h),M.h=null))}if(w.D){const rg=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;rg&&(w.ya=rg,Ce(w.I,w.D,rg))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var Q=c;if(w.qa=ye(w,w.J?w.ia:null,w.W),Q.K){Rc(w.h,Q);var Ve=Q,Ot=w.L;Ot&&(Ve.I=Ot),Ve.B&&(Pa(Ve),mr(Ve)),w.g=Q}else jc(w);0<g.i.length&&mo(g)}else Ie[0]!="stop"&&Ie[0]!="close"||Ze(g,7);else g.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Ze(g,7):Fc(g):Ie[0]!="noop"&&g.l&&g.l.ta(Ie),g.v=0)}}ro(4)}catch{}}var so=class{constructor(c,f){this.g=c,this.map=f}};function gh(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Na(c){return c.h?1:c.g?c.g.size:0}function Da(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function si(c,f){c.g?c.g.add(f):c.h=f}function Rc(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}gh.prototype.cancel=function(){if(this.i=La(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function La(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return S(c.i)}function yh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,w=0;w<g;w++)f.push(c[w]);return f}f=[],g=0;for(w in c)f[g++]=c[w];return f}function _h(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const w in c)f[g++]=w;return f}}}function kc(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=_h(c),w=yh(c),N=w.length,M=0;M<N;M++)f.call(void 0,w[M],g&&g[M],c)}var wh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var w=c[g].indexOf("="),N=null;if(0<=w){var M=c[g].substring(0,w);N=c[g].substring(w+1)}else M=c[g];f(M,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Vr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vr){this.h=c.h,Ki(this,c.j),this.o=c.o,this.g=c.g,Oa(this,c.s),this.l=c.l;var f=c.i,g=new Fr;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Va(this,g),this.m=c.m}else c&&(f=String(c).match(wh))?(this.h=!1,Ki(this,f[1]||"",!0),this.o=Qi(f[2]||""),this.g=Qi(f[3]||"",!0),Oa(this,f[4]),this.l=Qi(f[5]||"",!0),Va(this,f[6]||"",!0),this.m=Qi(f[7]||"")):(this.h=!1,this.i=new Fr(null,this.h))}Vr.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Yi(f,Cc,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Yi(f,Cc,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Yi(g,g.charAt(0)=="/"?Dc:Nc,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Yi(g,Qm)),c.join("")};function zt(c){return new Vr(c)}function Ki(c,f,g){c.j=g?Qi(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Oa(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Va(c,f,g){f instanceof Fr?(c.i=f,Ym(c.i,c.h)):(g||(f=Yi(f,Km)),c.i=new Fr(f,c.h))}function Ce(c,f,g){c.i.set(f,g)}function oo(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Qi(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Yi(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Mr),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Mr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cc=/[#\/\?@]/g,Nc=/[#\?:]/g,Dc=/[#\?]/g,Km=/[#\?@]/g,Qm=/#/g;function Fr(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function jr(c){c.g||(c.g=new Map,c.h=0,c.i&&Pc(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Fr.prototype,t.add=function(c,f){jr(this),this.i=null,c=Ji(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function vh(c,f){jr(c),f=Ji(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Lc(c,f){return jr(c),f=Ji(c,f),c.g.has(f)}t.forEach=function(c,f){jr(this),this.g.forEach(function(g,w){g.forEach(function(N){c.call(f,N,w,this)},this)},this)},t.na=function(){jr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let w=0;w<f.length;w++){const N=c[w];for(let M=0;M<N.length;M++)g.push(f[w])}return g},t.V=function(c){jr(this);let f=[];if(typeof c=="string")Lc(this,c)&&(f=f.concat(this.g.get(Ji(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return jr(this),this.i=null,c=Ji(this,c),Lc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Ih(c,f,g){vh(c,f),0<g.length&&(c.i=null,c.g.set(Ji(c,f),S(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var w=f[g];const M=encodeURIComponent(String(w)),Q=this.V(w);for(w=0;w<Q.length;w++){var N=M;Q[w]!==""&&(N+="="+encodeURIComponent(String(Q[w]))),c.push(N)}}return this.i=c.join("&")};function Ji(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Ym(c,f){f&&!c.j&&(jr(c),c.i=null,c.g.forEach(function(g,w){var N=w.toLowerCase();w!=N&&(vh(this,w),Ih(this,N,g))},c)),c.j=f}function Oc(c,f){const g=new Hi;if(a.Image){const w=new Image;w.onload=y(gr,g,"TestLoadImage: loaded",!0,f,w),w.onerror=y(gr,g,"TestLoadImage: error",!1,f,w),w.onabort=y(gr,g,"TestLoadImage: abort",!1,f,w),w.ontimeout=y(gr,g,"TestLoadImage: timeout",!1,f,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else f(!1)}function Jm(c,f){const g=new Hi,w=new AbortController,N=setTimeout(()=>{w.abort(),gr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:w.signal}).then(M=>{clearTimeout(N),M.ok?gr(g,"TestPingServer: ok",!0,f):gr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),gr(g,"TestPingServer: error",!1,f)})}function gr(c,f,g,w,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),w(g)}catch{}}function Xm(){this.g=new Wm}function Zm(c,f,g){const w=g||"";try{kc(c,function(N,M){let Q=N;u(N)&&(Q=bc(N)),f.push(w+M+"="+encodeURIComponent(Q))})}catch(N){throw f.push(w+"type="+encodeURIComponent("_badmap")),N}}function ao(c){this.l=c.Ub||null,this.j=c.eb||!1}I(ao,Gi),ao.prototype.g=function(){return new lo(this.l,this.j)},ao.prototype.i=function(c){return function(){return c}}({});function lo(c,f){ut.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(lo,ut),t=lo.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,uo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,uo(this)),this.g&&(this.readyState=3,uo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eh(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eh(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?co(this):uo(this),this.readyState==3&&Eh(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,co(this))},t.Qa=function(c){this.g&&(this.response=c,co(this))},t.ga=function(){this.g&&co(this)};function co(c){c.readyState=4,c.l=null,c.j=null,c.v=null,uo(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function uo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(lo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Th(c){let f="";return G(c,function(g,w){f+=w,f+=":",f+=g,f+=`\r
`}),f}function Vc(c,f,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Th(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ce(c,f,g))}function Le(c){ut.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Le,ut);var eg=/^https?$/i,tg=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ac.g(),this.v=this.o?pr(this.o):pr(Ac),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(M){Mc(this,M);return}if(c=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var N in w)g.set(N,w[N]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const M of w.keys())g.set(M,w.get(M));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tg,f,void 0))||w||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,Q]of g)this.g.setRequestHeader(M,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xh(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){Mc(this,M)}};function Mc(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,ho(c),Ma(c)}function ho(c){c.A||(c.A=!0,Ee(c,"complete"),Ee(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ee(this,"complete"),Ee(this,"abort"),Ma(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bh(this):this.bb())},t.bb=function(){bh(this)};function bh(c){if(c.h&&typeof o<"u"&&(!c.v[1]||yr(c)!=4||c.Z()!=2)){if(c.u&&yr(c)==4)Ec(c.Ea,0,c);else if(Ee(c,"readystatechange"),yr(c)==4){c.h=!1;try{const Q=c.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var w;if(w=Q===0){var N=String(c.D).match(wh)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),w=!eg.test(N?N.toLowerCase():"")}g=w}if(g)Ee(c,"complete"),Ee(c,"success");else{c.m=6;try{var M=2<yr(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",ho(c)}}finally{Ma(c)}}}}function Ma(c,f){if(c.g){xh(c);const g=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Ee(c,"ready");try{g.onreadystatechange=w}catch{}}}function xh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function yr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),zi(f)}};function Ah(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ng(c){const f={};c=(c.g&&2<=yr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(v(c[w]))continue;var g=P(c[w]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=f[N]||[];f[N]=M,M.push(g)}x(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function Sh(c){this.Aa=0,this.i=[],this.j=new Hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,c),this.cb=fo("retryDelaySeedMs",1e4,c),this.Wa=fo("forwardChannelMaxRetries",2,c),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new gh(c&&c.concurrentRequestLimit),this.Da=new Xm,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,w){xt(0),this.W=c,this.H=f||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=ye(this,null,this.W),mo(this)};function Fc(c){if(po(c),c.G==3){var f=c.U++,g=zt(c.I);if(Ce(g,"SID",c.K),Ce(g,"RID",f),Ce(g,"TYPE","terminate"),yo(c,g),f=new Nn(c,c.j,f),f.L=2,f.v=oo(zt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=xe(f.j,null),f.g.ea(f.v)),f.F=Date.now(),mr(f)}ie(c)}function Fa(c){c.g&&(F(c),c.g.cancel(),c.g=null)}function po(c){Fa(c),c.u&&(a.clearTimeout(c.u),c.u=null),ae(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function mo(c){if(!Ca(c.h)&&!c.s){c.s=!0;var f=c.Ga;mn||oe(),Y||(mn(),Y=!0),re.add(f,c),c.B=0}}function ja(c,f){return Na(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Cn(m(c.Ga,c,f),mt(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new Nn(this,this.j,c);let M=this.o;if(this.S&&(M?(M=_(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(N.H=M,M=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Rh(this,N,f),g=zt(this.I),Ce(g,"RID",c),Ce(g,"CVER",22),this.D&&Ce(g,"X-HTTP-Session-Id",this.D),yo(this,g),M&&(this.O?f="headers="+encodeURIComponent(String(Th(M)))+"&"+f:this.m&&Vc(g,this.m,M)),si(this.h,N),this.Ua&&Ce(g,"TYPE","init"),this.P?(Ce(g,"$req",f),Ce(g,"SID","null"),N.T=!0,Ra(N,g,null)):Ra(N,g,f),this.G=2}}else this.G==3&&(c?go(this,c):this.i.length==0||Ca(this.h)||go(this))};function go(c,f){var g;f?g=f.l:g=c.U++;const w=zt(c.I);Ce(w,"SID",c.K),Ce(w,"RID",g),Ce(w,"AID",c.T),yo(c,w),c.m&&c.o&&Vc(w,c.m,c.o),g=new Nn(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Rh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),si(c.h,g),Ra(g,w,f)}function yo(c,f){c.H&&G(c.H,function(g,w){Ce(f,w,g)}),c.l&&kc({},function(g,w){Ce(f,w,g)})}function Rh(c,f,g){g=Math.min(c.i.length,g);var w=c.l?m(c.l.Na,c.l,c):null;e:{var N=c.i;let M=-1;for(;;){const Q=["count="+g];M==-1?0<g?(M=N[0].g,Q.push("ofs="+M)):M=0:Q.push("ofs="+M);let Ve=!0;for(let Ot=0;Ot<g;Ot++){let Ie=N[Ot].g;const Gt=N[Ot].map;if(Ie-=M,0>Ie)M=Math.max(0,N[Ot].g-100),Ve=!1;else try{Zm(Gt,Q,"req"+Ie+"_")}catch{w&&w(Gt)}}if(Ve){w=Q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,w}function jc(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;mn||oe(),Y||(mn(),Y=!0),re.add(f,c),c.v=0}}function k(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Cn(m(c.Fa,c),mt(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,z(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Cn(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Fa(this),z(this))};function F(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function z(c){c.g=new Nn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=zt(c.qa);Ce(f,"RID","rpc"),Ce(f,"SID",c.K),Ce(f,"AID",c.T),Ce(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(f,"TO",c.ja),Ce(f,"TYPE","xmlhttp"),yo(c,f),c.m&&c.o&&Vc(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=oo(zt(f)),g.m=null,g.P=!0,fh(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Fa(this),k(this),xt(19))};function ae(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Oe(c,f){var g=null;if(c.g==f){ae(c),F(c),c.g=null;var w=2}else if(Da(c.h,f))g=f.D,Rc(c.h,f),w=1;else return;if(c.G!=0){if(f.o)if(w==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;w=ba(),Ee(w,new ah(w,g)),mo(c)}else jc(c);else if(N=f.s,N==3||N==0&&0<f.X||!(w==1&&ja(c,f)||w==2&&k(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:Ze(c,5);break;case 4:Ze(c,10);break;case 3:Ze(c,6);break;default:Ze(c,2)}}}function mt(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function Ze(c,f){if(c.j.info("Error code "+f),f==2){var g=m(c.fb,c),w=c.Xa;const N=!w;w=new Vr(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ki(w,"https"),oo(w),N?Oc(w.toString(),g):Jm(w.toString(),g)}else xt(2);c.G=0,c.l&&c.l.sa(f),ie(c),po(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ie(c){if(c.G=0,c.ka=[],c.l){const f=La(c.h);(f.length!=0||c.i.length!=0)&&(C(c.ka,f),C(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function ye(c,f,g){var w=g instanceof Vr?zt(g):new Vr(g);if(w.g!="")f&&(w.g=f+"."+w.g),Oa(w,w.s);else{var N=a.location;w=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var M=new Vr(null);w&&Ki(M,w),f&&(M.g=f),N&&Oa(M,N),g&&(M.l=g),w=M}return g=c.D,f=c.ya,g&&f&&Ce(w,g,f),Ce(w,"VER",c.la),yo(c,w),w}function xe(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Le(new ao({eb:g})):new Le(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function et(){}t=et.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lt(){}Lt.prototype.g=function(c,f){return new Ue(c,f)};function Ue(c,f){ut.call(this),this.g=new Sh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!v(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new At(this)}I(Ue,ut),Ue.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ue.prototype.close=function(){Fc(this.g)},Ue.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=bc(c),c=g);f.i.push(new so(f.Ya++,c)),f.G==3&&mo(f)},Ue.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,Ue.aa.N.call(this)};function on(c){Ea.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}I(on,Ea);function Dn(){Ta.call(this),this.status=1}I(Dn,Ta);function At(c){this.g=c}I(At,et),At.prototype.ua=function(){Ee(this.g,"a")},At.prototype.ta=function(c){Ee(this.g,new on(c))},At.prototype.sa=function(c){Ee(this.g,new Dn)},At.prototype.ra=function(){Ee(this.g,"b")},Lt.prototype.createWebChannel=Lt.prototype.g,Ue.prototype.send=Ue.prototype.o,Ue.prototype.open=Ue.prototype.m,Ue.prototype.close=Ue.prototype.close,ZS=function(){return new Lt},XS=function(){return ba()},JS=Or,p_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,Sf=xa,xc.COMPLETE="complete",YS=xc,qi.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",ut.prototype.listen=ut.prototype.K,cu=qi,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,QS=Le}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const rT="@firebase/firestore",iT="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Nd("@firebase/firestore");function Za(){return Fs.logLevel}function Bz(t){Fs.setLogLevel(t)}function $(t,...e){if(Fs.logLevel<=me.DEBUG){const n=e.map(_w);Fs.debug(`Firestore (${cc}): ${t}`,...n)}}function ft(t,...e){if(Fs.logLevel<=me.ERROR){const n=e.map(_w);Fs.error(`Firestore (${cc}): ${t}`,...n)}}function hr(t,...e){if(Fs.logLevel<=me.WARN){const n=e.map(_w);Fs.warn(`Firestore (${cc}): ${t}`,...n)}}function _w(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eR(t,r,n)}function eR(t,e,n){let r=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ft(r),new Error(r)}function ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||eR(e,i,r)}function $z(t,e){t||J(57014,e)}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class l3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c3{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Nt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new tR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class u3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class d3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new u3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new m_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class zz{getToken(){return Promise.resolve(new m_(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=f3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function g_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Kg(i)===Kg(s)?se(i,s):Kg(i)?1:-1}return se(t.length,e.length)}const p3=55296,m3=57343;function Kg(t){const e=t.charCodeAt(0);return e>=p3&&e<=m3}function Vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function nR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="__name__";class $r{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $r.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $r?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=$r.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return se(e.length,n.length)}static compareSegments(e,n){const r=$r.isNumericId(e),i=$r.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?$r.extractNumericId(e).compare($r.extractNumericId(n)):g_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ls.fromString(e.substring(4,e.length-2))}}class ue extends $r{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const g3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends $r{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return g3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y_}static keyField(){return new Je([y_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ue.fromString(e))}static fromName(e){return new W(ue.fromString(e).popFirst(5))}static empty(){return new W(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){if(!n)throw new j(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y3(t,e,n,r){if(e===!0&&r===!0)throw new j(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sT(t){if(!W.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oT(t){if(W.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _m(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_m(t);throw new j(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function iR(t,e){if(e<=0)throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function pa(t,e){if(!rR(t))throw new j(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new j(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=-62135596800,lT=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lT);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aT)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lT}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pa(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:wt("string",Ae._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ae(0,0))}static max(){return new te(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;class Fl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function __(t){return t.fields.find(e=>e.kind===2)}function Eo(t){return t.fields.filter(e=>e.kind!==2)}function _3(t,e){let n=se(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=w3(t.fields[r],e.fields[r]),n!==0)return n;return se(t.fields.length,e.fields.length)}Fl.UNKNOWN_ID=-1;class Uo{constructor(e,n){this.fieldPath=e,this.kind=n}}function w3(t,e){const n=Je.comparator(t.fieldPath,e.fieldPath);return n!==0?n:se(t.kind,e.kind)}class jl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new jl(0,Kn.min())}}function sR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Kn(i,W.empty(),e)}function oR(t){return new Kn(t.readTime,t.key,Ml)}class Kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kn(te.min(),W.empty(),Ml)}static max(){return new Kn(te.max(),W.empty(),Ml)}}function Iw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==aR)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="SimpleDb";class wm{static open(e,n,r,i){try{return new wm(n,e.transaction(i,r))}catch(s){throw new Ru(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Nt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ru(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Ew(r.target.error);this.S.reject(new Ru(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(Vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I3(n)}}class Jr{static delete(e){return $(Vn,"Removing database:",e),Ao(cA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!G0())return!1;if(Jr.F())return!0;const e=Et(),n=Jr.M(e),r=0<n&&n<10,i=cR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Jr.M(Et())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(Vn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Ru(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ru(e,o))},i.onupgradeneeded=s=>{$(Vn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(Vn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=wm.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),D.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(Vn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class v3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ao(this.U.delete())}}class Ru extends j{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qs(t){return t.name==="IndexedDbTransactionError"}class I3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(Vn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(Vn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ao(r)}add(e){return $(Vn,"ADD",this.store.name,e,e),Ao(this.store.add(e))}get(e){return Ao(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(Vn,"GET",this.store.name,e,n),n))}delete(e){return $(Vn,"DELETE",this.store.name,e),Ao(this.store.delete(e))}count(){return $(Vn,"COUNT",this.store.name),Ao(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new D((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new D((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(Vn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new D((r,i)=>{n.onerror=s=>{const o=Ew(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new D((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new v3(a),u=n(a.primaryKey,a.value,l);if(u instanceof D){const d=u.catch(h=>(l.done(),D.reject(h)));r.push(d)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>D.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ao(t){return new D((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Ew(r.target.error);n(i)}})}let cT=!1;function Ew(t){const e=Jr.M(Et());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cT||(cT=!0,setTimeout(()=>{throw r},0)),r}}return t}const ku="IndexBackfiller";class E3{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(ku,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(ku,`Documents written: ${n}`)}catch(n){Qs(n)?$(ku,"Ignoring IndexedDB error during index backfill: ",n):await Ks(n)}await this.re(6e4)})}}class T3{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return D.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(ku,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(ku,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=oR(s);Iw(o,r)>0&&(r=o)}),new Kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=-1;function Bd(t){return t==null}function ld(t){return t===0&&1/t==-1/0}function uR(t){return typeof t=="number"&&Number.isInteger(t)&&!ld(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="";function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uT(e)),e=b3(t.get(n),e);return uT(e)}function b3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Sp:n+="";break;default:n+=s}}return n}function uT(t){return t+Sp+""}function Hr(t){const e=t.length;if(ee(e>=2,64408,{path:t}),e===2)return ee(t.charAt(0)===Sp&&t.charAt(1)==="",56145,{path:t}),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Sp,s);switch((o<0||o>n)&&J(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J(61167,{path:t})}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="remoteDocuments",$d="owner",Ga="owner",cd="mutationQueues",x3="userId",br="mutations",dT="batchId",Vo="userMutationsIndex",hT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){return[t,Xt(e)]}function dR(t,e,n){return[t,Xt(e),n]}const A3={},Ul="documentMutations",Rp="remoteDocumentsV14",S3=["prefixPath","collectionGroup","readTime","documentId"],kf="documentKeyIndex",R3=["prefixPath","collectionGroup","documentId"],hR="collectionGroupIndex",k3=["collectionGroup","readTime","prefixPath","documentId"],ud="remoteDocumentGlobal",w_="remoteDocumentGlobalKey",Bl="targets",fR="queryTargetsIndex",P3=["canonicalId","targetId"],$l="targetDocuments",C3=["targetId","path"],Tw="documentTargetsIndex",N3=["path","targetId"],kp="targetGlobalKey",Bo="targetGlobal",dd="collectionParents",D3=["collectionId","parent"],zl="clientMetadata",L3="clientId",vm="bundles",O3="bundleId",Im="namedQueries",V3="name",bw="indexConfiguration",M3="indexId",v_="collectionGroupIndex",F3="collectionGroup",Pu="indexState",j3=["indexId","uid"],pR="sequenceNumberIndex",U3=["uid","sequenceNumber"],Cu="indexEntries",B3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mR="documentKeyIndex",$3=["indexId","uid","orderedDocumentKey"],Em="documentOverlays",z3=["userId","collectionPath","documentId"],I_="collectionPathOverlayIndex",G3=["userId","collectionPath","largestBatchId"],gR="collectionGroupOverlayIndex",q3=["userId","collectionGroup","largestBatchId"],xw="globals",H3="name",yR=[cd,br,Ul,To,Bl,$d,Bo,$l,zl,ud,dd,vm,Im],W3=[...yR,Em],_R=[cd,br,Ul,Rp,Bl,$d,Bo,$l,zl,ud,dd,vm,Im,Em],wR=_R,Aw=[...wR,bw,Pu,Cu],K3=Aw,vR=[...Aw,xw],Q3=vR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends lR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Tt(t,e){const n=K(t);return Jr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function ER(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jh(this.root,e,this.comparator,!0)}}class Jh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=i??Ft.EMPTY,this.right=s??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ft(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(e){return new pT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class pT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qa(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new En([])}unionWith(e){let n=new ke(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TR("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const Y3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(t){if(ee(!!t,39018),typeof t=="string"){let e=0;const n=Y3.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="server_timestamp",xR="__type__",AR="__previous_value__",SR="__local_write_time__";function Tm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[xR])==null?void 0:r.stringValue)===bR}function bm(t){const e=t.mapValue.fields[AR];return Tm(e)?bm(e):e}function hd(t){const e=xi(t.mapValue.fields[SR].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const fd="(default)";class Jo{constructor(e,n){this.projectId=e,this.database=n||fd}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="__type__",RR="__max__",ws={mapValue:{fields:{__type__:{stringValue:RR}}}},Rw="__vector__",Gl="value",Pf={nullValue:"NULL_VALUE"};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tm(t)?4:kR(t)?9007199254740991:xm(t)?10:11:J(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hd(t).isEqual(hd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xi(i.timestampValue),a=xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ai(i.bytesValue).isEqual(Ai(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?ld(o)===ld(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vl(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fT(o)!==fT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function pd(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mT(t.timestampValue,e.timestampValue);case 4:return mT(hd(t),hd(e));case 5:return g_(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ai(s),l=Ai(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=se(a[u],l[u]);if(d!==0)return d}return se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se(Qe(s.latitude),Qe(o.latitude));return a!==0?a:se(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,y,I,S;const a=s.fields||{},l=o.fields||{},u=(m=a[Gl])==null?void 0:m.arrayValue,d=(y=l[Gl])==null?void 0:y.arrayValue,h=se(((I=u==null?void 0:u.values)==null?void 0:I.length)||0,((S=d==null?void 0:d.values)==null?void 0:S.length)||0);return h!==0?h:gT(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ws.mapValue&&o===ws.mapValue)return 0;if(s===ws.mapValue)return 1;if(o===ws.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=g_(l[h],d[h]);if(m!==0)return m;const y=Us(a[l[h]],u[d[h]]);if(y!==0)return y}return se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function mT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=xi(t),r=xi(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function gT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Us(n[i],r[i]);if(s)return s}return se(n.length,r.length)}function ql(t){return T_(t)}function T_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=T_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${T_(n.fields[o])}`;return i+"}"}(t.mapValue):J(61005,{value:t})}function Cf(t){switch(js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(t);return e?16+Cf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Cf(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ys(r.fields,(s,o)=>{i+=s.length+Cf(o)}),i}(t.mapValue);default:throw J(13486,{value:t})}}function Xo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function b_(t){return!!t&&"integerValue"in t}function md(t){return!!t&&"arrayValue"in t}function yT(t){return!!t&&"nullValue"in t}function _T(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nf(t){return!!t&&"mapValue"in t}function xm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Sw])==null?void 0:r.stringValue)===Rw}function Nu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nu(t.arrayValue.values[n]);return e}return{...t}}function kR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RR}const PR={mapValue:{fields:{[Sw]:{stringValue:Rw},[Gl]:{arrayValue:{}}}}};function X3(t){return"nullValue"in t?Pf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xo(Jo.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xm(t)?PR:{mapValue:{}}:J(35942,{value:t})}function Z3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xo(Jo.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?PR:"mapValue"in t?xm(t)?{mapValue:{}}:ws:J(61959,{value:t})}function wT(t,e){const n=Us(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vT(t,e){const n=Us(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(n)}setAll(e){let n=Je.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Nu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Nf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ys(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jt(Nu(this.value))}}function CR(t){const e=[];return Ys(t.fields,(n,r)=>{const i=new Je([n]);if(Nf(r)){const s=CR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,te.min(),te.min(),te.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new $e(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new $e(e,2,n,te.min(),te.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,te.min(),te.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.position=e,this.inclusive=n}}function IT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ET(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function ej(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{}class ge extends NR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tj(e,n,r):n==="array-contains"?new ij(e,r):n==="in"?new FR(e,r):n==="not-in"?new sj(e,r):n==="array-contains-any"?new oj(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nj(e,r):new rj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends NR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Se(e,n)}matches(e){return Hl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hl(t){return t.op==="and"}function x_(t){return t.op==="or"}function kw(t){return DR(t)&&Hl(t)}function DR(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}function A_(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+ql(t.value);if(kw(t))return t.filters.map(e=>A_(e)).join(",");{const e=t.filters.map(n=>A_(n)).join(",");return`${t.op}(${e})`}}function LR(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&ti(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&LR(o,i.filters[a]),!0):!1}(t,e):void J(19439)}function OR(t,e){const n=t.filters.concat(e);return Se.create(n,t.op)}function VR(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ql(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(VR).join(" ,")+"}"}(t):"Filter"}class tj extends ge{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class nj extends ge{constructor(e,n){super(e,"in",n),this.keys=MR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rj extends ge{constructor(e,n){super(e,"not-in",n),this.keys=MR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function MR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class ij extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return md(n)&&pd(n.arrayValue,this.value)}}class FR extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pd(this.value.arrayValue,n)}}class sj extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(pd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pd(this.value.arrayValue,n)}}class oj extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!md(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function S_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new aj(t,e,n,r,i,s,o)}function Zo(t){const e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>A_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ql(r)).join(",")),e.Te=n}return e.Te}function zd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ej(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ET(t.startAt,e.startAt)&&ET(t.endAt,e.endAt)}function Pp(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cp(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function TT(t,e,n){let r=Pf,i=!0;for(const s of Cp(t,e)){let o=Pf,a=!0;switch(s.op){case"<":case"<=":o=X3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Pf}wT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];wT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function bT(t,e,n){let r=ws,i=!0;for(const s of Cp(t,e)){let o=ws,a=!0;switch(s.op){case">=":case">":o=Z3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ws}vT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];vT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jR(t,e,n,r,i,s,o,a){return new Ni(t,e,n,r,i,s,o,a)}function uc(t){return new Ni(t)}function xT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pw(t){return t.collectionGroup!==null}function Al(t){const e=K(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ke(Je.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new gd(s,r))}),n.has(Je.keyField().canonicalString())||e.Ie.push(new gd(Je.keyField(),r))}return e.Ie}function Zt(t){const e=K(t);return e.Ee||(e.Ee=BR(e,Al(t))),e.Ee}function UR(t){const e=K(t);return e.de||(e.de=BR(e,t.explicitOrderBy)),e.de}function BR(t,e){if(t.limitType==="F")return S_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new gd(i.field,s)});const n=t.endAt?new Bs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bs(t.startAt.position,t.startAt.inclusive):null;return S_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R_(t,e){const n=t.filters.concat([e]);return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Np(t,e,n){return new Ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gd(t,e){return zd(Zt(t),Zt(e))&&t.limitType===e.limitType}function $R(t){return`${Zo(Zt(t))}|lt:${t.limitType}`}function el(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VR(i)).join(", ")}]`),Bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ql(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ql(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Al(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=IT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Al(r),i)||r.endAt&&!function(o,a,l){const u=IT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Al(r),i))}(t,e)}function zR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GR(t){return(e,n)=>{let r=!1;for(const i of Al(t)){const s=lj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lj(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Us(l,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ER(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new je(W.comparator);function Tn(){return cj}const qR=new je(W.comparator);function uu(...t){let e=qR;for(const n of t)e=e.insert(n.key,n);return e}function HR(t){let e=qR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return Du()}function WR(){return Du()}function Du(){return new Di(t=>t.toString(),(t,e)=>t.isEqual(e))}const uj=new je(W.comparator),dj=new ke(W.comparator);function le(...t){let e=dj;for(const n of t)e=e.add(n);return e}const hj=new ke(se);function Cw(){return hj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function KR(t){return{integerValue:""+t}}function QR(t,e){return uR(e)?KR(e):Nw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this._=void 0}}function fj(t,e,n){return t instanceof Wl?function(i,s){const o={fields:{[xR]:{stringValue:bR},[SR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tm(s)&&(s=bm(s)),s&&(o.fields[AR]=s),{mapValue:o}}(n,e):t instanceof ea?JR(t,e):t instanceof ta?XR(t,e):function(i,s){const o=YR(i,s),a=AT(o)+AT(i.Ae);return b_(o)&&b_(i.Ae)?KR(a):Nw(i.serializer,a)}(t,e)}function pj(t,e,n){return t instanceof ea?JR(t,e):t instanceof ta?XR(t,e):n}function YR(t,e){return t instanceof Kl?function(r){return b_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Wl extends Am{}class ea extends Am{constructor(e){super(),this.elements=e}}function JR(t,e){const n=ZR(e);for(const r of t.elements)n.some(i=>ti(i,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends Am{constructor(e){super(),this.elements=e}}function XR(t,e){let n=ZR(e);for(const r of t.elements)n=n.filter(i=>!ti(i,r));return{arrayValue:{values:n}}}class Kl extends Am{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function AT(t){return Qe(t.integerValue||t.doubleValue)}function ZR(t){return md(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.field=e,this.transform=n}}function mj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?Vl(r.elements,i.elements,ti):r instanceof Kl&&i instanceof Kl?ti(r.Ae,i.Ae):r instanceof Wl&&i instanceof Wl}(t.transform,e.transform)}class gj{constructor(e,n){this.version=e,this.transformResults=n}}class Xe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xe}static exists(e){return new Xe(void 0,e)}static updateTime(e){return new Xe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sm{}function ek(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hc(t.key,Xe.none()):new dc(t.key,t.data,Xe.none());{const n=t.data,r=jt.empty();let i=new ke(Je.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Li(t.key,r,new En(i.toArray()),Xe.none())}}function yj(t,e,n){t instanceof dc?function(i,s,o){const a=i.value.clone(),l=RT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Li?function(i,s,o){if(!Df(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=RT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lu(t,e,n,r){return t instanceof dc?function(s,o,a,l){if(!Df(s.precondition,o))return a;const u=s.value.clone(),d=kT(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Li?function(s,o,a,l){if(!Df(s.precondition,o))return a;const u=kT(s.fieldTransforms,l,o),d=o.data;return d.setAll(tk(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Df(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _j(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=YR(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function ST(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vl(r,i,(s,o)=>mj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dc extends Sm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Li extends Sm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function RT(t,e,n){const r=new Map;ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pj(o,a,n[i]))}return r}function kT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fj(s,o,e))}return r}class hc extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dw extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=ek(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,(n,r)=>ST(n,r))&&Vl(this.baseMutations,e.baseMutations,(n,r)=>ST(n,r))}}class Ow{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return uj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ow(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,_e;function rk(t){switch(t){case V.OK:return J(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function ik(t){if(t===void 0)return ft("GRPC error has no .code"),V.UNKNOWN;switch(t){case gt.OK:return V.OK;case gt.CANCELLED:return V.CANCELLED;case gt.UNKNOWN:return V.UNKNOWN;case gt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case gt.INTERNAL:return V.INTERNAL;case gt.UNAVAILABLE:return V.UNAVAILABLE;case gt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case gt.NOT_FOUND:return V.NOT_FOUND;case gt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case gt.ABORTED:return V.ABORTED;case gt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case gt.DATA_LOSS:return V.DATA_LOSS;default:return J(39323,{code:t})}}(_e=gt||(gt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ou=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Ls([4294967295,4294967295],0);function PT(t){const e=sk().encode(t),n=new KS;return n.update(e),new Uint8Array(n.digest())}function CT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ls([n,r],0),new Ls([i,s],0)]}class Mw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new du(`Invalid padding: ${n}`);if(r<0)throw new du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new du(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ls.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ls.fromNumber(r)));return i.compare(vj)===1&&(i=new Ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=PT(e),[r,i]=CT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Mw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=PT(e),[r,i]=CT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wd(te.min(),i,new je(se),Tn(),le())}}class Kd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kd(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class ok{constructor(e,n){this.targetId=e,this.Ce=n}}class ak{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class NT{constructor(){this.ve=0,this.Fe=DT(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:s})}}),new Kd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=DT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ij{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tn(),this.Je=Xh(),this.He=Xh(),this.Ye=new je(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Pp(s))if(r===0){const o=new W(s.path);this.et(n,o,$e.newNoDocument(o,te.min()))}else ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}Ou==null||Ou.lt(function(d,h,m,y,I){var E,v,T;const S={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},C=h.unchangedNames;return C&&(S.bloomFilter={applied:I===0,hashCount:(C==null?void 0:C.hashCount)??0,bitmapLength:((v=(E=C==null?void 0:C.bits)==null?void 0:E.bitmap)==null?void 0:v.length)??0,padding:((T=C==null?void 0:C.bits)==null?void 0:T.padding)??0,mightContain:L=>(y==null?void 0:y.mightContain(L))??!1}),S}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ai(r).toUint8Array()}catch(l){if(l instanceof TR)return hr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Mw(o,i,s)}catch(l){return hr(l instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Pp(a.target)){const l=new W(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,$e.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Wd(e,n,this.Ye,this.je,r);return this.je=Tn(),this.Je=Xh(),this.He=Xh(),this.Ye=new je(se),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new NT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ke(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ke(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xh(){return new je(W.comparator)}function DT(){return new je(W.comparator)}const Ej=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Tj=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),bj=(()=>({and:"AND",or:"OR"}))();class xj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function k_(t,e){return t.useProto3Json||Bd(e)?e:{value:e}}function Ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Aj(t,e){return Ql(t,e.toTimestamp())}function pt(t){return ee(!!t,49232),te.fromTimestamp(function(n){const r=xi(n);return new Ae(r.seconds,r.nanos)}(t))}function Fw(t,e){return P_(t,e).canonicalString()}function P_(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ck(t){const e=ue.fromString(t);return ee(_k(e),10190,{key:e.toString()}),e}function yd(t,e){return Fw(t.databaseId,e.path)}function Xr(t,e){const n=ck(e);if(n.get(1)!==t.databaseId.projectId)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(hk(n))}function uk(t,e){return Fw(t.databaseId,e)}function dk(t){const e=ck(t);return e.length===4?ue.emptyPath():hk(e)}function C_(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hk(t){return ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function LT(t,e,n){return{name:yd(t,e),fields:n.value.mapValue.fields}}function Rm(t,e,n){const r=Xr(t,e.name),i=pt(e.updateTime),s=e.createTime?pt(e.createTime):te.min(),o=new jt({mapValue:{fields:e.fields}}),a=$e.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Sj(t,e){return"found"in e?function(r,i){ee(!!i.found,43571),i.found.name,i.found.updateTime;const s=Xr(r,i.found.name),o=pt(i.found.updateTime),a=i.found.createTime?pt(i.found.createTime):te.min(),l=new jt({mapValue:{fields:i.found.fields}});return $e.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing,3894),ee(!!i.readTime,22933);const s=Xr(r,i.missing),o=pt(i.readTime);return $e.newNoDocument(s,o)}(t,e):J(7234,{result:e})}function Rj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ee(d===void 0||typeof d=="string",58123),ot.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?V.UNKNOWN:ik(u.code);return new j(d,u.message||"")}(o);n=new ak(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xr(t,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):te.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=$e.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Lf(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xr(t,r.document),s=r.readTime?pt(r.readTime):te.min(),o=$e.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xr(t,r.document),s=r.removedTargetIds||[];n=new Lf([],s,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new wj(i,s),a=r.targetId;n=new ok(a,o)}}return n}function _d(t,e){let n;if(e instanceof dc)n={update:LT(t,e.key,e.value)};else if(e instanceof hc)n={delete:yd(t,e.key)};else if(e instanceof Li)n={update:LT(t,e.key,e.data),updateMask:Lj(e.fieldMask)};else{if(!(e instanceof Dw))return J(16599,{Vt:e.type});n={verify:yd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Wl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Aj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(t,e.precondition)),n}function N_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Xe.updateTime(pt(s.updateTime)):s.exists!==void 0?Xe.exists(s.exists):Xe.none()}(e.currentDocument):Xe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Wl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ea(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ta(d)}else"increment"in a?l=new Kl(o,a.increment):J(16584,{proto:a});const u=Je.fromServerFormat(a.fieldPath);return new Hd(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Xr(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new En(u.map(d=>Je.fromServerFormat(d)))}(e.updateMask);return new Li(i,s,o,n,r)}return new dc(i,s,n,r)}if(e.delete){const i=Xr(t,e.delete);return new hc(i,n)}if(e.verify){const i=Xr(t,e.verify);return new Dw(i,n)}return J(1463,{proto:e})}function kj(t,e){return t&&t.length>0?(ee(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?pt(i.updateTime):pt(s);return o.isEqual(te.min())&&(o=pt(s)),new gj(o,i.transformResults||[])}(n,e))):[]}function fk(t,e){return{documents:[uk(t,e.path)]}}function km(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uk(t,i);const s=function(u){if(u.length!==0)return yk(Se.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:ps(m.field),direction:Cj(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=k_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function pk(t,e,n,r){const{ft:i,parent:s}=km(t,e),o={},a=[];let l=0;return n.forEach(u=>{const d=r?u.alias:"aggregate_"+l++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:ps(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:ps(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function mk(t){let e=dk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const m=gk(h);return m instanceof Se&&kw(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(I){return new gd(tl(I.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,Bd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,y=h.values||[];return new Bs(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,y=h.values||[];return new Bs(y,m)}(n.endAt)),jR(e,i,o,s,a,"F",l,u)}function Pj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=tl(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=tl(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=tl(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tl(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return ge.create(tl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>gk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function Cj(t){return Ej[t]}function Nj(t){return Tj[t]}function Dj(t){return bj[t]}function ps(t){return{fieldPath:t.canonicalString()}}function tl(t){return Je.fromServerFormat(t.fieldPath)}function yk(t){return t instanceof ge?function(n){if(n.op==="=="){if(_T(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(yT(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_T(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(yT(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:Nj(n.op),value:n.value}}}(t):t instanceof Se?function(n){const r=n.getFilters().map(i=>yk(i));return r.length===1?r[0]:{compositeFilter:{op:Dj(n.op),filters:r}}}(t):J(54877,{filter:t})}function Lj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _k(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n,r,i,s=te.min(),o=te.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.yt=e}}function Oj(t,e){let n;if(e.document)n=Rm(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=ra(e.noDocument.readTime);n=$e.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J(56709);{const r=W.fromSegments(e.unknownDocument.path),i=ra(e.unknownDocument.version);n=$e.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ae(i[0],i[1]);return te.fromTimestamp(s)}(e.readTime)),n}function OT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:yd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ql(s,o.version.toTimestamp()),createTime:Ql(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:na(e.version)};else{if(!e.isUnknownDocument())return J(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:na(e.version)}}return r}function Dp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function na(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ra(t){const e=new Ae(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function So(t,e){const n=(e.baseMutations||[]).map(s=>N_(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>N_(t.yt,s)),i=Ae.fromMillis(e.localWriteTimeMs);return new Lw(e.batchId,i,n,r)}function hu(t){const e=ra(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ra(t.lastLimboFreeSnapshotVersion):te.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ee(o===1,1966,{count:o}),Zt(uc(dk(s.documents[0])))}(t.query):function(s){return Zt(mk(s))}(t.query),new pi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function vk(t,e){const n=na(e.snapshotVersion),r=na(e.lastLimboFreeSnapshotVersion);let i;i=Pp(e.target)?fk(t.yt,e.target):km(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pm(t){const e=mk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Np(e,e.limit,"L"):e}function Qg(t,e){return new Vw(e.largestBatchId,N_(t.yt,e.overlayMutation))}function VT(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function MT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:na(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{getBundleMetadata(e,n){return FT(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ra(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return FT(e).put(function(i){return{bundleId:i.id,createTime:na(pt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return jT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Pm(s.bundledQuery),readTime:ra(s.readTime)}}(r)})}saveNamedQuery(e,n){return jT(e).put(function(i){return{name:i.name,readTime:na(pt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function FT(t){return Tt(t,vm)}function jT(t){return Tt(t,Im)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Cm(e,r)}getOverlay(e,n){return Yc(e).get(VT(this.userId,n)).next(r=>r?Qg(this.serializer,r):null)}getOverlays(e,n){const r=Wr();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Vw(n,o);i.push(this.St(e,a))}),D.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Yc(e).Z(I_,a))}),D.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Wr(),s=Xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yc(e).J(I_,o).next(a=>{for(const l of a){const u=Qg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Wr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Yc(e).ee({index:gR,range:a},(l,u,d)=>{const h=Qg(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,n){return Yc(e).put(function(i,s,o){const[a,l,u]=VT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_d(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Yc(t){return Tt(t,Em)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{bt(e){return Tt(e,xw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ot.fromUint8Array(r):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ld(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=xi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ai(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?kR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):xm(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):J(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Gl,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Qe(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),W.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ro.Kt=new Ro;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=255;function Fj(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function UT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Fj(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class jj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=UT(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=UT(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(Ha),this.sn(255)}_n(){this.an(Ha),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ha?(this.sn(Ha),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ha?(this.an(Ha),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Uj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Bj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Jc{constructor(){this.cn=new jj,this.ln=new Uj(this.cn),this.hn=new Bj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ko(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Of(this.En),directionalValue:Of(this.dn),orderedDocumentKey:Of(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function es(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=BT(t.En,e.En),n!==0?n:(n=BT(t.dn,e.dn),n!==0?n:W.comparator(t.In,e.In)))}function BT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Of(t){return _A()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function $T(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class zT{constructor(e){this.mn=new ke((n,r)=>Je.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=__(e);if(n!==void 0&&!this.wn(n))return!1;const r=Eo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ke(Je.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Uo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Uo(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Uo(r.field,r.dir==="asc"?0:1)));return new Fl(Fl.UNKNOWN_ID,this.collectionId,n,jl.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){var n,r;if(ee(t instanceof ge||t instanceof Se,20012),t instanceof ge){if(t instanceof FR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>ge.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}const e=t.filters.map(i=>Ik(i));return Se.create(e,t.op)}function $j(t){if(t.getFilters().length===0)return[];const e=O_(Ik(t));return ee(Ek(e),7391),D_(e)||L_(e)?[e]:e.getFilters()}function D_(t){return t instanceof ge}function L_(t){return t instanceof Se&&kw(t)}function Ek(t){return D_(t)||L_(t)||function(n){if(n instanceof Se&&x_(n)){for(const r of n.getFilters())if(!D_(r)&&!L_(r))return!1;return!0}return!1}(t)}function O_(t){if(ee(t instanceof ge||t instanceof Se,34018),t instanceof ge)return t;if(t.filters.length===1)return O_(t.filters[0]);const e=t.filters.map(r=>O_(r));let n=Se.create(e,t.op);return n=Lp(n),Ek(n)?n:(ee(n instanceof Se,64498),ee(Hl(n),40251),ee(n.filters.length>1,57927),n.filters.reduce((r,i)=>jw(r,i)))}function jw(t,e){let n;return ee(t instanceof ge||t instanceof Se,38388),ee(e instanceof ge||e instanceof Se,25473),n=t instanceof ge?e instanceof ge?function(i,s){return Se.create([i,s],"and")}(t,e):GT(t,e):e instanceof ge?GT(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0,48005),Hl(i)&&Hl(s))return OR(i,s.getFilters());const o=x_(i)?i:s,a=x_(i)?s:i,l=o.filters.map(u=>jw(u,a));return Se.create(l,"or")}(t,e),Lp(n)}function GT(t,e){if(Hl(e))return OR(e,t.getFilters());{const n=e.filters.map(r=>jw(t,r));return Se.create(n,"or")}}function Lp(t){if(ee(t instanceof ge||t instanceof Se,11850),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return Lp(e[0]);if(DR(t))return t;const n=e.map(i=>Lp(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.Cn=new Uw}addToCollectionParentIndex(e,n){return this.Cn.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(Kn.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class Uw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ke(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="IndexedDbIndexManager",Zh=new Uint8Array(0);class Gj{constructor(e,n){this.databaseId=n,this.vn=new Uw,this.Fn=new Di(r=>Zo(r),(r,i)=>zd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Xt(i)};return HT(e).put(s)}return D.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[nR(n),""],!1,!0);return HT(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Hr(o.parent))}return r})}addFieldIndex(e,n){const r=Xc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ka(e);return s.next(a=>{o.put(MT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Xc(e),i=Ka(e),s=Wa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Xc(e),r=Wa(e),i=Ka(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return D.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new zT(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Wa(e);let i=!0;const s=new Map;return D.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=le();const a=[];return D.forEach(s,(l,u)=>{$(qT,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(l)} to execute ${Zo(n)}`);const d=function(T,L){const U=__(L);if(U===void 0)return null;for(const G of Cp(T,U.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(u,l),h=function(T,L){const U=new Map;for(const G of Eo(L))for(const x of Cp(T,G.fieldPath))switch(x.op){case"==":case"in":U.set(G.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return U.set(G.fieldPath.canonicalString(),x.value),Array.from(U.values())}return null}(u,l),m=function(T,L){const U=[];let G=!0;for(const x of Eo(L)){const _=x.kind===0?TT(T,x.fieldPath,T.startAt):bT(T,x.fieldPath,T.startAt);U.push(_.value),G&&(G=_.inclusive)}return new Bs(U,G)}(u,l),y=function(T,L){const U=[];let G=!0;for(const x of Eo(L)){const _=x.kind===0?bT(T,x.fieldPath,T.endAt):TT(T,x.fieldPath,T.endAt);U.push(_.value),G&&(G=_.inclusive)}return new Bs(U,G)}(u,l),I=this.On(l,u,m),S=this.On(l,u,y),C=this.Nn(l,u,h),E=this.Bn(l.indexId,d,I,m.inclusive,S,y.inclusive,C);return D.forEach(E,v=>r.Y(v,n.limit).next(T=>{T.forEach(L=>{const U=W.fromSegments(L.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return D.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=$j(Se.create(e.filters,"and")).map(r=>S_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const m=n?this.Ln(n[h/u]):Zh,y=this.kn(e,m,r[h%u],i),I=this.qn(e,m,s[h%u],o),S=a.map(C=>this.kn(e,m,C,!0));d.push(...this.createRange(y,I,S))}return d}kn(e,n,r,i){const s=new ko(e,W.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ko(e,W.empty(),n,r);return i?s.An():s}xn(e,n){const r=new zT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return D.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new ke(Je.comparator),d=!1;for(const h of l.filters)for(const m of h.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Jc;for(const i of Eo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Ro.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Jc;return Ro.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Jc;return Ro.Kt.Dt(Xo(this.databaseId,n),r.Pn(function(s){const o=Eo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Jc);let s=0;for(const o of Eo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&md(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);Ro.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Jc;l.seed(a.un()),Ro.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Xc(e),i=Ka(e);return(n?r.J(v_,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return D.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const m=h?new jl(h.sequenceNumber,new Kn(ra(h.readTime),new W(Hr(h.documentKey)),h.largestBatchId)):jl.empty(),y=d.fields.map(([I,S])=>new Uo(Je.fromServerFormat(I),S));return new Fl(d.indexId,d.collectionGroup,y,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Xc(e),s=Ka(e);return this.Gn(e).next(o=>i.J(v_,IDBKeyRange.bound(n,n)).next(a=>D.forEach(a,l=>s.put(MT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return D.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?D.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),D.forEach(a,l=>this.zn(e,i,l).next(u=>{const d=this.jn(s,l);return u.isEqual(d)?D.resolve():this.Jn(e,s,l,u,d)}))))})}Hn(e,n,r,i){return Wa(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Wa(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Wa(e);let s=new ke(es);return i.ee({index:mR,range:IDBKeyRange.only([r.indexId,this.uid,Of(this.$n(r,n))])},(o,a)=>{s=s.add(new ko(r.indexId,n,$T(a.arrayValue),$T(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new ke(es);const i=this.Qn(n,e);if(i==null)return r;const s=__(n);if(s!=null){const o=e.data.field(s.fieldPath);if(md(o))for(const a of o.arrayValue.values||[])r=r.add(new ko(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ko(n.indexId,e.key,Zh,i));return r}Jn(e,n,r,i,s){$(qT,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,m){const y=l.getIterator(),I=u.getIterator();let S=qa(y),C=qa(I);for(;S||C;){let E=!1,v=!1;if(S&&C){const T=d(S,C);T<0?v=!0:T>0&&(E=!0)}else S!=null?v=!0:E=!0;E?(h(C),C=qa(I)):v?(m(S),S=qa(y)):(S=qa(y),C=qa(I))}}(i,s,es,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),D.waitFor(o)}Gn(e){let n=1;return Ka(e).ee({index:pR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>es(o,a)).filter((o,a,l)=>!a||es(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=es(o,e),l=es(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Zh,W.empty()),l=i[o+1].Vn(this.uid,Zh,W.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return es(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(WT)}getMinOffset(e,n){return D.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||J(44426))).next(WT)}}function HT(t){return Tt(t,dd)}function Wa(t){return Tt(t,Cu)}function Xc(t){return Tt(t,bw)}function Ka(t){return Tt(t,Pu)}function WT(t){ee(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Iw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tk=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e,n){const r=t.store(br),i=t.store(Ul),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(d,h,m)=>(a++,m.delete()));s.push(l.next(()=>{ee(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const h=dR(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return D.waitFor(s).next(()=>u)}function Op(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(Tk,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class Nm{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ee(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Nm(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).ee({index:Vo,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=nl(e),o=ts(e);return o.add({}).next(a=>{ee(typeof a=="number",49019);const l=new Lw(a,n,r,i),u=function(y,I,S){const C=S.baseMutations.map(v=>_d(y.yt,v)),E=S.mutations.map(v=>_d(y.yt,v));return{userId:I,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:C,mutations:E}}(this.serializer,this.userId,l),d=[];let h=new ke((m,y)=>se(m.canonicalString(),y.canonicalString()));for(const m of i){const y=dR(this.userId,m.key.path,a);h=h.add(m.key.path.popLast()),d.push(o.put(u)),d.push(s.put(y,A3))}return h.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),D.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return ts(e).get(n).next(r=>r?(ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),So(this.serializer,r)):null)}er(e,n){return this.Xn[n]?D.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ts(e).ee({index:Vo,range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r,47524,{tr:r}),s=So(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Os;return ts(e).ee({index:Vo,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Os],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J(Vo,n).next(r=>r.map(i=>So(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Rf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return nl(e).ee({range:i},(o,a,l)=>{const[u,d,h]=o,m=Hr(d);if(u===this.userId&&n.path.isEqual(m))return ts(e).get(h).next(y=>{if(!y)throw J(61480,{nr:o,batchId:h});ee(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:h}),s.push(So(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(se);const i=[];return n.forEach(s=>{const o=Rf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=nl(e).ee({range:a},(u,d,h)=>{const[m,y,I]=u,S=Hr(y);m===this.userId&&s.path.isEqual(S)?r=r.add(I):h.done()});i.push(l)}),D.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Rf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ke(se);return nl(e).ee({range:o},(l,u,d)=>{const[h,m,y]=l,I=Hr(m);h===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(y)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ts(e).get(s).next(o=>{if(o===null)throw J(35274,{batchId:s});ee(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(So(this.serializer,o))}))}),D.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return bk(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),D.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return D.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return nl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Hr(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return xk(e,this.userId,n)}_r(e){return Ak(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Os,lastStreamToken:""})}}function xk(t,e,n){const r=Rf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return nl(t).ee({range:s,X:!0},(a,l,u)=>{const[d,h,m]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function ts(t){return Tt(t,br)}function nl(t){return Tt(t,Ul)}function Ak(t){return Tt(t,cd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new ia(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new Ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Qa(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ee(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Qa(e).ee((o,a)=>{const l=hu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>D.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Qa(e).ee((r,i)=>{const s=hu(i);n(s)})}lr(e){return QT(e).get(kp).next(n=>(ee(n!==null,2888),n))}hr(e,n){return QT(e).put(kp,n)}Pr(e,n){return Qa(e).put(vk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Zo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Qa(e).ee({range:i,index:fR},(o,a,l)=>{const u=hu(a);zd(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ms(e);return n.forEach(o=>{const a=Xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),D.waitFor(i)}removeMatchingKeys(e,n,r){const i=ms(e);return D.forEach(n,s=>{const o=Xt(s.path);return D.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ms(e);let s=le();return i.ee({range:r,X:!0},(o,a,l)=>{const u=Hr(o[1]),d=new W(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Xt(n.path),i=IDBKeyRange.bound([r],[nR(r)],!1,!0);let s=0;return ms(e).ee({index:Tw,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Qa(e).get(n).next(r=>r?hu(r):null)}}function Qa(t){return Tt(t,Bl)}function QT(t){return Tt(t,Bo)}function ms(t){return Tt(t,$l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="LruGarbageCollector",Sk=1048576;function JT([t,e],[n,r]){const i=se(t,n);return i===0?se(e,r):i}class Hj{constructor(e){this.Ir=e,this.buffer=new ke(JT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Rk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(YT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qs(n)?$(YT,"Ignoring IndexedDB error during garbage collection: ",n):await Ks(n)}await this.Vr(3e5)})}}class Wj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return D.resolve(In.ce);const r=new Hj(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(KT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Za()<=me.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function kk(t,e){return new Wj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this.db=e,this.garbageCollector=kk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return ef(e,r)}removeReference(e,n,r){return ef(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ef(e,n)}br(e,n){return function(i,s){let o=!1;return Ak(i).te(a=>xk(i,a,s).next(l=>(l&&(o=!0),D.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,te.min()),ms(e).delete(function(h){return[0,Xt(h.path)]}(o))))});i.push(l)}}).next(()=>D.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ef(e,n)}Sr(e,n){const r=ms(e);let i,s=In.ce;return r.ee({index:Tw},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==In.ce&&n(new W(Hr(i)),s),s=u,i=l):s=In.ce}).next(()=>{s!==In.ce&&n(new W(Hr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ef(t,e){return ms(t).put(function(r,i){return{targetId:0,path:Xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.changes=new Di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return _o(e).put(r)}removeEntry(e,n,r){return _o(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Dp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=$e.newInvalidDocument(n);return _o(e).ee({index:kf,range:IDBKeyRange.only(Zc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:$e.newInvalidDocument(n)};return _o(e).ee({index:kf,range:IDBKeyRange.only(Zc(n))},(i,s)=>{r={document:this.Cr(n,s),size:Op(s)}}).next(()=>r)}getEntries(e,n){let r=Tn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Tn(),i=new je(W.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Op(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return D.resolve();let i=new ke(e1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Zc(i.first()),Zc(i.last())),o=i.getIterator();let a=o.getNext();return _o(e).ee({index:kf,range:s},(l,u,d)=>{const h=W.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&e1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(Zc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Dp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _o(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Tn();for(const h of u){const m=this.Cr(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);m.isFoundDocument()&&(qd(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Tn();const o=ZT(n,r),a=ZT(n,Kn.max());return _o(e).ee({index:hR,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.Cr(W.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new Yj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return XT(e).get(w_).next(n=>(ee(!!n,20021),n))}Dr(e,n){return XT(e).put(w_,n)}Cr(e,n){if(n){const r=Oj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return $e.newInvalidDocument(e)}}function Ck(t){return new Qj(t)}class Yj extends Pk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Di(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ke((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=OT(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Op(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=OT(this.Nr.serializer,o.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),D.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function XT(t){return Tt(t,ud)}function _o(t){return Tt(t,Rp)}function Zc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZT(t,e){const n=e.documentKey.path.toArray();return[t,Dp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function e1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=se(n[s],r[s]),i)return i;return i=se(n.length,r.length),i||(i=se(n[n.length-2],r[r.length-2]),i||se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Lu(r.mutation,i,En.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=uu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Tn();const o=Du(),a=function(){return Du()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Li)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Lu(d.mutation,u,d.mutation.getFieldMask(),Ae.now())):o.set(u.key,En.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new Jj(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Du();let i=new je((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||En.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=WR();d.forEach(m=>{if(!s.has(m)){const y=ek(n.get(m),r.get(m));y!==null&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(Wr());let a=Ml,l=s;return o.next(u=>D.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,le())).next(d=>({batchId:a,changes:HR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=uu();return this.indexManager.getCollectionParents(e,s).next(a=>D.forEach(a,l=>{const u=function(h,m){return new Ni(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,$e.newInvalidDocument(d)))});let a=uu();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Lu(d.mutation,u,En.empty(),Ae.now()),qd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return D.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pt(i.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Pm(i.bundledQuery),readTime:pt(i.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.overlays=new je(W.comparator),this.qr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=Wr(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new je((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Wr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Wr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return D.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vw(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,D.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.Qr=new ke(St.$r),this.Ur=new ke(St.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new St(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new St(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new ue([])),r=new St(n,e),i=new St(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new ue([])),r=new St(n,e),i=new St(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new St(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class St{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ke(St.$r)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new St(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?Os:this.tr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new St(n,0),i=new St(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(se);return n.forEach(i=>{const s=new St(i,0),o=new St(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),D.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new St(new W(s),0);let a=new ke(se);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),D.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return D.forEach(n.mutations,i=>{const s=new St(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new St(n,0),i=this.Zr.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.ri=e,this.docs=function(){return new je(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let r=Tn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():$e.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Tn();const o=n.path,a=new W(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Iw(oR(d),r)<=0||(i.has(d.key)||qd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ii(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r5(this)}getSize(e){return D.resolve(this.size)}}class r5 extends Pk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.persistence=e,this.si=new Di(n=>Zo(n),zd),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new Bw,this.targetCount=0,this.ai=ia.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),D.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ia(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.Pr(n),D.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),D.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.ui={},this.overlays={},this.ci=new In(0),this.li=!1,this.li=!0,this.hi=new e5,this.referenceDelegate=e(this),this.Pi=new i5(this),this.indexManager=new zj,this.remoteDocumentCache=function(i){return new n5(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new wk(n),this.Ii=new Xj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new t5(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new s5(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return D.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class s5 extends lR{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Ri=new Bw,this.Vi=null}static mi(e){return new Dm(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),D.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.fi,r=>{const i=W.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return D.or([()=>D.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vp{constructor(e,n){this.persistence=e,this.pi=new Di(r=>Xt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kk(this,n)}static mi(e,n){return new Vp(e,n)}Ei(){}di(e){return D.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return D.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?D.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),D.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),D.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cf(e.data.value)),n}br(e,n,r){return D.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return D.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e){this.serializer=e}k(e,n,r,i){const s=new wm("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore($d)}(e),function(l){l.createObjectStore(cd,{keyPath:x3}),l.createObjectStore(br,{keyPath:dT,autoIncrement:!0}).createIndex(Vo,hT,{unique:!0}),l.createObjectStore(Ul)}(e),t1(e),function(l){l.createObjectStore(To)}(e));let o=D.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore($l),l.deleteObjectStore(Bl),l.deleteObjectStore(Bo)}(e),t1(e)),o=o.next(()=>function(l){const u=l.store(Bo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put(kp,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(br).J().next(h=>{l.deleteObjectStore(br),l.createObjectStore(br,{keyPath:dT,autoIncrement:!0}).createIndex(Vo,hT,{unique:!0});const m=u.store(br),y=h.map(I=>m.put(I));return D.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(zl,{keyPath:L3})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(ud)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(vm,{keyPath:O3})})(e),function(l){l.createObjectStore(Im,{keyPath:V3})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Em,{keyPath:z3});u.createIndex(I_,G3,{unique:!1}),u.createIndex(gR,q3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Rp,{keyPath:S3});u.createIndex(kf,R3),u.createIndex(hR,k3)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(To))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(bw,{keyPath:M3,autoIncrement:!0}).createIndex(v_,F3,{unique:!1}),l.createObjectStore(Pu,{keyPath:j3}).createIndex(pR,U3,{unique:!1}),l.createObjectStore(Cu,{keyPath:B3}).createIndex(mR,$3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Pu).clear()}).next(()=>{n.objectStore(Cu).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(xw,{keyPath:H3})})(e)})),r<18&&i>=18&&_A()&&(o=o.next(()=>{n.objectStore(Pu).clear()}).next(()=>{n.objectStore(Cu).clear()})),o}wi(e){let n=0;return e.store(To).ee((r,i)=>{n+=Op(i)}).next(()=>{const r={byteSize:n};return e.store(ud).put(w_,r)})}yi(e){const n=e.store(cd),r=e.store(br);return n.J().next(i=>D.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Os],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Vo,o).next(a=>D.forEach(a,l=>{ee(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=So(this.serializer,l);return bk(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store($l),r=e.store(To);return e.store(Bo).get(kp).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ue(o),u=function(h){return[0,Xt(h)]}(l);s.push(n.get(u).next(d=>d?D.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>D.waitFor(s))})}bi(e,n){e.createObjectStore(dd,{keyPath:D3});const r=n.store(dd),i=new Uw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store(To).ee({X:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>n.store(Ul).ee({X:!0},([o,a,l],u)=>{const d=Hr(a);return s(d.popLast())}))}Di(e){const n=e.store(Bl);return n.ee((r,i)=>{const s=hu(i),o=vk(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(To),i=[];return r.ee((s,o)=>{const a=n.store(Rp),l=function(h){return h.document?new W(ue.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):J(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>D.waitFor(i))}Fi(e,n){const r=n.store(br),i=Ck(this.serializer),s=new $w(Dm.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??le();So(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),D.forEach(a,(l,u)=>{const d=new kt(u),h=Cm.wt(this.serializer,d),m=s.getIndexManager(d),y=Nm.wt(d,this.serializer,m,s.referenceDelegate);return new Nk(i,y,h,m).recalculateAndSaveOverlaysForDocumentKeys(new E_(n,In.ce),l).next()})})}}function t1(t){t.createObjectStore($l,{keyPath:C3}).createIndex(Tw,N3,{unique:!0}),t.createObjectStore(Bl,{keyPath:"targetId"}).createIndex(fR,P3,{unique:!0}),t.createObjectStore(Bo)}const ns="IndexedDbPersistence",Yg=18e5,Jg=5e3,Xg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dk="main";class zw{constructor(e,n,r,i,s,o,a,l,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!zw.v())throw new j(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kj(this,i),this.$i=n+Dk,this.serializer=new wk(l),this.Ui=new Jr(this.$i,this.Ni,new o5(this.serializer)),this.hi=new Mj,this.Pi=new qj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ck(this.serializer),this.Ii=new Vj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&ft(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,Xg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new In(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>tf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Qs(e))return $(ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return eu(e).get(Ga).next(n=>D.resolve(this.es(n)))}ts(e){return tf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Yg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Tt(n,zl);return r.J().next(i=>{const s=this.ss(i,Yg),o=i.filter(a=>s.indexOf(a)===-1);return D.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?D.resolve(!0):eu(e).get(Ga).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Jg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,Xg);return!1}}return!(!this.networkEnabled||!this.inForeground)||tf(e).J().next(r=>this.ss(r,Jg).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[$d,zl],e=>{const n=new E_(e,In.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>tf(e).J().next(n=>this.ss(n,Yg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Nm.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gj(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Cm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(ns,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?Q3:l===17?vR:l===16?K3:l===15?Aw:l===14?wR:l===13?_R:l===12?W3:l===11?yR:void J(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new E_(a,this.ci?this.ci.next():In.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new j(V.FAILED_PRECONDITION,aR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return eu(e).get(Ga).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Jg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(V.FAILED_PRECONDITION,Xg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eu(e).put(Ga,n)}static v(){return Jr.v()}Zi(e){const n=eu(e);return n.get(Ga).next(r=>this.es(r)?($(ns,"Releasing primary lease."),n.delete(Ga)):D.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ft(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;yA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ft(ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eu(t){return Tt(t,$d)}function tf(t){return Tt(t,zl)}function Gw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return yA()?8:cR(Et())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new a5;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Za()<=me.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),D.resolve()):(Za()<=me.DEBUG&&$("QueryEngine","Query:",el(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Za()<=me.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):D.resolve())}ys(e,n){if(xT(n))return D.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Np(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Np(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return xT(n)||i.isEqual(te.min())?D.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?D.resolve(null):(Za()<=me.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),el(n)),this.vs(e,o,n,sR(i,Ml)).next(a=>a))})}Ds(e,n){let r=new ke(GR(e));return n.forEach((i,s)=>{qd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Za()<=me.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",el(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="LocalStore",l5=3e8;class c5{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new je(se),this.xs=new Di(s=>Zo(s),zd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ok(t,e,n,r){return new c5(t,e,n,r)}async function Vk(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=le();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function u5(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,m=h.keys();let y=D.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(S=>{const C=u.docVersions.get(I);ee(C!==null,48541),S.version.compareTo(C)<0&&(h.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),d.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Mk(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function d5(t,e){const n=K(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(ot.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(S,C,E){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=l5?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,d)&&a.push(n.Pi.updateTargetData(s,y))});let l=Tn(),u=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Fk(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(te.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return D.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Fk(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Tn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(Hw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function h5(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Os),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yl(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new pi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Jl(t,e,n){const r=K(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qs(o))throw o;$(Hw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Mp(t,e,n){const r=K(t);let i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=K(l),m=h.xs.get(d);return m!==void 0?D.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:le())).next(a=>(Bk(r,zR(e),a),{documents:a,Qs:s})))}function jk(t,e){const n=K(t),r=K(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Uk(t,e){const n=K(t),r=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,sR(r,Ml),Number.MAX_SAFE_INTEGER)).then(i=>(Bk(n,e,i),i))}function Bk(t,e,n){let r=t.Os.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function f5(t,e,n,r){const i=K(t);let s=le(),o=Tn();for(const u of n){const d=e.$s(u.metadata.name);u.document&&(s=s.add(d));const h=e.Us(u);h.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(d,h)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await Yl(i,function(d){return Zt(uc(ue.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Fk(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.ks,d.qs)).next(()=>d.ks)))}async function p5(t,e,n=le()){const r=await Yl(t,Zt(Pm(e.bundledQuery))),i=K(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=pt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(ot.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firestore_clients";function n1(t,e){return`${$k}_${t}_${e}`}const zk="firestore_mutations";function r1(t,e,n){let r=`${zk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Gk="firestore_targets";function Zg(t,e){return`${Gk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="SharedClientState";class Fp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new Fp(e,n,i.state,s):(ft(zr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Vu(e,r.state,i):(ft(zr,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Cw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=uR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new jp(e,s):(ft(zr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ww{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ww(n.clientId,n.onlineState):(ft(zr,`Failed to parse online state: ${e}`),null)}}class V_{constructor(){this.activeTargetIds=Cw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ey{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new je(se),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=n1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new V_),this.ro=new RegExp(`^${$k}_${o}_([^_]*)$`),this.io=new RegExp(`^${zk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Gk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(n1(this.persistenceKey,r));if(i){const s=jp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Zg(this.persistenceKey,e));if(i){const s=Vu.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(zr,"READ",e,n),n}setItem(e,n){$(zr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(zr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(zr,"EVENT",n.key,n.newValue),n.key===this.eo)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=In.ce;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number",30636,{So:s}),o=a}catch(a){ft(zr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==In.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Fp(this.currentUser,e,n,r),s=r1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=r1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Zg(this.persistenceKey,e),s=new Vu(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return jp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Fp.Ws(new kt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Vu.Ws(i,n)}uo(e){return Ww.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(zr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Cw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class qk{constructor(){this.Mo=new V_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="ConnectivityMonitor";class s1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(i1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(i1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=null;function M_(){return nf===null?nf=function(){return 268435456+Math.round(2147483648*Math.random())}():nf++,"0x"+nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="RestConnection",g5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===fd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=M_(),a=this.zo(e,n.toUriEncodedString());$(ty,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=Ri(u);return this.Jo(e,a,l,r,d).then(h=>($(ty,`Received RPC '${e}' ${o}: `,h),h),h=>{throw hr(ty,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=g5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class w5 extends y5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=M_();return new Promise((a,l)=>{const u=new QS;u.setWithCredentials(!0),u.listenOnce(YS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Sf.NO_ERROR:const h=u.getResponseJson();$(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Sf.TIMEOUT:$(Kt,`RPC '${e}' ${o} timed out`),l(new j(V.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const m=u.getStatus();if($(Kt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y==null?void 0:y.error;if(I&&I.status&&I.message){const S=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(v)>=0?v:V.UNKNOWN}(I.status);l(new j(S,I.message))}else l(new j(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new j(V.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(Kt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);$(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=M_(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZS(),a=XS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");$(Kt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let m=!1,y=!1;const I=new _5({Yo:C=>{y?$(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||($(Kt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),$(Kt,`RPC '${e}' stream ${i} sending:`,C),h.send(C))},Zo:()=>h.close()}),S=(C,E,v)=>{C.listen(E,T=>{try{v(T)}catch(L){setTimeout(()=>{throw L},0)}})};return S(h,cu.EventType.OPEN,()=>{y||($(Kt,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),S(h,cu.EventType.CLOSE,()=>{y||(y=!0,$(Kt,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(h))}),S(h,cu.EventType.ERROR,C=>{y||(y=!0,hr(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),I.a_(new j(V.UNAVAILABLE,"The operation could not be completed")))}),S(h,cu.EventType.MESSAGE,C=>{var E;if(!y){const v=C.data[0];ee(!!v,16349);const T=v,L=(T==null?void 0:T.error)||((E=T[0])==null?void 0:E.error);if(L){$(Kt,`RPC '${e}' stream ${i} received error:`,L);const U=L.status;let G=function(A){const b=gt[A];if(b!==void 0)return ik(b)}(U),x=L.message;G===void 0&&(G=V.INTERNAL,x="Unknown error status: "+U+" with message "+L.message),y=!0,I.a_(new j(G,x)),h.close()}else $(Kt,`RPC '${e}' stream ${i} received:`,v),I.u_(v)}}),S(a,JS.STAT_EVENT,C=>{C.stat===p_.PROXY?$(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===p_.NOPROXY&&$(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return typeof window<"u"?window:null}function Vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){return new xj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="PersistentStream";class Wk{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ft(n.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new j(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(o1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(o1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v5 extends Wk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Rj(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?pt(o.readTime):te.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=C_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Pp(l)?{documents:fk(s,l)}:{query:km(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lk(s,o.resumeToken);const u=k_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Ql(s,o.snapshotVersion.toTimestamp());const u=k_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Pj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=C_(this.serializer),n.removeTarget=e,this.q_(n)}}class I5 extends Wk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kj(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=C_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_d(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{}class T5 extends E5{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,P_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(V.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,P_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class b5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ft(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="RemoteStore";class x5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Js(this)&&($(sa,"Restarting streams for network reachability change."),await async function(l){const u=K(l);u.Ea.add(4),await fc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Qd(u)}(this))})}),this.Ra=new b5(r,i)}}async function Qd(t){if(Js(t))for(const e of t.da)await e(!0)}async function fc(t){for(const e of t.da)await e(!1)}function Lm(t,e){const n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jw(n)?Yw(n):mc(n).O_()&&Qw(n,e))}function Xl(t,e){const n=K(t),r=mc(n);n.Ia.delete(e),r.O_()&&Kk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Js(n)&&n.Ra.set("Unknown"))}function Qw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mc(t).Y_(e)}function Kk(t,e){t.Va.Ue(e),mc(t).Z_(e)}function Yw(t){t.Va=new Ij({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),mc(t).start(),t.Ra.ua()}function Jw(t){return Js(t)&&!mc(t).x_()&&t.Ia.size>0}function Js(t){return K(t).Ea.size===0}function Qk(t){t.Va=void 0}async function A5(t){t.Ra.set("Online")}async function S5(t){t.Ia.forEach((e,n)=>{Qw(t,e)})}async function R5(t,e){Qk(t),Jw(t)?(t.Ra.ha(e),Yw(t)):t.Ra.set("Unknown")}async function k5(t,e,n){if(t.Ra.set("Online"),e instanceof ak&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Up(t,r)}else if(e instanceof Lf?t.Va.Ze(e):e instanceof ok?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const r=await Mk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(ot.EMPTY_BYTE_STRING,d.snapshotVersion)),Kk(s,l);const h=new pi(d.target,l,u,d.sequenceNumber);Qw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(sa,"Failed to raise snapshot:",r),await Up(t,r)}}async function Up(t,e,n){if(!Qs(e))throw e;t.Ea.add(1),await fc(t),t.Ra.set("Offline"),n||(n=()=>Mk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(sa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qd(t)})}function Yk(t,e){return e().catch(n=>Up(t,n,e))}async function pc(t){const e=K(t),n=$s(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Os;for(;P5(e);)try{const i=await h5(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,C5(e,i)}catch(i){await Up(e,i)}Jk(e)&&Xk(e)}function P5(t){return Js(t)&&t.Ta.length<10}function C5(t,e){t.Ta.push(e);const n=$s(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Jk(t){return Js(t)&&!$s(t).x_()&&t.Ta.length>0}function Xk(t){$s(t).start()}async function N5(t){$s(t).ra()}async function D5(t){const e=$s(t);for(const n of t.Ta)e.ea(n.mutations)}async function L5(t,e,n){const r=t.Ta.shift(),i=Ow.from(r,e,n);await Yk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pc(t)}async function O5(t,e){e&&$s(t).X_&&await async function(r,i){if(function(o){return rk(o)&&o!==V.ABORTED}(i.code)){const s=r.Ta.shift();$s(r).B_(),await Yk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pc(r)}}(t,e),Jk(t)&&Xk(t)}async function a1(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),$(sa,"RemoteStore received new credentials");const r=Js(n);n.Ea.add(3),await fc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qd(n)}async function F_(t,e){const n=K(t);e?(n.Ea.delete(2),await Qd(n)):e||(n.Ea.add(2),await fc(n),n.Ra.set("Unknown"))}function mc(t){return t.ma||(t.ma=function(n,r,i){const s=K(n);return s.sa(),new v5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:A5.bind(null,t),t_:S5.bind(null,t),r_:R5.bind(null,t),H_:k5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Jw(t)?Yw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Qk(t))})),t.ma}function $s(t){return t.fa||(t.fa=function(n,r,i){const s=K(n);return s.sa(),new I5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:N5.bind(null,t),r_:O5.bind(null,t),ta:D5.bind(null,t),na:L5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pc(t)):(await t.fa.stop(),t.Ta.length>0&&($(sa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gc(t,e){if(ft("AsyncQueue",`${e}: ${t}`),Qs(t))return new j(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=uu(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.ga=new je(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oa(e,n,$o.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class M5{constructor(){this.queries=c1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=K(n),s=i.queries;i.queries=c1(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new j(V.ABORTED,"Firestore shutting down"))}}function c1(){return new Di(t=>$R(t),Gd)}async function Zw(t,e){const n=K(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new V5,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=gc(o,`Initialization of query '${el(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&tv(n)}async function ev(t,e){const n=K(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function F5(t,e){const n=K(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&tv(n)}function j5(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function tv(t){t.Ca.forEach(e=>{e.next()})}var j_,u1;(u1=j_||(j_={})).Ma="default",u1.Cache="cache";class nv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==j_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.serializer=e}$s(e){return Xr(this.serializer,e)}Us(e){return e.metadata.exists?Rm(this.serializer,e.document,!1):$e.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return pt(e)}}class rv{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=eP(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ue.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new d1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||le()).add(s);n.set(o,a)}}return n}async ja(e){const n=await f5(e,new d1(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await p5(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function eP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.key=e}}class nP{constructor(e){this.key=e}}class rP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=GR(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new l1,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),y=qd(this.query,h)?h:null,I=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?I!==S&&(r.track({type:3,doc:y}),C=!0):this.su(m,y)||(r.track({type:2,doc:y}),C=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),C=!0):m&&!y&&(r.track({type:1,doc:m}),C=!0,(l||u)&&(a=!0)),C&&(y?(o=o.add(y),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(y,I){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:C})}};return S(y)-S(I)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new oa(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new l1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new nP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new tP(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xs="SyncEngine";class U5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B5{constructor(e){this.key=e,this.hu=!1}}class $5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Di(a=>$R(a),Gd),this.Iu=new Map,this.Eu=new Set,this.du=new je(W.comparator),this.Au=new Map,this.Ru=new Bw,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function z5(t,e,n=!0){const r=Om(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await iP(r,e,n,!0),i}async function G5(t,e){const n=Om(t);await iP(n,e,!0,!1)}async function iP(t,e,n,r){const i=await Yl(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await iv(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Lm(t.remoteStore,i),a}async function iv(t,e,n,r,i){t.pu=(h,m,y)=>async function(S,C,E,v){let T=C.view.ru(E);T.Cs&&(T=await Mp(S.localStore,C.query,!1).then(({documents:x})=>C.view.ru(x,T)));const L=v&&v.targetChanges.get(C.targetId),U=v&&v.targetMismatches.get(C.targetId)!=null,G=C.view.applyChanges(T,S.isPrimaryClient,L,U);return U_(S,C.targetId,G.au),G.snapshot}(t,h,m,y);const s=await Mp(t.localStore,e,!0),o=new rP(e,s.Qs),a=o.ru(s.documents),l=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);U_(t,n,u.au);const d=new U5(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function q5(t,e,n){const r=K(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Gd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xl(r.remoteStore,i.targetId),Zl(r,i.targetId)}).catch(Ks)):(Zl(r,i.targetId),await Jl(r.localStore,i.targetId,!0))}async function H5(t,e){const n=K(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xl(n.remoteStore,r.targetId))}async function W5(t,e,n){const r=lv(t);try{const i=await function(o,a){const l=K(o),u=Ae.now(),d=a.reduce((y,I)=>y.add(I.key),le());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Tn(),S=le();return l.Ns.getEntries(y,d).next(C=>{I=C,I.forEach((E,v)=>{v.isValidDocument()||(S=S.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(C=>{h=C;const E=[];for(const v of a){const T=_j(v,h.get(v.key).overlayedDocument);T!=null&&E.push(new Li(v.key,T,CR(T.value.mapValue),Xe.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,E,a)}).next(C=>{m=C;const E=C.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(y,C.batchId,E)})}).then(()=>({batchId:m.batchId,changes:HR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new je(se)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Oi(r,i.changes),await pc(r.remoteStore)}catch(i){const s=gc(i,"Failed to persist write");n.reject(s)}}async function sP(t,e){const n=K(t);try{const r=await d5(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ee(o.hu,14607):i.removedDocuments.size>0&&(ee(o.hu,42227),o.hu=!1))}),await Oi(n,r,e)}catch(r){await Ks(r)}}function h1(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(a)&&(u=!0)}),u&&tv(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function K5(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new je(W.comparator);o=o.insert(s,$e.newNoDocument(s,te.min()));const a=le().add(s),l=new Wd(te.min(),new Map,new je(se),o,a);await sP(r,l),r.du=r.du.remove(s),r.Au.delete(e),av(r)}else await Jl(r.localStore,e,!1).then(()=>Zl(r,e,n)).catch(Ks)}async function Q5(t,e){const n=K(t),r=e.batch.batchId;try{const i=await u5(n.localStore,e);ov(n,r,null),sv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oi(n,i)}catch(i){await Ks(i)}}async function Y5(t,e,n){const r=K(t);try{const i=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ee(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);ov(r,e,n),sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oi(r,i)}catch(i){await Ks(i)}}async function J5(t,e){const n=K(t);Js(n.remoteStore)||$(Xs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===Os)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=gc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function sv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ov(t,e,n){const r=K(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Zl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||oP(t,r)})}function oP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Xl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),av(t))}function U_(t,e,n){for(const r of n)r instanceof tP?(t.Ru.addReference(r.key,e),X5(t,r)):r instanceof nP?($(Xs,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||oP(t,r.key)):J(19791,{wu:r})}function X5(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(Xs,"New document in limbo: "+n),t.Eu.add(r),av(t))}function av(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new B5(n)),t.du=t.du.insert(n,r),Lm(t.remoteStore,new pi(Zt(uc(n.path)),r,"TargetPurposeLimboResolution",In.ce))}}async function Oi(t,e,n){const r=K(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=qw.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=K(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>D.forEach(u,m=>D.forEach(m.Es,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>D.forEach(m.ds,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!Qs(h))throw h;$(Hw,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const y=d.Ms.get(m),I=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(I);d.Ms=d.Ms.insert(m,S)}}}(r.localStore,s))}async function Z5(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){$(Xs,"User change. New user:",e.toKey());const r=await Vk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new j(V.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oi(n,r.Ls)}}function e6(t,e){const n=K(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function t6(t,e){const n=K(t),r=await Mp(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&U_(n,e.targetId,i.au),i}async function n6(t,e){const n=K(t);return Uk(n.localStore,e).then(r=>Oi(n,r))}async function r6(t,e,n,r){const i=K(t),s=await function(a,l){const u=K(a),d=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.er(h,l).next(m=>m?u.localDocuments.getDocuments(h,m):D.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await pc(i.remoteStore):n==="acknowledged"||n==="rejected"?(ov(i,e,r||null),sv(i,e),function(a,l){K(K(a).mutationQueue).ir(l)}(i.localStore,e)):J(6720,"Unknown batchState",{Su:n}),await Oi(i,s)):$(Xs,"Cannot apply mutation batch with id: "+e)}async function i6(t,e){const n=K(t);if(Om(n),lv(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await f1(n,r.toArray());n.gu=!0,await F_(n.remoteStore,!0);for(const s of i)Lm(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Zl(n,o),Jl(n.localStore,o,!0))),Xl(n.remoteStore,o)}),await i,await f1(n,r),function(o){const a=K(o);a.Au.forEach((l,u)=>{Xl(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new je(W.comparator)}(n),n.gu=!1,await F_(n.remoteStore,!1)}}async function f1(t,e,n){const r=K(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Yl(r.localStore,Zt(l[0]));for(const u of l){const d=r.Tu.get(u),h=await t6(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await jk(r.localStore,o);a=await Yl(r.localStore,u),await iv(r,aP(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function aP(t){return jR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function s6(t){return function(n){return K(K(n).persistence).Ts()}(K(t).localStore)}async function o6(t,e,n,r){const i=K(t);if(i.gu)return void $(Xs,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Uk(i.localStore,zR(s[0])),a=Wd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);await Oi(i,o,a);break}case"rejected":await Jl(i.localStore,e,!0),Zl(i,e,r);break;default:J(64155,n)}}async function a6(t,e,n){const r=Om(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(Xs,"Adding an already active target "+i);continue}const s=await jk(r.localStore,i),o=await Yl(r.localStore,s);await iv(r,aP(s),o.targetId,!1,o.resumeToken),Lm(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Jl(r.localStore,i,!1).then(()=>{Xl(r.remoteStore,i),Zl(r,i)}).catch(Ks)}}function Om(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K5.bind(null,e),e.Pu.H_=F5.bind(null,e.eventManager),e.Pu.yu=j5.bind(null,e.eventManager),e}function lv(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y5.bind(null,e),e}function l6(t,e,n){const r=K(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,I){const S=K(y),C=pt(I.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",E=>S.Ii.getBundleMetadata(E,I.id)).then(E=>!!E&&E.createTime.compareTo(C)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(eP(l));const u=new rv(l,o.serializer);let d=await o.bu();for(;d;){const m=await u.Ga(d);m&&a._updateProgress(m),d=await o.bu()}const h=await u.ja(s.localStore);return await Oi(s,h.Ha,void 0),await function(y,I){const S=K(y);return S.persistence.runTransaction("Save bundle","readwrite",C=>S.Ii.saveBundleMetadata(C,I))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ja)}catch(l){return hr(Xs,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ma(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ok(this.persistence,new Lk,e.initialUser,this.serializer)}Cu(e){return new $w(Dm.mi,this.serializer)}Du(e){return new qk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class cv extends ec{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ee(this.persistence.referenceDelegate instanceof Vp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Rk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new $w(r=>Vp.mi(r,n),this.serializer)}}class uv extends ec{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await lv(this.xu.syncEngine),await pc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Ok(this.persistence,new Lk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Rk(r,e.asyncQueue,n)}Mu(e,n){const r=new T3(n,this.persistence);return new E3(e.asyncQueue,r)}Cu(e){const n=Gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new zw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Hk(),Vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qk}}class lP extends uv{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof ey&&(this.sharedClientState.syncEngine={Co:r6.bind(null,n),vo:o6.bind(null,n),Fo:a6.bind(null,n),Ts:s6.bind(null,n),Do:n6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await i6(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Hk();if(!ey.v(n))throw new j(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Gw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ey(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class zs{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z5.bind(null,this.syncEngine),await F_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M5}()}createDatastore(e){const n=ma(e.databaseInfo.databaseId),r=function(s){return new w5(s)}(e.databaseInfo);return function(s,o,a,l){return new T5(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new x5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>h1(this.syncEngine,n,0),function(){return s1.v()?new s1:new m5}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new $5(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=K(i);$(sa,"RemoteStore shutting down."),s.Ea.add(5),await fc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zs.provider={build:()=>new zs};function p1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Nt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new Zk(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new Zk(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new j(V.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=K(i),a={documents:s.map(h=>yd(o.serializer,h))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const m=Sj(o.serializer,h);u.set(m.key.toString(),m)});const d=[];return s.forEach(h=>{const m=u.get(h.toString());ee(!!m,55234,{key:h}),d.push(m)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=W.fromPath(r);this.mutations.push(new Dw(i,this.precondition(i)))}),await async function(r,i){const s=K(r),o={writes:i.map(a=>_d(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J(50498,{Gu:e.constructor.name});n=te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?Xe.exists(!1):Xe.updateTime(n):Xe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new j(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xe.updateTime(n)}return Xe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Kw(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new d6(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Bd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!rk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class f6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=ww.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(Gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ny(t,e){t.asyncQueue.verifyOperationInProgress(),$(Gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Vk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function m1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dv(t);$(Gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>a1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>a1(e.remoteStore,i)),t._onlineComponents=e}async function dv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Gs,"Using user provided OfflineComponentProvider");try{await ny(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hr("Error using user provided cache. Falling back to memory cache: "+n),await ny(t,new ec)}}else $(Gs,"Using default OfflineComponentProvider"),await ny(t,new cv(void 0));return t._offlineComponents}async function Mm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Gs,"Using user provided OnlineComponentProvider"),await m1(t,t._uninitializedComponentsProvider._online)):($(Gs,"Using default OnlineComponentProvider"),await m1(t,new zs))),t._onlineComponents}function cP(t){return dv(t).then(e=>e.persistence)}function yc(t){return dv(t).then(e=>e.localStore)}function uP(t){return Mm(t).then(e=>e.remoteStore)}function hv(t){return Mm(t).then(e=>e.syncEngine)}function dP(t){return Mm(t).then(e=>e.datastore)}async function tc(t){const e=await Mm(t),n=e.eventManager;return n.onListen=z5.bind(null,e.syncEngine),n.onUnlisten=q5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H5.bind(null,e.syncEngine),n}function p6(t){return t.asyncQueue.enqueue(async()=>{const e=await cP(t),n=await uP(t);return e.setNetworkEnabled(!0),function(i){const s=K(i);return s.Ea.delete(0),Qd(s)}(n)})}function m6(t){return t.asyncQueue.enqueue(async()=>{const e=await cP(t),n=await uP(t);return e.setNetworkEnabled(!1),async function(i){const s=K(i);s.Ea.add(0),await fc(s),s.Ra.set("Offline")}(n)})}function g6(t,e){const n=new Nt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=K(u);return h.persistence.runTransaction("read document","readonly",m=>h.localDocuments.getDocument(m,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=gc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await yc(t),e,n)),n.promise}function hP(t,e,n={}){const r=new Nt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Vm({next:m=>{d.Nu(),o.enqueueAndForget(()=>ev(s,h));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new j(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new nv(uc(a.path),d,{includeMetadataChanges:!0,qa:!0});return Zw(s,h)}(await tc(t),t.asyncQueue,e,n,r)),r.promise}function y6(t,e){const n=new Nt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Mp(i,s,!0),l=new rP(s,a.Qs),u=l.ru(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const l=gc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await yc(t),e,n)),n.promise}function fP(t,e,n={}){const r=new Nt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Vm({next:m=>{d.Nu(),o.enqueueAndForget(()=>ev(s,h)),m.fromCache&&l.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new nv(a,d,{includeMetadataChanges:!0,qa:!0});return Zw(s,h)}(await tc(t),t.asyncQueue,e,n,r)),r.promise}function _6(t,e,n){const r=new Nt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await dP(t);r.resolve(async function(o,a,l){var S;const u=K(o),{request:d,gt:h,parent:m}=pk(u.serializer,UR(a),l);u.connection.$o||delete d.parent;const y=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,m,d,1)).filter(C=>!!C.result);ee(y.length===1,64727);const I=(S=y[0].result)==null?void 0:S.aggregateFields;return Object.keys(I).reduce((C,E)=>(C[h[E]]=I[E],C),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function w6(t,e){const n=new Vm(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).Ca.add(s),s.next()}(await tc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).Ca.delete(s)}(await tc(t),n))}}function v6(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?sk().encode(o):o,function(d,h){return new c6(d,h)}(function(d,h){if(d instanceof Uint8Array)return p1(d,h);if(d instanceof ArrayBuffer)return p1(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ma(e));t.asyncQueue.enqueueAndForget(async()=>{l6(await hv(t),i,r)})}function I6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=K(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await yc(t),e))}function pP(t,e){return function(r,i){return new u6(r,i)}(t,e)}function E6(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=K(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(h,m,y,I,S){h=[...h],m=[...m],h.sort(y),m.sort(y);const C=h.length,E=m.length;let v=0,T=0;for(;v<E&&T<C;){const L=y(h[T],m[v]);L<0?S(h[T++]):L>0?I(m[v++]):(v++,T++)}for(;v<E;)I(m[v++]);for(;T<C;)S(h[T++])}(u,i,_3,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>D.waitFor(a)))}(await yc(t),e))}function T6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){K(r).Fs.Vs=i}(await yc(t),e))}function b6(t){return t.asyncQueue.enqueue(async()=>function(n){const r=K(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await yc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firestore.googleapis.com",y1=!0;class _1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new j(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gP,this.ssl=y1}else this.host=e.host,this.ssl=e.ssl??y1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sk)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new a3;switch(r.type){case"firstParty":return new d3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g1.get(n);r&&($("ComponentProvider","Removing Datastore"),g1.delete(n),r.terminate())}(this),Promise.resolve()}}function x6(t,e,n,r={}){var u;t=fe(t,Yd);const i=Ri(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(om(`https://${a}`),z0("Firestore",!0)),s.host!==gP&&s.host!==a&&hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!cr(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=kt.MOCK_USER;else{d=pA(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new j(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new kt(m)}t._authCredentials=new l3(new tR(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dt(this.firestore,e,this._query)}}class Ne{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ne(this.firestore,e,this._key)}toJSON(){return{type:Ne._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pa(n,Ne._jsonSchema))return new Ne(e,r||null,new W(ue.fromString(n.referencePath)))}}Ne._jsonSchemaVersion="firestore/documentReference/1.0",Ne._jsonSchema={type:wt("string",Ne._jsonSchemaVersion),referencePath:wt("string")};class Zr extends Dt{constructor(e,n,r){super(e,n,uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new W(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function Jd(t,e,...n){if(t=X(t),vw("collection","path",e),t instanceof Yd){const r=ue.fromString(e,...n);return oT(r),new Zr(t,null,r)}{if(!(t instanceof Ne||t instanceof Zr))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return oT(r),new Zr(t.firestore,null,r)}}function Hz(t,e){if(t=fe(t,Yd),vw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dt(t,null,function(r){return new Ni(ue.emptyPath(),r)}(e))}function Sr(t,e,...n){if(t=X(t),arguments.length===1&&(e=ww.newId()),vw("doc","path",e),t instanceof Yd){const r=ue.fromString(e,...n);return sT(r),new Ne(t,null,new W(r))}{if(!(t instanceof Ne||t instanceof Zr))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return sT(r),new Ne(t.firestore,t instanceof Zr?t.converter:null,new W(r))}}function Wz(t,e){return t=X(t),e=X(e),(t instanceof Ne||t instanceof Zr)&&(e instanceof Ne||e instanceof Zr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function yP(t,e){return t=X(t),e=X(e),t instanceof Dt&&e instanceof Dt&&t.firestore===e.firestore&&Gd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="AsyncQueue";class v1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kw(this,"async_queue_retry"),this._c=()=>{const r=Vf();r&&$(w1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Nt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qs(e))throw e;$(w1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ft("INTERNAL UNHANDLED ERROR: ",I1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Xw.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:I1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function I1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class A6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=-1;class Me extends Yd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new v1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new v1(e),this._firestoreClient=void 0,await e}}}function Qz(t,e,n){n||(n=fd);const r=Nr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(cr(s,e))return i;throw new j(V.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new j(V.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sk)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ri(e.host)&&om(e.host),r.initialize({options:e,instanceIdentifier:n})}function S6(t,e){const n=typeof t=="object"?t:Dd(),r=typeof t=="string"?t:e||fd,i=Nr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=dA("firestore");s&&x6(i,...s)}return i}function it(t){if(t._terminated)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_P(t),t._firestoreClient}function _P(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new J3(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mP(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new f6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Yz(t,e){hr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return wP(t,zs.provider,{build:r=>new uv(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Jz(t){hr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();wP(t,zs.provider,{build:n=>new lP(n,e.cacheSizeBytes)})}function wP(t,e,n){if((t=fe(t,Me))._firestoreClient||t._terminated)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new j(V.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},_P(t)}function Xz(t){if(t._initialized&&!t._terminated)throw new j(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Jr.v())return Promise.resolve();const i=r+Dk;await Jr.delete(i)}(Gw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Zz(t){return function(n){const r=new Nt;return n.asyncQueue.enqueueAndForget(async()=>J5(await hv(n),r)),r.promise}(it(t=fe(t,Me)))}function e8(t){return p6(it(t=fe(t,Me)))}function t8(t){return m6(it(t=fe(t,Me)))}function n8(t){return KL(t.app,"firestore",t._databaseId.database),t._delete()}function E1(t,e){const n=it(t=fe(t,Me)),r=new A6;return v6(n,t._databaseId,e,r),r}function R6(t,e){return I6(it(t=fe(t,Me)),e).then(n=>n?new Dt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class k6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(ot.fromBase64String(e))}catch(n){throw new j(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fn(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pa(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:wt("string",Fn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function r8(){return new ga(y_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ei._jsonSchemaVersion}}static fromJSON(e){if(pa(e,ei._jsonSchema))return new ei(e.latitude,e.longitude)}}ei._jsonSchemaVersion="firestore/geoPoint/1.0",ei._jsonSchema={type:wt("string",ei._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pa(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pr(e.vectorValues);throw new j(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:wt("string",Pr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=/^__.*__$/;class C6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Li(e,this.data,this.fieldMask,n,this.fieldTransforms):new dc(e,this.data,n,this.fieldTransforms)}}class vP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class Fm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(IP(this.Ac)&&P6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ma(e)}Cc(e,n,r,i=!1){return new Fm({Ac:e,methodName:n,Dc:r,path:Je.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _a(t){const e=t._freezeSettings(),n=ma(t._databaseId);return new N6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jm(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);wv("Data must be an object, but it was:",o,r);const a=bP(r,o);let l,u;if(s.merge)l=new En(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=vd(e,h,n);if(!o.contains(m))throw new j(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);AP(d,m)||d.push(m)}l=new En(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new C6(new jt(a),l,u)}class Xd extends ya{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xd}}function EP(t,e,n){return new Fm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fv extends ya{_toFieldTransform(e){return new Hd(e.path,new Wl)}isEqual(e){return e instanceof fv}}class pv extends ya{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=EP(this,e,!0),r=this.vc.map(s=>wa(s,n)),i=new ea(r);return new Hd(e.path,i)}isEqual(e){return e instanceof pv&&cr(this.vc,e.vc)}}class mv extends ya{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=EP(this,e,!0),r=this.vc.map(s=>wa(s,n)),i=new ta(r);return new Hd(e.path,i)}isEqual(e){return e instanceof mv&&cr(this.vc,e.vc)}}class gv extends ya{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Kl(e.serializer,QR(e.serializer,this.Fc));return new Hd(e.path,n)}isEqual(e){return e instanceof gv&&this.Fc===e.Fc}}function yv(t,e,n,r){const i=t.Cc(1,e,n);wv("Data must be an object, but it was:",i,r);const s=[],o=jt.empty();Ys(r,(l,u)=>{const d=Um(e,l,n);u=X(u);const h=i.yc(d);if(u instanceof Xd)s.push(d);else{const m=wa(u,h);m!=null&&(s.push(d),o.set(d,m))}});const a=new En(s);return new vP(o,a,i.fieldTransforms)}function _v(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[vd(e,r,n)],l=[i];if(s.length%2!=0)throw new j(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(vd(e,s[m])),l.push(s[m+1]);const u=[],d=jt.empty();for(let m=a.length-1;m>=0;--m)if(!AP(u,a[m])){const y=a[m];let I=l[m];I=X(I);const S=o.yc(y);if(I instanceof Xd)u.push(y);else{const C=wa(I,S);C!=null&&(u.push(y),d.set(y,C))}}const h=new En(u);return new vP(d,h,o.fieldTransforms)}function TP(t,e,n,r=!1){return wa(n,t.Cc(r?4:3,e))}function wa(t,e){if(xP(t=X(t)))return wv("Unsupported field value:",e,t),bP(t,e);if(t instanceof ya)return function(r,i){if(!IP(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=wa(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=X(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:Ql(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ql(i.serializer,s)}}if(r instanceof ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:lk(i.serializer,r._byteString)};if(r instanceof Ne){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pr)return function(o,a){return{mapValue:{fields:{[Sw]:{stringValue:Rw},[Gl]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Nw(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${_m(r)}`)}(t,e)}function bP(t,e){const n={};return ER(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(t,(r,i)=>{const s=wa(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof ei||t instanceof Fn||t instanceof Ne||t instanceof ya||t instanceof Pr)}function wv(t,e,n){if(!xP(n)||!rR(n)){const r=_m(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vd(t,e,n){if((e=X(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Um(t,e);throw Bp("Field path arguments must be of type string or ",t,!1,void 0,n)}const D6=new RegExp("[~\\*/\\[\\]]");function Um(t,e,n){if(e.search(D6)>=0)throw Bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new j(V.INVALID_ARGUMENT,a+t+l)}function AP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L6 extends Id{data(){return super.data()}}function Bm(t,e){return typeof e=="string"?Um(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vv{}class Zd extends vv{}function Mf(t,e,...n){let r=[];e instanceof vv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof _c).length,a=s.filter(l=>l instanceof eh).length;if(o>1||o>0&&a>0)throw new j(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class eh extends Zd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new eh(e,n,r)}_apply(e){const n=this._parse(e);return kP(e._query,n),new Dt(e.firestore,e.converter,R_(e._query,n))}_parse(e){const n=_a(e.firestore);return function(s,o,a,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){b1(h,d);const I=[];for(const S of h)I.push(T1(l,s,S));m={arrayValue:{values:I}}}else m=T1(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||b1(h,d),m=TP(a,o,h,d==="in"||d==="not-in");return ge.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ff(t,e,n){const r=e,i=Bm("where",t);return eh._create(i,r,n)}class _c extends vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _c(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)kP(o,l),o=R_(o,l)}(e._query,n),new Dt(e.firestore,e.converter,R_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function i8(...t){return t.forEach(e=>PP("or",e)),_c._create("or",t)}function s8(...t){return t.forEach(e=>PP("and",e)),_c._create("and",t)}class Iv extends Zd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Iv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gd(s,o)}(e._query,this._field,this._direction);return new Dt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ni(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jf(t,e="asc"){const n=e,r=Bm("orderBy",t);return Iv._create(r,n)}class $m extends Zd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $m(e,n,r)}_apply(e){return new Dt(e.firestore,e.converter,Np(e._query,this._limit,this._limitType))}}function ry(t){return iR("limit",t),$m._create("limit",t,"F")}function o8(t){return iR("limitToLast",t),$m._create("limitToLast",t,"L")}class zm extends Zd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zm(e,n,r)}_apply(e){const n=RP(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,s){return new Ni(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function a8(...t){return zm._create("startAt",t,!0)}function O6(...t){return zm._create("startAfter",t,!1)}class Gm extends Zd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Gm(e,n,r)}_apply(e){const n=RP(e,this.type,this._docOrFields,this._inclusive);return new Dt(e.firestore,e.converter,function(i,s){return new Ni(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function l8(...t){return Gm._create("endBefore",t,!1)}function c8(...t){return Gm._create("endAt",t,!0)}function RP(t,e,n,r){if(n[0]=X(n[0]),n[0]instanceof Id)return function(s,o,a,l,u){if(!l)throw new j(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Al(s))if(h.field.isKeyField())d.push(Xo(o,l.key));else{const m=l.data.field(h.field);if(Tm(m))throw new j(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=h.field.canonicalString();throw new j(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new Bs(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_a(t.firestore);return function(o,a,l,u,d,h){const m=o.explicitOrderBy;if(d.length>m.length)throw new j(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<d.length;I++){const S=d[I];if(m[I].field.isKeyField()){if(typeof S!="string")throw new j(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof S}`);if(!Pw(o)&&S.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${S}' contains a slash.`);const C=o.path.child(ue.fromString(S));if(!W.isDocumentKey(C))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const E=new W(C);y.push(Xo(a,E))}else{const C=TP(l,u,S);y.push(C)}}return new Bs(y,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function T1(t,e,n){if(typeof(n=X(n))=="string"){if(n==="")throw new j(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pw(e)&&n.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!W.isDocumentKey(r))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xo(t,new W(r))}if(n instanceof Ne)return Xo(t,n._key);throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_m(n)}.`)}function b1(t,e){if(!Array.isArray(t)||t.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function PP(t,e){if(!(e instanceof eh||e instanceof _c))throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class CP{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ys(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Gl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Qe(o.doubleValue));return new Pr(n)}convertGeoPoint(e){return new ei(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hd(e));default:return null}}convertTimestamp(e){const n=xi(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ee(_k(r),9688,{name:e});const i=new Jo(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||ft(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ev extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(t){return new wd("sum",vd("sum",t))}function d8(t){return new wd("avg",vd("average",t))}function V6(){return new wd("count")}function h8(t,e){var n,r;return t instanceof wd&&e instanceof wd&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function f8(t,e){return yP(t.query,e.query)&&cr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="NOT SUPPORTED";class vs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gn extends Id{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function p8(t,e,n){if(pa(e,Gn._jsonSchema)){if(e.bundle===NP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ma(t._databaseId),i=pP(e.bundle,r),s=i.Wu(),o=new rv(i.getMetadata(),r);for(const d of s)o.Ga(d);const a=o.documents;if(a.length!==1)throw new j(V.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Rm(r,a[0].document),u=new W(ue.fromString(e.bundleName));return new Gn(t,new Ev(t),u,l,new vs(!1,!1),n||null)}}Gn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gn._jsonSchema={type:wt("string",Gn._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Uf extends Gn{data(e={}){return super.data(e)}}class qn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uf(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:M6(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ww.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function m8(t,e,n){if(pa(e,qn._jsonSchema)){if(e.bundle===NP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=ma(t._databaseId),i=pP(e.bundle,r),s=i.Wu(),o=new rv(i.getMetadata(),r);for(const m of s)o.Ga(m);if(o.queries.length!==1)throw new j(V.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Pm(o.queries[0].bundledQuery),l=o.documents;let u=new $o;l.map(m=>{const y=Rm(r,m.document);u=u.add(y)});const d=oa.fromInitialDocuments(a,u,le(),!1,!1),h=new Dt(t,n||null,a);return new qn(t,new Ev(t),h,d)}}function M6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}function g8(t,e){return t instanceof Gn&&e instanceof Gn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qn&&e instanceof qn&&t._firestore===e._firestore&&yP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){t=fe(t,Ne);const e=fe(t.firestore,Me);return hP(it(e),t._key).then(n=>Tv(e,t,n))}qn._jsonSchemaVersion="firestore/querySnapshot/1.0",qn._jsonSchema={type:wt("string",qn._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Zs extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}function y8(t){t=fe(t,Ne);const e=fe(t.firestore,Me),n=it(e),r=new Zs(e);return g6(n,t._key).then(i=>new Gn(e,r,t._key,i,new vs(i!==null&&i.hasLocalMutations,!0),t.converter))}function _8(t){t=fe(t,Ne);const e=fe(t.firestore,Me);return hP(it(e),t._key,{source:"server"}).then(n=>Tv(e,t,n))}function B_(t){t=fe(t,Dt);const e=fe(t.firestore,Me),n=it(e),r=new Zs(e);return SP(t._query),fP(n,t._query).then(i=>new qn(e,r,t,i))}function w8(t){t=fe(t,Dt);const e=fe(t.firestore,Me),n=it(e),r=new Zs(e);return y6(n,t._query).then(i=>new qn(e,r,t,i))}function v8(t){t=fe(t,Dt);const e=fe(t.firestore,Me),n=it(e),r=new Zs(e);return fP(n,t._query,{source:"server"}).then(i=>new qn(e,r,t,i))}function th(t,e,n){t=fe(t,Ne);const r=fe(t.firestore,Me),i=qm(t.converter,e,n);return nh(r,[jm(_a(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xe.none())])}function I8(t,e,n,...r){t=fe(t,Ne);const i=fe(t.firestore,Me),s=_a(i);let o;return o=typeof(e=X(e))=="string"||e instanceof ga?_v(s,"updateDoc",t._key,e,n,r):yv(s,"updateDoc",t._key,e),nh(i,[o.toMutation(t._key,Xe.exists(!0))])}function E8(t){return nh(fe(t.firestore,Me),[new hc(t._key,Xe.none())])}function T8(t,e){const n=fe(t.firestore,Me),r=Sr(t),i=qm(t.converter,e);return nh(n,[jm(_a(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Xe.exists(!1))]).then(()=>r)}function Ed(t,...e){var l,u,d;t=X(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Sl(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Sl(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(t instanceof Ne)o=fe(t.firestore,Me),a=uc(t._key.path),s={next:h=>{e[r]&&e[r](Tv(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=fe(t,Dt);o=fe(h.firestore,Me),a=h._query;const m=new Zs(o);s={next:y=>{e[r]&&e[r](new qn(o,m,h,y))},error:e[r+1],complete:e[r+2]},SP(t._query)}return function(m,y,I,S){const C=new Vm(S),E=new nv(y,C,I);return m.asyncQueue.enqueueAndForget(async()=>Zw(await tc(m),E)),()=>{C.Nu(),m.asyncQueue.enqueueAndForget(async()=>ev(await tc(m),E))}}(it(o),a,i,s)}function b8(t,e,...n){const r=X(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){u.error=`snapshotJson missing required field: ${h}`;break}const m=l[h];if(typeof m!="string"){u.error=`snapshotJson field '${h}' must be a string.`;break}if(m.length===0){u.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?u.bundle=m:h==="bundleName"?u.bundleName=m:h==="bundleSource"&&(u.bundleSource=m)}return u}(e);if(i.error)throw new j(V.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||Sl(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Sl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,h,m,y){let I,S=!1;return E1(u,d.bundle).then(()=>R6(u,d.bundleName)).then(E=>{E&&!S&&(y&&E.withConverter(y),I=Ed(E,h||{},m))}).catch(E=>(m.error&&m.error(E),()=>{})),()=>{S||(S=!0,I&&I())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Sl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,h,m,y){let I,S=!1;return E1(u,d.bundle).then(()=>{if(!S){const E=new Ne(u,y||null,W.fromPath(d.bundleName));I=Ed(E,h||{},m)}}).catch(E=>(m.error&&m.error(E),()=>{})),()=>{S||(S=!0,I&&I())}}(r,i,s,a,n[o])}throw new j(V.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function x8(t,e){return w6(it(t=fe(t,Me)),Sl(e)?e:{next:e})}function nh(t,e){return function(r,i){const s=new Nt;return r.asyncQueue.enqueueAndForget(async()=>W5(await hv(r),i,s)),s.promise}(it(t),e)}function Tv(t,e,n){const r=n.docs.get(e._key),i=new Zs(t);return new Gn(t,i,e._key,r,new vs(n.hasPendingWrites,n.fromCache),e.converter)}function A8(t){return F6(t,{count:V6()})}function F6(t,e){const n=fe(t.firestore,Me),r=it(n),i=IR(e,(s,o)=>new nk(o,s.aggregateType,s._internalFieldPath));return _6(r,t._query,i).then(s=>function(a,l,u){const d=new Zs(a);return new k6(l,d,u)}(n,t,s))}class j6{constructor(e){this.kind="memory",this._onlineComponentProvider=zs.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new cv(void 0)}}toJSON(){return{kind:this.kind}}}class U6{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=q6(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class B6{constructor(){this.kind="memoryEager",this._offlineComponentProvider=ec.provider}toJSON(){return{kind:this.kind}}}class $6{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new cv(e)}}toJSON(){return{kind:this.kind}}}function S8(){return new B6}function R8(t){return new $6(t==null?void 0:t.cacheSizeBytes)}function k8(t){return new j6(t)}function P8(t){return new U6(t)}class z6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:n=>new uv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class G6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:n=>new lP(n,e==null?void 0:e.cacheSizeBytes)}}}function q6(t){return new z6(t==null?void 0:t.forceOwnership)}function C8(){return new G6}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_a(e)}set(e,n,r){this._verifyNotCommitted();const i=Is(e,this._firestore),s=qm(i.converter,n,r),o=jm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Xe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Is(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof ga?_v(this._dataReader,"WriteBatch.update",s._key,n,r,i):yv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Xe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Is(e,this._firestore);return this._mutations=this._mutations.concat(new hc(n._key,Xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Is(t,e){if((t=X(t)).firestore!==e)throw new j(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_a(e)}get(e){const n=Is(e,this._firestore),r=new Ev(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return J(24041);const s=i[0];if(s.isFoundDocument())return new Id(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Id(this._firestore,r,n._key,null,n.converter);throw J(18433,{doc:s})})}set(e,n,r){const i=Is(e,this._firestore),s=qm(i.converter,n,r),o=jm(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Is(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof ga?_v(this._dataReader,"Transaction.update",s._key,n,r,i):yv(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Is(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6 extends K6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Is(e,this._firestore),r=new Zs(this._firestore);return super.get(e).then(i=>new Gn(this._firestore,r,n._key,i._document,new vs(!1,!1),n.converter))}}function N8(t,e,n){t=fe(t,Me);const r={...H6,...n};return function(s){if(s.maxAttempts<1)throw new j(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Nt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await dP(s);new h6(s.asyncQueue,u,a,o,l).ju()}),l.promise}(it(t),i=>e(new Q6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(){return new Xd("deleteField")}function L8(){return new fv("serverTimestamp")}function O8(...t){return new pv("arrayUnion",t)}function V8(...t){return new mv("arrayRemove",t)}function M8(t){return new gv("increment",t)}function F8(t){return new Pr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t){return it(t=fe(t,Me)),new W6(t,e=>nh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t,e){const n=it(t=fe(t,Me));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return hr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(d){throw new j(V.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=A1(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const m=Um("setIndexConfiguration",A1(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Uo(m,2)):h.order==="ASCENDING"?d.push(new Uo(m,0)):h.order==="DESCENDING"&&d.push(new Uo(m,1))}a.push(new Fl(Fl.UNKNOWN_ID,u,d,jl.empty()))}return a}(e);return E6(n,r)}function A1(t,e){if(typeof t[e]!="string")throw new j(V.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function B8(t){var i;t=fe(t,Me);const e=S1.get(t);if(e)return e;if(((i=it(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new Y6(t);return S1.set(t,r),r}function $8(t){DP(t,!0)}function z8(t){DP(t,!1)}function G8(t){b6(it(t._firestore)).then(e=>$("deleting all persistent cache indexes succeeded")).catch(e=>hr("deleting all persistent cache indexes failed",e))}function DP(t,e){T6(it(t._firestore),e).then(n=>$(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>hr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const S1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(t){var r;const e=it(fe(t.firestore,Me)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:km(n,Zt(t._query)).ft}function H8(t,e){var s;const n=IR(e,(o,a)=>new nk(a,o.aggregateType,o._internalFieldPath)),r=it(fe(t.firestore,Me)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:pk(i,UR(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return bv.instance.onExistenceFilterMismatch(e)}}class bv{constructor(){this.Mc=new Map}static get instance(){return rf||(rf=new bv,function(n){if(Ou)throw new Error("a TestingHooksSpi instance is already set");Ou=n}(rf)),rf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let rf=null;(function(e,n=!0){(function(i){cc=i})(da),ur(new Wn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Me(new c3(r.getProvider("auth-internal")),new h3(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new j(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jt(rT,iT,e),Jt(rT,iT,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebasestorage.googleapis.com",OP="storageBucket",J6=2*60*1e3,X6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends Jn{constructor(e,n,r=0){super(iy(e),`Firebase Storage: ${n} (${iy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function iy(t){return"storage/"+t}function xv(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(at.UNKNOWN,t)}function Z6(t){return new ct(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function eU(t){return new ct(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(at.UNAUTHENTICATED,t)}function nU(){return new ct(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function rU(t){return new ct(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iU(){return new ct(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sU(){return new ct(at.CANCELED,"User canceled the upload/download.")}function oU(t){return new ct(at.INVALID_URL,"Invalid URL '"+t+"'.")}function aU(t){return new ct(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lU(){return new ct(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OP+"' property when initializing the app?")}function cU(){return new ct(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uU(){return new ct(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dU(t){return new ct(at.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $_(t){return new ct(at.INVALID_ARGUMENT,t)}function VP(){return new ct(at.APP_DELETED,"The Firebase app was deleted.")}function hU(t){return new ct(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mu(t,e){return new ct(at.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function tu(t){throw new ct(at.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(r.path==="")return r;throw aU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(L){L.path_=decodeURIComponent(L.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${h}/${d}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},S=n===LP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${C}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:y,indices:I,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let L=0;L<T.length;L++){const U=T[L],G=U.regex.exec(e);if(G){const x=G[U.indices.bucket];let _=G[U.indices.path];_||(_=""),r=new Un(x,_),U.postModify(r);break}}if(r==null)throw oU(e);return r}}class fU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...C){u||(u=!0,e.apply(null,C))}function h(C){i=setTimeout(()=>{i=null,t(y,l())},C)}function m(){s&&clearTimeout(s)}function y(C,...E){if(u){m();return}if(C){m(),d.call(null,C,...E);return}if(l()||o){m(),d.call(null,C,...E);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,h(T)}let I=!1;function S(C){I||(I=!0,m(),!u&&(i!==null?(C||(a=2),clearTimeout(i),h(0)):C||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function mU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t){return t!==void 0}function yU(t){return typeof t=="object"&&!Array.isArray(t)}function Av(t){return typeof t=="string"||t instanceof String}function R1(t){return Sv()&&t instanceof Blob}function Sv(){return typeof Blob<"u"}function k1(t,e,n,r){if(r<e)throw $_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var zo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zo||(zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,i,s,o,a,l,u,d,h,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,S)=>{this.resolve_=I,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new sf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zo.NO_ERROR,l=s.getStatus();if(!a||_U(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===zo.ABORT;r(!1,new sf(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new sf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());gU(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=xv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?VP():sU();o(l)}else{const l=iU();o(l)}};this.canceled_?n(!1,new sf(!1,null,!0)):this.backoffId_=pU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function IU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bU(t,e,n,r,i,s,o=!0,a=!1){const l=MP(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return EU(d,e),vU(d,n),IU(d,s),TU(d,r),new wU(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AU(...t){const e=xU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Sv())return new Blob(t);throw new ct(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){if(typeof atob>"u")throw dU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sy{constructor(e,n){this.data=e,this.contentType=n||null}}function kU(t,e){switch(t){case Kr.RAW:return new sy(FP(e));case Kr.BASE64:case Kr.BASE64URL:return new sy(jP(t,e));case Kr.DATA_URL:return new sy(CU(e),NU(e))}throw xv()}function FP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function PU(t){let e;try{e=decodeURIComponent(t)}catch{throw Mu(Kr.DATA_URL,"Malformed data URL.")}return FP(e)}function jP(t,e){switch(t){case Kr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Mu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Mu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RU(e)}catch(i){throw i.message.includes("polyfill")?i:Mu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class UP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Mu(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=DU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function CU(t){const e=new UP(t);return e.base64?jP(Kr.BASE64,e.rest):PU(e.rest)}function NU(t){return new UP(t).contentType}function DU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){let r=0,i="";R1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(R1(this.data_)){const r=this.data_,i=SU(r,e,n);return i===null?null:new gs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new gs(r,!0)}}static getBlob(...e){if(Sv()){const n=e.map(r=>r instanceof gs?r.data_:r);return new gs(AU.apply(null,n))}else{const n=e.map(o=>Av(o)?kU(Kr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new gs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){let e;try{e=JSON.parse(t)}catch{return null}return yU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function OU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $P(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t,e){return e}class an{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||VU}}let of=null;function MU(t){return!Av(t)||t.length<2?t:$P(t)}function zP(){if(of)return of;const t=[];t.push(new an("bucket")),t.push(new an("generation")),t.push(new an("metageneration")),t.push(new an("name","fullPath",!0));function e(s,o){return MU(o)}const n=new an("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new an("size");return i.xform=r,t.push(i),t.push(new an("timeCreated")),t.push(new an("updated")),t.push(new an("md5Hash",null,!0)),t.push(new an("cacheControl",null,!0)),t.push(new an("contentDisposition",null,!0)),t.push(new an("contentEncoding",null,!0)),t.push(new an("contentLanguage",null,!0)),t.push(new an("contentType",null,!0)),t.push(new an("metadata","customMetadata",!0)),of=t,of}function FU(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Un(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function jU(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return FU(r,t),r}function GP(t,e,n){const r=BP(e);return r===null?null:jU(t,r,n)}function UU(t,e,n,r){const i=BP(e);if(i===null||!Av(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,m="/b/"+o(d)+"/o/"+o(h),y=Rv(m,n,r),I=MP({alt:"media",token:u});return y+I})[0]}function BU(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class qP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){if(!t)throw xv()}function $U(t,e){function n(r,i){const s=GP(t,i,e);return HP(s!==null),s}return n}function zU(t,e){function n(r,i){const s=GP(t,i,e);return HP(s!==null),UU(s,i,t.host,t._protocol)}return n}function WP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=nU():i=tU():n.getStatus()===402?i=eU(t.bucket):n.getStatus()===403?i=rU(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function GU(t){const e=WP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Z6(t.path)),s.serverResponse=i.serverResponse,s}return n}function qU(t,e,n){const r=e.fullServerUrl(),i=Rv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new qP(i,s,zU(t,n),o);return a.errorHandler=GU(e),a}function HU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=HU(null,e)),r}function KU(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let L=0;L<2;L++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=WU(e,r,i),d=BU(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=gs.getBlob(h,r,m);if(y===null)throw cU();const I={name:u.fullPath},S=Rv(s,t.host,t._protocol),C="POST",E=t.maxUploadRetryTime,v=new qP(S,C,$U(t,n),E);return v.urlParams=I,v.headers=o,v.body=y.uploadData(),v.errorHandler=WP(e),v}class QU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw tu("cannot .send() more than once");if(Ri(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YU extends QU{initXhr(){this.xhr_.responseType="text"}}function KP(){return new YU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new aa(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $P(this._location.path)}get storage(){return this._service}get parent(){const e=LU(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new aa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw hU(e)}}function JU(t,e,n){t._throwIfRoot("uploadBytes");const r=KU(t.storage,t._location,zP(),new gs(e,!0),n);return t.storage.makeRequestWithTokens(r,KP).then(i=>({metadata:i,ref:t}))}function XU(t){t._throwIfRoot("getDownloadURL");const e=qU(t.storage,t._location,zP());return t.storage.makeRequestWithTokens(e,KP).then(n=>{if(n===null)throw uU();return n})}function ZU(t,e){const n=OU(t._location.path,e),r=new Un(t._location.bucket,n);return new aa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){return/^[A-Za-z]+:\/\//.test(t)}function t9(t,e){return new aa(t,e)}function QP(t,e){if(t instanceof kv){const n=t;if(n._bucket==null)throw lU();const r=new aa(n,n._bucket);return e!=null?QP(r,e):r}else return e!==void 0?ZU(t,e):t}function n9(t,e){if(e&&e9(e)){if(t instanceof kv)return t9(t,e);throw $_("To use ref(service, url), the first argument must be a Storage instance.")}else return QP(t,e)}function P1(t,e){const n=e==null?void 0:e[OP];return n==null?null:Un.makeFromBucketSpec(n,t)}function r9(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ri(e);i&&(om(`https://${t.host}/b`),z0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:pA(s,t.app.options.projectId))}class kv{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=LP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J6,this._maxUploadRetryTime=X6,this._requests=new Set,i!=null?this._bucket=Un.makeFromBucketSpec(i,this._host):this._bucket=P1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=P1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new aa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new fU(VP());{const o=bU(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const C1="@firebase/storage",N1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="storage";function Td(t,e,n){return t=X(t),JU(t,e,n)}function bd(t){return t=X(t),XU(t)}function xd(t,e){return t=X(t),n9(t,e)}function i9(t=Dd(),e){t=X(t);const r=Nr(t,YP).getImmediate({identifier:e}),i=dA("storage");return i&&s9(r,...i),r}function s9(t,e,n,r={}){r9(t,e,n,r)}function o9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new kv(n,r,i,e,da)}function a9(){ur(new Wn(YP,o9,"PUBLIC").setMultipleInstances(!0)),Jt(C1,N1,""),Jt(C1,N1,"esm2020")}a9();var JP="5.0.1";function $p(t,e){return new Promise(n=>setTimeout(n,t,e))}function l9(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function c9(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):$p(Math.min(t,e))}function XP(t){return!!t&&typeof t.then=="function"}function D1(t,e){try{const n=t();XP(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function L1(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await l9())}return r}function Ad(t){return t.then(void 0,()=>{}),t}function u9(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function d9(t,e){return!u9(t,e)}function Pv(t){return parseInt(t)}function Er(t){return parseFloat(t)}function ci(t,e){return typeof t=="number"&&isNaN(t)?e:t}function hn(t){return t.reduce((e,n)=>e+(n?1:0),0)}function ZP(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function h9(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,d)=>{o[u]=o[u]||[],o[u].push(d)};for(;;){const u=a.exec(i[2]);if(!u)break;const d=u[0];switch(d[0]){case".":l("class",d.slice(1));break;case"#":l("id",d.slice(1));break;case"[":{const h=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(d);if(h)l(h[1],(n=(e=h[4])!==null&&e!==void 0?e:h[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function f9(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function rs(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let d=0,h=0,m=0,y=0;y+=s+u,m+=y>>>16,y&=65535,m+=i+l,h+=m>>>16,m&=65535,h+=r+a,d+=h>>>16,h&=65535,d+=n+o,d&=65535,t[0]=d<<16|h,t[1]=m<<16|y}function nr(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let d=0,h=0,m=0,y=0;y+=s*u,m+=y>>>16,y&=65535,m+=i*u,h+=m>>>16,m&=65535,m+=s*l,h+=m>>>16,m&=65535,h+=r*u,d+=h>>>16,h&=65535,h+=i*l,d+=h>>>16,h&=65535,h+=s*a,d+=h>>>16,h&=65535,d+=n*u+r*l+i*a+s*o,d&=65535,t[0]=d<<16|h,t[1]=m<<16|y}function Ya(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function Ln(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function Ke(t,e){t[0]^=e[0],t[1]^=e[1]}const p9=[4283543511,3981806797],m9=[3301882366,444984403];function O1(t){const e=[0,t[0]>>>1];Ke(t,e),nr(t,p9),e[1]=t[0]>>>1,Ke(t,e),nr(t,m9),e[1]=t[0]>>>1,Ke(t,e)}const af=[2277735313,289559509],lf=[1291169091,658871167],V1=[0,5],g9=[0,1390208809],y9=[0,944331445];function _9(t,e){const n=f9(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let d;for(d=0;d<s;d=d+16)l[0]=n[d+4]|n[d+5]<<8|n[d+6]<<16|n[d+7]<<24,l[1]=n[d]|n[d+1]<<8|n[d+2]<<16|n[d+3]<<24,u[0]=n[d+12]|n[d+13]<<8|n[d+14]<<16|n[d+15]<<24,u[1]=n[d+8]|n[d+9]<<8|n[d+10]<<16|n[d+11]<<24,nr(l,af),Ya(l,31),nr(l,lf),Ke(o,l),Ya(o,27),rs(o,a),nr(o,V1),rs(o,g9),nr(u,lf),Ya(u,33),nr(u,af),Ke(a,u),Ya(a,31),rs(a,o),nr(a,V1),rs(a,y9);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const h=[0,0];switch(i){case 15:h[1]=n[d+14],Ln(h,48),Ke(u,h);case 14:h[1]=n[d+13],Ln(h,40),Ke(u,h);case 13:h[1]=n[d+12],Ln(h,32),Ke(u,h);case 12:h[1]=n[d+11],Ln(h,24),Ke(u,h);case 11:h[1]=n[d+10],Ln(h,16),Ke(u,h);case 10:h[1]=n[d+9],Ln(h,8),Ke(u,h);case 9:h[1]=n[d+8],Ke(u,h),nr(u,lf),Ya(u,33),nr(u,af),Ke(a,u);case 8:h[1]=n[d+7],Ln(h,56),Ke(l,h);case 7:h[1]=n[d+6],Ln(h,48),Ke(l,h);case 6:h[1]=n[d+5],Ln(h,40),Ke(l,h);case 5:h[1]=n[d+4],Ln(h,32),Ke(l,h);case 4:h[1]=n[d+3],Ln(h,24),Ke(l,h);case 3:h[1]=n[d+2],Ln(h,16),Ke(l,h);case 2:h[1]=n[d+1],Ln(h,8),Ke(l,h);case 1:h[1]=n[d],Ke(l,h),nr(l,af),Ya(l,31),nr(l,lf),Ke(o,l)}return Ke(o,r),Ke(a,r),rs(o,a),rs(a,o),O1(o),O1(a),rs(o,a),rs(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function w9(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function v9(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function I9(t){return typeof t!="function"}function E9(t,e){const n=Ad(new Promise(r=>{const i=Date.now();D1(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(I9(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();D1(a,(...d)=>{const h=o+Date.now()-u;if(!d[0])return l({error:d[1],duration:h});l({value:d[1],duration:h})})}))})}));return function(){return n.then(i=>i())}}function T9(t,e,n,r){const i=Object.keys(t).filter(o=>d9(n,o)),s=Ad(L1(i,o=>E9(t[o],e),r));return async function(){const a=await s,l=await L1(a,h=>Ad(h()),r),u=await Promise.all(l),d={};for(let h=0;h<i.length;++h)d[i[h]]=u[h];return d}}function eC(){const t=window,e=navigator;return hn(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function b9(){const t=window,e=navigator;return hn(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!eC()}function rh(){const t=window,e=navigator;return hn(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function Dr(){const t=window,e=navigator;return hn(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function Cv(){const t=window,{HTMLElement:e,Document:n}=t;return hn(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function ih(){const t=window;return v9(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function tC(){var t,e;const n=window;return hn(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function x9(){const t=window;return hn([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function A9(){const t=window,{URLPattern:e}=t;return hn(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function S9(){const t=window;return hn(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function sh(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return hn([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function R9(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return hn(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function k9(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function P9(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function Nv(){const t=rh(),e=tC(),n=window,r=navigator,i="connection";return t?hn([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?hn(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function C9(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return hn(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function N9(){return O9()?-4:D9()}function D9(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(L9())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=V9(i),u=Ad(a.then(d=>M9(d.getChannelData(0).subarray(n)),d=>{if(d.name==="timeout"||d.name==="suspended")return-3;throw d}));return()=>(l(),u)}function L9(){return Dr()&&!Cv()&&!S9()}function O9(){return Dr()&&sh()&&ih()||rh()&&C9()&&A9()}function V9(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,d=0,h=0;t.oncomplete=I=>a(I.renderedBuffer);const m=()=>{setTimeout(()=>l(M1("timeout")),Math.min(500,h+5e3-Date.now()))},y=()=>{try{const I=t.startRendering();switch(XP(I)&&Ad(I),t.state){case"running":h=Date.now(),u&&m();break;case"suspended":document.hidden||d++,u&&d>=3?l(M1("suspended")):setTimeout(y,500);break}}catch(I){l(I)}};y(),s=()=>{u||(u=!0,h>0&&m())}}),s]}function M9(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function M1(t){const e=new Error(t);return e.name=t,e}async function nC(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await $p(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let d=!1;const h=()=>{d=!0,l()},m=S=>{d=!0,u(S)};a.onload=h,a.onerror=m;const{style:y}=a;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const I=()=>{var S,C;d||(((C=(S=a.contentWindow)===null||S===void 0?void 0:S.document)===null||C===void 0?void 0:C.readyState)==="complete"?h():setTimeout(I,10))};I()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await $p(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function F9(t){const[e,n]=h9(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?j9(r.style,s):r.setAttribute(i,s)}return r}function j9(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function U9(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const B9="mmMwWLliI0O&1",$9="48px",Ja=["monospace","sans-serif","serif"],F1=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function z9(){return nC(async(t,{document:e})=>{const n=e.body;n.style.fontSize=$9;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=y=>{const I=e.createElement("span"),{style:S}=I;return S.position="absolute",S.top="0",S.left="0",S.fontFamily=y,I.textContent=B9,r.appendChild(I),I},a=(y,I)=>o(`'${y}',${I}`),l=()=>Ja.map(o),u=()=>{const y={};for(const I of F1)y[I]=Ja.map(S=>a(I,S));return y},d=y=>Ja.some((I,S)=>y[S].offsetWidth!==i[I]||y[S].offsetHeight!==s[I]),h=l(),m=u();n.appendChild(r);for(let y=0;y<Ja.length;y++)i[Ja[y]]=h[y].offsetWidth,s[Ja[y]]=h[y].offsetHeight;return F1.filter(y=>d(m[y]))})}function G9(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function q9(){return H9(Z9())}function H9(t){let e=!1,n,r;const[i,s]=W9();return K9(i,s)?(e=Q9(s),t?n=r="skipped":[n,r]=Y9(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function W9(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function K9(t,e){return!!(e&&t.toDataURL)}function Q9(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function Y9(t,e){J9(t,e);const n=oy(t),r=oy(t);return n!==r?["unstable","unstable"]:(X9(t,e),[oy(t),n])}function J9(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function X9(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function oy(t){return t.toDataURL()}function Z9(){return Dr()&&sh()&&ih()}function eB(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=Pv(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function tB(){return navigator.oscpu}function nB(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))rh()&&x9()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function rB(){return window.screen.colorDepth}function iB(){return ci(Er(navigator.deviceMemory),void 0)}function sB(){if(!(Dr()&&sh()&&ih()))return oB()}function oB(){const t=screen,e=r=>ci(Pv(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const aB=2500,lB=10;let Bf,ay;function cB(){if(ay!==void 0)return;const t=()=>{const e=z_();G_(e)?ay=setTimeout(t,aB):(Bf=e,ay=void 0)};t()}function uB(){return cB(),async()=>{let t=z_();if(G_(t)){if(Bf)return[...Bf];k9()&&(await P9(),t=z_())}return G_(t)||(Bf=t),t}}function dB(){if(Dr()&&sh()&&ih())return()=>Promise.resolve(void 0);const t=uB();return async()=>{const e=await t(),n=r=>r===null?null:ZP(r,lB);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function z_(){const t=screen;return[ci(Er(t.availTop),null),ci(Er(t.width)-Er(t.availWidth)-ci(Er(t.availLeft),0),null),ci(Er(t.height)-Er(t.availHeight)-ci(Er(t.availTop),0),null),ci(Er(t.availLeft),null)]}function G_(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function hB(){return ci(Pv(navigator.hardwareConcurrency),void 0)}function fB(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-pB();return`UTC${n>=0?"+":""}${n}`}function pB(){const t=new Date().getFullYear();return Math.max(Er(new Date(t,0,1).getTimezoneOffset()),Er(new Date(t,6,1).getTimezoneOffset()))}function mB(){try{return!!window.sessionStorage}catch{return!0}}function gB(){try{return!!window.localStorage}catch{return!0}}function yB(){if(!(eC()||b9()))try{return!!window.indexedDB}catch{return!0}}function _B(){return!!window.openDatabase}function wB(){return navigator.cpuClass}function vB(){const{platform:t}=navigator;return t==="MacIntel"&&Dr()&&!Cv()?R9()?"iPad":"iPhone":t}function IB(){return navigator.vendor||""}function EB(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function TB(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function bB(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function xB({debug:t}={}){if(!AB())return;const e=bB(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await SB(r);t&&RB(e,i);const s=n.filter(o=>{const a=e[o];return hn(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function AB(){return Dr()||Nv()}async function SB(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};j1(r);for(let o=0;o<t.length;++o){const a=F9(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");j1(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await $p(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function j1(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function RB(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function kB(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function PB(){if(U1("inverted"))return!0;if(U1("none"))return!1}function U1(t){return matchMedia(`(inverted-colors: ${t})`).matches}function CB(){if(B1("active"))return!0;if(B1("none"))return!1}function B1(t){return matchMedia(`(forced-colors: ${t})`).matches}const NB=100;function DB(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=NB;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function LB(){if(Xa("no-preference"))return 0;if(Xa("high")||Xa("more"))return 1;if(Xa("low")||Xa("less"))return-1;if(Xa("forced"))return 10}function Xa(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function OB(){if($1("reduce"))return!0;if($1("no-preference"))return!1}function $1(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function VB(){if(z1("reduce"))return!0;if(z1("no-preference"))return!1}function z1(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function MB(){if(G1("high"))return!0;if(G1("standard"))return!1}function G1(t){return matchMedia(`(dynamic-range: ${t})`).matches}const Te=Math,ln=()=>0;function FB(){const t=Te.acos||ln,e=Te.acosh||ln,n=Te.asin||ln,r=Te.asinh||ln,i=Te.atanh||ln,s=Te.atan||ln,o=Te.sin||ln,a=Te.sinh||ln,l=Te.cos||ln,u=Te.cosh||ln,d=Te.tan||ln,h=Te.tanh||ln,m=Te.exp||ln,y=Te.expm1||ln,I=Te.log1p||ln,S=_=>Te.pow(Te.PI,_),C=_=>Te.log(_+Te.sqrt(_*_-1)),E=_=>Te.log(_+Te.sqrt(_*_+1)),v=_=>Te.log((1+_)/(1-_))/2,T=_=>Te.exp(_)-1/Te.exp(_)/2,L=_=>(Te.exp(_)+1/Te.exp(_))/2,U=_=>Te.exp(_)-1,G=_=>(Te.exp(2*_)-1)/(Te.exp(2*_)+1),x=_=>Te.log(1+_);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:C(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:E(1),atanh:i(.5),atanhPf:v(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:T(1),cos:l(10.000000000123),cosh:u(1),coshPf:L(1),tan:d(-1e300),tanh:h(1),tanhPf:G(1),exp:m(1),expm1:y(1),expm1Pf:U(1),log1p:I(10),log1pPf:x(10),powPI:S(-100)}}const jB="mmMwWLliI0fiflO&1",ly={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function UB(){return BB((t,e)=>{const n={},r={};for(const i of Object.keys(ly)){const[s={},o=jB]=ly[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(ly))r[i]=n[i].getBoundingClientRect().width;return r})}function BB(t,e=4e3){return nC((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",rh()?s.style.zoom=`${1/r.devicePixelRatio}`:Dr()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function $B(){return navigator.pdfViewerEnabled}function zB(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function GB(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(qB())return-3;try{return t.canMakePayments()?1:0}catch(e){return HB(e)}}const qB=U9;function HB(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function WB(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const rC=-1,iC=-2,KB=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),QB=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),YB=["FRAGMENT_SHADER","VERTEX_SHADER"],JB=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],sC="WEBGL_debug_renderer_info",XB="WEBGL_polygon_mode";function ZB({cache:t}){var e,n,r,i,s,o;const a=oC(t);if(!a)return rC;if(!lC(a))return iC;const l=aC()?null:a.getExtension(sC);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function e$({cache:t}){const e=oC(t);if(!e)return rC;if(!lC(e))return iC;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const d of Object.keys(r))s.push(`${d}=${r[d]}`);const u=q1(e);for(const d of u){const h=e[d];o.push(`${d}=${h}${KB.has(h)?`=${e.getParameter(h)}`:""}`)}if(n)for(const d of n){if(d===sC&&aC()||d===XB&&r$())continue;const h=e.getExtension(d);if(!h){i.push(d);continue}for(const m of q1(h)){const y=h[m];a.push(`${m}=${y}${QB.has(y)?`=${e.getParameter(y)}`:""}`)}}for(const d of YB)for(const h of JB){const m=t$(e,d,h);l.push(`${d}.${h}=${m.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function oC(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function t$(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function q1(t){return Object.keys(t.__proto__).filter(n$)}function n$(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function aC(){return tC()}function r$(){return rh()||Dr()}function lC(t){return typeof t.getParameter=="function"}function i$(){if(!(Nv()||Dr()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function s$(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const o$={fonts:z9,domBlockers:xB,fontPreferences:UB,audio:N9,screenFrame:dB,canvas:q9,osCpu:tB,languages:nB,colorDepth:rB,deviceMemory:iB,screenResolution:sB,hardwareConcurrency:hB,timezone:fB,sessionStorage:mB,localStorage:gB,indexedDB:yB,openDatabase:_B,cpuClass:wB,platform:vB,plugins:G9,touchSupport:eB,vendor:IB,vendorFlavors:EB,cookiesEnabled:TB,colorGamut:kB,invertedColors:PB,forcedColors:CB,monochrome:DB,contrast:LB,reducedMotion:OB,reducedTransparency:VB,hdr:MB,math:FB,pdfViewerEnabled:$B,architecture:zB,applePay:GB,privateClickMeasurement:WB,audioBaseLatency:i$,dateTimeLocale:s$,webGlBasics:ZB,webGlExtensions:e$};function a$(t){return T9(o$,t,[])}const l$="$ if upgrade to Pro: https://fpjs.dev/pro";function c$(t){const e=u$(t),n=d$(e);return{score:e,comment:l$.replace(/\$/g,`${n}`)}}function u$(t){if(Nv())return .4;if(Dr())return Cv()&&!(sh()&&ih())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function d$(t){return ZP(.99+.01*t,1e-4)}function h$(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function cC(t){return JSON.stringify(t,(e,n)=>n instanceof Error?w9(n):n,2)}function uC(t){return _9(h$(t))}function f$(t){let e;const n=c$(t);return{get visitorId(){return e===void 0&&(e=uC(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:JP}}function p$(t=50){return c9(t,t*2)}function m$(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=f$(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${cC(s)}
\`\`\``),o}}}function g$(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${JP}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function y$(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&g$();const{delayFallback:n,debug:r}=t;await p$(n);const i=a$({cache:{},debug:r});return m$(i,r)}var _$={load:y$,hashComponents:uC,componentsToDebugString:cC};const w$={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},wc=TA(w$),dC=bV(wc),as=s3(wc),Bn=S6(wc),nc=i9(wc),v$=oM(wc,{backend:new Ld}),I$=aM(v$,{model:"gemini-2.5-flash-image-preview",generationConfig:{responseModalities:[SE.TEXT,SE.IMAGE]}});async function hC(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function E$(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function fC(){try{return(await v4(as)).user}catch(t){throw console.error("Error signing in:",t),t}}function pC(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let cy=null,Mn=null;async function Dv(){return Mn||(cy||(cy=_$.load().then(t=>t.get()).then(t=>(Mn=t.visitorId,localStorage.setItem("moomhe_fingerprint",Mn),console.log("Browser fingerprint generated:",Mn),Mn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),Mn=e,e})),cy)}function T$(){if(Mn)return Mn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Mn=t,t):null}async function mC(){if(Mn)return Mn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Mn=t,t):await Dv()}Dv();async function bo(t){const e=pC(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:b$(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await th(Sr(Bn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function b$(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function va(t,e=1920,n=1080,r=.8){if(t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const s=await(await fetch(t)).blob(),o=(await oi(()=>import("./heic2any-7912c480.js").then(d=>d.h),[])).default,a=await o({blob:s,toType:"image/jpeg",quality:r}),l=Array.isArray(a)?a[0]:a,u=await new Promise(d=>{const h=new FileReader;h.onload=()=>d(h.result),h.readAsDataURL(l)});return console.log("HEIC converted to JPEG successfully"),await va(u,e,n,r)}catch(i){throw console.error("Error converting HEIC image:",i),new Error("Failed to convert HEIC image to JPEG")}return new Promise((i,s)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{try{const a=document.createElement("canvas"),l=a.getContext("2d");let{width:u,height:d}=o;if(u<=e&&d<=n)a.width=u,a.height=d;else{const h=e/u,m=n/d,y=Math.min(h,m);u=Math.floor(u*y),d=Math.floor(d*y),a.width=u,a.height=d}l.drawImage(o,0,0,u,d),a.toBlob(h=>{h?(console.log(`Image compressed: Original ${o.width}x${o.height} -> ${u}x${d}, Size: ${(h.size/1024/1024).toFixed(2)}MB`),i(h)):s(new Error("Failed to create compressed image blob"))},"image/jpeg",r)}catch(a){console.error("Error compressing image:",a),s(a)}},o.onerror=()=>{s(new Error("Failed to load image for compression"))},o.src=t})}function x$(t,e=1920,n=1080,r=.8){return new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{va(a.target.result,e,n,r).then(i).catch(s)},o.onerror=()=>s(new Error("Failed to read file")),o.readAsDataURL(t)})}function gC(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(d=>{d?r(d):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function A$(t,e,n){try{let r;try{r=await va(e,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original:",I),r=await(await fetch(e)).blob()}let i;try{i=await gC(e)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=xd(nc,`userHistory/${t}/${o}`),u=await Td(l,r),d=await bd(u.ref),h=xd(nc,`userHistory/${t}/${a}`),m=await Td(h,i),y=await bd(m.ref);return{downloadURL:d,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function S$(t,e){try{const n=await new Promise(I=>{const S=new FileReader;S.onload=()=>I(S.result),S.readAsDataURL(e)});let r;try{r=await va(n,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original file:",I),r=e}let i;try{i=await gC(n)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=xd(nc,`userHistory/${t}/${o}`),u=await Td(l,r),d=await bd(u.ref),h=xd(nc,`userHistory/${t}/${a}`),m=await Td(h,i),y=await bd(m.ref);return{downloadURL:d,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function R$(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await A$(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=Sr(Jd(Bn,"userHistory"));return await th(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function yC(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await S$(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=Sr(Jd(Bn,"userHistory"));return await th(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function k$(t){try{const e=Jd(Bn,"userHistory"),n=Mf(e,Ff("userId","==",t),jf("createdAt","desc")),r=await B_(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename,o.result.originalImageUrl&&(a.originalImageUrl=o.result.originalImageUrl)),o.originalImageUrl?a.originalImageUrl=o.originalImageUrl:o.imageData&&typeof o.imageData=="string"&&o.imageData.startsWith("http")&&(a.originalImageUrl=o.imageData),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function rl(t,e=1,n=7){try{const r=Jd(Bn,"userHistory");let i=null;if(e>1){const h=Mf(r,Ff("userId","==",t),jf("createdAt","desc"),ry((e-1)*n)),m=await B_(h);m.empty||(i=m.docs[m.docs.length-1])}let s;const o=n*2;i&&e>1?s=Mf(r,Ff("userId","==",t),jf("createdAt","desc"),O6(i),ry(o)):s=Mf(r,Ff("userId","==",t),jf("createdAt","desc"),ry(o));const a=await B_(s),l=[];a.forEach(h=>{const m=h.data();if(!m.isError){const y={id:h.id,...m};m.result&&m.result.storageUrl&&(y.storageUrl=m.result.storageUrl,y.thumbnailUrl=m.result.thumbnailUrl,y.filename=m.result.filename,y.thumbnailFilename=m.result.thumbnailFilename,m.result.originalImageUrl&&(y.originalImageUrl=m.result.originalImageUrl)),m.originalImageUrl?y.originalImageUrl=m.originalImageUrl:m.imageData&&typeof m.imageData=="string"&&m.imageData.startsWith("http")&&(y.originalImageUrl=m.imageData),m.objects&&(y.objects=m.objects),l.push(y)}});const u=l.slice(0,n),d=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${d}`),{history:u,hasMore:d}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function _C(t,e){try{let n;try{n=await va(e,1920,1080,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=xd(nc,`temp/${t}/${i}`),o=await Td(s,n),a=await bd(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function de(t,e={}){try{KA(dC,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const $f=(t="email")=>de("sign_up",{method:t}),wC=(t="email")=>de("login",{method:t}),vC=()=>de("anonymous_sign_in"),IC=()=>de("logout"),q_=t=>de("account_link",{success:t}),EC=t=>de("image_upload",{file_type:t}),TC=()=>de("object_image_upload"),bC=()=>de("image_download"),xC=t=>de("image_share",{platform:t}),AC=(t,e=!1)=>de("generation_start",{prompt_type:t,has_object_image:e}),SC=(t,e)=>de("generation_complete",{prompt_type:t,duration_ms:e}),zf=t=>de("generation_error",{error_type:t}),Gf=(t,e,n)=>de("limit_reached",{subscription:t,usage:e,limit:n}),P$=(t,e=0)=>de("object_detection",{success:t,object_count:e}),C$=(t,e=null)=>de("feature_use",{feature:t,value:e}),RC=t=>de("style_select",{style:t}),kC=(t,e)=>de("color_select",{color:t,category:e}),N$=t=>de("angle_select",{angle:t}),PC=t=>de("lighting_select",{lighting:t}),CC=t=>de("furniture_select",{furniture:t}),NC=t=>de("repairs_select",{repair:t}),DC=t=>de("doors_windows_select",{option:t}),LC=t=>de("bathroom_select",{option:t}),H_=()=>de("onboarding_start"),OC=t=>de("onboarding_step",{step:t}),VC=()=>de("onboarding_complete"),MC=t=>de("onboarding_skip",{at_step:t}),W_=()=>de("subscription_modal_view"),FC=t=>de("subscription_click",{tier:t}),jC=()=>de("welcome_premium_show"),UC=()=>de("history_click"),BC=t=>de("history_load_more",{page:t}),$C=()=>de("contact_form_submit"),zC=()=>de("contact_form_success"),D$=t=>de("category_select",{category:t}),L$=t=>de("page_view",{page:t}),GC=()=>de("app_open"),O$=Object.freeze(Object.defineProperty({__proto__:null,analytics:dC,app:wc,auth:as,compressFile:x$,compressImage:va,createOrUpdateUser:bo,db:Bn,fileToGenerativePart:hC,getDeviceFingerprint:mC,getDeviceId:pC,getFingerprint:T$,initFingerprint:Dv,loadUserHistory:k$,loadUserHistoryPaginated:rl,logAnalyticsEvent:de,model:I$,saveImageToHistory:R$,saveUploadToHistory:yC,signInUser:fC,storage:nc,trackAccountLink:q_,trackAngleSelect:N$,trackAnonymousSignIn:vC,trackAppOpen:GC,trackBathroomSelect:LC,trackCategorySelect:D$,trackColorSelect:kC,trackContactFormSubmit:$C,trackContactFormSuccess:zC,trackDoorsWindowsSelect:DC,trackFeatureUse:C$,trackFurnitureSelect:CC,trackGenerationComplete:SC,trackGenerationError:zf,trackGenerationStart:AC,trackHistoryClick:UC,trackHistoryLoadMore:BC,trackImageDownload:bC,trackImageShare:xC,trackImageUpload:EC,trackLightingSelect:PC,trackLimitReached:Gf,trackLogin:wC,trackLogout:IC,trackObjectDetection:P$,trackObjectImageUpload:TC,trackOnboardingComplete:VC,trackOnboardingSkip:MC,trackOnboardingStart:H_,trackOnboardingStep:OC,trackPageView:L$,trackRepairsSelect:NC,trackSignUp:$f,trackStyleSelect:RC,trackSubscriptionClick:FC,trackSubscriptionModalView:W_,trackWelcomePremiumShow:jC,uploadImageForSharing:_C,urlToFile:E$},Symbol.toStringTag,{value:"Module"}));class V${constructor(){Ov(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=Ed(Sr(Bn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map}async submitImageGenerationRequest(e,n,r,i=null,s=null){try{const o=await e.getIdToken(),a={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:o,deviceId:s,prompt:n,imageData:r,originalImageUrl:r&&r.startsWith("http")?r:null,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date},l=Sr(Jd(Bn,"userHistory"));return await th(l,a),l.id}catch(o){throw console.error("Error submitting image generation request:",o),o}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=Sr(Bn,"genCount",r,"users",e),s=Sr(Bn,"users",e),[o,a]=await Promise.all([x1(i),x1(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},d=u.credits!==void 0?u.credits:0;return{count:l,limit:d}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const cf=new V$,M$=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const[s,o]=B.useState(null),[a,l]=B.useState({width:window.innerWidth,height:window.innerHeight}),[u,d]=B.useState(window.innerWidth<1024),h=e[t];B.useEffect(()=>{const v=()=>{const L=window.innerWidth<1024;if(d(L),l({width:window.innerWidth,height:window.innerHeight}),h.targetRef&&h.targetRef.current){const U=h.targetRef.current.getBoundingClientRect();U.width>0&&U.height>0?o(U):o(null)}else o(null)};v(),window.addEventListener("resize",v),window.addEventListener("scroll",v,!0);const T=setTimeout(v,500);return()=>{window.removeEventListener("resize",v),window.removeEventListener("scroll",v,!0),clearTimeout(T)}},[t,h]);const m=t===e.length-1;if(!s)return p.jsxs("div",{className:"fixed inset-0 z-[100]",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",dir:"rtl",children:[p.jsx("h3",{className:"font-bold text-xl text-primary-600",children:h.title}),p.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:p.jsx(Ps,{size:20})})]}),p.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:"rtl",children:h.description}),p.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[p.jsx("div",{className:"flex gap-1.5",children:e.map((v,T)=>p.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${T===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},T))}),p.jsxs("button",{onClick:m?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[m?"":"",!m&&p.jsx(HI,{size:16})]})]})]})})]});const y=u?Math.min(280,a.width-40):300,I=200,S=u?12:20,C={};let E="";if(u){let v=(a.width-y)/2;C.left=v,C.width=y;const T=s.top;a.height-s.bottom,T>I+S+50?(C.top=s.top-I-S+20,E="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(C.top=s.bottom+S,E="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]"),C.top=Math.max(20,Math.min(a.height-I-20,C.top))}else{const v=s.left>a.width-350,T=s.left<350;if(v){C.left=s.left-y-S;let L=s.top+s.height/2-80;L=Math.max(20,Math.min(a.height-I-20,L)),C.top=L,E="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(T){C.left=s.right+S;let L=s.top+s.height/2-80;L=Math.max(20,Math.min(a.height-I-20,L)),C.top=L,E="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let L=s.left+s.width/2-y/2;L=Math.max(20,Math.min(a.width-y-20,L)),C.left=L;const U=s.top;a.height-s.bottom,U>I+S?(C.top=s.top-180,E="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(C.top=s.bottom+S,E="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}}return p.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[p.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[p.jsx("defs",{children:p.jsxs("mask",{id:"spotlight-mask",children:[p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),p.jsx("rect",{x:s.left-5,y:s.top-5,width:s.width+10,height:s.height+10,rx:"12",fill:"black"})]})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),p.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:s.left-5,top:s.top-5,width:s.width+10,height:s.height+10}}),p.jsxs("div",{className:`absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl pointer-events-auto animate-bounce-in origin-center transition-all duration-300 ${u?"":"w-[300px]"}`,style:C,children:[p.jsx("div",{className:`absolute w-0 h-0 border-solid ${E}`}),p.jsxs("div",{className:"flex justify-between items-start mb-2",dir:"rtl",children:[p.jsx("h3",{className:"font-bold text-lg text-primary-600",children:h.title}),p.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Ps,{size:16})})]}),p.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:"rtl",children:h.description}),p.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[p.jsx("div",{className:"flex gap-1",children:e.map((v,T)=>p.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${T===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},T))}),p.jsxs("button",{onClick:m?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[m?"":"",!m&&p.jsx(HI,{size:16})]})]})]})]})},F$=({color:t,onClose:e,onApply:n})=>{const[r,i]=B.useState(""),[s,o]=B.useState("all"),a=u=>{const d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return d?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null},l=()=>{const u=a(t.hex),d=u?`RGB(${u.r}, ${u.g}, ${u.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${d}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const h=/[\u0590-\u05FF]/.test(r);n(h?`  ${r}  ${t.value} (${t.ral}, ${d})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${d}) color completely and opaquely, covering the original color entirely`)}};return p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),p.jsx("h3",{className:"text-lg font-semibold text-white",children:" "})]}),p.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:p.jsx(Ps,{size:20})})]}),p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[p.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("span",{className:"font-medium text-white block",children:" "}),p.jsx("span",{className:"text-xs text-gray-400",children:"    "})]})]}),p.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[p.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("span",{className:"font-medium text-white block",children:" "}),p.jsx("span",{className:"text-xs text-gray-400",children:"   "})]})]})]}),s==="custom"&&p.jsxs("div",{className:"animate-slide-up",children:[p.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:" ?"}),p.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:": , , ...",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),p.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:""}),p.jsxs("button",{onClick:l,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[p.jsx("span",{children:""}),p.jsx(r_,{size:16})]})]})]})]})})},H1=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=B.useState(!1);return B.useEffect(()=>{a(!0)},[]),!t||!o?null:$0.createPortal(p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[p.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(Ps,{className:"w-5 h-5"})}),p.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),p.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),p.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:p.jsx(mp,{className:"w-8 h-8 text-primary-400"})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?"   ":"   "}),p.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?`    (${s} ).         .`:`   ${s}   .        ,   .`}),p.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-xs text-gray-400 mb-1",children:" "}),p.jsxs("div",{className:"text-lg font-bold text-white",children:[i," "]})]}),p.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),p.jsxs("div",{className:"text-lg font-bold text-white",children:[s," "]})]})]}),p.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[p.jsx(mp,{className:"w-5 h-5"}),r>0?" ":"  "]}),p.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:" , "})]})]})}),document.body)},j$=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=B.useState(!1);return B.useEffect(()=>{i(!0)},[]),!t||!r?null:$0.createPortal(p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[p.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:p.jsx(Ps,{className:"w-5 h-5"})}),p.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),p.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),p.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:p.jsx(Pg,{size:16,fill:"currentColor"})}),p.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:p.jsx(Pg,{size:12,fill:"currentColor"})}),p.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:p.jsx(Pg,{size:14,fill:"currentColor"})})]}),p.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[p.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[p.jsx(mp,{className:"w-10 h-10 text-yellow-400"}),p.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:p.jsx(r_,{className:"w-4 h-4 text-white stroke-[3]"})})]}),p.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),p.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),p.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[p.jsx(os,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[p.jsx(r_,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"    "})]}),p.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[p.jsx(mp,{className:"w-4 h-4 text-yellow-400"}),p.jsx("span",{children:"  "})]})]}),p.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",p.jsx(os,{className:"w-5 h-5"})]})]})]})}),document.body)},U$=({beforeImage:t,afterImage:e})=>{const[n,r]=B.useState(50),i=B.useRef(null),s=B.useRef(!1),o=d=>{s.current=!0,l(d)},a=()=>{s.current=!1},l=d=>{if(!i.current)return;let h;d.touches?h=d.touches[0].clientX:h=d.clientX;const m=i.current.getBoundingClientRect(),I=Math.max(0,Math.min(h-m.left,m.width))/m.width*100;r(I)},u=d=>{s.current&&l(d)};return p.jsxs("div",{className:"relative w-full h-full select-none overflow-hidden group cursor-col-resize",ref:i,onMouseDown:o,onTouchStart:o,onMouseMove:u,onTouchMove:u,onMouseUp:a,onMouseLeave:a,onTouchEnd:a,children:[p.jsx("img",{src:e,alt:"After",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),p.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden select-none",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:p.jsx("img",{src:t,alt:"Before",className:"absolute inset-0 w-full h-full object-contain select-none",draggable:!1})}),p.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-col-resize z-10 shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{left:`${n}%`},children:p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg text-primary-600 transition-transform group-hover:scale-110",children:p.jsx(sA,{size:16})})}),p.jsx("div",{className:"absolute top-4 left-4 bg-black/60 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""}),p.jsx("div",{className:"absolute top-4 right-4 bg-primary-600/80 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""})]})};function B$(){var jc;const[t,e]=B.useState(!1),[n,r]=B.useState(0),[i,s]=B.useState(null),[o,a]=B.useState(!1),[l,u]=B.useState(()=>localStorage.getItem("hasSeenFirstUploadTip")==="true"),[d,h]=B.useState(window.innerWidth<1024),[m,y]=B.useState(!1),I=B.useRef(null),S=B.useRef(null),C=B.useRef(null),E=B.useRef(null);B.useEffect(()=>{const k=()=>h(window.innerWidth<1024);return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]);const v=B.useRef(null),T=B.useRef(null),L=B.useRef(null),U=B.useRef(null);B.useRef(null),B.useRef(null),B.useState("  ");const[G,x]=B.useState(null),[_,A]=B.useState("/assets/design_img.jpg"),[b,P]=B.useState(!1),[O,R]=B.useState(!1);B.useState(!1);const[tn,Xn]=B.useState(!1),[Vi,mn]=B.useState(!1),[Y,re]=B.useState(!1),[oe,Pe]=B.useState(!1),[we,De]=B.useState(!1),[nn,rn]=B.useState(!1),[sn,be]=B.useState(!1),[fr,ni]=B.useState([]),[ne,Mi]=B.useState(null),[kn,eo]=B.useState(!1),[Fi,Lr]=B.useState(!1),[oh,vc]=B.useState(!1),[Lv,to]=B.useState(null),[$t,bt]=B.useState(""),[Hm,Ia]=B.useState(16/9),[no,Ic]=B.useState(""),[ji,ut]=B.useState(null),[Ee,ri]=B.useState(null),[Ec,Ui]=B.useState(1),[Bi,Pn]=B.useState(!0),[$i,Tc]=B.useState(!1),[bc,zi]=B.useState(!1),[Wm,Gi]=B.useState(!1),[pr,qi]=B.useState("signup"),[gn,Ea]=B.useState(""),[Ta,Or]=B.useState(""),[Zn,ba]=B.useState(0),[dt,ro]=B.useState(0),[er,xt]=B.useState(0),ah={0:"",1:"",2:"",3:""},[Cn,Hi]=B.useState(""),[lh,ch]=B.useState(!1),[io,uh]=B.useState(!1),[dh,xa]=B.useState(!1),[xc,Ac]=B.useState(!1),[Aa,Nn]=B.useState(!1),[hh,Sc]=B.useState(!1),[Sa,Ra]=B.useState(null),[fh,ka]=B.useState(!1),[ph,mr]=B.useState(!1),[mh,Pa]=B.useState(!1);B.useState(0);const[ii,tr]=B.useState(null),[Wi,so]=B.useState(!1),[gh,Ca]=B.useState(!1),[Na,Da]=B.useState(""),[si,Rc]=B.useState(""),[La,yh]=B.useState(""),[_h,kc]=B.useState(!1),[wh,Pc]=B.useState(!1),[Vr,zt]=B.useState("");B.useEffect(()=>{Sa&&ne&&!ne.isAnonymous&&(Nn(!0),W_(),Ra(null))},[ne,Sa]);const Ki=k=>{const F=k.includes("starter")?"starter":k.includes("value")?"value":k.includes("pro")?"pro":"unknown";FC(F),Nc.current=!0,window.open(k,"_blank","noopener,noreferrer"),Nn(!1),(!ne||ne.isAnonymous)&&ka(!0)},[Oa,Va]=B.useState(!1),[Ce,oo]=B.useState(null),Qi=B.useRef(null),Yi=B.useRef(null),Mr=B.useRef(null);B.useRef(null);const Cc=B.useRef(!0),Nc=B.useRef(!1);B.useEffect(()=>{GC()},[]),B.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{e(!0),H_()},1e3)},[]);const Dc=()=>{e(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),VC()},Km=()=>{if(n<3){const k=n+1;r(k),OC(k)}else Dc()},Qm=()=>{MC(n),Dc()},Fr=()=>{W_(),Nn(!0)},jr=[{title:" ",description:"      .   ?  ,   .",targetRef:d?S:I},{title:"  ",description:'      .  " "    .',targetRef:d?T:v},{title:" ",description:'  "" -AI       !',targetRef:d?U:L},{title:" :  ",description:'   ?   " "        .',targetRef:d?E:C}];B.useEffect(()=>{const k=L4(as,async F=>{if(F){console.log("User UID:",F.uid),Mi(F),eo(!0),await bo(F),Lr(!0);try{const ye=await rl(F.uid,1,7);ni(ye.history),Pn(ye.hasMore)}finally{Lr(!1)}const z=Sr(Bn,"users",F.uid),ae=Ed(z,ye=>{if(ye.exists()){const xe=ye.data(),et=xe.subscription!==void 0?xe.subscription:0;ro(Lt=>Cc.current?(Cc.current=!1,et):(Lt===0&&et>0&&Nc.current&&(Pa(!0),jC(),Nc.current=!1),et)),ba(xe.credits!==void 0?xe.credits:0)}}),Oe=new Date,mt=`${String(Oe.getMonth()+1).padStart(2,"0")}-${Oe.getFullYear()}`,Ze=Sr(Bn,"genCount",mt,"users",F.uid),ie=Ed(Ze,ye=>{ye.exists()?xt(ye.data().count||0):xt(0)});return()=>{ae(),ie()}}else try{const z=await fC();Mi(z),eo(!0),await bo(z),vC()}catch(z){console.error("Failed to sign in anonymously:",z)}});return()=>k()},[]);const vh=async k=>{const F=k.target.files[0];if(F){const z=F.type||F.name.split(".").pop().toLowerCase();EC(z);const ae=F.type==="image/heic"||F.type==="image/heif"||F.name.toLowerCase().endsWith(".heic")||F.name.toLowerCase().endsWith(".heif");ae&&console.log("HEIC file detected, converting to JPEG...");const Oe=new FileReader;Oe.onload=async mt=>{const Ze=mt.target.result;let ie=Ze;try{const ye=await va(Ze,1920,1080,.8),xe=new FileReader;ie=await new Promise(et=>{xe.onload=()=>et(xe.result),xe.readAsDataURL(ye)}),console.log("Image compressed for display")}catch(ye){console.warn("Failed to compress image for display, using original:",ye),ae&&console.error("HEIC conversion failed, please try uploading a JPEG or PNG image instead")}if(x(ie),A(ie),tr(null),so(!1),Ia(16/9),to(null),l||setTimeout(()=>{a(!0)},1e3),kn&&ne){Lr(!0);try{const ye=await yC(ne.uid,F,`Uploaded: ${F.name}`),xe=ye.id;console.log("Upload result ID:",xe),console.log("Upload result:",ye);const et=await rl(ne.uid,1,7);ni(et.history),Ui(1),Pn(et.hasMore),to(xe),console.log("Set current history ID to newly uploaded image:",xe),console.log("Current history after reload:",et.history.map(Lt=>({id:Lt.id,prompt:Lt.prompt})))}catch(ye){console.error("Failed to save upload to Firebase:",ye)}finally{Lr(!1)}}},Oe.readAsDataURL(F)}},Lc=()=>{Qi.current.click()},Ih=async()=>{bC();try{let k=_;if(k.startsWith("https://firebasestorage.googleapis.com/")){const F=document.createElement("a");F.href=k,F.download="moomhe-design.png",F.target="_blank",document.body.appendChild(F),F.click(),document.body.removeChild(F)}else{const z=await(await fetch(k)).blob(),ae=window.URL.createObjectURL(z),Oe=document.createElement("a");Oe.href=ae,Oe.download="moomhe-design.png",document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),window.URL.revokeObjectURL(ae)}}catch(k){console.error("Download failed:",k);try{window.open(_,"_blank")}catch(F){console.error("Fallback download also failed:",F),alert("  .  .")}}},Ji=async()=>{xC("whatsapp");try{let k=_;const F=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(k.startsWith("data:"))try{P(!0);const{downloadURL:z}=await _C((ne==null?void 0:ne.uid)||"anonymous",k);k=z,console.log(" Image uploaded to temporary storage:",z)}catch(z){console.error("Error uploading image to Firebase:",z),alert("  .  .");return}finally{P(!1)}if(F){const z=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(k)}`;window.open(z,"_blank")}else{const z=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(k)}`;window.open(z,"_blank")}}catch(k){console.error("WhatsApp share failed:",k),alert("  .  .")}},Ym=async()=>{if(!si.trim()&&!Na.trim()){zt("     ");return}if(si.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(si)){zt("    ");return}if(!La.trim()){zt("  ");return}zt(""),kc(!0),$C();try{const k=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,F={id:k,uid:(ne==null?void 0:ne.uid)||"anonymous",email:si.trim()||null,phone:Na.trim()||null,message:La.trim(),createdAt:new Date,userEmail:(ne==null?void 0:ne.email)||null,isAnonymous:(ne==null?void 0:ne.isAnonymous)||!0};await th(Sr(Bn,"supportMsgs",k),F),Da(""),Rc(""),yh(""),Ca(!1),Pc(!0),zC(),setTimeout(()=>Pc(!1),5e3)}catch(k){console.error("Error submitting contact form:",k),zt("  .  .")}finally{kc(!1)}},Oc=k=>{UC();const F=k.storageUrl||k.imageUrl;A(F),k.originalImageUrl?(tr(k.originalImageUrl),so(!1)):(tr(null),so(!1)),Ia(16/9),to(k.id)},Jm=()=>{b||vc(!0)},gr=()=>{vc(!1)},Xm=k=>{const F=k.target,z=F.naturalWidth/F.naturalHeight;Ia(z)},Zm=async k=>{const F=k.target.files[0];if(F){TC();const z=new FileReader;z.onload=ae=>{const Oe=new Image;Oe.onload=()=>{const ie=document.createElement("canvas");let ye=Oe.width,xe=Oe.height;const et=1200;(ye>et||xe>et)&&(ye>xe?(xe=Math.round(xe*et/ye),ye=et):(ye=Math.round(ye*et/xe),xe=et)),ie.width=ye,ie.height=xe,ie.getContext("2d").drawImage(Oe,0,0,ye,xe);const Ue=ie.toDataURL("image/jpeg",.9);ut(Ue),fetch(Ue).then(on=>on.blob()).then(on=>{const Dn=new File([on],F.name,{type:"image/jpeg"});ri(Dn)})},Oe.src=ae.target.result,mo("  !      .");const mt="    ",Ze=$t.trim();Ze?Ze.includes(mt)||bt(`${Ze} ${mt}`):bt(mt)},z.readAsDataURL(F)}},ao=()=>{Mr.current.click()},lo=()=>{ut(null),ri(null),Mr.current&&(Mr.current.value="")},Eh=async k=>{if(k.preventDefault(),!(!gn||!Cn)){if(pr==="signup"&&Cn!==Ta){alert("  .  .");return}ch(!0);try{if(pr==="signup")if(ne&&ne.isAnonymous){const{linkWithCredential:z,EmailAuthProvider:ae}=await oi(()=>import("./index.esm-c631d76b.js"),[]),Oe=ae.credential(gn,Cn);try{const mt=await z(ne,Oe);await bo(mt.user),q_(!0),$f("email_link"),alert("  !    .")}catch(mt){if(q_(!1),mt.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:Ze}=await oi(()=>import("./index.esm-c631d76b.js"),[]),ie=await Ze(as,gn,Cn);await Th(ne.uid,ie.user.uid),await bo(ie.user),$f("email_migrate"),alert("  !      .")}else throw mt}}else{const{createUserWithEmailAndPassword:z}=await oi(()=>import("./index.esm-c631d76b.js"),[]),ae=await z(as,gn,Cn);await bo(ae.user),$f("email"),alert("  !")}else{const{signInWithEmailAndPassword:F}=await oi(()=>import("./index.esm-c631d76b.js"),[]),z=await F(as,gn,Cn);await bo(z.user),wC("email"),alert(" !")}zi(!1),Ea(""),Or(""),Hi(""),qi("signup")}catch(F){console.error("Authentication error:",F),F.code==="auth/email-already-in-use"?(alert("   .   ."),qi("login")):F.code==="auth/user-not-found"?(alert("  .    ."),qi("signup")):F.code==="auth/wrong-password"?alert(" .  ."):F.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{ch(!1)}}},co=k=>{k.preventDefault(),Eh(k)},uo=async()=>{if(!gn){alert("    .");return}uh(!0);try{const{sendPasswordResetEmail:k}=await oi(()=>import("./index.esm-c631d76b.js"),[]);await k(as,gn),alert("     .")}catch(k){console.error("Password reset error:",k),k.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{uh(!1)}},Th=async(k,F)=>{try{const{collection:z,query:ae,where:Oe,getDocs:mt,doc:Ze,setDoc:ie,deleteDoc:ye}=await oi(()=>import("./index.esm-fb2db3e8.js"),[]),{db:xe}=await oi(()=>Promise.resolve().then(()=>O$),void 0),et=z(xe,"userHistory"),Lt=ae(et,Oe("userId","==",k)),Ue=await mt(Lt),on=[];if(Ue.forEach(Dn=>{const At=Dn.data();At.userId=F;const c=Ze(z(xe,"userHistory"));on.push(ie(c,At)),on.push(ye(Dn.ref))}),await Promise.all(on),console.log(`Migrated ${Ue.size} history entries from ${k} to ${F}`),kn){const Dn=await rl(F,1,7);ni(Dn.history),Ui(1),Pn(Dn.hasMore)}}catch(z){console.error("Error migrating user data:",z)}},Vc=async()=>{try{IC();const{signOut:k}=await oi(()=>import("./index.esm-c631d76b.js"),[]);await k(as),ni([]),Mi(null),eo(!1),Gi(!1),window.location.reload()}catch(k){console.error("Logout error:",k),alert(" .  .")}},Le=async()=>{if(!kn||!ne||$i||!Bi){console.log("Load more history blocked:",{isAuthenticated:kn,currentUser:!!ne,isLoadingMoreHistory:$i,hasMoreHistory:Bi});return}console.log("Loading more history, current page:",Ec),Tc(!0);try{const k=Ec+1;BC(k);const F=await rl(ne.uid,k,7);console.log("Load more result:",{nextPage:k,historyCount:F.history.length,hasMore:F.hasMore}),F.history.length>0?(ni(z=>[...z,...F.history]),Ui(k),Pn(F.hasMore)):Pn(!1)}catch(k){console.error("Failed to load more history:",k)}finally{Tc(!1)}};B.useEffect(()=>{const k=F=>{dh&&Yi.current&&!Yi.current.contains(F.target)&&xa(!1),xc&&!F.target.closest(".suggestions-modal")&&Ac(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[dh,xc]);const eg=k=>{const F=String(k.getDate()).padStart(2,"0"),z=String(k.getMonth()+1).padStart(2,"0"),ae=String(k.getFullYear()).slice(-2);return`${F}/${z}/${ae}`},tg=k=>{const z=Math.floor((new Date-k)/1e3);return z<60?" ":z<3600?` ${Math.floor(z/60)} `:z<86400?` ${Math.floor(z/3600)} `:z<172800?"":z<604800?` ${Math.floor(z/86400)} `:z<2592e3?` ${Math.floor(z/604800)} `:z<31536e3?` ${Math.floor(z/2592e3)} `:` ${Math.floor(z/31536e3)} `},Mc=k=>{const F=k.createdAt;if(!F)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(F))return F;try{let z;if(F&&typeof F=="object"&&F.toDate?z=F.toDate():F&&typeof F=="object"&&F.seconds?z=new Date(F.seconds*1e3):z=new Date(F),!isNaN(z.getTime()))return tg(z)}catch(z){console.warn("Failed to parse timestamp:",F,z)}return F||"  "},ho=async()=>{if($t.trim()){if(kn&&ne&&!await cf.canMakeRequest(ne.uid)){Gf(dt,er,Zn),mr(!0);return}P(!0);try{const k=$t;let F=k;Ee&&(F=`  , ${k}`),console.log(" Final prompt for AI:",F),await go(F),bt(""),ut(null),ri(null),Mr.current&&(Mr.current.value="")}catch(k){console.error("Custom prompt failed:",k),k.message&&(k.message.includes("limit reached")||k.message.includes("credits"))?mr(!0):alert("  .  .")}finally{P(!1)}}},bh={:"#C1121C",:"#FF7514",:"#E5BE01",:"#287233",:"#1E2460",:"#6D3F5B",:"#78858B"," ":"#F4F4F4"},Ma={:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}]," ":[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},xh=k=>{kC(k.value,no),oo(k),Va(!0)},yr=k=>{Va(!1),R(!1),oo(null),console.log(" Color Selection - Prompt being added to input and executing:",k);const F=$t.trim();let z;F?F.endsWith(" ")?z=`${F}${k}`:z=`${F}, ${k}`:z=k,bt(z),go(z),bt("")},Ah=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],ng=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}],fo=[{name:"",value:"minimalist",prompt:"     - , ,  "},{name:"",value:"bohemian",prompt:"     - , , "},{name:"",value:"industrial",prompt:"     -   "},{name:"  ",value:"mid-century modern",prompt:"       - , , "},{name:"",value:"scandinavian",prompt:"     -  , , "},{name:"",value:"traditional",prompt:"     - , , "},{name:" ",value:"modern farmhouse",prompt:"      - , , "},{name:"",value:"contemporary",prompt:"     - , , "},{name:"",value:"coastal",prompt:"     - , , "},{name:" ",value:"art deco",prompt:"      - , "}],Sh=k=>{Xn(!1),PC(k.value),console.log(" Lighting Selection - Prompt being added to input:",k.prompt),console.log(" Selected lighting:",k.name,k.value),ja(k.prompt)},Fc=k=>{mn(!1),CC(k.value),console.log(" Furniture Selection - Prompt being added to input:",k.prompt),console.log(" Selected furniture:",k.name,k.value),ja(k.prompt)},Fa=k=>{Pe(!1),RC(k.value),console.log(" Style Selection - Prompt being added to input and executing:",k.prompt),console.log(" Selected style:",k.name,k.value);const F=$t.trim();let z;F?F.endsWith(" ")?z=`${F}${k.prompt}`:z=`${F}, ${k.prompt}`:z=k.prompt,bt(z),go(z),bt("")},po=(k,F="other")=>{we?DC(k):nn?LC(k):Y&&NC(k),De(!1),rn(!1),re(!1);const z=$t.trim();let ae;z?z.endsWith(" ")?ae=`${z}${k}`:ae=`${z}, ${k}`:ae=k,bt(ae),go(ae),bt("")},mo=k=>{s(k),setTimeout(()=>s(null),3e3)},ja=k=>{const F=$t.trim();let z;F?F.endsWith(" ")?z=`${F}${k}`:z=`${F} ${k}`:z=k,bt(z),mo("  .     ")},go=async k=>{var Oe,mt,Ze;if(!_)return;const F=Date.now();P(!0);const ae=(ie=>ie.includes("")||ie.includes("")||ie.includes("")||ie.includes("")?"style":ie.includes("")||ie.includes("")?"color":ie.includes("")||ie.includes("")?"lighting":ie.includes("")||ie.includes("")||ie.includes("")||ie.includes("")?"furniture":ie.includes("")||ie.includes("")||ie.includes("")?"angle":ie.includes("")||ie.includes("")?"repairs":ie.includes("")||ie.includes("")?"doors_windows":ie.includes("")||ie.includes("")||ie.includes("")?"bathroom":"custom")(k);AC(ae,!!Ee),tr(_),so(!1);try{if(console.log(" AI Image Alteration - Prompt being sent:",k),console.log(" Main image URL:",_),console.log(" Object image available:",!!Ee),kn&&ne&&!await cf.canMakeRequest(ne.uid)){Gf(dt,er,Zn),mr(!0),P(!1);return}let ie=_;if(_.startsWith("/assets/")||_.startsWith("./assets/"))try{const on=await(await fetch(_)).blob();ie=await new Promise(At=>{const c=new FileReader;c.onload=()=>At(c.result),c.readAsDataURL(on)})}catch(Ue){throw console.error("Error converting local image to data URL:",Ue),new Error("Failed to load the default image")}let ye=null;Ee?(console.log(" Processing object image file:",Ee.name,Ee.type,Ee.size),ye=await hC(Ee),console.log(" Object image processed successfully:",!!ye)):console.log(" No object image file available");const xe=await mC(),et=await cf.submitImageGenerationRequest(ne,k,ie,ye,xe),Lt=await cf.waitForRequestCompletion(et);if(console.log("AI Service result:",Lt),Lt&&Lt.storageUrl){const Ue=Date.now()-F;SC(ae,Ue);const on=Lt.storageUrl,Dn={imageUrl:on,prompt:k,timestamp:eg(new Date)};if(kn&&ne){Lr(!0);try{const At=await rl(ne.uid,1,7);ni(At.history),Ui(1),Pn(At.hasMore)}catch(At){console.error("Failed to reload history from Firebase:",At)}finally{Lr(!1)}}else{const At={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Dn};ni(c=>[At,...c]),Ui(1),Pn(!0)}A(on),Ia(16/9),to(null),ut(null),ri(null),Mr.current&&(Mr.current.value="")}else alert("   .       .")}catch(ie){console.error("AI processing failed:",ie),(Oe=ie.message)!=null&&Oe.includes("limit reached")||(mt=ie.message)!=null&&mt.includes(" ")?(zf("limit_reached"),Gf(dt,er,Zn),mr(!0)):(Ze=ie.message)!=null&&Ze.includes("timeout")?(zf("timeout"),alert("    .  .")):(zf("unknown"),alert("  .       ."))}finally{P(!1)}},yo=[{title:" ",items:[{name:" ",description:"      ",icon:yn},{name:" ",description:"  ",icon:yn},{name:" ",description:"  ",icon:yn},{name:" -",description:"  - ( )",icon:yn},{name:"  ",description:"    ()",icon:yn},{name:" ",description:"  ",icon:yn},{name:" ",description:"  ",icon:yn},{name:" ",description:"     ",icon:yn}]},{title:" ",items:[{name:" ",description:"     ",icon:yn},{name:" ",description:"    ",icon:yn},{name:" ",description:"     ",icon:yn},{name:" ",description:"     ",icon:yn}]}],Rh=[{title:" ",items:[{name:" ",description:"    ",icon:Vt},{name:" ",description:"  ",icon:Vt}]},{title:" ",items:[{name:" ",description:"  ",icon:Vt},{name:" ",description:"  vintage",icon:Vt},{name:" ",description:"  ",icon:Vt}]},{title:" ",items:[{name:" ",description:"     ",icon:Vt},{name:"",description:" ",icon:Vt},{name:" ",description:"    ",icon:Vt}]},{title:" ",items:[{name:" ",description:"    ",icon:Vt},{name:" ",description:"  ",icon:Vt},{name:" ",description:"    ",icon:Vt}]},{title:" '/",items:[{name:"' ",description:" '   ",icon:Vt},{name:"' ",description:"  ",icon:Vt}]},{title:" ",items:[{name:"  ",description:"      ",icon:Vt},{name:"  ",description:"      ",icon:Vt}]}];return p.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",children:[p.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),p.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",p.jsx("span",{className:"text-lg sm:text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),p.jsxs("button",{onClick:Fr,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${dt>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[dt>0?p.jsx($a,{className:"w-5 h-5"}):p.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),p.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),p.jsx("defs",{children:p.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),p.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),p.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),dt>0?p.jsxs("div",{className:"flex flex-col items-start leading-none",children:[p.jsx("span",{children:" "}),p.jsxs("span",{className:"text-[10px] opacity-80",children:[Zn-er>0?Zn-er:0," "]})]}):" "]}),p.jsx("button",{onClick:()=>{r(0),e(!0),H_()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"",children:p.jsx(AD,{className:"w-5 h-5"})}),p.jsx("button",{onClick:()=>Ca(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:" ",children:p.jsx(YI,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"md:hidden flex items-center bg-surface/50 backdrop-blur-md rounded-full border border-white/10 p-1 pl-1 pr-1 gap-1",children:[p.jsxs("button",{onClick:Fr,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30",children:[p.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:Zn-er>0?Zn-er:0}),p.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),p.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),p.jsx("defs",{children:p.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[p.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),p.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),p.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})]}),p.jsx("button",{onClick:()=>ne&&!ne.isAnonymous?Gi(!0):zi(!0),className:"flex items-center justify-center w-8 h-8",children:kn?p.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:p.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ne==null?void 0:ne.email)||"U")[0].toUpperCase()})}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center",children:p.jsx(Cg,{className:"w-4 h-4 text-white"})})})]}),p.jsx("button",{onClick:()=>ne&&!ne.isAnonymous?Gi(!0):zi(!0),className:"hidden md:flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:kn?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:p.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ne==null?void 0:ne.email)||"U")[0].toUpperCase()})}),p.jsxs("div",{className:"text-right hidden sm:block",children:[!(ne!=null&&ne.isAnonymous)&&p.jsx("div",{className:"text-xs text-textMuted",children:" -"}),p.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((ne==null?void 0:ne.email)||"").split("@")[0]||""})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:p.jsx(Cg,{className:"w-4 h-4 text-white"})}),p.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:""})]})})]})]}),p.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[p.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-28 glass-panel rounded-2xl p-3 items-center animate-slide-in-right relative",style:{animationDelay:"0.1s"},children:p.jsxs("div",{className:"flex flex-col gap-2.5 w-full",children:[p.jsxs("button",{ref:I,onClick:Lc,disabled:b,className:"w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:" ",children:[p.jsx(tE,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),p.jsx("span",{className:"text-[11px] text-blue-300 font-medium",children:" "})]}),p.jsxs("button",{ref:C,onClick:ao,disabled:b,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group ${Ee?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/50":"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 hover:border-green-400/50"} hover:from-green-500/30 hover:to-emerald-500/30 border rounded-xl transition-all duration-300 shadow-lg shadow-green-500/10 hover:shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[p.jsx(ZI,{className:`w-6 h-6 group-hover:scale-110 transition-transform ${Ee?"text-primary-400":"text-green-400"}`}),p.jsx("span",{className:`text-[11px] font-medium ${Ee?"text-primary-300":"text-green-300"}`,children:" "})]}),p.jsx("div",{className:"h-px w-full bg-white/10 my-1"}),p.jsxs("button",{ref:v,onClick:()=>Pe(!oe),disabled:b,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-400/30 hover:border-purple-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20 ${oe?"ring-2 ring-purple-400/50":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[p.jsx(nE,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-purple-400"}),p.jsx("span",{className:"text-[11px] text-purple-300 font-medium",children:" "})]}),p.jsxs("button",{onClick:()=>be(!sn),disabled:b,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group btn-icon ${sn?"btn-icon-active":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[p.jsx(JI,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${sn?"text-primary-300":""}`}),p.jsx("span",{className:"text-[11px]",children:""})]})]})}),sn&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>be(!1)}),p.jsxs("div",{className:"hidden lg:block fixed top-1/2 right-32 -translate-y-1/2 w-48 bg-surface/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-white/10 z-50 animate-fade-in",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-white/10",children:[p.jsx("span",{className:"text-sm font-medium text-white",children:" "}),p.jsx("button",{onClick:()=>be(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:p.jsx(Ps,{className:"w-4 h-4 text-textMuted"})})]}),p.jsx("div",{className:"flex flex-col gap-1",children:[{icon:XI,label:"",action:()=>{R(!O),be(!1)}},{icon:eE,label:"",action:()=>{mn(!Vi),be(!1)}},{icon:KI,label:"",action:()=>{Xn(!tn),be(!1)}},{icon:yn,label:" ",action:()=>{De(!we),be(!1)}},{icon:Vt,label:"",action:()=>{rn(!nn),be(!1)}},{icon:za,label:"",action:()=>{re(!Y),be(!1)}}].map((k,F)=>p.jsxs("button",{onClick:k.action,disabled:b,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors text-right disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx(k.icon,{className:"w-5 h-5 text-primary-400"}),p.jsx("span",{className:"text-sm text-white",children:k.label})]},F))})]})]}),p.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[p.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[Wi&&ii?p.jsx(U$,{beforeImage:ii,afterImage:_}):p.jsx("img",{src:_,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${b?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:Jm,onLoad:Xm,style:{objectPosition:"center"}}),b&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[p.jsxs("div",{className:"w-20 h-20 relative",children:[p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),p.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),p.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:"  ..."})]}),p.jsxs("div",{className:"absolute top-4 right-4 flex flex-row gap-2 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-300 z-10",children:[ii&&!b&&p.jsx("button",{onClick:()=>so(!Wi),className:`p-2 ${Wi?"bg-primary-600":"bg-black/50"} text-white rounded-lg backdrop-blur-md hover:bg-primary-600/70 transition-colors shadow-lg border border-white/10`,title:Wi?" ":" /",children:p.jsx(sA,{className:"w-5 h-5"})}),p.jsx("button",{onClick:Ih,className:"p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-green-600/70 transition-colors shadow-lg border border-white/10",title:" ",children:p.jsx(xD,{className:"w-5 h-5"})}),p.jsx("button",{onClick:Ji,className:"p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-green-600/70 transition-colors shadow-lg border border-white/10",title:" ",children:p.jsx(YI,{className:"w-5 h-5"})})]}),p.jsx("button",{onClick:()=>y(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:"",children:p.jsx(WI,{className:"w-5 h-5"})}),ji&&p.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:p.jsx("img",{src:ji,alt:"Object",className:"w-full h-full object-cover"})}),p.jsx("button",{onClick:lo,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:p.jsx("span",{className:"text-xs font-bold",children:""})})]})}),p.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),p.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx("input",{type:"text",value:$t,onChange:k=>bt(k.target.value),placeholder:"   ... (:     ,   )",disabled:b,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:k=>k.key==="Enter"&&!b&&ho()}),p.jsx(os,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),$t&&p.jsx("button",{onClick:()=>!b&&bt(""),disabled:b,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),p.jsxs("button",{ref:L,onClick:ho,disabled:b||!$t.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("span",{children:""}),p.jsx(os,{className:"w-4 h-4"})]})]})]}),p.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[p.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:" "}),p.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${b?"opacity-50 pointer-events-none":""}`,children:[fr.length===0?p.jsxs("div",{className:"text-center py-10 opacity-50",children:[p.jsx(os,{className:"w-8 h-8 mx-auto mb-2"}),p.jsx("p",{className:"text-xs",children:"  "})]}):fr.map(k=>p.jsxs("div",{onClick:()=>!b&&Oc(k),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[p.jsx("img",{src:k.thumbnailUrl||k.storageUrl||k.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),p.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[p.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:k.prompt||" "}),p.jsx("p",{className:"text-[10px] text-gray-400",children:Mc(k)})]})]},k.id)),Fi&&p.jsx("div",{className:"flex justify-center py-4",children:p.jsx(Kc,{className:"w-6 h-6 text-primary-400 animate-spin"})}),Bi&&!Fi&&fr.length>0&&p.jsx("button",{onClick:Le,disabled:b,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),i&&p.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[p.jsx(os,{className:"w-4 h-4 text-white flex-shrink-0"}),p.jsxs("span",{className:"text-sm font-medium",children:[p.jsx("span",{className:"md:inline block",children:"  ."}),p.jsx("span",{className:"hidden md:inline",children:" "}),p.jsx("span",{className:"md:inline block",children:"    "})]})]}),o&&p.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:()=>{a(!1),u(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},children:[p.jsx("div",{className:"absolute inset-0 bg-black/70"}),p.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-44 lg:bottom-32 w-[90%] max-w-[340px] bg-white text-gray-900 p-5 rounded-2xl shadow-2xl animate-bounce-in",dir:"rtl",onClick:k=>k.stopPropagation(),children:[p.jsx("div",{className:"absolute bottom-[-8px] left-1/2 -translate-x-1/2 w-0 h-0 border-solid border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"}),p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsx("h3",{className:"font-bold text-lg text-primary-600",children:" !  "}),p.jsx("button",{onClick:()=>{a(!1),u(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:p.jsx(Ps,{size:18})})]}),p.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:['     . : "    "  "  ".',p.jsx("br",{}),p.jsx("br",{})," ",p.jsx("strong",{children:":"}),'   ""      , ,  !']}),p.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary-50 rounded-xl mb-4",children:[p.jsx("span",{className:"text-2xl",children:""}),p.jsx("span",{className:"text-sm text-primary-700 font-medium",children:'       ""'})]}),p.jsx("button",{onClick:()=>{a(!1),u(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg",children:",  !"})]})]})]}),p.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:p.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[p.jsxs("div",{className:"relative",children:[ji&&p.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:p.jsx("img",{src:ji,alt:"Object",className:"w-full h-full object-cover"})}),p.jsx("button",{onClick:lo,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:p.jsx("span",{className:"text-xs font-bold",children:""})})]})}),p.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[p.jsx("input",{type:"text",value:$t,onChange:k=>bt(k.target.value),placeholder:" ?",disabled:b,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:k=>k.key==="Enter"&&!b&&ho()}),$t&&p.jsx("button",{onClick:()=>!b&&bt(""),disabled:b,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),p.jsx("button",{ref:U,onClick:ho,disabled:!$t.trim()||b,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:p.jsx(os,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{className:"flex justify-center gap-4 py-1",children:[p.jsxs("button",{ref:S,onClick:Lc,disabled:b,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:p.jsx(tE,{className:"w-6 h-6 text-blue-400"})}),p.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:" "})]}),p.jsxs("button",{ref:E,onClick:ao,disabled:b,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:`w-14 h-14 rounded-2xl ${Ee?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/40":"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-400/40"} flex items-center justify-center border active:scale-95 transition-transform shadow-lg shadow-green-500/20`,children:p.jsx(ZI,{className:`w-6 h-6 ${Ee?"text-primary-400":"text-green-400"}`})}),p.jsx("span",{className:`text-[10px] font-medium ${Ee?"text-primary-300":"text-green-300"}`,children:" "})]}),p.jsxs("button",{ref:T,onClick:()=>Pe(!0),disabled:b,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center border border-purple-400/40 active:scale-95 transition-transform shadow-lg shadow-purple-500/20",children:p.jsx(nE,{className:"w-6 h-6 text-purple-400"})}),p.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:" "})]}),p.jsxs("button",{onClick:()=>be(!0),disabled:b,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surfaceHighlight/40 flex items-center justify-center border border-white/20 active:scale-95 transition-transform",children:p.jsx(JI,{className:"w-6 h-6 text-textMuted"})}),p.jsx("span",{className:"text-[10px] text-textMuted font-medium",children:""})]})]}),sn&&p.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>be(!1),children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),p.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10",onClick:k=>k.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),p.jsx("button",{onClick:()=>be(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:p.jsx(Ps,{className:"w-5 h-5 text-white"})})]}),p.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:XI,label:"",action:()=>{R(!0),be(!1)}},{icon:eE,label:"",action:()=>{mn(!0),be(!1)}},{icon:KI,label:"",action:()=>{Xn(!0),be(!1)}},{icon:yn,label:" ",action:()=>{De(!0),be(!1)}},{icon:Vt,label:"",action:()=>{rn(!0),be(!1)}},{icon:za,label:"",action:()=>{re(!0),be(!1)}}].map((k,F)=>p.jsxs("button",{onClick:k.action,disabled:b,className:"flex flex-col items-center gap-2 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx(k.icon,{className:"w-7 h-7 text-primary-400"}),p.jsx("span",{className:"text-xs text-white font-medium",children:k.label})]},F))})]})]}),p.jsx("div",{className:"hidden",children:fr.length>0&&p.jsxs("div",{className:`pt-2 border-t border-white/5 ${b?"opacity-50 pointer-events-none":""}`,children:[p.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[" (",fr.length,")"]}),p.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:k=>{if(b)return;const{scrollLeft:F,scrollWidth:z,clientWidth:ae}=k.target;F+ae>=z-10&&Bi&&!$i&&Le()},children:[fr.map(k=>p.jsx("div",{onClick:()=>!b&&Oc(k),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:p.jsx("img",{src:k.thumbnailUrl||k.storageUrl||k.imageUrl,alt:"",className:"w-full h-full object-cover"})},k.id)),$i&&p.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:p.jsx(Kc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Bi&&!$i&&p.jsxs("button",{onClick:Le,disabled:b,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("span",{className:"text-[10px]",children:""}),p.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),m&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>y(!1)}),p.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[p.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[p.jsx(WI,{className:"w-5 h-5 text-primary-400"})," "]}),p.jsx("button",{onClick:()=>y(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:p.jsx("span",{className:"text-xl leading-none",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[fr.length===0?p.jsxs("div",{className:"text-center py-8 opacity-50",children:[p.jsx(os,{className:"w-6 h-6 mx-auto mb-2"}),p.jsx("p",{className:"text-xs text-gray-400",children:"  "})]}):fr.map(k=>p.jsxs("div",{onClick:()=>{b||(Oc(k),y(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[p.jsx("img",{src:k.thumbnailUrl||k.storageUrl||k.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:k.prompt||" "}),p.jsx("p",{className:"text-[10px] text-gray-400",children:Mc(k)})]})]},k.id)),Fi&&p.jsx("div",{className:"flex justify-center py-2",children:p.jsx(Kc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Bi&&!Fi&&fr.length>0&&p.jsx("button",{onClick:Le,disabled:b,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),oh&&p.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 animate-fade-in",onClick:gr,children:p.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh] w-full h-full flex items-center justify-center",children:[p.jsx("img",{src:_,alt:"Full size view",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",onClick:k=>k.stopPropagation()}),p.jsx("button",{onClick:gr,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all duration-200 backdrop-blur-md border border-white/10 hover:border-white/20",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full backdrop-blur-md text-sm border border-white/10",children:"   "})]})}),O&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),p.jsx("button",{onClick:()=>R(!1),className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(bh).map(k=>p.jsx("button",{onClick:()=>Ic(k),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${no===k?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:k},k))}),p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(jc=Ma[no])==null?void 0:jc.map((k,F)=>p.jsxs("button",{onClick:()=>xh(k),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[p.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:p.jsx("div",{className:"absolute inset-0",style:{backgroundColor:k.hex}})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:k.name}),p.jsx("div",{className:"text-[10px] text-gray-500",children:k.ral})]})]},F))})]})]})}),[{show:Vi,close:()=>mn(!1),title:"  ",options:ng,onSelect:Fc},{show:tn,close:()=>Xn(!1),title:"  ",options:Ah,onSelect:Sh},{show:oe,close:()=>Pe(!1),title:"  ",options:fo,onSelect:Fa}].map((k,F)=>k.show&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:k.title}),p.jsx("button",{onClick:k.close,className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:k.options.map((z,ae)=>p.jsxs("button",{onClick:()=>k.onSelect(z),className:"flex items-center p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group",children:[p.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform",children:""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300",children:z.name}),p.jsx("div",{className:"text-xs text-gray-400",children:z.value})]})]},ae))})})]})},F)),(we||nn||Y)&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[p.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-semibold text-white",children:we?" ":nn?" ":"  /"}),p.jsx("button",{onClick:()=>{De(!1),rn(!1),re(!1)},className:"text-textMuted hover:text-white p-2",children:p.jsx("span",{className:"text-2xl",children:""})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[p.jsx("p",{className:"text-center text-gray-400 mb-6",children:"    ."}),p.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[we&&yo.map((k,F)=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:k.title}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:k.items.map((z,ae)=>p.jsxs("button",{onClick:()=>{ja(z.description),De(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[p.jsxs("div",{className:"flex justify-between items-center w-full",children:[p.jsx("span",{className:"font-medium",children:z.name}),p.jsx(z.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:z.description})]},ae))})]},F)),nn&&Rh.map((k,F)=>p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:k.title}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:k.items.map((z,ae)=>p.jsxs("button",{onClick:()=>{ja(z.description),rn(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[p.jsxs("div",{className:"flex justify-between items-center w-full",children:[p.jsx("span",{className:"font-medium",children:z.name}),p.jsx(z.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:z.description})]},ae))})]},F)),Y&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("button",{onClick:()=>po("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"   "}),p.jsx(za,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>po("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"  "}),p.jsx(za,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>po("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"   "}),p.jsx(za,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),p.jsxs("button",{onClick:()=>po("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[p.jsx("span",{children:"  "}),p.jsx(za,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),bc&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl",children:[p.jsx("button",{onClick:()=>zi(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white",children:""}),p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"flex justify-center mb-6",children:p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),p.jsxs("h1",{className:"relative text-3xl sm:text-4xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",p.jsx("span",{className:"text-xl sm:text-2xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),p.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:pr==="login"?" ":"  "}),p.jsx("p",{className:"text-sm text-gray-400",children:"        ' "})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{type:"email",placeholder:"",value:gn,onChange:k=>Ea(k.target.value),className:"input-glass w-full"}),p.jsx("input",{type:"password",placeholder:"",value:Cn,onChange:k=>Hi(k.target.value),className:"input-glass w-full"}),pr==="signup"&&p.jsx("input",{type:"password",placeholder:" ",value:Ta,onChange:k=>Or(k.target.value),className:"input-glass w-full"}),p.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:["   ",p.jsx("a",{href:"/eula.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "}),"",p.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "})]}),p.jsx("button",{onClick:co,disabled:lh,className:"btn-primary w-full py-3 text-lg mt-4",children:lh?p.jsx(Kc,{className:"w-6 h-6 animate-spin mx-auto"}):pr==="login"?"":""}),p.jsxs("div",{className:"flex justify-between items-center mt-6 text-sm",children:[p.jsx("button",{onClick:()=>qi(pr==="login"?"signup":"login"),className:"text-primary-300 hover:text-primary-200",children:pr==="login"?"  ? ":"  ? "}),pr==="login"&&p.jsx("button",{onClick:uo,className:"text-gray-400 hover:text-white",children:" ?"})]})]})]})}),Wm&&p.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:p.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),p.jsx("p",{className:"text-gray-400 mb-6",children:"    ?"}),p.jsxs("div",{className:"flex gap-3 justify-center",children:[p.jsx("button",{onClick:()=>Gi(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:""}),p.jsx("button",{onClick:Vc,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),p.jsx("input",{ref:Qi,type:"file",accept:"image/*",onChange:vh,className:"hidden"}),p.jsx("input",{ref:Mr,type:"file",accept:"image/*",onChange:Zm,className:"hidden"}),p.jsx(H1,{isOpen:ph,onClose:()=>mr(!1),onShowPricing:Fr,userSubscription:dt,currentUsage:er,limit:Zn}),p.jsx(j$,{isOpen:mh,onClose:()=>Pa(!1),subscriptionName:ah[dt]}),fh&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:p.jsx($a,{size:32})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),p.jsxs("p",{className:"text-gray-300",children:["  ,   ",p.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),p.jsx("button",{onClick:()=>{ka(!1),qi("signup"),zi(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),p.jsx("button",{onClick:()=>ka(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),hh&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:p.jsx(Cg,{size:32})}),p.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" "}),p.jsxs("p",{className:"text-gray-300",children:["       .",p.jsx("br",{}),"   ?"]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>{Sc(!1),Ra(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:" "}),p.jsx("button",{onClick:()=>{Sc(!1),zi(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),Aa&&p.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:p.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[p.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[p.jsx("button",{onClick:()=>Nn(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent",children:p.jsx("span",{className:"text-2xl leading-none",children:""})}),p.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:" "}),p.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:"   "}),p.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:"         .       ."})]}),p.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 scrollbar-custom",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-6 flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-white",children:"15"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"40  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"   "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:" "})]})]}),p.jsx("button",{onClick:()=>Ki("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:dt===1,className:`w-full py-3 rounded-xl font-medium border block text-center ${dt===1?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10"}`,children:dt===1?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx($a,{className:"w-5 h-5"}),"  "]}):" "})]})]}),p.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[p.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:" "}),p.jsxs("div",{className:"mb-4 mt-2",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"25"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),p.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 33%  "})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{className:"font-medium",children:"100  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:" "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]})]}),p.jsx("button",{onClick:()=>Ki("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:dt===2,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${dt===2?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30"}`,children:dt===2?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx($a,{className:"w-5 h-5"}),"  "]}):" "})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),p.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-6 flex flex-col h-full",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-3xl font-bold text-white",children:"39"}),p.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),p.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 48%  "})]}),p.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"200  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  '"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"  "})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[p.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),p.jsx("span",{children:"   "})]})]}),p.jsx("button",{onClick:()=>Ki("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:dt===3,className:`w-full py-3 rounded-xl font-medium border block text-center ${dt===3?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10"}`,children:dt===3?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx($a,{className:"w-5 h-5"}),"  "]}):" "})]})]})]})}),p.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:"     .     . .."})]})}),t&&p.jsx(M$,{step:n,steps:jr,onNext:Km,onSkip:Qm,onComplete:Dc}),Oa&&Ce&&p.jsx(F$,{color:Ce,onClose:()=>Va(!1),onApply:yr}),p.jsx(H1,{isOpen:ph,onClose:()=>mr(!1),onShowPricing:Fr,userSubscription:dt,currentUsage:er,limit:Zn}),gh&&p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[p.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[p.jsx(QI,{className:"w-5 h-5 text-primary-400"})," "]}),p.jsx("button",{onClick:()=>{Ca(!1),zt("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:p.jsx("span",{className:"text-2xl leading-none",children:""})})]}),p.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  !      ."})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[Vr&&p.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:Vr}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("input",{type:"tel",value:Na,onChange:k=>Da(k.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("input",{type:"email",value:si,onChange:k=>Rc(k.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),p.jsx("textarea",{value:La,onChange:k=>yh(k.target.value),placeholder:"   ...",rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:"rtl"})]}),p.jsx("p",{className:"text-xs text-gray-500 text-center",children:"*      "}),p.jsx("button",{onClick:Ym,disabled:_h,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:_h?p.jsxs(p.Fragment,{children:[p.jsx(Kc,{className:"w-5 h-5 animate-spin"}),"..."]}):p.jsxs(p.Fragment,{children:[p.jsx(QI,{className:"w-5 h-5"})," "]})})]})]})}),wh&&p.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[p.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[p.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:p.jsx($a,{className:"w-10 h-10 text-emerald-400"})}),p.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:" !"})]}),p.jsxs("div",{className:"p-6 text-center",children:[p.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:["   .",p.jsx("br",{}),"   ."]}),p.jsx("button",{onClick:()=>Pc(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:""})]})]})})]})}uy.createRoot(document.getElementById("root")).render(p.jsx(cN.StrictMode,{children:p.jsx(B$,{})}));export{N4 as $,Q$ as A,dz as B,yz as C,s3 as D,sd as E,us as F,hs as G,X$ as H,bM as I,Az as J,Uz as K,jE as L,eF as M,YM as N,bi as O,jo as P,wz as Q,kz as R,h_ as S,XF as T,cz as U,I4 as V,Cz as W,Vz as X,jz as Y,Sz as Z,L4 as _,Fd as a,Jo as a$,Z$ as a0,hM as a1,E4 as a2,Nz as a3,Oz as a4,Fz as a5,SM as a6,bz as a7,hz as a8,nz as a9,Zr as aA,Ne as aB,Gn as aC,ga as aD,ya as aE,Me as aF,j as aG,ei as aH,A6 as aI,Y6 as aJ,Dt as aK,_c as aL,Zd as aM,Uf as aN,Gm as aO,eh as aP,$m as aQ,Iv as aR,qn as aS,zm as aT,vs as aU,Ae as aV,Q6 as aW,Pr as aX,W6 as aY,ww as aZ,ot as a_,lz as aa,_z as ab,v4 as ac,ow as ad,tz as ae,az as af,uz as ag,Pz as ah,Lz as ai,Mz as aj,Tz as ak,ez as al,Ez as am,mz as an,gz as ao,Dz as ap,pz as aq,Iz as ar,vz as as,fz as at,sz as au,CP as av,wd as aw,k6 as ax,Fn as ay,Kz as az,Md as b,jf as b$,W as b0,zz as b1,a3 as b2,Je as b3,W8 as b4,fe as b5,$z as b6,H8 as b7,q8 as b8,qz as b9,c8 as bA,l8 as bB,it as bC,nh as bD,F6 as bE,A8 as bF,x1 as bG,y8 as bH,_8 as bI,B_ as bJ,w8 as bK,v8 as bL,S6 as bM,B8 as bN,M8 as bO,Qz as bP,ry as bQ,o8 as bR,E1 as bS,S8 as bT,k8 as bU,R8 as bV,R6 as bW,Ed as bX,b8 as bY,x8 as bZ,i8 as b_,hr as ba,y3 as bb,T8 as bc,h8 as bd,f8 as be,s8 as bf,V8 as bg,O8 as bh,d8 as bi,Xz as bj,Jd as bk,Hz as bl,x6 as bm,V6 as bn,G8 as bo,E8 as bp,D8 as bq,t8 as br,z8 as bs,Sr as bt,r8 as bu,p8 as bv,Yz as bw,Jz as bx,e8 as by,$8 as bz,J$ as c,P8 as c0,C8 as c1,q6 as c2,Mf as c3,yP as c4,m8 as c5,Wz as c6,N8 as c7,L8 as c8,th as c9,U8 as ca,Bz as cb,g8 as cc,O6 as cd,a8 as ce,u8 as cf,n8 as cg,I8 as ch,F8 as ci,Zz as cj,Ff as ck,j8 as cl,WC as cm,z$ as cn,ha as d,q$ as e,ds as f,bf as g,K$ as h,xl as i,JF as j,H$ as k,W$ as l,yw as m,fs as n,iz as o,D4 as p,Rz as q,B4 as r,YF as s,MS as t,b4 as u,rz as v,XM as w,oz as x,Y$ as y,xz as z};
