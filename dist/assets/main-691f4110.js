var AC=Object.defineProperty;var SC=(t,e,n)=>e in t?AC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Av=(t,e,n)=>(SC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V1={exports:{}},Um={},O1={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=Symbol.for("react.element"),kC=Symbol.for("react.portal"),PC=Symbol.for("react.fragment"),CC=Symbol.for("react.strict_mode"),NC=Symbol.for("react.profiler"),DC=Symbol.for("react.provider"),LC=Symbol.for("react.context"),VC=Symbol.for("react.forward_ref"),OC=Symbol.for("react.suspense"),MC=Symbol.for("react.memo"),jC=Symbol.for("react.lazy"),Sv=Symbol.iterator;function FC(t){return t===null||typeof t!="object"?null:(t=Sv&&t[Sv]||t["@@iterator"],typeof t=="function"?t:null)}var M1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j1=Object.assign,F1={};function ec(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||M1}ec.prototype.isReactComponent={};ec.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ec.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U1(){}U1.prototype=ec.prototype;function U0(t,e,n){this.props=t,this.context=e,this.refs=F1,this.updater=n||M1}var B0=U0.prototype=new U1;B0.constructor=U0;j1(B0,ec.prototype);B0.isPureReactComponent=!0;var Rv=Array.isArray,B1=Object.prototype.hasOwnProperty,z0={current:null},z1={key:!0,ref:!0,__self:!0,__source:!0};function $1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)B1.call(e,r)&&!z1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Rd,type:t,key:s,ref:o,props:i,_owner:z0.current}}function UC(t,e){return{$$typeof:Rd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rd}function BC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kv=/\/+/g;function Xp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BC(""+t.key):e.toString(36)}function lf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Rd:case kC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xp(o,0):r,Rv(i)?(n="",t!=null&&(n=t.replace(kv,"$&/")+"/"),lf(i,e,n,"",function(u){return u})):i!=null&&($0(i)&&(i=UC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Rv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xp(s,a);o+=lf(s,e,n,l,i)}else if(l=FC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xp(s,a++),o+=lf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kh(t,e,n){if(t==null)return t;var r=[],i=0;return lf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},cf={transition:null},$C={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:cf,ReactCurrentOwner:z0};function q1(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:kh,forEach:function(t,e,n){kh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kh(t,function(){e++}),e},toArray:function(t){return kh(t,function(e){return e})||[]},only:function(t){if(!$0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=ec;fe.Fragment=PC;fe.Profiler=NC;fe.PureComponent=U0;fe.StrictMode=CC;fe.Suspense=OC;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;fe.act=q1;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=j1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=z0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)B1.call(e,l)&&!z1.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Rd,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:LC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DC,_context:t},t.Consumer=t};fe.createElement=$1;fe.createFactory=function(t){var e=$1.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:VC,render:t}};fe.isValidElement=$0;fe.lazy=function(t){return{$$typeof:jC,_payload:{_status:-1,_result:t},_init:zC}};fe.memo=function(t,e){return{$$typeof:MC,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=cf.transition;cf.transition={};try{t()}finally{cf.transition=e}};fe.unstable_act=q1;fe.useCallback=function(t,e){return rn.current.useCallback(t,e)};fe.useContext=function(t){return rn.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};fe.useEffect=function(t,e){return rn.current.useEffect(t,e)};fe.useId=function(){return rn.current.useId()};fe.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return rn.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};fe.useRef=function(t){return rn.current.useRef(t)};fe.useState=function(t){return rn.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return rn.current.useTransition()};fe.version="18.3.1";O1.exports=fe;var U=O1.exports;const qC=RC(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC=U,GC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),KC=Object.prototype.hasOwnProperty,QC=HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YC={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KC.call(e,r)&&!YC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:GC,type:t,key:s,ref:o,props:i,_owner:QC.current}}Um.Fragment=WC;Um.jsx=H1;Um.jsxs=H1;V1.exports=Um;var d=V1.exports,ry={},G1={exports:{}},On={},W1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,ie){var ae=Y.length;Y.push(ie);e:for(;0<ae;){var Re=ae-1>>>1,Ie=Y[Re];if(0<i(Ie,ie))Y[Re]=ie,Y[ae]=Ie,ae=Re;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ie=Y[0],ae=Y.pop();if(ae!==ie){Y[0]=ae;e:for(var Re=0,Ie=Y.length,De=Ie>>>1;Re<De;){var Wt=2*(Re+1)-1,Kt=Y[Wt],Qt=Wt+1,Dt=Y[Qt];if(0>i(Kt,ae))Qt<Ie&&0>i(Dt,Kt)?(Y[Re]=Dt,Y[Qt]=ae,Re=Qt):(Y[Re]=Kt,Y[Wt]=ae,Re=Wt);else if(Qt<Ie&&0>i(Dt,ae))Y[Re]=Dt,Y[Qt]=ae,Re=Qt;else break e}}return ie}function i(Y,ie){var ae=Y.sortIndex-ie.sortIndex;return ae!==0?ae:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,_=!1,I=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Y){for(var ie=n(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=Y)r(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(u)}}function V(Y){if(A=!1,x(Y),!I)if(n(l)!==null)I=!0,Li(z);else{var ie=n(u);ie!==null&&on(V,ie.startTime-Y)}}function z(Y,ie){I=!1,A&&(A=!1,E(w),w=-1),_=!0;var ae=p;try{for(x(ie),f=n(l);f!==null&&(!(f.expirationTime>ie)||Y&&!N());){var Re=f.callback;if(typeof Re=="function"){f.callback=null,p=f.priorityLevel;var Ie=Re(f.expirationTime<=ie);ie=t.unstable_now(),typeof Ie=="function"?f.callback=Ie:f===n(l)&&r(l),x(ie)}else r(l);f=n(l)}if(f!==null)var De=!0;else{var Wt=n(u);Wt!==null&&on(V,Wt.startTime-ie),De=!1}return De}finally{f=null,p=ae,_=!1}}var H=!1,b=null,w=-1,S=5,R=-1;function N(){return!(t.unstable_now()-R<S)}function P(){if(b!==null){var Y=t.unstable_now();R=Y;var ie=!0;try{ie=b(!0,Y)}finally{ie?k():(H=!1,b=null)}}else H=!1}var k;if(typeof v=="function")k=function(){v(P)};else if(typeof MessageChannel<"u"){var Gt=new MessageChannel,Fn=Gt.port2;Gt.port1.onmessage=P,k=function(){Fn.postMessage(null)}}else k=function(){D(P,0)};function Li(Y){b=Y,H||(H=!0,k())}function on(Y,ie){w=D(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Li(z))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var ae=p;p=ie;try{return Y()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ae=p;p=Y;try{return ie()}finally{p=ae}},t.unstable_scheduleCallback=function(Y,ie,ae){var Re=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Re+ae:Re):ae=Re,Y){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=ae+Ie,Y={id:h++,callback:ie,priorityLevel:Y,startTime:ae,expirationTime:Ie,sortIndex:-1},ae>Re?(Y.sortIndex=ae,e(u,Y),n(l)===null&&Y===n(u)&&(A?(E(w),w=-1):A=!0,on(V,ae-Re))):(Y.sortIndex=Ie,e(l,Y),I||_||(I=!0,Li(z))),Y},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Y){var ie=p;return function(){var ae=p;p=ie;try{return Y.apply(this,arguments)}finally{p=ae}}}})(K1);W1.exports=K1;var JC=W1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=U,Dn=JC;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,Uu={};function la(t,e){Tl(t,e),Tl(t+"Capture",e)}function Tl(t,e){for(Uu[t]=e,t=0;t<e.length;t++)Q1.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iy=Object.prototype.hasOwnProperty,ZC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pv={},Cv={};function eN(t){return iy.call(Cv,t)?!0:iy.call(Pv,t)?!1:ZC.test(t)?Cv[t]=!0:(Pv[t]=!0,!1)}function tN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nN(t,e,n,r){if(e===null||typeof e>"u"||tN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var q0=/[\-:]([a-z])/g;function H0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(q0,H0);Nt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(q0,H0);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(q0,H0);Nt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function G0(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nN(e,n,i,r)&&(n=null),r||i===null?eN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ai=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),el=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),sy=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),J1=Symbol.for("react.context"),K0=Symbol.for("react.forward_ref"),oy=Symbol.for("react.suspense"),ay=Symbol.for("react.suspense_list"),Q0=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),X1=Symbol.for("react.offscreen"),Nv=Symbol.iterator;function $c(t){return t===null||typeof t!="object"?null:(t=Nv&&t[Nv]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Zp;function su(t){if(Zp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zp=e&&e[1]||""}return`
`+Zp+t}var eg=!1;function tg(t,e){if(!t||eg)return"";eg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{eg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?su(t):""}function rN(t){switch(t.tag){case 5:return su(t.type);case 16:return su("Lazy");case 13:return su("Suspense");case 19:return su("SuspenseList");case 0:case 2:case 15:return t=tg(t.type,!1),t;case 11:return t=tg(t.type.render,!1),t;case 1:return t=tg(t.type,!0),t;default:return""}}function ly(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tl:return"Fragment";case el:return"Portal";case sy:return"Profiler";case W0:return"StrictMode";case oy:return"Suspense";case ay:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case J1:return(t.displayName||"Context")+".Consumer";case Y1:return(t._context.displayName||"Context")+".Provider";case K0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q0:return e=t.displayName||null,e!==null?e:ly(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return ly(t(e))}catch{}}return null}function iN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ly(e);case 8:return e===W0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sN(t){var e=Z1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ch(t){t._valueTracker||(t._valueTracker=sN(t))}function eb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cy(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Dv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tb(t,e){e=e.checked,e!=null&&G0(t,"checked",e,!1)}function uy(t,e){tb(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dy(t,e.type,n):e.hasOwnProperty("defaultValue")&&dy(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dy(t,e,n){(e!=="number"||qf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ou=Array.isArray;function hl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function hy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(ou(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function nb(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nh,ib=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nh=Nh||document.createElement("div"),Nh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oN=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(t){oN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gu[e]=gu[t]})});function sb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gu.hasOwnProperty(t)&&gu[t]?(""+e).trim():e+"px"}function ob(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var aN=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function my(t,e){if(e){if(aN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function py(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gy=null;function Y0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yy=null,fl=null,ml=null;function Mv(t){if(t=Cd(t)){if(typeof yy!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Hm(e),yy(t.stateNode,t.type,e))}}function ab(t){fl?ml?ml.push(t):ml=[t]:fl=t}function lb(){if(fl){var t=fl,e=ml;if(ml=fl=null,Mv(t),e)for(t=0;t<e.length;t++)Mv(e[t])}}function cb(t,e){return t(e)}function ub(){}var ng=!1;function db(t,e,n){if(ng)return t(e,n);ng=!0;try{return cb(t,e,n)}finally{ng=!1,(fl!==null||ml!==null)&&(ub(),lb())}}function zu(t,e){var n=t.stateNode;if(n===null)return null;var r=Hm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var _y=!1;if(gi)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){_y=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{_y=!1}function lN(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var yu=!1,Hf=null,Gf=!1,wy=null,cN={onError:function(t){yu=!0,Hf=t}};function uN(t,e,n,r,i,s,o,a,l){yu=!1,Hf=null,lN.apply(cN,arguments)}function dN(t,e,n,r,i,s,o,a,l){if(uN.apply(this,arguments),yu){if(yu){var u=Hf;yu=!1,Hf=null}else throw Error(G(198));Gf||(Gf=!0,wy=u)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jv(t){if(ca(t)!==t)throw Error(G(188))}function hN(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jv(i),t;if(s===r)return jv(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function fb(t){return t=hN(t),t!==null?mb(t):null}function mb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mb(t);if(e!==null)return e;t=t.sibling}return null}var pb=Dn.unstable_scheduleCallback,Fv=Dn.unstable_cancelCallback,fN=Dn.unstable_shouldYield,mN=Dn.unstable_requestPaint,st=Dn.unstable_now,pN=Dn.unstable_getCurrentPriorityLevel,J0=Dn.unstable_ImmediatePriority,gb=Dn.unstable_UserBlockingPriority,Wf=Dn.unstable_NormalPriority,gN=Dn.unstable_LowPriority,yb=Dn.unstable_IdlePriority,Bm=null,Wr=null;function yN(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Bm,t,void 0,(t.current.flags&128)===128)}catch{}}var xr=Math.clz32?Math.clz32:vN,_N=Math.log,wN=Math.LN2;function vN(t){return t>>>=0,t===0?32:31-(_N(t)/wN|0)|0}var Dh=64,Lh=4194304;function au(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=au(a):(s&=o,s!==0&&(r=au(s)))}else o=n&~i,o!==0?r=au(o):s!==0&&(r=au(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xr(e),i=1<<n,r|=t[n],e&=~i;return r}function IN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=IN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _b(){var t=Dh;return Dh<<=1,!(Dh&4194240)&&(Dh=64),t}function rg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xr(e),t[e]=n}function xN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function X0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function wb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vb,Z0,Ib,Eb,xb,Iy=!1,Vh=[],Is=null,Es=null,xs=null,$u=new Map,qu=new Map,as=[],bN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uv(t,e){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":$u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(e.pointerId)}}function Hc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Cd(e),e!==null&&Z0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function TN(t,e,n,r,i){switch(e){case"focusin":return Is=Hc(Is,t,e,n,r,i),!0;case"dragenter":return Es=Hc(Es,t,e,n,r,i),!0;case"mouseover":return xs=Hc(xs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return $u.set(s,Hc($u.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qu.set(s,Hc(qu.get(s)||null,t,e,n,r,i)),!0}return!1}function bb(t){var e=Co(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=hb(n),e!==null){t.blockedOn=e,xb(t.priority,function(){Ib(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ey(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gy=r,n.target.dispatchEvent(r),gy=null}else return e=Cd(n),e!==null&&Z0(e),t.blockedOn=n,!1;e.shift()}return!0}function Bv(t,e,n){uf(t)&&n.delete(e)}function AN(){Iy=!1,Is!==null&&uf(Is)&&(Is=null),Es!==null&&uf(Es)&&(Es=null),xs!==null&&uf(xs)&&(xs=null),$u.forEach(Bv),qu.forEach(Bv)}function Gc(t,e){t.blockedOn===e&&(t.blockedOn=null,Iy||(Iy=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,AN)))}function Hu(t){function e(i){return Gc(i,t)}if(0<Vh.length){Gc(Vh[0],t);for(var n=1;n<Vh.length;n++){var r=Vh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Is!==null&&Gc(Is,t),Es!==null&&Gc(Es,t),xs!==null&&Gc(xs,t),$u.forEach(e),qu.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)bb(n),n.blockedOn===null&&as.shift()}var pl=Ai.ReactCurrentBatchConfig,Qf=!0;function SN(t,e,n,r){var i=Te,s=pl.transition;pl.transition=null;try{Te=1,e_(t,e,n,r)}finally{Te=i,pl.transition=s}}function RN(t,e,n,r){var i=Te,s=pl.transition;pl.transition=null;try{Te=4,e_(t,e,n,r)}finally{Te=i,pl.transition=s}}function e_(t,e,n,r){if(Qf){var i=Ey(t,e,n,r);if(i===null)fg(t,e,r,Yf,n),Uv(t,r);else if(TN(i,t,e,n,r))r.stopPropagation();else if(Uv(t,r),e&4&&-1<bN.indexOf(t)){for(;i!==null;){var s=Cd(i);if(s!==null&&vb(s),s=Ey(t,e,n,r),s===null&&fg(t,e,r,Yf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fg(t,e,r,null,n)}}var Yf=null;function Ey(t,e,n,r){if(Yf=null,t=Y0(r),t=Co(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yf=t,null}function Tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pN()){case J0:return 1;case gb:return 4;case Wf:case gN:return 16;case yb:return 536870912;default:return 16}default:return 16}}var gs=null,t_=null,df=null;function Ab(){if(df)return df;var t,e=t_,n=e.length,r,i="value"in gs?gs.value:gs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return df=i.slice(t,1<r?1-r:void 0)}function hf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oh(){return!0}function zv(){return!1}function Mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oh:zv,this.isPropagationStopped=zv,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oh)},persist:function(){},isPersistent:Oh}),e}var tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n_=Mn(tc),Pd=Je({},tc,{view:0,detail:0}),kN=Mn(Pd),ig,sg,Wc,zm=Je({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wc&&(Wc&&t.type==="mousemove"?(ig=t.screenX-Wc.screenX,sg=t.screenY-Wc.screenY):sg=ig=0,Wc=t),ig)},movementY:function(t){return"movementY"in t?t.movementY:sg}}),$v=Mn(zm),PN=Je({},zm,{dataTransfer:0}),CN=Mn(PN),NN=Je({},Pd,{relatedTarget:0}),og=Mn(NN),DN=Je({},tc,{animationName:0,elapsedTime:0,pseudoElement:0}),LN=Mn(DN),VN=Je({},tc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ON=Mn(VN),MN=Je({},tc,{data:0}),qv=Mn(MN),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UN[t])?!!e[t]:!1}function r_(){return BN}var zN=Je({},Pd,{key:function(t){if(t.key){var e=jN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r_,charCode:function(t){return t.type==="keypress"?hf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$N=Mn(zN),qN=Je({},zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=Mn(qN),HN=Je({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r_}),GN=Mn(HN),WN=Je({},tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),KN=Mn(WN),QN=Je({},zm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YN=Mn(QN),JN=[9,13,27,32],i_=gi&&"CompositionEvent"in window,_u=null;gi&&"documentMode"in document&&(_u=document.documentMode);var XN=gi&&"TextEvent"in window&&!_u,Sb=gi&&(!i_||_u&&8<_u&&11>=_u),Gv=String.fromCharCode(32),Wv=!1;function Rb(t,e){switch(t){case"keyup":return JN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nl=!1;function ZN(t,e){switch(t){case"compositionend":return kb(e);case"keypress":return e.which!==32?null:(Wv=!0,Gv);case"textInput":return t=e.data,t===Gv&&Wv?null:t;default:return null}}function e2(t,e){if(nl)return t==="compositionend"||!i_&&Rb(t,e)?(t=Ab(),df=t_=gs=null,nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sb&&e.locale!=="ko"?null:e.data;default:return null}}var t2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t2[t.type]:e==="textarea"}function Pb(t,e,n,r){ab(r),e=Jf(e,"onChange"),0<e.length&&(n=new n_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wu=null,Gu=null;function n2(t){Bb(t,0)}function $m(t){var e=sl(t);if(eb(e))return t}function r2(t,e){if(t==="change")return e}var Cb=!1;if(gi){var ag;if(gi){var lg="oninput"in document;if(!lg){var Qv=document.createElement("div");Qv.setAttribute("oninput","return;"),lg=typeof Qv.oninput=="function"}ag=lg}else ag=!1;Cb=ag&&(!document.documentMode||9<document.documentMode)}function Yv(){wu&&(wu.detachEvent("onpropertychange",Nb),Gu=wu=null)}function Nb(t){if(t.propertyName==="value"&&$m(Gu)){var e=[];Pb(e,Gu,t,Y0(t)),db(n2,e)}}function i2(t,e,n){t==="focusin"?(Yv(),wu=e,Gu=n,wu.attachEvent("onpropertychange",Nb)):t==="focusout"&&Yv()}function s2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $m(Gu)}function o2(t,e){if(t==="click")return $m(e)}function a2(t,e){if(t==="input"||t==="change")return $m(e)}function l2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:l2;function Wu(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!iy.call(e,i)||!Ar(t[i],e[i]))return!1}return!0}function Jv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xv(t,e){var n=Jv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jv(n)}}function Db(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Db(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lb(){for(var t=window,e=qf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qf(t.document)}return e}function s_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c2(t){var e=Lb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Db(n.ownerDocument.documentElement,n)){if(r!==null&&s_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Xv(n,s);var o=Xv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var u2=gi&&"documentMode"in document&&11>=document.documentMode,rl=null,xy=null,vu=null,by=!1;function Zv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;by||rl==null||rl!==qf(r)||(r=rl,"selectionStart"in r&&s_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vu&&Wu(vu,r)||(vu=r,r=Jf(xy,"onSelect"),0<r.length&&(e=new n_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rl)))}function Mh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var il={animationend:Mh("Animation","AnimationEnd"),animationiteration:Mh("Animation","AnimationIteration"),animationstart:Mh("Animation","AnimationStart"),transitionend:Mh("Transition","TransitionEnd")},cg={},Vb={};gi&&(Vb=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function qm(t){if(cg[t])return cg[t];if(!il[t])return t;var e=il[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vb)return cg[t]=e[n];return t}var Ob=qm("animationend"),Mb=qm("animationiteration"),jb=qm("animationstart"),Fb=qm("transitionend"),Ub=new Map,eI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){Ub.set(t,e),la(e,[t])}for(var ug=0;ug<eI.length;ug++){var dg=eI[ug],d2=dg.toLowerCase(),h2=dg[0].toUpperCase()+dg.slice(1);qs(d2,"on"+h2)}qs(Ob,"onAnimationEnd");qs(Mb,"onAnimationIteration");qs(jb,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(Fb,"onTransitionEnd");Tl("onMouseEnter",["mouseout","mouseover"]);Tl("onMouseLeave",["mouseout","mouseover"]);Tl("onPointerEnter",["pointerout","pointerover"]);Tl("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f2=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function tI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dN(r,e,void 0,t),t.currentTarget=null}function Bb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;tI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;tI(i,a,u),s=l}}}if(Gf)throw t=wy,Gf=!1,wy=null,t}function Me(t,e){var n=e[ky];n===void 0&&(n=e[ky]=new Set);var r=t+"__bubble";n.has(r)||(zb(e,t,2,!1),n.add(r))}function hg(t,e,n){var r=0;e&&(r|=4),zb(n,t,r,e)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Ku(t){if(!t[jh]){t[jh]=!0,Q1.forEach(function(n){n!=="selectionchange"&&(f2.has(n)||hg(n,!1,t),hg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jh]||(e[jh]=!0,hg("selectionchange",!1,e))}}function zb(t,e,n,r){switch(Tb(e)){case 1:var i=SN;break;case 4:i=RN;break;default:i=e_}n=i.bind(null,e,n,t),i=void 0,!_y||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Co(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}db(function(){var u=s,h=Y0(n),f=[];e:{var p=Ub.get(t);if(p!==void 0){var _=n_,I=t;switch(t){case"keypress":if(hf(n)===0)break e;case"keydown":case"keyup":_=$N;break;case"focusin":I="focus",_=og;break;case"focusout":I="blur",_=og;break;case"beforeblur":case"afterblur":_=og;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=$v;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=CN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=GN;break;case Ob:case Mb:case jb:_=LN;break;case Fb:_=KN;break;case"scroll":_=kN;break;case"wheel":_=YN;break;case"copy":case"cut":case"paste":_=ON;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Hv}var A=(e&4)!==0,D=!A&&t==="scroll",E=A?p!==null?p+"Capture":null:p;A=[];for(var v=u,x;v!==null;){x=v;var V=x.stateNode;if(x.tag===5&&V!==null&&(x=V,E!==null&&(V=zu(v,E),V!=null&&A.push(Qu(v,V,x)))),D)break;v=v.return}0<A.length&&(p=new _(p,I,null,n,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==gy&&(I=n.relatedTarget||n.fromElement)&&(Co(I)||I[yi]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=u,I=I?Co(I):null,I!==null&&(D=ca(I),I!==D||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=u),_!==I)){if(A=$v,V="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=Hv,V="onPointerLeave",E="onPointerEnter",v="pointer"),D=_==null?p:sl(_),x=I==null?p:sl(I),p=new A(V,v+"leave",_,n,h),p.target=D,p.relatedTarget=x,V=null,Co(h)===u&&(A=new A(E,v+"enter",I,n,h),A.target=x,A.relatedTarget=D,V=A),D=V,_&&I)t:{for(A=_,E=I,v=0,x=A;x;x=Ma(x))v++;for(x=0,V=E;V;V=Ma(V))x++;for(;0<v-x;)A=Ma(A),v--;for(;0<x-v;)E=Ma(E),x--;for(;v--;){if(A===E||E!==null&&A===E.alternate)break t;A=Ma(A),E=Ma(E)}A=null}else A=null;_!==null&&nI(f,p,_,A,!1),I!==null&&D!==null&&nI(f,D,I,A,!0)}}e:{if(p=u?sl(u):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var z=r2;else if(Kv(p))if(Cb)z=a2;else{z=s2;var H=i2}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=o2);if(z&&(z=z(t,u))){Pb(f,z,n,h);break e}H&&H(t,p,u),t==="focusout"&&(H=p._wrapperState)&&H.controlled&&p.type==="number"&&dy(p,"number",p.value)}switch(H=u?sl(u):window,t){case"focusin":(Kv(H)||H.contentEditable==="true")&&(rl=H,xy=u,vu=null);break;case"focusout":vu=xy=rl=null;break;case"mousedown":by=!0;break;case"contextmenu":case"mouseup":case"dragend":by=!1,Zv(f,n,h);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":Zv(f,n,h)}var b;if(i_)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else nl?Rb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Sb&&n.locale!=="ko"&&(nl||w!=="onCompositionStart"?w==="onCompositionEnd"&&nl&&(b=Ab()):(gs=h,t_="value"in gs?gs.value:gs.textContent,nl=!0)),H=Jf(u,w),0<H.length&&(w=new qv(w,t,null,n,h),f.push({event:w,listeners:H}),b?w.data=b:(b=kb(n),b!==null&&(w.data=b)))),(b=XN?ZN(t,n):e2(t,n))&&(u=Jf(u,"onBeforeInput"),0<u.length&&(h=new qv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=b))}Bb(f,e)})}function Qu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zu(t,n),s!=null&&r.unshift(Qu(t,s,i)),s=zu(t,e),s!=null&&r.push(Qu(t,s,i))),t=t.return}return r}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=zu(n,s),l!=null&&o.unshift(Qu(n,l,a))):i||(l=zu(n,s),l!=null&&o.push(Qu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var m2=/\r\n?/g,p2=/\u0000|\uFFFD/g;function rI(t){return(typeof t=="string"?t:""+t).replace(m2,`
`).replace(p2,"")}function Fh(t,e,n){if(e=rI(e),rI(t)!==e&&n)throw Error(G(425))}function Xf(){}var Ty=null,Ay=null;function Sy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ry=typeof setTimeout=="function"?setTimeout:void 0,g2=typeof clearTimeout=="function"?clearTimeout:void 0,iI=typeof Promise=="function"?Promise:void 0,y2=typeof queueMicrotask=="function"?queueMicrotask:typeof iI<"u"?function(t){return iI.resolve(null).then(t).catch(_2)}:Ry;function _2(t){setTimeout(function(){throw t})}function mg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hu(e)}function bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nc=Math.random().toString(36).slice(2),zr="__reactFiber$"+nc,Yu="__reactProps$"+nc,yi="__reactContainer$"+nc,ky="__reactEvents$"+nc,w2="__reactListeners$"+nc,v2="__reactHandles$"+nc;function Co(t){var e=t[zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yi]||n[zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sI(t);t!==null;){if(n=t[zr])return n;t=sI(t)}return e}t=n,n=t.parentNode}return null}function Cd(t){return t=t[zr]||t[yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Hm(t){return t[Yu]||null}var Py=[],ol=-1;function Hs(t){return{current:t}}function Fe(t){0>ol||(t.current=Py[ol],Py[ol]=null,ol--)}function Ve(t,e){ol++,Py[ol]=t.current,t.current=e}var Vs={},Ht=Hs(Vs),pn=Hs(!1),qo=Vs;function Al(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Zf(){Fe(pn),Fe(Ht)}function oI(t,e,n){if(Ht.current!==Vs)throw Error(G(168));Ve(Ht,e),Ve(pn,n)}function $b(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,iN(t)||"Unknown",i));return Je({},n,r)}function em(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,qo=Ht.current,Ve(Ht,t),Ve(pn,pn.current),!0}function aI(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=$b(t,e,qo),r.__reactInternalMemoizedMergedChildContext=t,Fe(pn),Fe(Ht),Ve(Ht,t)):Fe(pn),Ve(pn,n)}var oi=null,Gm=!1,pg=!1;function qb(t){oi===null?oi=[t]:oi.push(t)}function I2(t){Gm=!0,qb(t)}function Gs(){if(!pg&&oi!==null){pg=!0;var t=0,e=Te;try{var n=oi;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}oi=null,Gm=!1}catch(i){throw oi!==null&&(oi=oi.slice(t+1)),pb(J0,Gs),i}finally{Te=e,pg=!1}}return null}var al=[],ll=0,tm=null,nm=0,Kn=[],Qn=0,Ho=null,li=1,ci="";function vo(t,e){al[ll++]=nm,al[ll++]=tm,tm=t,nm=e}function Hb(t,e,n){Kn[Qn++]=li,Kn[Qn++]=ci,Kn[Qn++]=Ho,Ho=t;var r=li;t=ci;var i=32-xr(r)-1;r&=~(1<<i),n+=1;var s=32-xr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,li=1<<32-xr(e)+i|n<<i|r,ci=s+t}else li=1<<s|n<<i|r,ci=t}function o_(t){t.return!==null&&(vo(t,1),Hb(t,1,0))}function a_(t){for(;t===tm;)tm=al[--ll],al[ll]=null,nm=al[--ll],al[ll]=null;for(;t===Ho;)Ho=Kn[--Qn],Kn[Qn]=null,ci=Kn[--Qn],Kn[Qn]=null,li=Kn[--Qn],Kn[Qn]=null}var kn=null,Sn=null,qe=!1,Ir=null;function Gb(t,e){var n=Yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,Sn=bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ho!==null?{id:li,overflow:ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,Sn=null,!0):!1;default:return!1}}function Cy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ny(t){if(qe){var e=Sn;if(e){var n=e;if(!lI(t,e)){if(Cy(t))throw Error(G(418));e=bs(n.nextSibling);var r=kn;e&&lI(t,e)?Gb(r,n):(t.flags=t.flags&-4097|2,qe=!1,kn=t)}}else{if(Cy(t))throw Error(G(418));t.flags=t.flags&-4097|2,qe=!1,kn=t}}}function cI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function Uh(t){if(t!==kn)return!1;if(!qe)return cI(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sy(t.type,t.memoizedProps)),e&&(e=Sn)){if(Cy(t))throw Wb(),Error(G(418));for(;e;)Gb(t,e),e=bs(e.nextSibling)}if(cI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=bs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=kn?bs(t.stateNode.nextSibling):null;return!0}function Wb(){for(var t=Sn;t;)t=bs(t.nextSibling)}function Sl(){Sn=kn=null,qe=!1}function l_(t){Ir===null?Ir=[t]:Ir.push(t)}var E2=Ai.ReactCurrentBatchConfig;function Kc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Bh(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uI(t){var e=t._init;return e(t._payload)}function Kb(t){function e(E,v){if(t){var x=E.deletions;x===null?(E.deletions=[v],E.flags|=16):x.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function i(E,v){return E=Rs(E,v),E.index=0,E.sibling=null,E}function s(E,v,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<v?(E.flags|=2,v):x):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,x,V){return v===null||v.tag!==6?(v=Eg(x,E.mode,V),v.return=E,v):(v=i(v,x),v.return=E,v)}function l(E,v,x,V){var z=x.type;return z===tl?h(E,v,x.props.children,V,x.key):v!==null&&(v.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===is&&uI(z)===v.type)?(V=i(v,x.props),V.ref=Kc(E,v,x),V.return=E,V):(V=wf(x.type,x.key,x.props,null,E.mode,V),V.ref=Kc(E,v,x),V.return=E,V)}function u(E,v,x,V){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=xg(x,E.mode,V),v.return=E,v):(v=i(v,x.children||[]),v.return=E,v)}function h(E,v,x,V,z){return v===null||v.tag!==7?(v=jo(x,E.mode,V,z),v.return=E,v):(v=i(v,x),v.return=E,v)}function f(E,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Eg(""+v,E.mode,x),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ph:return x=wf(v.type,v.key,v.props,null,E.mode,x),x.ref=Kc(E,null,v),x.return=E,x;case el:return v=xg(v,E.mode,x),v.return=E,v;case is:var V=v._init;return f(E,V(v._payload),x)}if(ou(v)||$c(v))return v=jo(v,E.mode,x,null),v.return=E,v;Bh(E,v)}return null}function p(E,v,x,V){var z=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return z!==null?null:a(E,v,""+x,V);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:return x.key===z?l(E,v,x,V):null;case el:return x.key===z?u(E,v,x,V):null;case is:return z=x._init,p(E,v,z(x._payload),V)}if(ou(x)||$c(x))return z!==null?null:h(E,v,x,V,null);Bh(E,x)}return null}function _(E,v,x,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return E=E.get(x)||null,a(v,E,""+V,z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ph:return E=E.get(V.key===null?x:V.key)||null,l(v,E,V,z);case el:return E=E.get(V.key===null?x:V.key)||null,u(v,E,V,z);case is:var H=V._init;return _(E,v,x,H(V._payload),z)}if(ou(V)||$c(V))return E=E.get(x)||null,h(v,E,V,z,null);Bh(v,V)}return null}function I(E,v,x,V){for(var z=null,H=null,b=v,w=v=0,S=null;b!==null&&w<x.length;w++){b.index>w?(S=b,b=null):S=b.sibling;var R=p(E,b,x[w],V);if(R===null){b===null&&(b=S);break}t&&b&&R.alternate===null&&e(E,b),v=s(R,v,w),H===null?z=R:H.sibling=R,H=R,b=S}if(w===x.length)return n(E,b),qe&&vo(E,w),z;if(b===null){for(;w<x.length;w++)b=f(E,x[w],V),b!==null&&(v=s(b,v,w),H===null?z=b:H.sibling=b,H=b);return qe&&vo(E,w),z}for(b=r(E,b);w<x.length;w++)S=_(b,E,w,x[w],V),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?w:S.key),v=s(S,v,w),H===null?z=S:H.sibling=S,H=S);return t&&b.forEach(function(N){return e(E,N)}),qe&&vo(E,w),z}function A(E,v,x,V){var z=$c(x);if(typeof z!="function")throw Error(G(150));if(x=z.call(x),x==null)throw Error(G(151));for(var H=z=null,b=v,w=v=0,S=null,R=x.next();b!==null&&!R.done;w++,R=x.next()){b.index>w?(S=b,b=null):S=b.sibling;var N=p(E,b,R.value,V);if(N===null){b===null&&(b=S);break}t&&b&&N.alternate===null&&e(E,b),v=s(N,v,w),H===null?z=N:H.sibling=N,H=N,b=S}if(R.done)return n(E,b),qe&&vo(E,w),z;if(b===null){for(;!R.done;w++,R=x.next())R=f(E,R.value,V),R!==null&&(v=s(R,v,w),H===null?z=R:H.sibling=R,H=R);return qe&&vo(E,w),z}for(b=r(E,b);!R.done;w++,R=x.next())R=_(b,E,w,R.value,V),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?w:R.key),v=s(R,v,w),H===null?z=R:H.sibling=R,H=R);return t&&b.forEach(function(P){return e(E,P)}),qe&&vo(E,w),z}function D(E,v,x,V){if(typeof x=="object"&&x!==null&&x.type===tl&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ph:e:{for(var z=x.key,H=v;H!==null;){if(H.key===z){if(z=x.type,z===tl){if(H.tag===7){n(E,H.sibling),v=i(H,x.props.children),v.return=E,E=v;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===is&&uI(z)===H.type){n(E,H.sibling),v=i(H,x.props),v.ref=Kc(E,H,x),v.return=E,E=v;break e}n(E,H);break}else e(E,H);H=H.sibling}x.type===tl?(v=jo(x.props.children,E.mode,V,x.key),v.return=E,E=v):(V=wf(x.type,x.key,x.props,null,E.mode,V),V.ref=Kc(E,v,x),V.return=E,E=V)}return o(E);case el:e:{for(H=x.key;v!==null;){if(v.key===H)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(E,v.sibling),v=i(v,x.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=xg(x,E.mode,V),v.return=E,E=v}return o(E);case is:return H=x._init,D(E,v,H(x._payload),V)}if(ou(x))return I(E,v,x,V);if($c(x))return A(E,v,x,V);Bh(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(E,v.sibling),v=i(v,x),v.return=E,E=v):(n(E,v),v=Eg(x,E.mode,V),v.return=E,E=v),o(E)):n(E,v)}return D}var Rl=Kb(!0),Qb=Kb(!1),rm=Hs(null),im=null,cl=null,c_=null;function u_(){c_=cl=im=null}function d_(t){var e=rm.current;Fe(rm),t._currentValue=e}function Dy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function gl(t,e){im=t,c_=cl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(c_!==t)if(t={context:t,memoizedValue:e,next:null},cl===null){if(im===null)throw Error(G(308));cl=t,im.dependencies={lanes:0,firstContext:t}}else cl=cl.next=t;return e}var No=null;function h_(t){No===null?No=[t]:No.push(t)}function Yb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,h_(e)):(n.next=i.next,i.next=n),e.interleaved=n,_i(t,r)}function _i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function f_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_i(t,n)}return i=r.interleaved,i===null?(e.next=e,h_(r)):(e.next=i.next,i.next=e),r.interleaved=e,_i(t,n)}function ff(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X0(t,n)}}function dI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sm(t,e,n,r){var i=t.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,_=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,A=a;switch(p=e,_=n,A.tag){case 1:if(I=A.payload,typeof I=="function"){f=I.call(_,f,p);break e}f=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,p=typeof I=="function"?I.call(_,f,p):I,p==null)break e;f=Je({},f,p);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else _={eventTime:_,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=f):h=h.next=_,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wo|=o,t.lanes=o,t.memoizedState=f}}function hI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Nd={},Kr=Hs(Nd),Ju=Hs(Nd),Xu=Hs(Nd);function Do(t){if(t===Nd)throw Error(G(174));return t}function m_(t,e){switch(Ve(Xu,e),Ve(Ju,t),Ve(Kr,Nd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fy(e,t)}Fe(Kr),Ve(Kr,e)}function kl(){Fe(Kr),Fe(Ju),Fe(Xu)}function Xb(t){Do(Xu.current);var e=Do(Kr.current),n=fy(e,t.type);e!==n&&(Ve(Ju,t),Ve(Kr,n))}function p_(t){Ju.current===t&&(Fe(Kr),Fe(Ju))}var Qe=Hs(0);function om(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gg=[];function g_(){for(var t=0;t<gg.length;t++)gg[t]._workInProgressVersionPrimary=null;gg.length=0}var mf=Ai.ReactCurrentDispatcher,yg=Ai.ReactCurrentBatchConfig,Go=0,Ye=null,gt=null,It=null,am=!1,Iu=!1,Zu=0,x2=0;function Mt(){throw Error(G(321))}function y_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ar(t[n],e[n]))return!1;return!0}function __(t,e,n,r,i,s){if(Go=s,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mf.current=t===null||t.memoizedState===null?S2:R2,t=n(r,i),Iu){s=0;do{if(Iu=!1,Zu=0,25<=s)throw Error(G(301));s+=1,It=gt=null,e.updateQueue=null,mf.current=k2,t=n(r,i)}while(Iu)}if(mf.current=lm,e=gt!==null&&gt.next!==null,Go=0,It=gt=Ye=null,am=!1,e)throw Error(G(300));return t}function w_(){var t=Zu!==0;return Zu=0,t}function jr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ye.memoizedState=It=t:It=It.next=t,It}function tr(){if(gt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=It===null?Ye.memoizedState:It.next;if(e!==null)It=e,gt=t;else{if(t===null)throw Error(G(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},It===null?Ye.memoizedState=It=t:It=It.next=t}return It}function ed(t,e){return typeof e=="function"?e(t):e}function _g(t){var e=tr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Go&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ye.lanes|=h,Wo|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ar(r,e.memoizedState)||(un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ye.lanes|=s,Wo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wg(t){var e=tr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ar(s,e.memoizedState)||(un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Zb(){}function eT(t,e){var n=Ye,r=tr(),i=e(),s=!Ar(r.memoizedState,i);if(s&&(r.memoizedState=i,un=!0),r=r.queue,v_(rT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,td(9,nT.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(G(349));Go&30||tT(n,e,i)}return i}function tT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nT(t,e,n,r){e.value=n,e.getSnapshot=r,iT(e)&&sT(t)}function rT(t,e,n){return n(function(){iT(e)&&sT(t)})}function iT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ar(t,n)}catch{return!0}}function sT(t){var e=_i(t,1);e!==null&&br(e,t,1,-1)}function fI(t){var e=jr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:t},e.queue=t,t=t.dispatch=A2.bind(null,Ye,t),[e.memoizedState,t]}function td(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function oT(){return tr().memoizedState}function pf(t,e,n,r){var i=jr();Ye.flags|=t,i.memoizedState=td(1|e,n,void 0,r===void 0?null:r)}function Wm(t,e,n,r){var i=tr();r=r===void 0?null:r;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,r!==null&&y_(r,o.deps)){i.memoizedState=td(e,n,s,r);return}}Ye.flags|=t,i.memoizedState=td(1|e,n,s,r)}function mI(t,e){return pf(8390656,8,t,e)}function v_(t,e){return Wm(2048,8,t,e)}function aT(t,e){return Wm(4,2,t,e)}function lT(t,e){return Wm(4,4,t,e)}function cT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uT(t,e,n){return n=n!=null?n.concat([t]):null,Wm(4,4,cT.bind(null,e,t),n)}function I_(){}function dT(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&y_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hT(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&y_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fT(t,e,n){return Go&21?(Ar(n,e)||(n=_b(),Ye.lanes|=n,Wo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function b2(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=yg.transition;yg.transition={};try{t(!1),e()}finally{Te=n,yg.transition=r}}function mT(){return tr().memoizedState}function T2(t,e,n){var r=Ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pT(t))gT(e,n);else if(n=Yb(t,e,n,r),n!==null){var i=en();br(n,t,r,i),yT(n,e,r)}}function A2(t,e,n){var r=Ss(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pT(t))gT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ar(a,o)){var l=e.interleaved;l===null?(i.next=i,h_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Yb(t,e,i,r),n!==null&&(i=en(),br(n,t,r,i),yT(n,e,r))}}function pT(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function gT(t,e){Iu=am=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X0(t,n)}}var lm={readContext:er,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},S2={readContext:er,useCallback:function(t,e){return jr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:mI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pf(4194308,4,cT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pf(4194308,4,t,e)},useInsertionEffect:function(t,e){return pf(4,2,t,e)},useMemo:function(t,e){var n=jr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=T2.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=jr();return t={current:t},e.memoizedState=t},useState:fI,useDebugValue:I_,useDeferredValue:function(t){return jr().memoizedState=t},useTransition:function(){var t=fI(!1),e=t[0];return t=b2.bind(null,t[1]),jr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=jr();if(qe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),xt===null)throw Error(G(349));Go&30||tT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mI(rT.bind(null,r,s,t),[t]),r.flags|=2048,td(9,nT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=jr(),e=xt.identifierPrefix;if(qe){var n=ci,r=li;n=(r&~(1<<32-xr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R2={readContext:er,useCallback:dT,useContext:er,useEffect:v_,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:hT,useReducer:_g,useRef:oT,useState:function(){return _g(ed)},useDebugValue:I_,useDeferredValue:function(t){var e=tr();return fT(e,gt.memoizedState,t)},useTransition:function(){var t=_g(ed)[0],e=tr().memoizedState;return[t,e]},useMutableSource:Zb,useSyncExternalStore:eT,useId:mT,unstable_isNewReconciler:!1},k2={readContext:er,useCallback:dT,useContext:er,useEffect:v_,useImperativeHandle:uT,useInsertionEffect:aT,useLayoutEffect:lT,useMemo:hT,useReducer:wg,useRef:oT,useState:function(){return wg(ed)},useDebugValue:I_,useDeferredValue:function(t){var e=tr();return gt===null?e.memoizedState=t:fT(e,gt.memoizedState,t)},useTransition:function(){var t=wg(ed)[0],e=tr().memoizedState;return[t,e]},useMutableSource:Zb,useSyncExternalStore:eT,useId:mT,unstable_isNewReconciler:!1};function gr(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ly(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Km={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=Ss(t),s=mi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ts(t,s,i),e!==null&&(br(e,t,i,r),ff(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=Ss(t),s=mi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ts(t,s,i),e!==null&&(br(e,t,i,r),ff(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=Ss(t),i=mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ts(t,i,r),e!==null&&(br(e,t,r,n),ff(e,t,r))}};function pI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wu(n,r)||!Wu(i,s):!0}function _T(t,e,n){var r=!1,i=Vs,s=e.contextType;return typeof s=="object"&&s!==null?s=er(s):(i=gn(e)?qo:Ht.current,r=e.contextTypes,s=(r=r!=null)?Al(t,i):Vs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Km,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function gI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Km.enqueueReplaceState(e,e.state,null)}function Vy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},f_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=er(s):(s=gn(e)?qo:Ht.current,i.context=Al(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ly(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Km.enqueueReplaceState(i,i.state,null),sm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pl(t,e){try{var n="",r=e;do n+=rN(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function vg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P2=typeof WeakMap=="function"?WeakMap:Map;function wT(t,e,n){n=mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){um||(um=!0,Gy=r),Oy(t,e)},n}function vT(t,e,n){n=mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Oy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Oy(t,e),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=q2.bind(null,t,e,n),e.then(t,t))}function _I(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mi(-1,1),e.tag=2,Ts(n,e,1))),n.lanes|=1),t)}var C2=Ai.ReactCurrentOwner,un=!1;function Zt(t,e,n,r){e.child=t===null?Qb(e,null,n,r):Rl(e,t.child,n,r)}function vI(t,e,n,r,i){n=n.render;var s=e.ref;return gl(e,i),r=__(t,e,n,r,s,i),n=w_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wi(t,e,i)):(qe&&n&&o_(e),e.flags|=1,Zt(t,e,r,i),e.child)}function II(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!k_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,IT(t,e,s,r,i)):(t=wf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wu,n(o,r)&&t.ref===e.ref)return wi(t,e,i)}return e.flags|=1,t=Rs(s,r),t.ref=e.ref,t.return=e,e.child=t}function IT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wu(s,r)&&t.ref===e.ref)if(un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,wi(t,e,i)}return My(t,e,n,r,i)}function ET(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(dl,En),En|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(dl,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(dl,En),En|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(dl,En),En|=r;return Zt(t,e,i,n),e.child}function xT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function My(t,e,n,r,i){var s=gn(n)?qo:Ht.current;return s=Al(e,s),gl(e,i),n=__(t,e,n,r,s,i),r=w_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wi(t,e,i)):(qe&&r&&o_(e),e.flags|=1,Zt(t,e,n,i),e.child)}function EI(t,e,n,r,i){if(gn(n)){var s=!0;em(e)}else s=!1;if(gl(e,i),e.stateNode===null)gf(t,e),_T(e,n,r),Vy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=er(u):(u=gn(n)?qo:Ht.current,u=Al(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&gI(e,o,r,u),ss=!1;var p=e.memoizedState;o.state=p,sm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||pn.current||ss?(typeof h=="function"&&(Ly(e,n,h,r),l=e.memoizedState),(a=ss||pI(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Jb(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:gr(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=er(l):(l=gn(n)?qo:Ht.current,l=Al(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&gI(e,o,r,l),ss=!1,p=e.memoizedState,o.state=p,sm(e,r,o,i);var I=e.memoizedState;a!==f||p!==I||pn.current||ss?(typeof _=="function"&&(Ly(e,n,_,r),I=e.memoizedState),(u=ss||pI(e,n,u,r,p,I,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return jy(t,e,n,r,s,i)}function jy(t,e,n,r,i,s){xT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&aI(e,n,!1),wi(t,e,s);r=e.stateNode,C2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rl(e,t.child,null,s),e.child=Rl(e,null,a,s)):Zt(t,e,a,s),e.memoizedState=r.state,i&&aI(e,n,!0),e.child}function bT(t){var e=t.stateNode;e.pendingContext?oI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&oI(t,e.context,!1),m_(t,e.containerInfo)}function xI(t,e,n,r,i){return Sl(),l_(i),e.flags|=256,Zt(t,e,n,r),e.child}var Fy={dehydrated:null,treeContext:null,retryLane:0};function Uy(t){return{baseLanes:t,cachePool:null,transitions:null}}function TT(t,e,n){var r=e.pendingProps,i=Qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(Qe,i&1),t===null)return Ny(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Jm(o,r,0,null),t=jo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Uy(n),e.memoizedState=Fy,t):E_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return N2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Rs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rs(a,s):(s=jo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Uy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fy,r}return s=t.child,t=s.sibling,r=Rs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E_(t,e){return e=Jm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zh(t,e,n,r){return r!==null&&l_(r),Rl(e,t.child,null,n),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=vg(Error(G(422))),zh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Jm({mode:"visible",children:r.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rl(e,t.child,null,o),e.child.memoizedState=Uy(o),e.memoizedState=Fy,s);if(!(e.mode&1))return zh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=vg(s,r,void 0),zh(t,e,o,r)}if(a=(o&t.childLanes)!==0,un||a){if(r=xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_i(t,i),br(r,t,i,-1))}return R_(),r=vg(Error(G(421))),zh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=H2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Sn=bs(i.nextSibling),kn=e,qe=!0,Ir=null,t!==null&&(Kn[Qn++]=li,Kn[Qn++]=ci,Kn[Qn++]=Ho,li=t.id,ci=t.overflow,Ho=e),e=E_(e,r.children),e.flags|=4096,e)}function bI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dy(t.return,e,n)}function Ig(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function AT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Zt(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bI(t,n,e);else if(t.tag===19)bI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&om(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ig(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&om(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ig(e,!0,n,null,s);break;case"together":Ig(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D2(t,e,n){switch(e.tag){case 3:bT(e),Sl();break;case 5:Xb(e);break;case 1:gn(e.type)&&em(e);break;case 4:m_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(rm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?TT(t,e,n):(Ve(Qe,Qe.current&1),t=wi(t,e,n),t!==null?t.sibling:null);Ve(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,ET(t,e,n)}return wi(t,e,n)}var ST,By,RT,kT;ST=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};By=function(){};RT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Do(Kr.current);var s=null;switch(n){case"input":i=cy(t,i),r=cy(t,r),s=[];break;case"select":i=Je({},i,{value:void 0}),r=Je({},r,{value:void 0}),s=[];break;case"textarea":i=hy(t,i),r=hy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xf)}my(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Me("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};kT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qc(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function L2(t,e,n){var r=e.pendingProps;switch(a_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return gn(e.type)&&Zf(),jt(e),null;case 3:return r=e.stateNode,kl(),Fe(pn),Fe(Ht),g_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ir!==null&&(Qy(Ir),Ir=null))),By(t,e),jt(e),null;case 5:p_(e);var i=Do(Xu.current);if(n=e.type,t!==null&&e.stateNode!=null)RT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return jt(e),null}if(t=Do(Kr.current),Uh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zr]=e,r[Yu]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<lu.length;i++)Me(lu[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Dv(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":Vv(r,s),Me("invalid",r)}my(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fh(r.textContent,a,t),i=["children",""+a]):Uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Ch(r),Lv(r,s,!0);break;case"textarea":Ch(r),Ov(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zr]=e,t[Yu]=r,ST(t,e,!1,!1),e.stateNode=t;e:{switch(o=py(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<lu.length;i++)Me(lu[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":Dv(t,r),i=cy(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Je({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Vv(t,r),i=hy(t,r),Me("invalid",t);break;default:i=r}my(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ob(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ib(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bu(t,l):typeof l=="number"&&Bu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Me("scroll",t):l!=null&&G0(t,s,l,o))}switch(n){case"input":Ch(t),Lv(t,r,!1);break;case"textarea":Ch(t),Ov(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?hl(t,!!r.multiple,s,!1):r.defaultValue!=null&&hl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)kT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Do(Xu.current),Do(Kr.current),Uh(e)){if(r=e.stateNode,n=e.memoizedProps,r[zr]=e,(s=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:Fh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zr]=e,e.stateNode=r}return jt(e),null;case 13:if(Fe(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&Sn!==null&&e.mode&1&&!(e.flags&128))Wb(),Sl(),e.flags|=98560,s=!1;else if(s=Uh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[zr]=e}else Sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else Ir!==null&&(Qy(Ir),Ir=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?yt===0&&(yt=3):R_())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return kl(),By(t,e),t===null&&Ku(e.stateNode.containerInfo),jt(e),null;case 10:return d_(e.type._context),jt(e),null;case 17:return gn(e.type)&&Zf(),jt(e),null;case 19:if(Fe(Qe),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qc(s,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=om(t),o!==null){for(e.flags|=128,Qc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Qe,Qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&st()>Cl&&(e.flags|=128,r=!0,Qc(s,!1),e.lanes=4194304)}else{if(!r)if(t=om(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!qe)return jt(e),null}else 2*st()-s.renderingStartTime>Cl&&n!==1073741824&&(e.flags|=128,r=!0,Qc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=st(),e.sibling=null,n=Qe.current,Ve(Qe,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return S_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function V2(t,e){switch(a_(e),e.tag){case 1:return gn(e.type)&&Zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kl(),Fe(pn),Fe(Ht),g_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return p_(e),null;case 13:if(Fe(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Qe),null;case 4:return kl(),null;case 10:return d_(e.type._context),null;case 22:case 23:return S_(),null;case 24:return null;default:return null}}var $h=!1,Bt=!1,O2=typeof WeakSet=="function"?WeakSet:Set,Z=null;function ul(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function zy(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var TI=!1;function M2(t,e){if(Ty=Qf,t=Lb(),s_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var _;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)p=f,f=_;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(_=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ay={focusedElem:t,selectionRange:n},Qf=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,D=I.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?A:gr(e.type,A),D);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(V){Ze(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return I=TI,TI=!1,I}function Eu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zy(e,n,s)}i=i.next}while(i!==r)}}function Qm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $y(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function PT(t){var e=t.alternate;e!==null&&(t.alternate=null,PT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zr],delete e[Yu],delete e[ky],delete e[w2],delete e[v2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CT(t){return t.tag===5||t.tag===3||t.tag===4}function AI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xf));else if(r!==4&&(t=t.child,t!==null))for(qy(t,e,n),t=t.sibling;t!==null;)qy(t,e,n),t=t.sibling}function Hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hy(t,e,n),t=t.sibling;t!==null;)Hy(t,e,n),t=t.sibling}var Rt=null,wr=!1;function Ji(t,e,n){for(n=n.child;n!==null;)NT(t,e,n),n=n.sibling}function NT(t,e,n){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Bm,n)}catch{}switch(n.tag){case 5:Bt||ul(n,e);case 6:var r=Rt,i=wr;Rt=null,Ji(t,e,n),Rt=r,wr=i,Rt!==null&&(wr?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(wr?(t=Rt,n=n.stateNode,t.nodeType===8?mg(t.parentNode,n):t.nodeType===1&&mg(t,n),Hu(t)):mg(Rt,n.stateNode));break;case 4:r=Rt,i=wr,Rt=n.stateNode.containerInfo,wr=!0,Ji(t,e,n),Rt=r,wr=i;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zy(n,e,o),i=i.next}while(i!==r)}Ji(t,e,n);break;case 1:if(!Bt&&(ul(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}Ji(t,e,n);break;case 21:Ji(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,Ji(t,e,n),Bt=r):Ji(t,e,n);break;default:Ji(t,e,n)}}function SI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new O2),e.forEach(function(r){var i=G2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,wr=!1;break e;case 3:Rt=a.stateNode.containerInfo,wr=!0;break e;case 4:Rt=a.stateNode.containerInfo,wr=!0;break e}a=a.return}if(Rt===null)throw Error(G(160));NT(s,o,i),Rt=null,wr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ze(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DT(e,t),e=e.sibling}function DT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mr(e,t),Mr(t),r&4){try{Eu(3,t,t.return),Qm(3,t)}catch(A){Ze(t,t.return,A)}try{Eu(5,t,t.return)}catch(A){Ze(t,t.return,A)}}break;case 1:mr(e,t),Mr(t),r&512&&n!==null&&ul(n,n.return);break;case 5:if(mr(e,t),Mr(t),r&512&&n!==null&&ul(n,n.return),t.flags&32){var i=t.stateNode;try{Bu(i,"")}catch(A){Ze(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tb(i,s),py(a,o);var u=py(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?ob(i,f):h==="dangerouslySetInnerHTML"?ib(i,f):h==="children"?Bu(i,f):G0(i,h,f,u)}switch(a){case"input":uy(i,s);break;case"textarea":nb(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?hl(i,!!s.multiple,_,!1):p!==!!s.multiple&&(s.defaultValue!=null?hl(i,!!s.multiple,s.defaultValue,!0):hl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yu]=s}catch(A){Ze(t,t.return,A)}}break;case 6:if(mr(e,t),Mr(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Ze(t,t.return,A)}}break;case 3:if(mr(e,t),Mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hu(e.containerInfo)}catch(A){Ze(t,t.return,A)}break;case 4:mr(e,t),Mr(t);break;case 13:mr(e,t),Mr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(T_=st())),r&4&&SI(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(u=Bt)||h,mr(e,t),Bt=u):mr(e,t),Mr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(p=Z,_=p.child,p.tag){case 0:case 11:case 14:case 15:Eu(4,p,p.return);break;case 1:ul(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(A){Ze(r,n,A)}}break;case 5:ul(p,p.return);break;case 22:if(p.memoizedState!==null){kI(f);continue}}_!==null?(_.return=p,Z=_):kI(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sb("display",o))}catch(A){Ze(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(A){Ze(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mr(e,t),Mr(t),r&4&&SI(t);break;case 21:break;default:mr(e,t),Mr(t)}}function Mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CT(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bu(i,""),r.flags&=-33);var s=AI(t);Hy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=AI(t);qy(t,a,o);break;default:throw Error(G(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function j2(t,e,n){Z=t,LT(t)}function LT(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$h;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=$h;var u=Bt;if($h=o,(Bt=l)&&!u)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?PI(i):l!==null?(l.return=o,Z=l):PI(i);for(;s!==null;)Z=s,LT(s),s=s.sibling;Z=i,$h=a,Bt=u}RI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):RI(t)}}function RI(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Qm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Hu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Bt||e.flags&512&&$y(e)}catch(p){Ze(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function kI(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function PI(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qm(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{$y(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{$y(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var F2=Math.ceil,cm=Ai.ReactCurrentDispatcher,x_=Ai.ReactCurrentOwner,Zn=Ai.ReactCurrentBatchConfig,we=0,xt=null,ft=null,Ct=0,En=0,dl=Hs(0),yt=0,nd=null,Wo=0,Ym=0,b_=0,xu=null,cn=null,T_=0,Cl=1/0,si=null,um=!1,Gy=null,As=null,qh=!1,ys=null,dm=0,bu=0,Wy=null,yf=-1,_f=0;function en(){return we&6?st():yf!==-1?yf:yf=st()}function Ss(t){return t.mode&1?we&2&&Ct!==0?Ct&-Ct:E2.transition!==null?(_f===0&&(_f=_b()),_f):(t=Te,t!==0||(t=window.event,t=t===void 0?16:Tb(t.type)),t):1}function br(t,e,n,r){if(50<bu)throw bu=0,Wy=null,Error(G(185));kd(t,n,r),(!(we&2)||t!==xt)&&(t===xt&&(!(we&2)&&(Ym|=n),yt===4&&ls(t,Ct)),yn(t,r),n===1&&we===0&&!(e.mode&1)&&(Cl=st()+500,Gm&&Gs()))}function yn(t,e){var n=t.callbackNode;EN(t,e);var r=Kf(t,t===xt?Ct:0);if(r===0)n!==null&&Fv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fv(n),e===1)t.tag===0?I2(CI.bind(null,t)):qb(CI.bind(null,t)),y2(function(){!(we&6)&&Gs()}),n=null;else{switch(wb(r)){case 1:n=J0;break;case 4:n=gb;break;case 16:n=Wf;break;case 536870912:n=yb;break;default:n=Wf}n=zT(n,VT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VT(t,e){if(yf=-1,_f=0,we&6)throw Error(G(327));var n=t.callbackNode;if(yl()&&t.callbackNode!==n)return null;var r=Kf(t,t===xt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hm(t,r);else{e=r;var i=we;we|=2;var s=MT();(xt!==t||Ct!==e)&&(si=null,Cl=st()+500,Mo(t,e));do try{z2();break}catch(a){OT(t,a)}while(1);u_(),cm.current=s,we=i,ft!==null?e=0:(xt=null,Ct=0,e=yt)}if(e!==0){if(e===2&&(i=vy(t),i!==0&&(r=i,e=Ky(t,i))),e===1)throw n=nd,Mo(t,0),ls(t,r),yn(t,st()),n;if(e===6)ls(t,r);else{if(i=t.current.alternate,!(r&30)&&!U2(i)&&(e=hm(t,r),e===2&&(s=vy(t),s!==0&&(r=s,e=Ky(t,s))),e===1))throw n=nd,Mo(t,0),ls(t,r),yn(t,st()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Io(t,cn,si);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=T_+500-st(),10<e)){if(Kf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ry(Io.bind(null,t,cn,si),e);break}Io(t,cn,si);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F2(r/1960))-r,10<r){t.timeoutHandle=Ry(Io.bind(null,t,cn,si),r);break}Io(t,cn,si);break;case 5:Io(t,cn,si);break;default:throw Error(G(329))}}}return yn(t,st()),t.callbackNode===n?VT.bind(null,t):null}function Ky(t,e){var n=xu;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=hm(t,e),t!==2&&(e=cn,cn=n,e!==null&&Qy(e)),t}function Qy(t){cn===null?cn=t:cn.push.apply(cn,t)}function U2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ar(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~b_,e&=~Ym,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xr(e),r=1<<n;t[n]=-1,e&=~r}}function CI(t){if(we&6)throw Error(G(327));yl();var e=Kf(t,0);if(!(e&1))return yn(t,st()),null;var n=hm(t,e);if(t.tag!==0&&n===2){var r=vy(t);r!==0&&(e=r,n=Ky(t,r))}if(n===1)throw n=nd,Mo(t,0),ls(t,e),yn(t,st()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Io(t,cn,si),yn(t,st()),null}function A_(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Cl=st()+500,Gm&&Gs())}}function Ko(t){ys!==null&&ys.tag===0&&!(we&6)&&yl();var e=we;we|=1;var n=Zn.transition,r=Te;try{if(Zn.transition=null,Te=1,t)return t()}finally{Te=r,Zn.transition=n,we=e,!(we&6)&&Gs()}}function S_(){En=dl.current,Fe(dl)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,g2(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(a_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zf();break;case 3:kl(),Fe(pn),Fe(Ht),g_();break;case 5:p_(r);break;case 4:kl();break;case 13:Fe(Qe);break;case 19:Fe(Qe);break;case 10:d_(r.type._context);break;case 22:case 23:S_()}n=n.return}if(xt=t,ft=t=Rs(t.current,null),Ct=En=e,yt=0,nd=null,b_=Ym=Wo=0,cn=xu=null,No!==null){for(e=0;e<No.length;e++)if(n=No[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}No=null}return t}function OT(t,e){do{var n=ft;try{if(u_(),mf.current=lm,am){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}am=!1}if(Go=0,It=gt=Ye=null,Iu=!1,Zu=0,x_.current=null,n===null||n.return===null){yt=1,nd=e,ft=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=_I(o);if(_!==null){_.flags&=-257,wI(_,o,a,s,e),_.mode&1&&yI(s,u,e),e=_,l=u;var I=e.updateQueue;if(I===null){var A=new Set;A.add(l),e.updateQueue=A}else I.add(l);break e}else{if(!(e&1)){yI(s,u,e),R_();break e}l=Error(G(426))}}else if(qe&&a.mode&1){var D=_I(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),wI(D,o,a,s,e),l_(Pl(l,a));break e}}s=l=Pl(l,a),yt!==4&&(yt=2),xu===null?xu=[s]:xu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=wT(s,l,e);dI(s,E);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(As===null||!As.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=vT(s,a,e);dI(s,V);break e}}s=s.return}while(s!==null)}FT(n)}catch(z){e=z,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(1)}function MT(){var t=cm.current;return cm.current=lm,t===null?lm:t}function R_(){(yt===0||yt===3||yt===2)&&(yt=4),xt===null||!(Wo&268435455)&&!(Ym&268435455)||ls(xt,Ct)}function hm(t,e){var n=we;we|=2;var r=MT();(xt!==t||Ct!==e)&&(si=null,Mo(t,e));do try{B2();break}catch(i){OT(t,i)}while(1);if(u_(),we=n,cm.current=r,ft!==null)throw Error(G(261));return xt=null,Ct=0,yt}function B2(){for(;ft!==null;)jT(ft)}function z2(){for(;ft!==null&&!fN();)jT(ft)}function jT(t){var e=BT(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?FT(t):ft=e,x_.current=null}function FT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=V2(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ft=null;return}}else if(n=L2(n,e,En),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);yt===0&&(yt=5)}function Io(t,e,n){var r=Te,i=Zn.transition;try{Zn.transition=null,Te=1,$2(t,e,n,r)}finally{Zn.transition=i,Te=r}return null}function $2(t,e,n,r){do yl();while(ys!==null);if(we&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xN(t,s),t===xt&&(ft=xt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qh||(qh=!0,zT(Wf,function(){return yl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zn.transition,Zn.transition=null;var o=Te;Te=1;var a=we;we|=4,x_.current=null,M2(t,n),DT(n,t),c2(Ay),Qf=!!Ty,Ay=Ty=null,t.current=n,j2(n),mN(),we=a,Te=o,Zn.transition=s}else t.current=n;if(qh&&(qh=!1,ys=t,dm=i),s=t.pendingLanes,s===0&&(As=null),yN(n.stateNode),yn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(um)throw um=!1,t=Gy,Gy=null,t;return dm&1&&t.tag!==0&&yl(),s=t.pendingLanes,s&1?t===Wy?bu++:(bu=0,Wy=t):bu=0,Gs(),null}function yl(){if(ys!==null){var t=wb(dm),e=Zn.transition,n=Te;try{if(Zn.transition=null,Te=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,dm=0,we&6)throw Error(G(331));var i=we;for(we|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:Eu(8,h,s)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var p=h.sibling,_=h.return;if(PT(h),h===u){Z=null;break}if(p!==null){p.return=_,Z=p;break}Z=_}}}var I=s.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var D=A.sibling;A.sibling=null,A=D}while(A!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eu(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Z=E;break e}Z=s.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Z=x;else e:for(o=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qm(9,a)}}catch(z){Ze(a,a.return,z)}if(a===o){Z=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,Z=V;break e}Z=a.return}}if(we=i,Gs(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Bm,t)}catch{}r=!0}return r}finally{Te=n,Zn.transition=e}}return!1}function NI(t,e,n){e=Pl(n,e),e=wT(t,e,1),t=Ts(t,e,1),e=en(),t!==null&&(kd(t,1,e),yn(t,e))}function Ze(t,e,n){if(t.tag===3)NI(t,t,n);else for(;e!==null;){if(e.tag===3){NI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(As===null||!As.has(r))){t=Pl(n,t),t=vT(e,t,1),e=Ts(e,t,1),t=en(),e!==null&&(kd(e,1,t),yn(e,t));break}}e=e.return}}function q2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Ct&n)===n&&(yt===4||yt===3&&(Ct&130023424)===Ct&&500>st()-T_?Mo(t,0):b_|=n),yn(t,e)}function UT(t,e){e===0&&(t.mode&1?(e=Lh,Lh<<=1,!(Lh&130023424)&&(Lh=4194304)):e=1);var n=en();t=_i(t,e),t!==null&&(kd(t,e,n),yn(t,n))}function H2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UT(t,n)}function G2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),UT(t,n)}var BT;BT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,D2(t,e,n);un=!!(t.flags&131072)}else un=!1,qe&&e.flags&1048576&&Hb(e,nm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;gf(t,e),t=e.pendingProps;var i=Al(e,Ht.current);gl(e,n),i=__(null,e,r,t,i,n);var s=w_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(s=!0,em(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,f_(e),i.updater=Km,e.stateNode=i,i._reactInternals=e,Vy(e,r,t,n),e=jy(null,e,r,!0,s,n)):(e.tag=0,qe&&s&&o_(e),Zt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(gf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=K2(r),t=gr(r,t),i){case 0:e=My(null,e,r,t,n);break e;case 1:e=EI(null,e,r,t,n);break e;case 11:e=vI(null,e,r,t,n);break e;case 14:e=II(null,e,r,gr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),My(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),EI(t,e,r,i,n);case 3:e:{if(bT(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Jb(t,e),sm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pl(Error(G(423)),e),e=xI(t,e,r,n,i);break e}else if(r!==i){i=Pl(Error(G(424)),e),e=xI(t,e,r,n,i);break e}else for(Sn=bs(e.stateNode.containerInfo.firstChild),kn=e,qe=!0,Ir=null,n=Qb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sl(),r===i){e=wi(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return Xb(e),t===null&&Ny(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sy(r,i)?o=null:s!==null&&Sy(r,s)&&(e.flags|=32),xT(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&Ny(e),null;case 13:return TT(t,e,n);case 4:return m_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rl(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),vI(t,e,r,i,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(rm,r._currentValue),r._currentValue=o,s!==null)if(Ar(s.value,o)){if(s.children===i.children&&!pn.current){e=wi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Dy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Dy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Zt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,gl(e,n),i=er(i),r=r(i),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,i=gr(r,e.pendingProps),i=gr(r.type,i),II(t,e,r,i,n);case 15:return IT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),gf(t,e),e.tag=1,gn(r)?(t=!0,em(e)):t=!1,gl(e,n),_T(e,r,i),Vy(e,r,i,n),jy(null,e,r,!0,t,n);case 19:return AT(t,e,n);case 22:return ET(t,e,n)}throw Error(G(156,e.tag))};function zT(t,e){return pb(t,e)}function W2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,n,r){return new W2(t,e,n,r)}function k_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function K2(t){if(typeof t=="function")return k_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===K0)return 11;if(t===Q0)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")k_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case tl:return jo(n.children,i,s,e);case W0:o=8,i|=8;break;case sy:return t=Yn(12,n,e,i|2),t.elementType=sy,t.lanes=s,t;case oy:return t=Yn(13,n,e,i),t.elementType=oy,t.lanes=s,t;case ay:return t=Yn(19,n,e,i),t.elementType=ay,t.lanes=s,t;case X1:return Jm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y1:o=10;break e;case J1:o=9;break e;case K0:o=11;break e;case Q0:o=14;break e;case is:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Yn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jo(t,e,n,r){return t=Yn(7,t,r,e),t.lanes=n,t}function Jm(t,e,n,r){return t=Yn(22,t,r,e),t.elementType=X1,t.lanes=n,t.stateNode={isHidden:!1},t}function Eg(t,e,n){return t=Yn(6,t,null,e),t.lanes=n,t}function xg(t,e,n){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rg(0),this.expirationTimes=rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P_(t,e,n,r,i,s,o,a,l){return t=new Q2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},f_(s),t}function Y2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $T(t){if(!t)return Vs;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(gn(n))return $b(t,n,e)}return e}function qT(t,e,n,r,i,s,o,a,l){return t=P_(n,r,!0,t,i,s,o,a,l),t.context=$T(null),n=t.current,r=en(),i=Ss(n),s=mi(r,i),s.callback=e??null,Ts(n,s,i),t.current.lanes=i,kd(t,i,r),yn(t,r),t}function Xm(t,e,n,r){var i=e.current,s=en(),o=Ss(i);return n=$T(n),e.context===null?e.context=n:e.pendingContext=n,e=mi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ts(i,e,o),t!==null&&(br(t,i,o,s),ff(t,i,o)),o}function fm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function DI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function C_(t,e){DI(t,e),(t=t.alternate)&&DI(t,e)}function J2(){return null}var HT=typeof reportError=="function"?reportError:function(t){console.error(t)};function N_(t){this._internalRoot=t}Zm.prototype.render=N_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Xm(t,e,null,null)};Zm.prototype.unmount=N_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){Xm(null,t,null,null)}),e[yi]=null}};function Zm(t){this._internalRoot=t}Zm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Eb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&bb(t)}};function D_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LI(){}function X2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=fm(o);s.call(u)}}var o=qT(e,r,t,0,null,!1,!1,"",LI);return t._reactRootContainer=o,t[yi]=o.current,Ku(t.nodeType===8?t.parentNode:t),Ko(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=fm(l);a.call(u)}}var l=P_(t,0,!1,null,null,!1,!1,"",LI);return t._reactRootContainer=l,t[yi]=l.current,Ku(t.nodeType===8?t.parentNode:t),Ko(function(){Xm(e,l,n,r)}),l}function tp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=fm(o);a.call(l)}}Xm(e,o,t,i)}else o=X2(n,e,t,i,r);return fm(o)}vb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=au(e.pendingLanes);n!==0&&(X0(e,n|1),yn(e,st()),!(we&6)&&(Cl=st()+500,Gs()))}break;case 13:Ko(function(){var r=_i(t,1);if(r!==null){var i=en();br(r,t,1,i)}}),C_(t,1)}};Z0=function(t){if(t.tag===13){var e=_i(t,134217728);if(e!==null){var n=en();br(e,t,134217728,n)}C_(t,134217728)}};Ib=function(t){if(t.tag===13){var e=Ss(t),n=_i(t,e);if(n!==null){var r=en();br(n,t,e,r)}C_(t,e)}};Eb=function(){return Te};xb=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};yy=function(t,e,n){switch(e){case"input":if(uy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hm(r);if(!i)throw Error(G(90));eb(r),uy(r,i)}}}break;case"textarea":nb(t,n);break;case"select":e=n.value,e!=null&&hl(t,!!n.multiple,e,!1)}};cb=A_;ub=Ko;var Z2={usingClientEntryPoint:!1,Events:[Cd,sl,Hm,ab,lb,A_]},Yc={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eD={bundleType:Yc.bundleType,version:Yc.version,rendererPackageName:Yc.rendererPackageName,rendererConfig:Yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fb(t),t===null?null:t.stateNode},findFiberByHostInstance:Yc.findFiberByHostInstance||J2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{Bm=Hh.inject(eD),Wr=Hh}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z2;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D_(e))throw Error(G(200));return Y2(t,e,null,n)};On.createRoot=function(t,e){if(!D_(t))throw Error(G(299));var n=!1,r="",i=HT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=P_(t,1,!1,null,null,n,!1,r,i),t[yi]=e.current,Ku(t.nodeType===8?t.parentNode:t),new N_(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=fb(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return Ko(t)};On.hydrate=function(t,e,n){if(!ep(e))throw Error(G(200));return tp(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!D_(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=HT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qT(e,null,t,1,n??null,i,!1,s,o),t[yi]=e.current,Ku(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zm(e)};On.render=function(t,e,n){if(!ep(e))throw Error(G(200));return tp(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!ep(t))throw Error(G(40));return t._reactRootContainer?(Ko(function(){tp(null,null,t,!1,function(){t._reactRootContainer=null,t[yi]=null})}),!0):!1};On.unstable_batchedUpdates=A_;On.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ep(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return tp(t,e,n,!1,r)};On.version="18.3.1-next-f1338f8080-20240426";function GT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GT)}catch(t){console.error(t)}}GT(),G1.exports=On;var L_=G1.exports,VI=L_;ry.createRoot=VI.createRoot,ry.hydrateRoot=VI.hydrateRoot;const tD="modulepreload",nD=function(t){return"/"+t},OI={},pr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=nD(s),s in OI)return;OI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":tD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var rD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sD=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>U.createElement("svg",{ref:u,...rD,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${iD(t)}`,...l},[...e.map(([h,f])=>U.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var Se=sD;const Yy=Se("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),ja=Se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Jy=Se("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),MI=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),rd=Se("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),jI=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),St=Se("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),Fa=Se("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),oD=Se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),FI=Se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ln=Se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),UI=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Jc=Se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),aD=Se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),lD=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),BI=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),cD=Se("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),zI=Se("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),$I=Se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),qI=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),HI=Se("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),GI=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),WI=Se("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),Ur=Se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),bg=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),KI=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),vf=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),QI=Se("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Tn=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uD=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},KT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(p=64)),r.push(n[h],n[f],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new hD;const p=s<<2|a>>4;if(r.push(p),u!==64){const _=a<<4&240|u>>2;if(r.push(_),f!==64){const I=u<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fD=function(t){const e=WT(t);return KT.encodeByteArray(e,!0)},mm=function(t){return fD(t).replace(/\./g,"")},QT=function(t){try{return KT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=()=>YT().__FIREBASE_DEFAULTS__,pD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QT(t[1]);return e&&JSON.parse(e)},np=()=>{try{return uD()||mD()||pD()||gD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JT=t=>{var e,n;return(n=(e=np())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},XT=t=>{const e=JT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ZT=()=>{var t;return(t=np())==null?void 0:t.config},eA=t=>{var e;return(e=np())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[mm(JSON.stringify(n)),mm(JSON.stringify(o)),a].join(".")}const Tu={};function _D(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?t.emulator.push(e):t.prod.push(e);return t}function wD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let YI=!1;function V_(t,e){if(typeof window>"u"||typeof document>"u"||!Si(window.location.host)||Tu[t]===e||Tu[t]||YI)return;Tu[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=_D().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{YI=!0,o()},p}function h(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=wD(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),A=n("learnmore"),D=document.getElementById(A)||document.createElement("a"),E=n("preprendIcon"),v=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(D,A);const V=u();l(v,E),x.append(v,I,D,V),document.body.appendChild(x)}s?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function nA(){var e;const t=(e=np())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ID(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ED(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xD(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iA(){return!nA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sA(){return!nA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function O_(){try{return typeof indexedDB=="object"}catch{return!1}}function oA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function bD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TD,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jn(i,a,r)}}function AD(t,e){return t.replace(SD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SD=/\{\$([^}]+)}/g;function RD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(JI(s)&&JI(o)){if(!nr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function JI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function uu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kD(t,e){const n=new PD(t,e);return n.subscribe.bind(n)}class PD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Tg),i.error===void 0&&(i.error=Tg),i.complete===void 0&&(i.complete=Tg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=1e3,DD=2,LD=4*60*60*1e3,VD=.5;function XI(t,e=ND,n=DD){const r=e*Math.pow(n,t),i=Math.round(VD*r*(Math.random()-.5)*2);return Math.min(LD,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t){return t&&t._delegate?t._delegate:t}class Ln{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jD(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MD(t){return t===Eo?void 0:t}function jD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const UD={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},BD=pe.INFO,zD={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},$D=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=BD,this._logHandler=$D,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const qD=(t,e)=>e.some(n=>t instanceof n);let ZI,eE;function HD(){return ZI||(ZI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GD(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aA=new WeakMap,Xy=new WeakMap,lA=new WeakMap,Ag=new WeakMap,M_=new WeakMap;function WD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ks(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&aA.set(n,t)}).catch(()=>{}),M_.set(e,t),e}function KD(t){if(Xy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Xy.set(t,e)}let Zy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ks(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QD(t){Zy=t(Zy)}function YD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sg(this),e,...n);return lA.set(r,e.sort?e.sort():[e]),ks(r)}:GD().includes(t)?function(...e){return t.apply(Sg(this),e),ks(aA.get(this))}:function(...e){return ks(t.apply(Sg(this),e))}}function JD(t){return typeof t=="function"?YD(t):(t instanceof IDBTransaction&&KD(t),qD(t,HD())?new Proxy(t,Zy):t)}function ks(t){if(t instanceof IDBRequest)return WD(t);if(Ag.has(t))return Ag.get(t);const e=JD(t);return e!==t&&(Ag.set(t,e),M_.set(e,t)),e}const Sg=t=>M_.get(t);function cA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ks(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ks(o.result),l.oldVersion,l.newVersion,ks(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const XD=["get","getKey","getAll","getAllKeys","count"],ZD=["put","add","delete","clear"],Rg=new Map;function tE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rg.get(e))return Rg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Rg.set(e,s),s}QD(t=>({...t,get:(e,n,r)=>tE(e,n)||t.get(e,n,r),has:(e,n)=>!!tE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const e0="@firebase/app",nE="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Dd("@firebase/app"),nL="@firebase/app-compat",rL="@firebase/analytics-compat",iL="@firebase/analytics",sL="@firebase/app-check-compat",oL="@firebase/app-check",aL="@firebase/auth",lL="@firebase/auth-compat",cL="@firebase/database",uL="@firebase/data-connect",dL="@firebase/database-compat",hL="@firebase/functions",fL="@firebase/functions-compat",mL="@firebase/installations",pL="@firebase/installations-compat",gL="@firebase/messaging",yL="@firebase/messaging-compat",_L="@firebase/performance",wL="@firebase/performance-compat",vL="@firebase/remote-config",IL="@firebase/remote-config-compat",EL="@firebase/storage",xL="@firebase/storage-compat",bL="@firebase/firestore",TL="@firebase/ai",AL="@firebase/firestore-compat",SL="firebase",RL="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",kL={[e0]:"fire-core",[nL]:"fire-core-compat",[iL]:"fire-analytics",[rL]:"fire-analytics-compat",[oL]:"fire-app-check",[sL]:"fire-app-check-compat",[aL]:"fire-auth",[lL]:"fire-auth-compat",[cL]:"fire-rtdb",[uL]:"fire-data-connect",[dL]:"fire-rtdb-compat",[hL]:"fire-fn",[fL]:"fire-fn-compat",[mL]:"fire-iid",[pL]:"fire-iid-compat",[gL]:"fire-fcm",[yL]:"fire-fcm-compat",[_L]:"fire-perf",[wL]:"fire-perf-compat",[vL]:"fire-rc",[IL]:"fire-rc-compat",[EL]:"fire-gcs",[xL]:"fire-gcs-compat",[bL]:"fire-fst",[AL]:"fire-fst-compat",[TL]:"fire-vertex","fire-js":"fire-js",[SL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=new Map,PL=new Map,t0=new Map;function rE(t,e){try{t.container.addComponent(e)}catch(n){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(t0.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;t0.set(e,t);for(const n of gm.values())rE(n,t);for(const n of PL.values())rE(n,t);return!0}function Sr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function CL(t,e,n=pm){Sr(t,e).clearInstance(n)}function He(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new ua("app","Firebase",NL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=RL;function uA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(n||(n=ZT()),!n)throw Ps.create("no-options");const s=gm.get(i);if(s){if(nr(n,s.options)&&nr(r,s.config))return s;throw Ps.create("duplicate-app",{appName:i})}const o=new FD(i);for(const l of t0.values())o.addComponent(l);const a=new DL(n,r,o);return gm.set(i,a),a}function Ld(t=pm){const e=gm.get(t);if(!e&&t===pm&&ZT())return uA();if(!e)throw Ps.create("no-app",{appName:t});return e}function zt(t,e,n){let r=kL[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(o.join(" "));return}rr(new Ln(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="firebase-heartbeat-database",VL=1,id="firebase-heartbeat-store";let kg=null;function dA(){return kg||(kg=cA(LL,VL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(id)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),kg}async function OL(t){try{const n=(await dA()).transaction(id),r=await n.objectStore(id).get(hA(t));return await n.done,r}catch(e){if(e instanceof jn)vi.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(n.message)}}}async function iE(t,e){try{const r=(await dA()).transaction(id,"readwrite");await r.objectStore(id).put(e,hA(t)),await r.done}catch(n){if(n instanceof jn)vi.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vi.warn(r.message)}}}function hA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=1024,jL=30;class FL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>jL){const o=zL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sE(),{heartbeatsToSend:r,unsentEntries:i}=UL(this._heartbeatsCache.heartbeats),s=mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return vi.warn(n),""}}}function sE(){return new Date().toISOString().substring(0,10)}function UL(t,e=ML){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),oE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O_()?oA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function oE(t){return mm(JSON.stringify({version:2,heartbeats:t})).length}function zL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){rr(new Ln("platform-logger",e=>new eL(e),"PRIVATE")),rr(new Ln("heartbeat",e=>new FL(e),"PRIVATE")),zt(e0,nE,t),zt(e0,nE,"esm2020"),zt("fire-js","")}$L("");var qL="firebase",HL="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt(qL,HL,"app");const fA="@firebase/installations",j_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=1e4,pA=`w:${j_}`,gA="FIS_v2",GL="https://firebaseinstallations.googleapis.com/v1",WL=60*60*1e3,KL="installations",QL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qo=new ua(KL,QL,YL);function yA(t){return t instanceof jn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A({projectId:t}){return`${GL}/projects/${t}/installations`}function wA(t){return{token:t.token,requestStatus:2,expiresIn:XL(t.expiresIn),creationTime:Date.now()}}async function vA(t,e){const r=(await e.json()).error;return Qo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function IA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function JL(t,{refreshToken:e}){const n=IA(t);return n.append("Authorization",ZL(e)),n}async function EA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function XL(t){return Number(t.replace("s","000"))}function ZL(t){return`${gA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_A(t),i=IA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:gA,appId:t.appId,sdkVersion:pA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await EA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:wA(u.authToken)}}else throw await vA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^[cdef][\w-]{21}$/,n0="";function rV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=iV(t);return nV.test(n)?n:n0}catch{return n0}}function iV(t){return tV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Map;function TA(t,e){const n=ip(t);AA(n,e),sV(n,e)}function AA(t,e){const n=bA.get(t);if(n)for(const r of n)r(e)}function sV(t,e){const n=oV();n&&n.postMessage({key:t,fid:e}),aV()}let Lo=null;function oV(){return!Lo&&"BroadcastChannel"in self&&(Lo=new BroadcastChannel("[Firebase] FID Change"),Lo.onmessage=t=>{AA(t.data.key,t.data.fid)}),Lo}function aV(){bA.size===0&&Lo&&(Lo.close(),Lo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firebase-installations-database",cV=1,Yo="firebase-installations-store";let Pg=null;function F_(){return Pg||(Pg=cA(lV,cV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Yo)}}})),Pg}async function ym(t,e){const n=ip(t),i=(await F_()).transaction(Yo,"readwrite"),s=i.objectStore(Yo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&TA(t,e.fid),e}async function SA(t){const e=ip(t),r=(await F_()).transaction(Yo,"readwrite");await r.objectStore(Yo).delete(e),await r.done}async function sp(t,e){const n=ip(t),i=(await F_()).transaction(Yo,"readwrite"),s=i.objectStore(Yo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&TA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U_(t){let e;const n=await sp(t.appConfig,r=>{const i=uV(r),s=dV(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===n0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uV(t){const e=t||{fid:rV(),registrationStatus:0};return RA(e)}function dV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Qo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=hV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:fV(t)}:{installationEntry:e}}async function hV(t,e){try{const n=await eV(t,e);return ym(t.appConfig,n)}catch(n){throw yA(n)&&n.customData.serverCode===409?await SA(t.appConfig):await ym(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function fV(t){let e=await aE(t.appConfig);for(;e.registrationStatus===1;)await xA(100),e=await aE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await U_(t);return r||n}return e}function aE(t){return sp(t,e=>{if(!e)throw Qo.create("installation-not-found");return RA(e)})}function RA(t){return mV(t)?{fid:t.fid,registrationStatus:0}:t}function mV(t){return t.registrationStatus===1&&t.registrationTime+mA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV({appConfig:t,heartbeatServiceProvider:e},n){const r=gV(t,n),i=JL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:pA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await EA(()=>fetch(r,a));if(l.ok){const u=await l.json();return wA(u)}else throw await vA("Generate Auth Token",l)}function gV(t,{fid:e}){return`${_A(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(t,e=!1){let n;const r=await sp(t.appConfig,s=>{if(!kA(s))throw Qo.create("not-registered");const o=s.authToken;if(!e&&wV(o))return s;if(o.requestStatus===1)return n=yV(t,e),s;{if(!navigator.onLine)throw Qo.create("app-offline");const a=IV(s);return n=_V(t,a),a}});return n?await n:r.authToken}async function yV(t,e){let n=await lE(t.appConfig);for(;n.authToken.requestStatus===1;)await xA(100),n=await lE(t.appConfig);const r=n.authToken;return r.requestStatus===0?B_(t,e):r}function lE(t){return sp(t,e=>{if(!kA(e))throw Qo.create("not-registered");const n=e.authToken;return EV(n)?{...e,authToken:{requestStatus:0}}:e})}async function _V(t,e){try{const n=await pV(t,e),r={...e,authToken:n};return await ym(t.appConfig,r),n}catch(n){if(yA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await SA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ym(t.appConfig,r)}throw n}}function kA(t){return t!==void 0&&t.registrationStatus===2}function wV(t){return t.requestStatus===2&&!vV(t)}function vV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+WL}function IV(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function EV(t){return t.requestStatus===1&&t.requestTime+mA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(t){const e=t,{installationEntry:n,registrationPromise:r}=await U_(e);return r?r.catch(console.error):B_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e=!1){const n=t;return await TV(n),(await B_(n,e)).token}async function TV(t){const{registrationPromise:e}=await U_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){if(!t||!t.options)throw Cg("App Configuration");if(!t.name)throw Cg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Cg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Cg(t){return Qo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="installations",SV="installations-internal",RV=t=>{const e=t.getProvider("app").getImmediate(),n=AV(e),r=Sr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},kV=t=>{const e=t.getProvider("app").getImmediate(),n=Sr(e,PA).getImmediate();return{getId:()=>xV(n),getToken:i=>bV(n,i)}};function PV(){rr(new Ln(PA,RV,"PUBLIC")),rr(new Ln(SV,kV,"PRIVATE"))}PV();zt(fA,j_);zt(fA,j_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="analytics",CV="firebase_id",NV="origin",DV=60*1e3,LV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",z_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Dd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pn=new ua("analytics","Analytics",VV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){if(!t.startsWith(z_)){const e=Pn.create("invalid-gtag-resource",{gtagURL:t});return _n.warn(e.message),""}return t}function CA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function MV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jV(t,e){const n=MV("firebase-js-sdk-policy",{createScriptURL:OV}),r=document.createElement("script"),i=`${z_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function FV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function UV(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await CA(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){_n.error(a)}t("config",i,s)}async function BV(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await CA(n);for(const l of o){const u=a.find(f=>f.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){_n.error(s)}}function zV(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await BV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await UV(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){_n.error(a)}}return i}function $V(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=zV(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function qV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(z_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=30,GV=1e3;class WV{constructor(e={},n=GV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const NA=new WV;function KV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function QV(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:KV(n)},i=LV.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Pn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function YV(t,e=NA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Pn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new ZV;return setTimeout(async()=>{a.abort()},n!==void 0?n:DV),DA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function DA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=NA){var a;const{appId:s,measurementId:o}=t;try{await JV(r,e)}catch(l){if(o)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await QV(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!XV(u)){if(i.deleteThrottleMetadata(s),o)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?XI(n,i.intervalMillis,HV):XI(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,f),_n.debug(`Calling attemptFetch again in ${h} millis`),DA(t,f,r,i)}}function JV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XV(t){if(!(t instanceof jn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class ZV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function eO(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(){if(O_())try{await oA()}catch(t){return _n.warn(Pn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return _n.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function nO(t,e,n,r,i,s,o){const a=YV(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>_n.error(p)),e.push(a);const l=tO().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);qV(s)||jV(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[NV]="firebase",f.update=!0,h!=null&&(f[CV]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.app=e}_delete(){return delete Au[this.app.options.appId],Promise.resolve()}}let Au={},cE=[];const uE={};let Ng="dataLayer",iO="gtag",dE,LA,hE=!1;function sO(){const t=[];if(rA()&&t.push("This is a browser extension environment."),bD()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Pn.create("invalid-analytics-context",{errorInfo:e});_n.warn(n.message)}}function oO(t,e,n){sO();const r=t.options.appId;if(!r)throw Pn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pn.create("no-api-key");if(Au[r]!=null)throw Pn.create("already-exists",{id:r});if(!hE){FV(Ng);const{wrappedGtag:s,gtagCore:o}=$V(Au,cE,uE,Ng,iO);LA=s,dE=o,hE=!0}return Au[r]=nO(t,cE,uE,e,dE,Ng,n),new rO(t)}function aO(t=Ld()){t=X(t);const e=Sr(t,_m);return e.isInitialized()?e.getImmediate():lO(t)}function lO(t,e={}){const n=Sr(t,_m);if(n.isInitialized()){const i=n.getImmediate();if(nr(e,n.getOptions()))return i;throw Pn.create("already-initialized")}return n.initialize({options:e})}function VA(t,e,n,r){t=X(t),eO(LA,Au[t.app.options.appId],e,n,r).catch(i=>_n.error(i))}const fE="@firebase/analytics",mE="0.10.18";function cO(){rr(new Ln(_m,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return oO(r,i,n)},"PUBLIC")),rr(new Ln("analytics-internal",t,"PRIVATE")),zt(fE,mE),zt(fE,mE,"esm2020");function t(e){try{const n=e.getProvider(_m).getImmediate();return{logEvent:(r,i,s)=>VA(n,r,i,s)}}catch(n){throw Pn.create("interop-component-reg-failed",{reason:n})}}}cO();var pE="@firebase/ai",gE="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="AI",yE="us-central1",_E={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.backendType=e}}class op extends MA{constructor(){super(OA.GOOGLE_AI)}}class $_ extends MA{constructor(e=yE){super(OA.VERTEX_AI),e?this.location=e:this.location=yE}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uO=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof $_?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends jn{constructor(e,n,r){const i=Nl,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,Jn),Object.setPrototypeOf(this,Jn.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){if(t instanceof op)return`${Nl}/googleai`;if(t instanceof $_)return`${Nl}/vertexai/${t.location}`;throw new Jn(ui.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function hO(t){const e=t.split("/");if(e[0]!==Nl)throw new Jn(ui.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new Jn(ui.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new $_(r);case"googleai":return new op;default:throw new Jn(ui.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Dd("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wE;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(wE||(wE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t=Ld(),e){t=X(t);const n=Sr(t,Nl),r=(e==null?void 0:e.backend)??new op,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=dO(r),o=n.getImmediate({identifier:s});return o.options=i,o}var Ao;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(Ao||(Ao={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return Xi.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===_E.ONLY_IN_CLOUD)return Xi.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===_E.ONLY_ON_DEVICE){if(n===Ao.UNAVAILABLE)throw new Jn(ui.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===Ao.DOWNLOADABLE||n===Ao.DOWNLOADING)&&(Xi.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==Ao.AVAILABLE?(Xi.debug(`On-device inference unavailable because availability is "${n}".`),!1):yr.isOnDeviceRequest(e)?!0:(Xi.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(yr.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return yr.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(yr.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return yr.toStreamResponse(i)}async countTokens(e){throw new Jn(ui.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return Xi.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return Xi.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&yr.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return Xi.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===Ao.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(yr.toLanguageModelMessageContent));return{role:yr.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new Jn(ui.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new Jn(ui.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}yr.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function mO(t,e,n){if(typeof e<"u"&&t)return new yr(e.LanguageModel,t,n)}function pO(t,{instanceIdentifier:e}){if(!e)throw new Jn(ui.ERROR,"AIService instance identifier is undefined.");const n=hO(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new uO(r,n,i,s,mO)}function gO(){rr(new Ln(Nl,pO,"PUBLIC").setMultipleInstances(!0)),zt(pE,gE),zt(pE,gE,"esm2020")}gO();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB={PHONE:"phone",TOTP:"totp"},QB={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},YB={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},JB={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},XB={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZB=yO,_O=jA,FA=new ua("auth","Firebase",jA()),ez={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Dd("@firebase/auth");function wO(t,...e){wm.logLevel<=pe.WARN&&wm.warn(`Auth (${da}): ${t}`,...e)}function If(t,...e){wm.logLevel<=pe.ERROR&&wm.error(`Auth (${da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw H_(t,...e)}function tn(t,...e){return H_(t,...e)}function q_(t,e,n){const r={..._O(),[e]:n};return new ua("auth","Firebase",r).create(e,{appName:t.name})}function bt(t){return q_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ic(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&wn(t,"argument-error"),q_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function H_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FA.create(t,...e)}function W(t,e,...n){if(!t)throw H_(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw If(e),new Error(e)}function Ii(t,e){t||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function G_(){return vE()==="http:"||vE()==="https:"}function vE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G_()||rA()||"connection"in navigator)?navigator.onLine:!0}function IO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ii(n>e,"Short delay should be less than long delay!"),this.isMobile=vD()||ED()}get(){return vO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t,e){Ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bO=new Vd(3e4,6e4);function Ue(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Be(t,e,n,r,i={}){return BA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return ID()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Si(t.emulatorConfig.host)&&(u.credentials="include"),UA.fetch()(await zA(t,t.config.apiHost,n,a),u)})}async function BA(t,e,n){t._canInitEmulator=!1;const r={...EO,...e};try{const i=new AO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw du(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw q_(t,h,u);wn(t,h)}}catch(i){if(i instanceof jn)throw i;wn(t,"network-request-failed",{message:String(i)})}}async function Ri(t,e,n,r,i={}){const s=await Be(t,e,n,r,i);return"mfaPendingCredential"in s&&wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function zA(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?W_(t.config,i):`${t.config.apiScheme}://${i}`;return xO.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function TO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),bO.get())})}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){return t!==void 0&&t.getResponse!==void 0}function EE(t){return t!==void 0&&t.enterprise!==void 0}class $A{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return TO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t){return(await Be(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function qA(t,e){return Be(t,"GET","/v2/recaptchaConfig",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(t,e){return Be(t,"POST","/v1/accounts:delete",e)}async function kO(t,e){return Be(t,"POST","/v1/accounts:update",e)}async function vm(t,e){return Be(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t,e=!1){return X(t).getIdToken(e)}async function PO(t,e=!1){const n=X(t),r=await n.getIdToken(e),i=ap(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Su(Dg(i.auth_time)),issuedAtTime:Su(Dg(i.iat)),expirationTime:Su(Dg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Dg(t){return Number(t)*1e3}function ap(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return If("JWT malformed, contained fewer than 3 sections"),null;try{const i=QT(n);return i?JSON.parse(i):(If("Failed to decode base64 JWT payload"),null)}catch(i){return If("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xE(t){const e=ap(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&CO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Ei(t,vm(e,{idToken:n}));W(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?HA(i.providerUserInfo):[],o=LO(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new r0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function DO(t){const e=X(t);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(t,e){const n=await BA(t,{},async()=>{const r=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await zA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Si(t.emulatorConfig.host)&&(l.credentials="include"),UA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OO(t,e){return Be(t,"POST","/v2/accounts:revokeToken",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=xE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await VO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new _l;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new NO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new r0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ei(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return PO(this,e)}reload(){return DO(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await od(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(He(this.auth.app))return Promise.reject(bt(this.auth));const e=await this.getIdToken();return await Ei(this,RO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:_,providerData:I,stsTokenManager:A}=n;W(f&&A,e,"internal-error");const D=_l.fromJSON(this.name,A);W(typeof f=="string",e,"internal-error"),Zi(r,e.name),Zi(i,e.name),W(typeof p=="boolean",e,"internal-error"),W(typeof _=="boolean",e,"internal-error"),Zi(s,e.name),Zi(o,e.name),Zi(a,e.name),Zi(l,e.name),Zi(u,e.name),Zi(h,e.name);const E=new Er({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:D,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(E.providerData=I.map(v=>({...v}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new _l;i.updateFromServerResponse(n);const s=new Er({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await od(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];W(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?HA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new _l;a.updateFromIdToken(r);const l=new Er({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new r0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;function di(t){Ii(t instanceof Function,"Expected a class definition");let e=bE.get(t);return e?(Ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GA.type="NONE";const TE=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class wl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ef(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ef("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vm(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wl(di(TE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||di(TE);const o=Ef(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await vm(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Er._fromGetAccountInfoResponse(e,p,h)}else f=Er._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new wl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new wl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XA(e))return"Blackberry";if(ZA(e))return"Webos";if(KA(e))return"Safari";if((e.includes("chrome/")||QA(e))&&!e.includes("edge/"))return"Chrome";if(JA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WA(t=_t()){return/firefox\//i.test(t)}function KA(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QA(t=_t()){return/crios\//i.test(t)}function YA(t=_t()){return/iemobile/i.test(t)}function JA(t=_t()){return/android/i.test(t)}function XA(t=_t()){return/blackberry/i.test(t)}function ZA(t=_t()){return/webos/i.test(t)}function K_(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MO(t=_t()){var e;return K_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function jO(){return xD()&&document.documentMode===10}function eS(t=_t()){return K_(t)||JA(t)||ZA(t)||XA(t)||/windows phone/i.test(t)||YA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t,e=[]){let n;switch(t){case"Browser":n=AE(_t());break;case"Worker":n=`${AE(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(t,e={}){return Be(t,"GET","/v2/passwordPolicy",Ue(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=6;class zO{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new FO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vm(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(He(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(He(this.app))return Promise.reject(bt(this));const n=e?X(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return He(this.app)?Promise.reject(bt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return He(this.app)?Promise.reject(bt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UO(this),n=new zO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&wO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nt(t){return X(t)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=kD(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qO(t){Od=t}function Q_(t){return Od.loadJS(t)}function HO(){return Od.recaptchaV2Script}function GO(){return Od.recaptchaEnterpriseScript}function WO(){return Od.gapiScript}function nS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=500,QO=6e4,Gh=1e12;class YO{constructor(e){this.auth=e,this.counter=Gh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new ZO(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Gh;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Gh;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Gh;return(r=this._widgets.get(n))==null||r.execute(),""}}class JO{constructor(){this.enterprise=new XO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class XO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZO{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;W(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=e4(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},QO)},KO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function e4(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const t4="recaptcha-enterprise",Ru="NO_RECAPTCHA";class rS{constructor(e){this.type=t4,this.auth=nt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{qA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new $A(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;EE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ru)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JO().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&EE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GO();l.length!==0&&(l+=a),Q_(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Xc(t,e,n,r=!1,i=!1){const s=new rS(t);let o;if(i)o=Ru;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cs(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Xc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Xc(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Xc(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Xc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await Xc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function iS(t){const e=nt(t),n=await qA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $A(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new rS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t,e){const n=Sr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(nr(s,e??{}))return i;wn(i,"already-initialized")}return n.initialize({options:e})}function r4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function i4(t,e,n){const r=nt(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=sS(e),{host:o,port:a}=s4(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(nr(u,r.config.emulator)&&nr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Si(o)?(rp(`${s}//${o}${l}`),V_("Auth",!0)):i||o4()}function sS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function s4(t){const e=sS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:RE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:RE(o)}}}function RE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(t,e){return Be(t,"POST","/v1/accounts:resetPassword",Ue(t,e))}async function a4(t,e){return Be(t,"POST","/v1/accounts:update",e)}async function l4(t,e){return Be(t,"POST","/v1/accounts:signUp",e)}async function c4(t,e){return Be(t,"POST","/v1/accounts:update",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t,e){return Ri(t,"POST","/v1/accounts:signInWithPassword",Ue(t,e))}async function lp(t,e){return Be(t,"POST","/v1/accounts:sendOobCode",Ue(t,e))}async function d4(t,e){return lp(t,e)}async function h4(t,e){return lp(t,e)}async function f4(t,e){return lp(t,e)}async function m4(t,e){return lp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e){return Ri(t,"POST","/v1/accounts:signInWithEmailLink",Ue(t,e))}async function g4(t,e){return Ri(t,"POST","/v1/accounts:signInWithEmailLink",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends Md{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ad(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ad(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cs(e,n,"signInWithPassword",u4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return p4(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cs(e,r,"signUpPassword",l4,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return g4(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(t,e){return Ri(t,"POST","/v1/accounts:signInWithIdp",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4="http://localhost";class xi extends Md{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new xi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pi(e,n)}buildRequest(){const e={requestUri:y4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t,e){return Be(t,"POST","/v1/accounts:sendVerificationCode",Ue(t,e))}async function _4(t,e){return Ri(t,"POST","/v1/accounts:signInWithPhoneNumber",Ue(t,e))}async function w4(t,e){const n=await Ri(t,"POST","/v1/accounts:signInWithPhoneNumber",Ue(t,e));if(n.temporaryProof)throw du(t,"account-exists-with-different-credential",n);return n}const v4={USER_NOT_FOUND:"user-not-found"};async function I4(t,e){const n={...e,operation:"REAUTH"};return Ri(t,"POST","/v1/accounts:signInWithPhoneNumber",Ue(t,n),v4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Md{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Fo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Fo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return w4(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return I4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Fo({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x4(t){const e=cu(uu(t)).link,n=e?cu(uu(e)).deep_link_id:null,r=cu(uu(t)).deep_link_id;return(r?cu(uu(r)).link:null)||r||n||e||t}class jd{constructor(e){const n=cu(uu(e)),r=n.apiKey??null,i=n.oobCode??null,s=E4(n.mode??null);W(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=x4(e);try{return new jd(n)}catch{return null}}}function nz(t){return jd.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(e,n){return ad._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jd.parseLink(n);return W(r,"argument-error"),ad._fromEmailAndCode(e,r.code,r.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends ki{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xf extends sc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return W("providerId"in n&&"signInMethod"in n,"argument-error"),xi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return W(e.idToken||e.accessToken,"argument-error"),xi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return xf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new xf(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends sc{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends sc{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="http://localhost";class ld extends Md{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return pi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new ld(r,s)}static _create(e,n){return new ld(e,n)}buildRequest(){return{requestUri:b4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="saml.";class i0 extends ki{constructor(e){W(e.startsWith(T4),"argument-error"),super(e)}static credentialFromResult(e){return i0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return i0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=ld.fromJSON(e);return W(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return ld._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends sc{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(t,e){return Ri(t,"POST","/v1/accounts:signUp",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Er._fromIdTokenResponse(e,r,i),o=PE(r);return new ir({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=PE(r);return new ir({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function PE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t){var i;if(He(t.app))return Promise.reject(bt(t));const e=nt(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new ir({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await aS(e,{returnSecureToken:!0}),r=await ir._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends jn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Im.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Im(e,n,r,i)}}function lS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Im._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(t,e){const n=X(t);await cp(!0,n,e);const{providerUserInfo:r}=await kO(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=cS(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Y_(t,e,n=!1){const r=await Ei(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ir._forOperation(t,"link",r)}async function cp(t,e,n){await od(e);const r=cS(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";W(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t,e,n=!1){const{auth:r}=t;if(He(r.app))return Promise.reject(bt(r));const i="reauthenticate";try{const s=await Ei(t,lS(r,i,e,t),n);W(s.idToken,r,"internal-error");const o=ap(s.idToken);W(o,r,"internal-error");const{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),ir._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(t,e,n=!1){if(He(t.app))return Promise.reject(bt(t));const r="signIn",i=await lS(t,r,e),s=await ir._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function J_(t,e){return dS(nt(t),e)}async function S4(t,e){const n=X(t);return await cp(!1,n,e.providerId),Y_(n,e)}async function R4(t,e){return uS(X(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e){return Ri(t,"POST","/v1/accounts:signInWithCustomToken",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iz(t,e){if(He(t.app))return Promise.reject(bt(t));const n=nt(t),r=await k4(n,{token:e,returnSecureToken:!0}),i=await ir._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?X_._fromServerResponse(e,n):"totpInfo"in n?Z_._fromServerResponse(e,n):wn(e,"internal-error")}}class X_ extends Fd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new X_(n)}}class Z_ extends Fd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Z_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e,n){var r;W(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),W(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(t){const e=nt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sz(t,e,n){const r=nt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&up(r,i,n),await Cs(r,i,"getOobCode",h4,"EMAIL_PASSWORD_PROVIDER")}async function oz(t,e,n){await oS(X(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ew(t),r})}async function az(t,e){await c4(X(t),{oobCode:e})}async function P4(t,e){const n=X(t),r=await oS(n,{oobCode:e}),i=r.requestType;switch(W(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(r.mfaInfo,n,"internal-error");default:W(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Fd._fromServerResponse(nt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function lz(t,e){const{data:n}=await P4(X(t),e);return n.email}async function cz(t,e,n){if(He(t.app))return Promise.reject(bt(t));const r=nt(t),o=await Cs(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aS,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ew(t),l}),a=await ir._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function uz(t,e,n){return He(t.app)?Promise.reject(bt(t)):J_(X(t),ha.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ew(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(t,e,n){const r=nt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){W(a.handleCodeInApp,r,"argument-error"),a&&up(r,o,a)}s(i,n),await Cs(r,i,"getOobCode",f4,"EMAIL_PASSWORD_PROVIDER")}function hz(t,e){const n=jd.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function fz(t,e,n){if(He(t.app))return Promise.reject(bt(t));const r=X(t),i=ha.credentialWithLink(e,n||sd());return W(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),J_(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){return Be(t,"POST","/v1/accounts:createAuthUri",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mz(t,e){const n=G_()?sd():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await C4(X(t),r);return i||[]}async function pz(t,e){const n=X(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&up(n.auth,i,e);const{email:s}=await d4(n.auth,i);s!==t.email&&await t.reload()}async function gz(t,e,n){const r=X(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&up(r.auth,s,n);const{email:o}=await m4(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(t,e){return Be(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yz(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=X(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ei(r,N4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function _z(t,e){const n=X(t);return He(n.auth.app)?Promise.reject(bt(n.auth)):hS(n,e,null)}function wz(t,e){return hS(X(t),null,e)}async function hS(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ei(t,a4(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=ap(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new vl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new L4(r,n);case"github.com":return new V4(r,n);case"google.com":return new O4(r,n);case"twitter.com":return new M4(r,n,t.screenName||null);case"custom":case"anonymous":return new vl(r,null);default:return new vl(r,e,n)}}class vl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class fS extends vl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class L4 extends vl{constructor(e,n){super(e,"facebook.com",n)}}class V4 extends fS{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class O4 extends vl{constructor(e,n){super(e,"google.com",n)}}class M4 extends fS{constructor(e,n,r){super(e,"twitter.com",n,r)}}function vz(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:D4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t,e){return X(t).setPersistence(e)}function Ez(t){return iS(t)}async function xz(t,e){return nt(t).validatePassword(e)}function j4(t,e,n,r){return X(t).onIdTokenChanged(e,n,r)}function F4(t,e,n){return X(t).beforeAuthStateChanged(e,n)}function U4(t,e,n,r){return X(t).onAuthStateChanged(e,n,r)}function bz(t){X(t).useDeviceLanguage()}function Tz(t,e){return X(t).updateCurrentUser(e)}function Az(t){return X(t).signOut()}function Sz(t,e){return nt(t).revokeAccessToken(e)}async function Rz(t){return X(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Vo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Vo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Vo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Vo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=nt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Fd._fromServerResponse(r,a));W(i.mfaPendingCredential,r,"internal-error");const o=Vo._fromMfaPendingCredential(i.mfaPendingCredential);return new tw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await ir._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return W(n.user,r,"internal-error"),ir._forOperation(n.user,n.operationType,u);default:wn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function kz(t,e){var i;const n=X(t),r=e;return W(e.customData.operationType,n,"argument-error"),W((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),tw._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:start",Ue(t,e))}function B4(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(t,e))}function z4(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:start",Ue(t,e))}function $4(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(t,e))}function q4(t,e){return Be(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(t,e))}class nw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Fd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new nw(e)}async getSession(){return Vo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ei(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ei(this.user,q4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Lg=new WeakMap;function Pz(t){const e=X(t);return Lg.has(e)||Lg.set(e,nw._fromUser(e)),Lg.get(e)}const Em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1e3,G4=10;class pS extends mS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);jO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,G4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},H4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pS.type="LOCAL";const W4=pS;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=1e3;function Vg(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Og(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class gS{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Og(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return Vg(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Og(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Og(e);if(window.cookieStore){const a=u=>{const h=u.changed.find(p=>p.name===r);h&&n(h.value),u.deleted.find(p=>p.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=Vg(r);const s=setInterval(()=>{const a=Vg(r);a!==i&&(n(a),i=a)},K4),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}gS.type="COOKIE";const Cz=gS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS extends mS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yS.type="SESSION";const _S=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Q4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=hp("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return window}function J4(t){ht().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(){return typeof ht().WorkerGlobalScope<"u"&&typeof ht().importScripts=="function"}async function X4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eM(){return rw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="firebaseLocalStorageDb",tM=1,xm="firebaseLocalStorage",vS="fbase_key";class Ud{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fp(t,e){return t.transaction([xm],e?"readwrite":"readonly").objectStore(xm)}function nM(){const t=indexedDB.deleteDatabase(wS);return new Ud(t).toPromise()}function s0(){const t=indexedDB.open(wS,tM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xm,{keyPath:vS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xm)?e(r):(r.close(),await nM(),e(await s0()))})})}async function NE(t,e,n){const r=fp(t,!0).put({[vS]:e,value:n});return new Ud(r).toPromise()}async function rM(t,e){const n=fp(t,!1).get(e),r=await new Ud(n).toPromise();return r===void 0?null:r.value}function DE(t,e){const n=fp(t,!0).delete(e);return new Ud(n).toPromise()}const iM=800,sM=3;class IS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dp._getInstance(eM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await X4(),!this.activeServiceWorker)return;this.sender=new Y4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await NE(e,Em,"1"),await DE(e,Em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>NE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=fp(i,!1).getAll();return new Ud(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IS.type="LOCAL";const oM=IS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e){return Be(t,"POST","/v2/accounts/mfaSignIn:start",Ue(t,e))}function aM(t,e){return Be(t,"POST","/v2/accounts/mfaSignIn:finalize",Ue(t,e))}function lM(t,e){return Be(t,"POST","/v2/accounts/mfaSignIn:finalize",Ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=nS("rcb"),cM=new Vd(3e4,6e4);class uM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=ht().grecaptcha)!=null&&e.render)}load(e,n=""){return W(dM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&IE(ht().grecaptcha)?Promise.resolve(ht().grecaptcha):new Promise((r,i)=>{const s=ht().setTimeout(()=>{i(tn(e,"network-request-failed"))},cM.get());ht()[Mg]=()=>{ht().clearTimeout(s),delete ht()[Mg];const a=ht().grecaptcha;if(!a||!IE(a)){i(tn(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const f=l(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${HO()}?${rc({onload:Mg,render:"explicit",hl:n})}`;Q_(o).catch(()=>{clearTimeout(s),i(tn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=ht().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function dM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class hM{async load(e){return new YO(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="recaptcha",fM={theme:"light",type:"image"};class Nz{constructor(e,n,r={...fM}){this.parameters=r,this.type=ku,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nt(e),this.isInvisible=this.parameters.size==="invisible",W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;W(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hM:new uM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ht()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){W(G_()&&!rw(),this.auth,"internal-error"),await mM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await SO(this.auth);W(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function mM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Fo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Dz(t,e,n){if(He(t.app))return Promise.reject(bt(t));const r=nt(t),i=await mp(r,e,X(n));return new iw(i,s=>J_(r,s))}async function Lz(t,e,n){const r=X(t);await cp(!1,r,"phone");const i=await mp(r.auth,e,X(n));return new iw(i,s=>S4(r,s))}async function Vz(t,e,n){const r=X(t);if(He(r.auth.app))return Promise.reject(bt(r.auth));const i=await mp(r.auth,e,X(n));return new iw(i,s=>R4(r,s))}async function mp(t,e,n){var r;if(!t._getRecaptchaConfig())try{await iS(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){W(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Cs(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Ru){W((n==null?void 0:n.type)===ku,h,"argument-error");const p=await jg(h,f,n);return CE(h,p)}return CE(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{W(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;W(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Cs(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===Ru){W((n==null?void 0:n.type)===ku,f,"argument-error");const _=await jg(f,p,n);return LE(f,_)}return LE(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Cs(t,s,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===Ru){W((n==null?void 0:n.type)===ku,u,"argument-error");const f=await jg(u,h,n);return kE(u,f)}return kE(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function Oz(t,e){const n=X(t);if(He(n.auth.app))return Promise.reject(bt(n.auth));await Y_(n,e)}async function jg(t,e,n){W(n.type===ku,t,"argument-error");const r=await n.verify();W(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.providerId=Il.PROVIDER_ID,this.auth=nt(e)}verifyPhoneNumber(e,n){return mp(this.auth,e,X(n))}static credential(e,n){return Fo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Il.credentialFromTaggedObject(n)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Fo._fromTokenResponse(n,r):null}}Il.PROVIDER_ID="phone";Il.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t,e){return e?di(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends Md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pM(t){return dS(t.auth,new sw(t),t.bypassAuthState)}function gM(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),uS(n,new sw(t),t.bypassAuthState)}async function yM(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),Y_(n,new sw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pM;case"linkViaPopup":case"linkViaRedirect":return yM;case"reauthViaPopup":case"reauthViaRedirect":return gM;default:wn(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new Vd(2e3,1e4);async function Mz(t,e,n){if(He(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=nt(t);ic(t,e,ki);const i=fa(r,n);return new hi(r,"signInViaPopup",e,i).executeNotNull()}async function jz(t,e,n){const r=X(t);if(He(r.auth.app))return Promise.reject(tn(r.auth,"operation-not-supported-in-this-environment"));ic(r.auth,e,ki);const i=fa(r.auth,n);return new hi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Fz(t,e,n){const r=X(t);ic(r.auth,e,ki);const i=fa(r.auth,n);return new hi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class hi extends ES{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){Ii(this.filter.length===1,"Popup operations only handle one event");const e=hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_M.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",bf=new Map;class vM extends ES{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=bf.get(this.auth._key());if(!e){try{const r=await IM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}bf.set(this.auth._key(),e)}return this.bypassAuthState||bf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IM(t,e){const n=bS(e),r=xS(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function ow(t,e){return xS(t)._set(bS(e),"true")}function EM(t,e){bf.set(t._key(),e)}function xS(t){return di(t._redirectPersistence)}function bS(t){return Ef(wM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t,e,n){return xM(t,e,n)}async function xM(t,e,n){if(He(t.app))return Promise.reject(bt(t));const r=nt(t);ic(t,e,ki),await r._initializationPromise;const i=fa(r,n);return await ow(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Bz(t,e,n){return bM(t,e,n)}async function bM(t,e,n){const r=X(t);if(ic(r.auth,e,ki),He(r.auth.app))return Promise.reject(bt(r.auth));await r.auth._initializationPromise;const i=fa(r.auth,n);await ow(i,r.auth);const s=await AS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function zz(t,e,n){return TM(t,e,n)}async function TM(t,e,n){const r=X(t);ic(r.auth,e,ki),await r.auth._initializationPromise;const i=fa(r.auth,n);await cp(!1,r,e.providerId),await ow(i,r.auth);const s=await AS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function $z(t,e){return await nt(t)._initializationPromise,TS(t,e,!1)}async function TS(t,e,n=!1){if(He(t.app))return Promise.reject(bt(t));const r=nt(t),i=fa(r,e),o=await new vM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function AS(t){const e=hp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=10*60*1e3;class SM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AM&&this.cachedEventUids.clear(),this.cachedEventUids.has(VE(e))}saveEventToCache(e){this.cachedEventUids.add(VE(e)),this.lastProcessedEventTime=Date.now()}}function VE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e={}){return Be(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CM=/^https?/;async function NM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kM(t);for(const n of e)try{if(DM(n))return}catch{}wn(t,"unauthorized-domain")}function DM(t){const e=sd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CM.test(n))return!1;if(PM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Vd(3e4,6e4);function OE(){const t=ht().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VM(t){return new Promise((e,n)=>{var i,s,o;function r(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),n(tn(t,"network-request-failed"))},timeout:LM.get()})}if((s=(i=ht().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=ht().gapi)!=null&&o.load)r();else{const a=nS("iframefcb");return ht()[a]=()=>{gapi.load?r():n(tn(t,"network-request-failed"))},Q_(`${WO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function OM(t){return Tf=Tf||VM(t),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Vd(5e3,15e3),jM="__/auth/iframe",FM="emulator/auth/iframe",UM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zM(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?W_(e,FM):`https://${t.config.authDomain}/${jM}`,r={apiKey:e.apiKey,appName:t.name,v:da},i=BM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rc(r).slice(1)}`}async function $M(t){const e=await OM(t),n=ht().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:zM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=tn(t,"network-request-failed"),a=ht().setTimeout(()=>{s(o)},MM.get());function l(){ht().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HM=500,GM=600,WM="_blank",KM="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QM(t,e,n,r=HM,i=GM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...qM,width:r.toString(),height:i.toString(),top:s,left:o},u=_t().toLowerCase();n&&(a=QA(u)?WM:n),WA(u)&&(e=e||KM,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[_,I])=>`${p}${_}=${I},`,"");if(MO(u)&&a!=="_self")return YM(e||"",a),new ME(null);const f=window.open(e||"",a,h);W(f,t,"popup-blocked");try{f.focus()}catch{}return new ME(f)}function YM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="__/auth/handler",XM="emulator/auth/handler",ZM=encodeURIComponent("fac");async function jE(t,e,n,r,i,s){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:da,eventId:i};if(e instanceof ki){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",RD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof sc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${ZM}=${encodeURIComponent(l)}`:"";return`${ej(t)}?${rc(a).slice(1)}${u}`}function ej({config:t}){return t.emulator?W_(t,XM):`https://${t.authDomain}/${JM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="webStorageSupport";class tj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=TS,this._overrideRedirectResult=EM}async _openPopup(e,n,r,i){var o;Ii((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await jE(e,n,r,sd(),i);return QM(e,s,hp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await jE(e,n,r,sd(),i);return J4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ii(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $M(e),r=new SM(e);return n.register("authEvent",i=>(W(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fg,{type:Fg},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Fg];s!==void 0&&n(!!s),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eS()||KA()||K_()}}const nj=tj;class RS{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return $r("unexpected MultiFactorSessionType")}}}class aw extends RS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new aw(e)}_finalizeEnroll(e,n,r){return B4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return aM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class rj{constructor(){}static assertion(e){return aw._fromCredential(e)}}rj.FACTOR_ID="phone";class ij{static assertionForEnrollment(e,n){return cd._fromSecret(e,n)}static assertionForSignIn(e,n){return cd._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;W(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await z4(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return lw._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}ij.FACTOR_ID="totp";class cd extends RS{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new cd(n,void 0,e)}static _fromEnrollmentId(e,n){return new cd(n,e)}async _finalizeEnroll(e,n,r){return W(typeof this.secret<"u",e,"argument-error"),$4(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){W(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return lM(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class lw{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new lw(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(Wh(e)||Wh(n))&&(r=!0),r&&(Wh(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Wh(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Wh(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var FE="@firebase/auth",UE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aj(t){rr(new Ln("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(t)},u=new $O(r,i,s,l);return r4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Ln("auth-internal",e=>{const n=nt(e.getProvider("auth").getImmediate());return(r=>new sj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(FE,UE,oj(t)),zt(FE,UE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=5*60,cj=eA("authIdTokenMaxAge")||lj;let BE=null;const uj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cj)return;const i=n==null?void 0:n.token;BE!==i&&(BE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dj(t=Ld()){const e=Sr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n4(t,{popupRedirectResolver:nj,persistence:[oM,W4,_S]}),r=eA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=uj(s.toString());F4(n,o,()=>o(n.currentUser)),j4(n,a=>o(a))}}const i=JT("auth");return i&&i4(n,`http://${i}`),n}function hj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}qO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=tn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aj("Browser");var zE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ns,kS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,w){function S(){}S.prototype=w.prototype,b.D=w.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(R,N,P){for(var k=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)k[Gt-2]=arguments[Gt];return w.prototype[N].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,w,S){S||(S=0);var R=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)R[N]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(N=0;16>N;++N)R[N]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=b.g[0],S=b.g[1],N=b.g[2];var P=b.g[3],k=w+(P^S&(N^P))+R[0]+3614090360&4294967295;w=S+(k<<7&4294967295|k>>>25),k=P+(N^w&(S^N))+R[1]+3905402710&4294967295,P=w+(k<<12&4294967295|k>>>20),k=N+(S^P&(w^S))+R[2]+606105819&4294967295,N=P+(k<<17&4294967295|k>>>15),k=S+(w^N&(P^w))+R[3]+3250441966&4294967295,S=N+(k<<22&4294967295|k>>>10),k=w+(P^S&(N^P))+R[4]+4118548399&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(N^w&(S^N))+R[5]+1200080426&4294967295,P=w+(k<<12&4294967295|k>>>20),k=N+(S^P&(w^S))+R[6]+2821735955&4294967295,N=P+(k<<17&4294967295|k>>>15),k=S+(w^N&(P^w))+R[7]+4249261313&4294967295,S=N+(k<<22&4294967295|k>>>10),k=w+(P^S&(N^P))+R[8]+1770035416&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(N^w&(S^N))+R[9]+2336552879&4294967295,P=w+(k<<12&4294967295|k>>>20),k=N+(S^P&(w^S))+R[10]+4294925233&4294967295,N=P+(k<<17&4294967295|k>>>15),k=S+(w^N&(P^w))+R[11]+2304563134&4294967295,S=N+(k<<22&4294967295|k>>>10),k=w+(P^S&(N^P))+R[12]+1804603682&4294967295,w=S+(k<<7&4294967295|k>>>25),k=P+(N^w&(S^N))+R[13]+4254626195&4294967295,P=w+(k<<12&4294967295|k>>>20),k=N+(S^P&(w^S))+R[14]+2792965006&4294967295,N=P+(k<<17&4294967295|k>>>15),k=S+(w^N&(P^w))+R[15]+1236535329&4294967295,S=N+(k<<22&4294967295|k>>>10),k=w+(N^P&(S^N))+R[1]+4129170786&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^N&(w^S))+R[6]+3225465664&4294967295,P=w+(k<<9&4294967295|k>>>23),k=N+(w^S&(P^w))+R[11]+643717713&4294967295,N=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(N^P))+R[0]+3921069994&4294967295,S=N+(k<<20&4294967295|k>>>12),k=w+(N^P&(S^N))+R[5]+3593408605&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^N&(w^S))+R[10]+38016083&4294967295,P=w+(k<<9&4294967295|k>>>23),k=N+(w^S&(P^w))+R[15]+3634488961&4294967295,N=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(N^P))+R[4]+3889429448&4294967295,S=N+(k<<20&4294967295|k>>>12),k=w+(N^P&(S^N))+R[9]+568446438&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^N&(w^S))+R[14]+3275163606&4294967295,P=w+(k<<9&4294967295|k>>>23),k=N+(w^S&(P^w))+R[3]+4107603335&4294967295,N=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(N^P))+R[8]+1163531501&4294967295,S=N+(k<<20&4294967295|k>>>12),k=w+(N^P&(S^N))+R[13]+2850285829&4294967295,w=S+(k<<5&4294967295|k>>>27),k=P+(S^N&(w^S))+R[2]+4243563512&4294967295,P=w+(k<<9&4294967295|k>>>23),k=N+(w^S&(P^w))+R[7]+1735328473&4294967295,N=P+(k<<14&4294967295|k>>>18),k=S+(P^w&(N^P))+R[12]+2368359562&4294967295,S=N+(k<<20&4294967295|k>>>12),k=w+(S^N^P)+R[5]+4294588738&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^N)+R[8]+2272392833&4294967295,P=w+(k<<11&4294967295|k>>>21),k=N+(P^w^S)+R[11]+1839030562&4294967295,N=P+(k<<16&4294967295|k>>>16),k=S+(N^P^w)+R[14]+4259657740&4294967295,S=N+(k<<23&4294967295|k>>>9),k=w+(S^N^P)+R[1]+2763975236&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^N)+R[4]+1272893353&4294967295,P=w+(k<<11&4294967295|k>>>21),k=N+(P^w^S)+R[7]+4139469664&4294967295,N=P+(k<<16&4294967295|k>>>16),k=S+(N^P^w)+R[10]+3200236656&4294967295,S=N+(k<<23&4294967295|k>>>9),k=w+(S^N^P)+R[13]+681279174&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^N)+R[0]+3936430074&4294967295,P=w+(k<<11&4294967295|k>>>21),k=N+(P^w^S)+R[3]+3572445317&4294967295,N=P+(k<<16&4294967295|k>>>16),k=S+(N^P^w)+R[6]+76029189&4294967295,S=N+(k<<23&4294967295|k>>>9),k=w+(S^N^P)+R[9]+3654602809&4294967295,w=S+(k<<4&4294967295|k>>>28),k=P+(w^S^N)+R[12]+3873151461&4294967295,P=w+(k<<11&4294967295|k>>>21),k=N+(P^w^S)+R[15]+530742520&4294967295,N=P+(k<<16&4294967295|k>>>16),k=S+(N^P^w)+R[2]+3299628645&4294967295,S=N+(k<<23&4294967295|k>>>9),k=w+(N^(S|~P))+R[0]+4096336452&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~N))+R[7]+1126891415&4294967295,P=w+(k<<10&4294967295|k>>>22),k=N+(w^(P|~S))+R[14]+2878612391&4294967295,N=P+(k<<15&4294967295|k>>>17),k=S+(P^(N|~w))+R[5]+4237533241&4294967295,S=N+(k<<21&4294967295|k>>>11),k=w+(N^(S|~P))+R[12]+1700485571&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~N))+R[3]+2399980690&4294967295,P=w+(k<<10&4294967295|k>>>22),k=N+(w^(P|~S))+R[10]+4293915773&4294967295,N=P+(k<<15&4294967295|k>>>17),k=S+(P^(N|~w))+R[1]+2240044497&4294967295,S=N+(k<<21&4294967295|k>>>11),k=w+(N^(S|~P))+R[8]+1873313359&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~N))+R[15]+4264355552&4294967295,P=w+(k<<10&4294967295|k>>>22),k=N+(w^(P|~S))+R[6]+2734768916&4294967295,N=P+(k<<15&4294967295|k>>>17),k=S+(P^(N|~w))+R[13]+1309151649&4294967295,S=N+(k<<21&4294967295|k>>>11),k=w+(N^(S|~P))+R[4]+4149444226&4294967295,w=S+(k<<6&4294967295|k>>>26),k=P+(S^(w|~N))+R[11]+3174756917&4294967295,P=w+(k<<10&4294967295|k>>>22),k=N+(w^(P|~S))+R[2]+718787259&4294967295,N=P+(k<<15&4294967295|k>>>17),k=S+(P^(N|~w))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+w&4294967295,b.g[1]=b.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+N&4294967295,b.g[3]=b.g[3]+P&4294967295}r.prototype.u=function(b,w){w===void 0&&(w=b.length);for(var S=w-this.blockSize,R=this.B,N=this.h,P=0;P<w;){if(N==0)for(;P<=S;)i(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<w;)if(R[N++]=b.charCodeAt(P++),N==this.blockSize){i(this,R),N=0;break}}else for(;P<w;)if(R[N++]=b[P++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var w=1;w<b.length-8;++w)b[w]=0;var S=8*this.o;for(w=b.length-8;w<b.length;++w)b[w]=S&255,S/=256;for(this.u(b),b=Array(16),w=S=0;4>w;++w)for(var R=0;32>R;R+=8)b[S++]=this.g[w]>>>R&255;return b};function s(b,w){var S=a;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=w(b)}function o(b,w){this.h=w;for(var S=[],R=!0,N=b.length-1;0<=N;N--){var P=b[N]|0;R&&P==w||(S[N]=P,R=!1)}this.g=S}var a={};function l(b){return-128<=b&&128>b?s(b,function(w){return new o([w|0],0>w?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return D(u(-b));for(var w=[],S=1,R=0;b>=S;R++)w[R]=b/S|0,S*=4294967296;return new o(w,0)}function h(b,w){if(b.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b.charAt(0)=="-")return D(h(b.substring(1),w));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),R=f,N=0;N<b.length;N+=8){var P=Math.min(8,b.length-N),k=parseInt(b.substring(N,N+P),w);8>P?(P=u(Math.pow(w,P)),R=R.j(P).add(u(k))):(R=R.j(S),R=R.add(u(k)))}return R}var f=l(0),p=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-D(this).m();for(var b=0,w=1,S=0;S<this.g.length;S++){var R=this.i(S);b+=(0<=R?R:4294967296+R)*w,w*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(A(this))return"-"+D(this).toString(b);for(var w=u(Math.pow(b,6)),S=this,R="";;){var N=V(S,w).g;S=E(S,N.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=N,I(S))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var w=0;w<b.g.length;w++)if(b.g[w]!=0)return!1;return!0}function A(b){return b.h==-1}t.l=function(b){return b=E(this,b),A(b)?-1:I(b)?0:1};function D(b){for(var w=b.g.length,S=[],R=0;R<w;R++)S[R]=~b.g[R];return new o(S,~b.h).add(p)}t.abs=function(){return A(this)?D(this):this},t.add=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],R=0,N=0;N<=w;N++){var P=R+(this.i(N)&65535)+(b.i(N)&65535),k=(P>>>16)+(this.i(N)>>>16)+(b.i(N)>>>16);R=k>>>16,P&=65535,k&=65535,S[N]=k<<16|P}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(b,w){return b.add(D(w))}t.j=function(b){if(I(this)||I(b))return f;if(A(this))return A(b)?D(this).j(D(b)):D(D(this).j(b));if(A(b))return D(this.j(D(b)));if(0>this.l(_)&&0>b.l(_))return u(this.m()*b.m());for(var w=this.g.length+b.g.length,S=[],R=0;R<2*w;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<b.g.length;N++){var P=this.i(R)>>>16,k=this.i(R)&65535,Gt=b.i(N)>>>16,Fn=b.i(N)&65535;S[2*R+2*N]+=k*Fn,v(S,2*R+2*N),S[2*R+2*N+1]+=P*Fn,v(S,2*R+2*N+1),S[2*R+2*N+1]+=k*Gt,v(S,2*R+2*N+1),S[2*R+2*N+2]+=P*Gt,v(S,2*R+2*N+2)}for(R=0;R<w;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=w;R<2*w;R++)S[R]=0;return new o(S,0)};function v(b,w){for(;(b[w]&65535)!=b[w];)b[w+1]+=b[w]>>>16,b[w]&=65535,w++}function x(b,w){this.g=b,this.h=w}function V(b,w){if(I(w))throw Error("division by zero");if(I(b))return new x(f,f);if(A(b))return w=V(D(b),w),new x(D(w.g),D(w.h));if(A(w))return w=V(b,D(w)),new x(D(w.g),w.h);if(30<b.g.length){if(A(b)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var S=p,R=w;0>=R.l(b);)S=z(S),R=z(R);var N=H(S,1),P=H(R,1);for(R=H(R,2),S=H(S,2);!I(R);){var k=P.add(R);0>=k.l(b)&&(N=N.add(S),P=k),R=H(R,1),S=H(S,1)}return w=E(b,N.j(w)),new x(N,w)}for(N=f;0<=b.l(w);){for(S=Math.max(1,Math.floor(b.m()/w.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=u(S),k=P.j(w);A(k)||0<k.l(b);)S-=R,P=u(S),k=P.j(w);I(P)&&(P=p),N=N.add(P),b=E(b,k)}return new x(N,b)}t.A=function(b){return V(this,b).h},t.and=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],R=0;R<w;R++)S[R]=this.i(R)&b.i(R);return new o(S,this.h&b.h)},t.or=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],R=0;R<w;R++)S[R]=this.i(R)|b.i(R);return new o(S,this.h|b.h)},t.xor=function(b){for(var w=Math.max(this.g.length,b.g.length),S=[],R=0;R<w;R++)S[R]=this.i(R)^b.i(R);return new o(S,this.h^b.h)};function z(b){for(var w=b.g.length+1,S=[],R=0;R<w;R++)S[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(S,b.h)}function H(b,w){var S=w>>5;w%=32;for(var R=b.g.length-S,N=[],P=0;P<R;P++)N[P]=0<w?b.i(P+S)>>>w|b.i(P+S+1)<<32-w:b.i(P+S);return new o(N,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ns=o}).apply(typeof zE<"u"?zE:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PS,hu,CS,Af,o0,NS,DS,LS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var C=c[y];if(!(C in g))break e;g=g[C]}c=c[c.length-1],y=g[c],m=m(y),m!=y&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,y=!1,C={next:function(){if(!y&&g<c.length){var O=g++;return{value:m(O,c[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),c.apply(m,C)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function _(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function I(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(y,C,O){for(var $=Array(arguments.length-2),re=2;re<arguments.length;re++)$[re-2]=arguments[re];return m.prototype[C].apply(y,$)}}function A(c){const m=c.length;if(0<m){const g=Array(m);for(let y=0;y<m;y++)g[y]=c[y];return g}return[]}function D(c,m){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(l(y)){const C=c.length||0,O=y.length||0;c.length=C+O;for(let $=0;$<O;$++)c[C+$]=y[$]}else c.push(y)}}class E{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function V(c){return V[" "](c),c}V[" "]=function(){};var z=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function H(c,m,g){for(const y in c)m.call(g,c[y],y,c)}function b(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function w(c){const m={};for(const g in c)m[g]=c[g];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,m){let g,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(g in y)c[g]=y[g];for(let O=0;O<S.length;O++)g=S[O],Object.prototype.hasOwnProperty.call(y,g)&&(c[g]=y[g])}}function N(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function P(c){a.setTimeout(()=>{throw c},0)}function k(){var c=ie;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Gt{constructor(){this.h=this.g=null}add(m,g){const y=Fn.get();y.set(m,g),this.h?this.h.next=y:this.g=y,this.h=y}}var Fn=new E(()=>new Li,c=>c.reset());class Li{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let on,Y=!1,ie=new Gt,ae=()=>{const c=a.Promise.resolve(void 0);on=()=>{c.then(Re)}};var Re=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(g){P(g)}var m=Fn;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Y=!1};function Ie(){this.s=this.s,this.C=this.C}Ie.prototype.s=!1,Ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Wt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function Kt(c,m){if(De.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(z){e:{try{V(m.nodeName);var C=!0;break e}catch{}C=!1}C||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Qt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Kt.aa.h.call(this)}}I(Kt,De);var Qt={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Zs=0;function lt(c,m,g,y,C){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!y,this.ha=C,this.key=++Zs,this.da=this.fa=!1}function an(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Un(c){this.src=c,this.g={},this.h=0}Un.prototype.add=function(c,m,g,y,C){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var $=eo(c,m,y,C);return-1<$?(m=c[$],g||(m.fa=!1)):(m=new lt(m,this.src,O,!!y,C),m.fa=g,c.push(m)),m};function ne(c,m){var g=m.type;if(g in c.g){var y=c.g[g],C=Array.prototype.indexOf.call(y,m,void 0),O;(O=0<=C)&&Array.prototype.splice.call(y,C,1),O&&(an(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function eo(c,m,g,y){for(var C=0;C<c.length;++C){var O=c[C];if(!O.da&&O.listener==m&&O.capture==!!g&&O.ha==y)return C}return-1}var vn="closure_lm_"+(1e6*Math.random()|0),to={};function no(c,m,g,y,C){if(y&&y.once)return va(c,m,g,y,C);if(Array.isArray(m)){for(var O=0;O<m.length;O++)no(c,m[O],g,y,C);return null}return g=xa(g),c&&c[Dt]?c.K(m,g,u(y)?!!y.capture:!!y,C):ei(c,m,g,!1,y,C)}function ei(c,m,g,y,C,O){if(!m)throw Error("Invalid event type");var $=u(C)?!!C.capture:!!C,re=io(c);if(re||(c[vn]=re=new Un(c)),g=re.add(m,g,y,$,O),g.proxy)return g;if(y=$p(),g.proxy=y,y.src=c,y.listener=g,c.addEventListener)Wt||(C=$),C===void 0&&(C=!1),c.addEventListener(m.toString(),y,C);else if(c.attachEvent)c.attachEvent(Ea(m.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function $p(){function c(g){return m.call(c.src,c.listener,g)}const m=ro;return c}function va(c,m,g,y,C){if(Array.isArray(m)){for(var O=0;O<m.length;O++)va(c,m[O],g,y,C);return null}return g=xa(g),c&&c[Dt]?c.L(m,g,u(y)?!!y.capture:!!y,C):ei(c,m,g,!0,y,C)}function Ia(c,m,g,y,C){if(Array.isArray(m))for(var O=0;O<m.length;O++)Ia(c,m[O],g,y,C);else y=u(y)?!!y.capture:!!y,g=xa(g),c&&c[Dt]?(c=c.i,m=String(m).toString(),m in c.g&&(O=c.g[m],g=eo(O,g,y,C),-1<g&&(an(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete c.g[m],c.h--)))):c&&(c=io(c))&&(m=c.g[m.toString()],c=-1,m&&(c=eo(m,g,y,C)),(g=-1<c?m[c]:null)&&Vi(g))}function Vi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Dt])ne(m.i,c);else{var g=c.type,y=c.proxy;m.removeEventListener?m.removeEventListener(g,y,c.capture):m.detachEvent?m.detachEvent(Ea(g),y):m.addListener&&m.removeListener&&m.removeListener(y),(g=io(m))?(ne(g,c),g.h==0&&(g.src=null,m[vn]=null)):an(c)}}}function Ea(c){return c in to?to[c]:to[c]="on"+c}function ro(c,m){if(c.da)c=!0;else{m=new Kt(m,this);var g=c.listener,y=c.ha||c.src;c.fa&&Vi(c),c=g.call(y,m)}return c}function io(c){return c=c[vn],c instanceof Un?c:null}var Oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function xa(c){return typeof c=="function"?c:(c[Oi]||(c[Oi]=function(m){return c.handleEvent(m)}),c[Oi])}function pt(){Ie.call(this),this.i=new Un(this),this.M=this,this.F=null}I(pt,Ie),pt.prototype[Dt]=!0,pt.prototype.removeEventListener=function(c,m,g,y){Ia(this,c,m,g,y)};function _e(c,m){var g,y=c.F;if(y)for(g=[];y;y=y.F)g.push(y);if(c=c.M,y=m.type||m,typeof m=="string")m=new De(m,c);else if(m instanceof De)m.target=m.target||c;else{var C=m;m=new De(y,c),R(m,C)}if(C=!0,g)for(var O=g.length-1;0<=O;O--){var $=m.g=g[O];C=ba($,y,!0,m)&&C}if($=m.g=c,C=ba($,y,!0,m)&&C,C=ba($,y,!1,m)&&C,g)for(O=0;O<g.length;O++)$=m.g=g[O],C=ba($,y,!1,m)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],y=0;y<g.length;y++)an(g[y]);delete c.g[m],c.h--}}this.F=null},pt.prototype.K=function(c,m,g,y){return this.i.add(String(c),m,!1,g,y)},pt.prototype.L=function(c,m,g,y){return this.i.add(String(c),m,!0,g,y)};function ba(c,m,g,y){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var C=!0,O=0;O<m.length;++O){var $=m[O];if($&&!$.da&&$.capture==g){var re=$.listener,me=$.ha||$.src;$.fa&&ne(c.i,$),C=re.call(me,y)!==!1&&C}}return C&&!y.defaultPrevented}function Lt(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function ct(c){c.g=Lt(()=>{c.g=null,c.i&&(c.i=!1,ct(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Tv extends Ie{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(c){Ie.call(this),this.h=c,this.g={}}I(kr,Ie);var Ta=[];function oh(c){H(c.g,function(m,g){this.g.hasOwnProperty(g)&&Vi(m)},c),c.g={}}kr.prototype.N=function(){kr.aa.N.call(this),oh(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=a.JSON.stringify,Aa=a.JSON.parse,Vt=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ji(){}ji.prototype.h=null;function yc(c){return c.h||(c.h=c.i())}function Fi(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function or(){De.call(this,"d")}I(or,De);function ti(){De.call(this,"c")}I(ti,De);var Pr={},ah=null;function Cr(){return ah=ah||new pt}Pr.La="serverreachability";function lh(c){De.call(this,Pr.La,c)}I(lh,De);function ni(c){const m=Cr();_e(m,new lh(m))}Pr.STAT_EVENT="statevent";function zn(c,m){De.call(this,Pr.STAT_EVENT,c),this.stat=m}I(zn,De);function Ke(c){const m=Cr();_e(m,new zn(m,c))}Pr.Ma="timingevent";function ar(c,m){De.call(this,Pr.Ma,c),this.size=m}I(ar,De);function Ui(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function Bi(){this.g=!0}Bi.prototype.xa=function(){this.g=!1};function ch(c,m,g,y,C,O){c.info(function(){if(c.g)if(O)for(var $="",re=O.split("&"),me=0;me<re.length;me++){var ce=re[me].split("=");if(1<ce.length){var Pe=ce[0];ce=ce[1];var ve=Pe.split("_");$=2<=ve.length&&ve[1]=="type"?$+(Pe+"="+ce+"&"):$+(Pe+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+m+`
`+g+`
`+$})}function it(c,m,g,y,C,O,$){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+m+`
`+g+`
`+O+" "+$})}function zi(c,m,g,y){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+qp(c,g)+(y?" "+y:"")})}function ut(c,m){c.info(function(){return"TIMEOUT: "+m})}Bi.prototype.info=function(){};function qp(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var y=g[c];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<C.length;$++)C[$]=""}}}}return Mi(g)}catch{return m}}var Yt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_c={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wc;function $n(){}I($n,ji),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},wc=new $n;function lr(c,m,g,y){this.j=c,this.i=m,this.l=g,this.R=y||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vc}function vc(){this.i=null,this.g="",this.h=!1}var Ic={},uh={};function Sa(c,m,g){c.L=1,c.v=lo(Gn(m)),c.m=g,c.P=!0,Ec(c,null)}function Ec(c,m){c.F=Date.now(),Ra(c),c.A=Gn(c.v);var g=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),dr(g.i,"t",y),c.C=0,g=c.j.J,c.h=new vc,c.g=Ah(c.j,g?m:null,!c.m),0<c.O&&(c.M=new Tv(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,y=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Ta[0]=C.toString()),C=Ta);for(var O=0;O<C.length;O++){var $=no(g,C[O],y||m.handleEvent,!1,m.h||m);if(!$)break;m.g[$.key]=$}m=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ni(),ch(c.i,c.u,c.A,c.l,c.R,c.m)}lr.prototype.ca=function(c){c=c.target;const m=this.M;m&&hr(c)==3?m.j():this.Y(c)},lr.prototype.Y=function(c){try{if(c==this.g)e:{const ve=hr(this.g);var m=this.g.Ba();const Ot=this.g.Z();if(!(3>ve)&&(ve!=3||this.g&&(this.h.h||this.g.oa()||vh(this.g)))){this.J||ve!=4||m==7||(m==8||0>=Ot?ni(3):ni(2)),$i(this);var g=this.g.Z();this.X=g;t:if(dh(this)){var y=vh(this.g);c="";var C=y.length,O=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),so(this);var $="";break t}this.h.i=new a.TextDecoder}for(m=0;m<C;m++)this.h.h=!0,c+=this.h.i.decode(y[m],{stream:!(O&&m==C-1)});y.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,it(this.i,this.u,this.A,this.l,this.R,ve,g),this.o){if(this.T&&!this.K){t:{if(this.g){var re,me=this.g;if((re=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(re)){var ce=re;break t}}ce=null}if(g=ce)zi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ka(this,g);else{this.o=!1,this.s=3,Ke(12),Nr(this),so(this);break e}}if(this.P){g=!0;let fr;for(;!this.J&&this.C<$.length;)if(fr=hh(this,$),fr==uh){ve==4&&(this.s=4,Ke(14),g=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(fr==Ic){this.s=4,Ke(15),zi(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else zi(this.i,this.l,fr,null),ka(this,fr);if(dh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||$.length!=0||this.h.h||(this.s=1,Ke(16),g=!1),this.o=this.o&&g,!g)zi(this.i,this.l,$,"[Invalid Chunked Response]"),Nr(this),so(this);else if(0<$.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),zc(Pe),Pe.M=!0,Ke(11))}}else zi(this.i,this.l,$,null),ka(this,$);ve==4&&Nr(this),this.o&&!this.J&&(ve==4?Th(this.j,this):(this.o=!1,Ra(this)))}else Qp(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,Ke(12)):(this.s=0,Ke(13)),Nr(this),so(this)}}}catch{}finally{}};function dh(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function hh(c,m){var g=c.C,y=m.indexOf(`
`,g);return y==-1?uh:(g=Number(m.substring(g,y)),isNaN(g)?Ic:(y+=1,y+g>m.length?uh:(m=m.slice(y,y+g),c.C=y+g,m)))}lr.prototype.cancel=function(){this.J=!0,Nr(this)};function Ra(c){c.S=Date.now()+c.I,fh(c,c.I)}function fh(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ui(p(c.ba,c),m)}function $i(c){c.B&&(a.clearTimeout(c.B),c.B=null)}lr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ut(this.i,this.A),this.L!=2&&(ni(),Ke(17)),Nr(this),this.s=2,so(this)):fh(this,this.S-c)};function so(c){c.j.G==0||c.J||Th(c.j,c)}function Nr(c){$i(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,oh(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function ka(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||Dr(g.h,c))){if(!c.K&&Dr(g.h,c)&&g.G==3){try{var y=g.Da.g.parse(m)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Oa(g),Va(g);else break e;Bc(g),Ke(18)}}else g.za=C[1],0<g.za-g.T&&37500>C[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ui(p(g.Za,g),6e3));if(1>=xc(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Or(g,11)}else if((c.K||g.g==c)&&Oa(g),!v(m))for(C=g.Da.g.parse(m),m=0;m<C.length;m++){let ce=C[m];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Pe=ce[3];Pe!=null&&(g.la=Pe,g.j.info("VER="+g.la));const ve=ce[4];ve!=null&&(g.Aa=ve,g.j.info("SVER="+g.Aa));const Ot=ce[5];Ot!=null&&typeof Ot=="number"&&0<Ot&&(y=1.5*Ot,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const fr=c.g;if(fr){const Rh=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rh){var O=y.h;O.g||Rh.indexOf("spdy")==-1&&Rh.indexOf("quic")==-1&&Rh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(bc(O,O.h),O.h=null))}if(y.D){const Jp=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Jp&&(y.ya=Jp,ke(y.I,y.D,Jp))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var $=c;if(y.qa=Yi(y,y.J?y.ia:null,y.W),$.K){Tc(y.h,$);var re=$,me=y.L;me&&(re.I=me),re.B&&($i(re),Ra(re)),y.g=$}else xh(y);0<g.i.length&&ii(g)}else ce[0]!="stop"&&ce[0]!="close"||Or(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Or(g,7):Fc(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}ni(4)}catch{}}var mh=class{constructor(c,m){this.g=c,this.map=m}};function ph(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xc(c){return c.h?1:c.g?c.g.size:0}function Dr(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function bc(c,m){c.g?c.g.add(m):c.h=m}function Tc(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}ph.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Lr(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return A(c.i)}function Ca(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,y=0;y<g;y++)m.push(c[y]);return m}m=[],g=0;for(y in c)m[g++]=c[y];return m}function qi(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const y in c)m[g++]=y;return m}}}function qn(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=qi(c),y=Ca(c),C=y.length,O=0;O<C;O++)m.call(void 0,y[O],g&&g[O],c)}var gh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ac(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var y=c[g].indexOf("="),C=null;if(0<=y){var O=c[g].substring(0,y);C=c[g].substring(y+1)}else O=c[g];m(O,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Hn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Hn){this.h=c.h,cr(this,c.j),this.o=c.o,this.g=c.g,oo(this,c.s),this.l=c.l;var m=c.i,g=new Wi;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),ao(this,g),this.m=c.m}else c&&(m=String(c).match(gh))?(this.h=!1,cr(this,m[1]||"",!0),this.o=Hi(m[2]||""),this.g=Hi(m[3]||"",!0),oo(this,m[4]),this.l=Hi(m[5]||"",!0),ao(this,m[6]||"",!0),this.m=Hi(m[7]||"")):(this.h=!1,this.i=new Wi(null,this.h))}Hn.prototype.toString=function(){var c=[],m=this.j;m&&c.push(co(m,Rc,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(co(m,Rc,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(co(g,g.charAt(0)=="/"?kc:Gi,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",co(g,Pc)),c.join("")};function Gn(c){return new Hn(c)}function cr(c,m,g){c.j=g?Hi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function oo(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function ao(c,m,g){m instanceof Wi?(c.i=m,Dc(c.i,c.h)):(g||(m=co(m,Hp)),c.i=new Wi(m,c.h))}function ke(c,m,g){c.i.set(m,g)}function lo(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Hi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function co(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,Sc),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Sc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Rc=/[#\/\?@]/g,Gi=/[#\?:]/g,kc=/[#\?]/g,Hp=/[#\?@]/g,Pc=/#/g;function Wi(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function ur(c){c.g||(c.g=new Map,c.h=0,c.i&&Ac(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Wi.prototype,t.add=function(c,m){ur(this),this.i=null,c=ri(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function Cc(c,m){ur(c),m=ri(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Nc(c,m){return ur(c),m=ri(c,m),c.g.has(m)}t.forEach=function(c,m){ur(this),this.g.forEach(function(g,y){g.forEach(function(C){c.call(m,C,y,this)},this)},this)},t.na=function(){ur(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let y=0;y<m.length;y++){const C=c[y];for(let O=0;O<C.length;O++)g.push(m[y])}return g},t.V=function(c){ur(this);let m=[];if(typeof c=="string")Nc(this,c)&&(m=m.concat(this.g.get(ri(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return ur(this),this.i=null,c=ri(this,c),Nc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function dr(c,m,g){Cc(c,m),0<g.length&&(c.i=null,c.g.set(ri(c,m),A(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var y=m[g];const O=encodeURIComponent(String(y)),$=this.V(y);for(y=0;y<$.length;y++){var C=O;$[y]!==""&&(C+="="+encodeURIComponent(String($[y]))),c.push(C)}}return this.i=c.join("&")};function ri(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Dc(c,m){m&&!c.j&&(ur(c),c.i=null,c.g.forEach(function(g,y){var C=y.toLowerCase();y!=C&&(Cc(this,y),dr(this,C,g))},c)),c.j=m}function Lc(c,m){const g=new Bi;if(a.Image){const y=new Image;y.onload=_(Vr,g,"TestLoadImage: loaded",!0,m,y),y.onerror=_(Vr,g,"TestLoadImage: error",!1,m,y),y.onabort=_(Vr,g,"TestLoadImage: abort",!1,m,y),y.ontimeout=_(Vr,g,"TestLoadImage: timeout",!1,m,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else m(!1)}function Gp(c,m){const g=new Bi,y=new AbortController,C=setTimeout(()=>{y.abort(),Vr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:y.signal}).then(O=>{clearTimeout(C),O.ok?Vr(g,"TestPingServer: ok",!0,m):Vr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(C),Vr(g,"TestPingServer: error",!1,m)})}function Vr(c,m,g,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(g)}catch{}}function Na(){this.g=new Vt}function Wp(c,m,g){const y=g||"";try{qn(c,function(C,O){let $=C;u(C)&&($=Mi(C)),m.push(y+O+"="+encodeURIComponent($))})}catch(C){throw m.push(y+"type="+encodeURIComponent("_badmap")),C}}function Da(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Da,ji),Da.prototype.g=function(){return new uo(this.l,this.j)},Da.prototype.i=function(c){return function(){return c}}({});function uo(c,m){pt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(uo,pt),t=uo.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Qi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ki(this):Qi(this),this.readyState==3&&Vc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ki(this))},t.Qa=function(c){this.g&&(this.response=c,Ki(this))},t.ga=function(){this.g&&Ki(this)};function Ki(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qi(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function Qi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Oc(c){let m="";return H(c,function(g,y){m+=y,m+=":",m+=g,m+=`\r
`}),m}function Mc(c,m,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=Oc(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ke(c,m,g))}function Le(c){pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Le,pt);var Kp=/^https?$/i,La=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wc.g(),this.v=this.o?yc(this.o):yc(wc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(O){yh(this,O);return}if(c=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)g.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())g.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(La,m,void 0))||y||C||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of g)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){yh(this,O)}};function yh(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,_h(c),ho(c)}function _h(c){c.A||(c.A=!0,_e(c,"complete"),_e(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_e(this,"complete"),_e(this,"abort"),ho(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ho(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jc(this):this.bb())},t.bb=function(){jc(this)};function jc(c){if(c.h&&typeof o<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)Lt(c.Ea,0,c);else if(_e(c,"readystatechange"),hr(c)==4){c.h=!1;try{const $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var y;if(y=$===0){var C=String(c.D).match(gh)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!Kp.test(C?C.toLowerCase():"")}g=y}if(g)_e(c,"complete"),_e(c,"success");else{c.m=6;try{var O=2<hr(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",_h(c)}}finally{ho(c)}}}}function ho(c,m){if(c.g){wh(c);const g=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||_e(c,"ready");try{g.onreadystatechange=y}catch{}}}function wh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Aa(m)}};function vh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Qp(c){const m={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(v(c[y]))continue;var g=N(c[y]);const C=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=m[C]||[];m[C]=O,O.push(g)}b(m,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function mo(c){this.Aa=0,this.i=[],this.j=new Bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,c),this.cb=fo("retryDelaySeedMs",1e4,c),this.Wa=fo("forwardChannelMaxRetries",2,c),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ph(c&&c.concurrentRequestLimit),this.Da=new Na,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=mo.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,y){Ke(0),this.W=c,this.H=m||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=Yi(this,null,this.W),ii(this)};function Fc(c){if(Uc(c),c.G==3){var m=c.U++,g=Gn(c.I);if(ke(g,"SID",c.K),ke(g,"RID",m),ke(g,"TYPE","terminate"),po(c,g),m=new lr(c,c.j,m),m.L=2,m.v=lo(Gn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=Ah(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ra(m)}yo(c)}function Va(c){c.g&&(zc(c),c.g.cancel(),c.g=null)}function Uc(c){Va(c),c.u&&(a.clearTimeout(c.u),c.u=null),Oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ii(c){if(!Pa(c.h)&&!c.s){c.s=!0;var m=c.Ga;on||ae(),Y||(on(),Y=!0),ie.add(m,c),c.B=0}}function Yp(c,m){return xc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ui(p(c.Ga,c,m),go(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const C=new lr(this,this.j,c);let O=this.o;if(this.S&&(O?(O=w(O),R(O,this.S)):O=this.S),this.m!==null||this.O||(C.H=O,O=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(m+=y,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=Eh(this,C,m),g=Gn(this.I),ke(g,"RID",c),ke(g,"CVER",22),this.D&&ke(g,"X-HTTP-Session-Id",this.D),po(this,g),O&&(this.O?m="headers="+encodeURIComponent(String(Oc(O)))+"&"+m:this.m&&Mc(g,this.m,O)),bc(this.h,C),this.Ua&&ke(g,"TYPE","init"),this.P?(ke(g,"$req",m),ke(g,"SID","null"),C.T=!0,Sa(C,g,null)):Sa(C,g,m),this.G=2}}else this.G==3&&(c?Ih(this,c):this.i.length==0||Pa(this.h)||Ih(this))};function Ih(c,m){var g;m?g=m.l:g=c.U++;const y=Gn(c.I);ke(y,"SID",c.K),ke(y,"RID",g),ke(y,"AID",c.T),po(c,y),c.m&&c.o&&Mc(y,c.m,c.o),g=new lr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Eh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bc(c.h,g),Sa(g,y,m)}function po(c,m){c.H&&H(c.H,function(g,y){ke(m,y,g)}),c.l&&qn({},function(g,y){ke(m,y,g)})}function Eh(c,m,g){g=Math.min(c.i.length,g);var y=c.l?p(c.l.Na,c.l,c):null;e:{var C=c.i;let O=-1;for(;;){const $=["count="+g];O==-1?0<g?(O=C[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let re=!0;for(let me=0;me<g;me++){let ce=C[me].g;const Pe=C[me].map;if(ce-=O,0>ce)O=Math.max(0,C[me].g-100),re=!1;else try{Wp(Pe,$,"req"+ce+"_")}catch{y&&y(Pe)}}if(re){y=$.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,y}function xh(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;on||ae(),Y||(on(),Y=!0),ie.add(m,c),c.v=0}}function Bc(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ui(p(c.Fa,c),go(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ui(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ke(10),Va(this),bh(this))};function zc(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bh(c){c.g=new lr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Gn(c.qa);ke(m,"RID","rpc"),ke(m,"SID",c.K),ke(m,"AID",c.T),ke(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(m,"TO",c.ja),ke(m,"TYPE","xmlhttp"),po(c,m),c.m&&c.o&&Mc(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=lo(Gn(m)),g.m=null,g.P=!0,Ec(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),Bc(this),Ke(19))};function Oa(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Th(c,m){var g=null;if(c.g==m){Oa(c),zc(c),c.g=null;var y=2}else if(Dr(c.h,m))g=m.D,Tc(c.h,m),y=1;else return;if(c.G!=0){if(m.o)if(y==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var C=c.B;y=Cr(),_e(y,new ar(y,g)),ii(c)}else xh(c);else if(C=m.s,C==3||C==0&&0<m.X||!(y==1&&Yp(c,m)||y==2&&Bc(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),C){case 1:Or(c,5);break;case 4:Or(c,10);break;case 3:Or(c,6);break;default:Or(c,2)}}}function go(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function Or(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),y=c.Xa;const C=!y;y=new Hn(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cr(y,"https"),lo(y),C?Lc(y.toString(),g):Gp(y.toString(),g)}else Ke(2);c.G=0,c.l&&c.l.sa(m),yo(c),Uc(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function yo(c){if(c.G=0,c.ka=[],c.l){const m=Lr(c.h);(m.length!=0||c.i.length!=0)&&(D(c.ka,m),D(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Yi(c,m,g){var y=g instanceof Hn?Gn(g):new Hn(g);if(y.g!="")m&&(y.g=m+"."+y.g),oo(y,y.s);else{var C=a.location;y=C.protocol,m=m?m+"."+C.hostname:C.hostname,C=+C.port;var O=new Hn(null);y&&cr(O,y),m&&(O.g=m),C&&oo(O,C),g&&(O.l=g),y=O}return g=c.D,m=c.ya,g&&m&&ke(y,g,m),ke(y,"VER",c.la),po(c,y),y}function Ah(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Le(new Da({eb:g})):new Le(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sh(){}t=Sh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _o(){}_o.prototype.g=function(c,m){return new T(c,m)};function T(c,m){pt.call(this),this.g=new mo(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!v(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new oe(this)}I(T,pt),T.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},T.prototype.close=function(){Fc(this.g)},T.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Mi(c),c=g);m.i.push(new mh(m.Ya++,c)),m.G==3&&ii(m)},T.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,T.aa.N.call(this)};function j(c){or.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}I(j,or);function B(){ti.call(this),this.status=1}I(B,ti);function oe(c){this.g=c}I(oe,Sh),oe.prototype.ua=function(){_e(this.g,"a")},oe.prototype.ta=function(c){_e(this.g,new j(c))},oe.prototype.sa=function(c){_e(this.g,new B)},oe.prototype.ra=function(){_e(this.g,"b")},_o.prototype.createWebChannel=_o.prototype.g,T.prototype.send=T.prototype.o,T.prototype.open=T.prototype.m,T.prototype.close=T.prototype.close,LS=function(){return new _o},DS=function(){return Cr()},NS=Pr,o0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,Af=Yt,_c.COMPLETE="complete",CS=_c,Fi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",pt.prototype.listen=pt.prototype.K,hu=Fi,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,PS=Le}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const $E="@firebase/firestore",qE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Dd("@firebase/firestore");function Qa(){return Os.logLevel}function qz(t){Os.setLogLevel(t)}function q(t,...e){if(Os.logLevel<=pe.DEBUG){const n=e.map(cw);Os.debug(`Firestore (${oc}): ${t}`,...n)}}function ot(t,...e){if(Os.logLevel<=pe.ERROR){const n=e.map(cw);Os.error(`Firestore (${oc}): ${t}`,...n)}}function sr(t,...e){if(Os.logLevel<=pe.WARN){const n=e.map(cw);Os.warn(`Firestore (${oc}): ${t}`,...n)}}function cw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VS(t,r,n)}function VS(t,e,n){let r=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ot(r),new Error(r)}function ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||VS(e,i,r)}function Hz(t,e){t||J(57014,e)}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class mj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pj{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new OS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class gj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _j{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,He(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new a0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new a0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class Gz{getToken(){return Promise.resolve(new a0(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function l0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ug(i)===Ug(s)?se(i,s):Ug(i)?1:-1}return se(t.length,e.length)}const vj=55296,Ij=57343;function Ug(t){const e=t.charCodeAt(0);return e>=vj&&e<=Ij}function Dl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function MS(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="__name__";class Fr{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Fr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return se(e.length,n.length)}static compareSegments(e,n){const r=Fr.isNumericId(e),i=Fr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Fr.extractNumericId(e).compare(Fr.extractNumericId(n)):l0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class ue extends Fr{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const Ej=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends Fr{construct(e,n,r){return new Ge(e,n,r)}static isValidIdentifier(e){return Ej.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c0}static keyField(){return new Ge([c0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ue.fromString(e))}static fromName(e){return new K(ue.fromString(e).popFirst(5))}static empty(){return new K(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e,n){if(!n)throw new F(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xj(t,e,n,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HE(t){if(!K.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GE(t){if(K.isDocumentKey(t))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function pp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function he(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pp(t);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function FS(t,e){if(e<=0)throw new F(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ma(t,e){if(!jS(t))throw new F(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new F(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=-62135596800,KE=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*KE);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<WE)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KE}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ma(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-WE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:mt("string",xe._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new xe(0,0))}static max(){return new te(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;class Vl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function u0(t){return t.fields.find(e=>e.kind===2)}function xo(t){return t.fields.filter(e=>e.kind!==2)}function bj(t,e){let n=se(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=Tj(t.fields[r],e.fields[r]),n!==0)return n;return se(t.fields.length,e.fields.length)}Vl.UNKNOWN_ID=-1;class Uo{constructor(e,n){this.fieldPath=e,this.kind=n}}function Tj(t,e){const n=Ge.comparator(t.fieldPath,e.fieldPath);return n!==0?n:se(t.kind,e.kind)}class Ol{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ol(0,Vn.min())}}function US(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new Vn(i,K.empty(),e)}function BS(t){return new Vn(t.readTime,t.key,Ll)}class Vn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vn(te.min(),K.empty(),Ll)}static max(){return new Vn(te.max(),K.empty(),Ll)}}function hw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==zS)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="SimpleDb";class gp{static open(e,n,r,i){try{return new gp(n,e.transaction(i,r))}catch(s){throw new Pu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Tt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Pu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=fw(r.target.error);this.S.reject(new Pu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(xn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Sj(n)}}class Qr{static delete(e){return q(xn,"Removing database:",e),So(YT().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!O_())return!1;if(Qr.F())return!0;const e=_t(),n=Qr.M(e),r=0<n&&n<10,i=qS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Qr.M(_t())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(xn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Pu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new F(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new F(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Pu(e,o))},i.onupgradeneeded=s=>{q(xn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{q(xn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=gp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(q(xn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Aj{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return So(this.U.delete())}}class Pu extends F{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ks(t){return t.name==="IndexedDbTransactionError"}class Sj{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q(xn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(q(xn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),So(r)}add(e){return q(xn,"ADD",this.store.name,e,e),So(this.store.add(e))}get(e){return So(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(xn,"GET",this.store.name,e,n),n))}delete(e){return q(xn,"DELETE",this.store.name,e),So(this.store.delete(e))}count(){return q(xn,"COUNT",this.store.name),So(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){q(xn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=fw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Aj(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const h=u.catch(f=>(l.done(),L.reject(f)));r.push(h)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function So(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=fw(r.target.error);n(i)}})}let QE=!1;function fw(t){const e=Qr.M(_t());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QE||(QE=!0,setTimeout(()=>{throw r},0)),r}}return t}const Cu="IndexBackfiller";class Rj{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Cu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Cu,`Documents written: ${n}`)}catch(n){Ks(n)?q(Cu,"Ignoring IndexedDB error during index backfill: ",n):await Ws(n)}await this.re(6e4)})}}class kj{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q(Cu,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(q(Cu,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=BS(s);hw(o,r)>0&&(r=o)}),new Vn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=-1;function Bd(t){return t==null}function ud(t){return t===0&&1/t==-1/0}function HS(t){return typeof t=="number"&&Number.isInteger(t)&&!ud(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="";function $t(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YE(e)),e=Pj(t.get(n),e);return YE(e)}function Pj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case bm:n+="";break;default:n+=s}}return n}function YE(t){return t+bm+""}function qr(t){const e=t.length;if(ee(e>=2,64408,{path:t}),e===2)return ee(t.charAt(0)===bm&&t.charAt(1)==="",56145,{path:t}),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(bm,s);switch((o<0||o>n)&&J(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J(61167,{path:t})}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="remoteDocuments",zd="owner",Ua="owner",dd="mutationQueues",Cj="userId",vr="mutations",JE="batchId",Oo="userMutationsIndex",XE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t,e){return[t,$t(e)]}function GS(t,e,n){return[t,$t(e),n]}const Nj={},Ml="documentMutations",Tm="remoteDocumentsV14",Dj=["prefixPath","collectionGroup","readTime","documentId"],Rf="documentKeyIndex",Lj=["prefixPath","collectionGroup","documentId"],WS="collectionGroupIndex",Vj=["collectionGroup","readTime","prefixPath","documentId"],hd="remoteDocumentGlobal",d0="remoteDocumentGlobalKey",jl="targets",KS="queryTargetsIndex",Oj=["canonicalId","targetId"],Fl="targetDocuments",Mj=["targetId","path"],mw="documentTargetsIndex",jj=["path","targetId"],Am="targetGlobalKey",Bo="targetGlobal",fd="collectionParents",Fj=["collectionId","parent"],Ul="clientMetadata",Uj="clientId",yp="bundles",Bj="bundleId",_p="namedQueries",zj="name",pw="indexConfiguration",$j="indexId",h0="collectionGroupIndex",qj="collectionGroup",Nu="indexState",Hj=["indexId","uid"],QS="sequenceNumberIndex",Gj=["uid","sequenceNumber"],Du="indexEntries",Wj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YS="documentKeyIndex",Kj=["indexId","uid","orderedDocumentKey"],wp="documentOverlays",Qj=["userId","collectionPath","documentId"],f0="collectionPathOverlayIndex",Yj=["userId","collectionPath","largestBatchId"],JS="collectionGroupOverlayIndex",Jj=["userId","collectionGroup","largestBatchId"],gw="globals",Xj="name",XS=[dd,vr,Ml,bo,jl,zd,Bo,Fl,Ul,hd,fd,yp,_p],Zj=[...XS,wp],ZS=[dd,vr,Ml,Tm,jl,zd,Bo,Fl,Ul,hd,fd,yp,_p,wp],eR=ZS,yw=[...eR,pw,Nu,Du],e5=yw,tR=[...yw,gw],t5=tR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends $S{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function wt(t,e){const n=Q(t);return Qr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function rR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ex(this.data.getIterator())}getIteratorFrom(e){return new ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ae)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ae(this.comparator);return n.data=e,n}}class ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ba(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new hn([])}unionWith(e){let n=new Ae(Ge.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kz(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iR("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const n5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(t){if(ee(!!t,39018),typeof t=="string"){let e=0;const n=n5.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="server_timestamp",oR="__type__",aR="__previous_value__",lR="__local_write_time__";function vp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oR])==null?void 0:r.stringValue)===sR}function Ip(t){const e=t.mapValue.fields[aR];return vp(e)?Ip(e):e}function md(t){const e=bi(t.mapValue.fields[lR].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const pd="(default)";class Jo{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="__type__",cR="__max__",_s={mapValue:{fields:{__type__:{stringValue:cR}}}},ww="__vector__",Bl="value",kf={nullValue:"NULL_VALUE"};function Ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vp(t)?4:uR(t)?9007199254740991:Ep(t)?10:11:J(28295,{value:t})}function Zr(t,e){if(t===e)return!0;const n=Ms(t);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return md(t).isEqual(md(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bi(i.timestampValue),a=bi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ti(i.bytesValue).isEqual(Ti(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=$e(i.doubleValue),a=$e(s.doubleValue);return o===a?ud(o)===ud(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ZE(o)!==ZE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Zr(o[l],a[l])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function gd(t,e){return(t.values||[]).find(n=>Zr(n,e))!==void 0}function js(t,e){if(t===e)return 0;const n=Ms(t),r=Ms(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=$e(s.integerValue||s.doubleValue),l=$e(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return tx(t.timestampValue,e.timestampValue);case 4:return tx(md(t),md(e));case 5:return l0(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ti(s),l=Ti(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=se(a[u],l[u]);if(h!==0)return h}return se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=se($e(s.latitude),$e(o.latitude));return a!==0?a:se($e(s.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,_,I,A;const a=s.fields||{},l=o.fields||{},u=(p=a[Bl])==null?void 0:p.arrayValue,h=(_=l[Bl])==null?void 0:_.arrayValue,f=se(((I=u==null?void 0:u.values)==null?void 0:I.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:nx(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_s.mapValue&&o===_s.mapValue)return 0;if(s===_s.mapValue)return 1;if(o===_s.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=l0(l[f],h[f]);if(p!==0)return p;const _=js(a[l[f]],u[h[f]]);if(_!==0)return _}return se(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=bi(t),r=bi(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function nx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=js(n[i],r[i]);if(s)return s}return se(n.length,r.length)}function zl(t){return p0(t)}function p0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=bi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=p0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${p0(n.fields[o])}`;return i+"}"}(t.mapValue):J(61005,{value:t})}function Pf(t){switch(Ms(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ip(t);return e?16+Pf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Pf(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Qs(r.fields,(s,o)=>{i+=s.length+Pf(o)}),i}(t.mapValue);default:throw J(13486,{value:t})}}function Xo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function g0(t){return!!t&&"integerValue"in t}function yd(t){return!!t&&"arrayValue"in t}function rx(t){return!!t&&"nullValue"in t}function ix(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cf(t){return!!t&&"mapValue"in t}function Ep(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_w])==null?void 0:r.stringValue)===ww}function Lu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lu(t.arrayValue.values[n]);return e}return{...t}}function uR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}const dR={mapValue:{fields:{[_w]:{stringValue:ww},[Bl]:{arrayValue:{}}}}};function i5(t){return"nullValue"in t?kf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xo(Jo.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ep(t)?dR:{mapValue:{}}:J(35942,{value:t})}function s5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xo(Jo.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dR:"mapValue"in t?Ep(t)?{mapValue:{}}:_s:J(61959,{value:t})}function sx(t,e){const n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ox(t,e){const n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(n)}setAll(e){let n=Ge.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pt(Lu(this.value))}}function hR(t){const e=[];return Qs(t.fields,(n,r)=>{const i=new Ge([n]);if(Cf(r)){const s=hR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new je(e,0,te.min(),te.min(),te.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new je(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new je(e,2,n,te.min(),te.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new je(e,3,n,te.min(),te.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.position=e,this.inclusive=n}}function ax(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=js(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function lx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n="asc"){this.field=e,this.dir=n}}function o5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{}class ge extends fR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new a5(e,n,r):n==="array-contains"?new u5(e,r):n==="in"?new wR(e,r):n==="not-in"?new d5(e,r):n==="array-contains-any"?new h5(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new l5(e,r):new c5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(js(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class be extends fR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new be(e,n)}matches(e){return $l(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $l(t){return t.op==="and"}function y0(t){return t.op==="or"}function vw(t){return mR(t)&&$l(t)}function mR(t){for(const e of t.filters)if(e instanceof be)return!1;return!0}function _0(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+zl(t.value);if(vw(t))return t.filters.map(e=>_0(e)).join(",");{const e=t.filters.map(n=>_0(n)).join(",");return`${t.op}(${e})`}}function pR(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(t,e):t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&pR(o,i.filters[a]),!0):!1}(t,e):void J(19439)}function gR(t,e){const n=t.filters.concat(e);return be.create(n,t.op)}function yR(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${zl(n.value)}`}(t):t instanceof be?function(n){return n.op.toString()+" {"+n.getFilters().map(yR).join(" ,")+"}"}(t):"Filter"}class a5 extends ge{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class l5 extends ge{constructor(e,n){super(e,"in",n),this.keys=_R("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class c5 extends ge{constructor(e,n){super(e,"not-in",n),this.keys=_R("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _R(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class u5 extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yd(n)&&gd(n.arrayValue,this.value)}}class wR extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gd(this.value.arrayValue,n)}}class d5 extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gd(this.value.arrayValue,n)}}class h5 extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function w0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new f5(t,e,n,r,i,s,o)}function Zo(t){const e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zl(r)).join(",")),e.Te=n}return e.Te}function $d(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!o5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lx(t.startAt,e.startAt)&&lx(t.endAt,e.endAt)}function Sm(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Rm(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function cx(t,e,n){let r=kf,i=!0;for(const s of Rm(t,e)){let o=kf,a=!0;switch(s.op){case"<":case"<=":o=i5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kf}sx({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];sx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function ux(t,e,n){let r=_s,i=!0;for(const s of Rm(t,e)){let o=_s,a=!0;switch(s.op){case">=":case">":o=s5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=_s}ox({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];ox({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vR(t,e,n,r,i,s,o,a){return new Pi(t,e,n,r,i,s,o,a)}function ac(t){return new Pi(t)}function dx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Iw(t){return t.collectionGroup!==null}function El(t){const e=Q(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Ge.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new _d(s,r))}),n.has(Ge.keyField().canonicalString())||e.Ie.push(new _d(Ge.keyField(),r))}return e.Ie}function qt(t){const e=Q(t);return e.Ee||(e.Ee=ER(e,El(t))),e.Ee}function IR(t){const e=Q(t);return e.de||(e.de=ER(e,t.explicitOrderBy)),e.de}function ER(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new _d(i.field,s)});const n=t.endAt?new Fs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fs(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function v0(t,e){const n=t.filters.concat([e]);return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function km(t,e,n){return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qd(t,e){return $d(qt(t),qt(e))&&t.limitType===e.limitType}function xR(t){return`${Zo(qt(t))}|lt:${t.limitType}`}function Ya(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yR(i)).join(", ")}]`),Bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zl(i)).join(",")),`Target(${r})`}(qt(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of El(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=ax(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,El(r),i)||r.endAt&&!function(o,a,l){const u=ax(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,El(r),i))}(t,e)}function bR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TR(t){return(e,n)=>{let r=!1;for(const i of El(t)){const s=m5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function m5(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?js(l,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new Oe(K.comparator);function fn(){return p5}const AR=new Oe(K.comparator);function fu(...t){let e=AR;for(const n of t)e=e.insert(n.key,n);return e}function SR(t){let e=AR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hr(){return Vu()}function RR(){return Vu()}function Vu(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const g5=new Oe(K.comparator),y5=new Ae(K.comparator);function le(...t){let e=y5;for(const n of t)e=e.add(n);return e}const _5=new Ae(se);function Ew(){return _5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function kR(t){return{integerValue:""+t}}function PR(t,e){return HS(e)?kR(e):xw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function w5(t,e,n){return t instanceof ql?function(i,s){const o={fields:{[oR]:{stringValue:sR},[lR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vp(s)&&(s=Ip(s)),s&&(o.fields[aR]=s),{mapValue:o}}(n,e):t instanceof ea?NR(t,e):t instanceof ta?DR(t,e):function(i,s){const o=CR(i,s),a=hx(o)+hx(i.Ae);return g0(o)&&g0(i.Ae)?kR(a):xw(i.serializer,a)}(t,e)}function v5(t,e,n){return t instanceof ea?NR(t,e):t instanceof ta?DR(t,e):n}function CR(t,e){return t instanceof Hl?function(r){return g0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ql extends xp{}class ea extends xp{constructor(e){super(),this.elements=e}}function NR(t,e){const n=LR(e);for(const r of t.elements)n.some(i=>Zr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends xp{constructor(e){super(),this.elements=e}}function DR(t,e){let n=LR(e);for(const r of t.elements)n=n.filter(i=>!Zr(i,r));return{arrayValue:{values:n}}}class Hl extends xp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function hx(t){return $e(t.integerValue||t.doubleValue)}function LR(t){return yd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n){this.field=e,this.transform=n}}function I5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?Dl(r.elements,i.elements,Zr):r instanceof Hl&&i instanceof Hl?Zr(r.Ae,i.Ae):r instanceof ql&&i instanceof ql}(t.transform,e.transform)}class E5{constructor(e,n){this.version=e,this.transformResults=n}}class We{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new We}static exists(e){return new We(void 0,e)}static updateTime(e){return new We(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bp{}function VR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cc(t.key,We.none()):new lc(t.key,t.data,We.none());{const n=t.data,r=Pt.empty();let i=new Ae(Ge.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ni(t.key,r,new hn(i.toArray()),We.none())}}function x5(t,e,n){t instanceof lc?function(i,s,o){const a=i.value.clone(),l=mx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ni?function(i,s,o){if(!Nf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=mx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(OR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ou(t,e,n,r){return t instanceof lc?function(s,o,a,l){if(!Nf(s.precondition,o))return a;const u=s.value.clone(),h=px(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ni?function(s,o,a,l){if(!Nf(s.precondition,o))return a;const u=px(s.fieldTransforms,l,o),h=o.data;return h.setAll(OR(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Nf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function b5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=CR(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function fx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dl(r,i,(s,o)=>I5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lc extends bp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ni extends bp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mx(t,e,n){const r=new Map;ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,v5(o,a,n[i]))}return r}function px(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,w5(s,o,e))}return r}class cc extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bw extends bp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&x5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=VR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(n,r)=>fx(n,r))&&Dl(this.baseMutations,e.baseMutations,(n,r)=>fx(n,r))}}class Aw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return g5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Aw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,ye;function jR(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function FR(t){if(t===void 0)return ot("GRPC error has no .code"),M.UNKNOWN;switch(t){case dt.OK:return M.OK;case dt.CANCELLED:return M.CANCELLED;case dt.UNKNOWN:return M.UNKNOWN;case dt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case dt.INTERNAL:return M.INTERNAL;case dt.UNAVAILABLE:return M.UNAVAILABLE;case dt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case dt.NOT_FOUND:return M.NOT_FOUND;case dt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case dt.ABORTED:return M.ABORTED;case dt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case dt.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(ye=dt||(dt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=new Ns([4294967295,4294967295],0);function gx(t){const e=UR().encode(t),n=new kS;return n.update(e),new Uint8Array(n.digest())}function yx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ns([n,r],0),new Ns([i,s],0)]}class Rw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ns.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ns.fromNumber(r)));return i.compare(A5)===1&&(i=new Ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gx(e),[r,i]=yx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Rw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=gx(e),[r,i]=yx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wd(te.min(),i,new Oe(se),fn(),le())}}class Kd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kd(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class BR{constructor(e,n){this.targetId=e,this.Ce=n}}class zR{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _x{constructor(){this.ve=0,this.Fe=wx(),this.Me=et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:s})}}),new Kd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=wx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class S5{constructor(e){this.Ge=e,this.ze=new Map,this.je=fn(),this.Je=Yh(),this.He=Yh(),this.Ye=new Oe(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Sm(s))if(r===0){const o=new K(s.path);this.et(n,o,je.newNoDocument(o,te.min()))}else ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}Mu==null||Mu.lt(function(h,f,p,_,I){var E,v,x;const A={localCacheCount:h,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},D=f.unchangedNames;return D&&(A.bloomFilter={applied:I===0,hashCount:(D==null?void 0:D.hashCount)??0,bitmapLength:((v=(E=D==null?void 0:D.bits)==null?void 0:E.bitmap)==null?void 0:v.length)??0,padding:((x=D==null?void 0:D.bits)==null?void 0:x.padding)??0,mightContain:V=>(_==null?void 0:_.mightContain(V))??!1}),A}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ti(r).toUint8Array()}catch(l){if(l instanceof iR)return sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rw(o,i,s)}catch(l){return sr(l instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Sm(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,je.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Wd(e,n,this.Ye,this.je,r);return this.je=fn(),this.Je=Yh(),this.He=Yh(),this.Ye=new Oe(se),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new _x,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ae(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ae(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _x),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yh(){return new Oe(K.comparator)}function wx(){return new Oe(K.comparator)}const R5=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),k5=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),P5=(()=>({and:"AND",or:"OR"}))();class C5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function I0(t,e){return t.useProto3Json||Bd(e)?e:{value:e}}function Gl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $R(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function N5(t,e){return Gl(t,e.toTimestamp())}function at(t){return ee(!!t,49232),te.fromTimestamp(function(n){const r=bi(n);return new xe(r.seconds,r.nanos)}(t))}function kw(t,e){return E0(t,e).canonicalString()}function E0(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qR(t){const e=ue.fromString(t);return ee(ZR(e),10190,{key:e.toString()}),e}function wd(t,e){return kw(t.databaseId,e.path)}function Yr(t,e){const n=qR(e);if(n.get(1)!==t.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(WR(n))}function HR(t,e){return kw(t.databaseId,e)}function GR(t){const e=qR(t);return e.length===4?ue.emptyPath():WR(e)}function x0(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WR(t){return ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vx(t,e,n){return{name:wd(t,e),fields:n.value.mapValue.fields}}function Tp(t,e,n){const r=Yr(t,e.name),i=at(e.updateTime),s=e.createTime?at(e.createTime):te.min(),o=new Pt({mapValue:{fields:e.fields}}),a=je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function D5(t,e){return"found"in e?function(r,i){ee(!!i.found,43571),i.found.name,i.found.updateTime;const s=Yr(r,i.found.name),o=at(i.found.updateTime),a=i.found.createTime?at(i.found.createTime):te.min(),l=new Pt({mapValue:{fields:i.found.fields}});return je.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing,3894),ee(!!i.readTime,22933);const s=Yr(r,i.missing),o=at(i.readTime);return je.newNoDocument(s,o)}(t,e):J(7234,{result:e})}function L5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ee(h===void 0||typeof h=="string",58123),et.fromBase64String(h||"")):(ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?M.UNKNOWN:FR(u.code);return new F(h,u.message||"")}(o);n=new zR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yr(t,r.document.name),s=at(r.document.updateTime),o=r.document.createTime?at(r.document.createTime):te.min(),a=new Pt({mapValue:{fields:r.document.fields}}),l=je.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Df(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yr(t,r.document),s=r.readTime?at(r.readTime):te.min(),o=je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Df([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yr(t,r.document),s=r.removedTargetIds||[];n=new Df([],s,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new T5(i,s),a=r.targetId;n=new BR(a,o)}}return n}function vd(t,e){let n;if(e instanceof lc)n={update:vx(t,e.key,e.value)};else if(e instanceof cc)n={delete:wd(t,e.key)};else if(e instanceof Ni)n={update:vx(t,e.key,e.data),updateMask:U5(e.fieldMask)};else{if(!(e instanceof bw))return J(16599,{Vt:e.type});n={verify:wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ql)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:N5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(t,e.precondition)),n}function b0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?We.updateTime(at(s.updateTime)):s.exists!==void 0?We.exists(s.exists):We.none()}(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new ql;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new ea(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new ta(h)}else"increment"in a?l=new Hl(o,a.increment):J(16584,{proto:a});const u=Ge.fromServerFormat(a.fieldPath);return new Gd(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Yr(t,e.update.name),s=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new hn(u.map(h=>Ge.fromServerFormat(h)))}(e.updateMask);return new Ni(i,s,o,n,r)}return new lc(i,s,n,r)}if(e.delete){const i=Yr(t,e.delete);return new cc(i,n)}if(e.verify){const i=Yr(t,e.verify);return new bw(i,n)}return J(1463,{proto:e})}function V5(t,e){return t&&t.length>0?(ee(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?at(i.updateTime):at(s);return o.isEqual(te.min())&&(o=at(s)),new E5(o,i.transformResults||[])}(n,e))):[]}function KR(t,e){return{documents:[HR(t,e.path)]}}function Ap(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HR(t,i);const s=function(u){if(u.length!==0)return XR(be.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:fs(p.field),direction:M5(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=I0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function QR(t,e,n,r){const{ft:i,parent:s}=Ap(t,e),o={},a=[];let l=0;return n.forEach(u=>{const h=r?u.alias:"aggregate_"+l++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:fs(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:fs(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function YR(t){let e=GR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=JR(f);return p instanceof be&&vw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(I){return new _d(Ja(I.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Bd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,_=f.values||[];return new Fs(_,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,_=f.values||[];return new Fs(_,p)}(n.endAt)),vR(e,i,o,s,a,"F",l,u)}function O5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ja(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ja(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ja(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ja(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return ge.create(Ja(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return be.create(n.compositeFilter.filters.map(r=>JR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function M5(t){return R5[t]}function j5(t){return k5[t]}function F5(t){return P5[t]}function fs(t){return{fieldPath:t.canonicalString()}}function Ja(t){return Ge.fromServerFormat(t.fieldPath)}function XR(t){return t instanceof ge?function(n){if(n.op==="=="){if(ix(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NAN"}};if(rx(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ix(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NAN"}};if(rx(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(n.field),op:j5(n.op),value:n.value}}}(t):t instanceof be?function(n){const r=n.getFilters().map(i=>XR(i));return r.length===1?r[0]:{compositeFilter:{op:F5(n.op),filters:r}}}(t):J(54877,{filter:t})}function U5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r,i,s=te.min(),o=te.min(),a=et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.yt=e}}function B5(t,e){let n;if(e.document)n=Tp(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=ra(e.noDocument.readTime);n=je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J(56709);{const r=K.fromSegments(e.unknownDocument.path),i=ra(e.unknownDocument.version);n=je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new xe(i[0],i[1]);return te.fromTimestamp(s)}(e.readTime)),n}function Ix(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:wd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Gl(s,o.version.toTimestamp()),createTime:Gl(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:na(e.version)};else{if(!e.isUnknownDocument())return J(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:na(e.version)}}return r}function Pm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function na(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ra(t){const e=new xe(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Ro(t,e){const n=(e.baseMutations||[]).map(s=>b0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>b0(t.yt,s)),i=xe.fromMillis(e.localWriteTimeMs);return new Tw(e.batchId,i,n,r)}function pu(t){const e=ra(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ra(t.lastLimboFreeSnapshotVersion):te.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ee(o===1,1966,{count:o}),qt(ac(GR(s.documents[0])))}(t.query):function(s){return qt(YR(s))}(t.query),new fi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function tk(t,e){const n=na(e.snapshotVersion),r=na(e.lastLimboFreeSnapshotVersion);let i;i=Sm(e.target)?KR(t.yt,e.target):Ap(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sp(t){const e=YR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?km(e,e.limit,"L"):e}function Bg(t,e){return new Sw(e.largestBatchId,b0(t.yt,e.overlayMutation))}function Ex(t,e){const n=e.path.lastSegment();return[t,$t(e.path.popLast()),n]}function xx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:na(r.readTime),documentKey:$t(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{getBundleMetadata(e,n){return bx(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ra(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return bx(e).put(function(i){return{bundleId:i.id,createTime:na(at(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Tx(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Sp(s.bundledQuery),readTime:ra(s.readTime)}}(r)})}saveNamedQuery(e,n){return Tx(e).put(function(i){return{name:i.name,readTime:na(at(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function bx(t){return wt(t,yp)}function Tx(t){return wt(t,_p)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Rp(e,r)}getOverlay(e,n){return Zc(e).get(Ex(this.userId,n)).next(r=>r?Bg(this.serializer,r):null)}getOverlays(e,n){const r=Hr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Sw(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add($t(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Zc(e).Z(f0,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Hr(),s=$t(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zc(e).J(f0,o).next(a=>{for(const l of a){const u=Bg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Zc(e).ee({index:JS,range:a},(l,u,h)=>{const f=Bg(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}St(e,n){return Zc(e).put(function(i,s,o){const[a,l,u]=Ex(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:vd(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Zc(t){return wt(t,wp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{bt(e){return wt(e,gw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt($e(e.integerValue));else if("doubleValue"in e){const r=$e(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ud(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=bi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ti(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Ep(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):J(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=Bl,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt($e(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ko.Kt=new ko;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=255;function q5(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Ax(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=q5(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class H5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=Ax(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=Ax(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(za),this.sn(255)}_n(){this.an(za),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===za?(this.sn(za),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===za?(this.an(za),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class G5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class W5{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class eu{constructor(){this.cn=new H5,this.ln=new G5(this.cn),this.hn=new W5(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Po(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Lf(this.En),directionalValue:Lf(this.dn),orderedDocumentKey:Lf(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function es(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Sx(t.En,e.En),n!==0?n:(n=Sx(t.dn,e.dn),n!==0?n:K.comparator(t.In,e.In)))}function Sx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Lf(t){return sA()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function Rx(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class kx{constructor(e){this.mn=new Ae((n,r)=>Ge.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=u0(e);if(n!==void 0&&!this.wn(n))return!1;const r=xo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ae(Ge.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Uo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Uo(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Uo(r.field,r.dir==="asc"?0:1)));return new Vl(Vl.UNKNOWN_ID,this.collectionId,n,Ol.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){var n,r;if(ee(t instanceof ge||t instanceof be,20012),t instanceof ge){if(t instanceof wR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>ge.create(t.field,"==",s)))||[];return be.create(i,"or")}return t}const e=t.filters.map(i=>nk(i));return be.create(e,t.op)}function K5(t){if(t.getFilters().length===0)return[];const e=S0(nk(t));return ee(rk(e),7391),T0(e)||A0(e)?[e]:e.getFilters()}function T0(t){return t instanceof ge}function A0(t){return t instanceof be&&vw(t)}function rk(t){return T0(t)||A0(t)||function(n){if(n instanceof be&&y0(n)){for(const r of n.getFilters())if(!T0(r)&&!A0(r))return!1;return!0}return!1}(t)}function S0(t){if(ee(t instanceof ge||t instanceof be,34018),t instanceof ge)return t;if(t.filters.length===1)return S0(t.filters[0]);const e=t.filters.map(r=>S0(r));let n=be.create(e,t.op);return n=Cm(n),rk(n)?n:(ee(n instanceof be,64498),ee($l(n),40251),ee(n.filters.length>1,57927),n.filters.reduce((r,i)=>Pw(r,i)))}function Pw(t,e){let n;return ee(t instanceof ge||t instanceof be,38388),ee(e instanceof ge||e instanceof be,25473),n=t instanceof ge?e instanceof ge?function(i,s){return be.create([i,s],"and")}(t,e):Px(t,e):e instanceof ge?Px(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0,48005),$l(i)&&$l(s))return gR(i,s.getFilters());const o=y0(i)?i:s,a=y0(i)?s:i,l=o.filters.map(u=>Pw(u,a));return be.create(l,"or")}(t,e),Cm(n)}function Px(t,e){if($l(e))return gR(e,t.getFilters());{const n=e.filters.map(r=>Pw(t,r));return be.create(n,"or")}}function Cm(t){if(ee(t instanceof ge||t instanceof be,11850),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return Cm(e[0]);if(mR(t))return t;const n=e.map(i=>Cm(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.Cn=new Cw}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Vn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Cw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="IndexedDbIndexManager",Jh=new Uint8Array(0);class Y5{constructor(e,n){this.databaseId=n,this.vn=new Cw,this.Fn=new Ci(r=>Zo(r),(r,i)=>$d(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:$t(i)};return Nx(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[MS(n),""],!1,!0);return Nx(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(qr(o.parent))}return r})}addFieldIndex(e,n){const r=tu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=qa(e);return s.next(a=>{o.put(xx(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=tu(e),i=qa(e),s=$a(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=tu(e),r=$a(e),i=qa(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new kx(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=$a(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=le();const a=[];return L.forEach(s,(l,u)=>{q(Cx,`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(V=>`${V.fieldPath}:${V.kind}`).join(",")}`}(l)} to execute ${Zo(n)}`);const h=function(x,V){const z=u0(V);if(z===void 0)return null;for(const H of Rm(x,z.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null}(u,l),f=function(x,V){const z=new Map;for(const H of xo(V))for(const b of Rm(x,H.fieldPath))switch(b.op){case"==":case"in":z.set(H.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return z.set(H.fieldPath.canonicalString(),b.value),Array.from(z.values())}return null}(u,l),p=function(x,V){const z=[];let H=!0;for(const b of xo(V)){const w=b.kind===0?cx(x,b.fieldPath,x.startAt):ux(x,b.fieldPath,x.startAt);z.push(w.value),H&&(H=w.inclusive)}return new Fs(z,H)}(u,l),_=function(x,V){const z=[];let H=!0;for(const b of xo(V)){const w=b.kind===0?ux(x,b.fieldPath,x.endAt):cx(x,b.fieldPath,x.endAt);z.push(w.value),H&&(H=w.inclusive)}return new Fs(z,H)}(u,l),I=this.On(l,u,p),A=this.On(l,u,_),D=this.Nn(l,u,f),E=this.Bn(l.indexId,h,I,p.inclusive,A,_.inclusive,D);return L.forEach(E,v=>r.Y(v,n.limit).next(x=>{x.forEach(V=>{const z=K.fromSegments(V.documentKey);o.has(z)||(o=o.add(z),a.push(z))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=K5(be.create(e.filters,"and")).map(r=>w0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.Ln(n[f/u]):Jh,_=this.kn(e,p,r[f%u],i),I=this.qn(e,p,s[f%u],o),A=a.map(D=>this.kn(e,p,D,!0));h.push(...this.createRange(_,I,A))}return h}kn(e,n,r,i){const s=new Po(e,K.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Po(e,K.empty(),n,r);return i?s.An():s}xn(e,n){const r=new kx(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ae(Ge.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new eu;for(const i of xo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ko.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new eu;return ko.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new eu;return ko.Kt.Dt(Xo(this.databaseId,n),r.Pn(function(s){const o=xo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new eu);let s=0;for(const o of xo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&yd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ko.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new eu;l.seed(a.un()),ko.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=tu(e),i=qa(e);return(n?r.J(h0,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new Ol(f.sequenceNumber,new Vn(ra(f.readTime),new K(qr(f.documentKey)),f.largestBatchId)):Ol.empty(),_=h.fields.map(([I,A])=>new Uo(Ge.fromServerFormat(I),A));return new Vl(h.indexId,h.collectionGroup,_,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=tu(e),s=qa(e);return this.Gn(e).next(o=>i.J(h0,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(xx(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const h=this.jn(s,l);return u.isEqual(h)?L.resolve():this.Jn(e,s,l,u,h)}))))})}Hn(e,n,r,i){return $a(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return $a(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=$a(e);let s=new Ae(es);return i.ee({index:YS,range:IDBKeyRange.only([r.indexId,this.uid,Lf(this.$n(r,n))])},(o,a)=>{s=s.add(new Po(r.indexId,n,Rx(a.arrayValue),Rx(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Ae(es);const i=this.Qn(n,e);if(i==null)return r;const s=u0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(yd(o))for(const a of o.arrayValue.values||[])r=r.add(new Po(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Po(n.indexId,e.key,Jh,i));return r}Jn(e,n,r,i,s){q(Cx,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const _=l.getIterator(),I=u.getIterator();let A=Ba(_),D=Ba(I);for(;A||D;){let E=!1,v=!1;if(A&&D){const x=h(A,D);x<0?v=!0:x>0&&(E=!0)}else A!=null?v=!0:E=!0;E?(f(D),D=Ba(I)):v?(p(A),A=Ba(_)):(A=Ba(_),D=Ba(I))}}(i,s,es,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return qa(e).ee({index:QS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>es(o,a)).filter((o,a,l)=>!a||es(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=es(o,e),l=es(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Jh,K.empty()),l=i[o+1].Vn(this.uid,Jh,K.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return es(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Dx)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||J(44426))).next(Dx)}}function Nx(t){return wt(t,fd)}function $a(t){return wt(t,Du)}function tu(t){return wt(t,pw)}function qa(t){return wt(t,Nu)}function Dx(t){ee(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;hw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ik=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e,n){const r=t.store(vr),i=t.store(Ml),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{ee(a===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=GS(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return L.waitFor(s).next(()=>u)}function Nm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(ik,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);class kp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ee(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new kp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).ee({index:Oo,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Xa(e),o=ts(e);return o.add({}).next(a=>{ee(typeof a=="number",49019);const l=new Tw(a,n,r,i),u=function(_,I,A){const D=A.baseMutations.map(v=>vd(_.yt,v)),E=A.mutations.map(v=>vd(_.yt,v));return{userId:I,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:D,mutations:E}}(this.serializer,this.userId,l),h=[];let f=new Ae((p,_)=>se(p.canonicalString(),_.canonicalString()));for(const p of i){const _=GS(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(_,Nj))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return ts(e).get(n).next(r=>r?(ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ro(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ts(e).ee({index:Oo,range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r,47524,{tr:r}),s=Ro(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ds;return ts(e).ee({index:Oo,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ds],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J(Oo,n).next(r=>r.map(i=>Ro(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Sf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Xa(e).ee({range:i},(o,a,l)=>{const[u,h,f]=o,p=qr(h);if(u===this.userId&&n.path.isEqual(p))return ts(e).get(f).next(_=>{if(!_)throw J(61480,{nr:o,batchId:f});ee(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:f}),s.push(Ro(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(se);const i=[];return n.forEach(s=>{const o=Sf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xa(e).ee({range:a},(u,h,f)=>{const[p,_,I]=u,A=qr(_);p===this.userId&&s.path.isEqual(A)?r=r.add(I):f.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Sf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ae(se);return Xa(e).ee({range:o},(l,u,h)=>{const[f,p,_]=l,I=qr(p);f===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(_)):h.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ts(e).get(s).next(o=>{if(o===null)throw J(35274,{batchId:s});ee(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Ro(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return sk(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xa(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=qr(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return ok(e,this.userId,n)}_r(e){return ak(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ds,lastStreamToken:""})}}function ok(t,e,n){const r=Sf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xa(t).ee({range:s,X:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function ts(t){return wt(t,vr)}function Xa(t){return wt(t,Ml)}function ak(t){return wt(t,dd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new ia(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new xe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ha(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ee(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ha(e).ee((o,a)=>{const l=pu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ha(e).ee((r,i)=>{const s=pu(i);n(s)})}lr(e){return Vx(e).get(Am).next(n=>(ee(n!==null,2888),n))}hr(e,n){return Vx(e).put(Am,n)}Pr(e,n){return Ha(e).put(tk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Zo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ha(e).ee({range:i,index:KS},(o,a,l)=>{const u=pu(a);$d(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ms(e);return n.forEach(o=>{const a=$t(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=ms(e);return L.forEach(n,s=>{const o=$t(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ms(e);let s=le();return i.ee({range:r,X:!0},(o,a,l)=>{const u=qr(o[1]),h=new K(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=$t(n.path),i=IDBKeyRange.bound([r],[MS(r)],!1,!0);let s=0;return ms(e).ee({index:mw,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return Ha(e).get(n).next(r=>r?pu(r):null)}}function Ha(t){return wt(t,jl)}function Vx(t){return wt(t,Bo)}function ms(t){return wt(t,Fl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="LruGarbageCollector",lk=1048576;function Mx([t,e],[n,r]){const i=se(t,n);return i===0?se(e,r):i}class X5{constructor(e){this.Ir=e,this.buffer=new Ae(Mx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Mx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(Ox,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ks(n)?q(Ox,"Ignoring IndexedDB error during garbage collection: ",n):await Ws(n)}await this.Vr(3e5)})}}class Z5{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(dn.ce);const r=new X5(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Lx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Qa()<=pe.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function uk(t,e){return new Z5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,n){this.db=e,this.garbageCollector=uk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Xh(e,r)}removeReference(e,n,r){return Xh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Xh(e,n)}br(e,n){return function(i,s){let o=!1;return ak(i).te(a=>ok(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,te.min()),ms(e).delete(function(f){return[0,$t(f.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Xh(e,n)}Sr(e,n){const r=ms(e);let i,s=dn.ce;return r.ee({index:mw},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==dn.ce&&n(new K(qr(i)),s),s=u,i=l):s=dn.ce}).next(()=>{s!==dn.ce&&n(new K(qr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xh(t,e){return ms(t).put(function(r,i){return{targetId:0,path:$t(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return wo(e).put(r)}removeEntry(e,n,r){return wo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pm(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=je.newInvalidDocument(n);return wo(e).ee({index:Rf,range:IDBKeyRange.only(nu(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:je.newInvalidDocument(n)};return wo(e).ee({index:Rf,range:IDBKeyRange.only(nu(n))},(i,s)=>{r={document:this.Cr(n,s),size:Nm(s)}}).next(()=>r)}getEntries(e,n){let r=fn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=fn(),i=new Oe(K.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Nm(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Ae(Ux);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(nu(i.first()),nu(i.last())),o=i.getIterator();let a=o.getNext();return wo(e).ee({index:Rf,range:s},(l,u,h)=>{const f=K.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Ux(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(nu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Pm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=fn();for(const f of u){const p=this.Cr(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Hd(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=fn();const o=Fx(n,r),a=Fx(n,Vn.max());return wo(e).ee({index:WS,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.Cr(K.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new n3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jx(e).get(d0).next(n=>(ee(!!n,20021),n))}Dr(e,n){return jx(e).put(d0,n)}Cr(e,n){if(n){const r=B5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return je.newInvalidDocument(e)}}function hk(t){return new t3(t)}class n3 extends dk{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ci(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ae((s,o)=>se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Ix(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Nm(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=Ix(this.Nr.serializer,o.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jx(t){return wt(t,hd)}function wo(t){return wt(t,Tm)}function nu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fx(t,e){const n=e.documentKey.path.toArray();return[t,Pm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ux(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=se(n[s],r[s]),i)return i;return i=se(n.length,r.length),i||(i=se(n[n.length-2],r[r.length-2]),i||se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ou(r.mutation,i,hn.empty(),xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=fu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fn();const o=Vu(),a=function(){return Vu()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Ni)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ou(h.mutation,u,h.mutation.getFieldMask(),xe.now())):o.set(u.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new r3(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Vu();let i=new Oe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||hn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=RR();h.forEach(p=>{if(!s.has(p)){const _=VR(n.get(p),r.get(p));_!==null&&f.set(p,_),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Iw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Hr());let a=Ll,l=s;return o.next(u=>L.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,le())).next(h=>({batchId:a,changes:SR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=fu();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(f,p){return new Pi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,je.newInvalidDocument(h)))});let a=fu();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Ou(h.mutation,u,hn.empty(),xe.now()),Hd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:at(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Sp(i.bundledQuery),readTime:at(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.overlays=new Oe(K.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Hr(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Oe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Hr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Hr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sw(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.Qr=new Ae(vt.$r),this.Ur=new Ae(vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new vt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new ue([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new ue([])),r=new vt(n,e),i=new vt(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ae(vt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Tw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ds:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(se);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new vt(new K(s),0);let a=new Ae(se);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new vt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.ri=e,this.docs=function(){return new Oe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():je.newInvalidDocument(n))}getEntries(e,n){let r=fn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():je.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fn();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hw(BS(h),r)<=0||(i.has(h.key)||Hd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new c3(this)}getSize(e){return L.resolve(this.size)}}class c3 extends dk{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.persistence=e,this.si=new Ci(n=>Zo(n),$d),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new Nw,this.targetCount=0,this.ai=ia.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ia(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.ui={},this.overlays={},this.ci=new dn(0),this.li=!1,this.li=!0,this.hi=new o3,this.referenceDelegate=e(this),this.Pi=new u3(this),this.indexManager=new Q5,this.remoteDocumentCache=function(i){return new l3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ek(n),this.Ii=new i3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new s3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new a3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new d3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class d3 extends $S{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Nw,this.Vi=null}static mi(e){return new Pp(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Dm{constructor(e,n){this.persistence=e,this.pi=new Ci(r=>$t(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uk(this,n)}static mi(e,n){return new Dm(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,te.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pf(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new gp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(zd)}(e),function(l){l.createObjectStore(dd,{keyPath:Cj}),l.createObjectStore(vr,{keyPath:JE,autoIncrement:!0}).createIndex(Oo,XE,{unique:!0}),l.createObjectStore(Ml)}(e),Bx(e),function(l){l.createObjectStore(bo)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Fl),l.deleteObjectStore(jl),l.deleteObjectStore(Bo)}(e),Bx(e)),o=o.next(()=>function(l){const u=l.store(Bo),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put(Am,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(vr).J().next(f=>{l.deleteObjectStore(vr),l.createObjectStore(vr,{keyPath:JE,autoIncrement:!0}).createIndex(Oo,XE,{unique:!0});const p=u.store(vr),_=f.map(I=>p.put(I));return L.waitFor(_)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Ul,{keyPath:Uj})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(hd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(yp,{keyPath:Bj})})(e),function(l){l.createObjectStore(_p,{keyPath:zj})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(wp,{keyPath:Qj});u.createIndex(f0,Yj,{unique:!1}),u.createIndex(JS,Jj,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Tm,{keyPath:Dj});u.createIndex(Rf,Lj),u.createIndex(WS,Vj)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(bo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(pw,{keyPath:$j,autoIncrement:!0}).createIndex(h0,qj,{unique:!1}),l.createObjectStore(Nu,{keyPath:Hj}).createIndex(QS,Gj,{unique:!1}),l.createObjectStore(Du,{keyPath:Wj}).createIndex(YS,Kj,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Nu).clear()}).next(()=>{n.objectStore(Du).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(gw,{keyPath:Xj})})(e)})),r<18&&i>=18&&sA()&&(o=o.next(()=>{n.objectStore(Nu).clear()}).next(()=>{n.objectStore(Du).clear()})),o}wi(e){let n=0;return e.store(bo).ee((r,i)=>{n+=Nm(i)}).next(()=>{const r={byteSize:n};return e.store(hd).put(d0,r)})}yi(e){const n=e.store(dd),r=e.store(vr);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Ds],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Oo,o).next(a=>L.forEach(a,l=>{ee(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Ro(this.serializer,l);return sk(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(Fl),r=e.store(bo);return e.store(Bo).get(Am).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ue(o),u=function(f){return[0,$t(f)]}(l);s.push(n.get(u).next(h=>h?L.resolve():(f=>n.put({targetId:0,path:$t(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(fd,{keyPath:Fj});const r=n.store(fd),i=new Cw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:$t(l)})}};return n.store(bo).ee({X:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>n.store(Ml).ee({X:!0},([o,a,l],u)=>{const h=qr(a);return s(h.popLast())}))}Di(e){const n=e.store(jl);return n.ee((r,i)=>{const s=pu(i),o=tk(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(bo),i=[];return r.ee((s,o)=>{const a=n.store(Tm),l=function(f){return f.document?new K(ue.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):J(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(vr),i=hk(this.serializer),s=new Dw(Pp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??le();Ro(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const h=new Et(u),f=Rp.wt(this.serializer,h),p=s.getIndexManager(h),_=kp.wt(h,this.serializer,p,s.referenceDelegate);return new fk(i,_,f,p).recalculateAndSaveOverlaysForDocumentKeys(new m0(n,dn.ce),l).next()})})}}function Bx(t){t.createObjectStore(Fl,{keyPath:Mj}).createIndex(mw,jj,{unique:!0}),t.createObjectStore(jl,{keyPath:"targetId"}).createIndex(KS,Oj,{unique:!0}),t.createObjectStore(Bo)}const ns="IndexedDbPersistence",zg=18e5,$g=5e3,qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mk="main";class Lw{constructor(e,n,r,i,s,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!Lw.v())throw new F(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new e3(this,i),this.$i=n+mk,this.serializer=new ek(l),this.Ui=new Qr(this.$i,this.Ni,new h3(this.serializer)),this.hi=new $5,this.Pi=new J5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hk(this.serializer),this.Ii=new z5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&ot(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(M.FAILED_PRECONDITION,qg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new dn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ks(e))return q(ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ru(e).get(Ua).next(n=>L.resolve(this.es(n)))}ts(e){return Zh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,zg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=wt(n,Ul);return r.J().next(i=>{const s=this.ss(i,zg),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):ru(e).get(Ua).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,$g)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(M.FAILED_PRECONDITION,qg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zh(e).J().next(r=>this.ss(r,$g).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[zd,Ul],e=>{const n=new m0(e,dn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Zh(e).J().next(n=>this.ss(n,zg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return kp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Y5(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Rp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){q(ns,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?t5:l===17?tR:l===16?e5:l===15?yw:l===14?eR:l===13?ZS:l===12?Zj:l===11?XS:void J(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new m0(a,this.ci?this.ci.next():dn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(M.FAILED_PRECONDITION,zS);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return ru(e).get(Ua).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,$g)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(M.FAILED_PRECONDITION,qg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ru(e).put(Ua,n)}static v(){return Qr.v()}Zi(e){const n=ru(e);return n.get(Ua).next(r=>this.es(r)?(q(ns,"Releasing primary lease."),n.delete(Ua)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;iA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ot(ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ot("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ru(t){return wt(t,zd)}function Zh(t){return wt(t,Ul)}function Vw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ow(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return iA()?8:qS(_t())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new f3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Qa()<=pe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ya(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Qa()<=pe.DEBUG&&q("QueryEngine","Query:",Ya(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Qa()<=pe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ya(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):L.resolve())}ys(e,n){if(dx(n))return L.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=km(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,km(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return dx(n)||i.isEqual(te.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(Qa()<=pe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ya(n)),this.vs(e,o,n,US(i,Ll)).next(a=>a))})}Ds(e,n){let r=new Ae(TR(e));return n.forEach((i,s)=>{Hd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Qa()<=pe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ya(n)),this.ps.getDocumentsMatchingQuery(e,n,Vn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="LocalStore",m3=3e8;class p3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Oe(se),this.xs=new Ci(s=>Zo(s),$d),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gk(t,e,n,r){return new p3(t,e,n,r)}async function yk(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=le();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function g3(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let _=L.resolve();return p.forEach(I=>{_=_.next(()=>h.getEntry(l,I)).next(A=>{const D=u.docVersions.get(I);ee(D!==null,48541),A.version.compareTo(D)<0&&(f.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _k(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function y3(t,e){const n=Q(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let _=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(et.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(f,_),function(A,D,E){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=m3?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,_,h)&&a.push(n.Pi.updateTargetData(s,_))});let l=fn(),u=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(wk(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function wk(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q(Mw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function _3(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ds),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wl(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Kl(t,e,n){const r=Q(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ks(o))throw o;q(Mw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Lm(t,e,n){const r=Q(t);let i=te.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Q(l),p=f.xs.get(h);return p!==void 0?L.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:le())).next(a=>(Ek(r,bR(e),a),{documents:a,Qs:s})))}function vk(t,e){const n=Q(t),r=Q(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Ik(t,e){const n=Q(t),r=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,US(r,Ll),Number.MAX_SAFE_INTEGER)).then(i=>(Ek(n,e,i),i))}function Ek(t,e,n){let r=t.Os.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function w3(t,e,n,r){const i=Q(t);let s=le(),o=fn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(s=s.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(h,f)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await Wl(i,function(h){return qt(ac(ue.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>wk(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function v3(t,e,n=le()){const r=await Wl(t,qt(Sp(e.bundledQuery))),i=Q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=at(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(et.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="firestore_clients";function zx(t,e){return`${xk}_${t}_${e}`}const bk="firestore_mutations";function $x(t,e,n){let r=`${bk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Tk="firestore_targets";function Hg(t,e){return`${Tk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="SharedClientState";class Vm{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new F(i.error.code,i.error.message))),o?new Vm(e,n,i.state,s):(ot(Br,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new F(r.error.code,r.error.message))),s?new ju(e,r.state,i):(ot(Br,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Om{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ew();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=HS(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Om(e,s):(ot(Br,`Failed to parse client data for instance '${e}': ${n}`),null)}}class jw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jw(n.clientId,n.onlineState):(ot(Br,`Failed to parse online state: ${e}`),null)}}class R0{constructor(){this.activeTargetIds=Ew()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gg{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Oe(se),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=zx(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new R0),this.ro=new RegExp(`^${xk}_${o}_([^_]*)$`),this.io=new RegExp(`^${bk}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Tk}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(zx(this.persistenceKey,r));if(i){const s=Om.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Hg(this.persistenceKey,e));if(i){const s=ju.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hg(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Br,"READ",e,n),n}setItem(e,n){q(Br,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Br,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Br,"EVENT",n.key,n.newValue),n.key===this.eo)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=dn.ce;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number",30636,{So:s}),o=a}catch(a){ot(Br,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==dn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Vm(this.currentUser,e,n,r),s=$x(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=$x(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Hg(this.persistenceKey,e),s=new ju(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Om.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Vm.Ws(new Et(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return ju.Ws(i,n)}uo(e){return jw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Br,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Ew();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Ak{constructor(){this.Mo=new R0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new R0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="ConnectivityMonitor";class Hx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(qx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function k0(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="RestConnection",E3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class x3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===pd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=k0(),a=this.zo(e,n.toUriEncodedString());q(Wg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=Si(u);return this.Jo(e,a,l,r,h).then(f=>(q(Wg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw sr(Wg,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=E3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class T3 extends x3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=k0();return new Promise((a,l)=>{const u=new PS;u.setWithCredentials(!0),u.listenOnce(CS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Af.NO_ERROR:const f=u.getResponseJson();q(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Af.TIMEOUT:q(Ft,`RPC '${e}' ${o} timed out`),l(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const p=u.getStatus();if(q(Ft,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const A=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(v)>=0?v:M.UNKNOWN}(I.status);l(new F(A,I.message))}else l(new F(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new F(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(Ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);q(Ft,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=k0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LS(),a=DS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");q(Ft,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,_=!1;const I=new b3({Yo:D=>{_?q(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(p||(q(Ft,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),q(Ft,`RPC '${e}' stream ${i} sending:`,D),f.send(D))},Zo:()=>f.close()}),A=(D,E,v)=>{D.listen(E,x=>{try{v(x)}catch(V){setTimeout(()=>{throw V},0)}})};return A(f,hu.EventType.OPEN,()=>{_||(q(Ft,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),A(f,hu.EventType.CLOSE,()=>{_||(_=!0,q(Ft,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(f))}),A(f,hu.EventType.ERROR,D=>{_||(_=!0,sr(Ft,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),I.a_(new F(M.UNAVAILABLE,"The operation could not be completed")))}),A(f,hu.EventType.MESSAGE,D=>{var E;if(!_){const v=D.data[0];ee(!!v,16349);const x=v,V=(x==null?void 0:x.error)||((E=x[0])==null?void 0:E.error);if(V){q(Ft,`RPC '${e}' stream ${i} received error:`,V);const z=V.status;let H=function(S){const R=dt[S];if(R!==void 0)return FR(R)}(z),b=V.message;H===void 0&&(H=M.INTERNAL,b="Unknown error status: "+z+" with message "+V.message),_=!0,I.a_(new F(H,b)),f.close()}else q(Ft,`RPC '${e}' stream ${i} received:`,v),I.u_(v)}}),A(a,NS.STAT_EVENT,D=>{D.stat===o0.PROXY?q(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===o0.NOPROXY&&q(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof window<"u"?window:null}function Vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){return new C5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="PersistentStream";class Rk{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Fw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ot(n.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Gx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(Gx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A3 extends Rk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=L5(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?at(o.readTime):te.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=x0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sm(l)?{documents:KR(s,l)}:{query:Ap(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$R(s,o.resumeToken);const u=I0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Gl(s,o.snapshotVersion.toTimestamp());const u=I0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=O5(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=x0(this.serializer),n.removeTarget=e,this.q_(n)}}class S3 extends Rk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=V5(e.writeResults,e.commitTime),r=at(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=x0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vd(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{}class k3 extends R3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,E0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,E0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class P3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ot(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="RemoteStore";class C3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ys(this)&&(q(sa,"Restarting streams for network reachability change."),await async function(l){const u=Q(l);u.Ea.add(4),await uc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Qd(u)}(this))})}),this.Ra=new P3(r,i)}}async function Qd(t){if(Ys(t))for(const e of t.da)await e(!0)}async function uc(t){for(const e of t.da)await e(!1)}function Cp(t,e){const n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zw(n)?Bw(n):hc(n).O_()&&Uw(n,e))}function Ql(t,e){const n=Q(t),r=hc(n);n.Ia.delete(e),r.O_()&&kk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ys(n)&&n.Ra.set("Unknown"))}function Uw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hc(t).Y_(e)}function kk(t,e){t.Va.Ue(e),hc(t).Z_(e)}function Bw(t){t.Va=new S5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),hc(t).start(),t.Ra.ua()}function zw(t){return Ys(t)&&!hc(t).x_()&&t.Ia.size>0}function Ys(t){return Q(t).Ea.size===0}function Pk(t){t.Va=void 0}async function N3(t){t.Ra.set("Online")}async function D3(t){t.Ia.forEach((e,n)=>{Uw(t,e)})}async function L3(t,e){Pk(t),zw(t)?(t.Ra.ha(e),Bw(t)):t.Ra.set("Unknown")}async function V3(t,e,n){if(t.Ra.set("Online"),e instanceof zR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){q(sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mm(t,r)}else if(e instanceof Df?t.Va.Ze(e):e instanceof BR?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const r=await _k(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),kk(s,l);const f=new fi(h.target,l,u,h.sequenceNumber);Uw(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(sa,"Failed to raise snapshot:",r),await Mm(t,r)}}async function Mm(t,e,n){if(!Ks(e))throw e;t.Ea.add(1),await uc(t),t.Ra.set("Offline"),n||(n=()=>_k(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(sa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qd(t)})}function Ck(t,e){return e().catch(n=>Mm(t,n,e))}async function dc(t){const e=Q(t),n=Us(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ds;for(;O3(e);)try{const i=await _3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,M3(e,i)}catch(i){await Mm(e,i)}Nk(e)&&Dk(e)}function O3(t){return Ys(t)&&t.Ta.length<10}function M3(t,e){t.Ta.push(e);const n=Us(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Nk(t){return Ys(t)&&!Us(t).x_()&&t.Ta.length>0}function Dk(t){Us(t).start()}async function j3(t){Us(t).ra()}async function F3(t){const e=Us(t);for(const n of t.Ta)e.ea(n.mutations)}async function U3(t,e,n){const r=t.Ta.shift(),i=Aw.from(r,e,n);await Ck(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await dc(t)}async function B3(t,e){e&&Us(t).X_&&await async function(r,i){if(function(o){return jR(o)&&o!==M.ABORTED}(i.code)){const s=r.Ta.shift();Us(r).B_(),await Ck(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await dc(r)}}(t,e),Nk(t)&&Dk(t)}async function Wx(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),q(sa,"RemoteStore received new credentials");const r=Ys(n);n.Ea.add(3),await uc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qd(n)}async function P0(t,e){const n=Q(t);e?(n.Ea.delete(2),await Qd(n)):e||(n.Ea.add(2),await uc(n),n.Ra.set("Unknown"))}function hc(t){return t.ma||(t.ma=function(n,r,i){const s=Q(n);return s.sa(),new A3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:N3.bind(null,t),t_:D3.bind(null,t),r_:L3.bind(null,t),H_:V3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zw(t)?Bw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Pk(t))})),t.ma}function Us(t){return t.fa||(t.fa=function(n,r,i){const s=Q(n);return s.sa(),new S3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:j3.bind(null,t),r_:B3.bind(null,t),ta:F3.bind(null,t),na:U3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await dc(t)):(await t.fa.stop(),t.Ta.length>0&&(q(sa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new $w(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(t,e){if(ot("AsyncQueue",`${e}: ${t}`),Ks(t))return new F(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=fu(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.ga=new Oe(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class oa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oa(e,n,zo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $3{constructor(){this.queries=Qx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Q(n),s=i.queries;i.queries=Qx(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}}function Qx(){return new Ci(t=>xR(t),qd)}async function qw(t,e){const n=Q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new z3,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=fc(o,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Gw(n)}async function Hw(t,e){const n=Q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function q3(t,e){const n=Q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Gw(n)}function H3(t,e,n){const r=Q(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Gw(t){t.Ca.forEach(e=>{e.next()})}var C0,Yx;(Yx=C0||(C0={})).Ma="default",Yx.Cache="cache";class Ww{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==C0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.serializer=e}$s(e){return Yr(this.serializer,e)}Us(e){return e.metadata.exists?Tp(this.serializer,e.document,!1):je.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return at(e)}}class Kw{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=Vk(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ue.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Jx(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||le()).add(s);n.set(o,a)}}return n}async ja(e){const n=await w3(e,new Jx(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await v3(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function Vk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.key=e}}class Mk{constructor(e){this.key=e}}class jk{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=TR(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Kx,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),_=Hd(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let D=!1;p&&_?p.data.isEqual(_.data)?I!==A&&(r.track({type:3,doc:_}),D=!0):this.su(p,_)||(r.track({type:2,doc:_}),D=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(a=!0)):!p&&_?(r.track({type:0,doc:_}),D=!0):p&&!_&&(r.track({type:1,doc:p}),D=!0,(l||u)&&(a=!0)),D&&(_?(o=o.add(_),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(_,I){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:D})}};return A(_)-A(I)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new oa(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Mk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Ok(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Js="SyncEngine";class G3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class W3{constructor(e){this.key=e,this.hu=!1}}class K3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ci(a=>xR(a),qd),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(K.comparator),this.Au=new Map,this.Ru=new Nw,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Q3(t,e,n=!0){const r=Np(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Fk(r,e,n,!0),i}async function Y3(t,e){const n=Np(t);await Fk(n,e,!0,!1)}async function Fk(t,e,n,r){const i=await Wl(t.localStore,qt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Qw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Cp(t.remoteStore,i),a}async function Qw(t,e,n,r,i){t.pu=(f,p,_)=>async function(A,D,E,v){let x=D.view.ru(E);x.Cs&&(x=await Lm(A.localStore,D.query,!1).then(({documents:b})=>D.view.ru(b,x)));const V=v&&v.targetChanges.get(D.targetId),z=v&&v.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(x,A.isPrimaryClient,V,z);return N0(A,D.targetId,H.au),H.snapshot}(t,f,p,_);const s=await Lm(t.localStore,e,!0),o=new jk(e,s.Qs),a=o.ru(s.documents),l=Kd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);N0(t,n,u.au);const h=new G3(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function J3(t,e,n){const r=Q(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!qd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ql(r.remoteStore,i.targetId),Yl(r,i.targetId)}).catch(Ws)):(Yl(r,i.targetId),await Kl(r.localStore,i.targetId,!0))}async function X3(t,e){const n=Q(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ql(n.remoteStore,r.targetId))}async function Z3(t,e,n){const r=Zw(t);try{const i=await function(o,a){const l=Q(o),u=xe.now(),h=a.reduce((_,I)=>_.add(I.key),le());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=fn(),A=le();return l.Ns.getEntries(_,h).next(D=>{I=D,I.forEach((E,v)=>{v.isValidDocument()||(A=A.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,I)).next(D=>{f=D;const E=[];for(const v of a){const x=b5(v,f.get(v.key).overlayedDocument);x!=null&&E.push(new Ni(v.key,x,hR(x.value.mapValue),We.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,E,a)}).next(D=>{p=D;const E=D.applyToLocalDocumentSet(f,A);return l.documentOverlayCache.saveOverlays(_,D.batchId,E)})}).then(()=>({batchId:p.batchId,changes:SR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Oe(se)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Di(r,i.changes),await dc(r.remoteStore)}catch(i){const s=fc(i,"Failed to persist write");n.reject(s)}}async function Uk(t,e){const n=Q(t);try{const r=await y3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ee(o.hu,14607):i.removedDocuments.size>0&&(ee(o.hu,42227),o.hu=!1))}),await Di(n,r,e)}catch(r){await Ws(r)}}function Xx(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&Gw(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eF(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Oe(K.comparator);o=o.insert(s,je.newNoDocument(s,te.min()));const a=le().add(s),l=new Wd(te.min(),new Map,new Oe(se),o,a);await Uk(r,l),r.du=r.du.remove(s),r.Au.delete(e),Xw(r)}else await Kl(r.localStore,e,!1).then(()=>Yl(r,e,n)).catch(Ws)}async function tF(t,e){const n=Q(t),r=e.batch.batchId;try{const i=await g3(n.localStore,e);Jw(n,r,null),Yw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Di(n,i)}catch(i){await Ws(i)}}async function nF(t,e,n){const r=Q(t);try{const i=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ee(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Jw(r,e,n),Yw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Di(r,i)}catch(i){await Ws(i)}}async function rF(t,e){const n=Q(t);Ys(n.remoteStore)||q(Js,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Q(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===Ds)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=fc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Yw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Jw(t,e,n){const r=Q(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Yl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Bk(t,r)})}function Bk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ql(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xw(t))}function N0(t,e,n){for(const r of n)r instanceof Ok?(t.Ru.addReference(r.key,e),iF(t,r)):r instanceof Mk?(q(Js,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Bk(t,r.key)):J(19791,{wu:r})}function iF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Js,"New document in limbo: "+n),t.Eu.add(r),Xw(t))}function Xw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new W3(n)),t.du=t.du.insert(n,r),Cp(t.remoteStore,new fi(qt(ac(n.path)),r,"TargetPurposeLimboResolution",dn.ce))}}async function Di(t,e,n){const r=Q(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Ow.As(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,p=>L.forEach(p.Es,_=>h.persistence.referenceDelegate.addReference(f,p.targetId,_)).next(()=>L.forEach(p.ds,_=>h.persistence.referenceDelegate.removeReference(f,p.targetId,_)))))}catch(f){if(!Ks(f))throw f;q(Mw,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const _=h.Ms.get(p),I=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,A)}}}(r.localStore,s))}async function sF(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){q(Js,"User change. New user:",e.toKey());const r=await yk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new F(M.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Di(n,r.Ls)}}function oF(t,e){const n=Q(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function aF(t,e){const n=Q(t),r=await Lm(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&N0(n,e.targetId,i.au),i}async function lF(t,e){const n=Q(t);return Ik(n.localStore,e).then(r=>Di(n,r))}async function cF(t,e,n,r){const i=Q(t),s=await function(a,l){const u=Q(a),h=Q(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await dc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Jw(i,e,r||null),Yw(i,e),function(a,l){Q(Q(a).mutationQueue).ir(l)}(i.localStore,e)):J(6720,"Unknown batchState",{Su:n}),await Di(i,s)):q(Js,"Cannot apply mutation batch with id: "+e)}async function uF(t,e){const n=Q(t);if(Np(n),Zw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Zx(n,r.toArray());n.gu=!0,await P0(n.remoteStore,!0);for(const s of i)Cp(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Yl(n,o),Kl(n.localStore,o,!0))),Ql(n.remoteStore,o)}),await i,await Zx(n,r),function(o){const a=Q(o);a.Au.forEach((l,u)=>{Ql(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Oe(K.comparator)}(n),n.gu=!1,await P0(n.remoteStore,!1)}}async function Zx(t,e,n){const r=Q(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Wl(r.localStore,qt(l[0]));for(const u of l){const h=r.Tu.get(u),f=await aF(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await vk(r.localStore,o);a=await Wl(r.localStore,u),await Qw(r,zk(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function zk(t){return vR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dF(t){return function(n){return Q(Q(n).persistence).Ts()}(Q(t).localStore)}async function hF(t,e,n,r){const i=Q(t);if(i.gu)return void q(Js,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Ik(i.localStore,bR(s[0])),a=Wd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await Di(i,o,a);break}case"rejected":await Kl(i.localStore,e,!0),Yl(i,e,r);break;default:J(64155,n)}}async function fF(t,e,n){const r=Np(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){q(Js,"Adding an already active target "+i);continue}const s=await vk(r.localStore,i),o=await Wl(r.localStore,s);await Qw(r,zk(s),o.targetId,!1,o.resumeToken),Cp(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Kl(r.localStore,i,!1).then(()=>{Ql(r.remoteStore,i),Yl(r,i)}).catch(Ws)}}function Np(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eF.bind(null,e),e.Pu.H_=q3.bind(null,e.eventManager),e.Pu.yu=H3.bind(null,e.eventManager),e}function Zw(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nF.bind(null,e),e}function mF(t,e,n){const r=Q(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(_,I){const A=Q(_),D=at(I.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",E=>A.Ii.getBundleMetadata(E,I.id)).then(E=>!!E&&E.createTime.compareTo(D)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Vk(l));const u=new Kw(l,o.serializer);let h=await o.bu();for(;h;){const p=await u.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await u.ja(s.localStore);return await Di(s,f.Ha,void 0),await function(_,I){const A=Q(_);return A.persistence.runTransaction("Save bundle","readwrite",D=>A.Ii.saveBundleMetadata(D,I))}(s.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return sr(Js,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pa(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gk(this.persistence,new pk,e.initialUser,this.serializer)}Cu(e){return new Dw(Pp.mi,this.serializer)}Du(e){return new Ak}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class ev extends Jl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ee(this.persistence.referenceDelegate instanceof Dm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ck(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new Dw(r=>Dm.mi(r,n),this.serializer)}}class tv extends Jl{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Zw(this.xu.syncEngine),await dc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return gk(this.persistence,new pk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ck(r,e.asyncQueue,n)}Mu(e,n){const r=new kj(n,this.persistence);return new Rj(e.asyncQueue,r)}Cu(e){const n=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new Lw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Sk(),Vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Ak}}class $k extends tv{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Gg&&(this.sharedClientState.syncEngine={Co:cF.bind(null,n),vo:hF.bind(null,n),Fo:fF.bind(null,n),Ts:dF.bind(null,n),Do:lF.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await uF(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Sk();if(!Gg.v(n))throw new F(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bs{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sF.bind(null,this.syncEngine),await P0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $3}()}createDatastore(e){const n=pa(e.databaseInfo.databaseId),r=function(s){return new T3(s)}(e.databaseInfo);return function(s,o,a,l){return new k3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new C3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return Hx.v()?new Hx:new I3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new K3(i,s,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Q(i);q(sa,"RemoteStore shutting down."),s.Ea.add(5),await uc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bs.provider={build:()=>new Bs};function e1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Tt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new Lk(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new Lk(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new F(M.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Q(i),a={documents:s.map(f=>wd(o.serializer,f))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),u=new Map;l.forEach(f=>{const p=D5(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=u.get(f.toString());ee(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new bw(i,this.precondition(i)))}),await async function(r,i){const s=Q(r),o={writes:i.map(a=>vd(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J(50498,{Gu:e.constructor.name});n=te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new F(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new F(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Fw(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new yF(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!Bd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!jR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="FirestoreClient";class wF{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=uw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(zs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(zs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kg(t,e){t.asyncQueue.verifyOperationInProgress(),q(zs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await yk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nv(t);q(zs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Wx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Wx(e.remoteStore,i)),t._onlineComponents=e}async function nv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(zs,"Using user provided OfflineComponentProvider");try{await Kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;sr("Error using user provided cache. Falling back to memory cache: "+n),await Kg(t,new Jl)}}else q(zs,"Using default OfflineComponentProvider"),await Kg(t,new ev(void 0));return t._offlineComponents}async function Lp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(zs,"Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(q(zs,"Using default OnlineComponentProvider"),await t1(t,new Bs))),t._onlineComponents}function qk(t){return nv(t).then(e=>e.persistence)}function mc(t){return nv(t).then(e=>e.localStore)}function Hk(t){return Lp(t).then(e=>e.remoteStore)}function rv(t){return Lp(t).then(e=>e.syncEngine)}function Gk(t){return Lp(t).then(e=>e.datastore)}async function Xl(t){const e=await Lp(t),n=e.eventManager;return n.onListen=Q3.bind(null,e.syncEngine),n.onUnlisten=J3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X3.bind(null,e.syncEngine),n}function vF(t){return t.asyncQueue.enqueue(async()=>{const e=await qk(t),n=await Hk(t);return e.setNetworkEnabled(!0),function(i){const s=Q(i);return s.Ea.delete(0),Qd(s)}(n)})}function IF(t){return t.asyncQueue.enqueue(async()=>{const e=await qk(t),n=await Hk(t);return e.setNetworkEnabled(!1),async function(i){const s=Q(i);s.Ea.add(0),await uc(s),s.Ra.set("Offline")}(n)})}function EF(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,h){const f=Q(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new F(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=fc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await mc(t),e,n)),n.promise}function Wk(t,e,n={}){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new Dp({next:p=>{h.Nu(),o.enqueueAndForget(()=>Hw(s,f));const _=p.docs.has(a);!_&&p.fromCache?u.reject(new F(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&l&&l.source==="server"?u.reject(new F(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Ww(ac(a.path),h,{includeMetadataChanges:!0,qa:!0});return qw(s,f)}(await Xl(t),t.asyncQueue,e,n,r)),r.promise}function xF(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Lm(i,s,!0),l=new jk(s,a.Qs),u=l.ru(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const l=fc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await mc(t),e,n)),n.promise}function Kk(t,e,n={}){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new Dp({next:p=>{h.Nu(),o.enqueueAndForget(()=>Hw(s,f)),p.fromCache&&l.source==="server"?u.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Ww(a,h,{includeMetadataChanges:!0,qa:!0});return qw(s,f)}(await Xl(t),t.asyncQueue,e,n,r)),r.promise}function bF(t,e,n){const r=new Tt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await Gk(t);r.resolve(async function(o,a,l){var A;const u=Q(o),{request:h,gt:f,parent:p}=QR(u.serializer,IR(a),l);u.connection.$o||delete h.parent;const _=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(D=>!!D.result);ee(_.length===1,64727);const I=(A=_[0].result)==null?void 0:A.aggregateFields;return Object.keys(I).reduce((D,E)=>(D[f[E]]=I[E],D),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function TF(t,e){const n=new Dp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).Ca.add(s),s.next()}(await Xl(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).Ca.delete(s)}(await Xl(t),n))}}function AF(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?UR().encode(o):o,function(h,f){return new pF(h,f)}(function(h,f){if(h instanceof Uint8Array)return e1(h,f);if(h instanceof ArrayBuffer)return e1(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,pa(e));t.asyncQueue.enqueueAndForget(async()=>{mF(await rv(t),i,r)})}function SF(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await mc(t),e))}function Qk(t,e){return function(r,i){return new gF(r,i)}(t,e)}function RF(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=Q(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(f,p,_,I,A){f=[...f],p=[...p],f.sort(_),p.sort(_);const D=f.length,E=p.length;let v=0,x=0;for(;v<E&&x<D;){const V=_(f[x],p[v]);V<0?A(f[x++]):V>0?I(p[v++]):(v++,x++)}for(;v<E;)I(p[v++]);for(;x<D;)A(f[x++])}(u,i,bj,h=>{a.push(o.addFieldIndex(l,h))},h=>{a.push(o.deleteFieldIndex(l,h))})).next(()=>L.waitFor(a)))}(await mc(t),e))}function kF(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){Q(r).Fs.Vs=i}(await mc(t),e))}function PF(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Q(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await mc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firestore.googleapis.com",r1=!0;class i1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jk,this.ssl=r1}else this.host=e.host,this.ssl=e.ssl??r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ik;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fj;switch(r.type){case"firstParty":return new yj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(q("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function CF(t,e,n,r={}){var u;t=he(t,Yd);const i=Si(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(rp(`https://${a}`),V_("Firestore",!0)),s.host!==Jk&&s.host!==a&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!nr(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Et.MOCK_USER;else{h=tA(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(p)}t._authCredentials=new mj(new OS(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new At(this.firestore,e,this._query)}}class Ce{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ce(this.firestore,e,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ma(n,Ce._jsonSchema))return new Ce(e,r||null,new K(ue.fromString(n.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:mt("string",Ce._jsonSchemaVersion),referencePath:mt("string")};class Jr extends At{constructor(e,n,r){super(e,n,ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ce(this.firestore,null,new K(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function Jd(t,e,...n){if(t=X(t),dw("collection","path",e),t instanceof Yd){const r=ue.fromString(e,...n);return GE(r),new Jr(t,null,r)}{if(!(t instanceof Ce||t instanceof Jr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return GE(r),new Jr(t.firestore,null,r)}}function Qz(t,e){if(t=he(t,Yd),dw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new At(t,null,function(r){return new Pi(ue.emptyPath(),r)}(e))}function Xn(t,e,...n){if(t=X(t),arguments.length===1&&(e=uw.newId()),dw("doc","path",e),t instanceof Yd){const r=ue.fromString(e,...n);return HE(r),new Ce(t,null,new K(r))}{if(!(t instanceof Ce||t instanceof Jr))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return HE(r),new Ce(t.firestore,t instanceof Jr?t.converter:null,new K(r))}}function Yz(t,e){return t=X(t),e=X(e),(t instanceof Ce||t instanceof Jr)&&(e instanceof Ce||e instanceof Jr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Xk(t,e){return t=X(t),e=X(e),t instanceof At&&e instanceof At&&t.firestore===e.firestore&&qd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Fw(this,"async_queue_retry"),this._c=()=>{const r=Vf();r&&q(s1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ks(e))throw e;q(s1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ot("INTERNAL UNHANDLED ERROR: ",a1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=$w.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:a1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class NF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=-1;class Ne extends Yd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new o1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function Xz(t,e,n){n||(n=pd);const r=Sr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(nr(s,e))return i;throw new F(M.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new F(M.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Si(e.host)&&rp(e.host),r.initialize({options:e,instanceIdentifier:n})}function DF(t,e){const n=typeof t=="object"?t:Ld(),r=typeof t=="string"?t:e||pd,i=Sr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XT("firestore");s&&CF(i,...s)}return i}function Xe(t){if(t._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zk(t),t._firestoreClient}function Zk(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new r5(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Yk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wF(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Zz(t,e){sr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return eP(t,Bs.provider,{build:r=>new tv(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function e8(t){sr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();eP(t,Bs.provider,{build:n=>new $k(n,e.cacheSizeBytes)})}function eP(t,e,n){if((t=he(t,Ne))._firestoreClient||t._terminated)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Zk(t)}function t8(t){if(t._initialized&&!t._terminated)throw new F(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Qr.v())return Promise.resolve();const i=r+mk;await Qr.delete(i)}(Vw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function n8(t){return function(n){const r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>rF(await rv(n),r)),r.promise}(Xe(t=he(t,Ne)))}function r8(t){return vF(Xe(t=he(t,Ne)))}function i8(t){return IF(Xe(t=he(t,Ne)))}function s8(t){return CL(t.app,"firestore",t._databaseId.database),t._delete()}function l1(t,e){const n=Xe(t=he(t,Ne)),r=new NF;return AF(n,t._databaseId,e,r),r}function LF(t,e){return SF(Xe(t=he(t,Ne)),e).then(n=>n?new At(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class VF{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this._byteString=e}static fromBase64String(e){try{return new An(et.fromBase64String(e))}catch(n){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new An(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:An._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ma(e,An._jsonSchema))return An.fromBase64String(e.bytes)}}An._jsonSchemaVersion="firestore/bytes/1.0",An._jsonSchema={type:mt("string",An._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function o8(){return new ga(c0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(ma(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:mt("string",Xr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ma(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Tr(e.vectorValues);throw new F(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:mt("string",Tr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=/^__.*__$/;class MF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new lc(e,this.data,n,this.fieldTransforms)}}class tP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class Vp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nP(this.Ac)&&OF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pa(e)}Cc(e,n,r,i=!1){return new Vp({Ac:e,methodName:n,Dc:r,path:Ge.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _a(t){const e=t._freezeSettings(),n=pa(t._databaseId);return new jF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Op(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);uv("Data must be an object, but it was:",o,r);const a=sP(r,o);let l,u;if(s.merge)l=new hn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Ed(e,f,n);if(!o.contains(p))throw new F(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);aP(h,p)||h.push(p)}l=new hn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new MF(new Pt(a),l,u)}class Xd extends ya{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xd}}function rP(t,e,n){return new Vp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iv extends ya{_toFieldTransform(e){return new Gd(e.path,new ql)}isEqual(e){return e instanceof iv}}class sv extends ya{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rP(this,e,!0),r=this.vc.map(s=>wa(s,n)),i=new ea(r);return new Gd(e.path,i)}isEqual(e){return e instanceof sv&&nr(this.vc,e.vc)}}class ov extends ya{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rP(this,e,!0),r=this.vc.map(s=>wa(s,n)),i=new ta(r);return new Gd(e.path,i)}isEqual(e){return e instanceof ov&&nr(this.vc,e.vc)}}class av extends ya{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Hl(e.serializer,PR(e.serializer,this.Fc));return new Gd(e.path,n)}isEqual(e){return e instanceof av&&this.Fc===e.Fc}}function lv(t,e,n,r){const i=t.Cc(1,e,n);uv("Data must be an object, but it was:",i,r);const s=[],o=Pt.empty();Qs(r,(l,u)=>{const h=Mp(e,l,n);u=X(u);const f=i.yc(h);if(u instanceof Xd)s.push(h);else{const p=wa(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new hn(s);return new tP(o,a,i.fieldTransforms)}function cv(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Ed(e,r,n)],l=[i];if(s.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Ed(e,s[p])),l.push(s[p+1]);const u=[],h=Pt.empty();for(let p=a.length-1;p>=0;--p)if(!aP(u,a[p])){const _=a[p];let I=l[p];I=X(I);const A=o.yc(_);if(I instanceof Xd)u.push(_);else{const D=wa(I,A);D!=null&&(u.push(_),h.set(_,D))}}const f=new hn(u);return new tP(h,f,o.fieldTransforms)}function iP(t,e,n,r=!1){return wa(n,t.Cc(r?4:3,e))}function wa(t,e){if(oP(t=X(t)))return uv("Unsupported field value:",e,t),sP(t,e);if(t instanceof ya)return function(r,i){if(!nP(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=wa(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=X(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=xe.fromDate(r);return{timestampValue:Gl(i.serializer,s)}}if(r instanceof xe){const s=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gl(i.serializer,s)}}if(r instanceof Xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof An)return{bytesValue:$R(i.serializer,r._byteString)};if(r instanceof Ce){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tr)return function(o,a){return{mapValue:{fields:{[_w]:{stringValue:ww},[Bl]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return xw(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${pp(r)}`)}(t,e)}function sP(t,e){const n={};return rR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,i)=>{const s=wa(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function oP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof Xr||t instanceof An||t instanceof Ce||t instanceof ya||t instanceof Tr)}function uv(t,e,n){if(!oP(n)||!jS(n)){const r=pp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ed(t,e,n){if((e=X(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Mp(t,e);throw jm("Field path arguments must be of type string or ",t,!1,void 0,n)}const FF=new RegExp("[~\\*/\\[\\]]");function Mp(t,e,n){if(e.search(FF)>=0)throw jm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw jm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new F(M.INVALID_ARGUMENT,a+t+l)}function aP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UF extends xd{data(){return super.data()}}function jp(t,e){return typeof e=="string"?Mp(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class Zd extends dv{}function Of(t,e,...n){let r=[];e instanceof dv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof pc).length,a=s.filter(l=>l instanceof eh).length;if(o>1||o>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class eh extends Zd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new eh(e,n,r)}_apply(e){const n=this._parse(e);return uP(e._query,n),new At(e.firestore,e.converter,v0(e._query,n))}_parse(e){const n=_a(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){u1(f,h);const I=[];for(const A of f)I.push(c1(l,s,A));p={arrayValue:{values:I}}}else p=c1(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||u1(f,h),p=iP(a,o,f,h==="in"||h==="not-in");return ge.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Mf(t,e,n){const r=e,i=jp("where",t);return eh._create(i,r,n)}class pc extends dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)uP(o,l),o=v0(o,l)}(e._query,n),new At(e.firestore,e.converter,v0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function a8(...t){return t.forEach(e=>dP("or",e)),pc._create("or",t)}function l8(...t){return t.forEach(e=>dP("and",e)),pc._create("and",t)}class hv extends Zd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _d(s,o)}(e._query,this._field,this._direction);return new At(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Pi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function jf(t,e="asc"){const n=e,r=jp("orderBy",t);return hv._create(r,n)}class Fp extends Zd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fp(e,n,r)}_apply(e){return new At(e.firestore,e.converter,km(e._query,this._limit,this._limitType))}}function Qg(t){return FS("limit",t),Fp._create("limit",t,"F")}function c8(t){return FS("limitToLast",t),Fp._create("limitToLast",t,"L")}class Up extends Zd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Up(e,n,r)}_apply(e){const n=cP(e,this.type,this._docOrFields,this._inclusive);return new At(e.firestore,e.converter,function(i,s){return new Pi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function u8(...t){return Up._create("startAt",t,!0)}function BF(...t){return Up._create("startAfter",t,!1)}class Bp extends Zd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Bp(e,n,r)}_apply(e){const n=cP(e,this.type,this._docOrFields,this._inclusive);return new At(e.firestore,e.converter,function(i,s){return new Pi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function d8(...t){return Bp._create("endBefore",t,!1)}function h8(...t){return Bp._create("endAt",t,!0)}function cP(t,e,n,r){if(n[0]=X(n[0]),n[0]instanceof xd)return function(s,o,a,l,u){if(!l)throw new F(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of El(s))if(f.field.isKeyField())h.push(Xo(o,l.key));else{const p=l.data.field(f.field);if(vp(p))throw new F(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const _=f.field.canonicalString();throw new F(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(p)}return new Fs(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_a(t.firestore);return function(o,a,l,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new F(M.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let I=0;I<h.length;I++){const A=h[I];if(p[I].field.isKeyField()){if(typeof A!="string")throw new F(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!Iw(o)&&A.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);const D=o.path.child(ue.fromString(A));if(!K.isDocumentKey(D))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const E=new K(D);_.push(Xo(a,E))}else{const D=iP(l,u,A);_.push(D)}}return new Fs(_,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function c1(t,e,n){if(typeof(n=X(n))=="string"){if(n==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iw(e)&&n.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!K.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xo(t,new K(r))}if(n instanceof Ce)return Xo(t,n._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(n)}.`)}function u1(t,e){if(!Array.isArray(t)||t.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function dP(t,e){if(!(e instanceof eh||e instanceof pc))throw new F(M.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class hP{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Bl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>$e(o.doubleValue));return new Tr(n)}convertGeoPoint(e){return new Xr($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ip(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const n=bi(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ee(ZR(r),9688,{name:e});const i=new Jo(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fv extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8(t){return new Id("sum",Ed("sum",t))}function m8(t){return new Id("avg",Ed("average",t))}function zF(){return new Id("count")}function p8(t,e){var n,r;return t instanceof Id&&e instanceof Id&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function g8(t,e){return Xk(t.query,e.query)&&nr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="NOT SUPPORTED";class ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cn extends xd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ff(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Cn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function y8(t,e,n){if(ma(e,Cn._jsonSchema)){if(e.bundle===fP)throw new F(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=pa(t._databaseId),i=Qk(e.bundle,r),s=i.Wu(),o=new Kw(i.getMetadata(),r);for(const h of s)o.Ga(h);const a=o.documents;if(a.length!==1)throw new F(M.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Tp(r,a[0].document),u=new K(ue.fromString(e.bundleName));return new Cn(t,new fv(t),u,l,new ws(!1,!1),n||null)}}Cn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cn._jsonSchema={type:mt("string",Cn._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Ff extends Cn{data(e={}){return super.data(e)}}class Nn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ff(this._firestore,this._userDataWriter,r.key,r,new ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ff(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ff(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$F(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _8(t,e,n){if(ma(e,Nn._jsonSchema)){if(e.bundle===fP)throw new F(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=pa(t._databaseId),i=Qk(e.bundle,r),s=i.Wu(),o=new Kw(i.getMetadata(),r);for(const p of s)o.Ga(p);if(o.queries.length!==1)throw new F(M.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Sp(o.queries[0].bundledQuery),l=o.documents;let u=new zo;l.map(p=>{const _=Tp(r,p.document);u=u.add(_)});const h=oa.fromInitialDocuments(a,u,le(),!1,!1),f=new At(t,n||null,a);return new Nn(t,new fv(t),f,h)}}function $F(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}function w8(t,e){return t instanceof Cn&&e instanceof Cn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Nn&&e instanceof Nn&&t._firestore===e._firestore&&Xk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){t=he(t,Ce);const e=he(t.firestore,Ne);return Wk(Xe(e),t._key).then(n=>mv(e,t,n))}Nn._jsonSchemaVersion="firestore/querySnapshot/1.0",Nn._jsonSchema={type:mt("string",Nn._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class Xs extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new An(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ce(this.firestore,null,n)}}function v8(t){t=he(t,Ce);const e=he(t.firestore,Ne),n=Xe(e),r=new Xs(e);return EF(n,t._key).then(i=>new Cn(e,r,t._key,i,new ws(i!==null&&i.hasLocalMutations,!0),t.converter))}function I8(t){t=he(t,Ce);const e=he(t.firestore,Ne);return Wk(Xe(e),t._key,{source:"server"}).then(n=>mv(e,t,n))}function D0(t){t=he(t,At);const e=he(t.firestore,Ne),n=Xe(e),r=new Xs(e);return lP(t._query),Kk(n,t._query).then(i=>new Nn(e,r,t,i))}function E8(t){t=he(t,At);const e=he(t.firestore,Ne),n=Xe(e),r=new Xs(e);return xF(n,t._query).then(i=>new Nn(e,r,t,i))}function x8(t){t=he(t,At);const e=he(t.firestore,Ne),n=Xe(e),r=new Xs(e);return Kk(n,t._query,{source:"server"}).then(i=>new Nn(e,r,t,i))}function th(t,e,n){t=he(t,Ce);const r=he(t.firestore,Ne),i=zp(t.converter,e,n);return nh(r,[Op(_a(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,We.none())])}function b8(t,e,n,...r){t=he(t,Ce);const i=he(t.firestore,Ne),s=_a(i);let o;return o=typeof(e=X(e))=="string"||e instanceof ga?cv(s,"updateDoc",t._key,e,n,r):lv(s,"updateDoc",t._key,e),nh(i,[o.toMutation(t._key,We.exists(!0))])}function T8(t){return nh(he(t.firestore,Ne),[new cc(t._key,We.none())])}function A8(t,e){const n=he(t.firestore,Ne),r=Xn(t),i=zp(t.converter,e);return nh(n,[Op(_a(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then(()=>r)}function bl(t,...e){var l,u,h;t=X(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xl(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xl(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,a;if(t instanceof Ce)o=he(t.firestore,Ne),a=ac(t._key.path),s={next:f=>{e[r]&&e[r](mv(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=he(t,At);o=he(f.firestore,Ne),a=f._query;const p=new Xs(o);s={next:_=>{e[r]&&e[r](new Nn(o,p,f,_))},error:e[r+1],complete:e[r+2]},lP(t._query)}return function(p,_,I,A){const D=new Dp(A),E=new Ww(_,D,I);return p.asyncQueue.enqueueAndForget(async()=>qw(await Xl(p),E)),()=>{D.Nu(),p.asyncQueue.enqueueAndForget(async()=>Hw(await Xl(p),E))}}(Xe(o),a,i,s)}function S8(t,e,...n){const r=X(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const f of h){if(!(f in l)){u.error=`snapshotJson missing required field: ${f}`;break}const p=l[f];if(typeof p!="string"){u.error=`snapshotJson field '${f}' must be a string.`;break}if(p.length===0){u.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?u.bundle=p:f==="bundleName"?u.bundleName=p:f==="bundleSource"&&(u.bundleSource=p)}return u}(e);if(i.error)throw new F(M.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||xl(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&xl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,_){let I,A=!1;return l1(u,h.bundle).then(()=>LF(u,h.bundleName)).then(E=>{E&&!A&&(_&&E.withConverter(_),I=bl(E,f||{},p))}).catch(E=>(p.error&&p.error(E),()=>{})),()=>{A||(A=!0,I&&I())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&xl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,_){let I,A=!1;return l1(u,h.bundle).then(()=>{if(!A){const E=new Ce(u,_||null,K.fromPath(h.bundleName));I=bl(E,f||{},p)}}).catch(E=>(p.error&&p.error(E),()=>{})),()=>{A||(A=!0,I&&I())}}(r,i,s,a,n[o])}throw new F(M.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function R8(t,e){return TF(Xe(t=he(t,Ne)),xl(e)?e:{next:e})}function nh(t,e){return function(r,i){const s=new Tt;return r.asyncQueue.enqueueAndForget(async()=>Z3(await rv(r),i,s)),s.promise}(Xe(t),e)}function mv(t,e,n){const r=n.docs.get(e._key),i=new Xs(t);return new Cn(t,i,e._key,r,new ws(n.hasPendingWrites,n.fromCache),e.converter)}function k8(t){return qF(t,{count:zF()})}function qF(t,e){const n=he(t.firestore,Ne),r=Xe(n),i=nR(e,(s,o)=>new MR(o,s.aggregateType,s._internalFieldPath));return bF(r,t._query,i).then(s=>function(a,l,u){const h=new Xs(a);return new VF(l,h,u)}(n,t,s))}class HF{constructor(e){this.kind="memory",this._onlineComponentProvider=Bs.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new ev(void 0)}}toJSON(){return{kind:this.kind}}}class GF{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=JF(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class WF{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Jl.provider}toJSON(){return{kind:this.kind}}}class KF{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new ev(e)}}toJSON(){return{kind:this.kind}}}function P8(){return new WF}function C8(t){return new KF(t==null?void 0:t.cacheSizeBytes)}function N8(t){return new HF(t)}function D8(t){return new GF(t)}class QF{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bs.provider,this._offlineComponentProvider={build:n=>new tv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class YF{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Bs.provider,this._offlineComponentProvider={build:n=>new $k(n,e==null?void 0:e.cacheSizeBytes)}}}function JF(t){return new QF(t==null?void 0:t.forceOwnership)}function L8(){return new YF}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_a(e)}set(e,n,r){this._verifyNotCommitted();const i=vs(e,this._firestore),s=zp(i.converter,n,r),o=Op(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,We.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=vs(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof ga?cv(this._dataReader,"WriteBatch.update",s._key,n,r,i):lv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vs(e,this._firestore);return this._mutations=this._mutations.concat(new cc(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vs(t,e){if((t=X(t)).firestore!==e)throw new F(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_a(e)}get(e){const n=vs(e,this._firestore),r=new fv(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return J(24041);const s=i[0];if(s.isFoundDocument())return new xd(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new xd(this._firestore,r,n._key,null,n.converter);throw J(18433,{doc:s})})}set(e,n,r){const i=vs(e,this._firestore),s=zp(i.converter,n,r),o=Op(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=vs(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof ga?cv(this._dataReader,"Transaction.update",s._key,n,r,i):lv(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=vs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6 extends e6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vs(e,this._firestore),r=new Xs(this._firestore);return super.get(e).then(i=>new Cn(this._firestore,r,n._key,i._document,new ws(!1,!1),n.converter))}}function V8(t,e,n){t=he(t,Ne);const r={...XF,...n};return function(s){if(s.maxAttempts<1)throw new F(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Tt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Gk(s);new _F(s.asyncQueue,u,a,o,l).ju()}),l.promise}(Xe(t),i=>e(new t6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(){return new Xd("deleteField")}function M8(){return new iv("serverTimestamp")}function j8(...t){return new sv("arrayUnion",t)}function F8(...t){return new ov("arrayRemove",t)}function U8(t){return new av("increment",t)}function B8(t){return new Tr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t){return Xe(t=he(t,Ne)),new ZF(t,e=>nh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t,e){const n=Xe(t=he(t,Ne));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return sr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(h){throw new F(M.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=h1(l,"collectionGroup"),h=[];if(Array.isArray(l.fields))for(const f of l.fields){const p=Mp("setIndexConfiguration",h1(f,"fieldPath"));f.arrayConfig==="CONTAINS"?h.push(new Uo(p,2)):f.order==="ASCENDING"?h.push(new Uo(p,0)):f.order==="DESCENDING"&&h.push(new Uo(p,1))}a.push(new Vl(Vl.UNKNOWN_ID,u,h,Ol.empty()))}return a}(e);return RF(n,r)}function h1(t,e){if(typeof t[e]!="string")throw new F(M.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function q8(t){var i;t=he(t,Ne);const e=f1.get(t);if(e)return e;if(((i=Xe(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new n6(t);return f1.set(t,r),r}function H8(t){mP(t,!0)}function G8(t){mP(t,!1)}function W8(t){PF(Xe(t._firestore)).then(e=>q("deleting all persistent cache indexes succeeded")).catch(e=>sr("deleting all persistent cache indexes failed",e))}function mP(t,e){kF(Xe(t._firestore),e).then(n=>q(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>sr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const f1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t){var r;const e=Xe(he(t.firestore,Ne)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Ap(n,qt(t._query)).ft}function Q8(t,e){var s;const n=nR(e,(o,a)=>new MR(a,o.aggregateType,o._internalFieldPath)),r=Xe(he(t.firestore,Ne)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:QR(i,IR(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return pv.instance.onExistenceFilterMismatch(e)}}class pv{constructor(){this.Mc=new Map}static get instance(){return tf||(tf=new pv,function(n){if(Mu)throw new Error("a TestingHooksSpi instance is already set");Mu=n}(tf)),tf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let tf=null;(function(e,n=!0){(function(i){oc=i})(da),rr(new Ln("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ne(new pj(r.getProvider("auth-internal")),new _j(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zt($E,qE,e),zt($E,qE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="firebasestorage.googleapis.com",gP="storageBucket",r6=2*60*1e3,i6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends jn{constructor(e,n,r=0){super(Yg(e),`Firebase Storage: ${n} (${Yg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function Yg(t){return"storage/"+t}function gv(){const t="An unknown error occurred, please check the error payload for server response.";return new rt(tt.UNKNOWN,t)}function s6(t){return new rt(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function o6(t){return new rt(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function a6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rt(tt.UNAUTHENTICATED,t)}function l6(){return new rt(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function c6(t){return new rt(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function u6(){return new rt(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function d6(){return new rt(tt.CANCELED,"User canceled the upload/download.")}function h6(t){return new rt(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function f6(t){return new rt(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function m6(){return new rt(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gP+"' property when initializing the app?")}function p6(){return new rt(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g6(){return new rt(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function y6(t){return new rt(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function L0(t){return new rt(tt.INVALID_ARGUMENT,t)}function yP(){return new rt(tt.APP_DELETED,"The Firebase app was deleted.")}function _6(t){return new rt(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fu(t,e){return new rt(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function iu(t){throw new rt(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw f6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),I={bucket:1,path:3},A=n===pP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",E=new RegExp(`^https?://${A}/${i}/${D}`,"i"),x=[{regex:a,indices:l,postModify:s},{regex:_,indices:I,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<x.length;V++){const z=x[V],H=z.regex.exec(e);if(H){const b=H[z.indices.bucket];let w=H[z.indices.path];w||(w=""),r=new Rn(b,w),z.postModify(r);break}}if(r==null)throw h6(e);return r}}class w6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...D){u||(u=!0,e.apply(null,D))}function f(D){i=setTimeout(()=>{i=null,t(_,l())},D)}function p(){s&&clearTimeout(s)}function _(D,...E){if(u){p();return}if(D){p(),h.call(null,D,...E);return}if(l()||o){p(),h.call(null,D,...E);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let I=!1;function A(D){I||(I=!0,p(),!u&&(i!==null?(D||(a=2),clearTimeout(i),f(0)):D||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function I6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){return t!==void 0}function x6(t){return typeof t=="object"&&!Array.isArray(t)}function yv(t){return typeof t=="string"||t instanceof String}function m1(t){return _v()&&t instanceof Blob}function _v(){return typeof Blob<"u"}function p1(t,e,n,r){if(r<e)throw L0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw L0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _P(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var $o;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($o||($o={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,A)=>{this.resolve_=I,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new nf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$o.NO_ERROR,l=s.getStatus();if(!a||b6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===$o.ABORT;r(!1,new nf(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new nf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());E6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=gv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?yP():d6();o(l)}else{const l=u6();o(l)}};this.canceled_?n(!1,new nf(!1,null,!0)):this.backoffId_=v6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function A6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function S6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function P6(t,e,n,r,i,s,o=!0,a=!1){const l=_P(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return R6(h,e),A6(h,n),S6(h,s),k6(h,r),new T6(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function N6(...t){const e=C6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(_v())return new Blob(t);throw new rt(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function D6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t){if(typeof atob>"u")throw y6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jg{constructor(e,n){this.data=e,this.contentType=n||null}}function V6(t,e){switch(t){case Gr.RAW:return new Jg(wP(e));case Gr.BASE64:case Gr.BASE64URL:return new Jg(vP(t,e));case Gr.DATA_URL:return new Jg(M6(e),j6(e))}throw gv()}function wP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function O6(t){let e;try{e=decodeURIComponent(t)}catch{throw Fu(Gr.DATA_URL,"Malformed data URL.")}return wP(e)}function vP(t,e){switch(t){case Gr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Fu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Fu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L6(e)}catch(i){throw i.message.includes("polyfill")?i:Fu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class IP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fu(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=F6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function M6(t){const e=new IP(t);return e.base64?vP(Gr.BASE64,e.rest):O6(e.rest)}function j6(t){return new IP(t).contentType}function F6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){let r=0,i="";m1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(m1(this.data_)){const r=this.data_,i=D6(r,e,n);return i===null?null:new ps(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ps(r,!0)}}static getBlob(...e){if(_v()){const n=e.map(r=>r instanceof ps?r.data_:r);return new ps(N6.apply(null,n))}else{const n=e.map(o=>yv(o)?V6(Gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ps(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){let e;try{e=JSON.parse(t)}catch{return null}return x6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function B6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function xP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t,e){return e}class Jt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||z6}}let rf=null;function $6(t){return!yv(t)||t.length<2?t:xP(t)}function bP(){if(rf)return rf;const t=[];t.push(new Jt("bucket")),t.push(new Jt("generation")),t.push(new Jt("metageneration")),t.push(new Jt("name","fullPath",!0));function e(s,o){return $6(o)}const n=new Jt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Jt("size");return i.xform=r,t.push(i),t.push(new Jt("timeCreated")),t.push(new Jt("updated")),t.push(new Jt("md5Hash",null,!0)),t.push(new Jt("cacheControl",null,!0)),t.push(new Jt("contentDisposition",null,!0)),t.push(new Jt("contentEncoding",null,!0)),t.push(new Jt("contentLanguage",null,!0)),t.push(new Jt("contentType",null,!0)),t.push(new Jt("metadata","customMetadata",!0)),rf=t,rf}function q6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Rn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function H6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return q6(r,t),r}function TP(t,e,n){const r=EP(e);return r===null?null:H6(t,r,n)}function G6(t,e,n,r){const i=EP(e);if(i===null||!yv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),_=wv(p,n,r),I=_P({alt:"media",token:u});return _+I})[0]}function W6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class AP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){if(!t)throw gv()}function K6(t,e){function n(r,i){const s=TP(t,i,e);return SP(s!==null),s}return n}function Q6(t,e){function n(r,i){const s=TP(t,i,e);return SP(s!==null),G6(s,i,t.host,t._protocol)}return n}function RP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=l6():i=a6():n.getStatus()===402?i=o6(t.bucket):n.getStatus()===403?i=c6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Y6(t){const e=RP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=s6(t.path)),s.serverResponse=i.serverResponse,s}return n}function J6(t,e,n){const r=e.fullServerUrl(),i=wv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new AP(i,s,Q6(t,n),o);return a.errorHandler=Y6(e),a}function X6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Z6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=X6(null,e)),r}function eU(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let V=0;V<2;V++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=Z6(e,r,i),h=W6(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",_=ps.getBlob(f,r,p);if(_===null)throw p6();const I={name:u.fullPath},A=wv(s,t.host,t._protocol),D="POST",E=t.maxUploadRetryTime,v=new AP(A,D,K6(t,n),E);return v.urlParams=I,v.headers=o,v.body=_.uploadData(),v.errorHandler=RP(e),v}class tU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw iu("cannot .send() more than once");if(Si(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nU extends tU{initXhr(){this.xhr_.responseType="text"}}function kP(){return new nU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new aa(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xP(this._location.path)}get storage(){return this._service}get parent(){const e=U6(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new aa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _6(e)}}function rU(t,e,n){t._throwIfRoot("uploadBytes");const r=eU(t.storage,t._location,bP(),new ps(e,!0),n);return t.storage.makeRequestWithTokens(r,kP).then(i=>({metadata:i,ref:t}))}function iU(t){t._throwIfRoot("getDownloadURL");const e=J6(t.storage,t._location,bP());return t.storage.makeRequestWithTokens(e,kP).then(n=>{if(n===null)throw g6();return n})}function sU(t,e){const n=B6(t._location.path,e),r=new Rn(t._location.bucket,n);return new aa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t){return/^[A-Za-z]+:\/\//.test(t)}function aU(t,e){return new aa(t,e)}function PP(t,e){if(t instanceof vv){const n=t;if(n._bucket==null)throw m6();const r=new aa(n,n._bucket);return e!=null?PP(r,e):r}else return e!==void 0?sU(t,e):t}function lU(t,e){if(e&&oU(e)){if(t instanceof vv)return aU(t,e);throw L0("To use ref(service, url), the first argument must be a Storage instance.")}else return PP(t,e)}function g1(t,e){const n=e==null?void 0:e[gP];return n==null?null:Rn.makeFromBucketSpec(n,t)}function cU(t,e,n,r={}){t.host=`${e}:${n}`;const i=Si(e);i&&(rp(`https://${t.host}/b`),V_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:tA(s,t.app.options.projectId))}class vv{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=pP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=r6,this._maxUploadRetryTime=i6,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=g1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=g1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){p1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){p1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new aa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new w6(yP());{const o=P6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const y1="@firebase/storage",_1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="storage";function bd(t,e,n){return t=X(t),rU(t,e,n)}function Td(t){return t=X(t),iU(t)}function Ad(t,e){return t=X(t),lU(t,e)}function uU(t=Ld(),e){t=X(t);const r=Sr(t,CP).getImmediate({identifier:e}),i=XT("storage");return i&&dU(r,...i),r}function dU(t,e,n,r={}){cU(t,e,n,r)}function hU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new vv(n,r,i,e,da)}function fU(){rr(new Ln(CP,hU,"PUBLIC").setMultipleInstances(!0)),zt(y1,_1,""),zt(y1,_1,"esm2020")}fU();var NP="5.0.1";function Fm(t,e){return new Promise(n=>setTimeout(n,t,e))}function mU(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function pU(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):Fm(Math.min(t,e))}function DP(t){return!!t&&typeof t.then=="function"}function w1(t,e){try{const n=t();DP(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function v1(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await mU())}return r}function Sd(t){return t.then(void 0,()=>{}),t}function gU(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function yU(t,e){return!gU(t,e)}function Iv(t){return parseInt(t)}function _r(t){return parseFloat(t)}function ai(t,e){return typeof t=="number"&&isNaN(t)?e:t}function nn(t){return t.reduce((e,n)=>e+(n?1:0),0)}function LP(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function _U(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,h)=>{o[u]=o[u]||[],o[u].push(h)};for(;;){const u=a.exec(i[2]);if(!u)break;const h=u[0];switch(h[0]){case".":l("class",h.slice(1));break;case"#":l("id",h.slice(1));break;case"[":{const f=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(h);if(f)l(f[1],(n=(e=f[4])!==null&&e!==void 0?e:f[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function wU(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function rs(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,_=0;_+=s+u,p+=_>>>16,_&=65535,p+=i+l,f+=p>>>16,p&=65535,f+=r+a,h+=f>>>16,f&=65535,h+=n+o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|_}function Wn(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,_=0;_+=s*u,p+=_>>>16,_&=65535,p+=i*u,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,f+=s*a,h+=f>>>16,f&=65535,h+=n*u+r*l+i*a+s*o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|_}function Ga(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function In(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function ze(t,e){t[0]^=e[0],t[1]^=e[1]}const vU=[4283543511,3981806797],IU=[3301882366,444984403];function I1(t){const e=[0,t[0]>>>1];ze(t,e),Wn(t,vU),e[1]=t[0]>>>1,ze(t,e),Wn(t,IU),e[1]=t[0]>>>1,ze(t,e)}const sf=[2277735313,289559509],of=[1291169091,658871167],E1=[0,5],EU=[0,1390208809],xU=[0,944331445];function bU(t,e){const n=wU(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let h;for(h=0;h<s;h=h+16)l[0]=n[h+4]|n[h+5]<<8|n[h+6]<<16|n[h+7]<<24,l[1]=n[h]|n[h+1]<<8|n[h+2]<<16|n[h+3]<<24,u[0]=n[h+12]|n[h+13]<<8|n[h+14]<<16|n[h+15]<<24,u[1]=n[h+8]|n[h+9]<<8|n[h+10]<<16|n[h+11]<<24,Wn(l,sf),Ga(l,31),Wn(l,of),ze(o,l),Ga(o,27),rs(o,a),Wn(o,E1),rs(o,EU),Wn(u,of),Ga(u,33),Wn(u,sf),ze(a,u),Ga(a,31),rs(a,o),Wn(a,E1),rs(a,xU);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const f=[0,0];switch(i){case 15:f[1]=n[h+14],In(f,48),ze(u,f);case 14:f[1]=n[h+13],In(f,40),ze(u,f);case 13:f[1]=n[h+12],In(f,32),ze(u,f);case 12:f[1]=n[h+11],In(f,24),ze(u,f);case 11:f[1]=n[h+10],In(f,16),ze(u,f);case 10:f[1]=n[h+9],In(f,8),ze(u,f);case 9:f[1]=n[h+8],ze(u,f),Wn(u,of),Ga(u,33),Wn(u,sf),ze(a,u);case 8:f[1]=n[h+7],In(f,56),ze(l,f);case 7:f[1]=n[h+6],In(f,48),ze(l,f);case 6:f[1]=n[h+5],In(f,40),ze(l,f);case 5:f[1]=n[h+4],In(f,32),ze(l,f);case 4:f[1]=n[h+3],In(f,24),ze(l,f);case 3:f[1]=n[h+2],In(f,16),ze(l,f);case 2:f[1]=n[h+1],In(f,8),ze(l,f);case 1:f[1]=n[h],ze(l,f),Wn(l,sf),Ga(l,31),Wn(l,of),ze(o,l)}return ze(o,r),ze(a,r),rs(o,a),rs(a,o),I1(o),I1(a),rs(o,a),rs(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function TU(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function AU(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function SU(t){return typeof t!="function"}function RU(t,e){const n=Sd(new Promise(r=>{const i=Date.now();w1(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(SU(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();w1(a,(...h)=>{const f=o+Date.now()-u;if(!h[0])return l({error:h[1],duration:f});l({value:h[1],duration:f})})}))})}));return function(){return n.then(i=>i())}}function kU(t,e,n,r){const i=Object.keys(t).filter(o=>yU(n,o)),s=Sd(v1(i,o=>RU(t[o],e),r));return async function(){const a=await s,l=await v1(a,f=>Sd(f()),r),u=await Promise.all(l),h={};for(let f=0;f<i.length;++f)h[i[f]]=u[f];return h}}function VP(){const t=window,e=navigator;return nn(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function PU(){const t=window,e=navigator;return nn(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!VP()}function rh(){const t=window,e=navigator;return nn(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function Rr(){const t=window,e=navigator;return nn(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function Ev(){const t=window,{HTMLElement:e,Document:n}=t;return nn(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function ih(){const t=window;return AU(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function OP(){var t,e;const n=window;return nn(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function CU(){const t=window;return nn([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function NU(){const t=window,{URLPattern:e}=t;return nn(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function DU(){const t=window;return nn(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function sh(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return nn([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function LU(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return nn(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function VU(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function OU(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function xv(){const t=rh(),e=OP(),n=window,r=navigator,i="connection";return t?nn([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?nn(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function MU(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return nn(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function jU(){return BU()?-4:FU()}function FU(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(UU())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=zU(i),u=Sd(a.then(h=>$U(h.getChannelData(0).subarray(n)),h=>{if(h.name==="timeout"||h.name==="suspended")return-3;throw h}));return()=>(l(),u)}function UU(){return Rr()&&!Ev()&&!DU()}function BU(){return Rr()&&sh()&&ih()||rh()&&MU()&&NU()}function zU(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,h=0,f=0;t.oncomplete=I=>a(I.renderedBuffer);const p=()=>{setTimeout(()=>l(x1("timeout")),Math.min(500,f+5e3-Date.now()))},_=()=>{try{const I=t.startRendering();switch(DP(I)&&Sd(I),t.state){case"running":f=Date.now(),u&&p();break;case"suspended":document.hidden||h++,u&&h>=3?l(x1("suspended")):setTimeout(_,500);break}}catch(I){l(I)}};_(),s=()=>{u||(u=!0,f>0&&p())}}),s]}function $U(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function x1(t){const e=new Error(t);return e.name=t,e}async function MP(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await Fm(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let h=!1;const f=()=>{h=!0,l()},p=A=>{h=!0,u(A)};a.onload=f,a.onerror=p;const{style:_}=a;_.setProperty("display","block","important"),_.position="absolute",_.top="0",_.left="0",_.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const I=()=>{var A,D;h||(((D=(A=a.contentWindow)===null||A===void 0?void 0:A.document)===null||D===void 0?void 0:D.readyState)==="complete"?f():setTimeout(I,10))};I()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await Fm(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function qU(t){const[e,n]=_U(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?HU(r.style,s):r.setAttribute(i,s)}return r}function HU(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function GU(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const WU="mmMwWLliI0O&1",KU="48px",Wa=["monospace","sans-serif","serif"],b1=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function QU(){return MP(async(t,{document:e})=>{const n=e.body;n.style.fontSize=KU;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=_=>{const I=e.createElement("span"),{style:A}=I;return A.position="absolute",A.top="0",A.left="0",A.fontFamily=_,I.textContent=WU,r.appendChild(I),I},a=(_,I)=>o(`'${_}',${I}`),l=()=>Wa.map(o),u=()=>{const _={};for(const I of b1)_[I]=Wa.map(A=>a(I,A));return _},h=_=>Wa.some((I,A)=>_[A].offsetWidth!==i[I]||_[A].offsetHeight!==s[I]),f=l(),p=u();n.appendChild(r);for(let _=0;_<Wa.length;_++)i[Wa[_]]=f[_].offsetWidth,s[Wa[_]]=f[_].offsetHeight;return b1.filter(_=>h(p[_]))})}function YU(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function JU(){return XU(s9())}function XU(t){let e=!1,n,r;const[i,s]=ZU();return e9(i,s)?(e=t9(s),t?n=r="skipped":[n,r]=n9(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function ZU(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function e9(t,e){return!!(e&&t.toDataURL)}function t9(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function n9(t,e){r9(t,e);const n=Xg(t),r=Xg(t);return n!==r?["unstable","unstable"]:(i9(t,e),[Xg(t),n])}function r9(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function i9(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function Xg(t){return t.toDataURL()}function s9(){return Rr()&&sh()&&ih()}function o9(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=Iv(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function a9(){return navigator.oscpu}function l9(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))rh()&&CU()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function c9(){return window.screen.colorDepth}function u9(){return ai(_r(navigator.deviceMemory),void 0)}function d9(){if(!(Rr()&&sh()&&ih()))return h9()}function h9(){const t=screen,e=r=>ai(Iv(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const f9=2500,m9=10;let Uf,Zg;function p9(){if(Zg!==void 0)return;const t=()=>{const e=V0();O0(e)?Zg=setTimeout(t,f9):(Uf=e,Zg=void 0)};t()}function g9(){return p9(),async()=>{let t=V0();if(O0(t)){if(Uf)return[...Uf];VU()&&(await OU(),t=V0())}return O0(t)||(Uf=t),t}}function y9(){if(Rr()&&sh()&&ih())return()=>Promise.resolve(void 0);const t=g9();return async()=>{const e=await t(),n=r=>r===null?null:LP(r,m9);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function V0(){const t=screen;return[ai(_r(t.availTop),null),ai(_r(t.width)-_r(t.availWidth)-ai(_r(t.availLeft),0),null),ai(_r(t.height)-_r(t.availHeight)-ai(_r(t.availTop),0),null),ai(_r(t.availLeft),null)]}function O0(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function _9(){return ai(Iv(navigator.hardwareConcurrency),void 0)}function w9(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-v9();return`UTC${n>=0?"+":""}${n}`}function v9(){const t=new Date().getFullYear();return Math.max(_r(new Date(t,0,1).getTimezoneOffset()),_r(new Date(t,6,1).getTimezoneOffset()))}function I9(){try{return!!window.sessionStorage}catch{return!0}}function E9(){try{return!!window.localStorage}catch{return!0}}function x9(){if(!(VP()||PU()))try{return!!window.indexedDB}catch{return!0}}function b9(){return!!window.openDatabase}function T9(){return navigator.cpuClass}function A9(){const{platform:t}=navigator;return t==="MacIntel"&&Rr()&&!Ev()?LU()?"iPad":"iPhone":t}function S9(){return navigator.vendor||""}function R9(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function k9(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function P9(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function C9({debug:t}={}){if(!N9())return;const e=P9(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await D9(r);t&&L9(e,i);const s=n.filter(o=>{const a=e[o];return nn(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function N9(){return Rr()||xv()}async function D9(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};T1(r);for(let o=0;o<t.length;++o){const a=qU(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");T1(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await Fm(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function T1(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function L9(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function V9(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function O9(){if(A1("inverted"))return!0;if(A1("none"))return!1}function A1(t){return matchMedia(`(inverted-colors: ${t})`).matches}function M9(){if(S1("active"))return!0;if(S1("none"))return!1}function S1(t){return matchMedia(`(forced-colors: ${t})`).matches}const j9=100;function F9(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=j9;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function U9(){if(Ka("no-preference"))return 0;if(Ka("high")||Ka("more"))return 1;if(Ka("low")||Ka("less"))return-1;if(Ka("forced"))return 10}function Ka(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function B9(){if(R1("reduce"))return!0;if(R1("no-preference"))return!1}function R1(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function z9(){if(k1("reduce"))return!0;if(k1("no-preference"))return!1}function k1(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function $9(){if(P1("high"))return!0;if(P1("standard"))return!1}function P1(t){return matchMedia(`(dynamic-range: ${t})`).matches}const Ee=Math,Xt=()=>0;function q9(){const t=Ee.acos||Xt,e=Ee.acosh||Xt,n=Ee.asin||Xt,r=Ee.asinh||Xt,i=Ee.atanh||Xt,s=Ee.atan||Xt,o=Ee.sin||Xt,a=Ee.sinh||Xt,l=Ee.cos||Xt,u=Ee.cosh||Xt,h=Ee.tan||Xt,f=Ee.tanh||Xt,p=Ee.exp||Xt,_=Ee.expm1||Xt,I=Ee.log1p||Xt,A=w=>Ee.pow(Ee.PI,w),D=w=>Ee.log(w+Ee.sqrt(w*w-1)),E=w=>Ee.log(w+Ee.sqrt(w*w+1)),v=w=>Ee.log((1+w)/(1-w))/2,x=w=>Ee.exp(w)-1/Ee.exp(w)/2,V=w=>(Ee.exp(w)+1/Ee.exp(w))/2,z=w=>Ee.exp(w)-1,H=w=>(Ee.exp(2*w)-1)/(Ee.exp(2*w)+1),b=w=>Ee.log(1+w);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:D(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:E(1),atanh:i(.5),atanhPf:v(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:x(1),cos:l(10.000000000123),cosh:u(1),coshPf:V(1),tan:h(-1e300),tanh:f(1),tanhPf:H(1),exp:p(1),expm1:_(1),expm1Pf:z(1),log1p:I(10),log1pPf:b(10),powPI:A(-100)}}const H9="mmMwWLliI0fiflO&1",ey={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function G9(){return W9((t,e)=>{const n={},r={};for(const i of Object.keys(ey)){const[s={},o=H9]=ey[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(ey))r[i]=n[i].getBoundingClientRect().width;return r})}function W9(t,e=4e3){return MP((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",rh()?s.style.zoom=`${1/r.devicePixelRatio}`:Rr()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function K9(){return navigator.pdfViewerEnabled}function Q9(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function Y9(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(J9())return-3;try{return t.canMakePayments()?1:0}catch(e){return X9(e)}}const J9=GU;function X9(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function Z9(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const jP=-1,FP=-2,eB=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),tB=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),nB=["FRAGMENT_SHADER","VERTEX_SHADER"],rB=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],UP="WEBGL_debug_renderer_info",iB="WEBGL_polygon_mode";function sB({cache:t}){var e,n,r,i,s,o;const a=BP(t);if(!a)return jP;if(!$P(a))return FP;const l=zP()?null:a.getExtension(UP);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function oB({cache:t}){const e=BP(t);if(!e)return jP;if(!$P(e))return FP;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const h of Object.keys(r))s.push(`${h}=${r[h]}`);const u=C1(e);for(const h of u){const f=e[h];o.push(`${h}=${f}${eB.has(f)?`=${e.getParameter(f)}`:""}`)}if(n)for(const h of n){if(h===UP&&zP()||h===iB&&cB())continue;const f=e.getExtension(h);if(!f){i.push(h);continue}for(const p of C1(f)){const _=f[p];a.push(`${p}=${_}${tB.has(_)?`=${e.getParameter(_)}`:""}`)}}for(const h of nB)for(const f of rB){const p=aB(e,h,f);l.push(`${h}.${f}=${p.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function BP(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function aB(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function C1(t){return Object.keys(t.__proto__).filter(lB)}function lB(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function zP(){return OP()}function cB(){return rh()||Rr()}function $P(t){return typeof t.getParameter=="function"}function uB(){if(!(xv()||Rr()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function dB(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const hB={fonts:QU,domBlockers:C9,fontPreferences:G9,audio:jU,screenFrame:y9,canvas:JU,osCpu:a9,languages:l9,colorDepth:c9,deviceMemory:u9,screenResolution:d9,hardwareConcurrency:_9,timezone:w9,sessionStorage:I9,localStorage:E9,indexedDB:x9,openDatabase:b9,cpuClass:T9,platform:A9,plugins:YU,touchSupport:o9,vendor:S9,vendorFlavors:R9,cookiesEnabled:k9,colorGamut:V9,invertedColors:O9,forcedColors:M9,monochrome:F9,contrast:U9,reducedMotion:B9,reducedTransparency:z9,hdr:$9,math:q9,pdfViewerEnabled:K9,architecture:Q9,applePay:Y9,privateClickMeasurement:Z9,audioBaseLatency:uB,dateTimeLocale:dB,webGlBasics:sB,webGlExtensions:oB};function fB(t){return kU(hB,t,[])}const mB="$ if upgrade to Pro: https://fpjs.dev/pro";function pB(t){const e=gB(t),n=yB(e);return{score:e,comment:mB.replace(/\$/g,`${n}`)}}function gB(t){if(xv())return .4;if(Rr())return Ev()&&!(sh()&&ih())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function yB(t){return LP(.99+.01*t,1e-4)}function _B(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function qP(t){return JSON.stringify(t,(e,n)=>n instanceof Error?TU(n):n,2)}function HP(t){return bU(_B(t))}function wB(t){let e;const n=pB(t);return{get visitorId(){return e===void 0&&(e=HP(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:NP}}function vB(t=50){return pU(t,t*2)}function IB(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=wB(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${qP(s)}
\`\`\``),o}}}function EB(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${NP}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function xB(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&EB();const{delayFallback:n,debug:r}=t;await vB(n);const i=fB({cache:{},debug:r});return IB(i,r)}var bB={load:xB,hashComponents:HP,componentsToDebugString:qP};const TB={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},gc=uA(TB),GP=aO(gc),os=dj(gc),mn=DF(gc),Zl=uU(gc);fO(gc,{backend:new op});async function WP(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function AB(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function KP(){try{return(await A4(os)).user}catch(t){throw console.error("Error signing in:",t),t}}function QP(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let ty=null,bn=null;async function bv(){return bn||(ty||(ty=bB.load().then(t=>t.get()).then(t=>(bn=t.visitorId,localStorage.setItem("moomhe_fingerprint",bn),console.log("Browser fingerprint generated:",bn),bn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),bn=e,e})),ty)}function SB(){if(bn)return bn;const t=localStorage.getItem("moomhe_fingerprint");return t?(bn=t,t):null}async function YP(){if(bn)return bn;const t=localStorage.getItem("moomhe_fingerprint");return t?(bn=t,t):await bv()}bv();async function To(t){const e=QP(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:RB(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await th(Xn(mn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function RB(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function $s(t,e=1920,n=1080,r=.8,i=!1){if(i||t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const a=await(await fetch(t)).blob();if(a.type==="image/jpeg"||a.type==="image/png"||a.type==="image/webp"){console.log("File already in displayable format, skipping HEIC conversion");const f=await new Promise(p=>{const _=new FileReader;_.onload=()=>p(_.result),_.readAsDataURL(a)});return await $s(f,e,n,r)}const{heicTo:l}=await pr(()=>import("./heic-to-49ba7c0b.js"),[]),u=await l({blob:a,type:"image/jpeg",quality:r}),h=await new Promise(f=>{const p=new FileReader;p.onload=()=>f(p.result),p.readAsDataURL(u)});return console.log("HEIC converted to JPEG successfully"),await $s(h,e,n,r)}catch(o){throw console.error("Error converting HEIC image:",o),new Error("Failed to convert HEIC image to JPEG")}return new Promise((o,a)=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>{try{const u=document.createElement("canvas"),h=u.getContext("2d");let{width:f,height:p}=l;if(f<=e&&p<=n)u.width=f,u.height=p;else{const _=e/f,I=n/p,A=Math.min(_,I);f=Math.floor(f*A),p=Math.floor(p*A),u.width=f,u.height=p}h.drawImage(l,0,0,f,p),u.toBlob(_=>{_?(console.log(`Image compressed: Original ${l.width}x${l.height} -> ${f}x${p}, Size: ${(_.size/1024/1024).toFixed(2)}MB`),o(_)):a(new Error("Failed to create compressed image blob"))},"image/jpeg",r)}catch(u){console.error("Error compressing image:",u),a(u)}},l.onerror=()=>{a(new Error("Failed to load image for compression"))},l.src=t})}function kB(t,e=1920,n=1080,r=.8){return new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{$s(a.target.result,e,n,r).then(i).catch(s)},o.onerror=()=>s(new Error("Failed to read file")),o.readAsDataURL(t)})}function JP(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(h=>{h?r(h):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function PB(t,e,n){try{let r;try{r=await $s(e,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original:",I),r=await(await fetch(e)).blob()}let i;try{i=await JP(e)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=Ad(Zl,`userHistory/${t}/${o}`),u=await bd(l,r),h=await Td(u.ref),f=Ad(Zl,`userHistory/${t}/${a}`),p=await bd(f,i),_=await Td(p.ref);return{downloadURL:h,thumbnailURL:_,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function CB(t,e){try{const n=await new Promise(I=>{const A=new FileReader;A.onload=()=>I(A.result),A.readAsDataURL(e)});let r;try{r=await $s(n,1920,1080,.8)}catch(I){console.warn("Failed to compress image, using original file:",I),r=e}let i;try{i=await JP(n)}catch(I){console.warn("Failed to create thumbnail, using compressed image:",I),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=Ad(Zl,`userHistory/${t}/${o}`),u=await bd(l,r),h=await Td(u.ref),f=Ad(Zl,`userHistory/${t}/${a}`),p=await bd(f,i),_=await Td(p.ref);return{downloadURL:h,thumbnailURL:_,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function NB(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await PB(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=Xn(Jd(mn,"userHistory"));return await th(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function XP(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await CB(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=Xn(Jd(mn,"userHistory"));return await th(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function DB(t){try{const e=Jd(mn,"userHistory"),n=Of(e,Mf("userId","==",t),jf("createdAt","desc")),r=await D0(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename,o.result.originalImageUrl&&(a.originalImageUrl=o.result.originalImageUrl)),o.originalImageUrl?a.originalImageUrl=o.originalImageUrl:o.imageData&&typeof o.imageData=="string"&&o.imageData.startsWith("http")&&(a.originalImageUrl=o.imageData),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function Za(t,e=1,n=7){try{const r=Jd(mn,"userHistory");let i=null;if(e>1){const f=Of(r,Mf("userId","==",t),jf("createdAt","desc"),Qg((e-1)*n)),p=await D0(f);p.empty||(i=p.docs[p.docs.length-1])}let s;const o=n*2;i&&e>1?s=Of(r,Mf("userId","==",t),jf("createdAt","desc"),BF(i),Qg(o)):s=Of(r,Mf("userId","==",t),jf("createdAt","desc"),Qg(o));const a=await D0(s),l=[];a.forEach(f=>{const p=f.data();if(!p.isError){const _={id:f.id,...p};p.result&&p.result.storageUrl&&(_.storageUrl=p.result.storageUrl,_.thumbnailUrl=p.result.thumbnailUrl,_.filename=p.result.filename,_.thumbnailFilename=p.result.thumbnailFilename,p.result.originalImageUrl&&(_.originalImageUrl=p.result.originalImageUrl)),p.originalImageUrl?_.originalImageUrl=p.originalImageUrl:p.imageData&&typeof p.imageData=="string"&&p.imageData.startsWith("http")&&(_.originalImageUrl=p.imageData),p.objects&&(_.objects=p.objects),l.push(_)}});const u=l.slice(0,n),h=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${h}`),{history:u,hasMore:h}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function ZP(t,e){try{let n;try{n=await $s(e,1920,1080,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=Ad(Zl,`temp/${t}/${i}`),o=await bd(s,n),a=await Td(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function de(t,e={}){try{VA(GP,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const Bf=(t="email")=>de("sign_up",{method:t}),eC=(t="email")=>de("login",{method:t}),tC=()=>de("anonymous_sign_in"),nC=()=>de("logout"),M0=t=>de("account_link",{success:t}),rC=t=>de("image_upload",{file_type:t}),iC=()=>de("object_image_upload"),sC=()=>de("image_download"),oC=t=>de("image_share",{platform:t}),aC=(t,e=!1)=>de("generation_start",{prompt_type:t,has_object_image:e}),lC=(t,e)=>de("generation_complete",{prompt_type:t,duration_ms:e}),zf=t=>de("generation_error",{error_type:t}),$f=(t,e,n)=>de("limit_reached",{subscription:t,usage:e,limit:n}),LB=(t,e=0)=>de("object_detection",{success:t,object_count:e}),VB=(t,e=null)=>de("feature_use",{feature:t,value:e}),cC=t=>de("style_select",{style:t}),uC=(t,e)=>de("color_select",{color:t,category:e}),OB=t=>de("angle_select",{angle:t}),dC=t=>de("lighting_select",{lighting:t}),hC=t=>de("furniture_select",{furniture:t}),fC=t=>de("repairs_select",{repair:t}),mC=t=>de("doors_windows_select",{option:t}),pC=t=>de("bathroom_select",{option:t}),j0=()=>de("onboarding_start"),gC=t=>de("onboarding_step",{step:t}),yC=()=>de("onboarding_complete"),_C=t=>de("onboarding_skip",{at_step:t}),F0=()=>de("subscription_modal_view"),wC=t=>de("subscription_click",{tier:t}),vC=()=>de("welcome_premium_show"),IC=()=>de("history_click"),EC=t=>de("history_load_more",{page:t}),xC=()=>de("contact_form_submit"),bC=()=>de("contact_form_success"),MB=t=>de("category_select",{category:t}),jB=t=>de("page_view",{page:t}),TC=()=>de("app_open"),FB=Object.freeze(Object.defineProperty({__proto__:null,analytics:GP,app:gc,auth:os,compressFile:kB,compressImage:$s,createOrUpdateUser:To,db:mn,fileToGenerativePart:WP,getDeviceFingerprint:YP,getDeviceId:QP,getFingerprint:SB,initFingerprint:bv,loadUserHistory:DB,loadUserHistoryPaginated:Za,logAnalyticsEvent:de,saveImageToHistory:NB,saveUploadToHistory:XP,signInUser:KP,storage:Zl,trackAccountLink:M0,trackAngleSelect:OB,trackAnonymousSignIn:tC,trackAppOpen:TC,trackBathroomSelect:pC,trackCategorySelect:MB,trackColorSelect:uC,trackContactFormSubmit:xC,trackContactFormSuccess:bC,trackDoorsWindowsSelect:mC,trackFeatureUse:VB,trackFurnitureSelect:hC,trackGenerationComplete:lC,trackGenerationError:zf,trackGenerationStart:aC,trackHistoryClick:IC,trackHistoryLoadMore:EC,trackImageDownload:sC,trackImageShare:oC,trackImageUpload:rC,trackLightingSelect:dC,trackLimitReached:$f,trackLogin:eC,trackLogout:nC,trackObjectDetection:LB,trackObjectImageUpload:iC,trackOnboardingComplete:yC,trackOnboardingSkip:_C,trackOnboardingStart:j0,trackOnboardingStep:gC,trackPageView:jB,trackRepairsSelect:fC,trackSignUp:Bf,trackStyleSelect:cC,trackSubscriptionClick:wC,trackSubscriptionModalView:F0,trackWelcomePremiumShow:vC,uploadImageForSharing:ZP,urlToFile:AB},Symbol.toStringTag,{value:"Module"}));class UB{constructor(){Av(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=bl(Xn(mn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map}async submitImageGenerationRequest(e,n,r,i=null,s=null){try{const o=await e.getIdToken(),a={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:o,deviceId:s,prompt:n,imageData:r,originalImageUrl:r&&r.startsWith("http")?r:null,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date},l=Xn(Jd(mn,"userHistory"));return await th(l,a),l.id}catch(o){throw console.error("Error submitting image generation request:",o),o}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=Xn(mn,"genCount",r,"users",e),s=Xn(mn,"users",e),[o,a]=await Promise.all([d1(i),d1(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},h=u.credits!==void 0?u.credits:0;return{count:l,limit:h}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const af=new UB,BB=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const[s,o]=U.useState(null),[a,l]=U.useState({width:window.innerWidth,height:window.innerHeight}),[u,h]=U.useState(window.innerWidth<1024),f=e[t];U.useEffect(()=>{const v=()=>{const V=window.innerWidth<1024;if(h(V),l({width:window.innerWidth,height:window.innerHeight}),f.targetRef&&f.targetRef.current){const z=f.targetRef.current.getBoundingClientRect();z.width>0&&z.height>0?o(z):o(null)}else o(null)};v(),window.addEventListener("resize",v),window.addEventListener("scroll",v,!0);const x=setTimeout(v,500);return()=>{window.removeEventListener("resize",v),window.removeEventListener("scroll",v,!0),clearTimeout(x)}},[t,f]);const p=t===e.length-1;if(!s)return d.jsxs("div",{className:"fixed inset-0 z-[100]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",dir:"rtl",children:[d.jsx("h3",{className:"font-bold text-xl text-primary-600",children:f.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(Tn,{size:20})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:"rtl",children:f.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[d.jsx("div",{className:"flex gap-1.5",children:e.map((v,x)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},x))}),d.jsxs("button",{onClick:p?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[p?"":"",!p&&d.jsx(MI,{size:16})]})]})]})})]});const _=u?Math.min(280,a.width-40):300,I=200,A=u?12:20,D={};let E="";if(u){let v=(a.width-_)/2;D.left=v,D.width=_;const x=s.top;a.height-s.bottom,x>I+A+50?(D.top=s.top-I-A+20,E="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(D.top=s.bottom+A,E="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]"),D.top=Math.max(20,Math.min(a.height-I-20,D.top))}else{const v=s.left>a.width-350,x=s.left<350;if(v){D.left=s.left-_-A;let V=s.top+s.height/2-80;V=Math.max(20,Math.min(a.height-I-20,V)),D.top=V,E="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(x){D.left=s.right+A;let V=s.top+s.height/2-80;V=Math.max(20,Math.min(a.height-I-20,V)),D.top=V,E="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let V=s.left+s.width/2-_/2;V=Math.max(20,Math.min(a.width-_-20,V)),D.left=V;const z=s.top;a.height-s.bottom,z>I+A?(D.top=s.top-180,E="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(D.top=s.bottom+A,E="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}}return d.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[d.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[d.jsx("defs",{children:d.jsxs("mask",{id:"spotlight-mask",children:[d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),d.jsx("rect",{x:s.left-5,y:s.top-5,width:s.width+10,height:s.height+10,rx:"12",fill:"black"})]})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),d.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:s.left-5,top:s.top-5,width:s.width+10,height:s.height+10}}),d.jsxs("div",{className:`absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl pointer-events-auto animate-bounce-in origin-center transition-all duration-300 ${u?"":"w-[300px]"}`,style:D,children:[d.jsx("div",{className:`absolute w-0 h-0 border-solid ${E}`}),d.jsxs("div",{className:"flex justify-between items-start mb-2",dir:"rtl",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:f.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(Tn,{size:16})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:"rtl",children:f.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[d.jsx("div",{className:"flex gap-1",children:e.map((v,x)=>d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${x===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},x))}),d.jsxs("button",{onClick:p?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[p?"":"",!p&&d.jsx(MI,{size:16})]})]})]})]})},zB=({color:t,onClose:e,onApply:n})=>{const[r,i]=U.useState(""),[s,o]=U.useState("all"),a=u=>{const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return h?{r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)}:null},l=()=>{const u=a(t.hex),h=u?`RGB(${u.r}, ${u.g}, ${u.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${h}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const f=/[\u0590-\u05FF]/.test(r);n(f?`  ${r}  ${t.value} (${t.ral}, ${h})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${h}) color completely and opaquely, covering the original color entirely`)}};return d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "})]}),d.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:d.jsx(Tn,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:" "}),d.jsx("span",{className:"text-xs text-gray-400",children:"    "})]})]}),d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:" "}),d.jsx("span",{className:"text-xs text-gray-400",children:"   "})]})]})]}),s==="custom"&&d.jsxs("div",{className:"animate-slide-up",children:[d.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:" ?"}),d.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:": , , ...",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),d.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:""}),d.jsxs("button",{onClick:l,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[d.jsx("span",{children:""}),d.jsx(Jy,{size:16})]})]})]})]})})},N1=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=U.useState(!1);return U.useEffect(()=>{a(!0)},[]),!t||!o?null:L_.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(Tn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:d.jsx(rd,{className:"w-8 h-8 text-primary-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?"   ":"   "}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?`    (${s} ).         .`:`   ${s}   .        ,   .`}),d.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:" "}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[i," "]})]}),d.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[s," "]})]})]}),d.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[d.jsx(rd,{className:"w-5 h-5"}),r>0?" ":"  "]}),d.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:" , "})]})]})}),document.body)},$B=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=U.useState(!1);return U.useEffect(()=>{i(!0)},[]),!t||!r?null:L_.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:d.jsx(Tn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:d.jsx(bg,{size:16,fill:"currentColor"})}),d.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:d.jsx(bg,{size:12,fill:"currentColor"})}),d.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:d.jsx(bg,{size:14,fill:"currentColor"})})]}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[d.jsx(rd,{className:"w-10 h-10 text-yellow-400"}),d.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:d.jsx(Jy,{className:"w-4 h-4 text-white stroke-[3]"})})]}),d.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),d.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Ur,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Jy,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"    "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[d.jsx(rd,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]})]}),d.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",d.jsx(Ur,{className:"w-5 h-5"})]})]})]})}),document.body)},D1=({beforeImage:t,afterImage:e})=>{const[n,r]=U.useState(50),i=U.useRef(null),s=U.useRef(!1),o=h=>{s.current=!0,l(h)},a=()=>{s.current=!1},l=h=>{if(!i.current)return;let f;h.touches?f=h.touches[0].clientX:f=h.clientX;const p=i.current.getBoundingClientRect(),I=Math.max(0,Math.min(f-p.left,p.width))/p.width*100;r(I)},u=h=>{s.current&&l(h)};return d.jsxs("div",{className:"relative w-full h-full select-none overflow-hidden group cursor-col-resize",ref:i,onMouseDown:o,onTouchStart:o,onMouseMove:u,onTouchMove:u,onMouseUp:a,onMouseLeave:a,onTouchEnd:a,children:[d.jsx("img",{src:e,alt:"After",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),d.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden select-none",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:d.jsx("img",{src:t,alt:"Before",className:"absolute inset-0 w-full h-full object-contain select-none",draggable:!1})}),d.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-col-resize z-10 shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{left:`${n}%`},children:d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg text-primary-600 transition-transform group-hover:scale-110",children:d.jsx(Yy,{size:16})})}),d.jsx("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""}),d.jsx("div",{className:"absolute bottom-4 right-4 bg-primary-600/80 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""})]})},ny="/assets/avatar-f01b7208.png",L1=({suggestions:t,onSelect:e,onClose:n,isMobile:r=!1,isThinking:i=!1,initialShowSuggestions:s=!0})=>{const[o,a]=U.useState(!1),[l,u]=U.useState(!1);U.useEffect(()=>{if(i)a(!0),u(!1);else if(t&&t.length>0){const _=setTimeout(()=>{a(!0),u(!!s)},500);return()=>clearTimeout(_)}else a(!1)},[t,i,s]);const h=_=>{e(_),u(!1)},f=()=>{a(!1),setTimeout(()=>{n()},500)},p=()=>{!i&&t&&t.length>0&&u(!l)};return!i&&(!t||t.length===0)?null:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relative group cursor-pointer",onClick:p,children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl border border-purple-400/40 overflow-hidden bg-purple-100/50 relative z-10 transition-transform duration-300 transform active:scale-95 flex items-center justify-center",children:d.jsx("img",{src:ny,alt:"AI Designer",className:"w-full h-full object-cover opacity-90 hover:opacity-100",onError:_=>{_.target.onerror=null,_.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),l&&!i&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center",onClick:()=>u(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10 max-h-[70vh] overflow-hidden flex flex-col",onClick:_=>_.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",dir:"rtl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white/20 overflow-hidden bg-purple-100 flex-shrink-0",children:d.jsx("img",{src:ny,alt:"AI",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:" "}),d.jsx("p",{className:"text-xs text-purple-300",children:"    !"})]})]}),d.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(Tn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 p-1",children:t.map((_,I)=>d.jsxs("button",{onClick:()=>h(_),className:"w-full text-right p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(Ur,{className:"w-5 h-5 text-purple-400"}),d.jsx("span",{className:"text-white font-medium text-sm flex-1",children:_.label||_.title_he})]},I))})]})]})]}):d.jsx("div",{className:`fixed z-50 transition-all duration-500 ease-in-out ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-20 pointer-events-none"}`,style:{bottom:"40px",right:"40px",left:"auto",maxWidth:"400px"},children:d.jsxs("div",{className:"flex flex-col items-end gap-4",children:[" ",d.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[" ",d.jsxs("div",{className:"relative group cursor-pointer",onClick:p,children:[d.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white shadow-xl overflow-hidden bg-purple-100 relative z-10 transition-transform duration-300 transform group-hover:scale-105",children:d.jsx("img",{src:ny,alt:"AI Designer",className:"w-full h-full object-cover",onError:_=>{_.target.onerror=null,_.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i?d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-5 h-5 rounded-full border-2 border-white z-20"})]}),(i||l)&&d.jsxs("div",{className:"bg-white rounded-2xl rounded-br-none p-4 shadow-xl border border-purple-100 max-w-[250px] animate-bounce-in relative",children:[d.jsx("div",{className:"absolute bottom-0 right-[-8px] w-0 h-0 border-r-[8px] border-r-transparent border-b-[12px] border-b-white border-l-[0px] border-l-transparent transform -rotate-12"}),i?d.jsxs("div",{className:"flex items-center gap-2",dir:"rtl",children:[d.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"   ..."}),d.jsxs("div",{className:"flex space-x-1 flex-row-reverse",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}):d.jsx("p",{className:"text-gray-800 text-sm font-medium text-right",dir:"rtl",children:"!         "})]})]}),!i&&l&&t&&t.length>0&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-4 rounded-2xl shadow-2xl border border-white/50 w-full animate-fade-in-up",children:[d.jsx("div",{className:"flex flex-col gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map((_,I)=>d.jsxs("button",{onClick:()=>h(_),className:"w-full text-right p-3 rounded-xl bg-purple-50 hover:bg-purple-100 border border-purple-100 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(Ur,{className:"w-4 h-4 text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsx("span",{className:"text-gray-700 font-medium text-sm flex-1",children:_.label||_.title_he})]},I))}),d.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-end",children:d.jsx("button",{onClick:f,className:"text-xs text-gray-400 hover:text-gray-600 font-medium px-3 py-1 rounded-full hover:bg-gray-100 transition-colors",children:" "})})]})]})})},qB=({isOpen:t,onClose:e,user:n,userCredits:r,userUsage:i,onLogin:s,onLogout:o,onSubscriptionClick:a})=>{if(!t)return null;const l=n&&!n.isAnonymous&&n.email,u=((n==null?void 0:n.email)||"U")[0].toUpperCase();return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm bg-[#1a1a2e] rounded-3xl overflow-hidden shadow-2xl animate-scale-up border border-white/10",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 p-6 text-center border-b border-white/5",children:[d.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-1 mb-3 shadow-lg shadow-purple-500/20",children:d.jsx("div",{className:"w-full h-full rounded-full bg-[#1a1a2e] flex items-center justify-center text-3xl font-bold text-white",children:l?u:d.jsx(vf,{className:"w-8 h-8 text-gray-300"})})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:l?n.displayName||n.email.split("@")[0]:""}),d.jsx("p",{className:"text-sm text-gray-400",children:l?n.email:"     "})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("button",{onClick:()=>{a(),e()},className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 hover:from-amber-500/20 hover:to-orange-500/20 border border-amber-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(rd,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-medium",children:" "}),d.jsx("div",{className:"text-xs text-amber-400/80",children:r-i>0?`${r-i}  `:" "})]})]}),d.jsx("div",{className:"text-amber-400 text-lg",children:""})]}),d.jsxs("button",{onClick:()=>{l?o():s(),e()},className:`w-full flex items-center justify-between p-4 rounded-2xl border transition-all group ${l?"bg-red-500/10 hover:bg-red-500/20 border-red-500/20":"bg-blue-500/10 hover:bg-blue-500/20 border-blue-500/20"}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform ${l?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:l?d.jsx(lD,{className:"w-5 h-5"}):d.jsx(aD,{className:"w-5 h-5"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-medium",children:l?"":""}),d.jsx("div",{className:`text-xs ${l?"text-red-400/80":"text-blue-400/80"}`,children:l?" ":"  "})]})]}),d.jsx("div",{className:l?"text-red-400 text-lg":"text-blue-400 text-lg",children:""})]})]}),d.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors",children:d.jsx(Tn,{className:"w-5 h-5"})})]})]})};function HB(){var _o;const[t,e]=U.useState(!1),[n,r]=U.useState(!1),[i,s]=U.useState(0),[o,a]=U.useState(null),[l,u]=U.useState(!1),[h,f]=U.useState(()=>localStorage.getItem("hasSeenFirstUploadTip")==="true"),[p,_]=U.useState(window.innerWidth<1024),[I,A]=U.useState(!1),D=U.useRef(null),E=U.useRef(null),v=U.useRef(null),x=U.useRef(null);U.useEffect(()=>{const T=()=>_(window.innerWidth<1024);return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const V=U.useRef(null),z=U.useRef(null),H=U.useRef(null),b=U.useRef(null);U.useRef(null),U.useRef(null),U.useState("  ");const[w,S]=U.useState(null),[R,N]=U.useState("/assets/design_img.jpg"),[P,k]=U.useState(!1),[Gt,Fn]=U.useState(!1);U.useState(!1);const[Li,on]=U.useState(!1),[Y,ie]=U.useState(!1),[ae,Re]=U.useState(!1),[Ie,De]=U.useState(!1),[Wt,Kt]=U.useState(!1),[Qt,Dt]=U.useState(!1),[Zs,lt]=U.useState(!1),[an,Un]=U.useState([]),[ne,eo]=U.useState(null),[vn,to]=U.useState(!1),[no,ei]=U.useState(!1),[$p,va]=U.useState(!1),[Ia,Vi]=U.useState(null),[Ea,ro]=U.useState([]),[io,Oi]=U.useState(!1),[xa,pt]=U.useState(!1),[_e,ba]=U.useState(()=>{const T=localStorage.getItem("designerAvatarEnabled");return T===null?!0:T==="true"}),[Lt,ct]=U.useState(""),[Tv,kr]=U.useState(16/9),[Ta,oh]=U.useState(""),[Mi,Aa]=U.useState(null),[Vt,ji]=U.useState(null),[yc,Fi]=U.useState(1),[Bn,or]=U.useState(!0),[ti,Pr]=U.useState(!1),[ah,Cr]=U.useState(!1),[lh,ni]=U.useState(!1),[zn,Ke]=U.useState("signup"),[ar,Ui]=U.useState(""),[Bi,ch]=U.useState(""),[it,zi]=U.useState(0),[ut,qp]=U.useState(0),[Yt,_c]=U.useState(0),wc={0:"",1:"",2:"",3:""},[$n,lr]=U.useState(""),[vc,Ic]=U.useState(!1),[uh,Sa]=U.useState(!1),[Ec,dh]=U.useState(!1),[hh,Ra]=U.useState(!1),[fh,$i]=U.useState(!1),[so,Nr]=U.useState(!1),[ka,mh]=U.useState(null),[ph,Pa]=U.useState(!1),[xc,Dr]=U.useState(!1),[bc,Tc]=U.useState(!1);U.useState(0);const[Lr,Ca]=U.useState(null),[qi,qn]=U.useState(!1),[gh,Ac]=U.useState(!1),[Hn,Gn]=U.useState(""),[cr,oo]=U.useState(""),[ao,ke]=U.useState(""),[lo,Hi]=U.useState(!1),[co,Sc]=U.useState(!1),[Rc,Gi]=U.useState("");U.useEffect(()=>{ka&&ne&&!ne.isAnonymous&&($i(!0),F0(),mh(null))},[ne,ka]);const kc=T=>{const j=T.includes("starter")?"starter":T.includes("value")?"value":T.includes("pro")?"pro":"unknown";wC(j),Dc.current=!0,window.open(T,"_blank","noopener,noreferrer"),$i(!1),(!ne||ne.isAnonymous)&&Pa(!0)},[Hp,Pc]=U.useState(!1),[Wi,ur]=U.useState(null),Cc=U.useRef(null),Nc=U.useRef(null),dr=U.useRef(null);U.useRef(null);const ri=U.useRef(!0),Dc=U.useRef(!1);U.useEffect(()=>{TC()},[]),U.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{e(!0),j0()},1e3)},[]);const Lc=()=>{e(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),yC()},Gp=()=>{if(i<3){const T=i+1;s(T),gC(T)}else Lc()},Vr=()=>{_C(i),Lc()},Na=()=>{F0(),$i(!0)},Wp=[{title:" ",description:"      .   ?  ,   .",targetRef:p?E:D},{title:"  ",description:'      .  " "    .',targetRef:p?z:V},{title:" ",description:'  "" -AI       !',targetRef:p?b:H},{title:" :  ",description:'   ?   " "        .',targetRef:p?x:v}];U.useEffect(()=>{const T=U4(os,async j=>{if(j){console.log("User UID:",j.uid),eo(j),to(!0),await To(j),ei(!0);try{const C=await Za(j.uid,1,7);Un(C.history),or(C.hasMore)}finally{ei(!1)}const B=Xn(mn,"users",j.uid),oe=bl(B,C=>{if(C.exists()){const O=C.data(),$=O.subscription!==void 0?O.subscription:0;qp(re=>ri.current?(ri.current=!1,$):(re===0&&$>0&&Dc.current&&(Tc(!0),vC(),Dc.current=!1),$)),zi(O.credits!==void 0?O.credits:0)}}),c=new Date,m=`${String(c.getMonth()+1).padStart(2,"0")}-${c.getFullYear()}`,g=Xn(mn,"genCount",m,"users",j.uid),y=bl(g,C=>{C.exists()?_c(C.data().count||0):_c(0)});return()=>{oe(),y()}}else try{const B=await KP();eo(B),to(!0),await To(B),tC()}catch(B){console.error("Failed to sign in anonymously:",B)}});return()=>T()},[]);const Da=async T=>{const j=T.target.files[0];if(j){const B=j.type||j.name.split(".").pop().toLowerCase();rC(B);const oe=j.type==="image/heic"||j.type==="image/heif"||j.name.toLowerCase().endsWith(".heic")||j.name.toLowerCase().endsWith(".heif");let c=j;if(oe){console.log("HEIC file detected, converting to JPEG...",{name:j.name,type:j.type,size:j.size});try{if(j.type==="image/jpeg"||j.type==="image/png"||j.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),c=j;else{const{heicTo:g}=await pr(()=>import("./heic-to-49ba7c0b.js"),[]);c=await g({blob:j,type:"image/jpeg",quality:.9}),console.log("HEIC converted to JPEG successfully:",{type:c.type,size:c.size})}}catch(g){console.error("HEIC conversion failed:",g),console.error("Error details:",g.message,g.stack),alert(`Failed to convert HEIC image: ${g.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const m=new FileReader;m.onload=async g=>{const y=g.target.result;let C=y;try{const O=await $s(y,1920,1080,.8),$=new FileReader;C=await new Promise(re=>{$.onload=()=>re($.result),$.readAsDataURL(O)}),console.log("Image compressed for display")}catch(O){console.warn("Failed to compress image for display, using original:",O)}if(S(C),N(C),Ca(null),qn(!1),kr(16/9),Vi(null),h||setTimeout(()=>{u(!0)},1e3),vn&&ne){ei(!0);try{const O=await XP(ne.uid,j,`Uploaded: ${j.name}`),$=O.id;console.log("Upload result ID:",$),console.log("Upload result:",O);const re=await Za(ne.uid,1,7);Un(re.history),Fi(1),or(re.hasMore),Vi($),console.log("Set current history ID to newly uploaded image:",$),_e&&(Oi(!0),pt(!0)),console.log("Current history after reload:",re.history.map(me=>({id:me.id,prompt:me.prompt})))}catch(O){console.error("Failed to save upload to Firebase:",O)}finally{ei(!1)}}},m.readAsDataURL(c)}},uo=()=>{Cc.current.click()},Vc=async()=>{sC();try{const B=await(await fetch(R)).blob(),oe=window.URL.createObjectURL(B),c=document.createElement("a");c.href=oe,c.download=`moomhe-design-${Date.now()}.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(oe)}catch(T){console.error("Download failed:",T);try{window.open(R,"_blank")}catch(j){console.error("Fallback download also failed:",j),alert("  .  .")}}};U.useEffect(()=>{if(!Ia||!_e){ro([]),Oi(!1);return}const T=bl(Xn(mn,"userHistory",Ia),j=>{if(j.exists()){const B=j.data();_e&&B.suggestions&&Array.isArray(B.suggestions)&&B.suggestions.length>0&&(ro(B.suggestions),Oi(!1))}});return()=>T()},[Ia,_e]);const Ki=T=>{const j=T.prompt;ct(j),Yi(j),setTimeout(()=>ct(""),100)},Qi=()=>{const T=!_e;ba(T),localStorage.setItem("designerAvatarEnabled",T.toString()),T||(ro([]),Oi(!1))},Oc=async()=>{oC("whatsapp");try{let T=R;const j=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(T.startsWith("data:"))try{k(!0);const{downloadURL:B}=await ZP((ne==null?void 0:ne.uid)||"anonymous",T);T=B,console.log(" Image uploaded to temporary storage:",B)}catch(B){console.error("Error uploading image to Firebase:",B),alert("  .  .");return}finally{k(!1)}if(j){const B=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(T)}`;window.open(B,"_blank")}else{const B=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(T)}`;window.open(B,"_blank")}}catch(T){console.error("WhatsApp share failed:",T),alert("  .  .")}},Mc=async()=>{if(!cr.trim()&&!Hn.trim()){Gi("     ");return}if(cr.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(cr)){Gi("    ");return}if(!ao.trim()){Gi("  ");return}Gi(""),Hi(!0),xC();try{const T=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,j={id:T,uid:(ne==null?void 0:ne.uid)||"anonymous",email:cr.trim()||null,phone:Hn.trim()||null,message:ao.trim(),createdAt:new Date,userEmail:(ne==null?void 0:ne.email)||null,isAnonymous:(ne==null?void 0:ne.isAnonymous)||!0};await fetch("https://formspree.io/f/xkgdpbjg",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:cr.trim()||null,phone:Hn.trim()||null,message:ao.trim()})}),await th(Xn(mn,"supportMsgs",T),j),Gn(""),oo(""),ke(""),Ac(!1),Sc(!0),bC(),setTimeout(()=>Sc(!1),5e3)}catch(T){console.error("Error submitting contact form:",T),Gi("  .  .")}finally{Hi(!1)}},Le=T=>{IC();const j=T.storageUrl||T.imageUrl;N(j),T.originalImageUrl?(Ca(T.originalImageUrl),qn(!1)):(Ca(null),qn(!1)),kr(16/9),Vi(T.id),pt(!1)},Kp=()=>{P||(va(!0),Lr&&qn(!0))},La=()=>{va(!1),qn(!1)},yh=T=>{const j=T.target,B=j.naturalWidth/j.naturalHeight;kr(B)},_h=async T=>{const j=T.target.files[0];if(j){iC();const B=j.type==="image/heic"||j.type==="image/heif"||j.name.toLowerCase().endsWith(".heic")||j.name.toLowerCase().endsWith(".heif");let oe=j;if(B){console.log("HEIC object image detected, converting to JPEG...",{name:j.name,type:j.type,size:j.size});try{if(j.type==="image/jpeg"||j.type==="image/png"||j.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),oe=j;else{const{heicTo:m}=await pr(()=>import("./heic-to-49ba7c0b.js"),[]);oe=await m({blob:j,type:"image/jpeg",quality:.9}),console.log("HEIC object image converted to JPEG successfully")}}catch(m){console.error("HEIC conversion failed:",m),alert(`Failed to convert HEIC image: ${m.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const c=new FileReader;c.onload=m=>{const g=new Image;g.onload=()=>{const O=document.createElement("canvas");let $=g.width,re=g.height;const me=1200;($>me||re>me)&&($>re?(re=Math.round(re*me/$),$=me):($=Math.round($*me/re),re=me)),O.width=$,O.height=re,O.getContext("2d").drawImage(g,0,0,$,re);const Pe=O.toDataURL("image/jpeg",.9);Aa(Pe),fetch(Pe).then(ve=>ve.blob()).then(ve=>{const Ot=new File([ve],j.name,{type:"image/jpeg"});ji(Ot)})},g.src=m.target.result,Or("  !      .");const y="    ",C=Lt.trim();C?C.includes(y)||ct(`${C} ${y}`):ct(y)},c.readAsDataURL(oe)}},jc=()=>{dr.current.click()},ho=()=>{Aa(null),ji(null),dr.current&&(dr.current.value="")},wh=async T=>{if(T.preventDefault(),!(!ar||!$n)){if(zn==="signup"&&$n!==Bi){alert("  .  .");return}Ic(!0);try{if(zn==="signup")if(ne&&ne.isAnonymous){const{linkWithCredential:B,EmailAuthProvider:oe}=await pr(()=>import("./index.esm-69c47ae8.js"),[]),c=oe.credential(ar,$n);try{const m=await B(ne,c);await To(m.user),M0(!0),Bf("email_link"),alert("  !    .")}catch(m){if(M0(!1),m.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:g}=await pr(()=>import("./index.esm-69c47ae8.js"),[]),y=await g(os,ar,$n);await Qp(ne.uid,y.user.uid),await To(y.user),Bf("email_migrate"),alert("  !      .")}else throw m}}else{const{createUserWithEmailAndPassword:B}=await pr(()=>import("./index.esm-69c47ae8.js"),[]),oe=await B(os,ar,$n);await To(oe.user),Bf("email"),alert("  !")}else{const{signInWithEmailAndPassword:j}=await pr(()=>import("./index.esm-69c47ae8.js"),[]),B=await j(os,ar,$n);await To(B.user),eC("email"),alert(" !")}Cr(!1),Ui(""),ch(""),lr(""),Ke("signup")}catch(j){console.error("Authentication error:",j),j.code==="auth/email-already-in-use"?(alert("   .   ."),Ke("login")):j.code==="auth/user-not-found"?(alert("  .    ."),Ke("signup")):j.code==="auth/wrong-password"?alert(" .  ."):j.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{Ic(!1)}}},hr=T=>{T.preventDefault(),wh(T)},vh=async()=>{if(!ar){alert("    .");return}Sa(!0);try{const{sendPasswordResetEmail:T}=await pr(()=>import("./index.esm-69c47ae8.js"),[]);await T(os,ar),alert("     .")}catch(T){console.error("Password reset error:",T),T.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{Sa(!1)}},Qp=async(T,j)=>{try{const{collection:B,query:oe,where:c,getDocs:m,doc:g,setDoc:y,deleteDoc:C}=await pr(()=>import("./index.esm-4ab079fd.js"),[]),{db:O}=await pr(()=>Promise.resolve().then(()=>FB),void 0),$=B(O,"userHistory"),re=oe($,c("userId","==",T)),me=await m(re),ce=[];if(me.forEach(Pe=>{const ve=Pe.data();ve.userId=j;const Ot=g(B(O,"userHistory"));ce.push(y(Ot,ve)),ce.push(C(Pe.ref))}),await Promise.all(ce),console.log(`Migrated ${me.size} history entries from ${T} to ${j}`),vn){const Pe=await Za(j,1,7);Un(Pe.history),Fi(1),or(Pe.hasMore)}}catch(B){console.error("Error migrating user data:",B)}},fo=async()=>{try{nC();const{signOut:T}=await pr(()=>import("./index.esm-69c47ae8.js"),[]);await T(os),Un([]),eo(null),to(!1),ni(!1),window.location.reload()}catch(T){console.error("Logout error:",T),alert(" .  .")}},mo=async()=>{if(!vn||!ne||ti||!Bn){console.log("Load more history blocked:",{isAuthenticated:vn,currentUser:!!ne,isLoadingMoreHistory:ti,hasMoreHistory:Bn});return}console.log("Loading more history, current page:",yc),Pr(!0);try{const T=yc+1;EC(T);const j=await Za(ne.uid,T,7);console.log("Load more result:",{nextPage:T,historyCount:j.history.length,hasMore:j.hasMore}),j.history.length>0?(Un(B=>[...B,...j.history]),Fi(T),or(j.hasMore)):or(!1)}catch(T){console.error("Failed to load more history:",T)}finally{Pr(!1)}};U.useEffect(()=>{const T=j=>{Ec&&Nc.current&&!Nc.current.contains(j.target)&&dh(!1),hh&&!j.target.closest(".suggestions-modal")&&Ra(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[Ec,hh]);const Fc=T=>{const j=String(T.getDate()).padStart(2,"0"),B=String(T.getMonth()+1).padStart(2,"0"),oe=String(T.getFullYear()).slice(-2);return`${j}/${B}/${oe}`},Va=T=>{const B=Math.floor((new Date-T)/1e3);return B<60?" ":B<3600?` ${Math.floor(B/60)} `:B<86400?` ${Math.floor(B/3600)} `:B<172800?"":B<604800?` ${Math.floor(B/86400)} `:B<2592e3?` ${Math.floor(B/604800)} `:B<31536e3?` ${Math.floor(B/2592e3)} `:` ${Math.floor(B/31536e3)} `},Uc=T=>{const j=T.createdAt;if(!j)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(j))return j;try{let B;if(j&&typeof j=="object"&&j.toDate?B=j.toDate():j&&typeof j=="object"&&j.seconds?B=new Date(j.seconds*1e3):B=new Date(j),!isNaN(B.getTime()))return Va(B)}catch(B){console.warn("Failed to parse timestamp:",j,B)}return j||"  "},ii=async()=>{if(Lt.trim()){if(vn&&ne&&!await af.canMakeRequest(ne.uid)){$f(ut,Yt,it),Dr(!0);return}k(!0);try{const T=Lt;let j=T;Vt&&(j=`  , ${T}`),console.log(" Final prompt for AI:",j),await Yi(j),ct(""),Aa(null),ji(null),dr.current&&(dr.current.value="")}catch(T){console.error("Custom prompt failed:",T),T.message&&(T.message.includes("limit reached")||T.message.includes("credits"))?Dr(!0):alert("  .  .")}finally{k(!1)}}},Yp={:"#C1121C",:"#FF7514",:"#E5BE01",:"#287233",:"#1E2460",:"#6D3F5B",:"#78858B"," ":"#F4F4F4"},Ih={:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}]," ":[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},po=T=>{uC(T.value,Ta),ur(T),Pc(!0)},Eh=T=>{Pc(!1),Fn(!1),ur(null),console.log(" Color Selection - Prompt being added to input and executing:",T);const j=Lt.trim();let B;j?j.endsWith(" ")?B=`${j}${T}`:B=`${j}, ${T}`:B=T,ct(B),Yi(B),ct("")},xh=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],Bc=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}],zc=[{name:"  ",value:"mediterranean-modern",thumbnail:"/assets/styles/mediterranean.png",prompt:"Transform this room into a Modern Mediterranean interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use natural materials like Jerusalem stone walls, terracotta tiles, and light oak wood flooring. Add arched doorways and windows. Use a warm color palette with white, cream, sand, and olive green accents. Include linen curtains, woven textures, ceramic vases with olive branches, and modern furniture with clean lines. Maximize natural light with large windows. Add indoor plants like olive trees and succulents. Create an airy, relaxed, and sophisticated atmosphere inspired by Israeli coastal living."},{name:" ",value:"warm-minimalism",thumbnail:"/assets/styles/warm-minimalism.jpg",prompt:"Transform this room into Warm Minimalism interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Keep the space clean and uncluttered but add warmth through natural materials. Use oak wood floors, cream-colored walls, and natural stone accents. Include low-profile modern furniture in warm neutrals like camel, beige, and soft terracotta. Add texture through wool rugs, linen cushions, and organic cotton throws. Use rounded furniture edges and soft curves. Include subtle decorative elements like a single large plant, minimalist art, and sculptural ceramic pieces. Emphasize natural light with sheer curtains. Create a serene, cozy, and sophisticated atmosphere."},{name:"",value:"biophilic",thumbnail:"/assets/styles/biophilic.jpg",prompt:"Transform this room into Biophilic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a strong connection to nature inside the home. Add abundant indoor plants including large statement plants like fiddle leaf figs, monstera, and hanging pothos. Use natural materials throughout: raw wood furniture, stone surfaces, bamboo accents, and cork flooring. Include a living green wall or plant shelf. Use earthy colors: forest green, terracotta, sand, and natural wood tones. Maximize natural light through existing windows. Include water features or natural elements like driftwood and pebbles. Create a fresh, calming, and nature-immersive atmosphere."},{name:" ",value:"modern-luxury",thumbnail:"/assets/styles/modern-luxury.jpg",prompt:"Transform this room into Modern Luxury interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an elegant and sophisticated high-end space. Use premium materials: Italian marble floors or feature walls, rich wood veneers, brushed brass or gold metal accents. Include designer furniture with sculptural forms and plush velvet upholstery in jewel tones like emerald green, sapphire blue, or deep burgundy. Add statement lighting fixtures like a modern chandelier or sculptural pendant lights. Use a refined color palette with charcoal, cream, and metallic accents. Include floor-to-ceiling curtains, large abstract art, and designer accessories. Create a glamorous, refined, and opulent atmosphere."},{name:"",value:"japandi",thumbnail:"/assets/styles/japandi.jpg",prompt:"Transform this room into Japandi interior design style - a fusion of Japanese and Scandinavian aesthetics. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a muted, neutral color palette with soft whites, warm grays, and natural wood tones. Include low-profile furniture with clean lines and natural materials like light ash or oak wood. Add Japanese elements: shoji-style screens, floor cushions, bonsai plants, and ceramic pottery. Incorporate Scandinavian hygge with cozy textiles, wool throws, and sheepskin rugs. Keep the space minimal and functional with hidden storage. Use paper lanterns or simple pendant lighting. Add indoor plants like bamboo or peace lilies. Create a zen-like, harmonious, and tranquil atmosphere."},{name:"",value:"scandinavian",thumbnail:"/assets/styles/scandinavian.jpg",prompt:"Transform this room into Scandinavian interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a bright, airy color palette dominated by white and light gray walls. Add light wood floors in birch or pine. Include minimalist furniture with clean lines and functional design in natural wood and white finishes. Add cozy textiles: chunky knit blankets, sheepskin throws, and soft wool rugs. Include statement lighting with modern pendant lamps. Use indoor plants like eucalyptus and ferns for natural touches. Add black accents through frames, fixtures, and accessories for contrast. Keep decor minimal but meaningful. Create a bright, cozy, and hygge-inspired atmosphere with excellent natural lighting."},{name:" ",value:"boho-chic",thumbnail:"/assets/styles/boho.jpg",prompt:"Transform this room into Bohemian Chic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an eclectic, artistic, and free-spirited space. Layer rich textures with Moroccan rugs, macram wall hangings, and woven baskets. Use warm, earthy colors mixed with vibrant accents: terracotta, mustard yellow, teal, and burnt orange. Include rattan and wicker furniture, vintage pieces, and floor cushions. Add abundant plants in decorative pots, hanging planters, and trailing vines. Include global-inspired decor: Turkish lanterns, Indian textiles, and African baskets. Add fairy lights or warm Edison bulb lighting. Create a relaxed, artistic, and globally-inspired atmosphere full of personality and warmth."},{name:"",value:"industrial",thumbnail:"/assets/styles/industrial.jpg",prompt:"Transform this room into Industrial interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Expose raw architectural elements: brick walls, concrete ceilings, metal pipes, and ductwork. Use a color palette of charcoal gray, black, rust, and raw concrete tones. Include metal and iron furniture: steel-framed shelving, iron coffee tables, and metal bar stools. Add distressed leather sofas and vintage factory-style lighting with exposed bulbs. Include reclaimed wood elements for warmth: wooden dining tables, floating shelves, or accent walls. Add large factory-style mirrors. Include industrial accessories: metal clocks, wire baskets, and vintage signs. Create a raw, edgy, urban loft atmosphere with character and history."},{name:" ",value:"earthy-natural",thumbnail:"/assets/styles/earthy-natural.jpg",prompt:"Transform this room into Earthy Natural interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a grounded, organic, and serene space connected to nature. Use a warm earth-tone color palette: terracotta, ochre, olive green, warm browns, and sandy beige. Include natural materials: raw wood furniture, stone surfaces, clay pottery, and jute or sisal rugs. Add textured walls with lime wash or clay plaster in warm tones. Include linen and cotton textiles in natural undyed colors. Add organic shapes and handcrafted elements: ceramic vases, woven baskets, and artisanal objects. Include large indoor plants and dried flowers or pampas grass. Create a warm, grounded, and nature-inspired sanctuary."},{name:"",value:"jerusalem",thumbnail:"/assets/styles/jerusalem.jpg",prompt:"Transform this room into Contemporary Israeli interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a bright, modern space that reflects Mediterranean living. Use Jerusalem stone or natural stone feature walls, terrazzo floors, and light wood accents. Use a neutral palette with white walls, warm beige, and pops of earthy colors like olive and terracotta. Add modern Israeli design furniture with clean lines and functional aesthetics. Include local crafts: ceramic pieces, woven textiles, and modern Israeli art. Add olive branches, succulents, and Mediterranean plants. Create an airy, sophisticated, and culturally-rooted atmosphere that celebrates Israeli design heritage."},{name:"",value:"minimalist",thumbnail:"/assets/styles/minimalist.jpg",prompt:"Transform this room into Minimalist interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a clean, uncluttered, and intentional space. Use an all-white or monochromatic color palette with subtle texture variations. Include streamlined furniture with geometric forms and hidden storage solutions. Keep surfaces completely clear with minimal decorative objects - only one or two statement pieces. Use high-quality materials: polished concrete floors, seamless white walls, and sleek fixtures. Add architectural interest through recessed lighting, clean lines, and negative space. Include one bold statement element like a large plant or single artwork. Create a serene, peaceful, and focused atmosphere where less is more."},{name:" ",value:"modern-classic",thumbnail:"/assets/styles/modern-classic.jpg",prompt:"Transform this room into Modern Classic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Blend timeless elegance with contemporary comfort. Use a sophisticated color palette of cream, soft gray, navy blue, and gold accents. Include classic architectural details: crown moldings, wainscoting, and paneled walls with modern interpretation. Add furniture that combines classic silhouettes with updated fabrics: tufted sofas, wingback chairs in modern fabrics, and elegant side tables. Include crystal or modern chandeliers and wall sconces. Add marble surfaces, silk or velvet textiles, and gilded mirrors. Include fresh flowers, classic art, and refined accessories. Create an elegant, sophisticated, and timeless atmosphere that feels both grand and welcoming."}],bh=T=>{on(!1),dC(T.value),console.log(" Lighting Selection - Prompt being added to input:",T.prompt),console.log(" Selected lighting:",T.name,T.value),yo(T.prompt)},Oa=T=>{ie(!1),hC(T.value),console.log(" Furniture Selection - Prompt being added to input:",T.prompt),console.log(" Selected furniture:",T.name,T.value),yo(T.prompt)},Th=T=>{De(!1),cC(T.value),console.log(" Style Selection - Prompt being added to input and executing:",T.prompt),console.log(" Selected style:",T.name,T.value);const j=Lt.trim();let B;j?j.endsWith(" ")?B=`${j}${T.prompt}`:B=`${j}, ${T.prompt}`:B=T.prompt,ct(B),Yi(B),ct("")},go=(T,j="other")=>{Wt?mC(T):Qt?pC(T):ae&&fC(T),Kt(!1),Dt(!1),Re(!1);const B=Lt.trim();let oe;B?B.endsWith(" ")?oe=`${B}${T}`:oe=`${B}, ${T}`:oe=T,ct(oe),Yi(oe),ct("")},Or=T=>{a(T),setTimeout(()=>a(null),3e3)},yo=T=>{const j=Lt.trim();let B;j?j.endsWith(" ")?B=`${j}${T}`:B=`${j} ${T}`:B=T,ct(B),Or("  .     ")},Yi=async T=>{var c,m,g;if(!R)return;const j=Date.now();k(!0);const oe=(y=>y.includes("")||y.includes("")||y.includes("")||y.includes("")?"style":y.includes("")||y.includes("")?"color":y.includes("")||y.includes("")?"lighting":y.includes("")||y.includes("")||y.includes("")||y.includes("")?"furniture":y.includes("")||y.includes("")||y.includes("")?"angle":y.includes("")||y.includes("")?"repairs":y.includes("")||y.includes("")?"doors_windows":y.includes("")||y.includes("")||y.includes("")?"bathroom":"custom")(T);aC(oe,!!Vt),Ca(R),qn(!1);try{if(console.log(" AI Image Alteration - Prompt being sent:",T),console.log(" Main image URL:",R),console.log(" Object image available:",!!Vt),vn&&ne&&!await af.canMakeRequest(ne.uid)){$f(ut,Yt,it),Dr(!0),k(!1);return}let y=R;if(R.startsWith("/assets/")||R.startsWith("./assets/"))try{const ce=await(await fetch(R)).blob();y=await new Promise(ve=>{const Ot=new FileReader;Ot.onload=()=>ve(Ot.result),Ot.readAsDataURL(ce)})}catch(me){throw console.error("Error converting local image to data URL:",me),new Error("Failed to load the default image")}let C=null;Vt?(console.log(" Processing object image file:",Vt.name,Vt.type,Vt.size),C=await WP(Vt),console.log(" Object image processed successfully:",!!C)):console.log(" No object image file available");const O=await YP(),$=await af.submitImageGenerationRequest(ne,T,y,C,O),re=await af.waitForRequestCompletion($);if(console.log("AI Service result:",re),re&&re.storageUrl){const me=Date.now()-j;lC(oe,me);const ce=re.storageUrl,Pe={imageUrl:ce,prompt:T,timestamp:Fc(new Date)};if(vn&&ne){ei(!0);try{const ve=await Za(ne.uid,1,7);Un(ve.history),Fi(1),or(ve.hasMore)}catch(ve){console.error("Failed to reload history from Firebase:",ve)}finally{ei(!1)}}else{const ve={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Pe};Un(Ot=>[ve,...Ot]),Fi(1),or(!0)}N(ce),kr(16/9),Vi(null),Aa(null),ji(null),dr.current&&(dr.current.value=""),ct(""),va(!0),qn(!0)}else alert("   .       .")}catch(y){console.error("AI processing failed:",y),(c=y.message)!=null&&c.includes("limit reached")||(m=y.message)!=null&&m.includes(" ")?(zf("limit_reached"),$f(ut,Yt,it),Dr(!0)):(g=y.message)!=null&&g.includes("timeout")?(zf("timeout"),alert("    .  .")):(zf("unknown"),alert("  .       ."))}finally{k(!1)}},Ah=[{title:" ",items:[{name:" ",description:"      ",icon:ln},{name:" ",description:"  ",icon:ln},{name:" ",description:"  ",icon:ln},{name:" -",description:"  - ( )",icon:ln},{name:"  ",description:"    ()",icon:ln},{name:" ",description:"  ",icon:ln},{name:" ",description:"  ",icon:ln},{name:" ",description:"     ",icon:ln}]},{title:" ",items:[{name:" ",description:"     ",icon:ln},{name:" ",description:"    ",icon:ln},{name:" ",description:"     ",icon:ln},{name:" ",description:"     ",icon:ln}]}],Sh=[{title:" ",items:[{name:" ",description:"    ",icon:St},{name:" ",description:"  ",icon:St}]},{title:" ",items:[{name:" ",description:"  ",icon:St},{name:" ",description:"  vintage",icon:St},{name:" ",description:"  ",icon:St}]},{title:" ",items:[{name:" ",description:"     ",icon:St},{name:"",description:" ",icon:St},{name:" ",description:"    ",icon:St}]},{title:" ",items:[{name:" ",description:"    ",icon:St},{name:" ",description:"  ",icon:St},{name:" ",description:"    ",icon:St}]},{title:" '/",items:[{name:"' ",description:" '   ",icon:St},{name:"' ",description:"  ",icon:St}]},{title:" ",items:[{name:"  ",description:"      ",icon:St},{name:"  ",description:"      ",icon:St}]}];return d.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",children:[d.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",d.jsx("span",{className:"text-lg sm:text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),d.jsxs("button",{onClick:Na,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${ut>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[ut>0?d.jsx(ja,{className:"w-5 h-5"}):d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),ut>0?d.jsxs("div",{className:"flex flex-col items-start leading-none",children:[d.jsx("span",{children:" "}),d.jsxs("span",{className:"text-[10px] opacity-80",children:[it-Yt>0?it-Yt:0," "]})]}):" "]}),d.jsx("button",{onClick:()=>{s(0),e(!0),j0()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"",children:d.jsx(oD,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>Ac(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:" ",children:d.jsx(cD,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"md:hidden flex items-center bg-surface/50 backdrop-blur-md rounded-full border border-white/10 p-1 pl-3 pr-1 gap-1",children:d.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-3",children:[vn?d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ne==null?void 0:ne.email)||"U")[0].toUpperCase()})}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center",children:d.jsx(vf,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30",children:[d.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:it-Yt>0?it-Yt:0}),d.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})]})]})}),d.jsx("button",{onClick:()=>r(!0),className:"hidden md:flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:vn?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ne==null?void 0:ne.email)||"U")[0].toUpperCase()})}),d.jsxs("div",{className:"text-right hidden sm:block",children:[!(ne!=null&&ne.isAnonymous)&&d.jsx("div",{className:"text-xs text-textMuted",children:" -"}),d.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((ne==null?void 0:ne.email)||"").split("@")[0]||""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(vf,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:""})]})})]})]}),d.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[d.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-28 glass-panel rounded-2xl p-3 items-center animate-slide-in-right relative",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"flex flex-col gap-2.5 w-full",children:[d.jsxs("button",{ref:D,onClick:uo,disabled:P,className:"w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:" ",children:[d.jsx(KI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),d.jsx("span",{className:"text-[11px] text-blue-300 font-medium",children:" "})]}),d.jsxs("button",{ref:v,onClick:jc,disabled:P,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group ${Vt?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/50":"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 hover:border-green-400/50"} hover:from-green-500/30 hover:to-emerald-500/30 border rounded-xl transition-all duration-300 shadow-lg shadow-green-500/10 hover:shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(qI,{className:`w-6 h-6 group-hover:scale-110 transition-transform ${Vt?"text-primary-400":"text-green-400"}`}),d.jsx("span",{className:`text-[11px] font-medium ${Vt?"text-primary-300":"text-green-300"}`,children:" "})]}),d.jsx("div",{className:"h-px w-full bg-white/10 my-1"}),d.jsxs("button",{ref:V,onClick:()=>De(!Ie),disabled:P,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-400/30 hover:border-purple-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20 ${Ie?"ring-2 ring-purple-400/50":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(QI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-purple-400"}),d.jsx("span",{className:"text-[11px] text-purple-300 font-medium",children:" "})]}),d.jsxs("button",{onClick:()=>lt(!Zs),disabled:P,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-surfaceHighlight/40 border border-white/80 rounded-xl transition-all duration-300 ${Zs?"bg-surfaceHighlight/60":"hover:bg-surfaceHighlight/50"} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(zI,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${Zs?"text-primary-300":"text-textMuted"}`}),d.jsx("span",{className:"text-[11px] text-textMuted font-medium",children:""})]})]})}),Zs&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>lt(!1)}),d.jsxs("div",{className:"hidden lg:block fixed top-1/2 right-32 -translate-y-1/2 w-48 bg-surface/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-white/10 z-50 animate-fade-in",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm font-medium text-white",children:" "}),d.jsx("button",{onClick:()=>lt(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(Tn,{className:"w-4 h-4 text-textMuted"})})]}),d.jsx("div",{className:"flex flex-col gap-1",children:[{icon:$I,label:"",action:()=>{Fn(!Gt),lt(!1)}},{icon:WI,label:"",action:()=>{ie(!Y),lt(!1)}},{icon:UI,label:"",action:()=>{on(!Li),lt(!1)}},{icon:ln,label:" ",action:()=>{Kt(!Wt),lt(!1)}},{icon:St,label:"",action:()=>{Dt(!Qt),lt(!1)}},{icon:Fa,label:"",action:()=>{Re(!ae),lt(!1)}}].map((T,j)=>d.jsxs("button",{onClick:T.action,disabled:P,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors text-right disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(T.icon,{className:"w-5 h-5 text-primary-400"}),d.jsx("span",{className:"text-sm text-white",children:T.label})]},j))}),d.jsx("div",{className:"mt-2 pt-2 border-t border-white/10",children:d.jsxs("button",{onClick:Qi,className:`flex items-center justify-between w-full p-2 rounded-lg transition-all ${_e?"bg-emerald-500/20 hover:bg-emerald-500/30":"hover:bg-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(HI,{className:`w-5 h-5 ${_e?"text-emerald-400":"text-gray-500"}`}),d.jsx("span",{className:"text-sm text-white",children:" AI"})]}),d.jsx("div",{className:`w-9 h-5 rounded-full p-0.5 transition-all ${_e?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform ${_e?"translate-x-4":"translate-x-0"}`})})]})})]})]}),d.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[d.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[qi&&Lr?d.jsx(D1,{beforeImage:Lr,afterImage:R}):d.jsx("img",{src:R,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${P?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:Kp,onLoad:yh,style:{objectPosition:"center"}}),P&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[d.jsxs("div",{className:"w-20 h-20 relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),d.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:"  ..."})]}),d.jsx("button",{onClick:()=>A(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:"",children:d.jsx(FI,{className:"w-5 h-5"})}),Mi&&d.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:Mi,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:ho,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),d.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",value:Lt,onChange:T=>ct(T.target.value),placeholder:"   ... (:     ,   )",disabled:P,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:T=>T.key==="Enter"&&!P&&ii()}),d.jsx(Ur,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),Lt&&d.jsx("button",{onClick:()=>!P&&ct(""),disabled:P,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),d.jsxs("button",{ref:H,onClick:ii,disabled:P||!Lt.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{children:""}),d.jsx(Ur,{className:"w-4 h-4"})]})]})]}),d.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[d.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:" "}),d.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${P?"opacity-50 pointer-events-none":""}`,children:[an.length===0?d.jsxs("div",{className:"text-center py-10 opacity-50",children:[d.jsx(Ur,{className:"w-8 h-8 mx-auto mb-2"}),d.jsx("p",{className:"text-xs",children:"  "})]}):an.map(T=>d.jsxs("div",{onClick:()=>!P&&Le(T),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),d.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[d.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:T.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:Uc(T)})]})]},T.id)),no&&d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Jc,{className:"w-6 h-6 text-primary-400 animate-spin"})}),Bn&&!no&&an.length>0&&d.jsx("button",{onClick:mo,disabled:P,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),o&&d.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[d.jsx(Ur,{className:"w-4 h-4 text-white flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:[d.jsx("span",{className:"md:inline block",children:"  ."}),d.jsx("span",{className:"hidden md:inline",children:" "}),d.jsx("span",{className:"md:inline block",children:"    "})]})]}),l&&d.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},children:[d.jsx("div",{className:"absolute inset-0 bg-black/70"}),d.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-44 lg:bottom-32 w-[90%] max-w-[340px] bg-white text-gray-900 p-5 rounded-2xl shadow-2xl animate-bounce-in",dir:"rtl",onClick:T=>T.stopPropagation(),children:[d.jsx("div",{className:"absolute bottom-[-8px] left-1/2 -translate-x-1/2 w-0 h-0 border-solid border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:" !  "}),d.jsx("button",{onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(Tn,{size:18})})]}),d.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:['     . : "    "  "  ".',d.jsx("br",{}),d.jsx("br",{})," ",d.jsx("strong",{children:":"}),'   ""      , ,  !']}),d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary-50 rounded-xl mb-4",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("span",{className:"text-sm text-primary-700 font-medium",children:'       ""'})]}),d.jsx("button",{onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg",children:",  !"})]})]})]}),d.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:d.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[d.jsxs("div",{className:"relative",children:[Mi&&d.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:Mi,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:ho,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[d.jsx("input",{type:"text",value:Lt,onChange:T=>ct(T.target.value),placeholder:" ?",disabled:P,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:T=>T.key==="Enter"&&!P&&ii()}),Lt&&d.jsx("button",{onClick:()=>!P&&ct(""),disabled:P,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),d.jsx("button",{ref:b,onClick:ii,disabled:!Lt.trim()||P,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(Ur,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex justify-center gap-4 py-1",children:[d.jsxs("button",{ref:E,onClick:uo,disabled:P,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:d.jsx(KI,{className:"w-6 h-6 text-blue-400"})}),d.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:" "})]}),d.jsxs("button",{ref:x,onClick:jc,disabled:P,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl ${Vt?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/40":"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-400/40"} flex items-center justify-center border active:scale-95 transition-transform shadow-lg shadow-green-500/20`,children:d.jsx(qI,{className:`w-6 h-6 ${Vt?"text-primary-400":"text-green-400"}`})}),d.jsx("span",{className:`text-[10px] font-medium ${Vt?"text-primary-300":"text-green-300"}`,children:" "})]}),d.jsxs("button",{ref:z,onClick:()=>De(!0),disabled:P,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center border border-purple-400/40 active:scale-95 transition-transform shadow-lg shadow-purple-500/20",children:d.jsx(QI,{className:"w-6 h-6 text-purple-400"})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:" "})]}),p&&!P&&_e&&(Ea.length>0||io)&&d.jsxs("div",{className:"relative flex flex-col items-center gap-1",children:[d.jsx("div",{className:"w-14 h-14 flex items-center justify-center",children:d.jsx(L1,{suggestions:Ea,onSelect:Ki,onClose:()=>ro([]),isMobile:!0,isThinking:io,initialShowSuggestions:xa})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:" AI"})]}),d.jsxs("button",{onClick:()=>lt(!0),disabled:P,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surfaceHighlight/40 flex items-center justify-center border border-white/80 active:scale-95 transition-transform",children:d.jsx(zI,{className:"w-6 h-6 text-textMuted"})}),d.jsx("span",{className:"text-[10px] text-textMuted font-medium",children:""})]})]}),Zs&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>lt(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10",onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),d.jsx("button",{onClick:()=>lt(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(Tn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:$I,label:"",action:()=>{Fn(!0),lt(!1)}},{icon:WI,label:"",action:()=>{ie(!0),lt(!1)}},{icon:UI,label:"",action:()=>{on(!0),lt(!1)}},{icon:ln,label:" ",action:()=>{Kt(!0),lt(!1)}},{icon:St,label:"",action:()=>{Dt(!0),lt(!1)}},{icon:Fa,label:"",action:()=>{Re(!0),lt(!1)}}].map((T,j)=>d.jsxs("button",{onClick:T.action,disabled:P,className:"flex flex-col items-center gap-2 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(T.icon,{className:"w-7 h-7 text-primary-400"}),d.jsx("span",{className:"text-xs text-white font-medium",children:T.label})]},j))}),d.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:d.jsxs("button",{onClick:Qi,className:`w-full flex items-center justify-between p-4 rounded-2xl transition-all active:scale-[0.98] ${_e?"bg-gradient-to-r from-emerald-500/20 to-green-500/20 border border-emerald-400/30":"bg-white/5 border border-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(HI,{className:`w-6 h-6 ${_e?"text-emerald-400":"text-gray-500"}`}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm text-white font-medium block",children:" AI"}),d.jsx("span",{className:`text-xs ${_e?"text-emerald-300":"text-gray-500"}`,children:_e?" -  ":" -  "})]})]}),d.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-all ${_e?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${_e?"translate-x-5":"translate-x-0"}`})})]})})]})]}),d.jsx("div",{className:"hidden",children:an.length>0&&d.jsxs("div",{className:`pt-2 border-t border-white/5 ${P?"opacity-50 pointer-events-none":""}`,children:[d.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[" (",an.length,")"]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:T=>{if(P)return;const{scrollLeft:j,scrollWidth:B,clientWidth:oe}=T.target;j+oe>=B-10&&Bn&&!ti&&mo()},children:[an.map(T=>d.jsx("div",{onClick:()=>!P&&Le(T),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-full h-full object-cover"})},T.id)),ti&&d.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:d.jsx(Jc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Bn&&!ti&&d.jsxs("button",{onClick:mo,disabled:P,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{className:"text-[10px]",children:""}),d.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),I&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>A(!1)}),d.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(FI,{className:"w-5 h-5 text-primary-400"})," "]}),d.jsx("button",{onClick:()=>A(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:d.jsx("span",{className:"text-xl leading-none",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[an.length===0?d.jsxs("div",{className:"text-center py-8 opacity-50",children:[d.jsx(Ur,{className:"w-6 h-6 mx-auto mb-2"}),d.jsx("p",{className:"text-xs text-gray-400",children:"  "})]}):an.map(T=>d.jsxs("div",{onClick:()=>{P||(Le(T),A(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:T.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:Uc(T)})]})]},T.id)),no&&d.jsx("div",{className:"flex justify-center py-2",children:d.jsx(Jc,{className:"w-5 h-5 text-primary-400 animate-spin"})}),Bn&&!no&&an.length>0&&d.jsx("button",{onClick:mo,disabled:P,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),$p&&d.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 md:p-8 animate-fade-in",onClick:La,children:d.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center gap-4",onClick:T=>T.stopPropagation(),children:[d.jsx("button",{onClick:La,className:"absolute top-2 right-2 bg-black/40 hover:bg-black/60 text-white p-2 rounded-full backdrop-blur-md border border-white/10 z-50 md:hidden",children:d.jsx(Tn,{className:"w-5 h-5"})}),d.jsx("div",{className:`flex-1 w-full relative flex items-center justify-center overflow-hidden rounded-2xl bg-black/50 border border-white/5 ${p?"mb-20":""}`,children:Lr&&qi?d.jsx(D1,{beforeImage:Lr,afterImage:R}):d.jsx("img",{src:R,alt:"Full size view",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"})}),p?d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-surface/95 backdrop-blur-xl border-t border-white/10 p-2 pb-8 z-50 grid grid-cols-4 gap-2",children:[d.jsxs("button",{onClick:()=>qn(!qi),disabled:!Lr,className:`flex flex-col items-center justify-center gap-1 p-2 rounded-xl transition-all ${qi?"text-primary-300 bg-primary-500/20":"text-gray-400 hover:text-white disabled:opacity-30"}`,children:[d.jsx(Yy,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:Oc,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-green-400 bg-green-500/10 hover:bg-green-500/20 transition-all",children:[d.jsx(GI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:Vc,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all",children:[d.jsx(jI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:La,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 hover:bg-red-500/10 transition-all",children:[d.jsx(Tn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]})]}):d.jsxs("div",{className:"flex items-center gap-4 bg-black/60 backdrop-blur-md p-3 px-6 rounded-2xl border border-white/10 shadow-2xl",children:[d.jsxs("button",{onClick:()=>qn(!qi),disabled:!Lr,className:`flex items-center gap-2 px-4 py-2 rounded-xl border transition-all whitespace-nowrap ${qi?"bg-primary-500/20 text-primary-300 border-primary-500/30":"bg-white/5 text-gray-300 border-white/10 hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed"}`,children:[d.jsx(Yy,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium text-sm",children:""})]}),d.jsx("div",{className:"w-px h-8 bg-white/10 mx-1"}),d.jsxs("button",{onClick:Oc,className:"flex items-center gap-2 px-4 py-2 bg-green-600/20 hover:bg-green-600/40 text-green-400 rounded-xl border border-green-500/30 transition-all whitespace-nowrap",children:[d.jsx(GI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium text-sm",children:""})]}),d.jsxs("button",{onClick:Vc,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl border border-white/10 transition-all whitespace-nowrap",children:[d.jsx(jI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium text-sm",children:""})]}),d.jsx("div",{className:"w-px h-8 bg-white/10 mx-1"}),d.jsxs("button",{onClick:La,className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl border border-red-500/20 transition-all whitespace-nowrap",children:[d.jsx(Tn,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium text-sm",children:""})]})]})]})}),Gt&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),d.jsx("button",{onClick:()=>Fn(!1),className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(Yp).map(T=>d.jsx("button",{onClick:()=>oh(T),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${Ta===T?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:T},T))}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(_o=Ih[Ta])==null?void 0:_o.map((T,j)=>d.jsxs("button",{onClick:()=>po(T),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[d.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:T.hex}})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:T.name}),d.jsx("div",{className:"text-[10px] text-gray-500",children:T.ral})]})]},j))})]})]})}),[{show:Y,close:()=>ie(!1),title:"  ",options:Bc,onSelect:Oa},{show:Li,close:()=>on(!1),title:"  ",options:xh,onSelect:bh},{show:Ie,close:()=>De(!1),title:"  ",options:zc,onSelect:Th}].map((T,j)=>T.show&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:T.title}),d.jsx("button",{onClick:T.close,className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.options.map((B,oe)=>d.jsxs("button",{onClick:()=>T.onSelect(B),className:`flex items-center p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group ${B.thumbnail?"h-24":""}`,children:[B.thumbnail?d.jsx("div",{className:"ml-3 h-20 w-auto min-w-[80px] rounded-lg overflow-hidden flex-shrink-0 border border-white/10 group-hover:border-primary-500/50 transition-colors bg-black/20",children:d.jsx("img",{src:B.thumbnail,alt:B.name,className:"h-full w-auto object-contain"})}):d.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform flex-shrink-0",children:""}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300 truncate",children:B.name}),d.jsx("div",{className:"text-xs text-gray-400 truncate",children:B.value})]})]},oe))})})]})},j)),(Wt||Qt||ae)&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:Wt?" ":Qt?" ":"  /"}),d.jsx("button",{onClick:()=>{Kt(!1),Dt(!1),Re(!1)},className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[d.jsx("p",{className:"text-center text-gray-400 mb-6",children:"    ."}),d.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[Wt&&Ah.map((T,j)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:T.title}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.items.map((B,oe)=>d.jsxs("button",{onClick:()=>{yo(B.description),Kt(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:B.name}),d.jsx(B.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:B.description})]},oe))})]},j)),Qt&&Sh.map((T,j)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:T.title}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.items.map((B,oe)=>d.jsxs("button",{onClick:()=>{yo(B.description),Dt(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:B.name}),d.jsx(B.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:B.description})]},oe))})]},j)),ae&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:()=>go("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"   "}),d.jsx(Fa,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>go("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"  "}),d.jsx(Fa,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>go("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"   "}),d.jsx(Fa,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>go("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"  "}),d.jsx(Fa,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),ah&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl overflow-hidden",children:[d.jsx("button",{onClick:()=>Cr(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white z-10",children:""}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",d.jsx("span",{className:"text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),d.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 mb-4 relative",children:[d.jsx("div",{className:`absolute inset-y-1 w-[calc(50%-4px)] bg-primary-600 shadow-lg rounded-lg transition-all duration-300 ease-in-out ${zn==="signup"?"left-[50%]":"left-1"}`}),d.jsx("button",{onClick:()=>Ke("signup"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${zn==="signup"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:"  "}),d.jsx("button",{onClick:()=>Ke("login"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${zn==="login"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:""})]}),d.jsx("p",{className:"text-sm text-gray-400 min-h-[20px]",children:zn==="login"?" !   ":"        '"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"email",placeholder:"",value:ar,onChange:T=>Ui(T.target.value),className:"input-glass w-full"}),d.jsx("input",{type:"password",placeholder:"",value:$n,onChange:T=>lr(T.target.value),className:"input-glass w-full"}),zn==="signup"&&d.jsx("div",{className:"animate-slide-down",children:d.jsx("input",{type:"password",placeholder:" ",value:Bi,onChange:T=>ch(T.target.value),className:"input-glass w-full"})}),d.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:["   ",d.jsx("a",{href:"/eula.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "}),"",d.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "})]}),d.jsx("button",{onClick:hr,disabled:vc,className:"btn-primary w-full py-3 text-lg mt-4",children:vc?d.jsx(Jc,{className:"w-6 h-6 animate-spin mx-auto"}):zn==="login"?"":" "}),d.jsx("div",{className:"flex justify-center items-center mt-4 text-sm",children:zn==="login"&&d.jsx("button",{onClick:vh,className:"text-gray-400 hover:text-white text-xs",children:" ?"})})]})]})}),lh&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),d.jsx("p",{className:"text-gray-400 mb-6",children:"    ?"}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:()=>ni(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:""}),d.jsx("button",{onClick:fo,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),d.jsx("input",{ref:Cc,type:"file",accept:"image/*",onChange:Da,className:"hidden"}),d.jsx("input",{ref:dr,type:"file",accept:"image/*",onChange:_h,className:"hidden"}),d.jsx(N1,{isOpen:xc,onClose:()=>Dr(!1),onShowPricing:Na,userSubscription:ut,currentUsage:Yt,limit:it}),d.jsx(qB,{isOpen:n,onClose:()=>r(!1),user:ne,userCredits:it,userUsage:Yt,onLogin:()=>{Ke("login"),Cr(!0)},onLogout:()=>ni(!0),onSubscriptionClick:Na}),d.jsx($B,{isOpen:bc,onClose:()=>Tc(!1),subscriptionName:wc[ut]}),ph&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:d.jsx(ja,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),d.jsxs("p",{className:"text-gray-300",children:["  ,   ",d.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),d.jsx("button",{onClick:()=>{Pa(!1),Ke("signup"),Cr(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),d.jsx("button",{onClick:()=>Pa(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),so&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:d.jsx(vf,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" "}),d.jsxs("p",{className:"text-gray-300",children:["       .",d.jsx("br",{}),"   ?"]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>{Nr(!1),mh(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:" "}),d.jsx("button",{onClick:()=>{Nr(!1),Cr(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),fh&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[d.jsx("button",{onClick:()=>$i(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent",children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:" "}),d.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:"   "}),d.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:"         .       ."})]}),d.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 pt-6 md:pt-8 scrollbar-custom",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-5 md:p-6 flex flex-col h-full",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-white",children:"19"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"50  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"   "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:" "})]})]}),d.jsx("button",{onClick:()=>kc("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:ut===1&&it===50,className:`w-full py-3 rounded-xl font-medium border block text-center ${ut===1&&it===50?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10 hover:bg-white/10 transition-all"}`,children:ut===1&&it===50?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(ja,{className:"w-5 h-5"}),"  "]}):" "})]})]}),d.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:" :  4  ! "}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"49"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 35%  "})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{className:"font-medium",children:"200  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"  '"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"   "})]})]}),d.jsx("button",{onClick:()=>kc("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:ut===2&&it===200,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ut===2&&it===200?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30 hover:from-secondary-400 hover:to-secondary-500 transition-all"}`,children:ut===2&&it===200?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(ja,{className:"w-5 h-5"}),"  "]}):" "})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-amber-900/30 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/30 border border-amber-500/30 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-amber-900/10",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-amber-500 to-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:"  "}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:"99"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 42%  "})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{className:"font-medium",children:"450  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:" "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:"  "})]})]}),d.jsx("button",{onClick:()=>kc("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:ut===3&&it===450,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ut===3&&it===450?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-amber-500 to-yellow-500 text-black shadow-amber-900/30 hover:from-amber-400 hover:to-yellow-400 transition-all"}`,children:ut===3&&it===450?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(ja,{className:"w-5 h-5"}),"  "]}):" "})]})]})]})}),d.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:"     .     . .."})]})}),!p&&!P&&_e&&d.jsx(L1,{suggestions:Ea,onSelect:Ki,onClose:()=>ro([]),isMobile:!1,isThinking:io,initialShowSuggestions:xa}),t&&d.jsx(BB,{step:i,steps:Wp,onNext:Gp,onSkip:Vr,onComplete:Lc}),Hp&&Wi&&d.jsx(zB,{color:Wi,onClose:()=>Pc(!1),onApply:Eh}),d.jsx(N1,{isOpen:xc,onClose:()=>Dr(!1),onShowPricing:Na,userSubscription:ut,currentUsage:Yt,limit:it}),gh&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(BI,{className:"w-5 h-5 text-primary-400"})," "]}),d.jsx("button",{onClick:()=>{Ac(!1),Gi("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:d.jsx("span",{className:"text-2xl leading-none",children:""})})]}),d.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  !      ."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[Rc&&d.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:Rc}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("input",{type:"tel",value:Hn,onChange:T=>Gn(T.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("input",{type:"email",value:cr,onChange:T=>oo(T.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("textarea",{value:ao,onChange:T=>ke(T.target.value),placeholder:"   ...",rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:"rtl"})]}),d.jsx("p",{className:"text-xs text-gray-500 text-center",children:"*      "}),d.jsx("button",{onClick:Mc,disabled:lo,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:lo?d.jsxs(d.Fragment,{children:[d.jsx(Jc,{className:"w-5 h-5 animate-spin"}),"..."]}):d.jsxs(d.Fragment,{children:[d.jsx(BI,{className:"w-5 h-5"})," "]})})]})]})}),co&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[d.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:d.jsx(ja,{className:"w-10 h-10 text-emerald-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:" !"})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:["   .",d.jsx("br",{}),"   ."]}),d.jsx("button",{onClick:()=>Sc(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:""})]})]})})]})}ry.createRoot(document.getElementById("root")).render(d.jsx(qC.StrictMode,{children:d.jsx(HB,{})}));export{j4 as $,XB as A,mz as B,vz as C,dj as D,ad as E,cs as F,ds as G,tz as H,PO as I,kz as J,$z as K,TE as L,oM as M,n4 as N,xi as O,Fo as P,Ez as Q,Nz as R,i0 as S,ij as T,hz as U,S4 as V,Lz as W,Fz as X,zz as Y,Pz as Z,U4 as _,jd as a,Jo as a$,nz as a0,_O as a1,R4 as a2,Vz as a3,jz as a4,Bz as a5,DO as a6,Sz as a7,pz as a8,sz as a9,Jr as aA,Ce as aB,Cn as aC,ga as aD,ya as aE,Ne as aF,F as aG,Xr as aH,NF as aI,n6 as aJ,At as aK,pc as aL,Zd as aM,Ff as aN,Bp as aO,eh as aP,Fp as aQ,hv as aR,Nn as aS,Up as aT,ws as aU,xe as aV,t6 as aW,Tr as aX,ZF as aY,uw as aZ,et as a_,dz as aa,Iz as ab,A4 as ac,J_ as ad,iz as ae,uz as af,fz as ag,Dz as ah,Mz as ai,Uz as aj,Az as ak,rz as al,Tz as am,_z as an,wz as ao,Oz as ap,yz as aq,bz as ar,xz as as,gz as at,lz as au,hP as av,Id as aw,VF as ax,An as ay,Jz as az,Md as b,jf as b$,K as b0,Gz as b1,fj as b2,Ge as b3,Y8 as b4,he as b5,Hz as b6,Q8 as b7,K8 as b8,Kz as b9,h8 as bA,d8 as bB,Xe as bC,nh as bD,qF as bE,k8 as bF,d1 as bG,v8 as bH,I8 as bI,D0 as bJ,E8 as bK,x8 as bL,DF as bM,q8 as bN,U8 as bO,Xz as bP,Qg as bQ,c8 as bR,l1 as bS,P8 as bT,N8 as bU,C8 as bV,LF as bW,bl as bX,S8 as bY,R8 as bZ,a8 as b_,sr as ba,xj as bb,A8 as bc,p8 as bd,g8 as be,l8 as bf,F8 as bg,j8 as bh,m8 as bi,t8 as bj,Jd as bk,Qz as bl,CF as bm,zF as bn,W8 as bo,T8 as bp,O8 as bq,i8 as br,G8 as bs,Xn as bt,o8 as bu,y8 as bv,Zz as bw,e8 as bx,r8 as by,H8 as bz,ez as c,D8 as c0,L8 as c1,JF as c2,Of as c3,Xk as c4,_8 as c5,Yz as c6,V8 as c7,M8 as c8,th as c9,$8 as ca,qz as cb,w8 as cc,BF as cd,u8 as ce,f8 as cf,s8 as cg,b8 as ch,B8 as ci,n8 as cj,Mf as ck,z8 as cl,ha as d,KB as e,us as f,xf as g,JB as h,Il as i,rj as j,QB as k,YB as l,lw as m,hs as n,az as o,F4 as p,Cz as q,W4 as r,nj as s,_S as t,P4 as u,oz as v,i4 as w,cz as x,ZB as y,Rz as z};
