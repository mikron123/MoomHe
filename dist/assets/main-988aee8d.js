var HP=Object.defineProperty;var GP=(t,e,n)=>e in t?HP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zw=(t,e,n)=>(GP(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function WP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VT={exports:{}},Qf={},MT={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=Symbol.for("react.element"),KP=Symbol.for("react.portal"),QP=Symbol.for("react.fragment"),YP=Symbol.for("react.strict_mode"),JP=Symbol.for("react.profiler"),XP=Symbol.for("react.provider"),ZP=Symbol.for("react.context"),ek=Symbol.for("react.forward_ref"),tk=Symbol.for("react.suspense"),nk=Symbol.for("react.memo"),rk=Symbol.for("react.lazy"),qw=Symbol.iterator;function ik(t){return t===null||typeof t!="object"?null:(t=qw&&t[qw]||t["@@iterator"],typeof t=="function"?t:null)}var FT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jT=Object.assign,UT={};function Il(t,e,n){this.props=t,this.context=e,this.refs=UT,this.updater=n||FT}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BT(){}BT.prototype=Il.prototype;function Gy(t,e,n){this.props=t,this.context=e,this.refs=UT,this.updater=n||FT}var Wy=Gy.prototype=new BT;Wy.constructor=Gy;jT(Wy,Il.prototype);Wy.isPureReactComponent=!0;var Hw=Array.isArray,$T=Object.prototype.hasOwnProperty,Ky={current:null},zT={key:!0,ref:!0,__self:!0,__source:!0};function qT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$T.call(e,r)&&!zT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Bu,type:t,key:s,ref:o,props:i,_owner:Ky.current}}function sk(t,e){return{$$typeof:Bu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bu}function ok(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gw=/\/+/g;function hm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ok(""+t.key):e.toString(36)}function Ih(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bu:case KP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hm(o,0):r,Hw(i)?(n="",t!=null&&(n=t.replace(Gw,"$&/")+"/"),Ih(i,e,n,"",function(u){return u})):i!=null&&(Qy(i)&&(i=sk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Hw(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+hm(s,a);o+=Ih(s,e,n,c,i)}else if(c=ik(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+hm(s,a++),o+=Ih(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qd(t,e,n){if(t==null)return t;var r=[],i=0;return Ih(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ak(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},Eh={transition:null},lk={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:Ky};function HT(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:qd,forEach:function(t,e,n){qd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qd(t,function(){e++}),e},toArray:function(t){return qd(t,function(e){return e})||[]},only:function(t){if(!Qy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Il;fe.Fragment=QP;fe.Profiler=JP;fe.PureComponent=Gy;fe.StrictMode=YP;fe.Suspense=tk;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lk;fe.act=HT;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ky.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)$T.call(e,c)&&!zT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Bu,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:ZP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XP,_context:t},t.Consumer=t};fe.createElement=qT;fe.createFactory=function(t){var e=qT.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:ek,render:t}};fe.isValidElement=Qy;fe.lazy=function(t){return{$$typeof:rk,_payload:{_status:-1,_result:t},_init:ak}};fe.memo=function(t,e){return{$$typeof:nk,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Eh.transition;Eh.transition={};try{t()}finally{Eh.transition=e}};fe.unstable_act=HT;fe.useCallback=function(t,e){return Xt.current.useCallback(t,e)};fe.useContext=function(t){return Xt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Xt.current.useEffect(t,e)};fe.useId=function(){return Xt.current.useId()};fe.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Xt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};fe.useRef=function(t){return Xt.current.useRef(t)};fe.useState=function(t){return Xt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Xt.current.useTransition()};fe.version="18.3.1";MT.exports=fe;var ne=MT.exports;const ck=WP(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uk=ne,dk=Symbol.for("react.element"),hk=Symbol.for("react.fragment"),fk=Object.prototype.hasOwnProperty,pk=uk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mk={key:!0,ref:!0,__self:!0,__source:!0};function GT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)fk.call(e,r)&&!mk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:dk,type:t,key:s,ref:o,props:i,_owner:pk.current}}Qf.Fragment=hk;Qf.jsx=GT;Qf.jsxs=GT;VT.exports=Qf;var g=VT.exports,fg={},WT={exports:{}},Cn={},KT={exports:{}},QT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ie){var ae=Q.length;Q.push(ie);e:for(;0<ae;){var ke=ae-1>>>1,_e=Q[ke];if(0<i(_e,ie))Q[ke]=ie,Q[ae]=_e,ae=ke;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ie=Q[0],ae=Q.pop();if(ae!==ie){Q[0]=ae;e:for(var ke=0,_e=Q.length,Ce=_e>>>1;ke<Ce;){var dt=2*(ke+1)-1,wt=Q[dt],Ln=dt+1,Vt=Q[Ln];if(0>i(wt,ae))Ln<_e&&0>i(Vt,wt)?(Q[ke]=Vt,Q[Ln]=ae,ke=Ln):(Q[ke]=wt,Q[dt]=ae,ke=dt);else if(Ln<_e&&0>i(Vt,ae))Q[ke]=Vt,Q[Ln]=ae,ke=Ln;else break e}}return ie}function i(Q,ie){var ae=Q.sortIndex-ie.sortIndex;return ae!==0?ae:Q.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,w=!1,R=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var ie=n(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=Q)r(u),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=n(u)}}function M(Q){if(P=!1,b(Q),!R)if(n(c)!==null)R=!0,Ss($);else{var ie=n(u);ie!==null&&On(M,ie.startTime-Q)}}function $(Q,ie){R=!1,P&&(P=!1,T(_),_=-1),w=!0;var ae=p;try{for(b(ie),f=n(c);f!==null&&(!(f.expirationTime>ie)||Q&&!k());){var ke=f.callback;if(typeof ke=="function"){f.callback=null,p=f.priorityLevel;var _e=ke(f.expirationTime<=ie);ie=t.unstable_now(),typeof _e=="function"?f.callback=_e:f===n(c)&&r(c),b(ie)}else r(c);f=n(c)}if(f!==null)var Ce=!0;else{var dt=n(u);dt!==null&&On(M,dt.startTime-ie),Ce=!1}return Ce}finally{f=null,p=ae,w=!1}}var z=!1,A=null,_=-1,S=5,E=-1;function k(){return!(t.unstable_now()-E<S)}function D(){if(A!==null){var Q=t.unstable_now();E=Q;var ie=!0;try{ie=A(!0,Q)}finally{ie?x():(z=!1,A=null)}}else z=!1}var x;if(typeof I=="function")x=function(){I(D)};else if(typeof MessageChannel<"u"){var Pt=new MessageChannel,en=Pt.port2;Pt.port1.onmessage=D,x=function(){en.postMessage(null)}}else x=function(){N(D,0)};function Ss(Q){A=Q,z||(z=!0,x())}function On(Q,ie){_=N(function(){Q(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){R||w||(R=!0,Ss($))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ie=3;break;default:ie=p}var ae=p;p=ie;try{return Q()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ie){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ae=p;p=Q;try{return ie()}finally{p=ae}},t.unstable_scheduleCallback=function(Q,ie,ae){var ke=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ke+ae:ke):ae=ke,Q){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ae+_e,Q={id:d++,callback:ie,priorityLevel:Q,startTime:ae,expirationTime:_e,sortIndex:-1},ae>ke?(Q.sortIndex=ae,e(u,Q),n(c)===null&&Q===n(u)&&(P?(T(_),_=-1):P=!0,On(M,ae-ke))):(Q.sortIndex=_e,e(c,Q),R||w||(R=!0,Ss($))),Q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(Q){var ie=p;return function(){var ae=p;p=ie;try{return Q.apply(this,arguments)}finally{p=ae}}}})(QT);KT.exports=QT;var gk=KT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=ne,xn=gk;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YT=new Set,eu={};function Po(t,e){Ga(t,e),Ga(t+"Capture",e)}function Ga(t,e){for(eu[t]=e,t=0;t<e.length;t++)YT.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pg=Object.prototype.hasOwnProperty,_k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ww={},Kw={};function vk(t){return pg.call(Kw,t)?!0:pg.call(Ww,t)?!1:_k.test(t)?Kw[t]=!0:(Ww[t]=!0,!1)}function wk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ik(t,e,n,r){if(e===null||typeof e>"u"||wk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yy=/[\-:]([a-z])/g;function Jy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yy,Jy);Lt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yy,Jy);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yy,Jy);Lt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xy(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ik(e,n,i,r)&&(n=null),r||i===null?vk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var li=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hd=Symbol.for("react.element"),Ea=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),JT=Symbol.for("react.provider"),XT=Symbol.for("react.context"),e_=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),yg=Symbol.for("react.suspense_list"),t_=Symbol.for("react.memo"),Ni=Symbol.for("react.lazy"),ZT=Symbol.for("react.offscreen"),Qw=Symbol.iterator;function nc(t){return t===null||typeof t!="object"?null:(t=Qw&&t[Qw]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,fm;function _c(t){if(fm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fm=e&&e[1]||""}return`
`+fm+t}var pm=!1;function mm(t,e){if(!t||pm)return"";pm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{pm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_c(t):""}function Ek(t){switch(t.tag){case 5:return _c(t.type);case 16:return _c("Lazy");case 13:return _c("Suspense");case 19:return _c("SuspenseList");case 0:case 2:case 15:return t=mm(t.type,!1),t;case 11:return t=mm(t.type.render,!1),t;case 1:return t=mm(t.type,!0),t;default:return""}}function _g(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case Ea:return"Portal";case mg:return"Profiler";case Zy:return"StrictMode";case gg:return"Suspense";case yg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XT:return(t.displayName||"Context")+".Consumer";case JT:return(t._context.displayName||"Context")+".Provider";case e_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case t_:return e=t.displayName||null,e!==null?e:_g(t.type)||"Memo";case Ni:e=t._payload,t=t._init;try{return _g(t(e))}catch{}}return null}function Tk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _g(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ak(t){var e=eA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gd(t){t._valueTracker||(t._valueTracker=Ak(t))}function tA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nA(t,e){e=e.checked,e!=null&&Xy(t,"checked",e,!1)}function wg(t,e){nA(t,e);var n=ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ig(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ig(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ig(t,e,n){(e!=="number"||Xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vc=Array.isArray;function Oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Eg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(vc(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function rA(t,e){var n=ls(e.value),r=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wd,sA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wd=Wd||document.createElement("div"),Wd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function tu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bk=["Webkit","ms","Moz","O"];Object.keys(Pc).forEach(function(t){bk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pc[e]=Pc[t]})});function oA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pc.hasOwnProperty(t)&&Pc[t]?(""+e).trim():e+"px"}function aA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=oA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Sk=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ag(t,e){if(e){if(Sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function bg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sg=null;function n_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rg=null,La=null,Va=null;function e0(t){if(t=qu(t)){if(typeof Rg!="function")throw Error(q(280));var e=t.stateNode;e&&(e=ep(e),Rg(t.stateNode,t.type,e))}}function lA(t){La?Va?Va.push(t):Va=[t]:La=t}function cA(){if(La){var t=La,e=Va;if(Va=La=null,e0(t),e)for(t=0;t<e.length;t++)e0(e[t])}}function uA(t,e){return t(e)}function dA(){}var gm=!1;function hA(t,e,n){if(gm)return t(e,n);gm=!0;try{return uA(t,e,n)}finally{gm=!1,(La!==null||Va!==null)&&(dA(),cA())}}function nu(t,e){var n=t.stateNode;if(n===null)return null;var r=ep(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var xg=!1;if(Xr)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){xg=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{xg=!1}function Rk(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var kc=!1,Zh=null,ef=!1,Pg=null,xk={onError:function(t){kc=!0,Zh=t}};function Pk(t,e,n,r,i,s,o,a,c){kc=!1,Zh=null,Rk.apply(xk,arguments)}function kk(t,e,n,r,i,s,o,a,c){if(Pk.apply(this,arguments),kc){if(kc){var u=Zh;kc=!1,Zh=null}else throw Error(q(198));ef||(ef=!0,Pg=u)}}function ko(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t0(t){if(ko(t)!==t)throw Error(q(188))}function Ck(t){var e=t.alternate;if(!e){if(e=ko(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return t0(i),t;if(s===r)return t0(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function pA(t){return t=Ck(t),t!==null?mA(t):null}function mA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mA(t);if(e!==null)return e;t=t.sibling}return null}var gA=xn.unstable_scheduleCallback,n0=xn.unstable_cancelCallback,Nk=xn.unstable_shouldYield,Dk=xn.unstable_requestPaint,lt=xn.unstable_now,Ok=xn.unstable_getCurrentPriorityLevel,r_=xn.unstable_ImmediatePriority,yA=xn.unstable_UserBlockingPriority,tf=xn.unstable_NormalPriority,Lk=xn.unstable_LowPriority,_A=xn.unstable_IdlePriority,Yf=null,Ar=null;function Vk(t){if(Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Yf,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:jk,Mk=Math.log,Fk=Math.LN2;function jk(t){return t>>>=0,t===0?32:31-(Mk(t)/Fk|0)|0}var Kd=64,Qd=4194304;function wc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=wc(a):(s&=o,s!==0&&(r=wc(s)))}else o=n&~i,o!==0?r=wc(o):s!==0&&(r=wc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),i=1<<n,r|=t[n],e&=~i;return r}function Uk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rr(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=Uk(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function kg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vA(){var t=Kd;return Kd<<=1,!(Kd&4194240)&&(Kd=64),t}function ym(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $u(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function $k(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function i_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function wA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var IA,s_,EA,TA,AA,Cg=!1,Yd=[],Qi=null,Yi=null,Ji=null,ru=new Map,iu=new Map,Li=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r0(t,e){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(e.pointerId)}}function ic(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qu(e),e!==null&&s_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qk(t,e,n,r,i){switch(e){case"focusin":return Qi=ic(Qi,t,e,n,r,i),!0;case"dragenter":return Yi=ic(Yi,t,e,n,r,i),!0;case"mouseover":return Ji=ic(Ji,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ru.set(s,ic(ru.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,iu.set(s,ic(iu.get(s)||null,t,e,n,r,i)),!0}return!1}function bA(t){var e=Qs(t.target);if(e!==null){var n=ko(e);if(n!==null){if(e=n.tag,e===13){if(e=fA(n),e!==null){t.blockedOn=e,AA(t.priority,function(){EA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sg=r,n.target.dispatchEvent(r),Sg=null}else return e=qu(n),e!==null&&s_(e),t.blockedOn=n,!1;e.shift()}return!0}function i0(t,e,n){Th(t)&&n.delete(e)}function Hk(){Cg=!1,Qi!==null&&Th(Qi)&&(Qi=null),Yi!==null&&Th(Yi)&&(Yi=null),Ji!==null&&Th(Ji)&&(Ji=null),ru.forEach(i0),iu.forEach(i0)}function sc(t,e){t.blockedOn===e&&(t.blockedOn=null,Cg||(Cg=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,Hk)))}function su(t){function e(i){return sc(i,t)}if(0<Yd.length){sc(Yd[0],t);for(var n=1;n<Yd.length;n++){var r=Yd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qi!==null&&sc(Qi,t),Yi!==null&&sc(Yi,t),Ji!==null&&sc(Ji,t),ru.forEach(e),iu.forEach(e),n=0;n<Li.length;n++)r=Li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)bA(n),n.blockedOn===null&&Li.shift()}var Ma=li.ReactCurrentBatchConfig,rf=!0;function Gk(t,e,n,r){var i=Se,s=Ma.transition;Ma.transition=null;try{Se=1,o_(t,e,n,r)}finally{Se=i,Ma.transition=s}}function Wk(t,e,n,r){var i=Se,s=Ma.transition;Ma.transition=null;try{Se=4,o_(t,e,n,r)}finally{Se=i,Ma.transition=s}}function o_(t,e,n,r){if(rf){var i=Ng(t,e,n,r);if(i===null)Rm(t,e,r,sf,n),r0(t,r);else if(qk(i,t,e,n,r))r.stopPropagation();else if(r0(t,r),e&4&&-1<zk.indexOf(t)){for(;i!==null;){var s=qu(i);if(s!==null&&IA(s),s=Ng(t,e,n,r),s===null&&Rm(t,e,r,sf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Rm(t,e,r,null,n)}}var sf=null;function Ng(t,e,n,r){if(sf=null,t=n_(r),t=Qs(t),t!==null)if(e=ko(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sf=t,null}function SA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ok()){case r_:return 1;case yA:return 4;case tf:case Lk:return 16;case _A:return 536870912;default:return 16}default:return 16}}var qi=null,a_=null,Ah=null;function RA(){if(Ah)return Ah;var t,e=a_,n=e.length,r,i="value"in qi?qi.value:qi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ah=i.slice(t,1<r?1-r:void 0)}function bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jd(){return!0}function s0(){return!1}function Nn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jd:s0,this.isPropagationStopped=s0,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jd)},persist:function(){},isPersistent:Jd}),e}var El={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},l_=Nn(El),zu=Xe({},El,{view:0,detail:0}),Kk=Nn(zu),_m,vm,oc,Jf=Xe({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oc&&(oc&&t.type==="mousemove"?(_m=t.screenX-oc.screenX,vm=t.screenY-oc.screenY):vm=_m=0,oc=t),_m)},movementY:function(t){return"movementY"in t?t.movementY:vm}}),o0=Nn(Jf),Qk=Xe({},Jf,{dataTransfer:0}),Yk=Nn(Qk),Jk=Xe({},zu,{relatedTarget:0}),wm=Nn(Jk),Xk=Xe({},El,{animationName:0,elapsedTime:0,pseudoElement:0}),Zk=Nn(Xk),eC=Xe({},El,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tC=Nn(eC),nC=Xe({},El,{data:0}),a0=Nn(nC),rC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sC[t])?!!e[t]:!1}function c_(){return oC}var aC=Xe({},zu,{key:function(t){if(t.key){var e=rC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c_,charCode:function(t){return t.type==="keypress"?bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lC=Nn(aC),cC=Xe({},Jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l0=Nn(cC),uC=Xe({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c_}),dC=Nn(uC),hC=Xe({},El,{propertyName:0,elapsedTime:0,pseudoElement:0}),fC=Nn(hC),pC=Xe({},Jf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mC=Nn(pC),gC=[9,13,27,32],u_=Xr&&"CompositionEvent"in window,Cc=null;Xr&&"documentMode"in document&&(Cc=document.documentMode);var yC=Xr&&"TextEvent"in window&&!Cc,xA=Xr&&(!u_||Cc&&8<Cc&&11>=Cc),c0=String.fromCharCode(32),u0=!1;function PA(t,e){switch(t){case"keyup":return gC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Aa=!1;function _C(t,e){switch(t){case"compositionend":return kA(e);case"keypress":return e.which!==32?null:(u0=!0,c0);case"textInput":return t=e.data,t===c0&&u0?null:t;default:return null}}function vC(t,e){if(Aa)return t==="compositionend"||!u_&&PA(t,e)?(t=RA(),Ah=a_=qi=null,Aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xA&&e.locale!=="ko"?null:e.data;default:return null}}var wC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wC[t.type]:e==="textarea"}function CA(t,e,n,r){lA(r),e=of(e,"onChange"),0<e.length&&(n=new l_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nc=null,ou=null;function IC(t){$A(t,0)}function Xf(t){var e=Ra(t);if(tA(e))return t}function EC(t,e){if(t==="change")return e}var NA=!1;if(Xr){var Im;if(Xr){var Em="oninput"in document;if(!Em){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Em=typeof h0.oninput=="function"}Im=Em}else Im=!1;NA=Im&&(!document.documentMode||9<document.documentMode)}function f0(){Nc&&(Nc.detachEvent("onpropertychange",DA),ou=Nc=null)}function DA(t){if(t.propertyName==="value"&&Xf(ou)){var e=[];CA(e,ou,t,n_(t)),hA(IC,e)}}function TC(t,e,n){t==="focusin"?(f0(),Nc=e,ou=n,Nc.attachEvent("onpropertychange",DA)):t==="focusout"&&f0()}function AC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xf(ou)}function bC(t,e){if(t==="click")return Xf(e)}function SC(t,e){if(t==="input"||t==="change")return Xf(e)}function RC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:RC;function au(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pg.call(e,i)||!or(t[i],e[i]))return!1}return!0}function p0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0(t,e){var n=p0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p0(n)}}function OA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LA(){for(var t=window,e=Xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xh(t.document)}return e}function d_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xC(t){var e=LA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OA(n.ownerDocument.documentElement,n)){if(r!==null&&d_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=m0(n,s);var o=m0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PC=Xr&&"documentMode"in document&&11>=document.documentMode,ba=null,Dg=null,Dc=null,Og=!1;function g0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Og||ba==null||ba!==Xh(r)||(r=ba,"selectionStart"in r&&d_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dc&&au(Dc,r)||(Dc=r,r=of(Dg,"onSelect"),0<r.length&&(e=new l_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ba)))}function Xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sa={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},Tm={},VA={};Xr&&(VA=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Zf(t){if(Tm[t])return Tm[t];if(!Sa[t])return t;var e=Sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VA)return Tm[t]=e[n];return t}var MA=Zf("animationend"),FA=Zf("animationiteration"),jA=Zf("animationstart"),UA=Zf("transitionend"),BA=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(t,e){BA.set(t,e),Po(e,[t])}for(var Am=0;Am<y0.length;Am++){var bm=y0[Am],kC=bm.toLowerCase(),CC=bm[0].toUpperCase()+bm.slice(1);ys(kC,"on"+CC)}ys(MA,"onAnimationEnd");ys(FA,"onAnimationIteration");ys(jA,"onAnimationStart");ys("dblclick","onDoubleClick");ys("focusin","onFocus");ys("focusout","onBlur");ys(UA,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ic));function _0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kk(r,e,void 0,t),t.currentTarget=null}function $A(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;_0(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;_0(i,a,u),s=c}}}if(ef)throw t=Pg,ef=!1,Pg=null,t}function je(t,e){var n=e[jg];n===void 0&&(n=e[jg]=new Set);var r=t+"__bubble";n.has(r)||(zA(e,t,2,!1),n.add(r))}function Sm(t,e,n){var r=0;e&&(r|=4),zA(n,t,r,e)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function lu(t){if(!t[Zd]){t[Zd]=!0,YT.forEach(function(n){n!=="selectionchange"&&(NC.has(n)||Sm(n,!1,t),Sm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zd]||(e[Zd]=!0,Sm("selectionchange",!1,e))}}function zA(t,e,n,r){switch(SA(e)){case 1:var i=Gk;break;case 4:i=Wk;break;default:i=o_}n=i.bind(null,e,n,t),i=void 0,!xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qs(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hA(function(){var u=s,d=n_(n),f=[];e:{var p=BA.get(t);if(p!==void 0){var w=l_,R=t;switch(t){case"keypress":if(bh(n)===0)break e;case"keydown":case"keyup":w=lC;break;case"focusin":R="focus",w=wm;break;case"focusout":R="blur",w=wm;break;case"beforeblur":case"afterblur":w=wm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Yk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=dC;break;case MA:case FA:case jA:w=Zk;break;case UA:w=fC;break;case"scroll":w=Kk;break;case"wheel":w=mC;break;case"copy":case"cut":case"paste":w=tC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=l0}var P=(e&4)!==0,N=!P&&t==="scroll",T=P?p!==null?p+"Capture":null:p;P=[];for(var I=u,b;I!==null;){b=I;var M=b.stateNode;if(b.tag===5&&M!==null&&(b=M,T!==null&&(M=nu(I,T),M!=null&&P.push(cu(I,M,b)))),N)break;I=I.return}0<P.length&&(p=new w(p,R,null,n,d),f.push({event:p,listeners:P}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==Sg&&(R=n.relatedTarget||n.fromElement)&&(Qs(R)||R[Zr]))break e;if((w||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,w?(R=n.relatedTarget||n.toElement,w=u,R=R?Qs(R):null,R!==null&&(N=ko(R),R!==N||R.tag!==5&&R.tag!==6)&&(R=null)):(w=null,R=u),w!==R)){if(P=o0,M="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=l0,M="onPointerLeave",T="onPointerEnter",I="pointer"),N=w==null?p:Ra(w),b=R==null?p:Ra(R),p=new P(M,I+"leave",w,n,d),p.target=N,p.relatedTarget=b,M=null,Qs(d)===u&&(P=new P(T,I+"enter",R,n,d),P.target=b,P.relatedTarget=N,M=P),N=M,w&&R)t:{for(P=w,T=R,I=0,b=P;b;b=la(b))I++;for(b=0,M=T;M;M=la(M))b++;for(;0<I-b;)P=la(P),I--;for(;0<b-I;)T=la(T),b--;for(;I--;){if(P===T||T!==null&&P===T.alternate)break t;P=la(P),T=la(T)}P=null}else P=null;w!==null&&v0(f,p,w,P,!1),R!==null&&N!==null&&v0(f,N,R,P,!0)}}e:{if(p=u?Ra(u):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var $=EC;else if(d0(p))if(NA)$=SC;else{$=AC;var z=TC}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&($=bC);if($&&($=$(t,u))){CA(f,$,n,d);break e}z&&z(t,p,u),t==="focusout"&&(z=p._wrapperState)&&z.controlled&&p.type==="number"&&Ig(p,"number",p.value)}switch(z=u?Ra(u):window,t){case"focusin":(d0(z)||z.contentEditable==="true")&&(ba=z,Dg=u,Dc=null);break;case"focusout":Dc=Dg=ba=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,g0(f,n,d);break;case"selectionchange":if(PC)break;case"keydown":case"keyup":g0(f,n,d)}var A;if(u_)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Aa?PA(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(xA&&n.locale!=="ko"&&(Aa||_!=="onCompositionStart"?_==="onCompositionEnd"&&Aa&&(A=RA()):(qi=d,a_="value"in qi?qi.value:qi.textContent,Aa=!0)),z=of(u,_),0<z.length&&(_=new a0(_,t,null,n,d),f.push({event:_,listeners:z}),A?_.data=A:(A=kA(n),A!==null&&(_.data=A)))),(A=yC?_C(t,n):vC(t,n))&&(u=of(u,"onBeforeInput"),0<u.length&&(d=new a0("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=A))}$A(f,e)})}function cu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function of(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nu(t,n),s!=null&&r.unshift(cu(t,s,i)),s=nu(t,e),s!=null&&r.push(cu(t,s,i))),t=t.return}return r}function la(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function v0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=nu(n,s),c!=null&&o.unshift(cu(n,c,a))):i||(c=nu(n,s),c!=null&&o.push(cu(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DC=/\r\n?/g,OC=/\u0000|\uFFFD/g;function w0(t){return(typeof t=="string"?t:""+t).replace(DC,`
`).replace(OC,"")}function eh(t,e,n){if(e=w0(e),w0(t)!==e&&n)throw Error(q(425))}function af(){}var Lg=null,Vg=null;function Mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout=="function"?setTimeout:void 0,LC=typeof clearTimeout=="function"?clearTimeout:void 0,I0=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof I0<"u"?function(t){return I0.resolve(null).then(t).catch(MC)}:Fg;function MC(t){setTimeout(function(){throw t})}function xm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),su(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);su(e)}function Xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tl=Math.random().toString(36).slice(2),vr="__reactFiber$"+Tl,uu="__reactProps$"+Tl,Zr="__reactContainer$"+Tl,jg="__reactEvents$"+Tl,FC="__reactListeners$"+Tl,jC="__reactHandles$"+Tl;function Qs(t){var e=t[vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E0(t);t!==null;){if(n=t[vr])return n;t=E0(t)}return e}t=n,n=t.parentNode}return null}function qu(t){return t=t[vr]||t[Zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function ep(t){return t[uu]||null}var Ug=[],xa=-1;function _s(t){return{current:t}}function $e(t){0>xa||(t.current=Ug[xa],Ug[xa]=null,xa--)}function Me(t,e){xa++,Ug[xa]=t.current,t.current=e}var cs={},Wt=_s(cs),dn=_s(!1),uo=cs;function Wa(t,e){var n=t.type.contextTypes;if(!n)return cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function lf(){$e(dn),$e(Wt)}function T0(t,e,n){if(Wt.current!==cs)throw Error(q(168));Me(Wt,e),Me(dn,n)}function qA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,Tk(t)||"Unknown",i));return Xe({},n,r)}function cf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,uo=Wt.current,Me(Wt,t),Me(dn,dn.current),!0}function A0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=qA(t,e,uo),r.__reactInternalMemoizedMergedChildContext=t,$e(dn),$e(Wt),Me(Wt,t)):$e(dn),Me(dn,n)}var zr=null,tp=!1,Pm=!1;function HA(t){zr===null?zr=[t]:zr.push(t)}function UC(t){tp=!0,HA(t)}function vs(){if(!Pm&&zr!==null){Pm=!0;var t=0,e=Se;try{var n=zr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zr=null,tp=!1}catch(i){throw zr!==null&&(zr=zr.slice(t+1)),gA(r_,vs),i}finally{Se=e,Pm=!1}}return null}var Pa=[],ka=0,uf=null,df=0,Vn=[],Mn=0,ho=null,qr=1,Hr="";function Fs(t,e){Pa[ka++]=df,Pa[ka++]=uf,uf=t,df=e}function GA(t,e,n){Vn[Mn++]=qr,Vn[Mn++]=Hr,Vn[Mn++]=ho,ho=t;var r=qr;t=Hr;var i=32-rr(r)-1;r&=~(1<<i),n+=1;var s=32-rr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qr=1<<32-rr(e)+i|n<<i|r,Hr=s+t}else qr=1<<s|n<<i|r,Hr=t}function h_(t){t.return!==null&&(Fs(t,1),GA(t,1,0))}function f_(t){for(;t===uf;)uf=Pa[--ka],Pa[ka]=null,df=Pa[--ka],Pa[ka]=null;for(;t===ho;)ho=Vn[--Mn],Vn[Mn]=null,Hr=Vn[--Mn],Vn[Mn]=null,qr=Vn[--Mn],Vn[Mn]=null}var An=null,En=null,Ge=!1,tr=null;function WA(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function b0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,En=Xi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ho!==null?{id:qr,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,En=null,!0):!1;default:return!1}}function Bg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $g(t){if(Ge){var e=En;if(e){var n=e;if(!b0(t,e)){if(Bg(t))throw Error(q(418));e=Xi(n.nextSibling);var r=An;e&&b0(t,e)?WA(r,n):(t.flags=t.flags&-4097|2,Ge=!1,An=t)}}else{if(Bg(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ge=!1,An=t}}}function S0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function th(t){if(t!==An)return!1;if(!Ge)return S0(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mg(t.type,t.memoizedProps)),e&&(e=En)){if(Bg(t))throw KA(),Error(q(418));for(;e;)WA(t,e),e=Xi(e.nextSibling)}if(S0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Xi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=An?Xi(t.stateNode.nextSibling):null;return!0}function KA(){for(var t=En;t;)t=Xi(t.nextSibling)}function Ka(){En=An=null,Ge=!1}function p_(t){tr===null?tr=[t]:tr.push(t)}var BC=li.ReactCurrentBatchConfig;function ac(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function nh(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function R0(t){var e=t._init;return e(t._payload)}function QA(t){function e(T,I){if(t){var b=T.deletions;b===null?(T.deletions=[I],T.flags|=16):b.push(I)}}function n(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function r(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function i(T,I){return T=ns(T,I),T.index=0,T.sibling=null,T}function s(T,I,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<I?(T.flags|=2,I):b):(T.flags|=2,I)):(T.flags|=1048576,I)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,I,b,M){return I===null||I.tag!==6?(I=Vm(b,T.mode,M),I.return=T,I):(I=i(I,b),I.return=T,I)}function c(T,I,b,M){var $=b.type;return $===Ta?d(T,I,b.props.children,M,b.key):I!==null&&(I.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Ni&&R0($)===I.type)?(M=i(I,b.props),M.ref=ac(T,I,b),M.return=T,M):(M=Nh(b.type,b.key,b.props,null,T.mode,M),M.ref=ac(T,I,b),M.return=T,M)}function u(T,I,b,M){return I===null||I.tag!==4||I.stateNode.containerInfo!==b.containerInfo||I.stateNode.implementation!==b.implementation?(I=Mm(b,T.mode,M),I.return=T,I):(I=i(I,b.children||[]),I.return=T,I)}function d(T,I,b,M,$){return I===null||I.tag!==7?(I=ro(b,T.mode,M,$),I.return=T,I):(I=i(I,b),I.return=T,I)}function f(T,I,b){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Vm(""+I,T.mode,b),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Hd:return b=Nh(I.type,I.key,I.props,null,T.mode,b),b.ref=ac(T,null,I),b.return=T,b;case Ea:return I=Mm(I,T.mode,b),I.return=T,I;case Ni:var M=I._init;return f(T,M(I._payload),b)}if(vc(I)||nc(I))return I=ro(I,T.mode,b,null),I.return=T,I;nh(T,I)}return null}function p(T,I,b,M){var $=I!==null?I.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return $!==null?null:a(T,I,""+b,M);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Hd:return b.key===$?c(T,I,b,M):null;case Ea:return b.key===$?u(T,I,b,M):null;case Ni:return $=b._init,p(T,I,$(b._payload),M)}if(vc(b)||nc(b))return $!==null?null:d(T,I,b,M,null);nh(T,b)}return null}function w(T,I,b,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return T=T.get(b)||null,a(I,T,""+M,$);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Hd:return T=T.get(M.key===null?b:M.key)||null,c(I,T,M,$);case Ea:return T=T.get(M.key===null?b:M.key)||null,u(I,T,M,$);case Ni:var z=M._init;return w(T,I,b,z(M._payload),$)}if(vc(M)||nc(M))return T=T.get(b)||null,d(I,T,M,$,null);nh(I,M)}return null}function R(T,I,b,M){for(var $=null,z=null,A=I,_=I=0,S=null;A!==null&&_<b.length;_++){A.index>_?(S=A,A=null):S=A.sibling;var E=p(T,A,b[_],M);if(E===null){A===null&&(A=S);break}t&&A&&E.alternate===null&&e(T,A),I=s(E,I,_),z===null?$=E:z.sibling=E,z=E,A=S}if(_===b.length)return n(T,A),Ge&&Fs(T,_),$;if(A===null){for(;_<b.length;_++)A=f(T,b[_],M),A!==null&&(I=s(A,I,_),z===null?$=A:z.sibling=A,z=A);return Ge&&Fs(T,_),$}for(A=r(T,A);_<b.length;_++)S=w(A,T,_,b[_],M),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?_:S.key),I=s(S,I,_),z===null?$=S:z.sibling=S,z=S);return t&&A.forEach(function(k){return e(T,k)}),Ge&&Fs(T,_),$}function P(T,I,b,M){var $=nc(b);if(typeof $!="function")throw Error(q(150));if(b=$.call(b),b==null)throw Error(q(151));for(var z=$=null,A=I,_=I=0,S=null,E=b.next();A!==null&&!E.done;_++,E=b.next()){A.index>_?(S=A,A=null):S=A.sibling;var k=p(T,A,E.value,M);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(T,A),I=s(k,I,_),z===null?$=k:z.sibling=k,z=k,A=S}if(E.done)return n(T,A),Ge&&Fs(T,_),$;if(A===null){for(;!E.done;_++,E=b.next())E=f(T,E.value,M),E!==null&&(I=s(E,I,_),z===null?$=E:z.sibling=E,z=E);return Ge&&Fs(T,_),$}for(A=r(T,A);!E.done;_++,E=b.next())E=w(A,T,_,E.value,M),E!==null&&(t&&E.alternate!==null&&A.delete(E.key===null?_:E.key),I=s(E,I,_),z===null?$=E:z.sibling=E,z=E);return t&&A.forEach(function(D){return e(T,D)}),Ge&&Fs(T,_),$}function N(T,I,b,M){if(typeof b=="object"&&b!==null&&b.type===Ta&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Hd:e:{for(var $=b.key,z=I;z!==null;){if(z.key===$){if($=b.type,$===Ta){if(z.tag===7){n(T,z.sibling),I=i(z,b.props.children),I.return=T,T=I;break e}}else if(z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Ni&&R0($)===z.type){n(T,z.sibling),I=i(z,b.props),I.ref=ac(T,z,b),I.return=T,T=I;break e}n(T,z);break}else e(T,z);z=z.sibling}b.type===Ta?(I=ro(b.props.children,T.mode,M,b.key),I.return=T,T=I):(M=Nh(b.type,b.key,b.props,null,T.mode,M),M.ref=ac(T,I,b),M.return=T,T=M)}return o(T);case Ea:e:{for(z=b.key;I!==null;){if(I.key===z)if(I.tag===4&&I.stateNode.containerInfo===b.containerInfo&&I.stateNode.implementation===b.implementation){n(T,I.sibling),I=i(I,b.children||[]),I.return=T,T=I;break e}else{n(T,I);break}else e(T,I);I=I.sibling}I=Mm(b,T.mode,M),I.return=T,T=I}return o(T);case Ni:return z=b._init,N(T,I,z(b._payload),M)}if(vc(b))return R(T,I,b,M);if(nc(b))return P(T,I,b,M);nh(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,I!==null&&I.tag===6?(n(T,I.sibling),I=i(I,b),I.return=T,T=I):(n(T,I),I=Vm(b,T.mode,M),I.return=T,T=I),o(T)):n(T,I)}return N}var Qa=QA(!0),YA=QA(!1),hf=_s(null),ff=null,Ca=null,m_=null;function g_(){m_=Ca=ff=null}function y_(t){var e=hf.current;$e(hf),t._currentValue=e}function zg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fa(t,e){ff=t,m_=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(m_!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(ff===null)throw Error(q(308));Ca=t,ff.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var Ys=null;function __(t){Ys===null?Ys=[t]:Ys.push(t)}function JA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,__(e)):(n.next=i.next,i.next=n),e.interleaved=n,ei(t,r)}function ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Di=!1;function v_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ei(t,n)}return i=r.interleaved,i===null?(e.next=e,__(r)):(e.next=i.next,i.next=e),r.interleaved=e,ei(t,n)}function Sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,i_(t,n)}}function x0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pf(t,e,n,r){var i=t.updateQueue;Di=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,d=u=c=null,a=s;do{var p=a.lane,w=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var R=t,P=a;switch(p=e,w=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){f=R.call(w,f,p);break e}f=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,p=typeof R=="function"?R.call(w,f,p):R,p==null)break e;f=Xe({},f,p);break e;case 2:Di=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else w={eventTime:w,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=w,c=f):d=d.next=w,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);po|=o,t.lanes=o,t.memoizedState=f}}function P0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Hu={},br=_s(Hu),du=_s(Hu),hu=_s(Hu);function Js(t){if(t===Hu)throw Error(q(174));return t}function w_(t,e){switch(Me(hu,e),Me(du,t),Me(br,Hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tg(e,t)}$e(br),Me(br,e)}function Ya(){$e(br),$e(du),$e(hu)}function ZA(t){Js(hu.current);var e=Js(br.current),n=Tg(e,t.type);e!==n&&(Me(du,t),Me(br,n))}function I_(t){du.current===t&&($e(br),$e(du))}var Ye=_s(0);function mf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var km=[];function E_(){for(var t=0;t<km.length;t++)km[t]._workInProgressVersionPrimary=null;km.length=0}var Rh=li.ReactCurrentDispatcher,Cm=li.ReactCurrentBatchConfig,fo=0,Je=null,gt=null,Tt=null,gf=!1,Oc=!1,fu=0,$C=0;function jt(){throw Error(q(321))}function T_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function A_(t,e,n,r,i,s){if(fo=s,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rh.current=t===null||t.memoizedState===null?GC:WC,t=n(r,i),Oc){s=0;do{if(Oc=!1,fu=0,25<=s)throw Error(q(301));s+=1,Tt=gt=null,e.updateQueue=null,Rh.current=KC,t=n(r,i)}while(Oc)}if(Rh.current=yf,e=gt!==null&&gt.next!==null,fo=0,Tt=gt=Je=null,gf=!1,e)throw Error(q(300));return t}function b_(){var t=fu!==0;return fu=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Bn(){if(gt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=Tt===null?Je.memoizedState:Tt.next;if(e!==null)Tt=e,gt=t;else{if(t===null)throw Error(q(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function pu(t,e){return typeof e=="function"?e(t):e}function Nm(t){var e=Bn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var d=u.lane;if((fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Je.lanes|=d,po|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,or(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Je.lanes|=s,po|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dm(t){var e=Bn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);or(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function e1(){}function t1(t,e){var n=Je,r=Bn(),i=e(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,S_(i1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,mu(9,r1.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(q(349));fo&30||n1(n,e,i)}return i}function n1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function r1(t,e,n,r){e.value=n,e.getSnapshot=r,s1(e)&&o1(t)}function i1(t,e,n){return n(function(){s1(e)&&o1(t)})}function s1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch{return!0}}function o1(t){var e=ei(t,1);e!==null&&ir(e,t,1,-1)}function k0(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pu,lastRenderedState:t},e.queue=t,t=t.dispatch=HC.bind(null,Je,t),[e.memoizedState,t]}function mu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function a1(){return Bn().memoizedState}function xh(t,e,n,r){var i=gr();Je.flags|=t,i.memoizedState=mu(1|e,n,void 0,r===void 0?null:r)}function np(t,e,n,r){var i=Bn();r=r===void 0?null:r;var s=void 0;if(gt!==null){var o=gt.memoizedState;if(s=o.destroy,r!==null&&T_(r,o.deps)){i.memoizedState=mu(e,n,s,r);return}}Je.flags|=t,i.memoizedState=mu(1|e,n,s,r)}function C0(t,e){return xh(8390656,8,t,e)}function S_(t,e){return np(2048,8,t,e)}function l1(t,e){return np(4,2,t,e)}function c1(t,e){return np(4,4,t,e)}function u1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d1(t,e,n){return n=n!=null?n.concat([t]):null,np(4,4,u1.bind(null,e,t),n)}function R_(){}function h1(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function f1(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function p1(t,e,n){return fo&21?(or(n,e)||(n=vA(),Je.lanes|=n,po|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function zC(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Cm.transition;Cm.transition={};try{t(!1),e()}finally{Se=n,Cm.transition=r}}function m1(){return Bn().memoizedState}function qC(t,e,n){var r=ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},g1(t))y1(e,n);else if(n=JA(t,e,n,r),n!==null){var i=Yt();ir(n,t,r,i),_1(n,e,r)}}function HC(t,e,n){var r=ts(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(g1(t))y1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,or(a,o)){var c=e.interleaved;c===null?(i.next=i,__(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=JA(t,e,i,r),n!==null&&(i=Yt(),ir(n,t,r,i),_1(n,e,r))}}function g1(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function y1(t,e){Oc=gf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,i_(t,n)}}var yf={readContext:Un,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},GC={readContext:Un,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:C0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xh(4194308,4,u1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return xh(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qC.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:k0,useDebugValue:R_,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=k0(!1),e=t[0];return t=zC.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,i=gr();if(Ge){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),bt===null)throw Error(q(349));fo&30||n1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,C0(i1.bind(null,r,s,t),[t]),r.flags|=2048,mu(9,r1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=bt.identifierPrefix;if(Ge){var n=Hr,r=qr;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$C++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WC={readContext:Un,useCallback:h1,useContext:Un,useEffect:S_,useImperativeHandle:d1,useInsertionEffect:l1,useLayoutEffect:c1,useMemo:f1,useReducer:Nm,useRef:a1,useState:function(){return Nm(pu)},useDebugValue:R_,useDeferredValue:function(t){var e=Bn();return p1(e,gt.memoizedState,t)},useTransition:function(){var t=Nm(pu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:e1,useSyncExternalStore:t1,useId:m1,unstable_isNewReconciler:!1},KC={readContext:Un,useCallback:h1,useContext:Un,useEffect:S_,useImperativeHandle:d1,useInsertionEffect:l1,useLayoutEffect:c1,useMemo:f1,useReducer:Dm,useRef:a1,useState:function(){return Dm(pu)},useDebugValue:R_,useDeferredValue:function(t){var e=Bn();return gt===null?e.memoizedState=t:p1(e,gt.memoizedState,t)},useTransition:function(){var t=Dm(pu)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:e1,useSyncExternalStore:t1,useId:m1,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rp={isMounted:function(t){return(t=t._reactInternals)?ko(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ts(t),s=Qr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,i),e!==null&&(ir(e,t,i,r),Sh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ts(t),s=Qr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zi(t,s,i),e!==null&&(ir(e,t,i,r),Sh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=ts(t),i=Qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zi(t,i,r),e!==null&&(ir(e,t,r,n),Sh(e,t,r))}};function N0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!au(n,r)||!au(i,s):!0}function v1(t,e,n){var r=!1,i=cs,s=e.contextType;return typeof s=="object"&&s!==null?s=Un(s):(i=hn(e)?uo:Wt.current,r=e.contextTypes,s=(r=r!=null)?Wa(t,i):cs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function D0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rp.enqueueReplaceState(e,e.state,null)}function Hg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},v_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Un(s):(s=hn(e)?uo:Wt.current,i.context=Wa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rp.enqueueReplaceState(i,i.state,null),pf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ja(t,e){try{var n="",r=e;do n+=Ek(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Om(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QC=typeof WeakMap=="function"?WeakMap:Map;function w1(t,e,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vf||(vf=!0,ny=r),Gg(t,e)},n}function I1(t,e,n){n=Qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gg(t,e),typeof r!="function"&&(es===null?es=new Set([this]):es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function O0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cN.bind(null,t,e,n),e.then(t,t))}function L0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function V0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qr(-1,1),e.tag=2,Zi(n,e,1))),n.lanes|=1),t)}var YC=li.ReactCurrentOwner,an=!1;function Qt(t,e,n,r){e.child=t===null?YA(e,null,n,r):Qa(e,t.child,n,r)}function M0(t,e,n,r,i){n=n.render;var s=e.ref;return Fa(e,i),r=A_(t,e,n,r,s,i),n=b_(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Ge&&n&&h_(e),e.flags|=1,Qt(t,e,r,i),e.child)}function F0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!L_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,E1(t,e,s,r,i)):(t=Nh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:au,n(o,r)&&t.ref===e.ref)return ti(t,e,i)}return e.flags|=1,t=ns(s,r),t.ref=e.ref,t.return=e,e.child=t}function E1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(au(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,ti(t,e,i)}return Wg(t,e,n,r,i)}function T1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Da,vn),vn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(Da,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Me(Da,vn),vn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Me(Da,vn),vn|=r;return Qt(t,e,i,n),e.child}function A1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wg(t,e,n,r,i){var s=hn(n)?uo:Wt.current;return s=Wa(e,s),Fa(e,i),n=A_(t,e,n,r,s,i),r=b_(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Ge&&r&&h_(e),e.flags|=1,Qt(t,e,n,i),e.child)}function j0(t,e,n,r,i){if(hn(n)){var s=!0;cf(e)}else s=!1;if(Fa(e,i),e.stateNode===null)Ph(t,e),v1(e,n,r),Hg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=hn(n)?uo:Wt.current,u=Wa(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&D0(e,o,r,u),Di=!1;var p=e.memoizedState;o.state=p,pf(e,r,o,i),c=e.memoizedState,a!==r||p!==c||dn.current||Di?(typeof d=="function"&&(qg(e,n,d,r),c=e.memoizedState),(a=Di||N0(e,n,a,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Jn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=hn(n)?uo:Wt.current,c=Wa(e,c));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&D0(e,o,r,c),Di=!1,p=e.memoizedState,o.state=p,pf(e,r,o,i);var R=e.memoizedState;a!==f||p!==R||dn.current||Di?(typeof w=="function"&&(qg(e,n,w,r),R=e.memoizedState),(u=Di||N0(e,n,u,r,p,R,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Kg(t,e,n,r,s,i)}function Kg(t,e,n,r,i,s){A1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&A0(e,n,!1),ti(t,e,s);r=e.stateNode,YC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Qa(e,t.child,null,s),e.child=Qa(e,null,a,s)):Qt(t,e,a,s),e.memoizedState=r.state,i&&A0(e,n,!0),e.child}function b1(t){var e=t.stateNode;e.pendingContext?T0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&T0(t,e.context,!1),w_(t,e.containerInfo)}function U0(t,e,n,r,i){return Ka(),p_(i),e.flags|=256,Qt(t,e,n,r),e.child}var Qg={dehydrated:null,treeContext:null,retryLane:0};function Yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function S1(t,e,n){var r=e.pendingProps,i=Ye.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Me(Ye,i&1),t===null)return $g(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=op(o,r,0,null),t=ro(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yg(n),e.memoizedState=Qg,t):x_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return JC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ns(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ns(a,s):(s=ro(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qg,r}return s=t.child,t=s.sibling,r=ns(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function x_(t,e){return e=op({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rh(t,e,n,r){return r!==null&&p_(r),Qa(e,t.child,null,n),t=x_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Om(Error(q(422))),rh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=op({mode:"visible",children:r.children},i,0,null),s=ro(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Qa(e,t.child,null,o),e.child.memoizedState=Yg(o),e.memoizedState=Qg,s);if(!(e.mode&1))return rh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Om(s,r,void 0),rh(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ei(t,i),ir(r,t,i,-1))}return O_(),r=Om(Error(q(421))),rh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,En=Xi(i.nextSibling),An=e,Ge=!0,tr=null,t!==null&&(Vn[Mn++]=qr,Vn[Mn++]=Hr,Vn[Mn++]=ho,qr=t.id,Hr=t.overflow,ho=e),e=x_(e,r.children),e.flags|=4096,e)}function B0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zg(t.return,e,n)}function Lm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function R1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B0(t,n,e);else if(t.tag===19)B0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lm(e,!0,n,null,s);break;case"together":Lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ph(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),po|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XC(t,e,n){switch(e.tag){case 3:b1(e),Ka();break;case 5:ZA(e);break;case 1:hn(e.type)&&cf(e);break;case 4:w_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Me(hf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?S1(t,e,n):(Me(Ye,Ye.current&1),t=ti(t,e,n),t!==null?t.sibling:null);Me(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Me(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,T1(t,e,n)}return ti(t,e,n)}var x1,Jg,P1,k1;x1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jg=function(){};P1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Js(br.current);var s=null;switch(n){case"input":i=vg(t,i),r=vg(t,r),s=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),s=[];break;case"textarea":i=Eg(t,i),r=Eg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=af)}Ag(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(eu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(eu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&je("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};k1=function(t,e,n,r){n!==r&&(e.flags|=4)};function lc(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZC(t,e,n){var r=e.pendingProps;switch(f_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return hn(e.type)&&lf(),Ut(e),null;case 3:return r=e.stateNode,Ya(),$e(dn),$e(Wt),E_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(th(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(sy(tr),tr=null))),Jg(t,e),Ut(e),null;case 5:I_(e);var i=Js(hu.current);if(n=e.type,t!==null&&e.stateNode!=null)P1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Ut(e),null}if(t=Js(br.current),th(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[vr]=e,r[uu]=s,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(i=0;i<Ic.length;i++)je(Ic[i],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Yw(r,s),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},je("invalid",r);break;case"textarea":Xw(r,s),je("invalid",r)}Ag(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&eh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&eh(r.textContent,a,t),i=["children",""+a]):eu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Gd(r),Jw(r,s,!0);break;case"textarea":Gd(r),Zw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=af)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[vr]=e,t[uu]=r,x1(t,e,!1,!1),e.stateNode=t;e:{switch(o=bg(n,r),n){case"dialog":je("cancel",t),je("close",t),i=r;break;case"iframe":case"object":case"embed":je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ic.length;i++)je(Ic[i],t);i=r;break;case"source":je("error",t),i=r;break;case"img":case"image":case"link":je("error",t),je("load",t),i=r;break;case"details":je("toggle",t),i=r;break;case"input":Yw(t,r),i=vg(t,r),je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),je("invalid",t);break;case"textarea":Xw(t,r),i=Eg(t,r),je("invalid",t);break;default:i=r}Ag(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?aA(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&sA(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&tu(t,c):typeof c=="number"&&tu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&je("scroll",t):c!=null&&Xy(t,s,c,o))}switch(n){case"input":Gd(t),Jw(t,r,!1);break;case"textarea":Gd(t),Zw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ls(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=af)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)k1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Js(hu.current),Js(br.current),th(e)){if(r=e.stateNode,n=e.memoizedProps,r[vr]=e,(s=r.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:eh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vr]=e,e.stateNode=r}return Ut(e),null;case 13:if($e(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&En!==null&&e.mode&1&&!(e.flags&128))KA(),Ka(),e.flags|=98560,s=!1;else if(s=th(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[vr]=e}else Ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),s=!1}else tr!==null&&(sy(tr),tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?yt===0&&(yt=3):O_())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Ya(),Jg(t,e),t===null&&lu(e.stateNode.containerInfo),Ut(e),null;case 10:return y_(e.type._context),Ut(e),null;case 17:return hn(e.type)&&lf(),Ut(e),null;case 19:if($e(Ye),s=e.memoizedState,s===null)return Ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)lc(s,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mf(t),o!==null){for(e.flags|=128,lc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(Ye,Ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&lt()>Xa&&(e.flags|=128,r=!0,lc(s,!1),e.lanes=4194304)}else{if(!r)if(t=mf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ge)return Ut(e),null}else 2*lt()-s.renderingStartTime>Xa&&n!==1073741824&&(e.flags|=128,r=!0,lc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lt(),e.sibling=null,n=Ye.current,Me(Ye,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return D_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function eN(t,e){switch(f_(e),e.tag){case 1:return hn(e.type)&&lf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ya(),$e(dn),$e(Wt),E_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return I_(e),null;case 13:if($e(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ye),null;case 4:return Ya(),null;case 10:return y_(e.type._context),null;case 22:case 23:return D_(),null;case 24:return null;default:return null}}var ih=!1,zt=!1,tN=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Na(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function Xg(t,e,n){try{n()}catch(r){nt(t,e,r)}}var $0=!1;function nN(t,e){if(Lg=rf,t=LA(),d_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var w;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(c=o),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vg={focusedElem:t,selectionRange:n},rf=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,N=R.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?P:Jn(e.type,P),N);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(M){nt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return R=$0,$0=!1,R}function Lc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xg(e,n,s)}i=i.next}while(i!==r)}}function ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C1(t){var e=t.alternate;e!==null&&(t.alternate=null,C1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vr],delete e[uu],delete e[jg],delete e[FC],delete e[jC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N1(t){return t.tag===5||t.tag===3||t.tag===4}function z0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ey(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=af));else if(r!==4&&(t=t.child,t!==null))for(ey(t,e,n),t=t.sibling;t!==null;)ey(t,e,n),t=t.sibling}function ty(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ty(t,e,n),t=t.sibling;t!==null;)ty(t,e,n),t=t.sibling}var Ct=null,Zn=!1;function bi(t,e,n){for(n=n.child;n!==null;)D1(t,e,n),n=n.sibling}function D1(t,e,n){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Yf,n)}catch{}switch(n.tag){case 5:zt||Na(n,e);case 6:var r=Ct,i=Zn;Ct=null,bi(t,e,n),Ct=r,Zn=i,Ct!==null&&(Zn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Zn?(t=Ct,n=n.stateNode,t.nodeType===8?xm(t.parentNode,n):t.nodeType===1&&xm(t,n),su(t)):xm(Ct,n.stateNode));break;case 4:r=Ct,i=Zn,Ct=n.stateNode.containerInfo,Zn=!0,bi(t,e,n),Ct=r,Zn=i;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xg(n,e,o),i=i.next}while(i!==r)}bi(t,e,n);break;case 1:if(!zt&&(Na(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nt(n,e,a)}bi(t,e,n);break;case 21:bi(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,bi(t,e,n),zt=r):bi(t,e,n);break;default:bi(t,e,n)}}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tN),e.forEach(function(r){var i=dN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ct=a.stateNode,Zn=!1;break e;case 3:Ct=a.stateNode.containerInfo,Zn=!0;break e;case 4:Ct=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(Ct===null)throw Error(q(160));D1(s,o,i),Ct=null,Zn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){nt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O1(e,t),e=e.sibling}function O1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),mr(t),r&4){try{Lc(3,t,t.return),ip(3,t)}catch(P){nt(t,t.return,P)}try{Lc(5,t,t.return)}catch(P){nt(t,t.return,P)}}break;case 1:Yn(e,t),mr(t),r&512&&n!==null&&Na(n,n.return);break;case 5:if(Yn(e,t),mr(t),r&512&&n!==null&&Na(n,n.return),t.flags&32){var i=t.stateNode;try{tu(i,"")}catch(P){nt(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&nA(i,s),bg(a,o);var u=bg(a,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?aA(i,f):d==="dangerouslySetInnerHTML"?sA(i,f):d==="children"?tu(i,f):Xy(i,d,f,u)}switch(a){case"input":wg(i,s);break;case"textarea":rA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Oa(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?Oa(i,!!s.multiple,s.defaultValue,!0):Oa(i,!!s.multiple,s.multiple?[]:"",!1))}i[uu]=s}catch(P){nt(t,t.return,P)}}break;case 6:if(Yn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){nt(t,t.return,P)}}break;case 3:if(Yn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{su(e.containerInfo)}catch(P){nt(t,t.return,P)}break;case 4:Yn(e,t),mr(t);break;case 13:Yn(e,t),mr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(C_=lt())),r&4&&q0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(u=zt)||d,Yn(e,t),zt=u):Yn(e,t),mr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ee=t,d=t.child;d!==null;){for(f=ee=d;ee!==null;){switch(p=ee,w=p.child,p.tag){case 0:case 11:case 14:case 15:Lc(4,p,p.return);break;case 1:Na(p,p.return);var R=p.stateNode;if(typeof R.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){nt(r,n,P)}}break;case 5:Na(p,p.return);break;case 22:if(p.memoizedState!==null){G0(f);continue}}w!==null?(w.return=p,ee=w):G0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=oA("display",o))}catch(P){nt(t,t.return,P)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(P){nt(t,t.return,P)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yn(e,t),mr(t),r&4&&q0(t);break;case 21:break;default:Yn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N1(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(tu(i,""),r.flags&=-33);var s=z0(t);ty(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=z0(t);ey(t,a,o);break;default:throw Error(q(161))}}catch(c){nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rN(t,e,n){ee=t,L1(t)}function L1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ih;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||zt;a=ih;var u=zt;if(ih=o,(zt=c)&&!u)for(ee=i;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?W0(i):c!==null?(c.return=o,ee=c):W0(i);for(;s!==null;)ee=s,L1(s),s=s.sibling;ee=i,ih=a,zt=u}H0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):H0(t)}}function H0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&su(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}zt||e.flags&512&&Zg(e)}catch(p){nt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function G0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function W0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ip(4,e)}catch(c){nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){nt(e,i,c)}}var s=e.return;try{Zg(e)}catch(c){nt(e,s,c)}break;case 5:var o=e.return;try{Zg(e)}catch(c){nt(e,o,c)}}}catch(c){nt(e,e.return,c)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var iN=Math.ceil,_f=li.ReactCurrentDispatcher,P_=li.ReactCurrentOwner,jn=li.ReactCurrentBatchConfig,ve=0,bt=null,pt=null,Ot=0,vn=0,Da=_s(0),yt=0,gu=null,po=0,sp=0,k_=0,Vc=null,on=null,C_=0,Xa=1/0,$r=null,vf=!1,ny=null,es=null,sh=!1,Hi=null,wf=0,Mc=0,ry=null,kh=-1,Ch=0;function Yt(){return ve&6?lt():kh!==-1?kh:kh=lt()}function ts(t){return t.mode&1?ve&2&&Ot!==0?Ot&-Ot:BC.transition!==null?(Ch===0&&(Ch=vA()),Ch):(t=Se,t!==0||(t=window.event,t=t===void 0?16:SA(t.type)),t):1}function ir(t,e,n,r){if(50<Mc)throw Mc=0,ry=null,Error(q(185));$u(t,n,r),(!(ve&2)||t!==bt)&&(t===bt&&(!(ve&2)&&(sp|=n),yt===4&&Vi(t,Ot)),fn(t,r),n===1&&ve===0&&!(e.mode&1)&&(Xa=lt()+500,tp&&vs()))}function fn(t,e){var n=t.callbackNode;Bk(t,e);var r=nf(t,t===bt?Ot:0);if(r===0)n!==null&&n0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&n0(n),e===1)t.tag===0?UC(K0.bind(null,t)):HA(K0.bind(null,t)),VC(function(){!(ve&6)&&vs()}),n=null;else{switch(wA(r)){case 1:n=r_;break;case 4:n=yA;break;case 16:n=tf;break;case 536870912:n=_A;break;default:n=tf}n=z1(n,V1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function V1(t,e){if(kh=-1,Ch=0,ve&6)throw Error(q(327));var n=t.callbackNode;if(ja()&&t.callbackNode!==n)return null;var r=nf(t,t===bt?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=If(t,r);else{e=r;var i=ve;ve|=2;var s=F1();(bt!==t||Ot!==e)&&($r=null,Xa=lt()+500,no(t,e));do try{aN();break}catch(a){M1(t,a)}while(1);g_(),_f.current=s,ve=i,pt!==null?e=0:(bt=null,Ot=0,e=yt)}if(e!==0){if(e===2&&(i=kg(t),i!==0&&(r=i,e=iy(t,i))),e===1)throw n=gu,no(t,0),Vi(t,r),fn(t,lt()),n;if(e===6)Vi(t,r);else{if(i=t.current.alternate,!(r&30)&&!sN(i)&&(e=If(t,r),e===2&&(s=kg(t),s!==0&&(r=s,e=iy(t,s))),e===1))throw n=gu,no(t,0),Vi(t,r),fn(t,lt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:js(t,on,$r);break;case 3:if(Vi(t,r),(r&130023424)===r&&(e=C_+500-lt(),10<e)){if(nf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fg(js.bind(null,t,on,$r),e);break}js(t,on,$r);break;case 4:if(Vi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iN(r/1960))-r,10<r){t.timeoutHandle=Fg(js.bind(null,t,on,$r),r);break}js(t,on,$r);break;case 5:js(t,on,$r);break;default:throw Error(q(329))}}}return fn(t,lt()),t.callbackNode===n?V1.bind(null,t):null}function iy(t,e){var n=Vc;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=If(t,e),t!==2&&(e=on,on=n,e!==null&&sy(e)),t}function sy(t){on===null?on=t:on.push.apply(on,t)}function sN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~k_,e&=~sp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function K0(t){if(ve&6)throw Error(q(327));ja();var e=nf(t,0);if(!(e&1))return fn(t,lt()),null;var n=If(t,e);if(t.tag!==0&&n===2){var r=kg(t);r!==0&&(e=r,n=iy(t,r))}if(n===1)throw n=gu,no(t,0),Vi(t,e),fn(t,lt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,js(t,on,$r),fn(t,lt()),null}function N_(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Xa=lt()+500,tp&&vs())}}function mo(t){Hi!==null&&Hi.tag===0&&!(ve&6)&&ja();var e=ve;ve|=1;var n=jn.transition,r=Se;try{if(jn.transition=null,Se=1,t)return t()}finally{Se=r,jn.transition=n,ve=e,!(ve&6)&&vs()}}function D_(){vn=Da.current,$e(Da)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LC(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(f_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lf();break;case 3:Ya(),$e(dn),$e(Wt),E_();break;case 5:I_(r);break;case 4:Ya();break;case 13:$e(Ye);break;case 19:$e(Ye);break;case 10:y_(r.type._context);break;case 22:case 23:D_()}n=n.return}if(bt=t,pt=t=ns(t.current,null),Ot=vn=e,yt=0,gu=null,k_=sp=po=0,on=Vc=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ys=null}return t}function M1(t,e){do{var n=pt;try{if(g_(),Rh.current=yf,gf){for(var r=Je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gf=!1}if(fo=0,Tt=gt=Je=null,Oc=!1,fu=0,P_.current=null,n===null||n.return===null){yt=1,gu=e,pt=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Ot,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=L0(o);if(w!==null){w.flags&=-257,V0(w,o,a,s,e),w.mode&1&&O0(s,u,e),e=w,c=u;var R=e.updateQueue;if(R===null){var P=new Set;P.add(c),e.updateQueue=P}else R.add(c);break e}else{if(!(e&1)){O0(s,u,e),O_();break e}c=Error(q(426))}}else if(Ge&&a.mode&1){var N=L0(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),V0(N,o,a,s,e),p_(Ja(c,a));break e}}s=c=Ja(c,a),yt!==4&&(yt=2),Vc===null?Vc=[s]:Vc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=w1(s,c,e);x0(s,T);break e;case 1:a=c;var I=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(es===null||!es.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=I1(s,a,e);x0(s,M);break e}}s=s.return}while(s!==null)}U1(n)}catch($){e=$,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(1)}function F1(){var t=_f.current;return _f.current=yf,t===null?yf:t}function O_(){(yt===0||yt===3||yt===2)&&(yt=4),bt===null||!(po&268435455)&&!(sp&268435455)||Vi(bt,Ot)}function If(t,e){var n=ve;ve|=2;var r=F1();(bt!==t||Ot!==e)&&($r=null,no(t,e));do try{oN();break}catch(i){M1(t,i)}while(1);if(g_(),ve=n,_f.current=r,pt!==null)throw Error(q(261));return bt=null,Ot=0,yt}function oN(){for(;pt!==null;)j1(pt)}function aN(){for(;pt!==null&&!Nk();)j1(pt)}function j1(t){var e=$1(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?U1(t):pt=e,P_.current=null}function U1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eN(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,pt=null;return}}else if(n=ZC(n,e,vn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);yt===0&&(yt=5)}function js(t,e,n){var r=Se,i=jn.transition;try{jn.transition=null,Se=1,lN(t,e,n,r)}finally{jn.transition=i,Se=r}return null}function lN(t,e,n,r){do ja();while(Hi!==null);if(ve&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($k(t,s),t===bt&&(pt=bt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sh||(sh=!0,z1(tf,function(){return ja(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=jn.transition,jn.transition=null;var o=Se;Se=1;var a=ve;ve|=4,P_.current=null,nN(t,n),O1(n,t),xC(Vg),rf=!!Lg,Vg=Lg=null,t.current=n,rN(n),Dk(),ve=a,Se=o,jn.transition=s}else t.current=n;if(sh&&(sh=!1,Hi=t,wf=i),s=t.pendingLanes,s===0&&(es=null),Vk(n.stateNode),fn(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vf)throw vf=!1,t=ny,ny=null,t;return wf&1&&t.tag!==0&&ja(),s=t.pendingLanes,s&1?t===ry?Mc++:(Mc=0,ry=t):Mc=0,vs(),null}function ja(){if(Hi!==null){var t=wA(wf),e=jn.transition,n=Se;try{if(jn.transition=null,Se=16>t?16:t,Hi===null)var r=!1;else{if(t=Hi,Hi=null,wf=0,ve&6)throw Error(q(331));var i=ve;for(ve|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Lc(8,d,s)}var f=d.child;if(f!==null)f.return=d,ee=f;else for(;ee!==null;){d=ee;var p=d.sibling,w=d.return;if(C1(d),d===u){ee=null;break}if(p!==null){p.return=w,ee=p;break}ee=w}}}var R=s.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lc(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,ee=T;break e}ee=s.return}}var I=t.current;for(ee=I;ee!==null;){o=ee;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ee=b;else e:for(o=I;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ip(9,a)}}catch($){nt(a,a.return,$)}if(a===o){ee=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ee=M;break e}ee=a.return}}if(ve=i,vs(),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Yf,t)}catch{}r=!0}return r}finally{Se=n,jn.transition=e}}return!1}function Q0(t,e,n){e=Ja(n,e),e=w1(t,e,1),t=Zi(t,e,1),e=Yt(),t!==null&&($u(t,1,e),fn(t,e))}function nt(t,e,n){if(t.tag===3)Q0(t,t,n);else for(;e!==null;){if(e.tag===3){Q0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(es===null||!es.has(r))){t=Ja(n,t),t=I1(e,t,1),e=Zi(e,t,1),t=Yt(),e!==null&&($u(e,1,t),fn(e,t));break}}e=e.return}}function cN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Ot&n)===n&&(yt===4||yt===3&&(Ot&130023424)===Ot&&500>lt()-C_?no(t,0):k_|=n),fn(t,e)}function B1(t,e){e===0&&(t.mode&1?(e=Qd,Qd<<=1,!(Qd&130023424)&&(Qd=4194304)):e=1);var n=Yt();t=ei(t,e),t!==null&&($u(t,e,n),fn(t,n))}function uN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B1(t,n)}function dN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),B1(t,n)}var $1;$1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,XC(t,e,n);an=!!(t.flags&131072)}else an=!1,Ge&&e.flags&1048576&&GA(e,df,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ph(t,e),t=e.pendingProps;var i=Wa(e,Wt.current);Fa(e,n),i=A_(null,e,r,t,i,n);var s=b_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(s=!0,cf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,v_(e),i.updater=rp,e.stateNode=i,i._reactInternals=e,Hg(e,r,t,n),e=Kg(null,e,r,!0,s,n)):(e.tag=0,Ge&&s&&h_(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ph(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=fN(r),t=Jn(r,t),i){case 0:e=Wg(null,e,r,t,n);break e;case 1:e=j0(null,e,r,t,n);break e;case 11:e=M0(null,e,r,t,n);break e;case 14:e=F0(null,e,r,Jn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),Wg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),j0(t,e,r,i,n);case 3:e:{if(b1(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XA(t,e),pf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ja(Error(q(423)),e),e=U0(t,e,r,n,i);break e}else if(r!==i){i=Ja(Error(q(424)),e),e=U0(t,e,r,n,i);break e}else for(En=Xi(e.stateNode.containerInfo.firstChild),An=e,Ge=!0,tr=null,n=YA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ka(),r===i){e=ti(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return ZA(e),t===null&&$g(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mg(r,i)?o=null:s!==null&&Mg(r,s)&&(e.flags|=32),A1(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&$g(e),null;case 13:return S1(t,e,n);case 4:return w_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qa(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),M0(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Me(hf,r._currentValue),r._currentValue=o,s!==null)if(or(s.value,o)){if(s.children===i.children&&!dn.current){e=ti(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Qr(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),zg(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fa(e,n),i=Un(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Jn(r,e.pendingProps),i=Jn(r.type,i),F0(t,e,r,i,n);case 15:return E1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jn(r,i),Ph(t,e),e.tag=1,hn(r)?(t=!0,cf(e)):t=!1,Fa(e,n),v1(e,r,i),Hg(e,r,i,n),Kg(null,e,r,!0,t,n);case 19:return R1(t,e,n);case 22:return T1(t,e,n)}throw Error(q(156,e.tag))};function z1(t,e){return gA(t,e)}function hN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new hN(t,e,n,r)}function L_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fN(t){if(typeof t=="function")return L_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===e_)return 11;if(t===t_)return 14}return 2}function ns(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")L_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ta:return ro(n.children,i,s,e);case Zy:o=8,i|=8;break;case mg:return t=Fn(12,n,e,i|2),t.elementType=mg,t.lanes=s,t;case gg:return t=Fn(13,n,e,i),t.elementType=gg,t.lanes=s,t;case yg:return t=Fn(19,n,e,i),t.elementType=yg,t.lanes=s,t;case ZT:return op(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JT:o=10;break e;case XT:o=9;break e;case e_:o=11;break e;case t_:o=14;break e;case Ni:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ro(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function op(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=ZT,t.lanes=n,t.stateNode={isHidden:!1},t}function Vm(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function Mm(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ym(0),this.expirationTimes=ym(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ym(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function V_(t,e,n,r,i,s,o,a,c){return t=new pN(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},v_(s),t}function mN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function q1(t){if(!t)return cs;t=t._reactInternals;e:{if(ko(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(hn(n))return qA(t,n,e)}return e}function H1(t,e,n,r,i,s,o,a,c){return t=V_(n,r,!0,t,i,s,o,a,c),t.context=q1(null),n=t.current,r=Yt(),i=ts(n),s=Qr(r,i),s.callback=e??null,Zi(n,s,i),t.current.lanes=i,$u(t,i,r),fn(t,r),t}function ap(t,e,n,r){var i=e.current,s=Yt(),o=ts(i);return n=q1(n),e.context===null?e.context=n:e.pendingContext=n,e=Qr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zi(i,e,o),t!==null&&(ir(t,i,o,s),Sh(t,i,o)),o}function Ef(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function M_(t,e){Y0(t,e),(t=t.alternate)&&Y0(t,e)}function gN(){return null}var G1=typeof reportError=="function"?reportError:function(t){console.error(t)};function F_(t){this._internalRoot=t}lp.prototype.render=F_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ap(t,e,null,null)};lp.prototype.unmount=F_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mo(function(){ap(null,t,null,null)}),e[Zr]=null}};function lp(t){this._internalRoot=t}lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=TA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Li.length&&e!==0&&e<Li[n].priority;n++);Li.splice(n,0,t),n===0&&bA(t)}};function j_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function J0(){}function yN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ef(o);s.call(u)}}var o=H1(e,r,t,0,null,!1,!1,"",J0);return t._reactRootContainer=o,t[Zr]=o.current,lu(t.nodeType===8?t.parentNode:t),mo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ef(c);a.call(u)}}var c=V_(t,0,!1,null,null,!1,!1,"",J0);return t._reactRootContainer=c,t[Zr]=c.current,lu(t.nodeType===8?t.parentNode:t),mo(function(){ap(e,c,n,r)}),c}function up(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Ef(o);a.call(c)}}ap(e,o,t,i)}else o=yN(n,e,t,i,r);return Ef(o)}IA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wc(e.pendingLanes);n!==0&&(i_(e,n|1),fn(e,lt()),!(ve&6)&&(Xa=lt()+500,vs()))}break;case 13:mo(function(){var r=ei(t,1);if(r!==null){var i=Yt();ir(r,t,1,i)}}),M_(t,1)}};s_=function(t){if(t.tag===13){var e=ei(t,134217728);if(e!==null){var n=Yt();ir(e,t,134217728,n)}M_(t,134217728)}};EA=function(t){if(t.tag===13){var e=ts(t),n=ei(t,e);if(n!==null){var r=Yt();ir(n,t,e,r)}M_(t,e)}};TA=function(){return Se};AA=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Rg=function(t,e,n){switch(e){case"input":if(wg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ep(r);if(!i)throw Error(q(90));tA(r),wg(r,i)}}}break;case"textarea":rA(t,n);break;case"select":e=n.value,e!=null&&Oa(t,!!n.multiple,e,!1)}};uA=N_;dA=mo;var _N={usingClientEntryPoint:!1,Events:[qu,Ra,ep,lA,cA,N_]},cc={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vN={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pA(t),t===null?null:t.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||gN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{Yf=oh.inject(vN),Ar=oh}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_N;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j_(e))throw Error(q(200));return mN(t,e,null,n)};Cn.createRoot=function(t,e){if(!j_(t))throw Error(q(299));var n=!1,r="",i=G1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=V_(t,1,!1,null,null,n,!1,r,i),t[Zr]=e.current,lu(t.nodeType===8?t.parentNode:t),new F_(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=pA(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return mo(t)};Cn.hydrate=function(t,e,n){if(!cp(e))throw Error(q(200));return up(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!j_(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=G1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H1(e,null,t,1,n??null,i,!1,s,o),t[Zr]=e.current,lu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new lp(e)};Cn.render=function(t,e,n){if(!cp(e))throw Error(q(200));return up(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!cp(t))throw Error(q(40));return t._reactRootContainer?(mo(function(){up(null,null,t,!1,function(){t._reactRootContainer=null,t[Zr]=null})}),!0):!1};Cn.unstable_batchedUpdates=N_;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cp(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return up(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function W1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W1)}catch(t){console.error(t)}}W1(),WT.exports=Cn;var wN=WT.exports,X0=wN;fg.createRoot=X0.createRoot,fg.hydrateRoot=X0.hydrateRoot;const IN="modulepreload",EN=function(t){return"/"+t},Z0={},Si=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=EN(s),s in Z0)return;Z0[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":IN,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var TN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bN=(t,e)=>{const n=ne.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...c},u)=>ne.createElement("svg",{ref:u,...TN,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${AN(t)}`,...c},[...e.map(([d,f])=>ne.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var st=bN;const SN=st("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),RN=st("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),eI=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),xN=st("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),Ri=st("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),PN=st("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ah=st("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),kN=st("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),tI=st("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),nI=st("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),rI=st("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),iI=st("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),CN=st("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),nn=st("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ca=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Vs=st("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),rn=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),NN=st("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),uc=st("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),sI=st("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),oI=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Fm=st("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),DN=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ON=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Q1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,w=u&63;c||(w=64,o||(p=64)),r.push(n[d],n[f],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(K1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ON(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new LN;const p=s<<2|a>>4;if(r.push(p),u!==64){const w=a<<4&240|u>>2;if(r.push(w),f!==64){const R=u<<6&192|f;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class LN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VN=function(t){const e=K1(t);return Q1.encodeByteArray(e,!0)},Tf=function(t){return VN(t).replace(/\./g,"")},Y1=function(t){try{return Q1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=()=>J1().__FIREBASE_DEFAULTS__,FN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Y1(t[1]);return e&&JSON.parse(e)},dp=()=>{try{return DN()||MN()||FN()||jN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X1=t=>{var e,n;return(n=(e=dp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Z1=t=>{const e=X1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eb=()=>{var t;return(t=dp())==null?void 0:t.config},tb=t=>{var e;return(e=dp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Tf(JSON.stringify(n)),Tf(JSON.stringify(o)),a].join(".")}const Fc={};function BN(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?t.emulator.push(e):t.prod.push(e);return t}function $N(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aI=!1;function U_(t,e){if(typeof window>"u"||typeof document>"u"||!ci(window.location.host)||Fc[t]===e||Fc[t]||aI)return;Fc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=BN().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,w){p.setAttribute("width","24"),p.setAttribute("id",w),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{aI=!0,o()},p}function d(p,w){p.setAttribute("id",w),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=$N(r),w=n("text"),R=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),N=document.getElementById(P)||document.createElement("a"),T=n("preprendIcon"),I=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;a(b),d(N,P);const M=u();c(I,T),b.append(I,R,N,M),document.body.appendChild(b)}s?(R.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function rb(){var e;const t=(e=dp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ib(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GN(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sb(){return!rb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ob(){return!rb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function B_(){try{return typeof indexedDB=="object"}catch{return!1}}function ab(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function WN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KN,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Dn(i,a,r)}}function QN(t,e){return t.replace(YN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const YN=/\{\$([^}]+)}/g;function JN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $n(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lI(s)&&lI(o)){if(!$n(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ec(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Tc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function XN(t,e){const n=new ZN(t,e);return n.subscribe.bind(n)}class ZN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");e2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jm),i.error===void 0&&(i.error=jm),i.complete===void 0&&(i.complete=jm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1e3,n2=2,r2=4*60*60*1e3,i2=.5;function cI(t,e=t2,n=n2){const r=e*Math.pow(n,t),i=Math.round(i2*r*(Math.random()-.5)*2);return Math.min(r2,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class Pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a2(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o2(t){return t===Us?void 0:t}function a2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new s2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const c2={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},u2=pe.INFO,d2={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},h2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=d2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gu{constructor(e){this.name=e,this._logLevel=u2,this._logHandler=h2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const f2=(t,e)=>e.some(n=>t instanceof n);let uI,dI;function p2(){return uI||(uI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m2(){return dI||(dI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,oy=new WeakMap,cb=new WeakMap,Um=new WeakMap,$_=new WeakMap;function g2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lb.set(n,t)}).catch(()=>{}),$_.set(e,t),e}function y2(t){if(oy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});oy.set(t,e)}let ay={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return oy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _2(t){ay=t(ay)}function v2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bm(this),e,...n);return cb.set(r,e.sort?e.sort():[e]),rs(r)}:m2().includes(t)?function(...e){return t.apply(Bm(this),e),rs(lb.get(this))}:function(...e){return rs(t.apply(Bm(this),e))}}function w2(t){return typeof t=="function"?v2(t):(t instanceof IDBTransaction&&y2(t),f2(t,p2())?new Proxy(t,ay):t)}function rs(t){if(t instanceof IDBRequest)return g2(t);if(Um.has(t))return Um.get(t);const e=w2(t);return e!==t&&(Um.set(t,e),$_.set(e,t)),e}const Bm=t=>$_.get(t);function ub(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=rs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(rs(o.result),c.oldVersion,c.newVersion,rs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const I2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],$m=new Map;function hI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($m.get(e))return $m.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=E2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||I2.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return $m.set(e,s),s}_2(t=>({...t,get:(e,n,r)=>hI(e,n)||t.get(e,n,r),has:(e,n)=>!!hI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ly="@firebase/app",fI="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new Gu("@firebase/app"),b2="@firebase/app-compat",S2="@firebase/analytics-compat",R2="@firebase/analytics",x2="@firebase/app-check-compat",P2="@firebase/app-check",k2="@firebase/auth",C2="@firebase/auth-compat",N2="@firebase/database",D2="@firebase/data-connect",O2="@firebase/database-compat",L2="@firebase/functions",V2="@firebase/functions-compat",M2="@firebase/installations",F2="@firebase/installations-compat",j2="@firebase/messaging",U2="@firebase/messaging-compat",B2="@firebase/performance",$2="@firebase/performance-compat",z2="@firebase/remote-config",q2="@firebase/remote-config-compat",H2="@firebase/storage",G2="@firebase/storage-compat",W2="@firebase/firestore",K2="@firebase/ai",Q2="@firebase/firestore-compat",Y2="firebase",J2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="[DEFAULT]",X2={[ly]:"fire-core",[b2]:"fire-core-compat",[R2]:"fire-analytics",[S2]:"fire-analytics-compat",[P2]:"fire-app-check",[x2]:"fire-app-check-compat",[k2]:"fire-auth",[C2]:"fire-auth-compat",[N2]:"fire-rtdb",[D2]:"fire-data-connect",[O2]:"fire-rtdb-compat",[L2]:"fire-fn",[V2]:"fire-fn-compat",[M2]:"fire-iid",[F2]:"fire-iid-compat",[j2]:"fire-fcm",[U2]:"fire-fcm-compat",[B2]:"fire-perf",[$2]:"fire-perf-compat",[z2]:"fire-rc",[q2]:"fire-rc-compat",[H2]:"fire-gcs",[G2]:"fire-gcs-compat",[W2]:"fire-fst",[Q2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[Y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Map,Z2=new Map,cy=new Map;function pI(t,e){try{t.container.addComponent(e)}catch(n){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zn(t){const e=t.name;if(cy.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,t);for(const n of bf.values())pI(n,t);for(const n of Z2.values())pI(n,t);return!0}function ar(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function eD(t,e,n=Af){ar(t,e).clearInstance(n)}function Be(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new Co("app","Firebase",tD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=J2;function db(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Af,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw is.create("bad-app-name",{appName:String(i)});if(n||(n=eb()),!n)throw is.create("no-options");const s=bf.get(i);if(s){if($n(n,s.options)&&$n(r,s.config))return s;throw is.create("duplicate-app",{appName:i})}const o=new l2(i);for(const c of cy.values())o.addComponent(c);const a=new nD(n,r,o);return bf.set(i,a),a}function Wu(t=Af){const e=bf.get(t);if(!e&&t===Af&&eb())return db();if(!e)throw is.create("no-app",{appName:t});return e}function qt(t,e,n){let r=X2[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(o.join(" "));return}zn(new Pn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="firebase-heartbeat-database",iD=1,yu="firebase-heartbeat-store";let zm=null;function hb(){return zm||(zm=ub(rD,iD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),zm}async function sD(t){try{const n=(await hb()).transaction(yu),r=await n.objectStore(yu).get(fb(t));return await n.done,r}catch(e){if(e instanceof Dn)ni.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ni.warn(n.message)}}}async function mI(t,e){try{const r=(await hb()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,fb(t)),await r.done}catch(n){if(n instanceof Dn)ni.warn(n.message);else{const r=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ni.warn(r.message)}}}function fb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=1024,aD=30;class lD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>aD){const o=dD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ni.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gI(),{heartbeatsToSend:r,unsentEntries:i}=cD(this._heartbeatsCache.heartbeats),s=Tf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ni.warn(n),""}}}function gI(){return new Date().toISOString().substring(0,10)}function cD(t,e=oD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B_()?ab().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yI(t){return Tf(JSON.stringify({version:2,heartbeats:t})).length}function dD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(t){zn(new Pn("platform-logger",e=>new T2(e),"PRIVATE")),zn(new Pn("heartbeat",e=>new lD(e),"PRIVATE")),qt(ly,fI,t),qt(ly,fI,"esm2020"),qt("fire-js","")}hD("");var fD="firebase",pD="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt(fD,pD,"app");const pb="@firebase/installations",z_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=1e4,gb=`w:${z_}`,yb="FIS_v2",mD="https://firebaseinstallations.googleapis.com/v1",gD=60*60*1e3,yD="installations",_D="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},go=new Co(yD,_D,vD);function _b(t){return t instanceof Dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb({projectId:t}){return`${mD}/projects/${t}/installations`}function wb(t){return{token:t.token,requestStatus:2,expiresIn:ID(t.expiresIn),creationTime:Date.now()}}async function Ib(t,e){const r=(await e.json()).error;return go.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Eb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wD(t,{refreshToken:e}){const n=Eb(t);return n.append("Authorization",ED(e)),n}async function Tb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ID(t){return Number(t.replace("s","000"))}function ED(t){return`${yb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vb(t),i=Eb(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:yb,appId:t.appId,sdkVersion:gb},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Tb(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:wb(u.authToken)}}else throw await Ib("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=/^[cdef][\w-]{21}$/,uy="";function SD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=RD(t);return bD.test(n)?n:uy}catch{return uy}}function RD(t){return AD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Sb(t,e){const n=fp(t);Rb(n,e),xD(n,e)}function Rb(t,e){const n=bb.get(t);if(n)for(const r of n)r(e)}function xD(t,e){const n=PD();n&&n.postMessage({key:t,fid:e}),kD()}let Xs=null;function PD(){return!Xs&&"BroadcastChannel"in self&&(Xs=new BroadcastChannel("[Firebase] FID Change"),Xs.onmessage=t=>{Rb(t.data.key,t.data.fid)}),Xs}function kD(){bb.size===0&&Xs&&(Xs.close(),Xs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="firebase-installations-database",ND=1,yo="firebase-installations-store";let qm=null;function q_(){return qm||(qm=ub(CD,ND,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yo)}}})),qm}async function Sf(t,e){const n=fp(t),i=(await q_()).transaction(yo,"readwrite"),s=i.objectStore(yo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Sb(t,e.fid),e}async function xb(t){const e=fp(t),r=(await q_()).transaction(yo,"readwrite");await r.objectStore(yo).delete(e),await r.done}async function pp(t,e){const n=fp(t),i=(await q_()).transaction(yo,"readwrite"),s=i.objectStore(yo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&Sb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H_(t){let e;const n=await pp(t.appConfig,r=>{const i=DD(r),s=OD(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===uy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function DD(t){const e=t||{fid:SD(),registrationStatus:0};return Pb(e)}function OD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(go.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=LD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:VD(t)}:{installationEntry:e}}async function LD(t,e){try{const n=await TD(t,e);return Sf(t.appConfig,n)}catch(n){throw _b(n)&&n.customData.serverCode===409?await xb(t.appConfig):await Sf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function VD(t){let e=await _I(t.appConfig);for(;e.registrationStatus===1;)await Ab(100),e=await _I(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await H_(t);return r||n}return e}function _I(t){return pp(t,e=>{if(!e)throw go.create("installation-not-found");return Pb(e)})}function Pb(t){return MD(t)?{fid:t.fid,registrationStatus:0}:t}function MD(t){return t.registrationStatus===1&&t.registrationTime+mb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD({appConfig:t,heartbeatServiceProvider:e},n){const r=jD(t,n),i=wD(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:gb,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Tb(()=>fetch(r,a));if(c.ok){const u=await c.json();return wb(u)}else throw await Ib("Generate Auth Token",c)}function jD(t,{fid:e}){return`${vb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G_(t,e=!1){let n;const r=await pp(t.appConfig,s=>{if(!kb(s))throw go.create("not-registered");const o=s.authToken;if(!e&&$D(o))return s;if(o.requestStatus===1)return n=UD(t,e),s;{if(!navigator.onLine)throw go.create("app-offline");const a=qD(s);return n=BD(t,a),a}});return n?await n:r.authToken}async function UD(t,e){let n=await vI(t.appConfig);for(;n.authToken.requestStatus===1;)await Ab(100),n=await vI(t.appConfig);const r=n.authToken;return r.requestStatus===0?G_(t,e):r}function vI(t){return pp(t,e=>{if(!kb(e))throw go.create("not-registered");const n=e.authToken;return HD(n)?{...e,authToken:{requestStatus:0}}:e})}async function BD(t,e){try{const n=await FD(t,e),r={...e,authToken:n};return await Sf(t.appConfig,r),n}catch(n){if(_b(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await xb(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Sf(t.appConfig,r)}throw n}}function kb(t){return t!==void 0&&t.registrationStatus===2}function $D(t){return t.requestStatus===2&&!zD(t)}function zD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gD}function qD(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function HD(t){return t.requestStatus===1&&t.requestTime+mb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t){const e=t,{installationEntry:n,registrationPromise:r}=await H_(e);return r?r.catch(console.error):G_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e=!1){const n=t;return await KD(n),(await G_(n,e)).token}async function KD(t){const{registrationPromise:e}=await H_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){if(!t||!t.options)throw Hm("App Configuration");if(!t.name)throw Hm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Hm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Hm(t){return go.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="installations",YD="installations-internal",JD=t=>{const e=t.getProvider("app").getImmediate(),n=QD(e),r=ar(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},XD=t=>{const e=t.getProvider("app").getImmediate(),n=ar(e,Cb).getImmediate();return{getId:()=>GD(n),getToken:i=>WD(n,i)}};function ZD(){zn(new Pn(Cb,JD,"PUBLIC")),zn(new Pn(YD,XD,"PRIVATE"))}ZD();qt(pb,z_);qt(pb,z_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf="analytics",eO="firebase_id",tO="origin",nO=60*1e3,rO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",W_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Gu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},bn=new Co("analytics","Analytics",iO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){if(!t.startsWith(W_)){const e=bn.create("invalid-gtag-resource",{gtagURL:t});return pn.warn(e.message),""}return t}function Nb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function oO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aO(t,e){const n=oO("firebase-js-sdk-policy",{createScriptURL:sO}),r=document.createElement("script"),i=`${W_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function lO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function cO(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await Nb(n)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(a){pn.error(a)}t("config",i,s)}async function uO(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await Nb(n);for(const c of o){const u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){pn.error(s)}}function dO(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,c]=o;await uO(t,e,n,a,c)}else if(s==="config"){const[a,c]=o;await cO(t,e,n,r,a,c)}else if(s==="consent"){const[a,c]=o;t("consent",a,c)}else if(s==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){pn.error(a)}}return i}function hO(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=dO(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function fO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(W_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=30,mO=1e3;class gO{constructor(e={},n=mO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Db=new gO;function yO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function _O(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:yO(n)},i=rO.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(a=c.error.message)}catch{}throw bn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function vO(t,e=Db,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw bn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw bn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new EO;return setTimeout(async()=>{a.abort()},n!==void 0?n:nO),Ob({appId:r,apiKey:i,measurementId:s},o,a,e)}async function Ob(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Db){var a;const{appId:s,measurementId:o}=t;try{await wO(r,e)}catch(c){if(o)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await _O(t);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!IO(u)){if(i.deleteThrottleMetadata(s),o)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw c}const d=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?cI(n,i.intervalMillis,pO):cI(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(s,f),pn.debug(`Calling attemptFetch again in ${d} millis`),Ob(t,f,r,i)}}function wO(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(bn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function IO(t){if(!(t instanceof Dn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class EO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TO(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(){if(B_())try{await ab()}catch(t){return pn.warn(bn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return pn.warn(bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bO(t,e,n,r,i,s,o){const a=vO(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>pn.error(p)),e.push(a);const c=AO().then(p=>{if(p)return r.getId()}),[u,d]=await Promise.all([a,c]);fO(s)||aO(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[tO]="firebase",f.update=!0,d!=null&&(f[eO]=d),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.app=e}_delete(){return delete jc[this.app.options.appId],Promise.resolve()}}let jc={},wI=[];const II={};let Gm="dataLayer",RO="gtag",EI,Lb,TI=!1;function xO(){const t=[];if(ib()&&t.push("This is a browser extension environment."),WN()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=bn.create("invalid-analytics-context",{errorInfo:e});pn.warn(n.message)}}function PO(t,e,n){xO();const r=t.options.appId;if(!r)throw bn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw bn.create("no-api-key");if(jc[r]!=null)throw bn.create("already-exists",{id:r});if(!TI){lO(Gm);const{wrappedGtag:s,gtagCore:o}=hO(jc,wI,II,Gm,RO);Lb=s,EI=o,TI=!0}return jc[r]=bO(t,wI,II,e,EI,Gm,n),new SO(t)}function kO(t=Wu()){t=Z(t);const e=ar(t,Rf);return e.isInitialized()?e.getImmediate():CO(t)}function CO(t,e={}){const n=ar(t,Rf);if(n.isInitialized()){const i=n.getImmediate();if($n(e,n.getOptions()))return i;throw bn.create("already-initialized")}return n.initialize({options:e})}function NO(t,e,n,r){t=Z(t),TO(Lb,jc[t.app.options.appId],e,n,r).catch(i=>pn.error(i))}const AI="@firebase/analytics",bI="0.10.18";function DO(){zn(new Pn(Rf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return PO(r,i,n)},"PUBLIC")),zn(new Pn("analytics-internal",t,"PRIVATE")),qt(AI,bI),qt(AI,bI,"esm2020");function t(e){try{const n=e.getProvider(Rf).getImmediate();return{logEvent:(r,i,s)=>NO(n,r,i,s)}}catch(n){throw bn.create("interop-component-reg-failed",{reason:n})}}}DO();var SI="@firebase/ai",dy="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="AI",RI="us-central1",OO="firebasevertexai.googleapis.com",LO="v1beta",xI=dy,VO="gl-js",MO=180*1e3,FO="gemini-2.0-flash-lite";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=["user","model","function","system"],Vb={HARM_SEVERITY_NEGLIGIBLE:"HARM_SEVERITY_NEGLIGIBLE",HARM_SEVERITY_LOW:"HARM_SEVERITY_LOW",HARM_SEVERITY_MEDIUM:"HARM_SEVERITY_MEDIUM",HARM_SEVERITY_HIGH:"HARM_SEVERITY_HIGH",HARM_SEVERITY_UNSUPPORTED:"HARM_SEVERITY_UNSUPPORTED"},kI={STOP:"STOP",MAX_TOKENS:"MAX_TOKENS",SAFETY:"SAFETY",RECITATION:"RECITATION",OTHER:"OTHER",BLOCKLIST:"BLOCKLIST",PROHIBITED_CONTENT:"PROHIBITED_CONTENT",SPII:"SPII",MALFORMED_FUNCTION_CALL:"MALFORMED_FUNCTION_CALL"},CI={TEXT:"TEXT",IMAGE:"IMAGE",AUDIO:"AUDIO"},NI={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.backendType=e}}class Ku extends Mb{constructor(){super(ui.GOOGLE_AI)}}class mp extends Mb{constructor(e=RI){super(ui.VERTEX_AI),e?this.location=e:this.location=RI}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jO=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof mp?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce extends Dn{constructor(e,n,r){const i=Za,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,ce),Object.setPrototypeOf(this,ce.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){if(t instanceof Ku)return`${Za}/googleai`;if(t instanceof mp)return`${Za}/vertexai/${t.location}`;throw new ce(de.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function BO(t){const e=t.split("/");if(e[0]!==Za)throw new ce(de.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new ce(de.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new mp(r);case"googleai":return new Ku;default:throw new ce(de.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){var r,i,s,o,a,c,u;if((i=(r=e.app)==null?void 0:r.options)!=null&&i.apiKey)if((o=(s=e.app)==null?void 0:s.options)!=null&&o.projectId)if((c=(a=e.app)==null?void 0:a.options)!=null&&c.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location,backend:e.backend},Be(e.app)&&e.app.settings.appCheckToken){const d=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:d})}else e.appCheck&&((u=e.options)!=null&&u.useLimitedUseAppCheckTokens?this._apiSettings.getAppCheckToken=()=>e.appCheck.getLimitedUseToken():this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken()),this.model=Uc.normalizeModelName(n,this._apiSettings.backend.backendType)}else throw new ce(de.NO_APP_ID,'The "appId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid app ID.');else throw new ce(de.NO_PROJECT_ID,'The "projectId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid project ID.');else throw new ce(de.NO_API_KEY,'The "apiKey" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid API key.')}static normalizeModelName(e,n){return n===ui.GOOGLE_AI?Uc.normalizeGoogleAIModelName(e):Uc.normalizeVertexAIModelName(e)}static normalizeGoogleAIModelName(e){return`models/${e}`}static normalizeVertexAIModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Gu("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(_u||(_u={}));class Fb{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiSettings=r,this.stream=i,this.requestOptions=s}toString(){const e=new URL(this.baseUrl);return e.pathname=`/${this.apiVersion}/${this.modelPath}:${this.task}`,e.search=this.queryParams.toString(),e.toString()}get baseUrl(){var e;return((e=this.requestOptions)==null?void 0:e.baseUrl)||`https://${OO}`}get apiVersion(){return LO}get modelPath(){if(this.apiSettings.backend instanceof Ku)return`projects/${this.apiSettings.project}/${this.model}`;if(this.apiSettings.backend instanceof mp)return`projects/${this.apiSettings.project}/locations/${this.apiSettings.backend.location}/${this.model}`;throw new ce(de.ERROR,`Invalid backend: ${JSON.stringify(this.apiSettings.backend)}`)}get queryParams(){const e=new URLSearchParams;return this.stream&&e.set("alt","sse"),e}}function $O(){const t=[];return t.push(`${VO}/${xI}`),t.push(`fire/${xI}`),t.join(" ")}async function zO(t){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",$O()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){const n=await t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&sn.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){const n=await t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e}async function qO(t,e,n,r,i,s){const o=new Fb(t,e,n,r,s);return{url:o.toString(),fetchOptions:{method:"POST",headers:await zO(o),body:i}}}async function K_(t,e,n,r,i,s){const o=new Fb(t,e,n,r,s);let a,c;try{const u=await qO(t,e,n,r,i,s),d=(s==null?void 0:s.timeout)!=null&&s.timeout>=0?s.timeout:MO,f=new AbortController;if(c=setTimeout(()=>f.abort(),d),u.fetchOptions.signal=f.signal,a=await fetch(u.url,u.fetchOptions),!a.ok){let p="",w;try{const R=await a.json();p=R.error.message,R.error.details&&(p+=` ${JSON.stringify(R.error.details)}`,w=R.error.details)}catch{}throw a.status===403&&w&&w.some(R=>R.reason==="SERVICE_DISABLED")&&w.some(R=>{var P,N;return(N=(P=R.links)==null?void 0:P[0])==null?void 0:N.description.includes("Google developers console API activation")})?new ce(de.API_NOT_ENABLED,`The Firebase AI SDK requires the Firebase AI API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${o.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:w}):new ce(de.FETCH_ERROR,`Error fetching from ${o}: [${a.status} ${a.statusText}] ${p}`,{status:a.status,statusText:a.statusText,errorDetails:w})}}catch(u){let d=u;throw u.code!==de.FETCH_ERROR&&u.code!==de.API_NOT_ENABLED&&u instanceof Error&&(d=new ce(de.ERROR,`Error fetching from ${o.toString()}: ${u.message}`),d.stack=u.stack),d}finally{c&&clearTimeout(c)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&sn.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),jb(t.candidates[0]))throw new ce(de.RESPONSE_ERROR,`Response error: ${Zs(t)}. Response body stored in error.response`,{response:t});return!0}else return!1}function xf(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),HO(t)}function HO(t){return t.text=()=>{if(lh(t))return DI(t,e=>!e.thought);if(t.promptFeedback)throw new ce(de.RESPONSE_ERROR,`Text not available. ${Zs(t)}`,{response:t});return""},t.thoughtSummary=()=>{if(lh(t)){const e=DI(t,n=>!!n.thought);return e===""?void 0:e}else if(t.promptFeedback)throw new ce(de.RESPONSE_ERROR,`Thought summary not available. ${Zs(t)}`,{response:t})},t.inlineDataParts=()=>{if(lh(t))return WO(t);if(t.promptFeedback)throw new ce(de.RESPONSE_ERROR,`Data not available. ${Zs(t)}`,{response:t})},t.functionCalls=()=>{if(lh(t))return GO(t);if(t.promptFeedback)throw new ce(de.RESPONSE_ERROR,`Function call not available. ${Zs(t)}`,{response:t})},t}function DI(t,e){var r,i,s,o;const n=[];if((i=(r=t.candidates)==null?void 0:r[0].content)!=null&&i.parts)for(const a of(o=(s=t.candidates)==null?void 0:s[0].content)==null?void 0:o.parts)a.text&&e(a)&&n.push(a.text);return n.length>0?n.join(""):""}function GO(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.functionCall&&e.push(o.functionCall);if(e.length>0)return e}function WO(t){var n,r,i,s;const e=[];if((r=(n=t.candidates)==null?void 0:n[0].content)!=null&&r.parts)for(const o of(s=(i=t.candidates)==null?void 0:i[0].content)==null?void 0:s.parts)o.inlineData&&e.push(o);if(e.length>0)return e}const KO=[kI.RECITATION,kI.SAFETY];function jb(t){return!!t.finishReason&&KO.some(e=>e===t.finishReason)}function Zs(t){var n,r,i;let e="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)e+="Response was blocked",(n=t.promptFeedback)!=null&&n.blockReason&&(e+=` due to ${t.promptFeedback.blockReason}`),(r=t.promptFeedback)!=null&&r.blockReasonMessage&&(e+=`: ${t.promptFeedback.blockReasonMessage}`);else if((i=t.candidates)!=null&&i[0]){const s=t.candidates[0];jb(s)&&(e+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(e+=`: ${s.finishMessage}`))}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(t){var e,n;if((e=t.safetySettings)==null||e.forEach(r=>{if(r.method)throw new ce(de.UNSUPPORTED,"SafetySetting.method is not supported in the the Gemini Developer API. Please remove this property.")}),(n=t.generationConfig)!=null&&n.topK){const r=Math.round(t.generationConfig.topK);r!==t.generationConfig.topK&&(sn.warn("topK in GenerationConfig has been rounded to the nearest integer to match the format for requests to the Gemini Developer API."),t.generationConfig.topK=r)}return t}function Q_(t){return{candidates:t.candidates?YO(t.candidates):void 0,prompt:t.promptFeedback?JO(t.promptFeedback):void 0,usageMetadata:t.usageMetadata}}function QO(t,e){return{generateContentRequest:{model:e,...t}}}function YO(t){const e=[];let n;return e&&t.forEach(r=>{var o;let i;if(r.citationMetadata&&(i={citations:r.citationMetadata.citationSources}),r.safetyRatings&&(n=r.safetyRatings.map(a=>({...a,severity:a.severity??Vb.HARM_SEVERITY_UNSUPPORTED,probabilityScore:a.probabilityScore??0,severityScore:a.severityScore??0}))),(o=r.content)!=null&&o.parts.some(a=>a==null?void 0:a.videoMetadata))throw new ce(de.UNSUPPORTED,"Part.videoMetadata is not supported in the Gemini Developer API. Please remove this property.");const s={index:r.index,content:r.content,finishReason:r.finishReason,finishMessage:r.finishMessage,safetyRatings:n,citationMetadata:i,groundingMetadata:r.groundingMetadata};e.push(s)}),e}function JO(t){const e=[];return t.safetyRatings.forEach(r=>{e.push({category:r.category,probability:r.probability,severity:r.severity??Vb.HARM_SEVERITY_UNSUPPORTED,probabilityScore:r.probabilityScore??0,severityScore:r.severityScore??0,blocked:r.blocked})}),{blockReason:t.blockReason,safetyRatings:e,blockReasonMessage:t.blockReasonMessage}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XO(t,e){const n=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=tL(n),[i,s]=r.tee();return{stream:eL(i,e),response:ZO(s,e)}}async function ZO(t,e){const n=[],r=t.getReader();for(;;){const{done:i,value:s}=await r.read();if(i){let o=nL(n);return e.backend.backendType===ui.GOOGLE_AI&&(o=Q_(o)),xf(o)}n.push(s)}}async function*eL(t,e){const n=t.getReader();for(;;){const{value:r,done:i}=await n.read();if(i)break;let s;e.backend.backendType===ui.GOOGLE_AI?s=xf(Q_(r)):s=xf(r),yield s}}function tL(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new ce(de.PARSE_FAILED,"Failed to parse stream"));return}r.close();return}i+=o;let c=i.match(OI),u;for(;c;){try{u=JSON.parse(c[1])}catch{r.error(new ce(de.PARSE_FAILED,`Error parsing JSON response: "${c[1]}`));return}r.enqueue(u),i=i.substring(c[0].length),c=i.match(OI)}return s()})}}})}function nL(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t)if(r.candidates)for(const i of r.candidates){const s=i.index||0;if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:i.index}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,n.candidates[s].groundingMetadata=i.groundingMetadata,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[]});const o={};for(const a of i.content.parts){if(a.text!==void 0){if(a.text==="")continue;o.text=a.text}if(a.functionCall&&(o.functionCall=a.functionCall),Object.keys(o).length===0)throw new ce(de.INVALID_CONTENT,"Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[s].content.parts.push(o)}}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e,n,r){return t.backend.backendType===ui.GOOGLE_AI&&(n=Ub(n)),K_(e,_u.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r)}async function Bb(t,e,n,r,i){let s;return r&&await r.isAvailable(n)?s=await r.generateContentStream(n):s=await rL(t,e,n,i),XO(s,t)}async function iL(t,e,n,r){return t.backend.backendType===ui.GOOGLE_AI&&(n=Ub(n)),K_(e,_u.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)}async function $b(t,e,n,r,i){let s;r&&await r.isAvailable(n)?s=await r.generateContent(n):s=await iL(t,e,n,i);const o=await sL(s,t);return{response:xf(o)}}async function sL(t,e){const n=await t.json();return e.backend.backendType===ui.GOOGLE_AI?Q_(n):n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function hy(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return oL(e)}function oL(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new ce(de.INVALID_CONTENT,"Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!r&&!i)throw new ce(de.INVALID_CONTENT,"No Content is provided for sending chat message.");return r?e:n}function Wm(t){let e;return t.contents?e=t:e={contents:[hy(t)]},t.systemInstruction&&(e.systemInstruction=zb(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=["text","inlineData","functionCall","functionResponse","thought","thoughtSignature"],aL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","thought","thoughtSignature"],system:["text"]},VI={user:["model"],function:["model"],model:["user","function"],system:[]};function lL(t){let e=null;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new ce(de.INVALID_CONTENT,`First Content should be with role 'user', got ${r}`);if(!PI.includes(r))throw new ce(de.INVALID_CONTENT,`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(PI)}`);if(!Array.isArray(i))throw new ce(de.INVALID_CONTENT,"Content should have 'parts' property with an array of Parts");if(i.length===0)throw new ce(de.INVALID_CONTENT,"Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,thought:0,thoughtSignature:0};for(const a of i)for(const c of LI)c in a&&(s[c]+=1);const o=aL[r];for(const a of LI)if(!o.includes(a)&&s[a]>0)throw new ce(de.INVALID_CONTENT,`Content with role '${r}' can't contain '${a}' part`);if(e&&!VI[r].includes(e.role))throw new ce(de.INVALID_CONTENT,`Content with role '${r}' can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(VI)}`);e=n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="SILENT_ERROR";class cL{constructor(e,n,r,i,s){this.model=n,this.chromeAdapter=r,this.params=i,this.requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,i!=null&&i.history&&(lL(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var s,o,a,c,u;await this._sendPromise;const n=hy(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(c=this.params)==null?void 0:c.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]};let i={};return this._sendPromise=this._sendPromise.then(()=>$b(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions)).then(d=>{var f,p;if(d.response.candidates&&d.response.candidates.length>0){this._history.push(n);const w={parts:((f=d.response.candidates)==null?void 0:f[0].content.parts)||[],role:((p=d.response.candidates)==null?void 0:p[0].content.role)||"model"};this._history.push(w)}else{const w=Zs(d.response);w&&sn.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}i=d}),await this._sendPromise,i}async sendMessageStream(e){var s,o,a,c,u;await this._sendPromise;const n=hy(e),r={safetySettings:(s=this.params)==null?void 0:s.safetySettings,generationConfig:(o=this.params)==null?void 0:o.generationConfig,tools:(a=this.params)==null?void 0:a.tools,toolConfig:(c=this.params)==null?void 0:c.toolConfig,systemInstruction:(u=this.params)==null?void 0:u.systemInstruction,contents:[...this._history,n]},i=Bb(this._apiSettings,this.model,r,this.chromeAdapter,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>i).catch(d=>{throw new Error(MI)}).then(d=>d.response).then(d=>{if(d.candidates&&d.candidates.length>0){this._history.push(n);const f={...d.candidates[0].content};f.role||(f.role="model"),this._history.push(f)}else{const f=Zs(d);f&&sn.warn(`sendMessageStream() was unsuccessful. ${f}. Inspect response object for details.`)}}).catch(d=>{d.message!==MI&&sn.error(d)}),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e,n,r){let i="";if(t.backend.backendType===ui.GOOGLE_AI){const o=QO(n,e);i=JSON.stringify(o)}else i=JSON.stringify(n);return(await K_(e,_u.COUNT_TOKENS,t,!1,i,r)).json()}async function dL(t,e,n,r,i){return r&&await r.isAvailable(n)?(await r.countTokens(n)).json():uL(t,e,n,i)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL extends Uc{constructor(e,n,r,i){super(e,n.model),this.chromeAdapter=i,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=zb(n.systemInstruction),this.requestOptions=r||{}}async generateContent(e){const n=Wm(e);return $b(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}async generateContentStream(e){const n=Wm(e);return Bb(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.chromeAdapter,this.requestOptions)}startChat(e){return new cL(this._apiSettings,this.model,this.chromeAdapter,{tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,generationConfig:this.generationConfig,safetySettings:this.safetySettings,...e},this.requestOptions)}async countTokens(e){const n=Wm(e);return dL(this._apiSettings,this.model,n,this.chromeAdapter)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t=Wu(),e){t=Z(t);const n=ar(t,Za),r=(e==null?void 0:e.backend)??new Ku,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=UO(r),o=n.getImmediate({identifier:s});return o.options=i,o}function pL(t,e,n){var o;const r=e;let i;if(r.mode?i=r.inCloudParams||{model:FO}:i=e,!i.model)throw new ce(de.NO_MODEL,"Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");const s=(o=t.chromeAdapterFactory)==null?void 0:o.call(t,r.mode,typeof window>"u"?void 0:window,r.onDeviceParams);return new hL(t,i,n,s)}var qs;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(qs||(qs={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return sn.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===NI.ONLY_IN_CLOUD)return sn.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===NI.ONLY_ON_DEVICE){if(n===qs.UNAVAILABLE)throw new ce(de.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===qs.DOWNLOADABLE||n===qs.DOWNLOADING)&&(sn.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==qs.AVAILABLE?(sn.debug(`On-device inference unavailable because availability is "${n}".`),!1):Xn.isOnDeviceRequest(e)?!0:(sn.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Xn.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return Xn.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Xn.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return Xn.toStreamResponse(i)}async countTokens(e){throw new ce(de.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return sn.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return sn.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&Xn.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return sn.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===qs.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(Xn.toLanguageModelMessageContent));return{role:Xn.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new ce(de.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new ce(de.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}Xn.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function mL(t,e,n){if(typeof e<"u"&&t)return new Xn(e.LanguageModel,t,n)}function gL(t,{instanceIdentifier:e}){if(!e)throw new ce(de.ERROR,"AIService instance identifier is undefined.");const n=BO(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new jO(r,n,i,s,mL)}function yL(){zn(new Pn(Za,gL,"PUBLIC").setMultipleInstances(!0)),qt(SI,dy),qt(SI,dy,"esm2020")}yL();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5={PHONE:"phone",TOTP:"totp"},C5={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},N5={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},D5={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},O5={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function qb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L5=_L,vL=qb,Hb=new Co("auth","Firebase",qb()),V5={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Gu("@firebase/auth");function wL(t,...e){Pf.logLevel<=pe.WARN&&Pf.warn(`Auth (${No}): ${t}`,...e)}function Dh(t,...e){Pf.logLevel<=pe.ERROR&&Pf.error(`Auth (${No}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw J_(t,...e)}function Jt(t,...e){return J_(t,...e)}function Y_(t,e,n){const r={...vL(),[e]:n};return new Co("auth","Firebase",r).create(e,{appName:t.name})}function St(t){return Y_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(t,"argument-error"),Y_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Hb.create(t,...e)}function H(t,e,...n){if(!t)throw J_(e,...n)}function wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dh(e),new Error(e)}function ri(t,e){t||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function X_(){return FI()==="http:"||FI()==="https:"}function FI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X_()||ib()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=zN()||HN()}get(){return IL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e){ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bL=new Qu(3e4,6e4);function ze(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qe(t,e,n,r,i={}){return Wb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Al({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return qN()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ci(t.emulatorConfig.host)&&(u.credentials="include"),Gb.fetch()(await Kb(t,t.config.apiHost,n,a),u)})}async function Wb(t,e,n){t._canInitEmulator=!1;const r={...TL,...e};try{const i=new RL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ac(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ac(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ac(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Y_(t,d,u);mn(t,d)}}catch(i){if(i instanceof Dn)throw i;mn(t,"network-request-failed",{message:String(i)})}}async function di(t,e,n,r,i={}){const s=await qe(t,e,n,r,i);return"mfaPendingCredential"in s&&mn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Kb(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Z_(t.config,i):`${t.config.apiScheme}://${i}`;return AL.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function SL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jt(this.auth,"network-request-failed")),bL.get())})}}function Ac(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t){return t!==void 0&&t.getResponse!==void 0}function UI(t){return t!==void 0&&t.enterprise!==void 0}class Qb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t){return(await qe(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Yb(t,e){return qe(t,"GET","/v2/recaptchaConfig",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return qe(t,"POST","/v1/accounts:delete",e)}async function kL(t,e){return qe(t,"POST","/v1/accounts:update",e)}async function kf(t,e){return qe(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e=!1){return Z(t).getIdToken(e)}async function CL(t,e=!1){const n=Z(t),r=await n.getIdToken(e),i=gp(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bc(Km(i.auth_time)),issuedAtTime:Bc(Km(i.iat)),expirationTime:Bc(Km(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Km(t){return Number(t)*1e3}function gp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y1(n);return i?JSON.parse(i):(Dh("Failed to decode base64 JWT payload"),null)}catch(i){return Dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function BI(t){const e=gp(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&NL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bc(this.lastLoginAt),this.creationTime=Bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ii(t,kf(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?Jb(i.providerUserInfo):[],o=LL(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fy(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function OL(t){const e=Z(t);await wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Jb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){const n=await Wb(t,{},async()=>{const r=Al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Kb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&ci(t.emulatorConfig.host)&&(c.credentials="include"),Gb.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ML(t,e){return qe(t,"POST","/v2/accounts:revokeToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=BI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await VL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ua;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new DL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ii(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CL(this,e)}reload(){return OL(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Be(this.auth.app))return Promise.reject(St(this.auth));const e=await this.getIdToken();return await ii(this,PL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:w,providerData:R,stsTokenManager:P}=n;H(f&&P,e,"internal-error");const N=Ua.fromJSON(this.name,P);H(typeof f=="string",e,"internal-error"),xi(r,e.name),xi(i,e.name),H(typeof p=="boolean",e,"internal-error"),H(typeof w=="boolean",e,"internal-error"),xi(s,e.name),xi(o,e.name),xi(a,e.name),xi(c,e.name),xi(u,e.name),xi(d,e.name);const T=new nr({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:N,createdAt:u,lastLoginAt:d});return R&&Array.isArray(R)&&(T.providerData=R.map(I=>({...I}))),c&&(T._redirectEventId=c),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ua;i.updateFromServerResponse(n);const s=new nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];H(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Jb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ua;a.updateFromIdToken(r);const c=new nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new Map;function Gr(t){ri(t instanceof Function,"Expected a class definition");let e=$I.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$I.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xb.type="NONE";const zI=Xb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kf(this.auth,{idToken:e}).catch(()=>{});return n?nr._fromGetAccountInfoResponse(this.auth,n,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ba(Gr(zI),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Gr(zI);const o=Oh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const p=await kf(e,{idToken:d}).catch(()=>{});if(!p)break;f=await nr._fromGetAccountInfoResponse(e,p,d)}else f=nr._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ba(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ba(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iS(e))return"Blackberry";if(sS(e))return"Webos";if(eS(e))return"Safari";if((e.includes("chrome/")||tS(e))&&!e.includes("edge/"))return"Chrome";if(rS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Zb(t=_t()){return/firefox\//i.test(t)}function eS(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tS(t=_t()){return/crios\//i.test(t)}function nS(t=_t()){return/iemobile/i.test(t)}function rS(t=_t()){return/android/i.test(t)}function iS(t=_t()){return/blackberry/i.test(t)}function sS(t=_t()){return/webos/i.test(t)}function ev(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FL(t=_t()){var e;return ev(t)&&!!((e=window.navigator)!=null&&e.standalone)}function jL(){return GN()&&document.documentMode===10}function oS(t=_t()){return ev(t)||rS(t)||sS(t)||iS(t)||/windows phone/i.test(t)||nS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t,e=[]){let n;switch(t){case"Browser":n=qI(_t());break;case"Worker":n=`${qI(_t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e={}){return qe(t,"GET","/v2/passwordPolicy",ze(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=6;class zL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$L,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HI(this),this.idTokenSubscription=new HI(this),this.beforeStateQueue=new UL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kf(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Be(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Be(this.app))return Promise.reject(St(this));const n=e?Z(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Be(this.app)?Promise.reject(St(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Be(this.app)?Promise.reject(St(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BL(this),n=new zL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ML(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&wL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ot(t){return Z(t)}class HI{constructor(e){this.auth=e,this.observer=null,this.addObserver=XN(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HL(t){Yu=t}function tv(t){return Yu.loadJS(t)}function GL(){return Yu.recaptchaV2Script}function WL(){return Yu.recaptchaEnterpriseScript}function KL(){return Yu.gapiScript}function lS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=500,YL=6e4,ch=1e12;class JL{constructor(e){this.auth=e,this.counter=ch,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new eV(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||ch;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||ch;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||ch;return(r=this._widgets.get(n))==null||r.execute(),""}}class XL{constructor(){this.enterprise=new ZL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eV{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=tV(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},YL)},QL))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function tV(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const nV="recaptcha-enterprise",$c="NO_RECAPTCHA";class cS{constructor(e){this.type=nV,this.auth=ot(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Yb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Qb(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function i(s,o,a){const c=window.grecaptcha;UI(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o($c)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XL().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&UI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=WL();c.length!==0&&(c+=a),tv(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function dc(t,e,n,r=!1,i=!1){const s=new cS(t);let o;if(i)o=$c;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ss(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await dc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await dc(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await dc(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await dc(t,e,n,!1,!0);return r(t,d)}return Promise.reject(c)})}else{const a=await dc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function uS(t){const e=ot(t),n=await Yb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Qb(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new cS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t,e){const n=ar(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($n(s,e??{}))return i;mn(i,"already-initialized")}return n.initialize({options:e})}function iV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sV(t,e,n){const r=ot(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=dS(e),{host:o,port:a}=oV(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H($n(u,r.config.emulator)&&$n(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ci(o)?(hp(`${s}//${o}${c}`),U_("Auth",!0)):i||aV()}function dS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oV(t){const e=dS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:GI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:GI(o)}}}function GI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,n){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(t,e){return qe(t,"POST","/v1/accounts:resetPassword",ze(t,e))}async function lV(t,e){return qe(t,"POST","/v1/accounts:update",e)}async function cV(t,e){return qe(t,"POST","/v1/accounts:signUp",e)}async function uV(t,e){return qe(t,"POST","/v1/accounts:update",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return di(t,"POST","/v1/accounts:signInWithPassword",ze(t,e))}async function yp(t,e){return qe(t,"POST","/v1/accounts:sendOobCode",ze(t,e))}async function hV(t,e){return yp(t,e)}async function fV(t,e){return yp(t,e)}async function pV(t,e){return yp(t,e)}async function mV(t,e){return yp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e){return di(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}async function yV(t,e){return di(t,"POST","/v1/accounts:signInWithEmailLink",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Ju{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Iu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Iu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ss(e,n,"signInWithPassword",dV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gV(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ss(e,r,"signUpPassword",cV,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yV(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yr(t,e){return di(t,"POST","/v1/accounts:signInWithIdp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="http://localhost";class si extends Ju{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new si(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yr(e,n)}buildRequest(){const e={requestUri:_V,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Al(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return qe(t,"POST","/v1/accounts:sendVerificationCode",ze(t,e))}async function vV(t,e){return di(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e))}async function wV(t,e){const n=await di(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,e));if(n.temporaryProof)throw Ac(t,"account-exists-with-different-credential",n);return n}const IV={USER_NOT_FOUND:"user-not-found"};async function EV(t,e){const n={...e,operation:"REAUTH"};return di(t,"POST","/v1/accounts:signInWithPhoneNumber",ze(t,n),IV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Ju{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new io({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new io({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return vV(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return wV(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return EV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new io({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AV(t){const e=Ec(Tc(t)).link,n=e?Ec(Tc(e)).deep_link_id:null,r=Ec(Tc(t)).deep_link_id;return(r?Ec(Tc(r)).link:null)||r||n||e||t}class Xu{constructor(e){const n=Ec(Tc(e)),r=n.apiKey??null,i=n.oobCode??null,s=TV(n.mode??null);H(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=AV(e);try{return new Xu(n)}catch{return null}}}function F5(t){return Xu.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,n){return Iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Xu.parseLink(n);return H(r,"argument-error"),Iu._fromEmailAndCode(e,r.code,r.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Lh extends Sl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),si._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),si._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Lh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Lh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Lh(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Sl{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return si._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fi.credential(n,r)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Sl{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="http://localhost";class Eu extends Ju{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Yr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Eu(r,s)}static _create(e,n){return new Eu(e,n)}buildRequest(){return{requestUri:bV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="saml.";class py extends hi{constructor(e){H(e.startsWith(SV),"argument-error"),super(e)}static credentialFromResult(e){return py.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return py.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Eu.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Eu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Sl{constructor(){super("twitter.com")}static credential(e,n){return si._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ui.credential(n,r)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(t,e){return di(t,"POST","/v1/accounts:signUp",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await nr._fromIdTokenResponse(e,r,i),o=KI(r);return new qn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=KI(r);return new qn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function KI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t){var i;if(Be(t.app))return Promise.reject(St(t));const e=ot(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new qn({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await fS(e,{returnSecureToken:!0}),r=await qn._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Dn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cf(e,n,r,i)}}function pS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(t,e){const n=Z(t);await _p(!0,n,e);const{providerUserInfo:r}=await kL(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=mS(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function nv(t,e,n=!1){const r=await ii(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qn._forOperation(t,"link",r)}async function _p(t,e,n){await wu(e);const r=mS(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gS(t,e,n=!1){const{auth:r}=t;if(Be(r.app))return Promise.reject(St(r));const i="reauthenticate";try{const s=await ii(t,pS(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=gp(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),qn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e,n=!1){if(Be(t.app))return Promise.reject(St(t));const r="signIn",i=await pS(t,r,e),s=await qn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function rv(t,e){return yS(ot(t),e)}async function xV(t,e){const n=Z(t);return await _p(!1,n,e.providerId),nv(n,e)}async function PV(t,e){return gS(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t,e){return di(t,"POST","/v1/accounts:signInWithCustomToken",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(t,e){if(Be(t.app))return Promise.reject(St(t));const n=ot(t),r=await kV(n,{token:e,returnSecureToken:!0}),i=await qn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?iv._fromServerResponse(e,n):"totpInfo"in n?sv._fromServerResponse(e,n):mn(e,"internal-error")}}class iv extends Zu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new iv(n)}}class sv extends Zu{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new sv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e,n){var r;H(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(t){const e=ot(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function B5(t,e,n){const r=ot(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&vp(r,i,n),await ss(r,i,"getOobCode",fV,"EMAIL_PASSWORD_PROVIDER")}async function $5(t,e,n){await hS(Z(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ov(t),r})}async function z5(t,e){await uV(Z(t),{oobCode:e})}async function CV(t,e){const n=Z(t),r=await hS(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Zu._fromServerResponse(ot(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function q5(t,e){const{data:n}=await CV(Z(t),e);return n.email}async function H5(t,e,n){if(Be(t.app))return Promise.reject(St(t));const r=ot(t),o=await ss(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fS,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ov(t),c}),a=await qn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function G5(t,e,n){return Be(t.app)?Promise.reject(St(t)):rv(Z(t),Do.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ov(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(t,e,n){const r=ot(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&vp(r,o,a)}s(i,n),await ss(r,i,"getOobCode",pV,"EMAIL_PASSWORD_PROVIDER")}function K5(t,e){const n=Xu.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Q5(t,e,n){if(Be(t.app))return Promise.reject(St(t));const r=Z(t),i=Do.credentialWithLink(e,n||vu());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),rv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){return qe(t,"POST","/v1/accounts:createAuthUri",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(t,e){const n=X_()?vu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await NV(Z(t),r);return i||[]}async function J5(t,e){const n=Z(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&vp(n.auth,i,e);const{email:s}=await hV(n.auth,i);s!==t.email&&await t.reload()}async function X5(t,e,n){const r=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&vp(r.auth,s,n);const{email:o}=await mV(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(t,e){return qe(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Z(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ii(r,DV(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function eU(t,e){const n=Z(t);return Be(n.auth.app)?Promise.reject(St(n.auth)):_S(n,e,null)}function tU(t,e){return _S(Z(t),null,e)}async function _S(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await ii(t,lV(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=gp(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new $a(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new LV(r,n);case"github.com":return new VV(r,n);case"google.com":return new MV(r,n);case"twitter.com":return new FV(r,n,t.screenName||null);case"custom":case"anonymous":return new $a(r,null);default:return new $a(r,e,n)}}class $a{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class vS extends $a{constructor(e,n,r,i){super(e,n,r),this.username=i}}class LV extends $a{constructor(e,n){super(e,"facebook.com",n)}}class VV extends vS{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class MV extends $a{constructor(e,n){super(e,"google.com",n)}}class FV extends vS{constructor(e,n,r){super(e,"twitter.com",n,r)}}function nU(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:OV(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t,e){return Z(t).setPersistence(e)}function iU(t){return uS(t)}async function sU(t,e){return ot(t).validatePassword(e)}function jV(t,e,n,r){return Z(t).onIdTokenChanged(e,n,r)}function UV(t,e,n){return Z(t).beforeAuthStateChanged(e,n)}function BV(t,e,n,r){return Z(t).onAuthStateChanged(e,n,r)}function oU(t){Z(t).useDeviceLanguage()}function aU(t,e){return Z(t).updateCurrentUser(e)}function lU(t){return Z(t).signOut()}function cU(t,e){return ot(t).revokeAccessToken(e)}async function uU(t){return Z(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new eo("enroll",e,n)}static _fromMfaPendingCredential(e){return new eo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return eo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return eo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ot(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Zu._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=eo._fromMfaPendingCredential(i.mfaPendingCredential);return new av(o,s,async a=>{const c=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const d=await qn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return H(n.user,r,"internal-error"),qn._forOperation(n.user,n.operationType,u);default:mn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function dU(t,e){var i;const n=Z(t),r=e;return H(e.customData.operationType,n,"argument-error"),H((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),av._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function $V(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function zV(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:start",ze(t,e))}function qV(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:finalize",ze(t,e))}function HV(t,e){return qe(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ze(t,e))}class lv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Zu._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new lv(e)}async getSession(){return eo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await ii(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ii(this.user,HV(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Qm=new WeakMap;function hU(t){const e=Z(t);return Qm.has(e)||Qm.set(e,lv._fromUser(e)),Qm.get(e)}const Nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=1e3,WV=10;class IS extends wS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);jL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IS.type="LOCAL";const KV=IS;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=1e3;function Ym(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function Jm(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class ES{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=Jm(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return Ym(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=Jm(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=Jm(e);if(window.cookieStore){const a=u=>{const d=u.changed.find(p=>p.name===r);d&&n(d.value),u.deleted.find(p=>p.name===r)&&n(null)},c=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,c),window.cookieStore.addEventListener("change",a)}let i=Ym(r);const s=setInterval(()=>{const a=Ym(r);a!==i&&(n(a),i=a)},QV),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}ES.type="COOKIE";const fU=ES;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends wS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TS.type="SESSION";const AS=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),c=await YV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=Ip("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return window}function XV(t){ft().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(){return typeof ft().WorkerGlobalScope<"u"&&typeof ft().importScripts=="function"}async function ZV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function tM(){return cv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="firebaseLocalStorageDb",nM=1,Df="firebaseLocalStorage",SS="fbase_key";class ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ep(t,e){return t.transaction([Df],e?"readwrite":"readonly").objectStore(Df)}function rM(){const t=indexedDB.deleteDatabase(bS);return new ed(t).toPromise()}function my(){const t=indexedDB.open(bS,nM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Df,{keyPath:SS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Df)?e(r):(r.close(),await rM(),e(await my()))})})}async function YI(t,e,n){const r=Ep(t,!0).put({[SS]:e,value:n});return new ed(r).toPromise()}async function iM(t,e){const n=Ep(t,!1).get(e),r=await new ed(n).toPromise();return r===void 0?null:r.value}function JI(t,e){const n=Ep(t,!0).delete(e);return new ed(n).toPromise()}const sM=800,oM=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await my(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wp._getInstance(tM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await ZV(),!this.activeServiceWorker)return;this.sender=new JV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await my();return await YI(e,Nf,"1"),await JI(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>JI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ep(i,!1).getAll();return new ed(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const aM=RS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:start",ze(t,e))}function lM(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}function cM(t,e){return qe(t,"POST","/v2/accounts/mfaSignIn:finalize",ze(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=lS("rcb"),uM=new Qu(3e4,6e4);class dM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=ft().grecaptcha)!=null&&e.render)}load(e,n=""){return H(hM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&jI(ft().grecaptcha)?Promise.resolve(ft().grecaptcha):new Promise((r,i)=>{const s=ft().setTimeout(()=>{i(Jt(e,"network-request-failed"))},uM.get());ft()[Xm]=()=>{ft().clearTimeout(s),delete ft()[Xm];const a=ft().grecaptcha;if(!a||!jI(a)){i(Jt(e,"internal-error"));return}const c=a.render;a.render=(u,d)=>{const f=c(u,d);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${GL()}?${Al({onload:Xm,render:"explicit",hl:n})}`;tv(o).catch(()=>{clearTimeout(s),i(Jt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=ft().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function hM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class fM{async load(e){return new JL(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="recaptcha",pM={theme:"light",type:"image"};class pU{constructor(e,n,r={...pM}){this.parameters=r,this.type=zc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fM:new dM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ft()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(X_()&&!cv(),this.auth,"internal-error"),await mM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await xL(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function mM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=io._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function mU(t,e,n){if(Be(t.app))return Promise.reject(St(t));const r=ot(t),i=await Tp(r,e,Z(n));return new uv(i,s=>rv(r,s))}async function gU(t,e,n){const r=Z(t);await _p(!1,r,"phone");const i=await Tp(r.auth,e,Z(n));return new uv(i,s=>xV(r,s))}async function yU(t,e,n){const r=Z(t);if(Be(r.auth.app))return Promise.reject(St(r.auth));const i=await Tp(r.auth,e,Z(n));return new uv(i,s=>PV(r,s))}async function Tp(t,e,n){var r;if(!t._getRecaptchaConfig())try{await uS(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){H(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ss(t,o,"mfaSmsEnrollment",async(d,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===$c){H((n==null?void 0:n.type)===zc,d,"argument-error");const p=await Zm(d,f,n);return QI(d,p)}return QI(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;H(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ss(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===$c){H((n==null?void 0:n.type)===zc,f,"argument-error");const w=await Zm(f,p,n);return XI(f,w)}return XI(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ss(t,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===$c){H((n==null?void 0:n.type)===zc,u,"argument-error");const f=await Zm(u,d,n);return WI(u,f)}return WI(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function _U(t,e){const n=Z(t);if(Be(n.auth.app))return Promise.reject(St(n.auth));await nv(n,e)}async function Zm(t,e,n){H(n.type===zc,t,"argument-error");const r=await n.verify();H(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.providerId=za.PROVIDER_ID,this.auth=ot(e)}verifyPhoneNumber(e,n){return Tp(this.auth,e,Z(n))}static credential(e,n){return io._fromVerification(e,n)}static credentialFromResult(e){const n=e;return za.credentialFromTaggedObject(n)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?io._fromTokenResponse(n,r):null}}za.PROVIDER_ID="phone";za.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t,e){return e?Gr(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends Ju{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gM(t){return yS(t.auth,new dv(t),t.bypassAuthState)}function yM(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),gS(n,new dv(t),t.bypassAuthState)}async function _M(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),nv(n,new dv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gM;case"linkViaPopup":case"linkViaRedirect":return _M;case"reauthViaPopup":case"reauthViaRedirect":return yM;default:mn(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new Qu(2e3,1e4);async function vU(t,e,n){if(Be(t.app))return Promise.reject(Jt(t,"operation-not-supported-in-this-environment"));const r=ot(t);bl(t,e,hi);const i=Oo(r,n);return new Wr(r,"signInViaPopup",e,i).executeNotNull()}async function wU(t,e,n){const r=Z(t);if(Be(r.auth.app))return Promise.reject(Jt(r.auth,"operation-not-supported-in-this-environment"));bl(r.auth,e,hi);const i=Oo(r.auth,n);return new Wr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function IU(t,e,n){const r=Z(t);bl(r.auth,e,hi);const i=Oo(r.auth,n);return new Wr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Wr extends xS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vM.get())};e()}}Wr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",Vh=new Map;class IM extends xS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vh.get(this.auth._key());if(!e){try{const r=await EM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vh.set(this.auth._key(),e)}return this.bypassAuthState||Vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EM(t,e){const n=kS(e),r=PS(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function hv(t,e){return PS(t)._set(kS(e),"true")}function TM(t,e){Vh.set(t._key(),e)}function PS(t){return Gr(t._redirectPersistence)}function kS(t){return Oh(wM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t,e,n){return AM(t,e,n)}async function AM(t,e,n){if(Be(t.app))return Promise.reject(St(t));const r=ot(t);bl(t,e,hi),await r._initializationPromise;const i=Oo(r,n);return await hv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function TU(t,e,n){return bM(t,e,n)}async function bM(t,e,n){const r=Z(t);if(bl(r.auth,e,hi),Be(r.auth.app))return Promise.reject(St(r.auth));await r.auth._initializationPromise;const i=Oo(r.auth,n);await hv(i,r.auth);const s=await NS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function AU(t,e,n){return SM(t,e,n)}async function SM(t,e,n){const r=Z(t);bl(r.auth,e,hi),await r.auth._initializationPromise;const i=Oo(r.auth,n);await _p(!1,r,e.providerId),await hv(i,r.auth);const s=await NS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function bU(t,e){return await ot(t)._initializationPromise,CS(t,e,!1)}async function CS(t,e,n=!1){if(Be(t.app))return Promise.reject(St(t));const r=ot(t),i=Oo(r,e),o=await new IM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function NS(t){const e=Ip(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=10*60*1e3;class xM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RM&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZI(e))}saveEventToCache(e){this.cachedEventUids.add(ZI(e)),this.lastProcessedEventTime=Date.now()}}function ZI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e={}){return qe(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NM=/^https?/;async function DM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kM(t);for(const n of e)try{if(OM(n))return}catch{}mn(t,"unauthorized-domain")}function OM(t){const e=vu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NM.test(n))return!1;if(CM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Qu(3e4,6e4);function eE(){const t=ft().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VM(t){return new Promise((e,n)=>{var i,s,o;function r(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),n(Jt(t,"network-request-failed"))},timeout:LM.get()})}if((s=(i=ft().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=ft().gapi)!=null&&o.load)r();else{const a=lS("iframefcb");return ft()[a]=()=>{gapi.load?r():n(Jt(t,"network-request-failed"))},tv(`${KL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function MM(t){return Mh=Mh||VM(t),Mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=new Qu(5e3,15e3),jM="__/auth/iframe",UM="emulator/auth/iframe",BM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zM(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Z_(e,UM):`https://${t.config.authDomain}/${jM}`,r={apiKey:e.apiKey,appName:t.name,v:No},i=$M.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Al(r).slice(1)}`}async function qM(t){const e=await MM(t),n=ft().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:zM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jt(t,"network-request-failed"),a=ft().setTimeout(()=>{s(o)},FM.get());function c(){ft().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GM=500,WM=600,KM="_blank",QM="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(t,e,n,r=GM,i=WM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...HM,width:r.toString(),height:i.toString(),top:s,left:o},u=_t().toLowerCase();n&&(a=tS(u)?KM:n),Zb(u)&&(e=e||QM,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[w,R])=>`${p}${w}=${R},`,"");if(FL(u)&&a!=="_self")return JM(e||"",a),new tE(null);const f=window.open(e||"",a,d);H(f,t,"popup-blocked");try{f.focus()}catch{}return new tE(f)}function JM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="__/auth/handler",ZM="emulator/auth/handler",e4=encodeURIComponent("fac");async function nE(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:No,eventId:i};if(e instanceof hi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Sl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${e4}=${encodeURIComponent(c)}`:"";return`${t4(t)}?${Al(a).slice(1)}${u}`}function t4({config:t}){return t.emulator?Z_(t,ZM):`https://${t.authDomain}/${XM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="webStorageSupport";class n4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=CS,this._overrideRedirectResult=TM}async _openPopup(e,n,r,i){var o;ri((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await nE(e,n,r,vu(),i);return YM(e,s,Ip())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await nE(e,n,r,vu(),i);return XV(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ri(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qM(e),r=new xM(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eg,{type:eg},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[eg];s!==void 0&&n(!!s),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oS()||eS()||ev()}}const r4=n4;class OS{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return wr("unexpected MultiFactorSessionType")}}}class fv extends OS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fv(e)}_finalizeEnroll(e,n,r){return $V(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return lM(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class i4{constructor(){}static assertion(e){return fv._fromCredential(e)}}i4.FACTOR_ID="phone";class s4{static assertionForEnrollment(e,n){return Tu._fromSecret(e,n)}static assertionForSignIn(e,n){return Tu._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;H(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await zV(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return pv._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}s4.FACTOR_ID="totp";class Tu extends OS{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Tu(n,void 0,e)}static _fromEnrollmentId(e,n){return new Tu(n,e)}async _finalizeEnroll(e,n,r){return H(typeof this.secret<"u",e,"argument-error"),qV(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return cM(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class pv{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new pv(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(uh(e)||uh(n))&&(r=!0),r&&(uh(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),uh(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function uh(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var rE="@firebase/auth",iE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l4(t){zn(new Pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aS(t)},u=new qL(r,i,s,c);return iV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zn(new Pn("auth-internal",e=>{const n=ot(e.getProvider("auth").getImmediate());return(r=>new o4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qt(rE,iE,a4(t)),qt(rE,iE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=5*60,u4=tb("authIdTokenMaxAge")||c4;let sE=null;const d4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u4)return;const i=n==null?void 0:n.token;sE!==i&&(sE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function h4(t=Wu()){const e=ar(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rV(t,{popupRedirectResolver:r4,persistence:[aM,KV,AS]}),r=tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=d4(s.toString());UV(n,o,()=>o(n.currentUser)),jV(n,a=>o(a))}}const i=X1("auth");return i&&sV(n,`http://${i}`),n}function f4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}HL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",f4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l4("Browser");var oE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,LS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,_){function S(){}S.prototype=_.prototype,A.D=_.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(E,k,D){for(var x=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)x[Pt-2]=arguments[Pt];return _.prototype[k].apply(E,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,_,S){S||(S=0);var E=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)E[k]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(k=0;16>k;++k)E[k]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=A.g[0],S=A.g[1],k=A.g[2];var D=A.g[3],x=_+(D^S&(k^D))+E[0]+3614090360&4294967295;_=S+(x<<7&4294967295|x>>>25),x=D+(k^_&(S^k))+E[1]+3905402710&4294967295,D=_+(x<<12&4294967295|x>>>20),x=k+(S^D&(_^S))+E[2]+606105819&4294967295,k=D+(x<<17&4294967295|x>>>15),x=S+(_^k&(D^_))+E[3]+3250441966&4294967295,S=k+(x<<22&4294967295|x>>>10),x=_+(D^S&(k^D))+E[4]+4118548399&4294967295,_=S+(x<<7&4294967295|x>>>25),x=D+(k^_&(S^k))+E[5]+1200080426&4294967295,D=_+(x<<12&4294967295|x>>>20),x=k+(S^D&(_^S))+E[6]+2821735955&4294967295,k=D+(x<<17&4294967295|x>>>15),x=S+(_^k&(D^_))+E[7]+4249261313&4294967295,S=k+(x<<22&4294967295|x>>>10),x=_+(D^S&(k^D))+E[8]+1770035416&4294967295,_=S+(x<<7&4294967295|x>>>25),x=D+(k^_&(S^k))+E[9]+2336552879&4294967295,D=_+(x<<12&4294967295|x>>>20),x=k+(S^D&(_^S))+E[10]+4294925233&4294967295,k=D+(x<<17&4294967295|x>>>15),x=S+(_^k&(D^_))+E[11]+2304563134&4294967295,S=k+(x<<22&4294967295|x>>>10),x=_+(D^S&(k^D))+E[12]+1804603682&4294967295,_=S+(x<<7&4294967295|x>>>25),x=D+(k^_&(S^k))+E[13]+4254626195&4294967295,D=_+(x<<12&4294967295|x>>>20),x=k+(S^D&(_^S))+E[14]+2792965006&4294967295,k=D+(x<<17&4294967295|x>>>15),x=S+(_^k&(D^_))+E[15]+1236535329&4294967295,S=k+(x<<22&4294967295|x>>>10),x=_+(k^D&(S^k))+E[1]+4129170786&4294967295,_=S+(x<<5&4294967295|x>>>27),x=D+(S^k&(_^S))+E[6]+3225465664&4294967295,D=_+(x<<9&4294967295|x>>>23),x=k+(_^S&(D^_))+E[11]+643717713&4294967295,k=D+(x<<14&4294967295|x>>>18),x=S+(D^_&(k^D))+E[0]+3921069994&4294967295,S=k+(x<<20&4294967295|x>>>12),x=_+(k^D&(S^k))+E[5]+3593408605&4294967295,_=S+(x<<5&4294967295|x>>>27),x=D+(S^k&(_^S))+E[10]+38016083&4294967295,D=_+(x<<9&4294967295|x>>>23),x=k+(_^S&(D^_))+E[15]+3634488961&4294967295,k=D+(x<<14&4294967295|x>>>18),x=S+(D^_&(k^D))+E[4]+3889429448&4294967295,S=k+(x<<20&4294967295|x>>>12),x=_+(k^D&(S^k))+E[9]+568446438&4294967295,_=S+(x<<5&4294967295|x>>>27),x=D+(S^k&(_^S))+E[14]+3275163606&4294967295,D=_+(x<<9&4294967295|x>>>23),x=k+(_^S&(D^_))+E[3]+4107603335&4294967295,k=D+(x<<14&4294967295|x>>>18),x=S+(D^_&(k^D))+E[8]+1163531501&4294967295,S=k+(x<<20&4294967295|x>>>12),x=_+(k^D&(S^k))+E[13]+2850285829&4294967295,_=S+(x<<5&4294967295|x>>>27),x=D+(S^k&(_^S))+E[2]+4243563512&4294967295,D=_+(x<<9&4294967295|x>>>23),x=k+(_^S&(D^_))+E[7]+1735328473&4294967295,k=D+(x<<14&4294967295|x>>>18),x=S+(D^_&(k^D))+E[12]+2368359562&4294967295,S=k+(x<<20&4294967295|x>>>12),x=_+(S^k^D)+E[5]+4294588738&4294967295,_=S+(x<<4&4294967295|x>>>28),x=D+(_^S^k)+E[8]+2272392833&4294967295,D=_+(x<<11&4294967295|x>>>21),x=k+(D^_^S)+E[11]+1839030562&4294967295,k=D+(x<<16&4294967295|x>>>16),x=S+(k^D^_)+E[14]+4259657740&4294967295,S=k+(x<<23&4294967295|x>>>9),x=_+(S^k^D)+E[1]+2763975236&4294967295,_=S+(x<<4&4294967295|x>>>28),x=D+(_^S^k)+E[4]+1272893353&4294967295,D=_+(x<<11&4294967295|x>>>21),x=k+(D^_^S)+E[7]+4139469664&4294967295,k=D+(x<<16&4294967295|x>>>16),x=S+(k^D^_)+E[10]+3200236656&4294967295,S=k+(x<<23&4294967295|x>>>9),x=_+(S^k^D)+E[13]+681279174&4294967295,_=S+(x<<4&4294967295|x>>>28),x=D+(_^S^k)+E[0]+3936430074&4294967295,D=_+(x<<11&4294967295|x>>>21),x=k+(D^_^S)+E[3]+3572445317&4294967295,k=D+(x<<16&4294967295|x>>>16),x=S+(k^D^_)+E[6]+76029189&4294967295,S=k+(x<<23&4294967295|x>>>9),x=_+(S^k^D)+E[9]+3654602809&4294967295,_=S+(x<<4&4294967295|x>>>28),x=D+(_^S^k)+E[12]+3873151461&4294967295,D=_+(x<<11&4294967295|x>>>21),x=k+(D^_^S)+E[15]+530742520&4294967295,k=D+(x<<16&4294967295|x>>>16),x=S+(k^D^_)+E[2]+3299628645&4294967295,S=k+(x<<23&4294967295|x>>>9),x=_+(k^(S|~D))+E[0]+4096336452&4294967295,_=S+(x<<6&4294967295|x>>>26),x=D+(S^(_|~k))+E[7]+1126891415&4294967295,D=_+(x<<10&4294967295|x>>>22),x=k+(_^(D|~S))+E[14]+2878612391&4294967295,k=D+(x<<15&4294967295|x>>>17),x=S+(D^(k|~_))+E[5]+4237533241&4294967295,S=k+(x<<21&4294967295|x>>>11),x=_+(k^(S|~D))+E[12]+1700485571&4294967295,_=S+(x<<6&4294967295|x>>>26),x=D+(S^(_|~k))+E[3]+2399980690&4294967295,D=_+(x<<10&4294967295|x>>>22),x=k+(_^(D|~S))+E[10]+4293915773&4294967295,k=D+(x<<15&4294967295|x>>>17),x=S+(D^(k|~_))+E[1]+2240044497&4294967295,S=k+(x<<21&4294967295|x>>>11),x=_+(k^(S|~D))+E[8]+1873313359&4294967295,_=S+(x<<6&4294967295|x>>>26),x=D+(S^(_|~k))+E[15]+4264355552&4294967295,D=_+(x<<10&4294967295|x>>>22),x=k+(_^(D|~S))+E[6]+2734768916&4294967295,k=D+(x<<15&4294967295|x>>>17),x=S+(D^(k|~_))+E[13]+1309151649&4294967295,S=k+(x<<21&4294967295|x>>>11),x=_+(k^(S|~D))+E[4]+4149444226&4294967295,_=S+(x<<6&4294967295|x>>>26),x=D+(S^(_|~k))+E[11]+3174756917&4294967295,D=_+(x<<10&4294967295|x>>>22),x=k+(_^(D|~S))+E[2]+718787259&4294967295,k=D+(x<<15&4294967295|x>>>17),x=S+(D^(k|~_))+E[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+D&4294967295}r.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var S=_-this.blockSize,E=this.B,k=this.h,D=0;D<_;){if(k==0)for(;D<=S;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<_;)if(E[k++]=A.charCodeAt(D++),k==this.blockSize){i(this,E),k=0;break}}else for(;D<_;)if(E[k++]=A[D++],k==this.blockSize){i(this,E),k=0;break}}this.h=k,this.o+=_},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var S=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=S&255,S/=256;for(this.u(A),A=Array(16),_=S=0;4>_;++_)for(var E=0;32>E;E+=8)A[S++]=this.g[_]>>>E&255;return A};function s(A,_){var S=a;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=_(A)}function o(A,_){this.h=_;for(var S=[],E=!0,k=A.length-1;0<=k;k--){var D=A[k]|0;E&&D==_||(S[k]=D,E=!1)}this.g=S}var a={};function c(A){return-128<=A&&128>A?s(A,function(_){return new o([_|0],0>_?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return N(u(-A));for(var _=[],S=1,E=0;A>=S;E++)_[E]=A/S|0,S*=4294967296;return new o(_,0)}function d(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return N(d(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(_,8)),E=f,k=0;k<A.length;k+=8){var D=Math.min(8,A.length-k),x=parseInt(A.substring(k,k+D),_);8>D?(D=u(Math.pow(_,D)),E=E.j(D).add(u(x))):(E=E.j(S),E=E.add(u(x)))}return E}var f=c(0),p=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var A=0,_=1,S=0;S<this.g.length;S++){var E=this.i(S);A+=(0<=E?E:4294967296+E)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R(this))return"0";if(P(this))return"-"+N(this).toString(A);for(var _=u(Math.pow(A,6)),S=this,E="";;){var k=M(S,_).g;S=T(S,k.j(_));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=k,R(S))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function R(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=T(this,A),P(A)?-1:R(A)?0:1};function N(A){for(var _=A.g.length,S=[],E=0;E<_;E++)S[E]=~A.g[E];return new o(S,~A.h).add(p)}t.abs=function(){return P(this)?N(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],E=0,k=0;k<=_;k++){var D=E+(this.i(k)&65535)+(A.i(k)&65535),x=(D>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);E=x>>>16,D&=65535,x&=65535,S[k]=x<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function T(A,_){return A.add(N(_))}t.j=function(A){if(R(this)||R(A))return f;if(P(this))return P(A)?N(this).j(N(A)):N(N(this).j(A));if(P(A))return N(this.j(N(A)));if(0>this.l(w)&&0>A.l(w))return u(this.m()*A.m());for(var _=this.g.length+A.g.length,S=[],E=0;E<2*_;E++)S[E]=0;for(E=0;E<this.g.length;E++)for(var k=0;k<A.g.length;k++){var D=this.i(E)>>>16,x=this.i(E)&65535,Pt=A.i(k)>>>16,en=A.i(k)&65535;S[2*E+2*k]+=x*en,I(S,2*E+2*k),S[2*E+2*k+1]+=D*en,I(S,2*E+2*k+1),S[2*E+2*k+1]+=x*Pt,I(S,2*E+2*k+1),S[2*E+2*k+2]+=D*Pt,I(S,2*E+2*k+2)}for(E=0;E<_;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=_;E<2*_;E++)S[E]=0;return new o(S,0)};function I(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function b(A,_){this.g=A,this.h=_}function M(A,_){if(R(_))throw Error("division by zero");if(R(A))return new b(f,f);if(P(A))return _=M(N(A),_),new b(N(_.g),N(_.h));if(P(_))return _=M(A,N(_)),new b(N(_.g),_.h);if(30<A.g.length){if(P(A)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,E=_;0>=E.l(A);)S=$(S),E=$(E);var k=z(S,1),D=z(E,1);for(E=z(E,2),S=z(S,2);!R(E);){var x=D.add(E);0>=x.l(A)&&(k=k.add(S),D=x),E=z(E,1),S=z(S,1)}return _=T(A,k.j(_)),new b(k,_)}for(k=f;0<=A.l(_);){for(S=Math.max(1,Math.floor(A.m()/_.m())),E=Math.ceil(Math.log(S)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=u(S),x=D.j(_);P(x)||0<x.l(A);)S-=E,D=u(S),x=D.j(_);R(D)&&(D=p),k=k.add(D),A=T(A,x)}return new b(k,A)}t.A=function(A){return M(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)&A.i(E);return new o(S,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)|A.i(E);return new o(S,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)^A.i(E);return new o(S,this.h^A.h)};function $(A){for(var _=A.g.length+1,S=[],E=0;E<_;E++)S[E]=A.i(E)<<1|A.i(E-1)>>>31;return new o(S,A.h)}function z(A,_){var S=_>>5;_%=32;for(var E=A.g.length-S,k=[],D=0;D<E;D++)k[D]=0<_?A.i(D+S)>>>_|A.i(D+S+1)<<32-_:A.i(D+S);return new o(k,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,os=o}).apply(typeof oE<"u"?oE:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VS,bc,MS,Fh,gy,FS,jS,US;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,h){if(h)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var O=l[y];if(!(O in m))break e;m=m[O]}l=l[l.length-1],y=m[l],h=h(y),h!=y&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var m=0,y=!1,O={next:function(){if(!y&&m<l.length){var F=m++;return{value:h(F,l[F]),done:!1}}return y=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,m){return l.call.apply(l.bind,arguments)}function f(l,h,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,y),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function p(l,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function w(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function R(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,O,F){for(var K=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)K[Oe-2]=arguments[Oe];return h.prototype[O].apply(y,K)}}function P(l){const h=l.length;if(0<h){const m=Array(h);for(let y=0;y<h;y++)m[y]=l[y];return m}return[]}function N(l,h){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const O=l.length||0,F=y.length||0;l.length=O+F;for(let K=0;K<F;K++)l[O+K]=y[K]}else l.push(y)}}class T{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(l){return/^[\s\xa0]*$/.test(l)}function b(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var $=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function z(l,h,m){for(const y in l)h.call(m,l[y],y,l)}function A(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function _(l){const h={};for(const m in l)h[m]=l[m];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(l,h){let m,y;for(let O=1;O<arguments.length;O++){y=arguments[O];for(m in y)l[m]=y[m];for(let F=0;F<S.length;F++)m=S[F],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function k(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function D(l){a.setTimeout(()=>{throw l},0)}function x(){var l=ie;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Pt{constructor(){this.h=this.g=null}add(h,m){const y=en.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var en=new T(()=>new Ss,l=>l.reset());class Ss{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let On,Q=!1,ie=new Pt,ae=()=>{const l=a.Promise.resolve(void 0);On=()=>{l.then(ke)}};var ke=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(m){D(m)}var h=en;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Q=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function wt(l,h){if(Ce.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if($){e:{try{M(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ln[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wt.aa.h.call(this)}}R(wt,Ce);var Ln={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),gd=0;function Zp(l,h,m,y,O){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=O,this.key=++gd,this.da=this.fa=!1}function Cr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Nr(l){this.src=l,this.g={},this.h=0}Nr.prototype.add=function(l,h,m,y,O){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var K=yi(l,h,y,O);return-1<K?(h=l[K],m||(h.fa=!1)):(h=new Zp(h,this.src,F,!!y,O),h.fa=m,l.push(h)),h};function Gn(l,h){var m=h.type;if(m in l.g){var y=l.g[m],O=Array.prototype.indexOf.call(y,h,void 0),F;(F=0<=O)&&Array.prototype.splice.call(y,O,1),F&&(Cr(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function yi(l,h,m,y){for(var O=0;O<l.length;++O){var F=l[O];if(!F.da&&F.listener==h&&F.capture==!!m&&F.ha==y)return O}return-1}var _i="closure_lm_"+(1e6*Math.random()|0),Rs={};function Fl(l,h,m,y,O){if(y&&y.once)return lr(l,h,m,y,O);if(Array.isArray(h)){for(var F=0;F<h.length;F++)Fl(l,h[F],m,y,O);return null}return m=gn(m),l&&l[Vt]?l.K(h,m,u(y)?!!y.capture:!!y,O):vi(l,h,m,!1,y,O)}function vi(l,h,m,y,O,F){if(!h)throw Error("Invalid event type");var K=u(O)?!!O.capture:!!O,Oe=jl(l);if(Oe||(l[_i]=Oe=new Nr(l)),m=Oe.add(h,m,y,K,F),m.proxy)return m;if(y=xs(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)dt||(O=K),O===void 0&&(O=!1),l.addEventListener(h.toString(),y,O);else if(l.attachEvent)l.attachEvent(yd(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function xs(){function l(m){return h.call(l.src,l.listener,m)}const h=$o;return l}function lr(l,h,m,y,O){if(Array.isArray(h)){for(var F=0;F<h.length;F++)lr(l,h[F],m,y,O);return null}return m=gn(m),l&&l[Vt]?l.L(h,m,u(y)?!!y.capture:!!y,O):vi(l,h,m,!0,y,O)}function Dr(l,h,m,y,O){if(Array.isArray(h))for(var F=0;F<h.length;F++)Dr(l,h[F],m,y,O);else y=u(y)?!!y.capture:!!y,m=gn(m),l&&l[Vt]?(l=l.i,h=String(h).toString(),h in l.g&&(F=l.g[h],m=yi(F,m,y,O),-1<m&&(Cr(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete l.g[h],l.h--)))):l&&(l=jl(l))&&(h=l.g[h.toString()],l=-1,h&&(l=yi(h,m,y,O)),(m=-1<l?h[l]:null)&&Bo(m))}function Bo(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Vt])Gn(h.i,l);else{var m=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(m,y,l.capture):h.detachEvent?h.detachEvent(yd(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=jl(h))?(Gn(m,l),m.h==0&&(m.src=null,h[_i]=null)):Cr(l)}}}function yd(l){return l in Rs?Rs[l]:Rs[l]="on"+l}function $o(l,h){if(l.da)l=!0;else{h=new wt(h,this);var m=l.listener,y=l.ha||l.src;l.fa&&Bo(l),l=m.call(y,h)}return l}function jl(l){return l=l[_i],l instanceof Nr?l:null}var Or="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(l){return typeof l=="function"?l:(l[Or]||(l[Or]=function(h){return l.handleEvent(h)}),l[Or])}function et(){_e.call(this),this.i=new Nr(this),this.M=this,this.F=null}R(et,_e),et.prototype[Vt]=!0,et.prototype.removeEventListener=function(l,h,m,y){Dr(this,l,h,m,y)};function Ne(l,h){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new Ce(h,l);else if(h instanceof Ce)h.target=h.target||l;else{var O=h;h=new Ce(y,l),E(h,O)}if(O=!0,m)for(var F=m.length-1;0<=F;F--){var K=h.g=m[F];O=wi(K,y,!0,h)&&O}if(K=h.g=l,O=wi(K,y,!0,h)&&O,O=wi(K,y,!1,h)&&O,m)for(F=0;F<m.length;F++)K=h.g=m[F],O=wi(K,y,!1,h)&&O}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],y=0;y<m.length;y++)Cr(m[y]);delete l.g[h],l.h--}}this.F=null},et.prototype.K=function(l,h,m,y){return this.i.add(String(l),h,!1,m,y)},et.prototype.L=function(l,h,m,y){return this.i.add(String(l),h,!0,m,y)};function wi(l,h,m,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,F=0;F<h.length;++F){var K=h[F];if(K&&!K.da&&K.capture==m){var Oe=K.listener,kt=K.ha||K.src;K.fa&&Gn(l.i,K),O=Oe.call(kt,y)!==!1&&O}}return O&&!y.defaultPrevented}function zo(l,h,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function qo(l){l.g=zo(()=>{l.g=null,l.i&&(l.i=!1,qo(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Lr extends _e{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(l){_e.call(this),this.h=l,this.g={}}R(Vr,_e);var Ul=[];function Bl(l){z(l.g,function(h,m){this.g.hasOwnProperty(m)&&Bo(h)},l),l.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),Bl(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ho=a.JSON.stringify,_d=a.JSON.parse,Go=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ps(){}Ps.prototype.h=null;function Wo(l){return l.h||(l.h=l.i())}function Mr(){}var tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ko(){Ce.call(this,"d")}R(Ko,Ce);function Qo(){Ce.call(this,"c")}R(Qo,Ce);var cr={},em=null;function ks(){return em=em||new et}cr.La="serverreachability";function tn(l){Ce.call(this,cr.La,l)}R(tn,Ce);function Ii(l){const h=ks();Ne(h,new tn(h))}cr.STAT_EVENT="statevent";function $l(l,h){Ce.call(this,cr.STAT_EVENT,l),this.stat=h}R($l,Ce);function It(l){const h=ks();Ne(h,new $l(h,l))}cr.Ma="timingevent";function vd(l,h){Ce.call(this,cr.Ma,l),this.size=h}R(vd,Ce);function Fr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function wd(l,h,m,y,O,F){l.info(function(){if(l.g)if(F)for(var K="",Oe=F.split("&"),kt=0;kt<Oe.length;kt++){var we=Oe[kt].split("=");if(1<we.length){var Mt=we[0];we=we[1];var Ft=Mt.split("_");K=2<=Ft.length&&Ft[1]=="type"?K+(Mt+"="+we+"&"):K+(Mt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+y+") [attempt "+O+"]: "+h+`
`+m+`
`+K})}function Id(l,h,m,y,O,F,K){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+O+"]: "+h+`
`+m+`
`+F+" "+K})}function ur(l,h,m,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+tm(l,m)+(y?" "+y:"")})}function Wn(l,h){l.info(function(){return"TIMEOUT: "+h})}yn.prototype.info=function(){};function tm(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var O=y[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return Ho(m)}catch{return h}}var Yo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ed={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zl;function Jo(){}R(Jo,Ps),Jo.prototype.g=function(){return new XMLHttpRequest},Jo.prototype.i=function(){return{}},zl=new Jo;function dr(l,h,m,y){this.j=l,this.i=h,this.l=m,this.R=y||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Td}function Td(){this.i=null,this.g="",this.h=!1}var ql={},Xo={};function Zo(l,h,m){l.L=1,l.v=Cs(Kn(h)),l.m=m,l.P=!0,Ad(l,null)}function Ad(l,h){l.F=Date.now(),ta(l),l.A=Kn(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),Od(m.i,"t",y),l.C=0,m=l.j.J,l.h=new Td,l.g=jw(l.j,m?h:null,!l.m),0<l.O&&(l.M=new Lr(p(l.Y,l,l.g),l.O)),h=l.U,m=l.g,y=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ul[0]=O.toString()),O=Ul);for(var F=0;F<O.length;F++){var K=Fl(m,O[F],y||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ii(),wd(l.i,l.u,l.A,l.l,l.R,l.m)}dr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Br(l)==3?h.j():this.Y(l)},dr.prototype.Y=function(l){try{if(l==this.g)e:{const Ft=Br(this.g);var h=this.g.Ba();const aa=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||xw(this.g)))){this.J||Ft!=4||h==7||(h==8||0>=aa?Ii(3):Ii(2)),na(this);var m=this.g.Z();this.X=m;t:if(ea(this)){var y=xw(this.g);l="";var O=y.length,F=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),Ei(this);var K="";break t}this.h.i=new a.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(y[h],{stream:!(F&&h==O-1)});y.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,Id(this.i,this.u,this.A,this.l,this.R,Ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,kt=this.g;if((Oe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Oe)){var we=Oe;break t}}we=null}if(m=we)ur(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ra(this,m);else{this.o=!1,this.s=3,It(12),hr(this),Ei(this);break e}}if(this.P){m=!0;let Qn;for(;!this.J&&this.C<K.length;)if(Qn=bd(this,K),Qn==Xo){Ft==4&&(this.s=4,It(14),m=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==ql){this.s=4,It(15),ur(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else ur(this.i,this.l,Qn,null),ra(this,Qn);if(ea(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||K.length!=0||this.h.h||(this.s=1,It(16),m=!1),this.o=this.o&&m,!m)ur(this.i,this.l,K,"[Invalid Chunked Response]"),hr(this),Ei(this);else if(0<K.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),um(Mt),Mt.M=!0,It(11))}}else ur(this.i,this.l,K,null),ra(this,K);Ft==4&&hr(this),this.o&&!this.J&&(Ft==4?Lw(this.j,this):(this.o=!1,ta(this)))}else zP(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),hr(this),Ei(this)}}}catch{}finally{}};function ea(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function bd(l,h){var m=l.C,y=h.indexOf(`
`,m);return y==-1?Xo:(m=Number(h.substring(m,y)),isNaN(m)?ql:(y+=1,y+m>h.length?Xo:(h=h.slice(y,y+m),l.C=y+m,h)))}dr.prototype.cancel=function(){this.J=!0,hr(this)};function ta(l){l.S=Date.now()+l.I,Hl(l,l.I)}function Hl(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Fr(p(l.ba,l),h)}function na(l){l.B&&(a.clearTimeout(l.B),l.B=null)}dr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Wn(this.i,this.A),this.L!=2&&(Ii(),It(17)),hr(this),this.s=2,Ei(this)):Hl(this,this.S-l)};function Ei(l){l.j.G==0||l.J||Lw(l.j,l)}function hr(l){na(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Bl(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function ra(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||ia(m.h,l))){if(!l.K&&ia(m.h,l)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var O=y;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Bd(m),jd(m);else break e;cm(m),It(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Fr(p(m.Za,m),6e3));if(1>=Kl(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ls(m,11)}else if((l.K||m.g==l)&&Bd(m),!I(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let we=O[h];if(m.T=we[0],we=we[1],m.G==2)if(we[0]=="c"){m.K=we[1],m.ia=we[2];const Mt=we[3];Mt!=null&&(m.la=Mt,m.j.info("VER="+m.la));const Ft=we[4];Ft!=null&&(m.Aa=Ft,m.j.info("SVER="+m.Aa));const aa=we[5];aa!=null&&typeof aa=="number"&&0<aa&&(y=1.5*aa,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Qn=l.g;if(Qn){const zd=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zd){var F=y.h;F.g||zd.indexOf("spdy")==-1&&zd.indexOf("quic")==-1&&zd.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ql(F,F.h),F.h=null))}if(y.D){const dm=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;dm&&(y.ya=dm,De(y.I,y.D,dm))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var K=l;if(y.qa=Fw(y,y.J?y.ia:null,y.W),K.K){Rd(y.h,K);var Oe=K,kt=y.L;kt&&(Oe.I=kt),Oe.B&&(na(Oe),ta(Oe)),y.g=K}else Dw(y);0<m.i.length&&Ud(m)}else we[0]!="stop"&&we[0]!="close"||Ls(m,7);else m.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Ls(m,7):lm(m):we[0]!="noop"&&m.l&&m.l.ta(we),m.v=0)}}Ii(4)}catch{}}var Sd=class{constructor(l,h){this.g=l,this.map=h}};function Gl(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wl(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kl(l){return l.h?1:l.g?l.g.size:0}function ia(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ql(l,h){l.g?l.g.add(h):l.h=h}function Rd(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Gl.prototype.cancel=function(){if(this.i=xd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function xd(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return P(l.i)}function nm(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],m=l.length,y=0;y<m;y++)h.push(l[y]);return h}h=[],m=0;for(y in l)h[m++]=l[y];return h}function Yl(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const y in l)h[m++]=y;return h}}}function Pd(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=Yl(l),y=nm(l),O=y.length,F=0;F<O;F++)h.call(void 0,y[F],m&&m[F],l)}var kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),O=null;if(0<=y){var F=l[m].substring(0,y);O=l[m].substring(y+1)}else F=l[m];h(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function fr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof fr){this.h=l.h,jr(this,l.j),this.o=l.o,this.g=l.g,sa(this,l.s),this.l=l.l;var h=l.i,m=new Os;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Jl(this,m),this.m=l.m}else l&&(h=String(l).match(kd))?(this.h=!1,jr(this,h[1]||"",!0),this.o=Ns(h[2]||""),this.g=Ns(h[3]||"",!0),sa(this,h[4]),this.l=Ns(h[5]||"",!0),Jl(this,h[6]||"",!0),this.m=Ns(h[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}fr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ds(h,Nd,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ds(h,Nd,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Ds(m,m.charAt(0)=="/"?sm:im,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Ds(m,am)),l.join("")};function Kn(l){return new fr(l)}function jr(l,h,m){l.j=m?Ns(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function sa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Jl(l,h,m){h instanceof Os?(l.i=h,Ld(l.i,l.h)):(m||(h=Ds(h,om)),l.i=new Os(h,l.h))}function De(l,h,m){l.i.set(h,m)}function Cs(l){return De(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ns(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ds(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,rm),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rm(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Nd=/[#\/\?@]/g,im=/[#\?:]/g,sm=/[#\?]/g,om=/[#\?@]/g,am=/#/g;function Os(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function pr(l){l.g||(l.g=new Map,l.h=0,l.i&&Cd(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Os.prototype,t.add=function(l,h){pr(this),this.i=null,l=Ur(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Dd(l,h){pr(l),h=Ur(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Ee(l,h){return pr(l),h=Ur(l,h),l.g.has(h)}t.forEach=function(l,h){pr(this),this.g.forEach(function(m,y){m.forEach(function(O){l.call(h,O,y,this)},this)},this)},t.na=function(){pr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){const O=l[y];for(let F=0;F<O.length;F++)m.push(h[y])}return m},t.V=function(l){pr(this);let h=[];if(typeof l=="string")Ee(this,l)&&(h=h.concat(this.g.get(Ur(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return pr(this),this.i=null,l=Ur(this,l),Ee(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Od(l,h,m){Dd(l,h),0<m.length&&(l.i=null,l.g.set(Ur(l,h),P(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];const F=encodeURIComponent(String(y)),K=this.V(y);for(y=0;y<K.length;y++){var O=F;K[y]!==""&&(O+="="+encodeURIComponent(String(K[y]))),l.push(O)}}return this.i=l.join("&")};function Ur(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Ld(l,h){h&&!l.j&&(pr(l),l.i=null,l.g.forEach(function(m,y){var O=y.toLowerCase();y!=O&&(Dd(this,y),Od(this,O,m))},l)),l.j=h}function Vd(l,h){const m=new yn;if(a.Image){const y=new Image;y.onload=w(C,m,"TestLoadImage: loaded",!0,h,y),y.onerror=w(C,m,"TestLoadImage: error",!1,h,y),y.onabort=w(C,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=w(C,m,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function v(l,h){const m=new yn,y=new AbortController,O=setTimeout(()=>{y.abort(),C(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(F=>{clearTimeout(O),F.ok?C(m,"TestPingServer: ok",!0,h):C(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),C(m,"TestPingServer: error",!1,h)})}function C(l,h,m,y,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),y(m)}catch{}}function B(){this.g=new Go}function Y(l,h,m){const y=m||"";try{Pd(l,function(O,F){let K=O;u(O)&&(K=Ho(O)),h.push(y+F+"="+encodeURIComponent(K))})}catch(O){throw h.push(y+"type="+encodeURIComponent("_badmap")),O}}function J(l){this.l=l.Ub||null,this.j=l.eb||!1}R(J,Ps),J.prototype.g=function(){return new se(this.l,this.j)},J.prototype.i=function(l){return function(){return l}}({});function se(l,h){et.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(se,et),t=se.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ge(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xe(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ge(this)),this.g&&(this.readyState=3,ge(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ie(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ie(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?xe(this):ge(this),this.readyState==3&&Ie(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,xe(this))},t.Qa=function(l){this.g&&(this.response=l,xe(this))},t.ga=function(){this.g&&xe(this)};function xe(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ge(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function ge(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(se.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qe(l){let h="";return z(l,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function Ve(l,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Qe(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):De(l,h,m))}function Te(l){et.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Te,et);var Ti=/^https?$/i,Xl=["POST","PUT"];t=Te.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zl.g(),this.v=this.o?Wo(this.o):Wo(zl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(F){Ai(this,F);return}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var O in y)m.set(O,y[O]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const F of y.keys())m.set(F,y.get(F));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xl,h,void 0))||y||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of m)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rw(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Ai(this,F)}};function Ai(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Zl(l),Fd(l)}function Zl(l){l.A||(l.A=!0,Ne(l,"complete"),Ne(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ne(this,"complete"),Ne(this,"abort"),Fd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fd(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Md(this):this.bb())},t.bb=function(){Md(this)};function Md(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Br(l)!=4||l.Z()!=2)){if(l.u&&Br(l)==4)zo(l.Ea,0,l);else if(Ne(l,"readystatechange"),Br(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=K===0){var O=String(l.D).match(kd)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),y=!Ti.test(O?O.toLowerCase():"")}m=y}if(m)Ne(l,"complete"),Ne(l,"success");else{l.m=6;try{var F=2<Br(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Zl(l)}}finally{Fd(l)}}}}function Fd(l,h){if(l.g){Rw(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Ne(l,"ready");try{m.onreadystatechange=y}catch{}}}function Rw(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Br(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),_d(h)}};function xw(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function zP(l){const h={};l=(l.g&&2<=Br(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(I(l[y]))continue;var m=k(l[y]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=h[O]||[];h[O]=F,F.push(m)}A(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function Pw(l){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ec("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ec("baseRetryDelayMs",5e3,l),this.cb=ec("retryDelaySeedMs",1e4,l),this.Wa=ec("forwardChannelMaxRetries",2,l),this.wa=ec("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Gl(l&&l.concurrentRequestLimit),this.Da=new B,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pw.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,y){It(0),this.W=l,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Fw(this,null,this.W),Ud(this)};function lm(l){if(kw(l),l.G==3){var h=l.U++,m=Kn(l.I);if(De(m,"SID",l.K),De(m,"RID",h),De(m,"TYPE","terminate"),tc(l,m),h=new dr(l,l.j,h),h.L=2,h.v=Cs(Kn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=jw(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ta(h)}Mw(l)}function jd(l){l.g&&(um(l),l.g.cancel(),l.g=null)}function kw(l){jd(l),l.u&&(a.clearTimeout(l.u),l.u=null),Bd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ud(l){if(!Wl(l.h)&&!l.s){l.s=!0;var h=l.Ga;On||ae(),Q||(On(),Q=!0),ie.add(h,l),l.B=0}}function qP(l,h){return Kl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Fr(p(l.Ga,l,h),Vw(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new dr(this,this.j,l);let F=this.o;if(this.S&&(F?(F=_(F),E(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Nw(this,O,h),m=Kn(this.I),De(m,"RID",l),De(m,"CVER",22),this.D&&De(m,"X-HTTP-Session-Id",this.D),tc(this,m),F&&(this.O?h="headers="+encodeURIComponent(String(Qe(F)))+"&"+h:this.m&&Ve(m,this.m,F)),Ql(this.h,O),this.Ua&&De(m,"TYPE","init"),this.P?(De(m,"$req",h),De(m,"SID","null"),O.T=!0,Zo(O,m,null)):Zo(O,m,h),this.G=2}}else this.G==3&&(l?Cw(this,l):this.i.length==0||Wl(this.h)||Cw(this))};function Cw(l,h){var m;h?m=h.l:m=l.U++;const y=Kn(l.I);De(y,"SID",l.K),De(y,"RID",m),De(y,"AID",l.T),tc(l,y),l.m&&l.o&&Ve(y,l.m,l.o),m=new dr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Nw(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ql(l.h,m),Zo(m,y,h)}function tc(l,h){l.H&&z(l.H,function(m,y){De(h,y,m)}),l.l&&Pd({},function(m,y){De(h,y,m)})}function Nw(l,h,m){m=Math.min(l.i.length,m);var y=l.l?p(l.l.Na,l.l,l):null;e:{var O=l.i;let F=-1;for(;;){const K=["count="+m];F==-1?0<m?(F=O[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let Oe=!0;for(let kt=0;kt<m;kt++){let we=O[kt].g;const Mt=O[kt].map;if(we-=F,0>we)F=Math.max(0,O[kt].g-100),Oe=!1;else try{Y(Mt,K,"req"+we+"_")}catch{y&&y(Mt)}}if(Oe){y=K.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,y}function Dw(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;On||ae(),Q||(On(),Q=!0),ie.add(h,l),l.v=0}}function cm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Fr(p(l.Fa,l),Vw(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ow(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Fr(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),jd(this),Ow(this))};function um(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ow(l){l.g=new dr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Kn(l.qa);De(h,"RID","rpc"),De(h,"SID",l.K),De(h,"AID",l.T),De(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&De(h,"TO",l.ja),De(h,"TYPE","xmlhttp"),tc(l,h),l.m&&l.o&&Ve(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Cs(Kn(h)),m.m=null,m.P=!0,Ad(m,l)}t.Za=function(){this.C!=null&&(this.C=null,jd(this),cm(this),It(19))};function Bd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Lw(l,h){var m=null;if(l.g==h){Bd(l),um(l),l.g=null;var y=2}else if(ia(l.h,h))m=h.D,Rd(l.h,h),y=1;else return;if(l.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;y=ks(),Ne(y,new vd(y,m)),Ud(l)}else Dw(l);else if(O=h.s,O==3||O==0&&0<h.X||!(y==1&&qP(l,h)||y==2&&cm(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),O){case 1:Ls(l,5);break;case 4:Ls(l,10);break;case 3:Ls(l,6);break;default:Ls(l,2)}}}function Vw(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function Ls(l,h){if(l.j.info("Error code "+h),h==2){var m=p(l.fb,l),y=l.Xa;const O=!y;y=new fr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jr(y,"https"),Cs(y),O?Vd(y.toString(),m):v(y.toString(),m)}else It(2);l.G=0,l.l&&l.l.sa(h),Mw(l),kw(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Mw(l){if(l.G=0,l.ka=[],l.l){const h=xd(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function Fw(l,h,m){var y=m instanceof fr?Kn(m):new fr(m);if(y.g!="")h&&(y.g=h+"."+y.g),sa(y,y.s);else{var O=a.location;y=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var F=new fr(null);y&&jr(F,y),h&&(F.g=h),O&&sa(F,O),m&&(F.l=m),y=F}return m=l.D,h=l.ya,m&&h&&De(y,m,h),De(y,"VER",l.la),tc(l,y),y}function jw(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Te(new J({eb:m})):new Te(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uw(){}t=Uw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $d(){}$d.prototype.g=function(l,h){return new _n(l,h)};function _n(l,h){et.call(this),this.g=new Pw(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!I(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new oa(this)}R(_n,et),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){lm(this.g)},_n.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Ho(l),l=m);h.i.push(new Sd(h.Ya++,l)),h.G==3&&Ud(h)},_n.prototype.N=function(){this.g.l=null,delete this.j,lm(this.g),delete this.g,_n.aa.N.call(this)};function Bw(l){Ko.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}R(Bw,Ko);function $w(){Qo.call(this),this.status=1}R($w,Qo);function oa(l){this.g=l}R(oa,Uw),oa.prototype.ua=function(){Ne(this.g,"a")},oa.prototype.ta=function(l){Ne(this.g,new Bw(l))},oa.prototype.sa=function(l){Ne(this.g,new $w)},oa.prototype.ra=function(){Ne(this.g,"b")},$d.prototype.createWebChannel=$d.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,US=function(){return new $d},jS=function(){return ks()},FS=cr,gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yo.NO_ERROR=0,Yo.TIMEOUT=8,Yo.HTTP_ERROR=6,Fh=Yo,Ed.COMPLETE="complete",MS=Ed,Mr.EventType=tt,tt.OPEN="a",tt.CLOSE="b",tt.ERROR="c",tt.MESSAGE="d",et.prototype.listen=et.prototype.K,bc=Mr,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,VS=Te}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const aE="@firebase/firestore",lE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new Gu("@firebase/firestore");function ya(){return us.logLevel}function SU(t){us.setLogLevel(t)}function U(t,...e){if(us.logLevel<=pe.DEBUG){const n=e.map(mv);us.debug(`Firestore (${Rl}): ${t}`,...n)}}function ct(t,...e){if(us.logLevel<=pe.ERROR){const n=e.map(mv);us.error(`Firestore (${Rl}): ${t}`,...n)}}function Hn(t,...e){if(us.logLevel<=pe.WARN){const n=e.map(mv);us.warn(`Firestore (${Rl}): ${t}`,...n)}}function mv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,BS(t,r,n)}function BS(t,e,n){let r=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ct(r),new Error(r)}function te(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||BS(e,i,r)}function RU(t,e){t||X(57014,e)}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class m4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g4{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){te(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new $S(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string",2055,{h:e}),new At(e)}}class y4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new y4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Be(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){te(this.o===void 0,3512);const r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class xU{getToken(){return Promise.resolve(new yy(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=w4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function _y(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return tg(i)===tg(s)?oe(i,s):tg(i)?1:-1}return oe(t.length,e.length)}const I4=55296,E4=57343;function tg(t){const e=t.charCodeAt(0);return e>=I4&&e<=E4}function el(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function zS(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="__name__";class yr{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=yr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return oe(e.length,n.length)}static compareSegments(e,n){const r=yr.isNumericId(e),i=yr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?yr.extractNumericId(e).compare(yr.extractNumericId(n)):_y(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class ue extends yr{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const T4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends yr{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return T4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vy}static keyField(){return new We([vy])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ue.fromString(e))}static fromName(e){return new G(ue.fromString(e).popFirst(5))}static empty(){return new G(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e,n){if(!n)throw new j(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A4(t,e,n,r){if(e===!0&&r===!0)throw new j(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cE(t){if(!G.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){if(G.isDocumentKey(t))throw new j(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function he(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ap(t);throw new j(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function HS(t,e){if(e<=0)throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Lo(t,e){if(!qS(t))throw new j(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new j(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=-62135596800,hE=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hE);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dE)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hE}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lo(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:mt("string",Ae._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ae(0,0))}static max(){return new re(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=-1;class nl{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function wy(t){return t.fields.find(e=>e.kind===2)}function Bs(t){return t.fields.filter(e=>e.kind!==2)}function b4(t,e){let n=oe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=S4(t.fields[r],e.fields[r]),n!==0)return n;return oe(t.fields.length,e.fields.length)}nl.UNKNOWN_ID=-1;class so{constructor(e,n){this.fieldPath=e,this.kind=n}}function S4(t,e){const n=We.comparator(t.fieldPath,e.fieldPath);return n!==0?n:oe(t.kind,e.kind)}class rl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new rl(0,kn.min())}}function GS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new kn(i,G.empty(),e)}function WS(t){return new kn(t.readTime,t.key,tl)}class kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new kn(re.min(),G.empty(),tl)}static max(){return new kn(re.max(),G.empty(),tl)}}function _v(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==KS)throw t;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="SimpleDb";class bp{static open(e,n,r,i){try{return new bp(n,e.transaction(i,r))}catch(s){throw new qc(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Rt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new qc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=vv(r.target.error);this.S.reject(new qc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(U(wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new x4(n)}}class Sr{static delete(e){return U(wn,"Removing database:",e),Hs(J1().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!B_())return!1;if(Sr.F())return!0;const e=_t(),n=Sr.M(e),r=0<n&&n<10,i=YS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Sr.M(_t())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(U(wn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new qc(e,o))},i.onupgradeneeded=s=>{U(wn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{U(wn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=bp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return c.catch(()=>{}),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(U(wn,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class R4{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Hs(this.U.delete())}}class qc extends j{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Is(t){return t.name==="IndexedDbTransactionError"}class x4{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U(wn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(U(wn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hs(r)}add(e){return U(wn,"ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(n=>(n===void 0&&(n=null),U(wn,"GET",this.store.name,e,n),n))}delete(e){return U(wn,"DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return U(wn,"COUNT",this.store.name),Hs(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,c)=>{o.push(c)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){U(wn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=vv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new R4(a),u=n(a.primaryKey,a.value,c);if(u instanceof L){const d=u.catch(f=>(c.done(),L.reject(f)));r.push(d)}c.isDone?i():c.G===null?a.continue():a.continue(c.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Hs(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=vv(r.target.error);n(i)}})}let fE=!1;function vv(t){const e=Sr.M(_t());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fE||(fE=!0,setTimeout(()=>{throw r},0)),r}}return t}const Hc="IndexBackfiller";class P4{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){U(Hc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();U(Hc,`Documents written: ${n}`)}catch(n){Is(n)?U(Hc,"Ignoring IndexedDB error during index backfill: ",n):await ws(n)}await this.re(6e4)})}}class k4{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U(Hc,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(U(Hc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=WS(s);_v(o,r)>0&&(r=o)}),new kn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ln.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=-1;function td(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function JS(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="";function Ht(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pE(e)),e=C4(t.get(n),e);return pE(e)}function C4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Of:n+="";break;default:n+=s}}return n}function pE(t){return t+Of+""}function Ir(t){const e=t.length;if(te(e>=2,64408,{path:t}),e===2)return te(t.charAt(0)===Of&&t.charAt(1)==="",56145,{path:t}),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Of,s);switch((o<0||o>n)&&X(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:X(61167,{path:t})}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="remoteDocuments",nd="owner",ua="owner",bu="mutationQueues",N4="userId",er="mutations",mE="batchId",to="userMutationsIndex",gE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e){return[t,Ht(e)]}function XS(t,e,n){return[t,Ht(e),n]}const D4={},il="documentMutations",Lf="remoteDocumentsV14",O4=["prefixPath","collectionGroup","readTime","documentId"],Uh="documentKeyIndex",L4=["prefixPath","collectionGroup","documentId"],ZS="collectionGroupIndex",V4=["collectionGroup","readTime","prefixPath","documentId"],Su="remoteDocumentGlobal",Iy="remoteDocumentGlobalKey",sl="targets",eR="queryTargetsIndex",M4=["canonicalId","targetId"],ol="targetDocuments",F4=["targetId","path"],wv="documentTargetsIndex",j4=["path","targetId"],Vf="targetGlobalKey",oo="targetGlobal",Ru="collectionParents",U4=["collectionId","parent"],al="clientMetadata",B4="clientId",Sp="bundles",$4="bundleId",Rp="namedQueries",z4="name",Iv="indexConfiguration",q4="indexId",Ey="collectionGroupIndex",H4="collectionGroup",Gc="indexState",G4=["indexId","uid"],tR="sequenceNumberIndex",W4=["uid","sequenceNumber"],Wc="indexEntries",K4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nR="documentKeyIndex",Q4=["indexId","uid","orderedDocumentKey"],xp="documentOverlays",Y4=["userId","collectionPath","documentId"],Ty="collectionPathOverlayIndex",J4=["userId","collectionPath","largestBatchId"],rR="collectionGroupOverlayIndex",X4=["userId","collectionGroup","largestBatchId"],Ev="globals",Z4="name",iR=[bu,er,il,$s,sl,nd,oo,ol,al,Su,Ru,Sp,Rp],eF=[...iR,xp],sR=[bu,er,il,Lf,sl,nd,oo,ol,al,Su,Ru,Sp,Rp,xp],oR=sR,Tv=[...oR,Iv,Gc,Wc],tF=Tv,aR=[...Tv,Ev],nF=aR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay extends QS{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function vt(t,e){const n=W(t);return Sr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function cR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=i??Nt.EMPTY,this.right=s??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _E(this.data.getIterator())}getIteratorFrom(e){return new _E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Re(this.comparator);return n.data=e,n}}class _E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function da(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Re(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uR("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const rF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(te(!!t,39018),typeof t=="string"){let e=0;const n=rF.exec(t);if(te(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="server_timestamp",hR="__type__",fR="__previous_value__",pR="__local_write_time__";function Pp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[hR])==null?void 0:r.stringValue)===dR}function kp(t){const e=t.mapValue.fields[fR];return Pp(e)?kp(e):e}function xu(t){const e=oi(t.mapValue.fields[pR].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const Pu="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||Pu}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===Pu}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="__type__",mR="__max__",Gi={mapValue:{fields:{__type__:{stringValue:mR}}}},bv="__vector__",ll="value",Bh={nullValue:"NULL_VALUE"};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pp(t)?4:gR(t)?9007199254740991:Cp(t)?10:11:X(28295,{value:t})}function kr(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=oi(i.timestampValue),a=oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ai(i.bytesValue).isEqual(ai(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Au(o)===Au(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return el(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yE(o)!==yE(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kr(o[c],a[c])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function ku(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),c=He(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return vE(t.timestampValue,e.timestampValue);case 4:return vE(xu(t),xu(e));case 5:return _y(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ai(s),c=ai(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=oe(a[u],c[u]);if(d!==0)return d}return oe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(He(s.latitude),He(o.latitude));return a!==0?a:oe(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,w,R,P;const a=s.fields||{},c=o.fields||{},u=(p=a[ll])==null?void 0:p.arrayValue,d=(w=c[ll])==null?void 0:w.arrayValue,f=oe(((R=u==null?void 0:u.values)==null?void 0:R.length)||0,((P=d==null?void 0:d.values)==null?void 0:P.length)||0);return f!==0?f:wE(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gi.mapValue&&o===Gi.mapValue)return 0;if(s===Gi.mapValue)return 1;if(o===Gi.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const p=_y(c[f],d[f]);if(p!==0)return p;const w=hs(a[c[f]],u[d[f]]);if(w!==0)return w}return oe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function vE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=oi(t),r=oi(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function wE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hs(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function cl(t){return by(t)}function by(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=by(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${by(n.fields[o])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function $h(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kp(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+$h(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Es(r.fields,(s,o)=>{i+=s.length+$h(o)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function vo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Cu(t){return!!t&&"arrayValue"in t}function IE(t){return!!t&&"nullValue"in t}function EE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function Cp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Av])==null?void 0:r.stringValue)===bv}function Kc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Kc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(t.arrayValue.values[n]);return e}return{...t}}function gR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mR}const yR={mapValue:{fields:{[Av]:{stringValue:bv},[ll]:{arrayValue:{}}}}};function sF(t){return"nullValue"in t?Bh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?vo(_o.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Cp(t)?yR:{mapValue:{}}:X(35942,{value:t})}function oF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?vo(_o.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?yR:"mapValue"in t?Cp(t)?{mapValue:{}}:Gi:X(61959,{value:t})}function TE(t,e){const n=hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function AE(t,e){const n=hs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=We.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Kc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Es(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dt(Kc(this.value))}}function _R(t){const e=[];return Es(t.fields,(n,r)=>{const i=new We([n]);if(zh(r)){const s=_R(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ue(e,0,re.min(),re.min(),re.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ue(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new Ue(e,2,n,re.min(),re.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new Ue(e,3,n,re.min(),re.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ue&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n){this.position=e,this.inclusive=n}}function bE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=hs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function SE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function aF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{}class me extends vR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lF(e,n,r):n==="array-contains"?new dF(e,r):n==="in"?new bR(e,r):n==="not-in"?new hF(e,r):n==="array-contains-any"?new fF(e,r):new me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cF(e,r):new uF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hs(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class be extends vR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new be(e,n)}matches(e){return ul(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ul(t){return t.op==="and"}function Ry(t){return t.op==="or"}function Sv(t){return wR(t)&&ul(t)}function wR(t){for(const e of t.filters)if(e instanceof be)return!1;return!0}function xy(t){if(t instanceof me)return t.field.canonicalString()+t.op.toString()+cl(t.value);if(Sv(t))return t.filters.map(e=>xy(e)).join(",");{const e=t.filters.map(n=>xy(n)).join(",");return`${t.op}(${e})`}}function IR(t,e){return t instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IR(o,i.filters[a]),!0):!1}(t,e):void X(19439)}function ER(t,e){const n=t.filters.concat(e);return be.create(n,t.op)}function TR(t){return t instanceof me?function(n){return`${n.field.canonicalString()} ${n.op} ${cl(n.value)}`}(t):t instanceof be?function(n){return n.op.toString()+" {"+n.getFilters().map(TR).join(" ,")+"}"}(t):"Filter"}class lF extends me{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class cF extends me{constructor(e,n){super(e,"in",n),this.keys=AR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uF extends me{constructor(e,n){super(e,"not-in",n),this.keys=AR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class dF extends me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cu(n)&&ku(n.arrayValue,this.value)}}class bR extends me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}}class hF extends me{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ku(this.value.arrayValue,n)}}class fF extends me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function Py(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pF(t,e,n,r,i,s,o)}function wo(t){const e=W(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cl(r)).join(",")),e.Te=n}return e.Te}function rd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SE(t.startAt,e.startAt)&&SE(t.endAt,e.endAt)}function Mf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ff(t,e){return t.filters.filter(n=>n instanceof me&&n.field.isEqual(e))}function RE(t,e,n){let r=Bh,i=!0;for(const s of Ff(t,e)){let o=Bh,a=!0;switch(s.op){case"<":case"<=":o=sF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Bh}TE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];TE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function xE(t,e,n){let r=Gi,i=!0;for(const s of Ff(t,e)){let o=Gi,a=!0;switch(s.op){case">=":case">":o=oF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Gi}AE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];AE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SR(t,e,n,r,i,s,o,a){return new fi(t,e,n,r,i,s,o,a)}function xl(t){return new fi(t)}function PE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rv(t){return t.collectionGroup!==null}function qa(t){const e=W(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Re(We.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Nu(s,r))}),n.has(We.keyField().canonicalString())||e.Ie.push(new Nu(We.keyField(),r))}return e.Ie}function Gt(t){const e=W(t);return e.Ee||(e.Ee=xR(e,qa(t))),e.Ee}function RR(t){const e=W(t);return e.de||(e.de=xR(e,t.explicitOrderBy)),e.de}function xR(t,e){if(t.limitType==="F")return Py(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nu(i.field,s)});const n=t.endAt?new fs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fs(t.startAt.position,t.startAt.inclusive):null;return Py(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ky(t,e){const n=t.filters.concat([e]);return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jf(t,e,n){return new fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function id(t,e){return rd(Gt(t),Gt(e))&&t.limitType===e.limitType}function PR(t){return`${wo(Gt(t))}|lt:${t.limitType}`}function _a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TR(i)).join(", ")}]`),td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cl(i)).join(",")),`Target(${r})`}(Gt(t))}; limitType=${t.limitType})`}function sd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of qa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const u=bE(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,qa(r),i)||r.endAt&&!function(o,a,c){const u=bE(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,qa(r),i))}(t,e)}function kR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CR(t){return(e,n)=>{let r=!1;for(const i of qa(t)){const s=mF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mF(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?hs(c,u):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=new Fe(G.comparator);function un(){return gF}const NR=new Fe(G.comparator);function Sc(...t){let e=NR;for(const n of t)e=e.insert(n.key,n);return e}function DR(t){let e=NR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Er(){return Qc()}function OR(){return Qc()}function Qc(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const yF=new Fe(G.comparator),_F=new Re(G.comparator);function le(...t){let e=_F;for(const n of t)e=e.add(n);return e}const vF=new Re(oe);function xv(){return vF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function LR(t){return{integerValue:""+t}}function VR(t,e){return JS(e)?LR(e):Pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this._=void 0}}function wF(t,e,n){return t instanceof dl?function(i,s){const o={fields:{[hR]:{stringValue:dR},[pR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Pp(s)&&(s=kp(s)),s&&(o.fields[fR]=s),{mapValue:o}}(n,e):t instanceof Io?FR(t,e):t instanceof Eo?jR(t,e):function(i,s){const o=MR(i,s),a=kE(o)+kE(i.Ae);return Sy(o)&&Sy(i.Ae)?LR(a):Pv(i.serializer,a)}(t,e)}function IF(t,e,n){return t instanceof Io?FR(t,e):t instanceof Eo?jR(t,e):n}function MR(t,e){return t instanceof hl?function(r){return Sy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class dl extends Np{}class Io extends Np{constructor(e){super(),this.elements=e}}function FR(t,e){const n=UR(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Eo extends Np{constructor(e){super(),this.elements=e}}function jR(t,e){let n=UR(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class hl extends Np{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kE(t){return He(t.integerValue||t.doubleValue)}function UR(t){return Cu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.field=e,this.transform=n}}function EF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Io&&i instanceof Io||r instanceof Eo&&i instanceof Eo?el(r.elements,i.elements,kr):r instanceof hl&&i instanceof hl?kr(r.Ae,i.Ae):r instanceof dl&&i instanceof dl}(t.transform,e.transform)}class TF{constructor(e,n){this.version=e,this.transformResults=n}}class Ke{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ke}static exists(e){return new Ke(void 0,e)}static updateTime(e){return new Ke(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dp{}function BR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kl(t.key,Ke.none()):new Pl(t.key,t.data,Ke.none());{const n=t.data,r=Dt.empty();let i=new Re(We.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mi(t.key,r,new cn(i.toArray()),Ke.none())}}function AF(t,e,n){t instanceof Pl?function(i,s,o){const a=i.value.clone(),c=NE(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mi?function(i,s,o){if(!qh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=NE(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($R(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yc(t,e,n,r){return t instanceof Pl?function(s,o,a,c){if(!qh(s.precondition,o))return a;const u=s.value.clone(),d=DE(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof mi?function(s,o,a,c){if(!qh(s.precondition,o))return a;const u=DE(s.fieldTransforms,c,o),d=o.data;return d.setAll($R(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return qh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function bF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=MR(r.transform,i||null);s!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,s))}return n||null}function CE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&el(r,i,(s,o)=>EF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pl extends Dp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mi extends Dp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $R(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function NE(t,e,n){const r=new Map;te(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,IF(o,a,n[i]))}return r}function DE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wF(s,o,e))}return r}class kl extends Dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kv extends Dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&AF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=BR(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(n,r)=>CE(n,r))&&el(this.baseMutations,e.baseMutations,(n,r)=>CE(n,r))}}class Nv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return yF}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Nv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,ye;function qR(t){switch(t){case V.OK:return X(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function HR(t){if(t===void 0)return ct("GRPC error has no .code"),V.UNKNOWN;switch(t){case ht.OK:return V.OK;case ht.CANCELLED:return V.CANCELLED;case ht.UNKNOWN:return V.UNKNOWN;case ht.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case ht.INTERNAL:return V.INTERNAL;case ht.UNAVAILABLE:return V.UNAVAILABLE;case ht.UNAUTHENTICATED:return V.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case ht.NOT_FOUND:return V.NOT_FOUND;case ht.ALREADY_EXISTS:return V.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return V.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case ht.ABORTED:return V.ABORTED;case ht.OUT_OF_RANGE:return V.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return V.UNIMPLEMENTED;case ht.DATA_LOSS:return V.DATA_LOSS;default:return X(39323,{code:t})}}(ye=ht||(ht={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=new os([4294967295,4294967295],0);function OE(t){const e=GR().encode(t),n=new LS;return n.update(e),new Uint8Array(n.digest())}function LE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new os([n,r],0),new os([i,s],0)]}class Ov{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rc(`Invalid padding: ${n}`);if(r<0)throw new Rc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=os.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(os.fromNumber(r)));return i.compare(RF)===1&&(i=new os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=OE(e),[r,i]=LE(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ov(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=OE(e),[r,i]=LE(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ad(re.min(),i,new Fe(oe),un(),le())}}class ld{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ld(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class WR{constructor(e,n){this.targetId=e,this.Ce=n}}class KR{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class VE{constructor(){this.ve=0,this.Fe=ME(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:s})}}),new ld(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ME()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xF{constructor(e){this.Ge=e,this.ze=new Map,this.je=un(),this.Je=fh(),this.He=fh(),this.Ye=new Fe(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Mf(s))if(r===0){const o=new G(s.path);this.et(n,o,Ue.newNoDocument(o,re.min()))}else te(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}Jc==null||Jc.lt(function(d,f,p,w,R){var T,I,b;const P={localCacheCount:d,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},N=f.unchangedNames;return N&&(P.bloomFilter={applied:R===0,hashCount:(N==null?void 0:N.hashCount)??0,bitmapLength:((I=(T=N==null?void 0:N.bits)==null?void 0:T.bitmap)==null?void 0:I.length)??0,padding:((b=N==null?void 0:N.bits)==null?void 0:b.padding)??0,mightContain:M=>(w==null?void 0:w.mightContain(M))??!1}),P}(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ai(r).toUint8Array()}catch(c){if(c instanceof uR)return Hn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ov(o,i,s)}catch(c){return Hn(c instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Mf(a.target)){const c=new G(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ue.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new ad(e,n,this.Ye,this.je,r);return this.je=un(),this.Je=fh(),this.He=fh(),this.Ye=new Fe(oe),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new VE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Re(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Re(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new VE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fh(){return new Fe(G.comparator)}function ME(){return new Fe(G.comparator)}const PF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),kF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),CF=(()=>({and:"AND",or:"OR"}))();class NF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cy(t,e){return t.useProto3Json||td(e)?e:{value:e}}function fl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DF(t,e){return fl(t,e.toTimestamp())}function ut(t){return te(!!t,49232),re.fromTimestamp(function(n){const r=oi(n);return new Ae(r.seconds,r.nanos)}(t))}function Lv(t,e){return Ny(t,e).canonicalString()}function Ny(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YR(t){const e=ue.fromString(t);return te(sx(e),10190,{key:e.toString()}),e}function Du(t,e){return Lv(t.databaseId,e.path)}function Rr(t,e){const n=YR(e);if(n.get(1)!==t.databaseId.projectId)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(ZR(n))}function JR(t,e){return Lv(t.databaseId,e)}function XR(t){const e=YR(t);return e.length===4?ue.emptyPath():ZR(e)}function Dy(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZR(t){return te(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function FE(t,e,n){return{name:Du(t,e),fields:n.value.mapValue.fields}}function Op(t,e,n){const r=Rr(t,e.name),i=ut(e.updateTime),s=e.createTime?ut(e.createTime):re.min(),o=new Dt({mapValue:{fields:e.fields}}),a=Ue.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function OF(t,e){return"found"in e?function(r,i){te(!!i.found,43571),i.found.name,i.found.updateTime;const s=Rr(r,i.found.name),o=ut(i.found.updateTime),a=i.found.createTime?ut(i.found.createTime):re.min(),c=new Dt({mapValue:{fields:i.found.fields}});return Ue.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){te(!!i.missing,3894),te(!!i.readTime,22933);const s=Rr(r,i.missing),o=ut(i.readTime);return Ue.newNoDocument(s,o)}(t,e):X(7234,{result:e})}function LF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(te(d===void 0||typeof d=="string",58123),rt.fromBase64String(d||"")):(te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?V.UNKNOWN:HR(u.code);return new j(d,u.message||"")}(o);n=new KR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rr(t,r.document.name),s=ut(r.document.updateTime),o=r.document.createTime?ut(r.document.createTime):re.min(),a=new Dt({mapValue:{fields:r.document.fields}}),c=Ue.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Hh(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Rr(t,r.document),s=r.readTime?ut(r.readTime):re.min(),o=Ue.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Rr(t,r.document),s=r.removedTargetIds||[];n=new Hh([],s,i,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new SF(i,s),a=r.targetId;n=new WR(a,o)}}return n}function Ou(t,e){let n;if(e instanceof Pl)n={update:FE(t,e.key,e.value)};else if(e instanceof kl)n={delete:Du(t,e.key)};else if(e instanceof mi)n={update:FE(t,e.key,e.data),updateMask:BF(e.fieldMask)};else{if(!(e instanceof kv))return X(16599,{Vt:e.type});n={verify:Du(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof dl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Eo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function Oy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ke.updateTime(ut(s.updateTime)):s.exists!==void 0?Ke.exists(s.exists):Ke.none()}(e.currentDocument):Ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)te(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new dl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];c=new Io(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];c=new Eo(d)}else"increment"in a?c=new hl(o,a.increment):X(16584,{proto:a});const u=We.fromServerFormat(a.fieldPath);return new od(u,c)}(t,i)):[];if(e.update){e.update.name;const i=Rr(t,e.update.name),s=new Dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new cn(u.map(d=>We.fromServerFormat(d)))}(e.updateMask);return new mi(i,s,o,n,r)}return new Pl(i,s,n,r)}if(e.delete){const i=Rr(t,e.delete);return new kl(i,n)}if(e.verify){const i=Rr(t,e.verify);return new kv(i,n)}return X(1463,{proto:e})}function VF(t,e){return t&&t.length>0?(te(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ut(i.updateTime):ut(s);return o.isEqual(re.min())&&(o=ut(s)),new TF(o,i.transformResults||[])}(n,e))):[]}function ex(t,e){return{documents:[JR(t,e.path)]}}function Lp(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JR(t,i);const s=function(u){if(u.length!==0)return ix(be.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Bi(p.field),direction:FF(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function tx(t,e,n,r){const{ft:i,parent:s}=Lp(t,e),o={},a=[];let c=0;return n.forEach(u=>{const d=r?u.alias:"aggregate_"+c++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:Bi(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:Bi(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function nx(t){let e=XR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){te(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const p=rx(f);return p instanceof be&&Sv(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(R){return new Nu(va(R.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,td(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,w=f.values||[];return new fs(w,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,w=f.values||[];return new fs(w,p)}(n.endAt)),SR(e,i,o,s,a,"F",c,u)}function MF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=va(n.unaryFilter.field);return me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=va(n.unaryFilter.field);return me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return me.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return be.create(n.compositeFilter.filters.map(r=>rx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function FF(t){return PF[t]}function jF(t){return kF[t]}function UF(t){return CF[t]}function Bi(t){return{fieldPath:t.canonicalString()}}function va(t){return We.fromServerFormat(t.fieldPath)}function ix(t){return t instanceof me?function(n){if(n.op==="=="){if(EE(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NAN"}};if(IE(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(EE(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NAN"}};if(IE(n.value))return{unaryFilter:{field:Bi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bi(n.field),op:jF(n.op),value:n.value}}}(t):t instanceof be?function(n){const r=n.getFilters().map(i=>ix(i));return r.length===1?r[0]:{compositeFilter:{op:UF(n.op),filters:r}}}(t):X(54877,{filter:t})}function BF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r,i,s=re.min(),o=re.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.yt=e}}function $F(t,e){let n;if(e.document)n=Op(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=Ao(e.noDocument.readTime);n=Ue.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const r=G.fromSegments(e.unknownDocument.path),i=Ao(e.unknownDocument.version);n=Ue.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ae(i[0],i[1]);return re.fromTimestamp(s)}(e.readTime)),n}function jE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Du(s,o.key),fields:o.data.value.mapValue.fields,updateTime:fl(s,o.version.toTimestamp()),createTime:fl(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:To(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:To(e.version)}}return r}function Uf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function To(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ao(t){const e=new Ae(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function Gs(t,e){const n=(e.baseMutations||[]).map(s=>Oy(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Oy(t.yt,s)),i=Ae.fromMillis(e.localWriteTimeMs);return new Cv(e.batchId,i,n,r)}function xc(t){const e=Ao(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ao(t.lastLimboFreeSnapshotVersion):re.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return te(o===1,1966,{count:o}),Gt(xl(XR(s.documents[0])))}(t.query):function(s){return Gt(nx(s))}(t.query),new Kr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rt.fromBase64String(t.resumeToken))}function ax(t,e){const n=To(e.snapshotVersion),r=To(e.lastLimboFreeSnapshotVersion);let i;i=Mf(e.target)?ex(t.yt,e.target):Lp(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Vp(t){const e=nx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jf(e,e.limit,"L"):e}function ng(t,e){return new Dv(e.largestBatchId,Oy(t.yt,e.overlayMutation))}function UE(t,e){const n=e.path.lastSegment();return[t,Ht(e.path.popLast()),n]}function BE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:To(r.readTime),documentKey:Ht(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{getBundleMetadata(e,n){return $E(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ao(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return $E(e).put(function(i){return{bundleId:i.id,createTime:To(ut(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return zE(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Vp(s.bundledQuery),readTime:Ao(s.readTime)}}(r)})}saveNamedQuery(e,n){return zE(e).put(function(i){return{name:i.name,readTime:To(ut(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function $E(t){return vt(t,Sp)}function zE(t){return vt(t,Rp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Mp(e,r)}getOverlay(e,n){return hc(e).get(UE(this.userId,n)).next(r=>r?ng(this.serializer,r):null)}getOverlays(e,n){const r=Er();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Dv(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Ht(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(hc(e).Z(Ty,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Er(),s=Ht(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return hc(e).J(Ty,o).next(a=>{for(const c of a){const u=ng(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Er();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return hc(e).ee({index:rR,range:a},(c,u,d)=>{const f=ng(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}St(e,n){return hc(e).put(function(i,s,o){const[a,c,u]=UE(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ou(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function hc(t){return vt(t,xp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{bt(e){return vt(e,Ev)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(He(e.integerValue));else if("doubleValue"in e){const r=He(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Au(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=oi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ai(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?gR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Cp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=ll,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(He(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ws.Kt=new Ws;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=255;function HF(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function qE(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=HF(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class GF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=qE(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=qE(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(ha),this.sn(255)}_n(){this.an(ha),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ha?(this.sn(ha),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ha?(this.an(ha),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class WF{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class KF{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class fc{constructor(){this.cn=new GF,this.ln=new WF(this.cn),this.hn=new KF(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ks(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Gh(this.En),directionalValue:Gh(this.dn),orderedDocumentKey:Gh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Pi(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=HE(t.En,e.En),n!==0?n:(n=HE(t.dn,e.dn),n!==0?n:G.comparator(t.In,e.In)))}function HE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Gh(t){return ob()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function GE(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class WE{constructor(e){this.mn=new Re((n,r)=>We.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(te(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=wy(e);if(n!==void 0&&!this.wn(n))return!1;const r=Bs(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.Sn(a,c)||!this.bn(this.fn[o++],c))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Re(We.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new so(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new so(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new so(r.field,r.dir==="asc"?0:1)));return new nl(nl.UNKNOWN_ID,this.collectionId,n,rl.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(t){var n,r;if(te(t instanceof me||t instanceof be,20012),t instanceof me){if(t instanceof bR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>me.create(t.field,"==",s)))||[];return be.create(i,"or")}return t}const e=t.filters.map(i=>lx(i));return be.create(e,t.op)}function QF(t){if(t.getFilters().length===0)return[];const e=My(lx(t));return te(cx(e),7391),Ly(e)||Vy(e)?[e]:e.getFilters()}function Ly(t){return t instanceof me}function Vy(t){return t instanceof be&&Sv(t)}function cx(t){return Ly(t)||Vy(t)||function(n){if(n instanceof be&&Ry(n)){for(const r of n.getFilters())if(!Ly(r)&&!Vy(r))return!1;return!0}return!1}(t)}function My(t){if(te(t instanceof me||t instanceof be,34018),t instanceof me)return t;if(t.filters.length===1)return My(t.filters[0]);const e=t.filters.map(r=>My(r));let n=be.create(e,t.op);return n=Bf(n),cx(n)?n:(te(n instanceof be,64498),te(ul(n),40251),te(n.filters.length>1,57927),n.filters.reduce((r,i)=>Vv(r,i)))}function Vv(t,e){let n;return te(t instanceof me||t instanceof be,38388),te(e instanceof me||e instanceof be,25473),n=t instanceof me?e instanceof me?function(i,s){return be.create([i,s],"and")}(t,e):KE(t,e):e instanceof me?KE(e,t):function(i,s){if(te(i.filters.length>0&&s.filters.length>0,48005),ul(i)&&ul(s))return ER(i,s.getFilters());const o=Ry(i)?i:s,a=Ry(i)?s:i,c=o.filters.map(u=>Vv(u,a));return be.create(c,"or")}(t,e),Bf(n)}function KE(t,e){if(ul(e))return ER(e,t.getFilters());{const n=e.filters.map(r=>Vv(t,r));return be.create(n,"or")}}function Bf(t){if(te(t instanceof me||t instanceof be,11850),t instanceof me)return t;const e=t.getFilters();if(e.length===1)return Bf(e[0]);if(wR(t))return t;const n=e.map(i=>Bf(i)),r=[];return n.forEach(i=>{i instanceof me?r.push(i):i instanceof be&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:be.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(){this.Cn=new Mv}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(kn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class Mv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Re(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="IndexedDbIndexManager",ph=new Uint8Array(0);class JF{constructor(e,n){this.databaseId=n,this.vn=new Mv,this.Fn=new pi(r=>wo(r),(r,i)=>rd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Ht(i)};return YE(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[zS(n),""],!1,!0);return YE(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ir(o.parent))}return r})}addFieldIndex(e,n){const r=pc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=pa(e);return s.next(a=>{o.put(BE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=pc(e),i=pa(e),s=fa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=pc(e),r=fa(e),i=pa(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new WE(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=fa(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=le();const a=[];return L.forEach(s,(c,u)=>{U(QE,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(c)} to execute ${wo(n)}`);const d=function(b,M){const $=wy(M);if($===void 0)return null;for(const z of Ff(b,$.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(u,c),f=function(b,M){const $=new Map;for(const z of Bs(M))for(const A of Ff(b,z.fieldPath))switch(A.op){case"==":case"in":$.set(z.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return $.set(z.fieldPath.canonicalString(),A.value),Array.from($.values())}return null}(u,c),p=function(b,M){const $=[];let z=!0;for(const A of Bs(M)){const _=A.kind===0?RE(b,A.fieldPath,b.startAt):xE(b,A.fieldPath,b.startAt);$.push(_.value),z&&(z=_.inclusive)}return new fs($,z)}(u,c),w=function(b,M){const $=[];let z=!0;for(const A of Bs(M)){const _=A.kind===0?xE(b,A.fieldPath,b.endAt):RE(b,A.fieldPath,b.endAt);$.push(_.value),z&&(z=_.inclusive)}return new fs($,z)}(u,c),R=this.On(c,u,p),P=this.On(c,u,w),N=this.Nn(c,u,f),T=this.Bn(c.indexId,d,R,p.inclusive,P,w.inclusive,N);return L.forEach(T,I=>r.Y(I,n.limit).next(b=>{b.forEach(M=>{const $=G.fromSegments(M.documentKey);o.has($)||(o=o.add($),a.push($))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=QF(be.create(e.filters,"and")).map(r=>Py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,s.length),u=c/(n!=null?n.length:1),d=[];for(let f=0;f<c;++f){const p=n?this.Ln(n[f/u]):ph,w=this.kn(e,p,r[f%u],i),R=this.qn(e,p,s[f%u],o),P=a.map(N=>this.kn(e,p,N,!0));d.push(...this.createRange(w,R,P))}return d}kn(e,n,r,i){const s=new Ks(e,G.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Ks(e,G.empty(),n,r);return i?s.An():s}xn(e,n){const r=new WE(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Re(We.comparator),d=!1;for(const f of c.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new fc;for(const i of Bs(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Ws.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new fc;return Ws.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new fc;return Ws.Kt.Dt(vo(this.databaseId,n),r.Pn(function(s){const o=Bs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new fc);let s=0;for(const o of Bs(e)){const a=r[s++];for(const c of i)if(this.Un(n,o.fieldPath)&&Cu(a))i=this.Kn(i,o,a);else{const u=c.Pn(o.kind);Ws.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new fc;c.seed(a.un()),Ws.Kt.Dt(o,c.Pn(n.kind)),s.push(c)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=pc(e),i=pa(e);return(n?r.J(Ey,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){const p=f?new rl(f.sequenceNumber,new kn(Ao(f.readTime),new G(Ir(f.documentKey)),f.largestBatchId)):rl.empty(),w=d.fields.map(([R,P])=>new so(We.fromServerFormat(R),P));return new nl(d.indexId,d.collectionGroup,w,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:oe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=pc(e),s=pa(e);return this.Gn(e).next(o=>i.J(Ey,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,c=>s.put(BE(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,c=>this.zn(e,i,c).next(u=>{const d=this.jn(s,c);return u.isEqual(d)?L.resolve():this.Jn(e,s,c,u,d)}))))})}Hn(e,n,r,i){return fa(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return fa(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=fa(e);let s=new Re(Pi);return i.ee({index:nR,range:IDBKeyRange.only([r.indexId,this.uid,Gh(this.$n(r,n))])},(o,a)=>{s=s.add(new Ks(r.indexId,n,GE(a.arrayValue),GE(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Re(Pi);const i=this.Qn(n,e);if(i==null)return r;const s=wy(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Cu(o))for(const a of o.arrayValue.values||[])r=r.add(new Ks(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ks(n.indexId,e.key,ph,i));return r}Jn(e,n,r,i,s){U(QE,"Updating index entries for document '%s'",n.key);const o=[];return function(c,u,d,f,p){const w=c.getIterator(),R=u.getIterator();let P=da(w),N=da(R);for(;P||N;){let T=!1,I=!1;if(P&&N){const b=d(P,N);b<0?I=!0:b>0&&(T=!0)}else P!=null?I=!0:T=!0;T?(f(N),N=da(R)):I?(p(P),P=da(w)):(P=da(w),N=da(R))}}(i,s,Pi,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return pa(e).ee({index:tR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Pi(o,a)).filter((o,a,c)=>!a||Pi(o,c[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Pi(o,e),c=Pi(o,n);if(a===0)i[0]=e.An();else if(a>0&&c<0)i.push(o),i.push(o.An());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,ph,G.empty()),c=i[o+1].Vn(this.uid,ph,G.empty());s.push(IDBKeyRange.bound(a,c))}return s}Zn(e,n){return Pi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(JE)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||X(44426))).next(JE)}}function YE(t){return vt(t,Ru)}function fa(t){return vt(t,Wc)}function pc(t){return vt(t,Iv)}function pa(t){return vt(t,Gc)}function JE(t){te(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;_v(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ux=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,n){const r=t.store(er),i=t.store(il),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},(d,f,p)=>(a++,p.delete()));s.push(c.next(()=>{te(a===1,47070,{batchId:n.batchId})}));const u=[];for(const d of n.mutations){const f=XS(e,d.key.path,n.batchId);s.push(i.delete(f)),u.push(d.key)}return L.waitFor(s).next(()=>u)}function $f(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(ux,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Fp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){te(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Fp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).ee({index:to,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=wa(e),o=ki(e);return o.add({}).next(a=>{te(typeof a=="number",49019);const c=new Cv(a,n,r,i),u=function(w,R,P){const N=P.baseMutations.map(I=>Ou(w.yt,I)),T=P.mutations.map(I=>Ou(w.yt,I));return{userId:R,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:N,mutations:T}}(this.serializer,this.userId,c),d=[];let f=new Re((p,w)=>oe(p.canonicalString(),w.canonicalString()));for(const p of i){const w=XS(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(w,D4))}return f.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=c.keys()}),L.waitFor(d).next(()=>c)})}lookupMutationBatch(e,n){return ki(e).get(n).next(r=>r?(te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Gs(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ki(e).ee({index:to,range:i},(o,a,c)=>{a.userId===this.userId&&(te(a.batchId>=r,47524,{tr:r}),s=Gs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=as;return ki(e).ee({index:to,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,as],[this.userId,Number.POSITIVE_INFINITY]);return ki(e).J(to,n).next(r=>r.map(i=>Gs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=jh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return wa(e).ee({range:i},(o,a,c)=>{const[u,d,f]=o,p=Ir(d);if(u===this.userId&&n.path.isEqual(p))return ki(e).get(f).next(w=>{if(!w)throw X(61480,{nr:o,batchId:f});te(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:f}),s.push(Gs(this.serializer,w))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(oe);const i=[];return n.forEach(s=>{const o=jh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=wa(e).ee({range:a},(u,d,f)=>{const[p,w,R]=u,P=Ir(w);p===this.userId&&s.path.isEqual(P)?r=r.add(R):f.done()});i.push(c)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=jh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Re(oe);return wa(e).ee({range:o},(c,u,d)=>{const[f,p,w]=c,R=Ir(p);f===this.userId&&r.isPrefixOf(R)?R.length===i&&(a=a.add(w)):d.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ki(e).get(s).next(o=>{if(o===null)throw X(35274,{batchId:s});te(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Gs(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return dx(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return wa(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Ir(s[1]);i.push(c)}else a.done()}).next(()=>{te(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return hx(e,this.userId,n)}_r(e){return fx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:as,lastStreamToken:""})}}function hx(t,e,n){const r=jh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return wa(t).ee({range:s,X:!0},(a,c,u)=>{const[d,f,p]=a;d===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function ki(t){return vt(t,er)}function wa(t){return vt(t,il)}function fx(t){return vt(t,bu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bo(0)}static cr(){return new bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new bo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>re.fromTimestamp(new Ae(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ma(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(te(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ma(e).ee((o,a)=>{const c=xc(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ma(e).ee((r,i)=>{const s=xc(i);n(s)})}lr(e){return ZE(e).get(Vf).next(n=>(te(n!==null,2888),n))}hr(e,n){return ZE(e).put(Vf,n)}Pr(e,n){return ma(e).put(ax(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=wo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ma(e).ee({range:i,index:eR},(o,a,c)=>{const u=xc(a);rd(n,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=$i(e);return n.forEach(o=>{const a=Ht(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=$i(e);return L.forEach(n,s=>{const o=Ht(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=$i(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=$i(e);let s=le();return i.ee({range:r,X:!0},(o,a,c)=>{const u=Ir(o[1]),d=new G(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Ht(n.path),i=IDBKeyRange.bound([r],[zS(r)],!1,!0);let s=0;return $i(e).ee({index:wv,X:!0,range:i},([o,a],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return ma(e).get(n).next(r=>r?xc(r):null)}}function ma(t){return vt(t,sl)}function ZE(t){return vt(t,oo)}function $i(t){return vt(t,ol)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="LruGarbageCollector",px=1048576;function tT([t,e],[n,r]){const i=oe(t,n);return i===0?oe(e,r):i}class ZF{constructor(e){this.Ir=e,this.buffer=new Re(tT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){U(eT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Is(n)?U(eT,"Ignoring IndexedDB error during garbage collection: ",n):await ws(n)}await this.Vr(3e5)})}}class e3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(ln.ce);const r=new ZF(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(XE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ya()<=pe.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function gx(t,e){return new e3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.db=e,this.garbageCollector=gx(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return mh(e,r)}removeReference(e,n,r){return mh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return mh(e,n)}br(e,n){return function(i,s){let o=!1;return fx(i).te(a=>hx(i,a,s).next(c=>(c&&(o=!0),L.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const c=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,re.min()),$i(e).delete(function(f){return[0,Ht(f.path)]}(o))))});i.push(c)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return mh(e,n)}Sr(e,n){const r=$i(e);let i,s=ln.ce;return r.ee({index:wv},([o,a],{path:c,sequenceNumber:u})=>{o===0?(s!==ln.ce&&n(new G(Ir(i)),s),s=u,i=c):s=ln.ce}).next(()=>{s!==ln.ce&&n(new G(Ir(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mh(t,e){return $i(t).put(function(r,i){return{targetId:0,path:Ht(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ue.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ms(e).put(r)}removeEntry(e,n,r){return Ms(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Ue.newInvalidDocument(n);return Ms(e).ee({index:Uh,range:IDBKeyRange.only(mc(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Ue.newInvalidDocument(n)};return Ms(e).ee({index:Uh,range:IDBKeyRange.only(mc(n))},(i,s)=>{r={document:this.Cr(n,s),size:$f(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=un(),i=new Fe(G.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,$f(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Re(iT);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(mc(i.first()),mc(i.last())),o=i.getIterator();let a=o.getNext();return Ms(e).ee({index:Uh,range:s},(c,u,d)=>{const f=G.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&iT(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.j(mc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ms(e).J(IDBKeyRange.bound(a,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=un();for(const f of u){const p=this.Cr(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(sd(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=un();const o=rT(n,r),a=rT(n,kn.max());return Ms(e).ee({index:ZS,range:IDBKeyRange.bound(o,a,!0)},(c,u,d)=>{const f=this.Cr(G.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new r3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return nT(e).get(Iy).next(n=>(te(!!n,20021),n))}Dr(e,n){return nT(e).put(Iy,n)}Cr(e,n){if(n){const r=$F(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return Ue.newInvalidDocument(e)}}function _x(t){return new n3(t)}class r3 extends yx{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new pi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Re((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=jE(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=$f(c);r+=u-a.size,n.push(this.Nr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=jE(this.Nr.serializer,o.convertToNoDocument(re.min()));n.push(this.Nr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function nT(t){return vt(t,Su)}function Ms(t){return vt(t,Lf)}function mc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rT(t,e){const n=e.documentKey.path.toArray();return[t,Uf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=oe(n[s],r[s]),i)return i;return i=oe(n.length,r.length),i||(i=oe(n[n.length-2],r[r.length-2]),i||oe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Yc(r.mutation,i,cn.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Er();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Sc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Er();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un();const o=Qc(),a=function(){return Qc()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof mi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Yc(d.mutation,u,d.mutation.getFieldMask(),Ae.now())):o.set(u.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new i3(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Qc();let i=new Fe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||cn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const f=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,f=OR();d.forEach(p=>{if(!s.has(p)){const w=BR(n.get(p),r.get(p));w!==null&&f.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Er());let a=tl,c=s;return o.next(u=>L.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,le())).next(d=>({batchId:a,changes:DR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Sc();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,c=>{const u=function(f,p){return new fi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ue.newInvalidDocument(d)))});let a=Sc();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Yc(d.mutation,u,cn.empty(),Ae.now()),sd(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ut(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Vp(i.bundledQuery),readTime:ut(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.overlays=new Fe(G.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Er();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Er(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Er(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Er(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dv(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.Qr=new Re(Et.$r),this.Ur=new Re(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new ue([])),r=new Et(n,e),i=new Et(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new ue([])),r=new Et(n,e),i=new Et(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Re(Et.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Cv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?as:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),i=new Et(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(oe);return n.forEach(i=>{const s=new Et(i,0),o=new Et(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Et(new G(s),0);let a=new Re(oe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){te(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new Et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.ri=e,this.docs=function(){return new Fe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Ue.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ue.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=un();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||_v(WS(d),r)<=0||(i.has(d.key)||sd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new u3(this)}getSize(e){return L.resolve(this.size)}}class u3 extends yx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e){this.persistence=e,this.si=new pi(n=>wo(n),rd),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Fv,this.targetCount=0,this.ai=bo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.ui={},this.overlays={},this.ci=new ln(0),this.li=!1,this.li=!0,this.hi=new a3,this.referenceDelegate=e(this),this.Pi=new d3(this),this.indexManager=new YF,this.remoteDocumentCache=function(i){return new c3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ox(n),this.Ii=new s3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new l3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const i=new h3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class h3 extends QS{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Ri=new Fv,this.Vi=null}static mi(e){return new jp(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=G.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zf{constructor(e,n){this.persistence=e,this.pi=new pi(r=>Ht(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=gx(this,n)}static mi(e,n){return new zf(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new bp("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore(nd)}(e),function(c){c.createObjectStore(bu,{keyPath:N4}),c.createObjectStore(er,{keyPath:mE,autoIncrement:!0}).createIndex(to,gE,{unique:!0}),c.createObjectStore(il)}(e),sT(e),function(c){c.createObjectStore($s)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(ol),c.deleteObjectStore(sl),c.deleteObjectStore(oo)}(e),sT(e)),o=o.next(()=>function(c){const u=c.store(oo),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put(Vf,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store(er).J().next(f=>{c.deleteObjectStore(er),c.createObjectStore(er,{keyPath:mE,autoIncrement:!0}).createIndex(to,gE,{unique:!0});const p=u.store(er),w=f.map(R=>p.put(R));return L.waitFor(w)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore(al,{keyPath:B4})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Su)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(Sp,{keyPath:$4})})(e),function(c){c.createObjectStore(Rp,{keyPath:z4})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(xp,{keyPath:Y4});u.createIndex(Ty,J4,{unique:!1}),u.createIndex(rR,X4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(Lf,{keyPath:O4});u.createIndex(Uh,L4),u.createIndex(ZS,V4)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore($s))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore(Iv,{keyPath:q4,autoIncrement:!0}).createIndex(Ey,H4,{unique:!1}),c.createObjectStore(Gc,{keyPath:G4}).createIndex(tR,W4,{unique:!1}),c.createObjectStore(Wc,{keyPath:K4}).createIndex(nR,Q4,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Gc).clear()}).next(()=>{n.objectStore(Wc).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(Ev,{keyPath:Z4})})(e)})),r<18&&i>=18&&ob()&&(o=o.next(()=>{n.objectStore(Gc).clear()}).next(()=>{n.objectStore(Wc).clear()})),o}wi(e){let n=0;return e.store($s).ee((r,i)=>{n+=$f(i)}).next(()=>{const r={byteSize:n};return e.store(Su).put(Iy,r)})}yi(e){const n=e.store(bu),r=e.store(er);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,as],[s.userId,s.lastAcknowledgedBatchId]);return r.J(to,o).next(a=>L.forEach(a,c=>{te(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Gs(this.serializer,c);return dx(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(ol),r=e.store($s);return e.store(oo).get(Vf).next(i=>{const s=[];return r.ee((o,a)=>{const c=new ue(o),u=function(f){return[0,Ht(f)]}(c);s.push(n.get(u).next(d=>d?L.resolve():(f=>n.put({targetId:0,path:Ht(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(Ru,{keyPath:U4});const r=n.store(Ru),i=new Mv,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Ht(c)})}};return n.store($s).ee({X:!0},(o,a)=>{const c=new ue(o);return s(c.popLast())}).next(()=>n.store(il).ee({X:!0},([o,a,c],u)=>{const d=Ir(a);return s(d.popLast())}))}Di(e){const n=e.store(sl);return n.ee((r,i)=>{const s=xc(i),o=ax(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store($s),i=[];return r.ee((s,o)=>{const a=n.store(Lf),c=function(f){return f.document?new G(ue.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):X(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(er),i=_x(this.serializer),s=new jv(jp.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(c=>{let u=a.get(c.userId)??le();Gs(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),L.forEach(a,(c,u)=>{const d=new At(u),f=Mp.wt(this.serializer,d),p=s.getIndexManager(d),w=Fp.wt(d,this.serializer,p,s.referenceDelegate);return new vx(i,w,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Ay(n,ln.ce),c).next()})})}}function sT(t){t.createObjectStore(ol,{keyPath:F4}).createIndex(wv,j4,{unique:!0}),t.createObjectStore(sl,{keyPath:"targetId"}).createIndex(eR,M4,{unique:!0}),t.createObjectStore(oo)}const Ci="IndexedDbPersistence",rg=18e5,ig=5e3,sg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wx="main";class Uv{constructor(e,n,r,i,s,o,a,c,u,d,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=d,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!Uv.v())throw new j(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new t3(this,i),this.$i=n+wx,this.serializer=new ox(c),this.Ui=new Sr(this.$i,this.Ni,new f3(this.serializer)),this.hi=new qF,this.Pi=new XF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_x(this.serializer),this.Ii=new zF,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&ct(Ci,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,sg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new ln(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Is(e))return U(Ci,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U(Ci,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return gc(e).get(ua).next(n=>L.resolve(this.es(n)))}ts(e){return gh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,rg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=vt(n,al);return r.J().next(i=>{const s=this.ss(i,rg),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):gc(e).get(ua).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,ig)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new j(V.FAILED_PRECONDITION,sg);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(e).J().next(r=>this.ss(r,ig).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U(Ci,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[nd,al],e=>{const n=new Ay(e,ln.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>gh(e).J().next(n=>this.ss(n,rg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Fp.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JF(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Mp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){U(Ci,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===18?nF:c===17?aR:c===16?tF:c===15?Tv:c===14?oR:c===13?sR:c===12?eF:c===11?iR:void X(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new Ay(a,this.ci?this.ci.next():ln.ce),n==="readwrite-primary"?this.Hi(o).next(c=>!!c||this.Yi(o)).next(c=>{if(!c)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new j(V.FAILED_PRECONDITION,KS);return r(o)}).next(c=>this.Xi(o).next(()=>c)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return gc(e).get(ua).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,ig)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(V.FAILED_PRECONDITION,sg)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gc(e).put(ua,n)}static v(){return Sr.v()}Zi(e){const n=gc(e);return n.get(ua).next(r=>this.es(r)?(U(Ci,"Releasing primary lease."),n.delete(ua)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;sb()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return U(Ci,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ct(Ci,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gc(t){return vt(t,nd)}function gh(t){return vt(t,al)}function Bv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $v(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sb()?8:YS(_t())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new p3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ya()<=pe.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",_a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ya()<=pe.DEBUG&&U("QueryEngine","Query:",_a(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ya()<=pe.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",_a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(n))):L.resolve())}ys(e,n){if(PE(n))return L.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jf(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,a);return this.Cs(n,u,o,c.readTime)?this.ys(e,jf(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,i){return PE(n)||i.isEqual(re.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(ya()<=pe.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_a(n)),this.vs(e,o,n,GS(i,tl)).next(a=>a))})}Ds(e,n){let r=new Re(CR(e));return n.forEach((i,s)=>{sd(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ya()<=pe.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",_a(n)),this.ps.getDocumentsMatchingQuery(e,n,kn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="LocalStore",m3=3e8;class g3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Fe(oe),this.xs=new pi(s=>wo(s),rd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ex(t,e,n,r){return new g3(t,e,n,r)}async function Tx(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=le();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function y3(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const f=u.batch,p=f.keys();let w=L.resolve();return p.forEach(R=>{w=w.next(()=>d.getEntry(c,R)).next(P=>{const N=u.docVersions.get(R);te(N!==null,48541),P.version.compareTo(N)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ax(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _3(t,e){const n=W(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,f)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(rt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(f,w),function(P,N,T){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=m3?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,w,d)&&a.push(n.Pi.updateTargetData(s,w))});let c=un(),u=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(bx(s,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!r.isEqual(re.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.Ms=i,s))}function bx(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):U(zv,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function v3(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=as),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pl(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ml(t,e,n){const r=W(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Is(o))throw o;U(zv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function qf(t,e,n){const r=W(t);let i=re.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=W(c),p=f.xs.get(d);return p!==void 0?L.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,d)}(r,o,Gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:le())).next(a=>(xx(r,kR(e),a),{documents:a,Qs:s})))}function Sx(t,e){const n=W(t),r=W(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Rx(t,e){const n=W(t),r=n.Os.get(e)||re.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,GS(r,tl),Number.MAX_SAFE_INTEGER)).then(i=>(xx(n,e,i),i))}function xx(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function w3(t,e,n,r){const i=W(t);let s=le(),o=un();for(const u of n){const d=e.$s(u.metadata.name);u.document&&(s=s.add(d));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(d,f)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await pl(i,function(d){return Gt(xl(ue.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>bx(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Pi.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Pi.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.ks,d.qs)).next(()=>d.ks)))}async function I3(t,e,n=le()){const r=await pl(t,Gt(Vp(e.bundledQuery))),i=W(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ut(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(rt.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firestore_clients";function oT(t,e){return`${Px}_${t}_${e}`}const kx="firestore_mutations";function aT(t,e,n){let r=`${kx}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Cx="firestore_targets";function og(t,e){return`${Cx}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="SharedClientState";class Hf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new Hf(e,n,i.state,s):(ct(_r,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Xc(e,r.state,i):(ct(_r,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=xv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=JS(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Gf(e,s):(ct(_r,`Failed to parse client data for instance '${e}': ${n}`),null)}}class qv{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new qv(n.clientId,n.onlineState):(ct(_r,`Failed to parse online state: ${e}`),null)}}class Fy{constructor(){this.activeTargetIds=xv()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ag{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Fe(oe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=oT(this.persistenceKey,this.Js),this.no=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Fy),this.ro=new RegExp(`^${Px}_${o}_([^_]*)$`),this.io=new RegExp(`^${kx}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Cx}_${o}_(\\d+)$`),this.oo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this._o=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(oT(this.persistenceKey,r));if(i){const s=Gf.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(og(this.persistenceKey,e));if(i){const s=Xc.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(og(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return U(_r,"READ",e,n),n}setItem(e,n){U(_r,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){U(_r,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(U(_r,"EVENT",n.key,n.newValue),n.key===this.eo)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=ln.ce;if(s!=null)try{const a=JSON.parse(s);te(typeof a=="number",30636,{So:s}),o=a}catch(a){ct(_r,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==ln.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Hf(this.currentUser,e,n,r),s=aT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=aT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=og(this.persistenceKey,e),s=new Xc(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Gf.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Hf.Ws(new At(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Xc.Ws(i,n)}uo(e){return qv.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);U(_r,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=xv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Nx{constructor(){this.Mo=new Fy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="ConnectivityMonitor";class cT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){U(lT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){U(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function jy(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="RestConnection",T3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Pu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=jy(),a=this.zo(e,n.toUriEncodedString());U(lg,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:u}=new URL(a),d=ci(u);return this.Jo(e,a,c,r,d).then(f=>(U(lg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Hn(lg,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=T3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class S3 extends A3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=jy();return new Promise((a,c)=>{const u=new VS;u.setWithCredentials(!0),u.listenOnce(MS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fh.NO_ERROR:const f=u.getResponseJson();U(Bt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Fh.TIMEOUT:U(Bt,`RPC '${e}' ${o} timed out`),c(new j(V.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const p=u.getStatus();if(U(Bt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w==null?void 0:w.error;if(R&&R.status&&R.message){const P=function(T){const I=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(I)>=0?I:V.UNKNOWN}(R.status);c(new j(P,R.message))}else c(new j(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new j(V.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{U(Bt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);U(Bt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=jy(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=US(),a=jS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");U(Bt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let p=!1,w=!1;const R=new b3({Yo:N=>{w?U(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(p||(U(Bt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),U(Bt,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},Zo:()=>f.close()}),P=(N,T,I)=>{N.listen(T,b=>{try{I(b)}catch(M){setTimeout(()=>{throw M},0)}})};return P(f,bc.EventType.OPEN,()=>{w||(U(Bt,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),P(f,bc.EventType.CLOSE,()=>{w||(w=!0,U(Bt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(f))}),P(f,bc.EventType.ERROR,N=>{w||(w=!0,Hn(Bt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),R.a_(new j(V.UNAVAILABLE,"The operation could not be completed")))}),P(f,bc.EventType.MESSAGE,N=>{var T;if(!w){const I=N.data[0];te(!!I,16349);const b=I,M=(b==null?void 0:b.error)||((T=b[0])==null?void 0:T.error);if(M){U(Bt,`RPC '${e}' stream ${i} received error:`,M);const $=M.status;let z=function(S){const E=ht[S];if(E!==void 0)return HR(E)}($),A=M.message;z===void 0&&(z=V.INTERNAL,A="Unknown error status: "+$+" with message "+M.message),w=!0,R.a_(new j(z,A)),f.close()}else U(Bt,`RPC '${e}' stream ${i} received:`,I),R.u_(I)}}),P(a,FS.STAT_EVENT,N=>{N.stat===gy.PROXY?U(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===gy.NOPROXY&&U(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){return new NF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="PersistentStream";class Ox{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new j(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return U(uT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(U(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R3 extends Ox{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LF(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?ut(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Dy(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=Mf(c)?{documents:ex(s,c)}:{query:Lp(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QR(s,o.resumeToken);const u=Cy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=fl(s,o.snapshotVersion.toTimestamp());const u=Cy(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=MF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Dy(this.serializer),n.removeTarget=e,this.q_(n)}}class x3 extends Ox{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VF(e.writeResults,e.commitTime),r=ut(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Dy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ou(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{}class k3 extends P3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Ny(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(V.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Ny(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class C3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ct(n),this.aa=!1):U("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class N3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ts(this)&&(U(So,"Restarting streams for network reachability change."),await async function(c){const u=W(c);u.Ea.add(4),await Cl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await cd(u)}(this))})}),this.Ra=new C3(r,i)}}async function cd(t){if(Ts(t))for(const e of t.da)await e(!0)}async function Cl(t){for(const e of t.da)await e(!1)}function Up(t,e){const n=W(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kv(n)?Wv(n):Dl(n).O_()&&Gv(n,e))}function gl(t,e){const n=W(t),r=Dl(n);n.Ia.delete(e),r.O_()&&Lx(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ts(n)&&n.Ra.set("Unknown"))}function Gv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dl(t).Y_(e)}function Lx(t,e){t.Va.Ue(e),Dl(t).Z_(e)}function Wv(t){t.Va=new xF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Dl(t).start(),t.Ra.ua()}function Kv(t){return Ts(t)&&!Dl(t).x_()&&t.Ia.size>0}function Ts(t){return W(t).Ea.size===0}function Vx(t){t.Va=void 0}async function D3(t){t.Ra.set("Online")}async function O3(t){t.Ia.forEach((e,n)=>{Gv(t,e)})}async function L3(t,e){Vx(t),Kv(t)?(t.Ra.ha(e),Wv(t)):t.Ra.set("Unknown")}async function V3(t,e,n){if(t.Ra.set("Online"),e instanceof KR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){U(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof Hh?t.Va.Ze(e):e instanceof WR?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await Ax(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(rt.EMPTY_BYTE_STRING,d.snapshotVersion)),Lx(s,c);const f=new Kr(d.target,c,u,d.sequenceNumber);Gv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){U(So,"Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!Is(e))throw e;t.Ea.add(1),await Cl(t),t.Ra.set("Offline"),n||(n=()=>Ax(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{U(So,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await cd(t)})}function Mx(t,e){return e().catch(n=>Wf(t,n,e))}async function Nl(t){const e=W(t),n=ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:as;for(;M3(e);)try{const i=await v3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,F3(e,i)}catch(i){await Wf(e,i)}Fx(e)&&jx(e)}function M3(t){return Ts(t)&&t.Ta.length<10}function F3(t,e){t.Ta.push(e);const n=ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Fx(t){return Ts(t)&&!ps(t).x_()&&t.Ta.length>0}function jx(t){ps(t).start()}async function j3(t){ps(t).ra()}async function U3(t){const e=ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function B3(t,e,n){const r=t.Ta.shift(),i=Nv.from(r,e,n);await Mx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Nl(t)}async function $3(t,e){e&&ps(t).X_&&await async function(r,i){if(function(o){return qR(o)&&o!==V.ABORTED}(i.code)){const s=r.Ta.shift();ps(r).B_(),await Mx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Nl(r)}}(t,e),Fx(t)&&jx(t)}async function dT(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),U(So,"RemoteStore received new credentials");const r=Ts(n);n.Ea.add(3),await Cl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await cd(n)}async function Uy(t,e){const n=W(t);e?(n.Ea.delete(2),await cd(n)):e||(n.Ea.add(2),await Cl(n),n.Ra.set("Unknown"))}function Dl(t){return t.ma||(t.ma=function(n,r,i){const s=W(n);return s.sa(),new R3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:D3.bind(null,t),t_:O3.bind(null,t),r_:L3.bind(null,t),H_:V3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kv(t)?Wv(t):t.Ra.set("Unknown")):(await t.ma.stop(),Vx(t))})),t.ma}function ps(t){return t.fa||(t.fa=function(n,r,i){const s=W(n);return s.sa(),new x3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:j3.bind(null,t),r_:$3.bind(null,t),ta:U3.bind(null,t),na:B3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Nl(t)):(await t.fa.stop(),t.Ta.length>0&&(U(So,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Qv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ol(t,e){if(ct("AsyncQueue",`${e}: ${t}`),Is(t))return new j(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Sc(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.ga=new Fe(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ro{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ro(e,n,ao.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class q3{constructor(){this.queries=fT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=W(n),s=i.queries;i.queries=fT(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new j(V.ABORTED,"Firestore shutting down"))}}function fT(){return new pi(t=>PR(t),id)}async function Yv(t,e){const n=W(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new z3,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ol(o,`Initialization of query '${_a(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Xv(n)}async function Jv(t,e){const n=W(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function H3(t,e){const n=W(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Xv(n)}function G3(t,e,n){const r=W(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Xv(t){t.Ca.forEach(e=>{e.next()})}var By,pT;(pT=By||(By={})).Ma="default",pT.Cache="cache";class Zv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==By.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.serializer=e}$s(e){return Rr(this.serializer,e)}Us(e){return e.metadata.exists?Op(this.serializer,e.document,!1):Ue.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return ut(e)}}class ew{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=Bx(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ue.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new mT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||le()).add(s);n.set(o,a)}}return n}async ja(e){const n=await w3(e,new mT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await I3(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function Bx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.key=e}}class zx{constructor(e){this.key=e}}class qx{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=CR(e),this.tu=new ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new hT,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),w=sd(this.query,f)?f:null,R=!!p&&this.mutatedKeys.has(p.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;p&&w?p.data.isEqual(w.data)?R!==P&&(r.track({type:3,doc:w}),N=!0):this.su(p,w)||(r.track({type:2,doc:w}),N=!0,(c&&this.eu(w,c)>0||u&&this.eu(w,u)<0)&&(a=!0)):!p&&w?(r.track({type:0,doc:w}),N=!0):p&&!w&&(r.track({type:1,doc:p}),N=!0,(c||u)&&(a=!0)),N&&(w?(o=o.add(w),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(w,R){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:N})}};return P(w)-P(R)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Ro(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new zx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new $x(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const As="SyncEngine";class W3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class K3{constructor(e){this.key=e,this.hu=!1}}class Q3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pi(a=>PR(a),id),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(G.comparator),this.Au=new Map,this.Ru=new Fv,this.Vu={},this.mu=new Map,this.fu=bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y3(t,e,n=!0){const r=Bp(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Hx(r,e,n,!0),i}async function J3(t,e){const n=Bp(t);await Hx(n,e,!0,!1)}async function Hx(t,e,n,r){const i=await pl(t.localStore,Gt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await tw(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Up(t.remoteStore,i),a}async function tw(t,e,n,r,i){t.pu=(f,p,w)=>async function(P,N,T,I){let b=N.view.ru(T);b.Cs&&(b=await qf(P.localStore,N.query,!1).then(({documents:A})=>N.view.ru(A,b)));const M=I&&I.targetChanges.get(N.targetId),$=I&&I.targetMismatches.get(N.targetId)!=null,z=N.view.applyChanges(b,P.isPrimaryClient,M,$);return $y(P,N.targetId,z.au),z.snapshot}(t,f,p,w);const s=await qf(t.localStore,e,!0),o=new qx(e,s.Qs),a=o.ru(s.documents),c=ld.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);$y(t,n,u.au);const d=new W3(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function X3(t,e,n){const r=W(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!id(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ml(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gl(r.remoteStore,i.targetId),yl(r,i.targetId)}).catch(ws)):(yl(r,i.targetId),await ml(r.localStore,i.targetId,!0))}async function Z3(t,e){const n=W(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gl(n.remoteStore,r.targetId))}async function ej(t,e,n){const r=sw(t);try{const i=await function(o,a){const c=W(o),u=Ae.now(),d=a.reduce((w,R)=>w.add(R.key),le());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let R=un(),P=le();return c.Ns.getEntries(w,d).next(N=>{R=N,R.forEach((T,I)=>{I.isValidDocument()||(P=P.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,R)).next(N=>{f=N;const T=[];for(const I of a){const b=bF(I,f.get(I.key).overlayedDocument);b!=null&&T.push(new mi(I.key,b,_R(b.value.mapValue),Ke.exists(!0)))}return c.mutationQueue.addMutationBatch(w,u,T,a)}).next(N=>{p=N;const T=N.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(w,N.batchId,T)})}).then(()=>({batchId:p.batchId,changes:DR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Fe(oe)),u=u.insert(a,c),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await gi(r,i.changes),await Nl(r.remoteStore)}catch(i){const s=Ol(i,"Failed to persist write");n.reject(s)}}async function Gx(t,e){const n=W(t);try{const r=await _3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?te(o.hu,14607):i.removedDocuments.size>0&&(te(o.hu,42227),o.hu=!1))}),await gi(n,r,e)}catch(r){await ws(r)}}function gT(t,e,n){const r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=W(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&Xv(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tj(t,e,n){const r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Fe(G.comparator);o=o.insert(s,Ue.newNoDocument(s,re.min()));const a=le().add(s),c=new ad(re.min(),new Map,new Fe(oe),o,a);await Gx(r,c),r.du=r.du.remove(s),r.Au.delete(e),iw(r)}else await ml(r.localStore,e,!1).then(()=>yl(r,e,n)).catch(ws)}async function nj(t,e){const n=W(t),r=e.batch.batchId;try{const i=await y3(n.localStore,e);rw(n,r,null),nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gi(n,i)}catch(i){await ws(i)}}async function rj(t,e,n){const r=W(t);try{const i=await function(o,a){const c=W(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(te(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);rw(r,e,n),nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gi(r,i)}catch(i){await ws(i)}}async function ij(t,e){const n=W(t);Ts(n.remoteStore)||U(As,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=W(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===as)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Ol(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function nw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rw(t,e,n){const r=W(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function yl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Wx(t,r)})}function Wx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(gl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),iw(t))}function $y(t,e,n){for(const r of n)r instanceof $x?(t.Ru.addReference(r.key,e),sj(t,r)):r instanceof zx?(U(As,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Wx(t,r.key)):X(19791,{wu:r})}function sj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(U(As,"New document in limbo: "+n),t.Eu.add(r),iw(t))}function iw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new K3(n)),t.du=t.du.insert(n,r),Up(t.remoteStore,new Kr(Gt(xl(n.path)),r,"TargetPurposeLimboResolution",ln.ce))}}async function gi(t,e,n){const r=W(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=$v.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,u){const d=W(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,p=>L.forEach(p.Es,w=>d.persistence.referenceDelegate.addReference(f,p.targetId,w)).next(()=>L.forEach(p.ds,w=>d.persistence.referenceDelegate.removeReference(f,p.targetId,w)))))}catch(f){if(!Is(f))throw f;U(zv,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const w=d.Ms.get(p),R=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(R);d.Ms=d.Ms.insert(p,P)}}}(r.localStore,s))}async function oj(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){U(As,"User change. New user:",e.toKey());const r=await Tx(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new j(V.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gi(n,r.Ls)}}function aj(t,e){const n=W(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function lj(t,e){const n=W(t),r=await qf(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&$y(n,e.targetId,i.au),i}async function cj(t,e){const n=W(t);return Rx(n.localStore,e).then(r=>gi(n,r))}async function uj(t,e,n,r){const i=W(t),s=await function(a,c){const u=W(a),d=W(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.er(f,c).next(p=>p?u.localDocuments.getDocuments(f,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Nl(i.remoteStore):n==="acknowledged"||n==="rejected"?(rw(i,e,r||null),nw(i,e),function(a,c){W(W(a).mutationQueue).ir(c)}(i.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await gi(i,s)):U(As,"Cannot apply mutation batch with id: "+e)}async function dj(t,e){const n=W(t);if(Bp(n),sw(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await yT(n,r.toArray());n.gu=!0,await Uy(n.remoteStore,!0);for(const s of i)Up(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(yl(n,o),ml(n.localStore,o,!0))),gl(n.remoteStore,o)}),await i,await yT(n,r),function(o){const a=W(o);a.Au.forEach((c,u)=>{gl(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Fe(G.comparator)}(n),n.gu=!1,await Uy(n.remoteStore,!1)}}async function yT(t,e,n){const r=W(t),i=[],s=[];for(const o of e){let a;const c=r.Iu.get(o);if(c&&c.length!==0){a=await pl(r.localStore,Gt(c[0]));for(const u of c){const d=r.Tu.get(u),f=await lj(r,d);f.snapshot&&s.push(f.snapshot)}}else{const u=await Sx(r.localStore,o);a=await pl(r.localStore,u),await tw(r,Kx(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function Kx(t){return SR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hj(t){return function(n){return W(W(n).persistence).Ts()}(W(t).localStore)}async function fj(t,e,n,r){const i=W(t);if(i.gu)return void U(As,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Rx(i.localStore,kR(s[0])),a=ad.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rt.EMPTY_BYTE_STRING);await gi(i,o,a);break}case"rejected":await ml(i.localStore,e,!0),yl(i,e,r);break;default:X(64155,n)}}async function pj(t,e,n){const r=Bp(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U(As,"Adding an already active target "+i);continue}const s=await Sx(r.localStore,i),o=await pl(r.localStore,s);await tw(r,Kx(s),o.targetId,!1,o.resumeToken),Up(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await ml(r.localStore,i,!1).then(()=>{gl(r.remoteStore,i),yl(r,i)}).catch(ws)}}function Bp(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tj.bind(null,e),e.Pu.H_=H3.bind(null,e.eventManager),e.Pu.yu=G3.bind(null,e.eventManager),e}function sw(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rj.bind(null,e),e}function mj(t,e,n){const r=W(t);(async function(s,o,a){try{const c=await o.getMetadata();if(await function(w,R){const P=W(w),N=ut(R.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",T=>P.Ii.getBundleMetadata(T,R.id)).then(T=>!!T&&T.createTime.compareTo(N)>=0)}(s.localStore,c))return await o.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(Bx(c));const u=new ew(c,o.serializer);let d=await o.bu();for(;d;){const p=await u.Ga(d);p&&a._updateProgress(p),d=await o.bu()}const f=await u.ja(s.localStore);return await gi(s,f.Ha,void 0),await function(w,R){const P=W(w);return P.persistence.runTransaction("Save bundle","readwrite",N=>P.Ii.saveBundleMetadata(N,R))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(c){return Hn(As,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class _l{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ex(this.persistence,new Ix,e.initialUser,this.serializer)}Cu(e){return new jv(jp.mi,this.serializer)}Du(e){return new Nx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_l.provider={build:()=>new _l};class ow extends _l{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){te(this.persistence.referenceDelegate instanceof zf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mx(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new jv(r=>zf.mi(r,n),this.serializer)}}class aw extends _l{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sw(this.xu.syncEngine),await Nl(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Ex(this.persistence,new Ix,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mx(r,e.asyncQueue,n)}Mu(e,n){const r=new k4(n,this.persistence);return new P4(e.asyncQueue,r)}Cu(e){const n=Bv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new Uv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Dx(),Wh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Nx}}class Qx extends aw{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof ag&&(this.sharedClientState.syncEngine={Co:uj.bind(null,n),vo:fj.bind(null,n),Fo:pj.bind(null,n),Ts:hj.bind(null,n),Do:cj.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await dj(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=Dx();if(!ag.v(n))throw new j(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Bv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ag(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ms{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oj.bind(null,this.syncEngine),await Uy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q3}()}createDatastore(e){const n=Vo(e.databaseInfo.databaseId),r=function(s){return new S3(s)}(e.databaseInfo);return function(s,o,a,c){return new k3(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new N3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gT(this.syncEngine,n,0),function(){return cT.v()?new cT:new E3}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,d){const f=new Q3(i,s,o,a,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=W(i);U(So,"RemoteStore shutting down."),s.Ea.add(5),await Cl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ms.provider={build:()=>new ms};function _T(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new Ux(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new Ux(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new j(V.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=W(i),a={documents:s.map(f=>Du(o.serializer,f))},c=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),u=new Map;c.forEach(f=>{const p=OF(o.serializer,f);u.set(p.key.toString(),p)});const d=[];return s.forEach(f=>{const p=u.get(f.toString());te(!!p,55234,{key:f}),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=G.fromPath(r);this.mutations.push(new kv(i,this.precondition(i)))}),await async function(r,i){const s=W(r),o={writes:i.map(a=>Ou(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?Ke.exists(!1):Ke.updateTime(n):Ke.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new j(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ke.updateTime(n)}return Ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new Hv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new _j(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!td(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!qR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class wj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{U(gs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(U(gs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ol(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cg(t,e){t.asyncQueue.verifyOperationInProgress(),U(gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Tx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lw(t);U(gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dT(e.remoteStore,i)),t._onlineComponents=e}async function lw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U(gs,"Using user provided OfflineComponentProvider");try{await cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Hn("Error using user provided cache. Falling back to memory cache: "+n),await cg(t,new _l)}}else U(gs,"Using default OfflineComponentProvider"),await cg(t,new ow(void 0));return t._offlineComponents}async function zp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U(gs,"Using user provided OnlineComponentProvider"),await vT(t,t._uninitializedComponentsProvider._online)):(U(gs,"Using default OnlineComponentProvider"),await vT(t,new ms))),t._onlineComponents}function Yx(t){return lw(t).then(e=>e.persistence)}function Ll(t){return lw(t).then(e=>e.localStore)}function Jx(t){return zp(t).then(e=>e.remoteStore)}function cw(t){return zp(t).then(e=>e.syncEngine)}function Xx(t){return zp(t).then(e=>e.datastore)}async function vl(t){const e=await zp(t),n=e.eventManager;return n.onListen=Y3.bind(null,e.syncEngine),n.onUnlisten=X3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z3.bind(null,e.syncEngine),n}function Ij(t){return t.asyncQueue.enqueue(async()=>{const e=await Yx(t),n=await Jx(t);return e.setNetworkEnabled(!0),function(i){const s=W(i);return s.Ea.delete(0),cd(s)}(n)})}function Ej(t){return t.asyncQueue.enqueue(async()=>{const e=await Yx(t),n=await Jx(t);return e.setNetworkEnabled(!1),async function(i){const s=W(i);s.Ea.add(0),await Cl(s),s.Ra.set("Offline")}(n)})}function Tj(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const f=W(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Ol(a,`Failed to get document '${s} from cache`);o.reject(c)}}(await Ll(t),e,n)),n.promise}function Zx(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const d=new $p({next:p=>{d.Nu(),o.enqueueAndForget(()=>Jv(s,f));const w=p.docs.has(a);!w&&p.fromCache?u.reject(new j(V.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&c&&c.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Zv(xl(a.path),d,{includeMetadataChanges:!0,qa:!0});return Yv(s,f)}(await vl(t),t.asyncQueue,e,n,r)),r.promise}function Aj(t,e){const n=new Rt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await qf(i,s,!0),c=new qx(s,a.Qs),u=c.ru(a.documents),d=c.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const c=Ol(a,`Failed to execute query '${s} against cache`);o.reject(c)}}(await Ll(t),e,n)),n.promise}function eP(t,e,n={}){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const d=new $p({next:p=>{d.Nu(),o.enqueueAndForget(()=>Jv(s,f)),p.fromCache&&c.source==="server"?u.reject(new j(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Zv(a,d,{includeMetadataChanges:!0,qa:!0});return Yv(s,f)}(await vl(t),t.asyncQueue,e,n,r)),r.promise}function bj(t,e,n){const r=new Rt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await Xx(t);r.resolve(async function(o,a,c){var P;const u=W(o),{request:d,gt:f,parent:p}=tx(u.serializer,RR(a),c);u.connection.$o||delete d.parent;const w=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,p,d,1)).filter(N=>!!N.result);te(w.length===1,64727);const R=(P=w[0].result)==null?void 0:P.aggregateFields;return Object.keys(R).reduce((N,T)=>(N[f[T]]=R[T],N),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function Sj(t,e){const n=new $p(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){W(i).Ca.add(s),s.next()}(await vl(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){W(i).Ca.delete(s)}(await vl(t),n))}}function Rj(t,e,n,r){const i=function(o,a){let c;return c=typeof o=="string"?GR().encode(o):o,function(d,f){return new gj(d,f)}(function(d,f){if(d instanceof Uint8Array)return _T(d,f);if(d instanceof ArrayBuffer)return _T(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Vo(e));t.asyncQueue.enqueueAndForget(async()=>{mj(await cw(t),i,r)})}function xj(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=W(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await Ll(t),e))}function tP(t,e){return function(r,i){return new yj(r,i)}(t,e)}function Pj(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=W(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",c=>o.getFieldIndexes(c).next(u=>function(f,p,w,R,P){f=[...f],p=[...p],f.sort(w),p.sort(w);const N=f.length,T=p.length;let I=0,b=0;for(;I<T&&b<N;){const M=w(f[b],p[I]);M<0?P(f[b++]):M>0?R(p[I++]):(I++,b++)}for(;I<T;)R(p[I++]);for(;b<N;)P(f[b++])}(u,i,b4,d=>{a.push(o.addFieldIndex(c,d))},d=>{a.push(o.deleteFieldIndex(c,d))})).next(()=>L.waitFor(a)))}(await Ll(t),e))}function kj(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){W(r).Fs.Vs=i}(await Ll(t),e))}function Cj(t){return t.asyncQueue.enqueue(async()=>function(n){const r=W(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await Ll(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="firestore.googleapis.com",IT=!0;class ET{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new j(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rP,this.ssl=IT}else this.host=e.host,this.ssl=e.ssl??IT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ux;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<px)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nP(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new j(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ET({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ET(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p4;switch(r.type){case"firstParty":return new _4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wT.get(n);r&&(U("ComponentProvider","Removing Datastore"),wT.delete(n),r.terminate())}(this),Promise.resolve()}}function Nj(t,e,n,r={}){var u;t=he(t,ud);const i=ci(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(hp(`https://${a}`),U_("Firestore",!0)),s.host!==rP&&s.host!==a&&Hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!$n(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=At.MOCK_USER;else{d=nb(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new j(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new At(p)}t._authCredentials=new m4(new $S(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xt(this.firestore,e,this._query)}}class Pe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pe(this.firestore,e,this._key)}toJSON(){return{type:Pe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Lo(n,Pe._jsonSchema))return new Pe(e,r||null,new G(ue.fromString(n.referencePath)))}}Pe._jsonSchemaVersion="firestore/documentReference/1.0",Pe._jsonSchema={type:mt("string",Pe._jsonSchemaVersion),referencePath:mt("string")};class xr extends xt{constructor(e,n,r){super(e,n,xl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new G(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function dd(t,e,...n){if(t=Z(t),yv("collection","path",e),t instanceof ud){const r=ue.fromString(e,...n);return uE(r),new xr(t,null,r)}{if(!(t instanceof Pe||t instanceof xr))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return uE(r),new xr(t.firestore,null,r)}}function CU(t,e){if(t=he(t,ud),yv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xt(t,null,function(r){return new fi(ue.emptyPath(),r)}(e))}function lo(t,e,...n){if(t=Z(t),arguments.length===1&&(e=gv.newId()),yv("doc","path",e),t instanceof ud){const r=ue.fromString(e,...n);return cE(r),new Pe(t,null,new G(r))}{if(!(t instanceof Pe||t instanceof xr))throw new j(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return cE(r),new Pe(t.firestore,t instanceof xr?t.converter:null,new G(r))}}function NU(t,e){return t=Z(t),e=Z(e),(t instanceof Pe||t instanceof xr)&&(e instanceof Pe||e instanceof xr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function iP(t,e){return t=Z(t),e=Z(e),t instanceof xt&&e instanceof xt&&t.firestore===e.firestore&&id(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="AsyncQueue";class AT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hv(this,"async_queue_retry"),this._c=()=>{const r=Wh();r&&U(TT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;U(TT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ct("INTERNAL UNHANDLED ERROR: ",bT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Qv.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:bT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Dj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=-1;class Le extends ud{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new AT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AT(e),this._firestoreClient=void 0,await e}}}function OU(t,e,n){n||(n=Pu);const r=ar(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if($n(s,e))return i;throw new j(V.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new j(V.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<px)throw new j(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ci(e.host)&&hp(e.host),r.initialize({options:e,instanceIdentifier:n})}function Oj(t,e){const n=typeof t=="object"?t:Wu(),r=typeof t=="string"?t:e||Pu,i=ar(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Z1("firestore");s&&Nj(i,...s)}return i}function Ze(t){if(t._terminated)throw new j(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sP(t),t._firestoreClient}function sP(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,u,d){return new iF(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nP(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new wj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function LU(t,e){Hn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return oP(t,ms.provider,{build:r=>new aw(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function VU(t){Hn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();oP(t,ms.provider,{build:n=>new Qx(n,e.cacheSizeBytes)})}function oP(t,e,n){if((t=he(t,Le))._firestoreClient||t._terminated)throw new j(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new j(V.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sP(t)}function MU(t){if(t._initialized&&!t._terminated)throw new j(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Sr.v())return Promise.resolve();const i=r+wx;await Sr.delete(i)}(Bv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function FU(t){return function(n){const r=new Rt;return n.asyncQueue.enqueueAndForget(async()=>ij(await cw(n),r)),r.promise}(Ze(t=he(t,Le)))}function jU(t){return Ij(Ze(t=he(t,Le)))}function UU(t){return Ej(Ze(t=he(t,Le)))}function BU(t){return eD(t.app,"firestore",t._databaseId.database),t._delete()}function ST(t,e){const n=Ze(t=he(t,Le)),r=new Dj;return Rj(n,t._databaseId,e,r),r}function Lj(t,e){return xj(Ze(t=he(t,Le)),e).then(n=>n?new xt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class Vj{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(rt.fromBase64String(e))}catch(n){throw new j(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lo(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:mt("string",In._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function $U(){return new Mo(vy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(Lo(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:mt("string",Pr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lo(e,sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new sr(e.vectorValues);throw new j(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}sr._jsonSchemaVersion="firestore/vectorValue/1.0",sr._jsonSchema={type:mt("string",sr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=/^__.*__$/;class Fj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pl(e,this.data,n,this.fieldTransforms)}}class aP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class qp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lP(this.Ac)&&Mj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vo(e)}Cc(e,n,r,i=!1){return new qp({Ac:e,methodName:n,Dc:r,path:We.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jo(t){const e=t._freezeSettings(),n=Vo(t._databaseId);return new jj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hp(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);gw("Data must be an object, but it was:",o,r);const a=dP(r,o);let c,u;if(s.merge)c=new cn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=Vu(e,f,n);if(!o.contains(p))throw new j(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fP(d,p)||d.push(p)}c=new cn(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Fj(new Dt(a),c,u)}class hd extends Fo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hd}}function cP(t,e,n){return new qp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uw extends Fo{_toFieldTransform(e){return new od(e.path,new dl)}isEqual(e){return e instanceof uw}}class dw extends Fo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cP(this,e,!0),r=this.vc.map(s=>Uo(s,n)),i=new Io(r);return new od(e.path,i)}isEqual(e){return e instanceof dw&&$n(this.vc,e.vc)}}class hw extends Fo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=cP(this,e,!0),r=this.vc.map(s=>Uo(s,n)),i=new Eo(r);return new od(e.path,i)}isEqual(e){return e instanceof hw&&$n(this.vc,e.vc)}}class fw extends Fo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new hl(e.serializer,VR(e.serializer,this.Fc));return new od(e.path,n)}isEqual(e){return e instanceof fw&&this.Fc===e.Fc}}function pw(t,e,n,r){const i=t.Cc(1,e,n);gw("Data must be an object, but it was:",i,r);const s=[],o=Dt.empty();Es(r,(c,u)=>{const d=Gp(e,c,n);u=Z(u);const f=i.yc(d);if(u instanceof hd)s.push(d);else{const p=Uo(u,f);p!=null&&(s.push(d),o.set(d,p))}});const a=new cn(s);return new aP(o,a,i.fieldTransforms)}function mw(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Vu(e,r,n)],c=[i];if(s.length%2!=0)throw new j(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Vu(e,s[p])),c.push(s[p+1]);const u=[],d=Dt.empty();for(let p=a.length-1;p>=0;--p)if(!fP(u,a[p])){const w=a[p];let R=c[p];R=Z(R);const P=o.yc(w);if(R instanceof hd)u.push(w);else{const N=Uo(R,P);N!=null&&(u.push(w),d.set(w,N))}}const f=new cn(u);return new aP(d,f,o.fieldTransforms)}function uP(t,e,n,r=!1){return Uo(n,t.Cc(r?4:3,e))}function Uo(t,e){if(hP(t=Z(t)))return gw("Unsupported field value:",e,t),dP(t,e);if(t instanceof Fo)return function(r,i){if(!lP(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=Uo(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Z(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:fl(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fl(i.serializer,s)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof In)return{bytesValue:QR(i.serializer,r._byteString)};if(r instanceof Pe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Lv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sr)return function(o,a){return{mapValue:{fields:{[Av]:{stringValue:bv},[ll]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Pv(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ap(r)}`)}(t,e)}function dP(t,e){const n={};return cR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(r,i)=>{const s=Uo(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function hP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Pr||t instanceof In||t instanceof Pe||t instanceof Fo||t instanceof sr)}function gw(t,e,n){if(!hP(n)||!qS(n)){const r=Ap(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Vu(t,e,n){if((e=Z(e))instanceof Mo)return e._internalPath;if(typeof e=="string")return Gp(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Uj=new RegExp("[~\\*/\\[\\]]");function Gp(t,e,n){if(e.search(Uj)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mo(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(V.INVALID_ARGUMENT,a+t+c)}function fP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bj extends Mu{data(){return super.data()}}function Wp(t,e){return typeof e=="string"?Gp(t,e):e instanceof Mo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yw{}class fd extends yw{}function Kh(t,e,...n){let r=[];e instanceof yw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Vl).length,a=s.filter(c=>c instanceof pd).length;if(o>1||o>0&&a>0)throw new j(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class pd extends fd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pd(e,n,r)}_apply(e){const n=this._parse(e);return gP(e._query,n),new xt(e.firestore,e.converter,ky(e._query,n))}_parse(e){const n=jo(e.firestore);return function(s,o,a,c,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xT(f,d);const R=[];for(const P of f)R.push(RT(c,s,P));p={arrayValue:{values:R}}}else p=RT(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xT(f,d),p=uP(a,o,f,d==="in"||d==="not-in");return me.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qh(t,e,n){const r=e,i=Wp("where",t);return pd._create(i,r,n)}class Vl extends yw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vl(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:be.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)gP(o,c),o=ky(o,c)}(e._query,n),new xt(e.firestore,e.converter,ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zU(...t){return t.forEach(e=>yP("or",e)),Vl._create("or",t)}function qU(...t){return t.forEach(e=>yP("and",e)),Vl._create("and",t)}class _w extends fd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _w(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nu(s,o)}(e._query,this._field,this._direction);return new xt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Yh(t,e="asc"){const n=e,r=Wp("orderBy",t);return _w._create(r,n)}class Kp extends fd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Kp(e,n,r)}_apply(e){return new xt(e.firestore,e.converter,jf(e._query,this._limit,this._limitType))}}function ug(t){return HS("limit",t),Kp._create("limit",t,"F")}function HU(t){return HS("limitToLast",t),Kp._create("limitToLast",t,"L")}class Qp extends fd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Qp(e,n,r)}_apply(e){const n=mP(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(i,s){return new fi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function GU(...t){return Qp._create("startAt",t,!0)}function $j(...t){return Qp._create("startAfter",t,!1)}class Yp extends fd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Yp(e,n,r)}_apply(e){const n=mP(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(i,s){return new fi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function WU(...t){return Yp._create("endBefore",t,!1)}function KU(...t){return Yp._create("endAt",t,!0)}function mP(t,e,n,r){if(n[0]=Z(n[0]),n[0]instanceof Mu)return function(s,o,a,c,u){if(!c)throw new j(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of qa(s))if(f.field.isKeyField())d.push(vo(o,c.key));else{const p=c.data.field(f.field);if(Pp(p))throw new j(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const w=f.field.canonicalString();throw new j(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(p)}return new fs(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=jo(t.firestore);return function(o,a,c,u,d,f){const p=o.explicitOrderBy;if(d.length>p.length)throw new j(V.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let R=0;R<d.length;R++){const P=d[R];if(p[R].field.isKeyField()){if(typeof P!="string")throw new j(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof P}`);if(!Rv(o)&&P.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${P}' contains a slash.`);const N=o.path.child(ue.fromString(P));if(!G.isDocumentKey(N))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const T=new G(N);w.push(vo(a,T))}else{const N=uP(c,u,P);w.push(N)}}return new fs(w,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function RT(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new j(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rv(e)&&n.indexOf("/")!==-1)throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!G.isDocumentKey(r))throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vo(t,new G(r))}if(n instanceof Pe)return vo(t,n._key);throw new j(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ap(n)}.`)}function xT(t,e){if(!Array.isArray(t)||t.length===0)throw new j(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gP(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function yP(t,e){if(!(e instanceof pd||e instanceof Vl))throw new j(V.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class _P{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Es(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ll].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>He(o.doubleValue));return new sr(n)}convertGeoPoint(e){return new Pr(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=oi(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);te(sx(r),9688,{name:e});const i=new _o(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||ct(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class vw extends _P{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){return new Lu("sum",Vu("sum",t))}function YU(t){return new Lu("avg",Vu("average",t))}function zj(){return new Lu("count")}function JU(t,e){var n,r;return t instanceof Lu&&e instanceof Lu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function XU(t,e){return iP(t.query,e.query)&&$n(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="NOT SUPPORTED";class Wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sn extends Mu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function ZU(t,e,n){if(Lo(e,Sn._jsonSchema)){if(e.bundle===vP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Vo(t._databaseId),i=tP(e.bundle,r),s=i.Wu(),o=new ew(i.getMetadata(),r);for(const d of s)o.Ga(d);const a=o.documents;if(a.length!==1)throw new j(V.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const c=Op(r,a[0].document),u=new G(ue.fromString(e.bundleName));return new Sn(t,new vw(t),u,c,new Wi(!1,!1),n||null)}}Sn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sn._jsonSchema={type:mt("string",Sn._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Jh extends Sn{data(e={}){return super.data(e)}}class Rn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jh(this._firestore,this._userDataWriter,r.key,r,new Wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new Jh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new Jh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:qj(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new j(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function e9(t,e,n){if(Lo(e,Rn._jsonSchema)){if(e.bundle===vP)throw new j(V.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Vo(t._databaseId),i=tP(e.bundle,r),s=i.Wu(),o=new ew(i.getMetadata(),r);for(const p of s)o.Ga(p);if(o.queries.length!==1)throw new j(V.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Vp(o.queries[0].bundledQuery),c=o.documents;let u=new ao;c.map(p=>{const w=Op(r,p.document);u=u.add(w)});const d=Ro.fromInitialDocuments(a,u,le(),!1,!1),f=new xt(t,n||null,a);return new Rn(t,new vw(t),f,d)}}function qj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function t9(t,e){return t instanceof Sn&&e instanceof Sn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Rn&&e instanceof Rn&&t._firestore===e._firestore&&iP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){t=he(t,Pe);const e=he(t.firestore,Le);return Zx(Ze(e),t._key).then(n=>ww(e,t,n))}Rn._jsonSchemaVersion="firestore/querySnapshot/1.0",Rn._jsonSchema={type:mt("string",Rn._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class bs extends _P{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}}function n9(t){t=he(t,Pe);const e=he(t.firestore,Le),n=Ze(e),r=new bs(e);return Tj(n,t._key).then(i=>new Sn(e,r,t._key,i,new Wi(i!==null&&i.hasLocalMutations,!0),t.converter))}function r9(t){t=he(t,Pe);const e=he(t.firestore,Le);return Zx(Ze(e),t._key,{source:"server"}).then(n=>ww(e,t,n))}function zy(t){t=he(t,xt);const e=he(t.firestore,Le),n=Ze(e),r=new bs(e);return pP(t._query),eP(n,t._query).then(i=>new Rn(e,r,t,i))}function i9(t){t=he(t,xt);const e=he(t.firestore,Le),n=Ze(e),r=new bs(e);return Aj(n,t._query).then(i=>new Rn(e,r,t,i))}function s9(t){t=he(t,xt);const e=he(t.firestore,Le),n=Ze(e),r=new bs(e);return eP(n,t._query,{source:"server"}).then(i=>new Rn(e,r,t,i))}function Xp(t,e,n){t=he(t,Pe);const r=he(t.firestore,Le),i=Jp(t.converter,e,n);return md(r,[Hp(jo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ke.none())])}function o9(t,e,n,...r){t=he(t,Pe);const i=he(t.firestore,Le),s=jo(i);let o;return o=typeof(e=Z(e))=="string"||e instanceof Mo?mw(s,"updateDoc",t._key,e,n,r):pw(s,"updateDoc",t._key,e),md(i,[o.toMutation(t._key,Ke.exists(!0))])}function a9(t){return md(he(t.firestore,Le),[new kl(t._key,Ke.none())])}function l9(t,e){const n=he(t.firestore,Le),r=lo(t),i=Jp(t.converter,e);return md(n,[Hp(jo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ke.exists(!1))]).then(()=>r)}function qy(t,...e){var c,u,d;t=Z(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ha(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ha(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,a;if(t instanceof Pe)o=he(t.firestore,Le),a=xl(t._key.path),s={next:f=>{e[r]&&e[r](ww(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=he(t,xt);o=he(f.firestore,Le),a=f._query;const p=new bs(o);s={next:w=>{e[r]&&e[r](new Rn(o,p,f,w))},error:e[r+1],complete:e[r+2]},pP(t._query)}return function(p,w,R,P){const N=new $p(P),T=new Zv(w,N,R);return p.asyncQueue.enqueueAndForget(async()=>Yv(await vl(p),T)),()=>{N.Nu(),p.asyncQueue.enqueueAndForget(async()=>Jv(await vl(p),T))}}(Ze(o),a,i,s)}function c9(t,e,...n){const r=Z(t),i=function(c){const u={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const f of d){if(!(f in c)){u.error=`snapshotJson missing required field: ${f}`;break}const p=c[f];if(typeof p!="string"){u.error=`snapshotJson field '${f}' must be a string.`;break}if(p.length===0){u.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?u.bundle=p:f==="bundleName"?u.bundleName=p:f==="bundleSource"&&(u.bundleSource=p)}return u}(e);if(i.error)throw new j(V.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||Ha(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Ha(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,f,p,w){let R,P=!1;return ST(u,d.bundle).then(()=>Lj(u,d.bundleName)).then(T=>{T&&!P&&(w&&T.withConverter(w),R=qy(T,f||{},p))}).catch(T=>(p.error&&p.error(T),()=>{})),()=>{P||(P=!0,R&&R())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Ha(n[o])){const c=n[o++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,d,f,p,w){let R,P=!1;return ST(u,d.bundle).then(()=>{if(!P){const T=new Pe(u,w||null,G.fromPath(d.bundleName));R=qy(T,f||{},p)}}).catch(T=>(p.error&&p.error(T),()=>{})),()=>{P||(P=!0,R&&R())}}(r,i,s,a,n[o])}throw new j(V.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function u9(t,e){return Sj(Ze(t=he(t,Le)),Ha(e)?e:{next:e})}function md(t,e){return function(r,i){const s=new Rt;return r.asyncQueue.enqueueAndForget(async()=>ej(await cw(r),i,s)),s.promise}(Ze(t),e)}function ww(t,e,n){const r=n.docs.get(e._key),i=new bs(t);return new Sn(t,i,e._key,r,new Wi(n.hasPendingWrites,n.fromCache),e.converter)}function d9(t){return Gj(t,{count:zj()})}function Gj(t,e){const n=he(t.firestore,Le),r=Ze(n),i=lR(e,(s,o)=>new zR(o,s.aggregateType,s._internalFieldPath));return bj(r,t._query,i).then(s=>function(a,c,u){const d=new bs(a);return new Vj(c,d,u)}(n,t,s))}class Wj{constructor(e){this.kind="memory",this._onlineComponentProvider=ms.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new ow(void 0)}}toJSON(){return{kind:this.kind}}}class Kj{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=Zj(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Qj{constructor(){this.kind="memoryEager",this._offlineComponentProvider=_l.provider}toJSON(){return{kind:this.kind}}}class Yj{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new ow(e)}}toJSON(){return{kind:this.kind}}}function h9(){return new Qj}function f9(t){return new Yj(t==null?void 0:t.cacheSizeBytes)}function p9(t){return new Wj(t)}function m9(t){return new Kj(t)}class Jj{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ms.provider,this._offlineComponentProvider={build:n=>new aw(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Xj{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ms.provider,this._offlineComponentProvider={build:n=>new Qx(n,e==null?void 0:e.cacheSizeBytes)}}}function Zj(t){return new Jj(t==null?void 0:t.forceOwnership)}function g9(){return new Xj}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jo(e)}set(e,n,r){this._verifyNotCommitted();const i=Ki(e,this._firestore),s=Jp(i.converter,n,r),o=Hp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ke.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ki(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof Mo?mw(this._dataReader,"WriteBatch.update",s._key,n,r,i):pw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ke.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ki(e,this._firestore);return this._mutations=this._mutations.concat(new kl(n._key,Ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ki(t,e){if((t=Z(t)).firestore!==e)throw new j(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=jo(e)}get(e){const n=Ki(e,this._firestore),r=new vw(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return X(24041);const s=i[0];if(s.isFoundDocument())return new Mu(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Mu(this._firestore,r,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,r){const i=Ki(e,this._firestore),s=Jp(i.converter,n,r),o=Hp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ki(e,this._firestore);let o;return o=typeof(n=Z(n))=="string"||n instanceof Mo?mw(this._dataReader,"Transaction.update",s._key,n,r,i):pw(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ki(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6 extends n6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ki(e,this._firestore),r=new bs(this._firestore);return super.get(e).then(i=>new Sn(this._firestore,r,n._key,i._document,new Wi(!1,!1),n.converter))}}function y9(t,e,n){t=he(t,Le);const r={...e6,...n};return function(s){if(s.maxAttempts<1)throw new j(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Rt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Xx(s);new vj(s.asyncQueue,u,a,o,c).ju()}),c.promise}(Ze(t),i=>e(new r6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(){return new hd("deleteField")}function v9(){return new uw("serverTimestamp")}function w9(...t){return new dw("arrayUnion",t)}function I9(...t){return new hw("arrayRemove",t)}function E9(t){return new fw("increment",t)}function T9(t){return new sr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(t){return Ze(t=he(t,Le)),new t6(t,e=>md(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t,e){const n=Ze(t=he(t,Le));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Hn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(d){throw new j(V.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const c of o.indexes){const u=PT(c,"collectionGroup"),d=[];if(Array.isArray(c.fields))for(const f of c.fields){const p=Gp("setIndexConfiguration",PT(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new so(p,2)):f.order==="ASCENDING"?d.push(new so(p,0)):f.order==="DESCENDING"&&d.push(new so(p,1))}a.push(new nl(nl.UNKNOWN_ID,u,d,rl.empty()))}return a}(e);return Pj(n,r)}function PT(t,e){if(typeof t[e]!="string")throw new j(V.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function S9(t){var i;t=he(t,Le);const e=kT.get(t);if(e)return e;if(((i=Ze(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new i6(t);return kT.set(t,r),r}function R9(t){wP(t,!0)}function x9(t){wP(t,!1)}function P9(t){Cj(Ze(t._firestore)).then(e=>U("deleting all persistent cache indexes succeeded")).catch(e=>Hn("deleting all persistent cache indexes failed",e))}function wP(t,e){kj(Ze(t._firestore),e).then(n=>U(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>Hn(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const kT=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t){var r;const e=Ze(he(t.firestore,Le)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Lp(n,Gt(t._query)).ft}function C9(t,e){var s;const n=lR(e,(o,a)=>new zR(a,o.aggregateType,o._internalFieldPath)),r=Ze(he(t.firestore,Le)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:tx(i,RR(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Iw.instance.onExistenceFilterMismatch(e)}}class Iw{constructor(){this.Mc=new Map}static get instance(){return _h||(_h=new Iw,function(n){if(Jc)throw new Error("a TestingHooksSpi instance is already set");Jc=n}(_h)),_h}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let _h=null;(function(e,n=!0){(function(i){Rl=i})(No),zn(new Pn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Le(new g4(r.getProvider("auth-internal")),new v4(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new j(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qt(aE,lE,e),qt(aE,lE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="firebasestorage.googleapis.com",EP="storageBucket",s6=2*60*1e3,o6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Dn{constructor(e,n,r=0){super(dg(e),`Firebase Storage: ${n} (${dg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function dg(t){return"storage/"+t}function Ew(){const t="An unknown error occurred, please check the error payload for server response.";return new at(it.UNKNOWN,t)}function a6(t){return new at(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function l6(t){return new at(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function c6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(it.UNAUTHENTICATED,t)}function u6(){return new at(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d6(t){return new at(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function h6(){return new at(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f6(){return new at(it.CANCELED,"User canceled the upload/download.")}function p6(t){return new at(it.INVALID_URL,"Invalid URL '"+t+"'.")}function m6(t){return new at(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function g6(){return new at(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EP+"' property when initializing the app?")}function y6(){return new at(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _6(){return new at(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v6(t){return new at(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hy(t){return new at(it.INVALID_ARGUMENT,t)}function TP(){return new at(it.APP_DELETED,"The Firebase app was deleted.")}function w6(t){return new at(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zc(t,e){return new at(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yc(t){throw new at(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(r.path==="")return r;throw m6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(M){M.path_=decodeURIComponent(M.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${d}/b/${i}/o${p}`,"i"),R={bucket:1,path:3},P=n===IP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",T=new RegExp(`^https?://${P}/${i}/${N}`,"i"),b=[{regex:a,indices:c,postModify:s},{regex:w,indices:R,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let M=0;M<b.length;M++){const $=b[M],z=$.regex.exec(e);if(z){const A=z[$.indices.bucket];let _=z[$.indices.path];_||(_=""),r=new Tn(A,_),$.postModify(r);break}}if(r==null)throw p6(e);return r}}class I6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function d(...N){u||(u=!0,e.apply(null,N))}function f(N){i=setTimeout(()=>{i=null,t(w,c())},N)}function p(){s&&clearTimeout(s)}function w(N,...T){if(u){p();return}if(N){p(),d.call(null,N,...T);return}if(c()||o){p(),d.call(null,N,...T);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let R=!1;function P(N){R||(R=!0,p(),!u&&(i!==null?(N||(a=2),clearTimeout(i),f(0)):N||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,P(!0)},n),P}function T6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){return t!==void 0}function b6(t){return typeof t=="object"&&!Array.isArray(t)}function Tw(t){return typeof t=="string"||t instanceof String}function CT(t){return Aw()&&t instanceof Blob}function Aw(){return typeof Blob<"u"}function NT(t,e,n,r){if(r<e)throw Hy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var co;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(co||(co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n,r,i,s,o,a,c,u,d,f,p=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,P)=>{this.resolve_=R,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===co.NO_ERROR,c=s.getStatus();if(!a||S6(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===co.ABORT;r(!1,new vh(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new vh(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());A6(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=Ew();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?TP():f6();o(c)}else{const c=h6();o(c)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=E6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&T6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function x6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function P6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N6(t,e,n,r,i,s,o=!0,a=!1){const c=AP(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return k6(d,e),x6(d,n),P6(d,s),C6(d,r),new R6(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function O6(...t){const e=D6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Aw())return new Blob(t);throw new at(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function L6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){if(typeof atob>"u")throw v6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hg{constructor(e,n){this.data=e,this.contentType=n||null}}function M6(t,e){switch(t){case Tr.RAW:return new hg(bP(e));case Tr.BASE64:case Tr.BASE64URL:return new hg(SP(t,e));case Tr.DATA_URL:return new hg(j6(e),U6(e))}throw Ew()}function bP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function F6(t){let e;try{e=decodeURIComponent(t)}catch{throw Zc(Tr.DATA_URL,"Malformed data URL.")}return bP(e)}function SP(t,e){switch(t){case Tr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Zc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Zc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=V6(e)}catch(i){throw i.message.includes("polyfill")?i:Zc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zc(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=B6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function j6(t){const e=new RP(t);return e.base64?SP(Tr.BASE64,e.rest):F6(e.rest)}function U6(t){return new RP(t).contentType}function B6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){let r=0,i="";CT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(CT(this.data_)){const r=this.data_,i=L6(r,e,n);return i===null?null:new zi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zi(r,!0)}}static getBlob(...e){if(Aw()){const n=e.map(r=>r instanceof zi?r.data_:r);return new zi(O6.apply(null,n))}else{const n=e.map(o=>Tw(o)?M6(Tr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new zi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){let e;try{e=JSON.parse(t)}catch{return null}return b6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e){return e}class Kt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||q6}}let wh=null;function H6(t){return!Tw(t)||t.length<2?t:PP(t)}function kP(){if(wh)return wh;const t=[];t.push(new Kt("bucket")),t.push(new Kt("generation")),t.push(new Kt("metageneration")),t.push(new Kt("name","fullPath",!0));function e(s,o){return H6(o)}const n=new Kt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Kt("size");return i.xform=r,t.push(i),t.push(new Kt("timeCreated")),t.push(new Kt("updated")),t.push(new Kt("md5Hash",null,!0)),t.push(new Kt("cacheControl",null,!0)),t.push(new Kt("contentDisposition",null,!0)),t.push(new Kt("contentEncoding",null,!0)),t.push(new Kt("contentLanguage",null,!0)),t.push(new Kt("contentType",null,!0)),t.push(new Kt("metadata","customMetadata",!0)),wh=t,wh}function G6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Tn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function W6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return G6(r,t),r}function CP(t,e,n){const r=xP(e);return r===null?null:W6(t,r,n)}function K6(t,e,n,r){const i=xP(e);if(i===null||!Tw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),w=bw(p,n,r),R=AP({alt:"media",token:u});return w+R})[0]}function Q6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class NP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t){if(!t)throw Ew()}function Y6(t,e){function n(r,i){const s=CP(t,i,e);return DP(s!==null),s}return n}function J6(t,e){function n(r,i){const s=CP(t,i,e);return DP(s!==null),K6(s,i,t.host,t._protocol)}return n}function OP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=u6():i=c6():n.getStatus()===402?i=l6(t.bucket):n.getStatus()===403?i=d6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function X6(t){const e=OP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=a6(t.path)),s.serverResponse=i.serverResponse,s}return n}function Z6(t,e,n){const r=e.fullServerUrl(),i=bw(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new NP(i,s,J6(t,n),o);return a.errorHandler=X6(e),a}function e5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function t5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e5(null,e)),r}function n5(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let M=0;M<2;M++)b=b+Math.random().toString().slice(2);return b}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=t5(e,r,i),d=Q6(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",w=zi.getBlob(f,r,p);if(w===null)throw y6();const R={name:u.fullPath},P=bw(s,t.host,t._protocol),N="POST",T=t.maxUploadRetryTime,I=new NP(P,N,Y6(t,n),T);return I.urlParams=R,I.headers=o,I.body=w.uploadData(),I.errorHandler=OP(e),I}class r5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw yc("cannot .send() more than once");if(ci(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i5 extends r5{initXhr(){this.xhr_.responseType="text"}}function LP(){return new i5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xo(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PP(this._location.path)}get storage(){return this._service}get parent(){const e=$6(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new xo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w6(e)}}function s5(t,e,n){t._throwIfRoot("uploadBytes");const r=n5(t.storage,t._location,kP(),new zi(e,!0),n);return t.storage.makeRequestWithTokens(r,LP).then(i=>({metadata:i,ref:t}))}function o5(t){t._throwIfRoot("getDownloadURL");const e=Z6(t.storage,t._location,kP());return t.storage.makeRequestWithTokens(e,LP).then(n=>{if(n===null)throw _6();return n})}function a5(t,e){const n=z6(t._location.path,e),r=new Tn(t._location.bucket,n);return new xo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(t){return/^[A-Za-z]+:\/\//.test(t)}function c5(t,e){return new xo(t,e)}function VP(t,e){if(t instanceof Sw){const n=t;if(n._bucket==null)throw g6();const r=new xo(n,n._bucket);return e!=null?VP(r,e):r}else return e!==void 0?a5(t,e):t}function u5(t,e){if(e&&l5(e)){if(t instanceof Sw)return c5(t,e);throw Hy("To use ref(service, url), the first argument must be a Storage instance.")}else return VP(t,e)}function DT(t,e){const n=e==null?void 0:e[EP];return n==null?null:Tn.makeFromBucketSpec(n,t)}function d5(t,e,n,r={}){t.host=`${e}:${n}`;const i=ci(e);i&&(hp(`https://${t.host}/b`),U_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:nb(s,t.app.options.projectId))}class Sw{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=IP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=s6,this._maxUploadRetryTime=o6,this._requests=new Set,i!=null?this._bucket=Tn.makeFromBucketSpec(i,this._host):this._bucket=DT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=DT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new I6(TP());{const o=N6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const OT="@firebase/storage",LT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="storage";function Fu(t,e,n){return t=Z(t),s5(t,e,n)}function ju(t){return t=Z(t),o5(t)}function Uu(t,e){return t=Z(t),u5(t,e)}function h5(t=Wu(),e){t=Z(t);const r=ar(t,MP).getImmediate({identifier:e}),i=Z1("storage");return i&&f5(r,...i),r}function f5(t,e,n,r={}){d5(t,e,n,r)}function p5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Sw(n,r,i,e,No)}function m5(){zn(new Pn(MP,p5,"PUBLIC").setMultipleInstances(!0)),qt(OT,LT,""),qt(OT,LT,"esm2020")}m5();const g5={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},Ml=db(g5),y5=kO(Ml),Oi=h4(Ml),Jr=Oj(Ml),wl=h5(Ml),_5=fL(Ml,{backend:new Ku}),v5=pL(_5,{model:"gemini-2.5-flash-image-preview",generationConfig:{responseModalities:[CI.TEXT,CI.IMAGE]}});async function FP(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function w5(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function jP(){try{return(await RV(Oi)).user}catch(t){throw console.error("Error signing in:",t),t}}async function zs(t){const e={uid:t.uid,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await Xp(lo(Jr,"users",t.uid),e,{merge:!0}),e}catch(n){throw console.error("Error creating/updating user:",n),n}}function UP(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:c,height:u}=s;c>u?c>e&&(u=u*e/c,c=e):u>n&&(c=c*n/u,u=n),o.width=c,o.height=u,a.drawImage(s,0,0,c,u),o.toBlob(d=>{d?r(d):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function I5(t,e,n){try{const i=await(await fetch(e)).blob();let s;try{s=await UP(e)}catch(P){console.warn("Failed to create thumbnail, using original image:",P),s=i}const o=Date.now(),a=`image_${o}.jpg`,c=`thumbnail_${o}.jpg`,u=Uu(wl,`userHistory/${t}/${a}`),d=await Fu(u,i),f=await ju(d.ref),p=Uu(wl,`userHistory/${t}/${c}`),w=await Fu(p,s),R=await ju(w.ref);return{downloadURL:f,thumbnailURL:R,filename:a,thumbnailFilename:c,timestamp:o}}catch(r){throw console.error("Error uploading image:",r),r}}async function E5(t,e){try{const n=await new Promise(R=>{const P=new FileReader;P.onload=()=>R(P.result),P.readAsDataURL(e)});let r;try{r=await UP(n)}catch(R){console.warn("Failed to create thumbnail, using original image:",R),r=e}const i=Date.now(),s=e.name.split(".").pop()||"jpg",o=`upload_${i}.${s}`,a=`upload_thumbnail_${i}.jpg`,c=Uu(wl,`userHistory/${t}/${o}`),u=await Fu(c,e),d=await ju(u.ref),f=Uu(wl,`userHistory/${t}/${a}`),p=await Fu(f,r),w=await ju(p.ref);return{downloadURL:d,thumbnailURL:w,filename:o,thumbnailFilename:a,timestamp:i}}catch(n){throw console.error("Error uploading user image:",n),n}}async function T5(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await I5(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},c=lo(dd(Jr,"userHistory"));return await Xp(c,a),{id:c.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function BP(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await E5(t,e),c={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=lo(dd(Jr,"userHistory"));return await Xp(u,c),{id:u.id,...c}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function A5(t){try{const e=dd(Jr,"userHistory"),n=Kh(e,Qh("userId","==",t),Yh("createdAt","desc")),r=await zy(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function Ia(t,e=1,n=7){try{const r=dd(Jr,"userHistory");let i=null;if(e>1){const f=Kh(r,Qh("userId","==",t),Yh("createdAt","desc"),ug((e-1)*n)),p=await zy(f);p.empty||(i=p.docs[p.docs.length-1])}let s;const o=n*2;i&&e>1?s=Kh(r,Qh("userId","==",t),Yh("createdAt","desc"),$j(i),ug(o)):s=Kh(r,Qh("userId","==",t),Yh("createdAt","desc"),ug(o));const a=await zy(s),c=[];a.forEach(f=>{const p=f.data();if(!p.isError){const w={id:f.id,...p};p.result&&p.result.storageUrl&&(w.storageUrl=p.result.storageUrl,w.thumbnailUrl=p.result.thumbnailUrl,w.filename=p.result.filename,w.thumbnailFilename=p.result.thumbnailFilename),p.objects&&(w.objects=p.objects),c.push(w)}});const u=c.slice(0,n),d=a.docs.length===o&&c.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${c.length}, Returned: ${u.length}, HasMore: ${d}`),{history:u,hasMore:d}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function $P(t,e){try{const r=await(await fetch(e)).blob(),i=Date.now(),s=`temp_${i}.jpg`,o=Uu(wl,`temp/${t}/${s}`),a=await Fu(o,r),c=await ju(a.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",s)}catch(u){console.error("Error during cleanup:",u)}},36e5),{downloadURL:c,filename:s,timestamp:i}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}const b5=Object.freeze(Object.defineProperty({__proto__:null,analytics:y5,app:Ml,auth:Oi,createOrUpdateUser:zs,db:Jr,fileToGenerativePart:FP,loadUserHistory:A5,loadUserHistoryPaginated:Ia,model:v5,saveImageToHistory:T5,saveUploadToHistory:BP,signInUser:jP,storage:wl,uploadImageForSharing:$P,urlToFile:w5},Symbol.toStringTag,{value:"Module"}));class S5{constructor(){zw(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=qy(lo(Jr,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const c=a.data();c.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),c.isError?i(new Error(c.error||"Request failed")):r(c.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map}async submitImageGenerationRequest(e,n,r,i=null){try{const s=await e.getIdToken(),o={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:s,prompt:n,imageData:r,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date},a=lo(dd(Jr,"userHistory"));return await Xp(a,o),a.id}catch(s){throw console.error("Error submitting image generation request:",s),s}}async submitObjectDetectionRequest(e,n,r=null){try{const i=await e.getIdToken(),s=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:i,historyId:r})});if(!s.ok){const a=await s.json();throw new Error(a.error||"Object detection failed")}const o=await s.json();if(!o.success)throw new Error(o.error||"Object detection failed");return o}catch(i){throw console.error("Error submitting object detection request:",i),i}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=lo(Jr,"genCount",r,"users",e),s=await Hj(i);if(s.exists()){const o=s.data();return{count:o.count||0,limit:o.limit||50}}else return{count:0,limit:50}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:50}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const ga=new S5;function R5(){var Ur,Ld,Vd;const[t,e]=ne.useState("  "),[n,r]=ne.useState(null),[i,s]=ne.useState("/assets/design_img.jpg"),[o,a]=ne.useState(!1),[c,u]=ne.useState(!1),[d,f]=ne.useState(!1),[p,w]=ne.useState(!1),[R,P]=ne.useState(!1),[N,T]=ne.useState(!1),[I,b]=ne.useState(!1),[M,$]=ne.useState(!1),[z,A]=ne.useState(!1),[_,S]=ne.useState([]),[E,k]=ne.useState(null),[D,x]=ne.useState(!1),[Pt,en]=ne.useState(!1),[Ss,On]=ne.useState(!1),[Q,ie]=ne.useState([]),[ae,ke]=ne.useState(!1),[_e,Ce]=ne.useState(null),[dt,wt]=ne.useState(""),[Ln,Vt]=ne.useState(16/9),[gd,Zp]=ne.useState(""),[Cr,Nr]=ne.useState(null),[Gn,yi]=ne.useState(null),[_i,Rs]=ne.useState(!1),[Fl,vi]=ne.useState(1),[xs,lr]=ne.useState(!0),[Dr,Bo]=ne.useState(!1),[yd,$o]=ne.useState(!1),[jl,Or]=ne.useState(!1),[gn,et]=ne.useState("signup"),[Ne,wi]=ne.useState(""),[zo,qo]=ne.useState(""),[Lr,Vr]=ne.useState(""),[Ul,Bl]=ne.useState(!1),[Ho,_d]=ne.useState(!1),[Go,Ps]=ne.useState(!1),[Wo,Mr]=ne.useState(!1),[tt,Ko]=ne.useState(!1),[Qo,cr]=ne.useState(null),[em,ks]=ne.useState([]),[tn,Ii]=ne.useState(!1),[$l,It]=ne.useState(!1),[vd,Fr]=ne.useState(!1),[yn,wd]=ne.useState(null),Id=ne.useRef(null),ur=ne.useRef(null),Wn=ne.useRef(null),tm=ne.useRef(null);ne.useEffect(()=>{const v=BV(Oi,async C=>{if(C){k(C),x(!0),await zs(C),en(!0);try{const B=await Ia(C.uid,1,7);S(B.history),lr(B.hasMore)}finally{en(!1)}}else try{const B=await jP();k(B),x(!0),await zs(B)}catch(B){console.error("Failed to sign in anonymously:",B)}});return()=>v()},[]),ne.useEffect(()=>()=>{yn&&yn.getTracks().forEach(v=>v.stop())},[yn]);const Yo=async()=>{try{return(await navigator.permissions.query({name:"microphone"})).state==="granted"}catch{return!1}},Ed=async()=>{try{if(It(!1),yn)return yn;if(await Yo()){const C=await navigator.mediaDevices.getUserMedia({audio:!0});return wd(C),Fr(!0),C}else{const C=await navigator.mediaDevices.getUserMedia({audio:!0});return wd(C),Fr(!0),C}}catch(v){return console.error("Error accessing microphone:",v),It(!0),Fr(!1),null}},zl=v=>{const C=new MediaRecorder(v,{mimeType:"audio/webm;codecs=opus"}),B=[];return C.ondataavailable=Y=>{Y.data.size>0&&B.push(Y.data)},C.onstop=async()=>{const Y=new Blob(B,{type:"audio/webm"});await Td(Y),ks([]),cr(null)},C},Jo=async v=>{try{const C=new(window.AudioContext||window.webkitAudioContext),B=await v.arrayBuffer(),Y=await C.decodeAudioData(B),J=Math.min(Y.sampleRate,16e3),se=Math.floor(Y.length*J/Y.sampleRate),Ie=C.createBuffer(1,se,J),xe=Y.getChannelData(0),ge=Ie.getChannelData(0);for(let Ve=0;Ve<se;Ve++){const Te=Math.floor(Ve*Y.sampleRate/J);ge[Ve]=xe[Te]}return await dr(Ie)}catch(C){return console.warn("Audio optimization failed, using original:",C),v}},dr=async v=>{const C=v.length,B=v.sampleRate,Y=new ArrayBuffer(44+C*2),J=new DataView(Y),se=(ge,Qe)=>{for(let Ve=0;Ve<Qe.length;Ve++)J.setUint8(ge+Ve,Qe.charCodeAt(Ve))};se(0,"RIFF"),J.setUint32(4,36+C*2,!0),se(8,"WAVE"),se(12,"fmt "),J.setUint32(16,16,!0),J.setUint16(20,1,!0),J.setUint16(22,1,!0),J.setUint32(24,B,!0),J.setUint32(28,B*2,!0),J.setUint16(32,2,!0),J.setUint16(34,16,!0),se(36,"data"),J.setUint32(40,C*2,!0);const Ie=v.getChannelData(0);let xe=44;for(let ge=0;ge<C;ge++){const Qe=Math.max(-1,Math.min(1,Ie[ge]));J.setInt16(xe,Qe<0?Qe*32768:Qe*32767,!0),xe+=2}return new Blob([Y],{type:"audio/wav"})},Td=async v=>{if(!E){console.error("No current user available");return}Ii(!0);try{const B=await(await Jo(v)).arrayBuffer(),J=`data:audio/wav;base64,${btoa(String.fromCharCode(...new Uint8Array(B)))}`,se=await E.getIdToken(),Ie=new AbortController,xe=setTimeout(()=>Ie.abort(),1e4),ge=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/speechToText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioData:J,authToken:se}),signal:Ie.signal});clearTimeout(xe);const Qe=await ge.json();if(Qe.success&&Qe.text){const Ve=dt.trim();wt(Ve?Ve+" "+Qe.text:Qe.text)}else console.error("Speech-to-text failed:",Qe.error)}catch(C){C.name==="AbortError"?console.error("Speech-to-text timeout"):console.error("Error processing speech:",C)}finally{Ii(!1)}},ql=async()=>{if(!(o||tn)){if(tt&&Qo)Qo.stop(),Ko(!1);else if(!tt){if((!yn||!vd)&&!await Ed()){console.error("Failed to initialize microphone");return}const v=zl(yn);cr(v),ks([]),v.start(),Ko(!0)}}};ne.useEffect(()=>{if(!(window.innerWidth<1024)){const C=ea[t]||[];ie(C),console.log("Loaded default objects for category:",t,C)}},[t]);const Xo=["  "," ","  "," "," "," ",""],Zo={"  ":ah," ":sI," ":uc," ":CN," ":Fm,"  ":RN,:PN},Ad={"  ":"/assets/design_img.jpg"," ":"/assets/balcony_img.jpg"," ":"/assets/makeup_img.jpg"," ":"/assets/product_img.jpg"," ":"/assets/profile_img.jpg","  ":"/assets/car_img.jpg",:"/assets/tattoo_img.jpg"},ea={"  ":[" "," "," ","  ","  "," "," "," "," "," "," "," "]," ":[" '"," "," "," "," ","  ","  "," "," "," "," "," "]," ":["  "," "," "," "]," ":[" "," "]," ":[" "," ","' '"," "," "],"  ":[" "," "," "," "," "," "],:[" "," "," "," ''"," "]},bd={"  ":[{name:" ",action:()=>b(!I),icon:SN},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:"",action:()=>w(!p),icon:kN},{name:"",action:()=>P(!R),icon:NN},{name:"/",action:()=>$(!M),icon:ah},{name:"",action:()=>A(!z),icon:xN}]," ":[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Add beautiful plants and flowers to this garden"),icon:sI},{name:" ",action:()=>Ee("Enhance the outdoor lighting"),icon:rn}],"  ":[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Enhance the lighting and reflections on this vehicle"),icon:rn},{name:" ",action:()=>Ee("Add accessories and modifications to this vehicle"),icon:ca}],:[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Enhance the lighting to show the tattoo details"),icon:rn},{name:" ",action:()=>Ee("Add more details and shading to this tattoo"),icon:ca}]," ":[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Enhance the lighting for better makeup visibility"),icon:rn},{name:" ",action:()=>Ee("Add more makeup and beauty enhancements"),icon:uc}]," ":[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Enhance the product lighting and presentation"),icon:rn},{name:" ",action:()=>Ee("Add product details and features"),icon:ca}]," ":[{name:" ",action:()=>b(!I),icon:nn},{name:"/",action:()=>T(!N),icon:Ri},{name:" ",action:()=>u(!c),icon:nn},{name:"",action:()=>f(!d),icon:Vs},{name:" ",action:()=>Ee("Enhance the portrait lighting"),icon:rn},{name:" ",action:()=>Ee("Add a professional background"),icon:ca}]},ta=async v=>{const C=v.target.files[0];if(C){const B=new FileReader;B.onload=async Y=>{if(r(Y.target.result),s(Y.target.result),Vt(16/9),Ce(null),D&&E){en(!0);try{const J=await BP(E.uid,C,`Uploaded: ${C.name}`),se=J.id;console.log("Upload result ID:",se),console.log("Upload result:",J);const Ie=await Ia(E.uid,1,7);S(Ie.history),vi(1),lr(Ie.hasMore),Ce(se),console.log("Set current history ID to newly uploaded image:",se),console.log("Current history after reload:",Ie.history.map(ge=>({id:ge.id,prompt:ge.prompt}))),window.innerWidth<1024||(console.log("About to detect objects for history ID:",se),Jl(Y.target.result,se))}catch(J){console.error("Failed to save upload to Firebase:",J)}finally{en(!1)}}else if(!(window.innerWidth<1024)){const se=ea[t]||[];ie(se)}},B.readAsDataURL(C)}},Hl=()=>{Id.current.click()},na=async()=>{try{let v=i;if(v.startsWith("https://firebasestorage.googleapis.com/")){const C=document.createElement("a");C.href=v,C.download="moomhe-design.png",C.target="_blank",document.body.appendChild(C),C.click(),document.body.removeChild(C)}else{const B=await(await fetch(v)).blob(),Y=window.URL.createObjectURL(B),J=document.createElement("a");J.href=Y,J.download="moomhe-design.png",document.body.appendChild(J),J.click(),document.body.removeChild(J),window.URL.revokeObjectURL(Y)}}catch(v){console.error("Download failed:",v);try{window.open(i,"_blank")}catch(C){console.error("Fallback download also failed:",C),alert("  .  .")}}},Ei=async()=>{try{let v=i;const C=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(v.startsWith("data:"))try{a(!0);const{downloadURL:B}=await $P((E==null?void 0:E.uid)||"anonymous",v);v=B,console.log(" Image uploaded to temporary storage:",B)}catch(B){console.error("Error uploading image to Firebase:",B),alert("  .  .");return}finally{a(!1)}if(C){const B=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(v)}`;window.open(B,"_blank")}else{const B=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(v)}`;window.open(B,"_blank")}}catch(v){console.error("WhatsApp share failed:",v),alert("  .  .")}},hr=v=>{e(v);const C=Ad[v];if(C&&(s(C),Vt(16/9),Ce(null),!(window.innerWidth<1024))){const Y=ea[v]||[];ie(Y),console.log("Loaded default objects for category:",v,Y)}},ra=v=>{const C=v.storageUrl||v.imageUrl;if(s(C),Vt(16/9),Ce(v.id),v.objects){let B=v.objects;if(Array.isArray(v.objects)&&v.objects.length>0){const Y=v.objects[0];typeof Y=="string"&&Y.includes(",")&&(B=Y.split(",").map(J=>J.trim()).filter(J=>J.length>0))}else typeof v.objects=="string"&&(B=v.objects.split(",").map(Y=>Y.trim()).filter(Y=>Y.length>0));B.length>0?(ie(B),console.log("Loaded objects from history entry:",B)):(ie([]),console.log("No valid objects found in history entry"))}else ie([]),console.log("No objects field in history entry")},Sd=()=>{o||On(!0)},Gl=v=>{const C=v.target,B=C.naturalWidth/C.naturalHeight;Vt(B)},Wl=async v=>{const C=v.target.files[0];if(C){const B=new FileReader;B.onload=Y=>{Nr(Y.target.result),yi(C)},B.readAsDataURL(C)}},Kl=()=>{Wn.current.click()},ia=()=>{Nr(null),yi(null),Wn.current&&(Wn.current.value="")},Ql=async v=>{if(v.preventDefault(),!(!Ne||!Lr)){if(gn==="signup"&&Ne!==zo){alert("   .  .");return}Bl(!0);try{if(gn==="signup")if(E&&E.isAnonymous){const{linkWithCredential:B,EmailAuthProvider:Y}=await Si(()=>import("./index.esm-932b0bc9.js"),[]),J=Y.credential(Ne,Lr);try{const se=await B(E,J);await zs(se.user),alert("  !    .")}catch(se){if(se.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:Ie}=await Si(()=>import("./index.esm-932b0bc9.js"),[]),xe=await Ie(Oi,Ne,Lr);await xd(E.uid,xe.user.uid),await zs(xe.user),alert("  !      .")}else throw se}}else{const{createUserWithEmailAndPassword:B}=await Si(()=>import("./index.esm-932b0bc9.js"),[]),Y=await B(Oi,Ne,Lr);await zs(Y.user),alert("  !")}else{const{signInWithEmailAndPassword:C}=await Si(()=>import("./index.esm-932b0bc9.js"),[]),B=await C(Oi,Ne,Lr);await zs(B.user),alert(" !")}$o(!1),wi(""),qo(""),Vr(""),et("signup")}catch(C){console.error("Authentication error:",C),C.code==="auth/email-already-in-use"?(alert("   .   ."),et("login")):C.code==="auth/user-not-found"?(alert("  .    ."),et("signup")):C.code==="auth/wrong-password"?alert(" .  ."):C.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{Bl(!1)}}},Rd=async()=>{if(!Ne){alert("    .");return}_d(!0);try{const{sendPasswordResetEmail:v}=await Si(()=>import("./index.esm-932b0bc9.js"),[]);await v(Oi,Ne),alert("     .")}catch(v){console.error("Password reset error:",v),v.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{_d(!1)}},xd=async(v,C)=>{try{const{collection:B,query:Y,where:J,getDocs:se,doc:Ie,setDoc:xe,deleteDoc:ge}=await Si(()=>import("./index.esm-46ed86f4.js"),[]),{db:Qe}=await Si(()=>Promise.resolve().then(()=>b5),void 0),Ve=B(Qe,"userHistory"),Te=Y(Ve,J("userId","==",v)),Ti=await se(Te),Xl=[];if(Ti.forEach(Ai=>{const Zl=Ai.data();Zl.userId=C;const Md=Ie(B(Qe,"userHistory"));Xl.push(xe(Md,Zl)),Xl.push(ge(Ai.ref))}),await Promise.all(Xl),console.log(`Migrated ${Ti.size} history entries from ${v} to ${C}`),D){const Ai=await Ia(C,1,7);S(Ai.history),vi(1),lr(Ai.hasMore)}}catch(B){console.error("Error migrating user data:",B)}},nm=async()=>{try{const{signOut:v}=await Si(()=>import("./index.esm-932b0bc9.js"),[]);await v(Oi),S([]),ie([]),k(null),x(!1),Or(!1),window.location.reload()}catch(v){console.error("Logout error:",v),alert(" .  .")}},Yl=async()=>{if(!D||!E||Dr||!xs){console.log("Load more history blocked:",{isAuthenticated:D,currentUser:!!E,isLoadingMoreHistory:Dr,hasMoreHistory:xs});return}console.log("Loading more history, current page:",Fl),Bo(!0);try{const v=Fl+1,C=await Ia(E.uid,v,7);console.log("Load more result:",{nextPage:v,historyCount:C.history.length,hasMore:C.hasMore}),C.history.length>0?(S(B=>[...B,...C.history]),vi(v),lr(C.hasMore)):lr(!1)}catch(v){console.error("Failed to load more history:",v)}finally{Bo(!1)}};ne.useEffect(()=>{const v=C=>{_i&&!C.target.closest(".mobile-dropdown")&&Rs(!1),Go&&ur.current&&!ur.current.contains(C.target)&&Ps(!1),Wo&&!C.target.closest(".suggestions-modal")&&Mr(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[_i,Go,Wo]);const Pd=v=>{const C=String(v.getDate()).padStart(2,"0"),B=String(v.getMonth()+1).padStart(2,"0"),Y=String(v.getFullYear()).slice(-2);return`${C}/${B}/${Y}`},kd=v=>{const B=Math.floor((new Date-v)/1e3);return B<60?" ":B<3600?` ${Math.floor(B/60)} `:B<86400?` ${Math.floor(B/3600)} `:B<172800?"":B<604800?` ${Math.floor(B/86400)} `:B<2592e3?` ${Math.floor(B/604800)} `:B<31536e3?` ${Math.floor(B/2592e3)} `:` ${Math.floor(B/31536e3)} `},Cd=v=>{const C=v.createdAt;if(!C)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(C))return C;try{let B;if(C&&typeof C=="object"&&C.toDate?B=C.toDate():C&&typeof C=="object"&&C.seconds?B=new Date(C.seconds*1e3):B=new Date(C),!isNaN(B.getTime()))return kd(B)}catch(B){console.warn("Failed to parse timestamp:",C,B)}return C||"  "},fr=()=>{On(!1)},Kn=v=>{Ee(v)},jr=async()=>{if(dt.trim()){if(D&&E&&!await ga.canMakeRequest(E.uid)){alert("   .    .");return}a(!0);try{const v=dt;let C=v;Gn&&(C=`  , ${v}`),console.log(" Final prompt for AI:",C),await Od(C),wt(""),Nr(null),yi(null),Wn.current&&(Wn.current.value="")}catch(v){console.error("Custom prompt failed:",v),alert("  .  .")}finally{a(!1)}}},sa=async v=>{if(v){if(!_e){console.log("No current history ID available for object detection");return}return console.log("detectObjects called with currentHistoryId:",_e),console.log("detectObjects called with imageUrl:",v),Jl(v,_e)}},Jl=async(v,C)=>{if(!(!v||!C)){console.log("detectObjectsWithId called with historyId:",C),console.log("detectObjectsWithId called with imageUrl:",v),ke(!0);try{if(D&&E&&!await ga.canMakeRequest(E.uid)){alert("   .    ."),ke(!1);return}let B=v;if(v.startsWith("/assets/")||v.startsWith("./assets/"))try{const se=await(await fetch(v)).blob();B=await new Promise(xe=>{const ge=new FileReader;ge.onload=()=>xe(ge.result),ge.readAsDataURL(se)})}catch(J){throw console.error("Error converting local image to data URL:",J),new Error("Failed to load the image for object detection")}console.log("Submitting object detection request for history ID:",C);const Y=await ga.submitObjectDetectionRequest(E,B,C);if(console.log("Object detection result:",Y),console.log("Objects will be saved to history ID:",C),Y&&Y.objects){console.log("Raw objects from server:",Y.objects),console.log("Type of objects:",typeof Y.objects);let J=Y.objects;if(Array.isArray(Y.objects)&&Y.objects.length>0){console.log("Objects is array, checking first element...");const se=Y.objects[0];typeof se=="string"&&se.includes(",")?(console.log("First element is comma-separated string, parsing..."),J=se.split(",").map(Ie=>Ie.trim()).filter(Ie=>Ie.length>0),console.log("Parsed objects array:",J)):console.log("Using array as-is:",J)}else typeof Y.objects=="string"?(console.log("Parsing string objects..."),J=Y.objects.split(",").map(se=>se.trim()).filter(se=>se.length>0),console.log("Parsed objects array:",J)):console.log("Objects is already an array:",J);ie(J),console.log("Final detected objects:",J),C&&_.length>0&&(S(se=>se.map(Ie=>Ie.id===C?{...Ie,objects:J}:Ie)),console.log("Updated local imageHistory with detected objects for ID:",C,J))}else ie([])}catch(B){console.error("Object detection failed:",B),ie([]),alert("  .  .")}finally{ke(!1)}}},De={:"#C1121C",:"#FF7514",:"#E5BE01",:"#287233",:"#1E2460",:"#6D3F5B",:"#78858B"," ":"#F4F4F4"},Cs={:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}]," ":[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Pure white",value:"pure white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},Ns=v=>{u(!1);const C=`  ${v.ral}  `;console.log(" Color Selection - Prompt being added to input:",C),console.log(" Selected color:",v.ral,v.name),Ee(C)},Ds=[{name:" ",value:"bird's eye view",icon:"",prompt:"     "},{name:" ",value:"left angle",icon:"",prompt:"   45  "},{name:" ",value:"right angle",icon:"",prompt:"   45  "},{name:" ",value:"zoom in",icon:"+",prompt:"     "},{name:" ",value:"zoom out",icon:"-",prompt:"       "},{name:" ",value:"back view",icon:"",prompt:"       180 "}],rm=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],Nd=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}],im=[{name:"  ",value:"repair everything",prompt:"  "},{name:"   ",value:"fix and repair everything",prompt:"   "},{name:"  ",value:"mess up everything",prompt:"  "},{name:"   ",value:"destroy and cause damage to everything",prompt:"   "}],sm=[{name:"",value:"minimalist",prompt:"     - , ,  "},{name:"",value:"bohemian",prompt:"     - , , "},{name:"",value:"industrial",prompt:"     -   "},{name:"  ",value:"mid-century modern",prompt:"       - , , "},{name:"",value:"scandinavian",prompt:"     - , , "},{name:"",value:"traditional",prompt:"     - , , "},{name:" ",value:"modern farmhouse",prompt:"      - , , "},{name:"",value:"contemporary",prompt:"     - , , "},{name:"",value:"coastal",prompt:"     - , , "},{name:" ",value:"art deco",prompt:"      - , , "}],om=v=>{f(!1),console.log(" Angle Selection - Prompt being added to input:",v.prompt),console.log(" Selected angle:",v.name,v.value),Ee(v.prompt)},am=v=>{w(!1),console.log(" Lighting Selection - Prompt being added to input:",v.prompt),console.log(" Selected lighting:",v.name,v.value),Ee(v.prompt)},Os=v=>{P(!1),console.log(" Furniture Selection - Prompt being added to input:",v.prompt),console.log(" Selected furniture:",v.name,v.value),Ee(v.prompt)},pr=v=>{T(!1),console.log(" Repairs Selection - Prompt being added to input:",v.prompt),console.log(" Selected repair:",v.name,v.value),Ee(v.prompt)},Dd=v=>{b(!1),console.log(" Style Selection - Prompt being added to input:",v.prompt),console.log(" Selected style:",v.name,v.value),Ee(v.prompt)},Ee=v=>{const C=dt.trim();let B;C?C.endsWith(" ")?B=`${C}${v}`:B=`${C}, ${v}`:B=v,wt(B)},Od=async v=>{var C,B,Y;if(i){a(!0);try{if(console.log(" AI Image Alteration - Prompt being sent:",v),console.log(" Main image URL:",i),console.log(" Object image available:",!!Gn),D&&E&&!await ga.canMakeRequest(E.uid)){alert("   .    ."),a(!1);return}let J=i;if(i.startsWith("/assets/")||i.startsWith("./assets/"))try{const Qe=await(await fetch(i)).blob();J=await new Promise(Te=>{const Ti=new FileReader;Ti.onload=()=>Te(Ti.result),Ti.readAsDataURL(Qe)})}catch(ge){throw console.error("Error converting local image to data URL:",ge),new Error("Failed to load the default image")}let se=null;Gn?(console.log(" Processing object image file:",Gn.name,Gn.type,Gn.size),se=await FP(Gn),console.log(" Object image processed successfully:",!!se)):console.log(" No object image file available");const Ie=await ga.submitImageGenerationRequest(E,v,J,se),xe=await ga.waitForRequestCompletion(Ie);if(console.log("AI Service result:",xe),xe&&xe.storageUrl){const ge=xe.storageUrl,Qe={imageUrl:ge,prompt:v,timestamp:Pd(new Date)};if(D&&E){en(!0);try{const Ve=await Ia(E.uid,1,7);S(Ve.history),vi(1),lr(Ve.hasMore)}catch(Ve){console.error("Failed to reload history from Firebase:",Ve)}finally{en(!1)}}else{const Ve={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Qe};S(Te=>[Ve,...Te]),vi(1),lr(!0)}s(ge),Vt(16/9),Ce(null),Nr(null),yi(null),Wn.current&&(Wn.current.value="")}else alert("   .       .")}catch(J){console.error("AI processing failed:",J),(C=J.message)!=null&&C.includes("limit reached")||(B=J.message)!=null&&B.includes(" ")?alert("   .    ."):(Y=J.message)!=null&&Y.includes("timeout")?alert("    .  ."):alert("  .       .")}finally{a(!1)}}};return g.jsxs("div",{className:"min-h-screen bg-background",children:[g.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"hidden md:flex justify-between items-center py-3",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("img",{src:"/Logo.png",alt:"MoomHe Logo",className:"h-16 w-auto"}),g.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"  "})]}),g.jsx("div",{className:"flex items-center space-x-4",children:g.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-800 rounded-full flex items-center gap-2 px-4 py-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,onClick:()=>{E&&!E.isAnonymous?Or(!0):$o(!0)},children:E&&!E.isAnonymous?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:g.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),g.jsx("span",{className:"text-sm",children:E.email})]}):g.jsxs(g.Fragment,{children:[g.jsx(Fm,{className:"w-5 h-5"}),""]})})})]}),g.jsx("div",{className:"md:hidden py-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("div",{className:"flex items-center",children:g.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-800 rounded-full flex items-center gap-2 px-3 py-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",disabled:o,onClick:()=>{E&&!E.isAnonymous?Or(!0):$o(!0)},children:E&&!E.isAnonymous?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:g.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),g.jsx("span",{className:"text-xs",children:E.email})]}):g.jsxs(g.Fragment,{children:[g.jsx(Fm,{className:"w-4 h-4"}),""]})})}),g.jsx("div",{className:"flex items-center",children:g.jsx("img",{src:"/Logo.png",alt:"MoomHe Logo",className:"h-12 w-auto"})}),g.jsx("div",{className:"flex items-center",children:g.jsxs("div",{className:"relative mobile-dropdown",children:[g.jsxs("button",{onClick:()=>Rs(!_i),className:"btn-secondary flex items-center",disabled:o,children:[g.jsx("span",{className:"text-sm",children:t}),g.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_i&&g.jsx("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-80 overflow-y-auto",children:Xo.map(v=>{const C=Zo[v];return g.jsxs("button",{onClick:()=>{hr(v),Rs(!1)},className:`w-full flex items-center px-4 py-3 text-right hover:bg-gray-50 transition-colors duration-200 ${t===v?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:[g.jsx(C,{className:"w-4 h-4 ml-3"}),g.jsx("span",{className:"text-sm font-medium",children:v})]},v)})})]})})]})}),g.jsx("div",{className:"hidden md:flex space-x-reverse space-x-1 pb-3 overflow-x-auto scrollbar-hide",children:Xo.map(v=>{const C=Zo[v];return g.jsxs("button",{onClick:()=>hr(v),disabled:o,className:`flex-shrink-0 px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm flex items-center disabled:opacity-50 disabled:cursor-not-allowed ${t===v?"bg-accent text-white shadow-lg":"bg-white text-text hover:bg-gray-50 border border-gray-200"}`,children:[g.jsx(C,{className:"w-4 h-4 ml-2"}),v]},v)})})]})}),g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:[g.jsxs("div",{className:"block lg:hidden",children:[g.jsx("div",{className:"mb-6 -mt-4",children:g.jsxs("div",{className:"bg-white shadow-sm border-b border-gray-200 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-4",children:[g.jsxs("div",{className:"relative mb-4",children:[g.jsx("div",{className:"w-full rounded-lg shadow-lg overflow-hidden transition-all duration-300",style:{aspectRatio:Ln,maxHeight:"50vh"},children:g.jsx("img",{src:i,alt:"Main room design",onClick:Sd,onLoad:Gl,className:`w-full h-full object-contain rounded-lg transition-all duration-300 cursor-pointer hover:opacity-90 ${o?"blur-sm cursor-not-allowed":""}`})}),g.jsxs("button",{onClick:Hl,disabled:o,className:"absolute top-3 right-3 bg-blue-500/70 hover:bg-blue-500/90 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm flex items-center gap-1",children:[g.jsx(oI,{className:"w-3 h-3"})," "]}),g.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[g.jsx("button",{onClick:na,disabled:o,className:"w-8 h-8 bg-green-600/70 hover:bg-green-600/90 text-white rounded-full flex items-center justify-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm",title:"",children:g.jsx(eI,{className:"w-4 h-4"})}),g.jsx("button",{onClick:Ei,disabled:o,className:"w-8 h-8 bg-green-500/70 hover:bg-green-500/90 text-white rounded-full flex items-center justify-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm",title:" ",children:g.jsx(nI,{className:"w-4 h-4"})})]}),o&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-6 h-6 border-2 border-white/50 border-b-white rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})})]})})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex gap-2 mb-4",children:[g.jsx("button",{onClick:ql,disabled:o||tn,className:`flex-shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 select-none ${tt?"bg-green-500 border-green-500 text-white animate-pulse":tn?"bg-blue-500 border-blue-500 text-white":"bg-green-500 border-green-500 hover:bg-green-600 hover:border-green-600 text-white"}`,title:tt?"   ":tn?" ...":"    ",children:tn?g.jsx(tI,{className:"w-5 h-5 animate-spin"}):tt?g.jsx(rI,{className:"w-5 h-5"}):g.jsx(iI,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex-1 relative",children:[g.jsx("input",{type:"text",value:dt,onChange:v=>wt(v.target.value),placeholder:" ...",disabled:o,className:"w-full px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed overflow-x-auto",style:{textAlign:"right",direction:"rtl",overflowX:"auto",whiteSpace:"nowrap"},onKeyPress:v=>{v.key==="Enter"&&jr()}}),dt&&g.jsx("button",{onClick:()=>wt(""),disabled:o,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]}),(tt||tn)&&g.jsx("div",{className:"mt-2 text-center",children:g.jsxs("div",{className:`inline-flex items-center gap-2 text-sm px-3 py-1 rounded-full ${tt?"text-green-600 bg-green-50":"text-blue-600 bg-blue-50"}`,children:[g.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${tt?"bg-green-500":"bg-blue-500"}`}),g.jsx("span",{children:tt?"...     ":" ..."})]})}),$l&&g.jsx("div",{className:"mt-2 text-center",children:g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-red-600 bg-red-50 px-3 py-1 rounded-full",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   "})]})})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide pb-2 mb-4",ref:v=>{v&&v.addEventListener("scroll",()=>{const C=v.scrollWidth>v.clientWidth,B=v.scrollLeft<=5,Y=v.scrollLeft+v.clientWidth>=v.scrollWidth-5,J=v.parentElement.querySelector(".fade-overlay-left"),se=v.parentElement.querySelector(".fade-overlay-right");J&&(J.style.opacity=C&&!Y?"1":"0"),se&&(se.style.opacity=C&&!B?"1":"0")})},children:[g.jsxs("button",{onClick:o?void 0:Kl,disabled:o,className:"flex-1 btn-secondary border-2 border-dashed border-blue-400 hover:border-blue-500 hover:bg-blue-50 flex items-center justify-center text-sm px-3 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Cr?g.jsxs("div",{className:"relative w-4 h-4 ml-2",children:[g.jsx("img",{src:Cr,alt:"Object to add",className:"w-full h-full object-cover rounded border border-gray-300"}),g.jsx("button",{onClick:v=>{v.stopPropagation(),ia()},disabled:o,className:"absolute -top-1 -right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-3 h-3 flex items-center justify-center text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}):g.jsx(ca,{className:"w-4 h-4 text-blue-500 ml-2"}),g.jsx("span",{className:"text-blue-600",children:" "})]}),g.jsxs("button",{onClick:()=>Mr(!0),disabled:o,className:"flex-1 btn-secondary flex items-center justify-center text-sm px-3 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(rn,{className:"w-4 h-4 ml-2"}),"..."]}),g.jsxs("button",{onClick:jr,disabled:o||!dt.trim(),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center gap-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"text-sm font-medium",children:""}),g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})]}),g.jsx("div",{className:"fade-overlay-left absolute top-0 left-0 w-8 h-full bg-gradient-to-r from-white to-transparent pointer-events-none transition-opacity duration-300 opacity-0"}),g.jsx("div",{className:"fade-overlay-right absolute top-0 right-0 w-8 h-full bg-gradient-to-l from-white to-transparent pointer-events-none transition-opacity duration-300 opacity-0"})]}),g.jsx("input",{ref:Wn,type:"file",accept:"image/*",onChange:Wl,className:"hidden"})]})}),g.jsx("input",{ref:Id,type:"file",accept:"image/*",onChange:ta,className:"hidden"}),g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"card p-4 relative",children:[g.jsxs("h3",{className:"text-lg font-semibold text-text mb-3 flex items-center",children:[g.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),""]}),g.jsx("div",{className:`transition-opacity duration-300 ${Pt||o?"opacity-50 pointer-events-none":""}`,children:(_||[]).length===0?g.jsxs("div",{className:"text-center py-6",children:[g.jsx("div",{className:"text-gray-400 mb-2",children:g.jsx(uc,{className:"w-6 h-6 mx-auto"})}),g.jsx("p",{className:"text-sm text-gray-500",children:"  "}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"   "})]}):g.jsxs("div",{className:"relative",children:[g.jsxs("div",{ref:tm,className:"flex gap-3 overflow-x-auto scrollbar-visible pb-2",onScroll:v=>{const{scrollLeft:C,scrollWidth:B,clientWidth:Y}=v.target;C+Y>=B-10&&xs&&!Dr&&Yl();const J=B>Y,se=C<=5,Ie=C+Y>=B-5,xe=v.target.parentElement.querySelector(".image-fade-overlay-left"),ge=v.target.parentElement.querySelector(".image-fade-overlay-right");xe&&(xe.style.opacity=J&&!Ie?"1":"0"),ge&&(ge.style.opacity=J&&!se?"1":"0")},children:[(_||[]).map(v=>g.jsxs("div",{onClick:()=>ra(v),className:"cursor-pointer group flex-shrink-0 w-24",children:[g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:v.thumbnailUrl||v.storageUrl||v.imageUrl,alt:"History entry",className:"w-24 h-24 object-cover rounded-lg group-hover:opacity-80 transition-opacity duration-200"}),g.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-200 rounded-lg"})]}),g.jsxs("div",{className:"mt-1",children:[g.jsx("p",{className:"text-xs text-gray-600 truncate",title:v.prompt||"No prompt",children:v.prompt&&v.prompt.length>15?`${v.prompt.substring(0,15)}...`:v.prompt||"No prompt"}),g.jsx("p",{className:"text-xs text-gray-400",children:Cd(v)})]})]},v.id)),Dr&&g.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-24",children:g.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})]}),g.jsx("div",{className:"image-fade-overlay-left absolute top-0 left-0 w-6 h-full bg-gradient-to-r from-white to-transparent pointer-events-none transition-opacity duration-300 opacity-0"}),g.jsx("div",{className:"image-fade-overlay-right absolute top-0 right-0 w-6 h-full bg-gradient-to-l from-white to-transparent pointer-events-none transition-opacity duration-300 opacity-0"})]})}),Pt&&g.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center",children:g.jsx("div",{className:"relative",children:g.jsx("div",{className:"w-8 h-8 border-4 border-gray-300 border-t-purple-500 rounded-full animate-spin"})})})]})})]}),g.jsxs("div",{className:"hidden lg:grid grid-cols-1 lg:grid-cols-4 gap-8",children:[g.jsx("div",{className:"lg:col-span-1 lg:order-1",children:g.jsxs("div",{className:"card p-4 relative",children:[g.jsx("h3",{className:"text-lg font-semibold text-text mb-3",children:""}),g.jsx("div",{className:`transition-opacity duration-300 ${Pt||o?"opacity-50 pointer-events-none":""}`,children:(_||[]).length===0?g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"text-gray-400 mb-2",children:g.jsx(uc,{className:"w-8 h-8 mx-auto"})}),g.jsx("p",{className:"text-sm text-gray-500",children:"  "}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"   "})]}):g.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto scrollbar-visible",onScroll:v=>{const{scrollTop:C,scrollHeight:B,clientHeight:Y}=v.target;C+Y>=B-10&&xs&&!Dr&&Yl()},children:[(_||[]).map(v=>g.jsxs("div",{onClick:()=>ra(v),className:"cursor-pointer group",children:[g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:v.thumbnailUrl||v.storageUrl||v.imageUrl,alt:"History entry",className:"w-full h-24 object-cover rounded-lg group-hover:opacity-80 transition-opacity duration-200"}),g.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-200 rounded-lg"})]}),g.jsxs("div",{className:"mt-2",children:[g.jsx("p",{className:"text-xs text-gray-600 truncate",title:v.prompt||"No prompt",children:v.prompt&&v.prompt.length>30?`${v.prompt.substring(0,30)}...`:v.prompt||"No prompt"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Cd(v)})]})]},v.id)),Dr?g.jsx("div",{className:"flex justify-center py-4",children:g.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):xs?g.jsx("div",{className:"flex justify-center py-4",children:g.jsx("button",{onClick:Yl,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm",children:" "})}):null]})}),Pt&&g.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-purple-500 rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-b-purple-600 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})})]})})]})}),g.jsx("div",{className:"lg:col-span-1 lg:order-3",children:g.jsxs("div",{className:"card p-4 relative",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:""}),g.jsx("button",{onClick:()=>sa(i),disabled:ae||!i||o||!_e,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-800 rounded-full flex items-center justify-center transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:_e?"  ":"   ",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),g.jsx("div",{className:`transition-opacity duration-300 ${ae||o?"opacity-50 pointer-events-none":""}`,children:(Q||[]).length===0?g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"text-gray-400 mb-2",children:g.jsx(uc,{className:"w-8 h-8 mx-auto"})}),g.jsx("p",{className:"text-sm text-gray-500",children:"  "}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"  "})]}):g.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto scrollbar-visible",children:(Q||[]).map((v,C)=>g.jsx("div",{onClick:()=>Kn(v),className:"rounded-lg p-3 transition-colors duration-200 cursor-pointer bg-gray-50 hover:bg-gray-100 border-2 border-transparent",children:g.jsx("p",{className:"text-sm font-medium text-gray-700",children:v})},C))})}),ae&&g.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-12 h-12 border-4 border-gray-300 border-t-orange-500 rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-b-orange-600 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})})]})})]})}),g.jsx("div",{className:"lg:col-span-2 lg:order-2",children:g.jsxs("div",{className:"card p-6",children:[g.jsxs("div",{className:"relative mb-6",children:[g.jsx("div",{className:"w-full rounded-lg shadow-lg overflow-hidden transition-all duration-300",style:{aspectRatio:Ln,maxHeight:"70vh"},children:g.jsx("img",{src:i,alt:"Main room design",onClick:Sd,onLoad:Gl,className:`w-full h-full object-contain rounded-lg transition-all duration-300 cursor-pointer hover:opacity-90 ${o?"blur-sm cursor-not-allowed":""}`})}),g.jsxs("button",{onClick:Hl,disabled:o,className:"absolute top-4 right-4 bg-blue-500/70 hover:bg-blue-500/90 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm flex items-center gap-2",children:[g.jsx(oI,{className:"w-4 h-4"})," "]}),g.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[g.jsx("button",{onClick:na,disabled:o,className:"w-10 h-10 bg-green-600/70 hover:bg-green-600/90 text-white rounded-full flex items-center justify-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm",title:"",children:g.jsx(eI,{className:"w-5 h-5"})}),g.jsx("button",{onClick:Ei,disabled:o,className:"w-10 h-10 bg-green-500/70 hover:bg-green-500/90 text-white rounded-full flex items-center justify-center transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm",title:" ",children:g.jsx(nI,{className:"w-5 h-5"})})]}),o&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg",children:g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-8 h-8 border-2 border-white/50 border-b-white rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"0.8s"}})})]})})]}),g.jsxs("div",{className:"mb-6",children:[g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:ql,disabled:o||tn,className:`flex-shrink-0 w-12 h-12 rounded-full border-2 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 select-none ${tt?"bg-green-500 border-green-500 text-white animate-pulse":tn?"bg-blue-500 border-blue-500 text-white":"bg-green-500 border-green-500 hover:bg-green-600 hover:border-green-600 text-white"}`,title:tt?"   ":tn?" ...":"    ",children:tn?g.jsx(tI,{className:"w-6 h-6 animate-spin"}):tt?g.jsx(rI,{className:"w-6 h-6"}):g.jsx(iI,{className:"w-6 h-6"})}),g.jsxs("div",{className:"flex-1 relative",children:[g.jsx("input",{type:"text",value:dt,onChange:v=>wt(v.target.value),placeholder:" ...",disabled:o,className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed overflow-x-auto",style:{textAlign:"right",direction:"rtl",overflowX:"auto",whiteSpace:"nowrap"},onKeyPress:v=>{v.key==="Enter"&&jr()}}),dt&&g.jsx("button",{onClick:()=>wt(""),disabled:o,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})]}),(tt||tn)&&g.jsx("div",{className:"mt-3 text-center",children:g.jsxs("div",{className:`inline-flex items-center gap-2 text-sm px-4 py-2 rounded-full ${tt?"text-green-600 bg-green-50":"text-blue-600 bg-blue-50"}`,children:[g.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${tt?"bg-green-500":"bg-blue-500"}`}),g.jsx("span",{children:tt?"...     ":" ..."})]})}),$l&&g.jsx("div",{className:"mt-3 text-center",children:g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-red-600 bg-red-50 px-4 py-2 rounded-full",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"   "})]})})]}),g.jsxs("div",{className:"flex gap-4",children:[g.jsxs("div",{className:"relative",children:[Cr?g.jsxs("div",{className:"relative btn-secondary h-10 w-24 flex items-center justify-center",children:[g.jsx("img",{src:Cr,alt:"Object to add",className:"w-6 h-6 object-cover rounded border border-gray-300"}),g.jsx("button",{onClick:ia,disabled:o,className:"absolute -top-1 -right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}):g.jsxs("button",{onClick:o?void 0:Kl,disabled:o,className:"flex-1 btn-secondary h-10 border-2 border-dashed border-blue-400 hover:border-blue-500 hover:bg-blue-50 flex items-center justify-center transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(ca,{className:"w-4 h-4 text-blue-500 ml-2"}),g.jsx("span",{className:"text-sm text-blue-600",children:" "})]}),g.jsx("input",{ref:Wn,type:"file",accept:"image/*",onChange:Wl,className:"hidden"})]}),g.jsxs("div",{className:"relative",ref:ur,children:[g.jsxs("button",{onClick:()=>Ps(!Go),disabled:o,className:"flex-1 btn-secondary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx(rn,{className:"w-4 h-4 ml-2"}),"..."]}),Go&&g.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-48",children:(Ur=bd[t])==null?void 0:Ur.map((v,C)=>g.jsxs("button",{onClick:()=>{v.action(),Ps(!1)},disabled:o,className:"w-full px-4 py-2 text-right hover:bg-gray-50 flex items-center justify-end gap-2 disabled:opacity-50 disabled:cursor-not-allowed border-b border-gray-100 last:border-b-0",children:[g.jsx("span",{children:v.name}),g.jsx(v.icon,{className:"w-4 h-4"})]},C))})]}),g.jsxs("button",{onClick:jr,disabled:o||!dt.trim(),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center gap-2 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"text-sm font-medium",children:""}),g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})]})]})})]})]}),c&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 h-[85vh] overflow-hidden max-w-[95vw] md:max-w-6xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  RAL"}),g.jsx("button",{onClick:()=>u(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"flex flex-wrap gap-1 md:gap-2 mb-4 md:mb-6 border-b border-gray-200 pb-3 md:pb-4",children:Object.keys(Cs).map(v=>g.jsxs("button",{onClick:()=>Zp(v),disabled:o,className:`flex items-center gap-2 px-2 md:px-4 py-1 md:py-2 rounded-lg font-medium text-xs md:text-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${gd===v?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[g.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:De[v]}}),v]},v))}),g.jsx("div",{className:"h-96 overflow-y-auto",children:g.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2 md:gap-3",children:(Ld=Cs[gd])==null?void 0:Ld.map((v,C)=>g.jsxs("button",{onClick:()=>Ns(v),disabled:o,className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-gray-300 shadow-sm mb-2",style:{backgroundColor:v.hex}}),g.jsx("span",{className:"text-xs text-text font-medium text-center leading-tight",children:v.ral}),g.jsx("span",{className:"text-xs text-gray-500 text-center leading-tight mt-1",children:v.name})]},C))})})]})})}),d&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[70vh] overflow-y-auto max-w-[95vw] md:max-w-2xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  "}),g.jsx("button",{onClick:()=>f(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:Ds.map((v,C)=>g.jsxs("button",{onClick:()=>om(v),disabled:o,className:"flex items-center p-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"text-2xl ml-3",children:v.icon}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm font-medium text-text",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.value})]})]},C))})]})})}),p&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[70vh] overflow-y-auto max-w-[95vw] md:max-w-2xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  "}),g.jsx("button",{onClick:()=>w(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:rm.map((v,C)=>g.jsxs("button",{onClick:()=>am(v),disabled:o,className:"flex items-center p-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{className:"text-2xl ml-3",children:""}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm font-medium text-text",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.value})]})]},C))})]})})}),R&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[70vh] overflow-y-auto max-w-[95vw] md:max-w-2xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  "}),g.jsx("button",{onClick:()=>P(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:Nd.map((v,C)=>g.jsx("button",{onClick:()=>Os(v),disabled:o,className:"flex items-center p-4 rounded-lg hover:bg-gray-50 transition-colors duration-200 border border-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:g.jsxs("div",{className:"text-right w-full",children:[g.jsx("div",{className:"text-sm font-medium text-text",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.value})]})},C))})]})})}),N&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[70vh] overflow-y-auto max-w-[95vw] md:max-w-2xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  /"}),g.jsx("button",{onClick:()=>T(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:im.map(v=>g.jsxs("button",{onClick:()=>pr(v),disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(Ri,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsx("span",{className:"text-sm font-medium text-gray-800",children:v.name})]},v.value))})]})})}),I&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[80vh] overflow-y-auto max-w-[95vw] md:max-w-3xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:"  "}),g.jsx("button",{onClick:()=>b(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:sm.map(v=>g.jsxs("button",{onClick:()=>Dd(v),disabled:o,className:"flex flex-col items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-center",children:[g.jsx(nn,{className:"w-6 h-6 text-blue-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800 mb-1",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.value})]})]},v.value))})]})})}),M&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[80vh] overflow-y-auto max-w-[95vw] md:max-w-4xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:" "}),g.jsx("button",{onClick:()=>$(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" /",value:"       ",hebrew:"       "},{name:" ",value:"Picture Window: Large, fixed view.",hebrew:"      "},{name:" ",value:"Casement Window: Outward crank open.",hebrew:"    "},{name:" / ",value:"Skylight / Sun Tunnel: Light from above.",hebrew:"       "},{name:" ",value:"Transom Window: Sits over door.",hebrew:"    "},{name:" ",value:"Interior Window: Between two rooms.",hebrew:"     "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),$(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(ah,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" ",value:"French Doors: Glass pane entry.",hebrew:"    "},{name:" ",value:"Pocket Door: Slides inside wall.",hebrew:"     "},{name:" ",value:"Barn Door: Sliding exposed track.",hebrew:"     "},{name:" ",value:"Louvered Door: Vented slats, air.",hebrew:"     "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),$(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(ah,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]})]})]})})}),z&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-h-[80vh] overflow-y-auto max-w-[95vw] md:max-w-4xl",children:g.jsxs("div",{className:"p-4 md:p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:" "}),g.jsx("button",{onClick:()=>A(!1),disabled:o,className:"text-gray-500 hover:text-gray-700 text-xl disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" ",value:"Toilet Seat: Slow-close lid",hebrew:"      "},{name:" ",value:"Toilet Seat: Heated bidet function",hebrew:"      "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" ",value:"Bathtub: Freestanding oval soak",hebrew:"   "},{name:" ",value:"Bathtub: Clawfoot vintage design",hebrew:"     "},{name:" ",value:"Bathtub: Drop-in standard size",hebrew:"   "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" ",value:"Shower: Walk-in frameless glass",hebrew:"     "},{name:" ",value:"Shower: Rainfall head system",hebrew:"     "},{name:" ",value:"Shower: Sliding door enclosure",hebrew:"    "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:" ",value:"Sink (Vanity): Vessel bowl style",hebrew:"    "},{name:" ",value:"Sink (Vanity): Pedestal classic look",hebrew:"    "},{name:" ",value:"Sink (Vanity): Undermount ceramic white",hebrew:"    "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" \\'/"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:"' ",value:"Jacuzzi / Spa: Portable vinyl bubble",hebrew:" '  "},{name:"' ",value:"Jacuzzi / Spa: Built-in tiled perimeter",hebrew:" '   "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:" "}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:"  ",value:"Pool: Above-ground metal frame",hebrew:"      "},{name:"  ",value:"Pool: In-ground concrete custom",hebrew:"      "}].map((v,C)=>g.jsxs("button",{onClick:()=>{Ee(v.hebrew),A(!1)},disabled:o,className:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-right",children:[g.jsx(rn,{className:"w-5 h-5 text-gray-600 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-gray-800",children:v.name}),g.jsx("div",{className:"text-xs text-gray-500",children:v.hebrew})]})]},C))})]})]})]})})}),Ss&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[60] p-4",onClick:fr,children:g.jsxs("div",{className:"relative max-w-7xl max-h-full w-full h-full flex items-center justify-center",children:[g.jsx("img",{src:i,alt:"Full size view",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),g.jsx("button",{onClick:fr,className:"absolute top-4 right-4 bg-white/20 hover:bg-white/30 text-white p-3 rounded-full transition-colors duration-200 backdrop-blur-sm",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),g.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full backdrop-blur-sm",children:g.jsx("span",{className:"text-sm",children:"      "})})]})}),Wo&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",onClick:()=>Mr(!1),children:g.jsxs("div",{className:"suggestions-modal bg-white rounded-xl shadow-2xl w-full max-w-md max-h-[80vh] flex flex-col",onClick:v=>v.stopPropagation(),children:[g.jsx("div",{className:"p-6 border-b border-gray-200",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h3",{className:"text-lg font-semibold text-text",children:["  ",t]}),g.jsx("button",{onClick:()=>Mr(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]})}),g.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:g.jsx("div",{className:"space-y-3",children:(Vd=bd[t])==null?void 0:Vd.map((v,C)=>g.jsxs("button",{onClick:()=>{v.action(),Mr(!1)},disabled:o,className:"w-full px-4 py-3 text-right hover:bg-gray-50 flex items-center justify-start gap-3 disabled:opacity-50 disabled:cursor-not-allowed border border-gray-200 rounded-lg transition-colors duration-200",children:[g.jsx(v.icon,{className:"w-5 h-5 text-gray-600"}),g.jsx("span",{className:"text-sm font-medium",children:v.name})]},C))})}),g.jsx("div",{className:"p-6 border-t border-gray-200",children:g.jsx("button",{onClick:()=>Mr(!1),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg transition-colors duration-200",children:""})})]})}),jl&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-w-md",children:g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:""}),g.jsx("button",{onClick:()=>Or(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),g.jsxs("div",{className:"text-center mb-6",children:[g.jsx("p",{className:"text-gray-600 mb-4",children:"    ?"}),g.jsx("p",{className:"text-sm text-gray-500",children:E==null?void 0:E.email})]}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("button",{onClick:()=>Or(!1),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:""}),g.jsx("button",{onClick:nm,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:""})]})]})})}),yd&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:g.jsx("div",{className:"bg-white rounded-xl shadow-2xl w-full mx-4 max-w-md",children:g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-text",children:gn==="login"?"":" "}),g.jsx("button",{onClick:()=>{$o(!1),wi(""),qo(""),Vr(""),et("signup")},className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),g.jsxs("form",{onSubmit:Ql,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" "}),g.jsx("input",{type:"email",value:Ne,onChange:v=>wi(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"example@email.com",required:!0})]}),gn==="signup"&&g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  "}),g.jsx("input",{type:"email",value:zo,onChange:v=>qo(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"    ",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),g.jsx("input",{type:"password",value:Lr,onChange:v=>Vr(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:" ",required:!0,minLength:6})]}),gn==="login"&&g.jsx("div",{className:"text-center",children:g.jsx("button",{type:"button",onClick:Rd,disabled:Ho||!Ne,className:"text-blue-600 hover:text-blue-800 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:Ho?"...":" ?"})}),g.jsx("button",{type:"submit",disabled:Ul||!Ne||!Lr||gn==="signup"&&!zo,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:Ul?"...":gn==="login"?"":" "})]}),g.jsx("div",{className:"mt-4 text-center",children:g.jsx("button",{onClick:()=>et(gn==="login"?"signup":"login"),className:"border border-blue-600 text-blue-600 hover:bg-blue-50 px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:gn==="login"?"  ?   ":"  ? "})})]})})}),g.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-6 mt-12",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[g.jsx("div",{className:"text-sm text-gray-500",children:" 2025 MoomHe.   ."}),g.jsxs("div",{className:"flex space-x-6 space-x-reverse",children:[g.jsx("a",{href:"/eula.html",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:" "}),g.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:" "})]})]})})})]})}fg.createRoot(document.getElementById("root")).render(g.jsx(ck.StrictMode,{children:g.jsx(R5,{})}));export{jV as $,O5 as A,Y5 as B,nU as C,h4 as D,Iu as E,Mi as F,ji as G,M5 as H,CL as I,dU as J,bU as K,zI as L,aM as M,rV as N,si as O,io as P,iU as Q,pU as R,py as S,s4 as T,K5 as U,xV as V,gU as W,IU as X,AU as Y,hU as Z,BV as _,Xu as a,_o as a$,F5 as a0,vL as a1,PV as a2,yU as a3,wU as a4,TU as a5,OL as a6,cU as a7,J5 as a8,B5 as a9,xr as aA,Pe as aB,Sn as aC,Mo as aD,Fo as aE,Le as aF,j as aG,Pr as aH,Dj as aI,i6 as aJ,xt as aK,Vl as aL,fd as aM,Jh as aN,Yp as aO,pd as aP,Kp as aQ,_w as aR,Rn as aS,Qp as aT,Wi as aU,Ae as aV,r6 as aW,sr as aX,t6 as aY,gv as aZ,rt as a_,W5 as aa,rU as ab,RV as ac,rv as ad,U5 as ae,G5 as af,Q5 as ag,mU as ah,vU as ai,EU as aj,lU as ak,j5 as al,aU as am,eU as an,tU as ao,_U as ap,Z5 as aq,oU as ar,sU as as,X5 as at,q5 as au,_P as av,Lu as aw,Vj as ax,In as ay,DU as az,Ju as b,Yh as b$,G as b0,xU as b1,p4 as b2,We as b3,N9 as b4,he as b5,RU as b6,C9 as b7,k9 as b8,kU as b9,KU as bA,WU as bB,Ze as bC,md as bD,Gj as bE,d9 as bF,Hj as bG,n9 as bH,r9 as bI,zy as bJ,i9 as bK,s9 as bL,Oj as bM,S9 as bN,E9 as bO,OU as bP,ug as bQ,HU as bR,ST as bS,h9 as bT,p9 as bU,f9 as bV,Lj as bW,qy as bX,c9 as bY,u9 as bZ,zU as b_,Hn as ba,A4 as bb,l9 as bc,JU as bd,XU as be,qU as bf,I9 as bg,w9 as bh,YU as bi,MU as bj,dd as bk,CU as bl,Nj as bm,zj as bn,P9 as bo,a9 as bp,_9 as bq,UU as br,x9 as bs,lo as bt,$U as bu,ZU as bv,LU as bw,VU as bx,jU as by,R9 as bz,V5 as c,m9 as c0,g9 as c1,Zj as c2,Kh as c3,iP as c4,e9 as c5,NU as c6,y9 as c7,v9 as c8,Xp as c9,b9 as ca,SU as cb,t9 as cc,$j as cd,GU as ce,QU as cf,BU as cg,o9 as ch,T9 as ci,FU as cj,Qh as ck,A9 as cl,Do as d,k5 as e,Fi as f,Lh as g,D5 as h,za as i,i4 as j,C5 as k,N5 as l,pv as m,Ui as n,z5 as o,UV as p,fU as q,KV as r,r4 as s,AS as t,CV as u,$5 as v,sV as w,H5 as x,L5 as y,uU as z};
