var cP=Object.defineProperty;var uP=(t,e,n)=>e in t?cP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nx=(t,e,n)=>(uP(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function dP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fE={exports:{}},hp={},mE={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=Symbol.for("react.element"),hP=Symbol.for("react.portal"),fP=Symbol.for("react.fragment"),mP=Symbol.for("react.strict_mode"),pP=Symbol.for("react.profiler"),gP=Symbol.for("react.provider"),yP=Symbol.for("react.context"),wP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),vP=Symbol.for("react.memo"),xP=Symbol.for("react.lazy"),rx=Symbol.iterator;function IP(t){return t===null||typeof t!="object"?null:(t=rx&&t[rx]||t["@@iterator"],typeof t=="function"?t:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,yE={};function Tc(t,e,n){this.props=t,this.context=e,this.refs=yE,this.updater=n||pE}Tc.prototype.isReactComponent={};Tc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wE(){}wE.prototype=Tc.prototype;function fw(t,e,n){this.props=t,this.context=e,this.refs=yE,this.updater=n||pE}var mw=fw.prototype=new wE;mw.constructor=fw;gE(mw,Tc.prototype);mw.isPureReactComponent=!0;var ix=Array.isArray,_E=Object.prototype.hasOwnProperty,pw={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function xE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_E.call(e,r)&&!vE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Qd,type:t,key:s,ref:o,props:i,_owner:pw.current}}function bP(t,e){return{$$typeof:Qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qd}function EP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sx=/\/+/g;function Ig(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EP(""+t.key):e.toString(36)}function Df(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qd:case hP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ig(o,0):r,ix(i)?(n="",t!=null&&(n=t.replace(sx,"$&/")+"/"),Df(i,e,n,"",function(u){return u})):i!=null&&(gw(i)&&(i=bP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ix(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ig(s,a);o+=Df(s,e,n,l,i)}else if(l=IP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ig(s,a++),o+=Df(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ef(t,e,n){if(t==null)return t;var r=[],i=0;return Df(t,r,"","",function(s){return e.call(n,s,i++)}),r}function TP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wn={current:null},Lf={transition:null},AP={ReactCurrentDispatcher:wn,ReactCurrentBatchConfig:Lf,ReactCurrentOwner:pw};function IE(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:ef,forEach:function(t,e,n){ef(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ef(t,function(){e++}),e},toArray:function(t){return ef(t,function(e){return e})||[]},only:function(t){if(!gw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Tc;fe.Fragment=fP;fe.Profiler=pP;fe.PureComponent=fw;fe.StrictMode=mP;fe.Suspense=_P;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AP;fe.act=IE;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_E.call(e,l)&&!vE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Qd,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:yP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gP,_context:t},t.Consumer=t};fe.createElement=xE;fe.createFactory=function(t){var e=xE.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:wP,render:t}};fe.isValidElement=gw;fe.lazy=function(t){return{$$typeof:xP,_payload:{_status:-1,_result:t},_init:TP}};fe.memo=function(t,e){return{$$typeof:vP,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Lf.transition;Lf.transition={};try{t()}finally{Lf.transition=e}};fe.unstable_act=IE;fe.useCallback=function(t,e){return wn.current.useCallback(t,e)};fe.useContext=function(t){return wn.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return wn.current.useDeferredValue(t)};fe.useEffect=function(t,e){return wn.current.useEffect(t,e)};fe.useId=function(){return wn.current.useId()};fe.useImperativeHandle=function(t,e,n){return wn.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return wn.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return wn.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return wn.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return wn.current.useReducer(t,e,n)};fe.useRef=function(t){return wn.current.useRef(t)};fe.useState=function(t){return wn.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return wn.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return wn.current.useTransition()};fe.version="18.3.1";mE.exports=fe;var F=mE.exports;const SP=dP(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=F,kP=Symbol.for("react.element"),NP=Symbol.for("react.fragment"),CP=Object.prototype.hasOwnProperty,PP=RP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DP={key:!0,ref:!0,__self:!0,__source:!0};function bE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CP.call(e,r)&&!DP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kP,type:t,key:s,ref:o,props:i,_owner:PP.current}}hp.Fragment=NP;hp.jsx=bE;hp.jsxs=bE;fE.exports=hp;var d=fE.exports,Ry={},EE={exports:{}},Zn={},TE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,se){var ae=Y.length;Y.push(se);e:for(;0<ae;){var Ve=ae-1>>>1,be=Y[Ve];if(0<i(be,se))Y[Ve]=se,Y[ae]=be,ae=Ve;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var se=Y[0],ae=Y.pop();if(ae!==se){Y[0]=ae;e:for(var Ve=0,be=Y.length,je=be>>>1;Ve<je;){var on=2*(Ve+1)-1,an=Y[on],ln=on+1,Ht=Y[ln];if(0>i(an,ae))ln<be&&0>i(Ht,an)?(Y[Ve]=Ht,Y[ln]=ae,Ve=ln):(Y[Ve]=an,Y[on]=ae,Ve=on);else if(ln<be&&0>i(Ht,ae))Y[Ve]=Ht,Y[ln]=ae,Ve=ln;else break e}}return se}function i(Y,se){var ae=Y.sortIndex-se.sortIndex;return ae!==0?ae:Y.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,y=!1,x=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Y){for(var se=n(u);se!==null;){if(se.callback===null)r(u);else if(se.startTime<=Y)r(u),se.sortIndex=se.expirationTime,e(l,se);else break;se=n(u)}}function L(Y){if(A=!1,I(Y),!x)if(n(l)!==null)x=!0,ts(z);else{var se=n(u);se!==null&&vn(L,se.startTime-Y)}}function z(Y,se){x=!1,A&&(A=!1,b(_),_=-1),y=!0;var ae=p;try{for(I(se),f=n(l);f!==null&&(!(f.expirationTime>se)||Y&&!P());){var Ve=f.callback;if(typeof Ve=="function"){f.callback=null,p=f.priorityLevel;var be=Ve(f.expirationTime<=se);se=t.unstable_now(),typeof be=="function"?f.callback=be:f===n(l)&&r(l),I(se)}else r(l);f=n(l)}if(f!==null)var je=!0;else{var on=n(u);on!==null&&vn(L,on.startTime-se),je=!1}return je}finally{f=null,p=ae,y=!1}}var q=!1,E=null,_=-1,R=5,S=-1;function P(){return!(t.unstable_now()-S<R)}function N(){if(E!==null){var Y=t.unstable_now();S=Y;var se=!0;try{se=E(!0,Y)}finally{se?k():(q=!1,E=null)}}else q=!1}var k;if(typeof v=="function")k=function(){v(N)};else if(typeof MessageChannel<"u"){var sn=new MessageChannel,nr=sn.port2;sn.port1.onmessage=N,k=function(){nr.postMessage(null)}}else k=function(){C(N,0)};function ts(Y){E=Y,q||(q=!0,k())}function vn(Y,se){_=C(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,ts(z))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(p){case 1:case 2:case 3:var se=3;break;default:se=p}var ae=p;p=se;try{return Y()}finally{p=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ae=p;p=Y;try{return se()}finally{p=ae}},t.unstable_scheduleCallback=function(Y,se,ae){var Ve=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Ve+ae:Ve):ae=Ve,Y){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ae+be,Y={id:h++,callback:se,priorityLevel:Y,startTime:ae,expirationTime:be,sortIndex:-1},ae>Ve?(Y.sortIndex=ae,e(u,Y),n(l)===null&&Y===n(u)&&(A?(b(_),_=-1):A=!0,vn(L,ae-Ve))):(Y.sortIndex=be,e(l,Y),x||y||(x=!0,ts(z))),Y},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Y){var se=p;return function(){var ae=p;p=se;try{return Y.apply(this,arguments)}finally{p=ae}}}})(AE);TE.exports=AE;var LP=TE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP=F,Yn=LP;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SE=new Set,ad={};function Ea(t,e){Yl(t,e),Yl(t+"Capture",e)}function Yl(t,e){for(ad[t]=e,t=0;t<e.length;t++)SE.add(e[t])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ky=Object.prototype.hasOwnProperty,OP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ox={},ax={};function MP(t){return ky.call(ax,t)?!0:ky.call(ox,t)?!1:OP.test(t)?ax[t]=!0:(ox[t]=!0,!1)}function jP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FP(t,e,n,r){if(e===null||typeof e>"u"||jP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _n(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new _n(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new _n(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new _n(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new _n(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new _n(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new _n(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new _n(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new _n(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new _n(t,5,!1,t.toLowerCase(),null,!1,!1)});var yw=/[\-:]([a-z])/g;function ww(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yw,ww);Gt[e]=new _n(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yw,ww);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yw,ww);Gt[e]=new _n(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new _n("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new _n(t,1,!1,t.toLowerCase(),null,!0,!0)});function _w(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FP(e,n,i,r)&&(n=null),r||i===null?MP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wi=VP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tf=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),Ny=Symbol.for("react.profiler"),RE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),Cy=Symbol.for("react.suspense"),Py=Symbol.for("react.suspense_list"),Iw=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),NE=Symbol.for("react.offscreen"),lx=Symbol.iterator;function du(t){return t===null||typeof t!="object"?null:(t=lx&&t[lx]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,bg;function Au(t){if(bg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bg=e&&e[1]||""}return`
`+bg+t}var Eg=!1;function Tg(t,e){if(!t||Eg)return"";Eg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Eg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Au(t):""}function UP(t){switch(t.tag){case 5:return Au(t.type);case 16:return Au("Lazy");case 13:return Au("Suspense");case 19:return Au("SuspenseList");case 0:case 2:case 15:return t=Tg(t.type,!1),t;case 11:return t=Tg(t.type.render,!1),t;case 1:return t=Tg(t.type,!0),t;default:return""}}function Dy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Al:return"Fragment";case Tl:return"Portal";case Ny:return"Profiler";case vw:return"StrictMode";case Cy:return"Suspense";case Py:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kE:return(t.displayName||"Context")+".Consumer";case RE:return(t._context.displayName||"Context")+".Provider";case xw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Iw:return e=t.displayName||null,e!==null?e:Dy(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return Dy(t(e))}catch{}}return null}function BP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dy(e);case 8:return e===vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function to(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zP(t){var e=CE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nf(t){t._valueTracker||(t._valueTracker=zP(t))}function PE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ly(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=to(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DE(t,e){e=e.checked,e!=null&&_w(t,"checked",e,!1)}function Vy(t,e){DE(t,e);var n=to(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oy(t,e.type,to(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ux(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oy(t,e,n){(e!=="number"||gm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Su=Array.isArray;function Ml(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+to(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function My(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Su(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:to(n)}}function LE(t,e){var n=to(e.value),r=to(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rf,OE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rf=rf||document.createElement("div"),rf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ld(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$P=["Webkit","ms","Moz","O"];Object.keys(Mu).forEach(function(t){$P.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mu[e]=Mu[t]})});function ME(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mu.hasOwnProperty(t)&&Mu[t]?(""+e).trim():e+"px"}function jE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ME(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qP=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fy(t,e){if(e){if(qP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Uy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var By=null;function bw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zy=null,jl=null,Fl=null;function fx(t){if(t=Jd(t)){if(typeof zy!="function")throw Error(G(280));var e=t.stateNode;e&&(e=yp(e),zy(t.stateNode,t.type,e))}}function FE(t){jl?Fl?Fl.push(t):Fl=[t]:jl=t}function UE(){if(jl){var t=jl,e=Fl;if(Fl=jl=null,fx(t),e)for(t=0;t<e.length;t++)fx(e[t])}}function BE(t,e){return t(e)}function zE(){}var Ag=!1;function $E(t,e,n){if(Ag)return t(e,n);Ag=!0;try{return BE(t,e,n)}finally{Ag=!1,(jl!==null||Fl!==null)&&(zE(),UE())}}function cd(t,e){var n=t.stateNode;if(n===null)return null;var r=yp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var $y=!1;if(Mi)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){$y=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{$y=!1}function GP(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ju=!1,ym=null,wm=!1,qy=null,HP={onError:function(t){ju=!0,ym=t}};function WP(t,e,n,r,i,s,o,a,l){ju=!1,ym=null,GP.apply(HP,arguments)}function KP(t,e,n,r,i,s,o,a,l){if(WP.apply(this,arguments),ju){if(ju){var u=ym;ju=!1,ym=null}else throw Error(G(198));wm||(wm=!0,qy=u)}}function Ta(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mx(t){if(Ta(t)!==t)throw Error(G(188))}function QP(t){var e=t.alternate;if(!e){if(e=Ta(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mx(i),t;if(s===r)return mx(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function GE(t){return t=QP(t),t!==null?HE(t):null}function HE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HE(t);if(e!==null)return e;t=t.sibling}return null}var WE=Yn.unstable_scheduleCallback,px=Yn.unstable_cancelCallback,YP=Yn.unstable_shouldYield,XP=Yn.unstable_requestPaint,ft=Yn.unstable_now,JP=Yn.unstable_getCurrentPriorityLevel,Ew=Yn.unstable_ImmediatePriority,KE=Yn.unstable_UserBlockingPriority,_m=Yn.unstable_NormalPriority,ZP=Yn.unstable_LowPriority,QE=Yn.unstable_IdlePriority,fp=null,li=null;function e2(t){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(fp,t,void 0,(t.current.flags&128)===128)}catch{}}var jr=Math.clz32?Math.clz32:r2,t2=Math.log,n2=Math.LN2;function r2(t){return t>>>=0,t===0?32:31-(t2(t)/n2|0)|0}var sf=64,of=4194304;function Ru(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ru(a):(s&=o,s!==0&&(r=Ru(s)))}else o=n&~i,o!==0?r=Ru(o):s!==0&&(r=Ru(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jr(e),i=1<<n,r|=t[n],e&=~i;return r}function i2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=i2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Gy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YE(){var t=sf;return sf<<=1,!(sf&4194240)&&(sf=64),t}function Sg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jr(e),t[e]=n}function o2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Tw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function XE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JE,Aw,ZE,eT,tT,Hy=!1,af=[],zs=null,$s=null,qs=null,ud=new Map,dd=new Map,Rs=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gx(t,e){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":ud.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dd.delete(e.pointerId)}}function fu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Jd(e),e!==null&&Aw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function l2(t,e,n,r,i){switch(e){case"focusin":return zs=fu(zs,t,e,n,r,i),!0;case"dragenter":return $s=fu($s,t,e,n,r,i),!0;case"mouseover":return qs=fu(qs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ud.set(s,fu(ud.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,dd.set(s,fu(dd.get(s)||null,t,e,n,r,i)),!0}return!1}function nT(t){var e=Wo(t.target);if(e!==null){var n=Ta(e);if(n!==null){if(e=n.tag,e===13){if(e=qE(n),e!==null){t.blockedOn=e,tT(t.priority,function(){ZE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);By=r,n.target.dispatchEvent(r),By=null}else return e=Jd(n),e!==null&&Aw(e),t.blockedOn=n,!1;e.shift()}return!0}function yx(t,e,n){Vf(t)&&n.delete(e)}function c2(){Hy=!1,zs!==null&&Vf(zs)&&(zs=null),$s!==null&&Vf($s)&&($s=null),qs!==null&&Vf(qs)&&(qs=null),ud.forEach(yx),dd.forEach(yx)}function mu(t,e){t.blockedOn===e&&(t.blockedOn=null,Hy||(Hy=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,c2)))}function hd(t){function e(i){return mu(i,t)}if(0<af.length){mu(af[0],t);for(var n=1;n<af.length;n++){var r=af[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zs!==null&&mu(zs,t),$s!==null&&mu($s,t),qs!==null&&mu(qs,t),ud.forEach(e),dd.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)nT(n),n.blockedOn===null&&Rs.shift()}var Ul=Wi.ReactCurrentBatchConfig,xm=!0;function u2(t,e,n,r){var i=De,s=Ul.transition;Ul.transition=null;try{De=1,Sw(t,e,n,r)}finally{De=i,Ul.transition=s}}function d2(t,e,n,r){var i=De,s=Ul.transition;Ul.transition=null;try{De=4,Sw(t,e,n,r)}finally{De=i,Ul.transition=s}}function Sw(t,e,n,r){if(xm){var i=Wy(t,e,n,r);if(i===null)Mg(t,e,r,Im,n),gx(t,r);else if(l2(i,t,e,n,r))r.stopPropagation();else if(gx(t,r),e&4&&-1<a2.indexOf(t)){for(;i!==null;){var s=Jd(i);if(s!==null&&JE(s),s=Wy(t,e,n,r),s===null&&Mg(t,e,r,Im,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Mg(t,e,r,null,n)}}var Im=null;function Wy(t,e,n,r){if(Im=null,t=bw(r),t=Wo(t),t!==null)if(e=Ta(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Im=t,null}function rT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JP()){case Ew:return 1;case KE:return 4;case _m:case ZP:return 16;case QE:return 536870912;default:return 16}default:return 16}}var Ms=null,Rw=null,Of=null;function iT(){if(Of)return Of;var t,e=Rw,n=e.length,r,i="value"in Ms?Ms.value:Ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Of=i.slice(t,1<r?1-r:void 0)}function Mf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lf(){return!0}function wx(){return!1}function er(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lf:wx,this.isPropagationStopped=wx,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lf)},persist:function(){},isPersistent:lf}),e}var Ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kw=er(Ac),Xd=it({},Ac,{view:0,detail:0}),h2=er(Xd),Rg,kg,pu,mp=it({},Xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pu&&(pu&&t.type==="mousemove"?(Rg=t.screenX-pu.screenX,kg=t.screenY-pu.screenY):kg=Rg=0,pu=t),Rg)},movementY:function(t){return"movementY"in t?t.movementY:kg}}),_x=er(mp),f2=it({},mp,{dataTransfer:0}),m2=er(f2),p2=it({},Xd,{relatedTarget:0}),Ng=er(p2),g2=it({},Ac,{animationName:0,elapsedTime:0,pseudoElement:0}),y2=er(g2),w2=it({},Ac,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_2=er(w2),v2=it({},Ac,{data:0}),vx=er(v2),x2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b2[t])?!!e[t]:!1}function Nw(){return E2}var T2=it({},Xd,{key:function(t){if(t.key){var e=x2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nw,charCode:function(t){return t.type==="keypress"?Mf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=er(T2),S2=it({},mp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=er(S2),R2=it({},Xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nw}),k2=er(R2),N2=it({},Ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),C2=er(N2),P2=it({},mp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=er(P2),L2=[9,13,27,32],Cw=Mi&&"CompositionEvent"in window,Fu=null;Mi&&"documentMode"in document&&(Fu=document.documentMode);var V2=Mi&&"TextEvent"in window&&!Fu,sT=Mi&&(!Cw||Fu&&8<Fu&&11>=Fu),Ix=String.fromCharCode(32),bx=!1;function oT(t,e){switch(t){case"keyup":return L2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sl=!1;function O2(t,e){switch(t){case"compositionend":return aT(e);case"keypress":return e.which!==32?null:(bx=!0,Ix);case"textInput":return t=e.data,t===Ix&&bx?null:t;default:return null}}function M2(t,e){if(Sl)return t==="compositionend"||!Cw&&oT(t,e)?(t=iT(),Of=Rw=Ms=null,Sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sT&&e.locale!=="ko"?null:e.data;default:return null}}var j2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!j2[t.type]:e==="textarea"}function lT(t,e,n,r){FE(r),e=bm(e,"onChange"),0<e.length&&(n=new kw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uu=null,fd=null;function F2(t){_T(t,0)}function pp(t){var e=Nl(t);if(PE(e))return t}function U2(t,e){if(t==="change")return e}var cT=!1;if(Mi){var Cg;if(Mi){var Pg="oninput"in document;if(!Pg){var Tx=document.createElement("div");Tx.setAttribute("oninput","return;"),Pg=typeof Tx.oninput=="function"}Cg=Pg}else Cg=!1;cT=Cg&&(!document.documentMode||9<document.documentMode)}function Ax(){Uu&&(Uu.detachEvent("onpropertychange",uT),fd=Uu=null)}function uT(t){if(t.propertyName==="value"&&pp(fd)){var e=[];lT(e,fd,t,bw(t)),$E(F2,e)}}function B2(t,e,n){t==="focusin"?(Ax(),Uu=e,fd=n,Uu.attachEvent("onpropertychange",uT)):t==="focusout"&&Ax()}function z2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pp(fd)}function $2(t,e){if(t==="click")return pp(e)}function q2(t,e){if(t==="input"||t==="change")return pp(e)}function G2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Br=typeof Object.is=="function"?Object.is:G2;function md(t,e){if(Br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ky.call(e,i)||!Br(t[i],e[i]))return!1}return!0}function Sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rx(t,e){var n=Sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sx(n)}}function dT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hT(){for(var t=window,e=gm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gm(t.document)}return e}function Pw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H2(t){var e=hT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dT(n.ownerDocument.documentElement,n)){if(r!==null&&Pw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Rx(n,s);var o=Rx(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W2=Mi&&"documentMode"in document&&11>=document.documentMode,Rl=null,Ky=null,Bu=null,Qy=!1;function kx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qy||Rl==null||Rl!==gm(r)||(r=Rl,"selectionStart"in r&&Pw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bu&&md(Bu,r)||(Bu=r,r=bm(Ky,"onSelect"),0<r.length&&(e=new kw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rl)))}function cf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kl={animationend:cf("Animation","AnimationEnd"),animationiteration:cf("Animation","AnimationIteration"),animationstart:cf("Animation","AnimationStart"),transitionend:cf("Transition","TransitionEnd")},Dg={},fT={};Mi&&(fT=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function gp(t){if(Dg[t])return Dg[t];if(!kl[t])return t;var e=kl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fT)return Dg[t]=e[n];return t}var mT=gp("animationend"),pT=gp("animationiteration"),gT=gp("animationstart"),yT=gp("transitionend"),wT=new Map,Nx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(t,e){wT.set(t,e),Ea(e,[t])}for(var Lg=0;Lg<Nx.length;Lg++){var Vg=Nx[Lg],K2=Vg.toLowerCase(),Q2=Vg[0].toUpperCase()+Vg.slice(1);ho(K2,"on"+Q2)}ho(mT,"onAnimationEnd");ho(pT,"onAnimationIteration");ho(gT,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(yT,"onTransitionEnd");Yl("onMouseEnter",["mouseout","mouseover"]);Yl("onMouseLeave",["mouseout","mouseover"]);Yl("onPointerEnter",["pointerout","pointerover"]);Yl("onPointerLeave",["pointerout","pointerover"]);Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ku));function Cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KP(r,e,void 0,t),t.currentTarget=null}function _T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cx(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cx(i,a,u),s=l}}}if(wm)throw t=qy,wm=!1,qy=null,t}function qe(t,e){var n=e[e0];n===void 0&&(n=e[e0]=new Set);var r=t+"__bubble";n.has(r)||(vT(e,t,2,!1),n.add(r))}function Og(t,e,n){var r=0;e&&(r|=4),vT(n,t,r,e)}var uf="_reactListening"+Math.random().toString(36).slice(2);function pd(t){if(!t[uf]){t[uf]=!0,SE.forEach(function(n){n!=="selectionchange"&&(Y2.has(n)||Og(n,!1,t),Og(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uf]||(e[uf]=!0,Og("selectionchange",!1,e))}}function vT(t,e,n,r){switch(rT(e)){case 1:var i=u2;break;case 4:i=d2;break;default:i=Sw}n=i.bind(null,e,n,t),i=void 0,!$y||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Mg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Wo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$E(function(){var u=s,h=bw(n),f=[];e:{var p=wT.get(t);if(p!==void 0){var y=kw,x=t;switch(t){case"keypress":if(Mf(n)===0)break e;case"keydown":case"keyup":y=A2;break;case"focusin":x="focus",y=Ng;break;case"focusout":x="blur",y=Ng;break;case"beforeblur":case"afterblur":y=Ng;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_x;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=m2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=k2;break;case mT:case pT:case gT:y=y2;break;case yT:y=C2;break;case"scroll":y=h2;break;case"wheel":y=D2;break;case"copy":case"cut":case"paste":y=_2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=xx}var A=(e&4)!==0,C=!A&&t==="scroll",b=A?p!==null?p+"Capture":null:p;A=[];for(var v=u,I;v!==null;){I=v;var L=I.stateNode;if(I.tag===5&&L!==null&&(I=L,b!==null&&(L=cd(v,b),L!=null&&A.push(gd(v,L,I)))),C)break;v=v.return}0<A.length&&(p=new y(p,x,null,n,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==By&&(x=n.relatedTarget||n.fromElement)&&(Wo(x)||x[ji]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Wo(x):null,x!==null&&(C=Ta(x),x!==C||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(A=_x,L="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=xx,L="onPointerLeave",b="onPointerEnter",v="pointer"),C=y==null?p:Nl(y),I=x==null?p:Nl(x),p=new A(L,v+"leave",y,n,h),p.target=C,p.relatedTarget=I,L=null,Wo(h)===u&&(A=new A(b,v+"enter",x,n,h),A.target=I,A.relatedTarget=C,L=A),C=L,y&&x)t:{for(A=y,b=x,v=0,I=A;I;I=cl(I))v++;for(I=0,L=b;L;L=cl(L))I++;for(;0<v-I;)A=cl(A),v--;for(;0<I-v;)b=cl(b),I--;for(;v--;){if(A===b||b!==null&&A===b.alternate)break t;A=cl(A),b=cl(b)}A=null}else A=null;y!==null&&Px(f,p,y,A,!1),x!==null&&C!==null&&Px(f,C,x,A,!0)}}e:{if(p=u?Nl(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var z=U2;else if(Ex(p))if(cT)z=q2;else{z=z2;var q=B2}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=$2);if(z&&(z=z(t,u))){lT(f,z,n,h);break e}q&&q(t,p,u),t==="focusout"&&(q=p._wrapperState)&&q.controlled&&p.type==="number"&&Oy(p,"number",p.value)}switch(q=u?Nl(u):window,t){case"focusin":(Ex(q)||q.contentEditable==="true")&&(Rl=q,Ky=u,Bu=null);break;case"focusout":Bu=Ky=Rl=null;break;case"mousedown":Qy=!0;break;case"contextmenu":case"mouseup":case"dragend":Qy=!1,kx(f,n,h);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":kx(f,n,h)}var E;if(Cw)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Sl?oT(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(sT&&n.locale!=="ko"&&(Sl||_!=="onCompositionStart"?_==="onCompositionEnd"&&Sl&&(E=iT()):(Ms=h,Rw="value"in Ms?Ms.value:Ms.textContent,Sl=!0)),q=bm(u,_),0<q.length&&(_=new vx(_,t,null,n,h),f.push({event:_,listeners:q}),E?_.data=E:(E=aT(n),E!==null&&(_.data=E)))),(E=V2?O2(t,n):M2(t,n))&&(u=bm(u,"onBeforeInput"),0<u.length&&(h=new vx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=E))}_T(f,e)})}function gd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cd(t,n),s!=null&&r.unshift(gd(t,s,i)),s=cd(t,e),s!=null&&r.push(gd(t,s,i))),t=t.return}return r}function cl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Px(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=cd(n,s),l!=null&&o.unshift(gd(n,l,a))):i||(l=cd(n,s),l!=null&&o.push(gd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var X2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function Dx(t){return(typeof t=="string"?t:""+t).replace(X2,`
`).replace(J2,"")}function df(t,e,n){if(e=Dx(e),Dx(t)!==e&&n)throw Error(G(425))}function Em(){}var Yy=null,Xy=null;function Jy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zy=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,Lx=typeof Promise=="function"?Promise:void 0,eD=typeof queueMicrotask=="function"?queueMicrotask:typeof Lx<"u"?function(t){return Lx.resolve(null).then(t).catch(tD)}:Zy;function tD(t){setTimeout(function(){throw t})}function jg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),hd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hd(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),ri="__reactFiber$"+Sc,yd="__reactProps$"+Sc,ji="__reactContainer$"+Sc,e0="__reactEvents$"+Sc,nD="__reactListeners$"+Sc,rD="__reactHandles$"+Sc;function Wo(t){var e=t[ri];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ji]||n[ri]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vx(t);t!==null;){if(n=t[ri])return n;t=Vx(t)}return e}t=n,n=t.parentNode}return null}function Jd(t){return t=t[ri]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function yp(t){return t[yd]||null}var t0=[],Cl=-1;function fo(t){return{current:t}}function He(t){0>Cl||(t.current=t0[Cl],t0[Cl]=null,Cl--)}function Ue(t,e){Cl++,t0[Cl]=t.current,t.current=e}var no={},rn=fo(no),Cn=fo(!1),oa=no;function Xl(t,e){var n=t.type.contextTypes;if(!n)return no;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pn(t){return t=t.childContextTypes,t!=null}function Tm(){He(Cn),He(rn)}function Ox(t,e,n){if(rn.current!==no)throw Error(G(168));Ue(rn,e),Ue(Cn,n)}function xT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,BP(t)||"Unknown",i));return it({},n,r)}function Am(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||no,oa=rn.current,Ue(rn,t),Ue(Cn,Cn.current),!0}function Mx(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=xT(t,e,oa),r.__reactInternalMemoizedMergedChildContext=t,He(Cn),He(rn),Ue(rn,t)):He(Cn),Ue(Cn,n)}var Si=null,wp=!1,Fg=!1;function IT(t){Si===null?Si=[t]:Si.push(t)}function iD(t){wp=!0,IT(t)}function mo(){if(!Fg&&Si!==null){Fg=!0;var t=0,e=De;try{var n=Si;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Si=null,wp=!1}catch(i){throw Si!==null&&(Si=Si.slice(t+1)),WE(Ew,mo),i}finally{De=e,Fg=!1}}return null}var Pl=[],Dl=0,Sm=null,Rm=0,ur=[],dr=0,aa=null,ki=1,Ni="";function Vo(t,e){Pl[Dl++]=Rm,Pl[Dl++]=Sm,Sm=t,Rm=e}function bT(t,e,n){ur[dr++]=ki,ur[dr++]=Ni,ur[dr++]=aa,aa=t;var r=ki;t=Ni;var i=32-jr(r)-1;r&=~(1<<i),n+=1;var s=32-jr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ki=1<<32-jr(e)+i|n<<i|r,Ni=s+t}else ki=1<<s|n<<i|r,Ni=t}function Dw(t){t.return!==null&&(Vo(t,1),bT(t,1,0))}function Lw(t){for(;t===Sm;)Sm=Pl[--Dl],Pl[Dl]=null,Rm=Pl[--Dl],Pl[Dl]=null;for(;t===aa;)aa=ur[--dr],ur[dr]=null,Ni=ur[--dr],ur[dr]=null,ki=ur[--dr],ur[dr]=null}var Hn=null,qn=null,Xe=!1,Or=null;function ET(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function jx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,qn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=aa!==null?{id:ki,overflow:Ni}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,qn=null,!0):!1;default:return!1}}function n0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function r0(t){if(Xe){var e=qn;if(e){var n=e;if(!jx(t,e)){if(n0(t))throw Error(G(418));e=Gs(n.nextSibling);var r=Hn;e&&jx(t,e)?ET(r,n):(t.flags=t.flags&-4097|2,Xe=!1,Hn=t)}}else{if(n0(t))throw Error(G(418));t.flags=t.flags&-4097|2,Xe=!1,Hn=t}}}function Fx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function hf(t){if(t!==Hn)return!1;if(!Xe)return Fx(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jy(t.type,t.memoizedProps)),e&&(e=qn)){if(n0(t))throw TT(),Error(G(418));for(;e;)ET(t,e),e=Gs(e.nextSibling)}if(Fx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qn=null}}else qn=Hn?Gs(t.stateNode.nextSibling):null;return!0}function TT(){for(var t=qn;t;)t=Gs(t.nextSibling)}function Jl(){qn=Hn=null,Xe=!1}function Vw(t){Or===null?Or=[t]:Or.push(t)}var sD=Wi.ReactCurrentBatchConfig;function gu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function ff(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ux(t){var e=t._init;return e(t._payload)}function AT(t){function e(b,v){if(t){var I=b.deletions;I===null?(b.deletions=[v],b.flags|=16):I.push(v)}}function n(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(b,v){return b=Qs(b,v),b.index=0,b.sibling=null,b}function s(b,v,I){return b.index=I,t?(I=b.alternate,I!==null?(I=I.index,I<v?(b.flags|=2,v):I):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,v,I,L){return v===null||v.tag!==6?(v=Hg(I,b.mode,L),v.return=b,v):(v=i(v,I),v.return=b,v)}function l(b,v,I,L){var z=I.type;return z===Al?h(b,v,I.props.children,L,I.key):v!==null&&(v.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ts&&Ux(z)===v.type)?(L=i(v,I.props),L.ref=gu(b,v,I),L.return=b,L):(L=qf(I.type,I.key,I.props,null,b.mode,L),L.ref=gu(b,v,I),L.return=b,L)}function u(b,v,I,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Wg(I,b.mode,L),v.return=b,v):(v=i(v,I.children||[]),v.return=b,v)}function h(b,v,I,L,z){return v===null||v.tag!==7?(v=ea(I,b.mode,L,z),v.return=b,v):(v=i(v,I),v.return=b,v)}function f(b,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hg(""+v,b.mode,I),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tf:return I=qf(v.type,v.key,v.props,null,b.mode,I),I.ref=gu(b,null,v),I.return=b,I;case Tl:return v=Wg(v,b.mode,I),v.return=b,v;case Ts:var L=v._init;return f(b,L(v._payload),I)}if(Su(v)||du(v))return v=ea(v,b.mode,I,null),v.return=b,v;ff(b,v)}return null}function p(b,v,I,L){var z=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:a(b,v,""+I,L);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case tf:return I.key===z?l(b,v,I,L):null;case Tl:return I.key===z?u(b,v,I,L):null;case Ts:return z=I._init,p(b,v,z(I._payload),L)}if(Su(I)||du(I))return z!==null?null:h(b,v,I,L,null);ff(b,I)}return null}function y(b,v,I,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return b=b.get(I)||null,a(v,b,""+L,z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case tf:return b=b.get(L.key===null?I:L.key)||null,l(v,b,L,z);case Tl:return b=b.get(L.key===null?I:L.key)||null,u(v,b,L,z);case Ts:var q=L._init;return y(b,v,I,q(L._payload),z)}if(Su(L)||du(L))return b=b.get(I)||null,h(v,b,L,z,null);ff(v,L)}return null}function x(b,v,I,L){for(var z=null,q=null,E=v,_=v=0,R=null;E!==null&&_<I.length;_++){E.index>_?(R=E,E=null):R=E.sibling;var S=p(b,E,I[_],L);if(S===null){E===null&&(E=R);break}t&&E&&S.alternate===null&&e(b,E),v=s(S,v,_),q===null?z=S:q.sibling=S,q=S,E=R}if(_===I.length)return n(b,E),Xe&&Vo(b,_),z;if(E===null){for(;_<I.length;_++)E=f(b,I[_],L),E!==null&&(v=s(E,v,_),q===null?z=E:q.sibling=E,q=E);return Xe&&Vo(b,_),z}for(E=r(b,E);_<I.length;_++)R=y(E,b,_,I[_],L),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?_:R.key),v=s(R,v,_),q===null?z=R:q.sibling=R,q=R);return t&&E.forEach(function(P){return e(b,P)}),Xe&&Vo(b,_),z}function A(b,v,I,L){var z=du(I);if(typeof z!="function")throw Error(G(150));if(I=z.call(I),I==null)throw Error(G(151));for(var q=z=null,E=v,_=v=0,R=null,S=I.next();E!==null&&!S.done;_++,S=I.next()){E.index>_?(R=E,E=null):R=E.sibling;var P=p(b,E,S.value,L);if(P===null){E===null&&(E=R);break}t&&E&&P.alternate===null&&e(b,E),v=s(P,v,_),q===null?z=P:q.sibling=P,q=P,E=R}if(S.done)return n(b,E),Xe&&Vo(b,_),z;if(E===null){for(;!S.done;_++,S=I.next())S=f(b,S.value,L),S!==null&&(v=s(S,v,_),q===null?z=S:q.sibling=S,q=S);return Xe&&Vo(b,_),z}for(E=r(b,E);!S.done;_++,S=I.next())S=y(E,b,_,S.value,L),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?_:S.key),v=s(S,v,_),q===null?z=S:q.sibling=S,q=S);return t&&E.forEach(function(N){return e(b,N)}),Xe&&Vo(b,_),z}function C(b,v,I,L){if(typeof I=="object"&&I!==null&&I.type===Al&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case tf:e:{for(var z=I.key,q=v;q!==null;){if(q.key===z){if(z=I.type,z===Al){if(q.tag===7){n(b,q.sibling),v=i(q,I.props.children),v.return=b,b=v;break e}}else if(q.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ts&&Ux(z)===q.type){n(b,q.sibling),v=i(q,I.props),v.ref=gu(b,q,I),v.return=b,b=v;break e}n(b,q);break}else e(b,q);q=q.sibling}I.type===Al?(v=ea(I.props.children,b.mode,L,I.key),v.return=b,b=v):(L=qf(I.type,I.key,I.props,null,b.mode,L),L.ref=gu(b,v,I),L.return=b,b=L)}return o(b);case Tl:e:{for(q=I.key;v!==null;){if(v.key===q)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(b,v.sibling),v=i(v,I.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else e(b,v);v=v.sibling}v=Wg(I,b.mode,L),v.return=b,b=v}return o(b);case Ts:return q=I._init,C(b,v,q(I._payload),L)}if(Su(I))return x(b,v,I,L);if(du(I))return A(b,v,I,L);ff(b,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(b,v.sibling),v=i(v,I),v.return=b,b=v):(n(b,v),v=Hg(I,b.mode,L),v.return=b,b=v),o(b)):n(b,v)}return C}var Zl=AT(!0),ST=AT(!1),km=fo(null),Nm=null,Ll=null,Ow=null;function Mw(){Ow=Ll=Nm=null}function jw(t){var e=km.current;He(km),t._currentValue=e}function i0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bl(t,e){Nm=t,Ow=Ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(An=!0),t.firstContext=null)}function gr(t){var e=t._currentValue;if(Ow!==t)if(t={context:t,memoizedValue:e,next:null},Ll===null){if(Nm===null)throw Error(G(308));Ll=t,Nm.dependencies={lanes:0,firstContext:t}}else Ll=Ll.next=t;return e}var Ko=null;function Fw(t){Ko===null?Ko=[t]:Ko.push(t)}function RT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fw(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fi(t,r)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function Uw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fi(t,n)}return i=r.interleaved,i===null?(e.next=e,Fw(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fi(t,n)}function jf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tw(t,n)}}function Bx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cm(t,e,n,r){var i=t.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,A=a;switch(p=e,y=n,A.tag){case 1:if(x=A.payload,typeof x=="function"){f=x.call(y,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=A.payload,p=typeof x=="function"?x.call(y,f,p):x,p==null)break e;f=it({},f,p);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ca|=o,t.lanes=o,t.memoizedState=f}}function zx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Zd={},ci=fo(Zd),wd=fo(Zd),_d=fo(Zd);function Qo(t){if(t===Zd)throw Error(G(174));return t}function Bw(t,e){switch(Ue(_d,e),Ue(wd,t),Ue(ci,Zd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jy(e,t)}He(ci),Ue(ci,e)}function ec(){He(ci),He(wd),He(_d)}function NT(t){Qo(_d.current);var e=Qo(ci.current),n=jy(e,t.type);e!==n&&(Ue(wd,t),Ue(ci,n))}function zw(t){wd.current===t&&(He(ci),He(wd))}var nt=fo(0);function Pm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ug=[];function $w(){for(var t=0;t<Ug.length;t++)Ug[t]._workInProgressVersionPrimary=null;Ug.length=0}var Ff=Wi.ReactCurrentDispatcher,Bg=Wi.ReactCurrentBatchConfig,la=0,rt=null,At=null,Dt=null,Dm=!1,zu=!1,vd=0,oD=0;function Qt(){throw Error(G(321))}function qw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Br(t[n],e[n]))return!1;return!0}function Gw(t,e,n,r,i,s){if(la=s,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ff.current=t===null||t.memoizedState===null?uD:dD,t=n(r,i),zu){s=0;do{if(zu=!1,vd=0,25<=s)throw Error(G(301));s+=1,Dt=At=null,e.updateQueue=null,Ff.current=hD,t=n(r,i)}while(zu)}if(Ff.current=Lm,e=At!==null&&At.next!==null,la=0,Dt=At=rt=null,Dm=!1,e)throw Error(G(300));return t}function Hw(){var t=vd!==0;return vd=0,t}function ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?rt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function yr(){if(At===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=At.next;var e=Dt===null?rt.memoizedState:Dt.next;if(e!==null)Dt=e,At=t;else{if(t===null)throw Error(G(310));At=t,t={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Dt===null?rt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function xd(t,e){return typeof e=="function"?e(t):e}function zg(t){var e=yr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=At,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((la&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,rt.lanes|=h,ca|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Br(r,e.memoizedState)||(An=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,rt.lanes|=s,ca|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $g(t){var e=yr(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Br(s,e.memoizedState)||(An=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function CT(){}function PT(t,e){var n=rt,r=yr(),i=e(),s=!Br(r.memoizedState,i);if(s&&(r.memoizedState=i,An=!0),r=r.queue,Ww(VT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Id(9,LT.bind(null,n,r,i,e),void 0,null),Vt===null)throw Error(G(349));la&30||DT(n,e,i)}return i}function DT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LT(t,e,n,r){e.value=n,e.getSnapshot=r,OT(e)&&MT(t)}function VT(t,e,n){return n(function(){OT(e)&&MT(t)})}function OT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Br(t,n)}catch{return!0}}function MT(t){var e=Fi(t,1);e!==null&&Fr(e,t,1,-1)}function $x(t){var e=ei();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:t},e.queue=t,t=t.dispatch=cD.bind(null,rt,t),[e.memoizedState,t]}function Id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jT(){return yr().memoizedState}function Uf(t,e,n,r){var i=ei();rt.flags|=t,i.memoizedState=Id(1|e,n,void 0,r===void 0?null:r)}function _p(t,e,n,r){var i=yr();r=r===void 0?null:r;var s=void 0;if(At!==null){var o=At.memoizedState;if(s=o.destroy,r!==null&&qw(r,o.deps)){i.memoizedState=Id(e,n,s,r);return}}rt.flags|=t,i.memoizedState=Id(1|e,n,s,r)}function qx(t,e){return Uf(8390656,8,t,e)}function Ww(t,e){return _p(2048,8,t,e)}function FT(t,e){return _p(4,2,t,e)}function UT(t,e){return _p(4,4,t,e)}function BT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zT(t,e,n){return n=n!=null?n.concat([t]):null,_p(4,4,BT.bind(null,e,t),n)}function Kw(){}function $T(t,e){var n=yr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qT(t,e){var n=yr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&qw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GT(t,e,n){return la&21?(Br(n,e)||(n=YE(),rt.lanes|=n,ca|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,An=!0),t.memoizedState=n)}function aD(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Bg.transition;Bg.transition={};try{t(!1),e()}finally{De=n,Bg.transition=r}}function HT(){return yr().memoizedState}function lD(t,e,n){var r=Ks(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WT(t))KT(e,n);else if(n=RT(t,e,n,r),n!==null){var i=pn();Fr(n,t,r,i),QT(n,e,r)}}function cD(t,e,n){var r=Ks(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WT(t))KT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Br(a,o)){var l=e.interleaved;l===null?(i.next=i,Fw(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=RT(t,e,i,r),n!==null&&(i=pn(),Fr(n,t,r,i),QT(n,e,r))}}function WT(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function KT(t,e){zu=Dm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tw(t,n)}}var Lm={readContext:gr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},uD={readContext:gr,useCallback:function(t,e){return ei().memoizedState=[t,e===void 0?null:e],t},useContext:gr,useEffect:qx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uf(4194308,4,BT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uf(4,2,t,e)},useMemo:function(t,e){var n=ei();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ei();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lD.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=ei();return t={current:t},e.memoizedState=t},useState:$x,useDebugValue:Kw,useDeferredValue:function(t){return ei().memoizedState=t},useTransition:function(){var t=$x(!1),e=t[0];return t=aD.bind(null,t[1]),ei().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,i=ei();if(Xe){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Vt===null)throw Error(G(349));la&30||DT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qx(VT.bind(null,r,s,t),[t]),r.flags|=2048,Id(9,LT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ei(),e=Vt.identifierPrefix;if(Xe){var n=Ni,r=ki;n=(r&~(1<<32-jr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dD={readContext:gr,useCallback:$T,useContext:gr,useEffect:Ww,useImperativeHandle:zT,useInsertionEffect:FT,useLayoutEffect:UT,useMemo:qT,useReducer:zg,useRef:jT,useState:function(){return zg(xd)},useDebugValue:Kw,useDeferredValue:function(t){var e=yr();return GT(e,At.memoizedState,t)},useTransition:function(){var t=zg(xd)[0],e=yr().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:HT,unstable_isNewReconciler:!1},hD={readContext:gr,useCallback:$T,useContext:gr,useEffect:Ww,useImperativeHandle:zT,useInsertionEffect:FT,useLayoutEffect:UT,useMemo:qT,useReducer:$g,useRef:jT,useState:function(){return $g(xd)},useDebugValue:Kw,useDeferredValue:function(t){var e=yr();return At===null?e.memoizedState=t:GT(e,At.memoizedState,t)},useTransition:function(){var t=$g(xd)[0],e=yr().memoizedState;return[t,e]},useMutableSource:CT,useSyncExternalStore:PT,useId:HT,unstable_isNewReconciler:!1};function Cr(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function s0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vp={isMounted:function(t){return(t=t._reactInternals)?Ta(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pn(),i=Ks(t),s=Vi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hs(t,s,i),e!==null&&(Fr(e,t,i,r),jf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pn(),i=Ks(t),s=Vi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hs(t,s,i),e!==null&&(Fr(e,t,i,r),jf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),r=Ks(t),i=Vi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hs(t,i,r),e!==null&&(Fr(e,t,r,n),jf(e,t,r))}};function Gx(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!md(n,r)||!md(i,s):!0}function YT(t,e,n){var r=!1,i=no,s=e.contextType;return typeof s=="object"&&s!==null?s=gr(s):(i=Pn(e)?oa:rn.current,r=e.contextTypes,s=(r=r!=null)?Xl(t,i):no),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vp.enqueueReplaceState(e,e.state,null)}function o0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Uw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gr(s):(s=Pn(e)?oa:rn.current,i.context=Xl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(s0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vp.enqueueReplaceState(i,i.state,null),Cm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function tc(t,e){try{var n="",r=e;do n+=UP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function qg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function a0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fD=typeof WeakMap=="function"?WeakMap:Map;function XT(t,e,n){n=Vi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Om||(Om=!0,y0=r),a0(t,e)},n}function JT(t,e,n){n=Vi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){a0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){a0(t,e),typeof r!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=SD.bind(null,t,e,n),e.then(t,t))}function Kx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vi(-1,1),e.tag=2,Hs(n,e,1))),n.lanes|=1),t)}var mD=Wi.ReactCurrentOwner,An=!1;function fn(t,e,n,r){e.child=t===null?ST(e,null,n,r):Zl(e,t.child,n,r)}function Yx(t,e,n,r,i){n=n.render;var s=e.ref;return Bl(e,i),r=Gw(t,e,n,r,s,i),n=Hw(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(Xe&&n&&Dw(e),e.flags|=1,fn(t,e,r,i),e.child)}function Xx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!n_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ZT(t,e,s,r,i)):(t=qf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:md,n(o,r)&&t.ref===e.ref)return Ui(t,e,i)}return e.flags|=1,t=Qs(s,r),t.ref=e.ref,t.return=e,e.child=t}function ZT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(md(s,r)&&t.ref===e.ref)if(An=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(An=!0);else return e.lanes=t.lanes,Ui(t,e,i)}return l0(t,e,n,r,i)}function eA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Ol,Un),Un|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(Ol,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ue(Ol,Un),Un|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ue(Ol,Un),Un|=r;return fn(t,e,i,n),e.child}function tA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function l0(t,e,n,r,i){var s=Pn(n)?oa:rn.current;return s=Xl(e,s),Bl(e,i),n=Gw(t,e,n,r,s,i),r=Hw(),t!==null&&!An?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(Xe&&r&&Dw(e),e.flags|=1,fn(t,e,n,i),e.child)}function Jx(t,e,n,r,i){if(Pn(n)){var s=!0;Am(e)}else s=!1;if(Bl(e,i),e.stateNode===null)Bf(t,e),YT(e,n,r),o0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=Pn(n)?oa:rn.current,u=Xl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Hx(e,o,r,u),As=!1;var p=e.memoizedState;o.state=p,Cm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Cn.current||As?(typeof h=="function"&&(s0(e,n,h,r),l=e.memoizedState),(a=As||Gx(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Cr(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gr(l):(l=Pn(n)?oa:rn.current,l=Xl(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Hx(e,o,r,l),As=!1,p=e.memoizedState,o.state=p,Cm(e,r,o,i);var x=e.memoizedState;a!==f||p!==x||Cn.current||As?(typeof y=="function"&&(s0(e,n,y,r),x=e.memoizedState),(u=As||Gx(e,n,u,r,p,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return c0(t,e,n,r,s,i)}function c0(t,e,n,r,i,s){tA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Mx(e,n,!1),Ui(t,e,s);r=e.stateNode,mD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zl(e,t.child,null,s),e.child=Zl(e,null,a,s)):fn(t,e,a,s),e.memoizedState=r.state,i&&Mx(e,n,!0),e.child}function nA(t){var e=t.stateNode;e.pendingContext?Ox(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ox(t,e.context,!1),Bw(t,e.containerInfo)}function Zx(t,e,n,r,i){return Jl(),Vw(i),e.flags|=256,fn(t,e,n,r),e.child}var u0={dehydrated:null,treeContext:null,retryLane:0};function d0(t){return{baseLanes:t,cachePool:null,transitions:null}}function rA(t,e,n){var r=e.pendingProps,i=nt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ue(nt,i&1),t===null)return r0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bp(o,r,0,null),t=ea(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=d0(n),e.memoizedState=u0,t):Qw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return pD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qs(a,s):(s=ea(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?d0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=u0,r}return s=t.child,t=s.sibling,r=Qs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qw(t,e){return e=bp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mf(t,e,n,r){return r!==null&&Vw(r),Zl(e,t.child,null,n),t=Qw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=qg(Error(G(422))),mf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bp({mode:"visible",children:r.children},i,0,null),s=ea(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zl(e,t.child,null,o),e.child.memoizedState=d0(o),e.memoizedState=u0,s);if(!(e.mode&1))return mf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=qg(s,r,void 0),mf(t,e,o,r)}if(a=(o&t.childLanes)!==0,An||a){if(r=Vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fi(t,i),Fr(r,t,i,-1))}return t_(),r=qg(Error(G(421))),mf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qn=Gs(i.nextSibling),Hn=e,Xe=!0,Or=null,t!==null&&(ur[dr++]=ki,ur[dr++]=Ni,ur[dr++]=aa,ki=t.id,Ni=t.overflow,aa=e),e=Qw(e,r.children),e.flags|=4096,e)}function eI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),i0(t.return,e,n)}function Gg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(fn(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eI(t,n,e);else if(t.tag===19)eI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gg(e,!0,n,null,s);break;case"together":Gg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ca|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Qs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gD(t,e,n){switch(e.tag){case 3:nA(e),Jl();break;case 5:NT(e);break;case 1:Pn(e.type)&&Am(e);break;case 4:Bw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ue(km,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?rA(t,e,n):(Ue(nt,nt.current&1),t=Ui(t,e,n),t!==null?t.sibling:null);Ue(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,eA(t,e,n)}return Ui(t,e,n)}var sA,h0,oA,aA;sA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h0=function(){};oA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qo(ci.current);var s=null;switch(n){case"input":i=Ly(t,i),r=Ly(t,r),s=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),s=[];break;case"textarea":i=My(t,i),r=My(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Em)}Fy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ad.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ad.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};aA=function(t,e,n,r){n!==r&&(e.flags|=4)};function yu(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yD(t,e,n){var r=e.pendingProps;switch(Lw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Pn(e.type)&&Tm(),Yt(e),null;case 3:return r=e.stateNode,ec(),He(Cn),He(rn),$w(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(v0(Or),Or=null))),h0(t,e),Yt(e),null;case 5:zw(e);var i=Qo(_d.current);if(n=e.type,t!==null&&e.stateNode!=null)oA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Yt(e),null}if(t=Qo(ci.current),hf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ri]=e,r[yd]=s,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<ku.length;i++)qe(ku[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":cx(r,s),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qe("invalid",r);break;case"textarea":dx(r,s),qe("invalid",r)}Fy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&df(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&df(r.textContent,a,t),i=["children",""+a]):ad.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":nf(r),ux(r,s,!0);break;case"textarea":nf(r),hx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Em)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ri]=e,t[yd]=r,sA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uy(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ku.length;i++)qe(ku[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":cx(t,r),i=Ly(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),qe("invalid",t);break;case"textarea":dx(t,r),i=My(t,r),qe("invalid",t);break;default:i=r}Fy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ld(t,l):typeof l=="number"&&ld(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ad.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qe("scroll",t):l!=null&&_w(t,s,l,o))}switch(n){case"input":nf(t),ux(t,r,!1);break;case"textarea":nf(t),hx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+to(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ml(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Em)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yt(e),null;case 6:if(t&&e.stateNode!=null)aA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Qo(_d.current),Qo(ci.current),hf(e)){if(r=e.stateNode,n=e.memoizedProps,r[ri]=e,(s=r.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:df(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&df(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ri]=e,e.stateNode=r}return Yt(e),null;case 13:if(He(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&qn!==null&&e.mode&1&&!(e.flags&128))TT(),Jl(),e.flags|=98560,s=!1;else if(s=hf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[ri]=e}else Jl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yt(e),s=!1}else Or!==null&&(v0(Or),Or=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?St===0&&(St=3):t_())),e.updateQueue!==null&&(e.flags|=4),Yt(e),null);case 4:return ec(),h0(t,e),t===null&&pd(e.stateNode.containerInfo),Yt(e),null;case 10:return jw(e.type._context),Yt(e),null;case 17:return Pn(e.type)&&Tm(),Yt(e),null;case 19:if(He(nt),s=e.memoizedState,s===null)return Yt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yu(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pm(t),o!==null){for(e.flags|=128,yu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(nt,nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&ft()>nc&&(e.flags|=128,r=!0,yu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xe)return Yt(e),null}else 2*ft()-s.renderingStartTime>nc&&n!==1073741824&&(e.flags|=128,r=!0,yu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,n=nt.current,Ue(nt,r?n&1|2:n&1),e):(Yt(e),null);case 22:case 23:return e_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Un&1073741824&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function wD(t,e){switch(Lw(e),e.tag){case 1:return Pn(e.type)&&Tm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ec(),He(Cn),He(rn),$w(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zw(e),null;case 13:if(He(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Jl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return He(nt),null;case 4:return ec(),null;case 10:return jw(e.type._context),null;case 22:case 23:return e_(),null;case 24:return null;default:return null}}var pf=!1,Zt=!1,_D=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Vl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function f0(t,e,n){try{n()}catch(r){ot(t,e,r)}}var tI=!1;function vD(t,e){if(Yy=xm,t=hT(),Pw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xy={focusedElem:t,selectionRange:n},xm=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var A=x.memoizedProps,C=x.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:Cr(e.type,A),C);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(L){ot(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return x=tI,tI=!1,x}function $u(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&f0(e,n,s)}i=i.next}while(i!==r)}}function xp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lA(t){var e=t.alternate;e!==null&&(t.alternate=null,lA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ri],delete e[yd],delete e[e0],delete e[nD],delete e[rD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cA(t){return t.tag===5||t.tag===3||t.tag===4}function nI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function p0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Em));else if(r!==4&&(t=t.child,t!==null))for(p0(t,e,n),t=t.sibling;t!==null;)p0(t,e,n),t=t.sibling}function g0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(g0(t,e,n),t=t.sibling;t!==null;)g0(t,e,n),t=t.sibling}var Bt=null,Lr=!1;function ws(t,e,n){for(n=n.child;n!==null;)uA(t,e,n),n=n.sibling}function uA(t,e,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(fp,n)}catch{}switch(n.tag){case 5:Zt||Vl(n,e);case 6:var r=Bt,i=Lr;Bt=null,ws(t,e,n),Bt=r,Lr=i,Bt!==null&&(Lr?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(Lr?(t=Bt,n=n.stateNode,t.nodeType===8?jg(t.parentNode,n):t.nodeType===1&&jg(t,n),hd(t)):jg(Bt,n.stateNode));break;case 4:r=Bt,i=Lr,Bt=n.stateNode.containerInfo,Lr=!0,ws(t,e,n),Bt=r,Lr=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&f0(n,e,o),i=i.next}while(i!==r)}ws(t,e,n);break;case 1:if(!Zt&&(Vl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ot(n,e,a)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,ws(t,e,n),Zt=r):ws(t,e,n);break;default:ws(t,e,n)}}function rI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _D),e.forEach(function(r){var i=kD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,Lr=!1;break e;case 3:Bt=a.stateNode.containerInfo,Lr=!0;break e;case 4:Bt=a.stateNode.containerInfo,Lr=!0;break e}a=a.return}if(Bt===null)throw Error(G(160));uA(s,o,i),Bt=null,Lr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ot(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dA(e,t),e=e.sibling}function dA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kr(e,t),Zr(t),r&4){try{$u(3,t,t.return),xp(3,t)}catch(A){ot(t,t.return,A)}try{$u(5,t,t.return)}catch(A){ot(t,t.return,A)}}break;case 1:kr(e,t),Zr(t),r&512&&n!==null&&Vl(n,n.return);break;case 5:if(kr(e,t),Zr(t),r&512&&n!==null&&Vl(n,n.return),t.flags&32){var i=t.stateNode;try{ld(i,"")}catch(A){ot(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DE(i,s),Uy(a,o);var u=Uy(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?jE(i,f):h==="dangerouslySetInnerHTML"?OE(i,f):h==="children"?ld(i,f):_w(i,h,f,u)}switch(a){case"input":Vy(i,s);break;case"textarea":LE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Ml(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ml(i,!!s.multiple,s.defaultValue,!0):Ml(i,!!s.multiple,s.multiple?[]:"",!1))}i[yd]=s}catch(A){ot(t,t.return,A)}}break;case 6:if(kr(e,t),Zr(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){ot(t,t.return,A)}}break;case 3:if(kr(e,t),Zr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hd(e.containerInfo)}catch(A){ot(t,t.return,A)}break;case 4:kr(e,t),Zr(t);break;case 13:kr(e,t),Zr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jw=ft())),r&4&&rI(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(u=Zt)||h,kr(e,t),Zt=u):kr(e,t),Zr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(p=Z,y=p.child,p.tag){case 0:case 11:case 14:case 15:$u(4,p,p.return);break;case 1:Vl(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(A){ot(r,n,A)}}break;case 5:Vl(p,p.return);break;case 22:if(p.memoizedState!==null){sI(f);continue}}y!==null?(y.return=p,Z=y):sI(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ME("display",o))}catch(A){ot(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(A){ot(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kr(e,t),Zr(t),r&4&&rI(t);break;case 21:break;default:kr(e,t),Zr(t)}}function Zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cA(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ld(i,""),r.flags&=-33);var s=nI(t);g0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nI(t);p0(t,a,o);break;default:throw Error(G(161))}}catch(l){ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xD(t,e,n){Z=t,hA(t)}function hA(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=pf;var u=Zt;if(pf=o,(Zt=l)&&!u)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?oI(i):l!==null?(l.return=o,Z=l):oI(i);for(;s!==null;)Z=s,hA(s),s=s.sibling;Z=i,pf=a,Zt=u}iI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):iI(t)}}function iI(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||xp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&hd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Zt||e.flags&512&&m0(e)}catch(p){ot(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function sI(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function oI(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xp(4,e)}catch(l){ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ot(e,i,l)}}var s=e.return;try{m0(e)}catch(l){ot(e,s,l)}break;case 5:var o=e.return;try{m0(e)}catch(l){ot(e,o,l)}}}catch(l){ot(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var ID=Math.ceil,Vm=Wi.ReactCurrentDispatcher,Yw=Wi.ReactCurrentOwner,pr=Wi.ReactCurrentBatchConfig,_e=0,Vt=null,xt=null,qt=0,Un=0,Ol=fo(0),St=0,bd=null,ca=0,Ip=0,Xw=0,qu=null,Tn=null,Jw=0,nc=1/0,Ai=null,Om=!1,y0=null,Ws=null,gf=!1,js=null,Mm=0,Gu=0,w0=null,zf=-1,$f=0;function pn(){return _e&6?ft():zf!==-1?zf:zf=ft()}function Ks(t){return t.mode&1?_e&2&&qt!==0?qt&-qt:sD.transition!==null?($f===0&&($f=YE()),$f):(t=De,t!==0||(t=window.event,t=t===void 0?16:rT(t.type)),t):1}function Fr(t,e,n,r){if(50<Gu)throw Gu=0,w0=null,Error(G(185));Yd(t,n,r),(!(_e&2)||t!==Vt)&&(t===Vt&&(!(_e&2)&&(Ip|=n),St===4&&ks(t,qt)),Dn(t,r),n===1&&_e===0&&!(e.mode&1)&&(nc=ft()+500,wp&&mo()))}function Dn(t,e){var n=t.callbackNode;s2(t,e);var r=vm(t,t===Vt?qt:0);if(r===0)n!==null&&px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&px(n),e===1)t.tag===0?iD(aI.bind(null,t)):IT(aI.bind(null,t)),eD(function(){!(_e&6)&&mo()}),n=null;else{switch(XE(r)){case 1:n=Ew;break;case 4:n=KE;break;case 16:n=_m;break;case 536870912:n=QE;break;default:n=_m}n=vA(n,fA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fA(t,e){if(zf=-1,$f=0,_e&6)throw Error(G(327));var n=t.callbackNode;if(zl()&&t.callbackNode!==n)return null;var r=vm(t,t===Vt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jm(t,r);else{e=r;var i=_e;_e|=2;var s=pA();(Vt!==t||qt!==e)&&(Ai=null,nc=ft()+500,Zo(t,e));do try{TD();break}catch(a){mA(t,a)}while(1);Mw(),Vm.current=s,_e=i,xt!==null?e=0:(Vt=null,qt=0,e=St)}if(e!==0){if(e===2&&(i=Gy(t),i!==0&&(r=i,e=_0(t,i))),e===1)throw n=bd,Zo(t,0),ks(t,r),Dn(t,ft()),n;if(e===6)ks(t,r);else{if(i=t.current.alternate,!(r&30)&&!bD(i)&&(e=jm(t,r),e===2&&(s=Gy(t),s!==0&&(r=s,e=_0(t,s))),e===1))throw n=bd,Zo(t,0),ks(t,r),Dn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Oo(t,Tn,Ai);break;case 3:if(ks(t,r),(r&130023424)===r&&(e=Jw+500-ft(),10<e)){if(vm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zy(Oo.bind(null,t,Tn,Ai),e);break}Oo(t,Tn,Ai);break;case 4:if(ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ID(r/1960))-r,10<r){t.timeoutHandle=Zy(Oo.bind(null,t,Tn,Ai),r);break}Oo(t,Tn,Ai);break;case 5:Oo(t,Tn,Ai);break;default:throw Error(G(329))}}}return Dn(t,ft()),t.callbackNode===n?fA.bind(null,t):null}function _0(t,e){var n=qu;return t.current.memoizedState.isDehydrated&&(Zo(t,e).flags|=256),t=jm(t,e),t!==2&&(e=Tn,Tn=n,e!==null&&v0(e)),t}function v0(t){Tn===null?Tn=t:Tn.push.apply(Tn,t)}function bD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Br(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ks(t,e){for(e&=~Xw,e&=~Ip,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jr(e),r=1<<n;t[n]=-1,e&=~r}}function aI(t){if(_e&6)throw Error(G(327));zl();var e=vm(t,0);if(!(e&1))return Dn(t,ft()),null;var n=jm(t,e);if(t.tag!==0&&n===2){var r=Gy(t);r!==0&&(e=r,n=_0(t,r))}if(n===1)throw n=bd,Zo(t,0),ks(t,e),Dn(t,ft()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oo(t,Tn,Ai),Dn(t,ft()),null}function Zw(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(nc=ft()+500,wp&&mo())}}function ua(t){js!==null&&js.tag===0&&!(_e&6)&&zl();var e=_e;_e|=1;var n=pr.transition,r=De;try{if(pr.transition=null,De=1,t)return t()}finally{De=r,pr.transition=n,_e=e,!(_e&6)&&mo()}}function e_(){Un=Ol.current,He(Ol)}function Zo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z2(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(Lw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tm();break;case 3:ec(),He(Cn),He(rn),$w();break;case 5:zw(r);break;case 4:ec();break;case 13:He(nt);break;case 19:He(nt);break;case 10:jw(r.type._context);break;case 22:case 23:e_()}n=n.return}if(Vt=t,xt=t=Qs(t.current,null),qt=Un=e,St=0,bd=null,Xw=Ip=ca=0,Tn=qu=null,Ko!==null){for(e=0;e<Ko.length;e++)if(n=Ko[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ko=null}return t}function mA(t,e){do{var n=xt;try{if(Mw(),Ff.current=Lm,Dm){for(var r=rt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dm=!1}if(la=0,Dt=At=rt=null,zu=!1,vd=0,Yw.current=null,n===null||n.return===null){St=1,bd=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=qt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Kx(o);if(y!==null){y.flags&=-257,Qx(y,o,a,s,e),y.mode&1&&Wx(s,u,e),e=y,l=u;var x=e.updateQueue;if(x===null){var A=new Set;A.add(l),e.updateQueue=A}else x.add(l);break e}else{if(!(e&1)){Wx(s,u,e),t_();break e}l=Error(G(426))}}else if(Xe&&a.mode&1){var C=Kx(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Qx(C,o,a,s,e),Vw(tc(l,a));break e}}s=l=tc(l,a),St!==4&&(St=2),qu===null?qu=[s]:qu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=XT(s,l,e);Bx(s,b);break e;case 1:a=l;var v=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Ws===null||!Ws.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=JT(s,a,e);Bx(s,L);break e}}s=s.return}while(s!==null)}yA(n)}catch(z){e=z,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(1)}function pA(){var t=Vm.current;return Vm.current=Lm,t===null?Lm:t}function t_(){(St===0||St===3||St===2)&&(St=4),Vt===null||!(ca&268435455)&&!(Ip&268435455)||ks(Vt,qt)}function jm(t,e){var n=_e;_e|=2;var r=pA();(Vt!==t||qt!==e)&&(Ai=null,Zo(t,e));do try{ED();break}catch(i){mA(t,i)}while(1);if(Mw(),_e=n,Vm.current=r,xt!==null)throw Error(G(261));return Vt=null,qt=0,St}function ED(){for(;xt!==null;)gA(xt)}function TD(){for(;xt!==null&&!YP();)gA(xt)}function gA(t){var e=_A(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?yA(t):xt=e,Yw.current=null}function yA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wD(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,xt=null;return}}else if(n=yD(n,e,Un),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);St===0&&(St=5)}function Oo(t,e,n){var r=De,i=pr.transition;try{pr.transition=null,De=1,AD(t,e,n,r)}finally{pr.transition=i,De=r}return null}function AD(t,e,n,r){do zl();while(js!==null);if(_e&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(o2(t,s),t===Vt&&(xt=Vt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gf||(gf=!0,vA(_m,function(){return zl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pr.transition,pr.transition=null;var o=De;De=1;var a=_e;_e|=4,Yw.current=null,vD(t,n),dA(n,t),H2(Xy),xm=!!Yy,Xy=Yy=null,t.current=n,xD(n),XP(),_e=a,De=o,pr.transition=s}else t.current=n;if(gf&&(gf=!1,js=t,Mm=i),s=t.pendingLanes,s===0&&(Ws=null),e2(n.stateNode),Dn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Om)throw Om=!1,t=y0,y0=null,t;return Mm&1&&t.tag!==0&&zl(),s=t.pendingLanes,s&1?t===w0?Gu++:(Gu=0,w0=t):Gu=0,mo(),null}function zl(){if(js!==null){var t=XE(Mm),e=pr.transition,n=De;try{if(pr.transition=null,De=16>t?16:t,js===null)var r=!1;else{if(t=js,js=null,Mm=0,_e&6)throw Error(G(331));var i=_e;for(_e|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:$u(8,h,s)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var p=h.sibling,y=h.return;if(lA(h),h===u){Z=null;break}if(p!==null){p.return=y,Z=p;break}Z=y}}}var x=s.alternate;if(x!==null){var A=x.child;if(A!==null){x.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$u(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Z=b;break e}Z=s.return}}var v=t.current;for(Z=v;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=v;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xp(9,a)}}catch(z){ot(a,a.return,z)}if(a===o){Z=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,Z=L;break e}Z=a.return}}if(_e=i,mo(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(fp,t)}catch{}r=!0}return r}finally{De=n,pr.transition=e}}return!1}function lI(t,e,n){e=tc(n,e),e=XT(t,e,1),t=Hs(t,e,1),e=pn(),t!==null&&(Yd(t,1,e),Dn(t,e))}function ot(t,e,n){if(t.tag===3)lI(t,t,n);else for(;e!==null;){if(e.tag===3){lI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ws===null||!Ws.has(r))){t=tc(n,t),t=JT(e,t,1),e=Hs(e,t,1),t=pn(),e!==null&&(Yd(e,1,t),Dn(e,t));break}}e=e.return}}function SD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(qt&n)===n&&(St===4||St===3&&(qt&130023424)===qt&&500>ft()-Jw?Zo(t,0):Xw|=n),Dn(t,e)}function wA(t,e){e===0&&(t.mode&1?(e=of,of<<=1,!(of&130023424)&&(of=4194304)):e=1);var n=pn();t=Fi(t,e),t!==null&&(Yd(t,e,n),Dn(t,n))}function RD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wA(t,n)}function kD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),wA(t,n)}var _A;_A=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cn.current)An=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return An=!1,gD(t,e,n);An=!!(t.flags&131072)}else An=!1,Xe&&e.flags&1048576&&bT(e,Rm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bf(t,e),t=e.pendingProps;var i=Xl(e,rn.current);Bl(e,n),i=Gw(null,e,r,t,i,n);var s=Hw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(s=!0,Am(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uw(e),i.updater=vp,e.stateNode=i,i._reactInternals=e,o0(e,r,t,n),e=c0(null,e,r,!0,s,n)):(e.tag=0,Xe&&s&&Dw(e),fn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CD(r),t=Cr(r,t),i){case 0:e=l0(null,e,r,t,n);break e;case 1:e=Jx(null,e,r,t,n);break e;case 11:e=Yx(null,e,r,t,n);break e;case 14:e=Xx(null,e,r,Cr(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),l0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),Jx(t,e,r,i,n);case 3:e:{if(nA(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kT(t,e),Cm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=tc(Error(G(423)),e),e=Zx(t,e,r,n,i);break e}else if(r!==i){i=tc(Error(G(424)),e),e=Zx(t,e,r,n,i);break e}else for(qn=Gs(e.stateNode.containerInfo.firstChild),Hn=e,Xe=!0,Or=null,n=ST(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jl(),r===i){e=Ui(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return NT(e),t===null&&r0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Jy(r,i)?o=null:s!==null&&Jy(r,s)&&(e.flags|=32),tA(t,e),fn(t,e,o,n),e.child;case 6:return t===null&&r0(e),null;case 13:return rA(t,e,n);case 4:return Bw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zl(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),Yx(t,e,r,i,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ue(km,r._currentValue),r._currentValue=o,s!==null)if(Br(s.value,o)){if(s.children===i.children&&!Cn.current){e=Ui(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Vi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),i0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),i0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bl(e,n),i=gr(i),r=r(i),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,i=Cr(r,e.pendingProps),i=Cr(r.type,i),Xx(t,e,r,i,n);case 15:return ZT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cr(r,i),Bf(t,e),e.tag=1,Pn(r)?(t=!0,Am(e)):t=!1,Bl(e,n),YT(e,r,i),o0(e,r,i,n),c0(null,e,r,!0,t,n);case 19:return iA(t,e,n);case 22:return eA(t,e,n)}throw Error(G(156,e.tag))};function vA(t,e){return WE(t,e)}function ND(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,r){return new ND(t,e,n,r)}function n_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CD(t){if(typeof t=="function")return n_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xw)return 11;if(t===Iw)return 14}return 2}function Qs(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")n_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Al:return ea(n.children,i,s,e);case vw:o=8,i|=8;break;case Ny:return t=hr(12,n,e,i|2),t.elementType=Ny,t.lanes=s,t;case Cy:return t=hr(13,n,e,i),t.elementType=Cy,t.lanes=s,t;case Py:return t=hr(19,n,e,i),t.elementType=Py,t.lanes=s,t;case NE:return bp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RE:o=10;break e;case kE:o=9;break e;case xw:o=11;break e;case Iw:o=14;break e;case Ts:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=hr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ea(t,e,n,r){return t=hr(7,t,r,e),t.lanes=n,t}function bp(t,e,n,r){return t=hr(22,t,r,e),t.elementType=NE,t.lanes=n,t.stateNode={isHidden:!1},t}function Hg(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function Wg(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sg(0),this.expirationTimes=Sg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function r_(t,e,n,r,i,s,o,a,l){return t=new PD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uw(s),t}function DD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function xA(t){if(!t)return no;t=t._reactInternals;e:{if(Ta(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Pn(n))return xT(t,n,e)}return e}function IA(t,e,n,r,i,s,o,a,l){return t=r_(n,r,!0,t,i,s,o,a,l),t.context=xA(null),n=t.current,r=pn(),i=Ks(n),s=Vi(r,i),s.callback=e??null,Hs(n,s,i),t.current.lanes=i,Yd(t,i,r),Dn(t,r),t}function Ep(t,e,n,r){var i=e.current,s=pn(),o=Ks(i);return n=xA(n),e.context===null?e.context=n:e.pendingContext=n,e=Vi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hs(i,e,o),t!==null&&(Fr(t,i,o,s),jf(t,i,o)),o}function Fm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function i_(t,e){cI(t,e),(t=t.alternate)&&cI(t,e)}function LD(){return null}var bA=typeof reportError=="function"?reportError:function(t){console.error(t)};function s_(t){this._internalRoot=t}Tp.prototype.render=s_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ep(t,e,null,null)};Tp.prototype.unmount=s_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ua(function(){Ep(null,t,null,null)}),e[ji]=null}};function Tp(t){this._internalRoot=t}Tp.prototype.unstable_scheduleHydration=function(t){if(t){var e=eT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&nT(t)}};function o_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uI(){}function VD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Fm(o);s.call(u)}}var o=IA(e,r,t,0,null,!1,!1,"",uI);return t._reactRootContainer=o,t[ji]=o.current,pd(t.nodeType===8?t.parentNode:t),ua(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Fm(l);a.call(u)}}var l=r_(t,0,!1,null,null,!1,!1,"",uI);return t._reactRootContainer=l,t[ji]=l.current,pd(t.nodeType===8?t.parentNode:t),ua(function(){Ep(e,l,n,r)}),l}function Sp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Fm(o);a.call(l)}}Ep(e,o,t,i)}else o=VD(n,e,t,i,r);return Fm(o)}JE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ru(e.pendingLanes);n!==0&&(Tw(e,n|1),Dn(e,ft()),!(_e&6)&&(nc=ft()+500,mo()))}break;case 13:ua(function(){var r=Fi(t,1);if(r!==null){var i=pn();Fr(r,t,1,i)}}),i_(t,1)}};Aw=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=pn();Fr(e,t,134217728,n)}i_(t,134217728)}};ZE=function(t){if(t.tag===13){var e=Ks(t),n=Fi(t,e);if(n!==null){var r=pn();Fr(n,t,e,r)}i_(t,e)}};eT=function(){return De};tT=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};zy=function(t,e,n){switch(e){case"input":if(Vy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yp(r);if(!i)throw Error(G(90));PE(r),Vy(r,i)}}}break;case"textarea":LE(t,n);break;case"select":e=n.value,e!=null&&Ml(t,!!n.multiple,e,!1)}};BE=Zw;zE=ua;var OD={usingClientEntryPoint:!1,Events:[Jd,Nl,yp,FE,UE,Zw]},wu={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MD={bundleType:wu.bundleType,version:wu.version,rendererPackageName:wu.rendererPackageName,rendererConfig:wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GE(t),t===null?null:t.stateNode},findFiberByHostInstance:wu.findFiberByHostInstance||LD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{fp=yf.inject(MD),li=yf}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OD;Zn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o_(e))throw Error(G(200));return DD(t,e,null,n)};Zn.createRoot=function(t,e){if(!o_(t))throw Error(G(299));var n=!1,r="",i=bA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=r_(t,1,!1,null,null,n,!1,r,i),t[ji]=e.current,pd(t.nodeType===8?t.parentNode:t),new s_(e)};Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=GE(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t){return ua(t)};Zn.hydrate=function(t,e,n){if(!Ap(e))throw Error(G(200));return Sp(null,t,e,!0,n)};Zn.hydrateRoot=function(t,e,n){if(!o_(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=bA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IA(e,null,t,1,n??null,i,!1,s,o),t[ji]=e.current,pd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tp(e)};Zn.render=function(t,e,n){if(!Ap(e))throw Error(G(200));return Sp(null,t,e,!1,n)};Zn.unmountComponentAtNode=function(t){if(!Ap(t))throw Error(G(40));return t._reactRootContainer?(ua(function(){Sp(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};Zn.unstable_batchedUpdates=Zw;Zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ap(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Sp(t,e,n,!1,r)};Zn.version="18.3.1-next-f1338f8080-20240426";function EA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EA)}catch(t){console.error(t)}}EA(),EE.exports=Zn;var a_=EE.exports,dI=a_;Ry.createRoot=dI.createRoot,Ry.hydrateRoot=dI.hydrateRoot;const jD="modulepreload",FD=function(t){return"/"+t},hI={},Nr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=FD(s),s in hI)return;hI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":jD,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var UD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const BD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zD=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>F.createElement("svg",{ref:u,...UD,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${BD(t)}`,...l},[...e.map(([h,f])=>F.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ve=zD;const $D=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x0=ve("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),Ti=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),I0=ve("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),fI=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ed=ve("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),mI=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ut=ve("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),pI=ve("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),ul=ve("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),qD=ve("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),gI=ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),En=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),yI=ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Mo=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),GD=ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),HD=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),wI=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),WD=ve("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),_I=ve("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),vI=ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),xI=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),II=ve("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),bI=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Kg=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),EI=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),TI=ve("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),cr=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Qg=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),AI=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Gf=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),SI=ve("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),mn=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KD=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new YD;const p=s<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XD=function(t){const e=TA(t);return AA.encodeByteArray(e,!0)},Um=function(t){return XD(t).replace(/\./g,"")},SA=function(t){try{return AA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=()=>RA().__FIREBASE_DEFAULTS__,ZD=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SA(t[1]);return e&&JSON.parse(e)},Rp=()=>{try{return KD()||JD()||ZD()||eL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kA=t=>{var e,n;return(n=(e=Rp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NA=t=>{const e=kA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CA=()=>{var t;return(t=Rp())==null?void 0:t.config},PA=t=>{var e;return(e=Rp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[Um(JSON.stringify(n)),Um(JSON.stringify(o)),a].join(".")}const Hu={};function nL(){const t={prod:[],emulator:[]};for(const e of Object.keys(Hu))Hu[e]?t.emulator.push(e):t.prod.push(e);return t}function rL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RI=!1;function l_(t,e){if(typeof window>"u"||typeof document>"u"||!Ki(window.location.host)||Hu[t]===e||Hu[t]||RI)return;Hu[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=nL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{RI=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=rL(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),C=document.getElementById(A)||document.createElement("a"),b=n("preprendIcon"),v=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),h(C,A);const L=u();l(v,b),I.append(v,x,C,L),document.body.appendChild(I)}s?(x.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function LA(){var e;const t=(e=Rp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aL(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OA(){return!LA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MA(){return!LA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function c_(){try{return typeof indexedDB=="object"}catch{return!1}}function jA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function lL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="FirebaseError";class tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cL,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Aa.prototype.create)}}class Aa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new tr(i,a,r)}}function uL(t,e){return t.replace(dL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dL=/\{\$([^}]+)}/g;function hL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(kI(s)&&kI(o)){if(!wr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Cu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fL(t,e){const n=new mL(t,e);return n.subscribe.bind(n)}class mL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yg),i.error===void 0&&(i.error=Yg),i.complete===void 0&&(i.complete=Yg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=1e3,yL=2,wL=4*60*60*1e3,_L=.5;function NI(t,e=gL,n=yL){const r=e*Math.pow(n,t),i=Math.round(_L*r*(Math.random()-.5)*2);return Math.min(wL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class Xn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IL(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xL(t){return t===jo?void 0:t}function IL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const EL={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},TL=me.INFO,AL={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},SL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=AL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eh{constructor(e){this.name=e,this._logLevel=TL,this._logHandler=SL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const RL=(t,e)=>e.some(n=>t instanceof n);let CI,PI;function kL(){return CI||(CI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NL(){return PI||(PI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FA=new WeakMap,b0=new WeakMap,UA=new WeakMap,Xg=new WeakMap,u_=new WeakMap;function CL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ys(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&FA.set(n,t)}).catch(()=>{}),u_.set(e,t),e}function PL(t){if(b0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});b0.set(t,e)}let E0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return b0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ys(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DL(t){E0=t(E0)}function LL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jg(this),e,...n);return UA.set(r,e.sort?e.sort():[e]),Ys(r)}:NL().includes(t)?function(...e){return t.apply(Jg(this),e),Ys(FA.get(this))}:function(...e){return Ys(t.apply(Jg(this),e))}}function VL(t){return typeof t=="function"?LL(t):(t instanceof IDBTransaction&&PL(t),RL(t,kL())?new Proxy(t,E0):t)}function Ys(t){if(t instanceof IDBRequest)return CL(t);if(Xg.has(t))return Xg.get(t);const e=VL(t);return e!==t&&(Xg.set(t,e),u_.set(e,t)),e}const Jg=t=>u_.get(t);function BA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ys(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ys(o.result),l.oldVersion,l.newVersion,Ys(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const OL=["get","getKey","getAll","getAllKeys","count"],ML=["put","add","delete","clear"],Zg=new Map;function DI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ML.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Zg.set(e,s),s}DL(t=>({...t,get:(e,n,r)=>DI(e,n)||t.get(e,n,r),has:(e,n)=>!!DI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const T0="@firebase/app",LI="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new eh("@firebase/app"),UL="@firebase/app-compat",BL="@firebase/analytics-compat",zL="@firebase/analytics",$L="@firebase/app-check-compat",qL="@firebase/app-check",GL="@firebase/auth",HL="@firebase/auth-compat",WL="@firebase/database",KL="@firebase/data-connect",QL="@firebase/database-compat",YL="@firebase/functions",XL="@firebase/functions-compat",JL="@firebase/installations",ZL="@firebase/installations-compat",eV="@firebase/messaging",tV="@firebase/messaging-compat",nV="@firebase/performance",rV="@firebase/performance-compat",iV="@firebase/remote-config",sV="@firebase/remote-config-compat",oV="@firebase/storage",aV="@firebase/storage-compat",lV="@firebase/firestore",cV="@firebase/ai",uV="@firebase/firestore-compat",dV="firebase",hV="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="[DEFAULT]",fV={[T0]:"fire-core",[UL]:"fire-core-compat",[zL]:"fire-analytics",[BL]:"fire-analytics-compat",[qL]:"fire-app-check",[$L]:"fire-app-check-compat",[GL]:"fire-auth",[HL]:"fire-auth-compat",[WL]:"fire-rtdb",[KL]:"fire-data-connect",[QL]:"fire-rtdb-compat",[YL]:"fire-fn",[XL]:"fire-fn-compat",[JL]:"fire-iid",[ZL]:"fire-iid-compat",[eV]:"fire-fcm",[tV]:"fire-fcm-compat",[nV]:"fire-perf",[rV]:"fire-perf-compat",[iV]:"fire-rc",[sV]:"fire-rc-compat",[oV]:"fire-gcs",[aV]:"fire-gcs-compat",[lV]:"fire-fst",[uV]:"fire-fst-compat",[cV]:"fire-vertex","fire-js":"fire-js",[dV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new Map,mV=new Map,A0=new Map;function VI(t,e){try{t.container.addComponent(e)}catch(n){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _r(t){const e=t.name;if(A0.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;A0.set(e,t);for(const n of zm.values())VI(n,t);for(const n of mV.values())VI(n,t);return!0}function zr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pV(t,e,n=Bm){zr(t,e).clearInstance(n)}function Je(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xs=new Aa("app","Firebase",gV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=hV;function zA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Bm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Xs.create("bad-app-name",{appName:String(i)});if(n||(n=CA()),!n)throw Xs.create("no-options");const s=zm.get(i);if(s){if(wr(n,s.options)&&wr(r,s.config))return s;throw Xs.create("duplicate-app",{appName:i})}const o=new bL(i);for(const l of A0.values())o.addComponent(l);const a=new yV(n,r,o);return zm.set(i,a),a}function th(t=Bm){const e=zm.get(t);if(!e&&t===Bm&&CA())return zA();if(!e)throw Xs.create("no-app",{appName:t});return e}function en(t,e,n){let r=fV[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(o.join(" "));return}_r(new Xn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="firebase-heartbeat-database",_V=1,Td="firebase-heartbeat-store";let ey=null;function $A(){return ey||(ey=BA(wV,_V,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Td)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xs.create("idb-open",{originalErrorMessage:t.message})})),ey}async function vV(t){try{const n=(await $A()).transaction(Td),r=await n.objectStore(Td).get(qA(t));return await n.done,r}catch(e){if(e instanceof tr)Bi.warn(e.message);else{const n=Xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(n.message)}}}async function OI(t,e){try{const r=(await $A()).transaction(Td,"readwrite");await r.objectStore(Td).put(e,qA(t)),await r.done}catch(n){if(n instanceof tr)Bi.warn(n.message);else{const r=Xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bi.warn(r.message)}}}function qA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=1024,IV=30;class bV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=MI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>IV){const o=AV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=MI(),{heartbeatsToSend:r,unsentEntries:i}=EV(this._heartbeatsCache.heartbeats),s=Um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bi.warn(n),""}}}function MI(){return new Date().toISOString().substring(0,10)}function EV(t,e=xV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),jI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c_()?jA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return OI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return OI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jI(t){return Um(JSON.stringify({version:2,heartbeats:t})).length}function AV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t){_r(new Xn("platform-logger",e=>new jL(e),"PRIVATE")),_r(new Xn("heartbeat",e=>new bV(e),"PRIVATE")),en(T0,LI,t),en(T0,LI,"esm2020"),en("fire-js","")}SV("");var RV="firebase",kV="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(RV,kV,"app");const GA="@firebase/installations",d_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e4,WA=`w:${d_}`,KA="FIS_v2",NV="https://firebaseinstallations.googleapis.com/v1",CV=60*60*1e3,PV="installations",DV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new Aa(PV,DV,LV);function QA(t){return t instanceof tr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA({projectId:t}){return`${NV}/projects/${t}/installations`}function XA(t){return{token:t.token,requestStatus:2,expiresIn:OV(t.expiresIn),creationTime:Date.now()}}async function JA(t,e){const r=(await e.json()).error;return da.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ZA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function VV(t,{refreshToken:e}){const n=ZA(t);return n.append("Authorization",MV(e)),n}async function eS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function OV(t){return Number(t.replace("s","000"))}function MV(t){return`${KA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=YA(t),i=ZA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:KA,appId:t.appId,sdkVersion:WA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await eS(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:XA(u.authToken)}}else throw await JA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=/^[cdef][\w-]{21}$/,S0="";function BV(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=zV(t);return UV.test(n)?n:S0}catch{return S0}}function zV(t){return FV(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new Map;function rS(t,e){const n=Np(t);iS(n,e),$V(n,e)}function iS(t,e){const n=nS.get(t);if(n)for(const r of n)r(e)}function $V(t,e){const n=qV();n&&n.postMessage({key:t,fid:e}),GV()}let Yo=null;function qV(){return!Yo&&"BroadcastChannel"in self&&(Yo=new BroadcastChannel("[Firebase] FID Change"),Yo.onmessage=t=>{iS(t.data.key,t.data.fid)}),Yo}function GV(){nS.size===0&&Yo&&(Yo.close(),Yo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="firebase-installations-database",WV=1,ha="firebase-installations-store";let ty=null;function h_(){return ty||(ty=BA(HV,WV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ha)}}})),ty}async function $m(t,e){const n=Np(t),i=(await h_()).transaction(ha,"readwrite"),s=i.objectStore(ha),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&rS(t,e.fid),e}async function sS(t){const e=Np(t),r=(await h_()).transaction(ha,"readwrite");await r.objectStore(ha).delete(e),await r.done}async function Cp(t,e){const n=Np(t),i=(await h_()).transaction(ha,"readwrite"),s=i.objectStore(ha),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&rS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f_(t){let e;const n=await Cp(t.appConfig,r=>{const i=KV(r),s=QV(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===S0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function KV(t){const e=t||{fid:BV(),registrationStatus:0};return oS(e)}function QV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(da.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XV(t)}:{installationEntry:e}}async function YV(t,e){try{const n=await jV(t,e);return $m(t.appConfig,n)}catch(n){throw QA(n)&&n.customData.serverCode===409?await sS(t.appConfig):await $m(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function XV(t){let e=await FI(t.appConfig);for(;e.registrationStatus===1;)await tS(100),e=await FI(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await f_(t);return r||n}return e}function FI(t){return Cp(t,e=>{if(!e)throw da.create("installation-not-found");return oS(e)})}function oS(t){return JV(t)?{fid:t.fid,registrationStatus:0}:t}function JV(t){return t.registrationStatus===1&&t.registrationTime+HA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZV({appConfig:t,heartbeatServiceProvider:e},n){const r=eO(t,n),i=VV(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:WA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await eS(()=>fetch(r,a));if(l.ok){const u=await l.json();return XA(u)}else throw await JA("Generate Auth Token",l)}function eO(t,{fid:e}){return`${YA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(t,e=!1){let n;const r=await Cp(t.appConfig,s=>{if(!aS(s))throw da.create("not-registered");const o=s.authToken;if(!e&&rO(o))return s;if(o.requestStatus===1)return n=tO(t,e),s;{if(!navigator.onLine)throw da.create("app-offline");const a=sO(s);return n=nO(t,a),a}});return n?await n:r.authToken}async function tO(t,e){let n=await UI(t.appConfig);for(;n.authToken.requestStatus===1;)await tS(100),n=await UI(t.appConfig);const r=n.authToken;return r.requestStatus===0?m_(t,e):r}function UI(t){return Cp(t,e=>{if(!aS(e))throw da.create("not-registered");const n=e.authToken;return oO(n)?{...e,authToken:{requestStatus:0}}:e})}async function nO(t,e){try{const n=await ZV(t,e),r={...e,authToken:n};return await $m(t.appConfig,r),n}catch(n){if(QA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sS(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await $m(t.appConfig,r)}throw n}}function aS(t){return t!==void 0&&t.registrationStatus===2}function rO(t){return t.requestStatus===2&&!iO(t)}function iO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+CV}function sO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function oO(t){return t.requestStatus===1&&t.requestTime+HA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t){const e=t,{installationEntry:n,registrationPromise:r}=await f_(e);return r?r.catch(console.error):m_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e=!1){const n=t;return await cO(n),(await m_(n,e)).token}async function cO(t){const{registrationPromise:e}=await f_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){if(!t||!t.options)throw ny("App Configuration");if(!t.name)throw ny("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ny(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ny(t){return da.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="installations",dO="installations-internal",hO=t=>{const e=t.getProvider("app").getImmediate(),n=uO(e),r=zr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fO=t=>{const e=t.getProvider("app").getImmediate(),n=zr(e,lS).getImmediate();return{getId:()=>aO(n),getToken:i=>lO(n,i)}};function mO(){_r(new Xn(lS,hO,"PUBLIC")),_r(new Xn(dO,fO,"PRIVATE"))}mO();en(GA,d_);en(GA,d_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="analytics",pO="firebase_id",gO="origin",yO=60*1e3,wO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",p_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new eh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wn=new Aa("analytics","Analytics",_O);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){if(!t.startsWith(p_)){const e=Wn.create("invalid-gtag-resource",{gtagURL:t});return Ln.warn(e.message),""}return t}function cS(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function IO(t,e){const n=xO("firebase-js-sdk-policy",{createScriptURL:vO}),r=document.createElement("script"),i=`${p_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function bO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function EO(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await cS(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Ln.error(a)}t("config",i,s)}async function TO(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await cS(n);for(const l of o){const u=a.find(f=>f.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ln.error(s)}}function AO(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await TO(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await EO(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ln.error(a)}}return i}function SO(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=AO(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function RO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(p_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=30,NO=1e3;class CO{constructor(e={},n=NO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uS=new CO;function PO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function DO(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:PO(n)},i=wO.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Wn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function LO(t,e=uS,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Wn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Wn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new MO;return setTimeout(async()=>{a.abort()},n!==void 0?n:yO),dS({appId:r,apiKey:i,measurementId:s},o,a,e)}async function dS(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=uS){var a;const{appId:s,measurementId:o}=t;try{await VO(r,e)}catch(l){if(o)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await DO(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!OO(u)){if(i.deleteThrottleMetadata(s),o)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?NI(n,i.intervalMillis,kO):NI(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,f),Ln.debug(`Calling attemptFetch again in ${h} millis`),dS(t,f,r,i)}}function VO(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OO(t){if(!(t instanceof tr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class MO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jO(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(){if(c_())try{await jA()}catch(t){return Ln.warn(Wn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ln.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function UO(t,e,n,r,i,s,o){const a=LO(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Ln.error(p)),e.push(a);const l=FO().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);RO(s)||IO(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[gO]="firebase",f.update=!0,h!=null&&(f[pO]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.app=e}_delete(){return delete Wu[this.app.options.appId],Promise.resolve()}}let Wu={},BI=[];const zI={};let ry="dataLayer",zO="gtag",$I,hS,qI=!1;function $O(){const t=[];if(VA()&&t.push("This is a browser extension environment."),lL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Wn.create("invalid-analytics-context",{errorInfo:e});Ln.warn(n.message)}}function qO(t,e,n){$O();const r=t.options.appId;if(!r)throw Wn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wn.create("no-api-key");if(Wu[r]!=null)throw Wn.create("already-exists",{id:r});if(!qI){bO(ry);const{wrappedGtag:s,gtagCore:o}=SO(Wu,BI,zI,ry,zO);hS=s,$I=o,qI=!0}return Wu[r]=UO(t,BI,zI,e,$I,ry,n),new BO(t)}function GO(t=th()){t=J(t);const e=zr(t,qm);return e.isInitialized()?e.getImmediate():HO(t)}function HO(t,e={}){const n=zr(t,qm);if(n.isInitialized()){const i=n.getImmediate();if(wr(e,n.getOptions()))return i;throw Wn.create("already-initialized")}return n.initialize({options:e})}function fS(t,e,n,r){t=J(t),jO(hS,Wu[t.app.options.appId],e,n,r).catch(i=>Ln.error(i))}const GI="@firebase/analytics",HI="0.10.18";function WO(){_r(new Xn(qm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return qO(r,i,n)},"PUBLIC")),_r(new Xn("analytics-internal",t,"PRIVATE")),en(GI,HI),en(GI,HI,"esm2020");function t(e){try{const n=e.getProvider(qm).getImmediate();return{logEvent:(r,i,s)=>fS(n,r,i,s)}}catch(n){throw Wn.create("interop-component-reg-failed",{reason:n})}}}WO();var WI="@firebase/ai",KI="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="AI",QI="us-central1",YI={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.backendType=e}}class Pp extends pS{constructor(){super(mS.GOOGLE_AI)}}class g_ extends pS{constructor(e=QI){super(mS.VERTEX_AI),e?this.location=e:this.location=QI}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KO=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof g_?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends tr{constructor(e,n,r){const i=rc,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,fr),Object.setPrototypeOf(this,fr.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){if(t instanceof Pp)return`${rc}/googleai`;if(t instanceof g_)return`${rc}/vertexai/${t.location}`;throw new fr(Ci.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function YO(t){const e=t.split("/");if(e[0]!==rc)throw new fr(Ci.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new fr(Ci.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new g_(r);case"googleai":return new Pp;default:throw new fr(Ci.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new eh("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XI;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(XI||(XI={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t=th(),e){t=J(t);const n=zr(t,rc),r=(e==null?void 0:e.backend)??new Pp,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=QO(r),o=n.getImmediate({identifier:s});return o.options=i,o}var zo;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(zo||(zo={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return _s.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===YI.ONLY_IN_CLOUD)return _s.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===YI.ONLY_ON_DEVICE){if(n===zo.UNAVAILABLE)throw new fr(Ci.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===zo.DOWNLOADABLE||n===zo.DOWNLOADING)&&(_s.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==zo.AVAILABLE?(_s.debug(`On-device inference unavailable because availability is "${n}".`),!1):Pr.isOnDeviceRequest(e)?!0:(_s.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Pr.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return Pr.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Pr.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return Pr.toStreamResponse(i)}async countTokens(e){throw new fr(Ci.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return _s.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return _s.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&Pr.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return _s.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===zo.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(Pr.toLanguageModelMessageContent));return{role:Pr.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new fr(Ci.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new fr(Ci.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}Pr.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function JO(t,e,n){if(typeof e<"u"&&t)return new Pr(e.LanguageModel,t,n)}function ZO(t,{instanceIdentifier:e}){if(!e)throw new fr(Ci.ERROR,"AIService instance identifier is undefined.");const n=YO(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new KO(r,n,i,s,JO)}function eM(){_r(new Xn(rc,ZO,"PUBLIC").setMultipleInstances(!0)),en(WI,KI),en(WI,KI,"esm2020")}eM();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz={PHONE:"phone",TOTP:"totp"},Dz={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Lz={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},Vz={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},Oz={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function gS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mz=tM,nM=gS,yS=new Aa("auth","Firebase",gS()),jz={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new eh("@firebase/auth");function rM(t,...e){Gm.logLevel<=me.WARN&&Gm.warn(`Auth (${Sa}): ${t}`,...e)}function Hf(t,...e){Gm.logLevel<=me.ERROR&&Gm.error(`Auth (${Sa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw w_(t,...e)}function gn(t,...e){return w_(t,...e)}function y_(t,e,n){const r={...nM(),[e]:n};return new Aa("auth","Firebase",r).create(e,{appName:t.name})}function Ot(t){return y_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vn(t,"argument-error"),y_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yS.create(t,...e)}function H(t,e,...n){if(!t)throw w_(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hf(e),new Error(e)}function zi(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function __(){return JI()==="http:"||JI()==="https:"}function JI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(__()||VA()||"connection"in navigator)?navigator.onLine:!0}function sM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.shortDelay=e,this.longDelay=n,zi(n>e,"Short delay should be less than long delay!"),this.isMobile=iL()||oL()}get(){return iM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lM=new nh(3e4,6e4);function We(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ke(t,e,n,r,i={}){return _S(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Rc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return sL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(u.credentials="include"),wS.fetch()(await vS(t,t.config.apiHost,n,a),u)})}async function _S(t,e,n){t._canInitEmulator=!1;const r={...oM,...e};try{const i=new uM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Pu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw y_(t,h,u);Vn(t,h)}}catch(i){if(i instanceof tr)throw i;Vn(t,"network-request-failed",{message:String(i)})}}async function Qi(t,e,n,r,i={}){const s=await Ke(t,e,n,r,i);return"mfaPendingCredential"in s&&Vn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function vS(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?v_(t.config,i):`${t.config.apiScheme}://${i}`;return aM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function cM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),lM.get())})}}function Pu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){return t!==void 0&&t.getResponse!==void 0}function eb(t){return t!==void 0&&t.enterprise!==void 0}class xS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t){return(await Ke(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function IS(t,e){return Ke(t,"GET","/v2/recaptchaConfig",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e){return Ke(t,"POST","/v1/accounts:delete",e)}async function fM(t,e){return Ke(t,"POST","/v1/accounts:update",e)}async function Hm(t,e){return Ke(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(t,e=!1){return J(t).getIdToken(e)}async function mM(t,e=!1){const n=J(t),r=await n.getIdToken(e),i=Dp(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ku(iy(i.auth_time)),issuedAtTime:Ku(iy(i.iat)),expirationTime:Ku(iy(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function iy(t){return Number(t)*1e3}function Dp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const i=SA(n);return i?JSON.parse(i):(Hf("Failed to decode base64 JWT payload"),null)}catch(i){return Hf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tb(t){const e=Dp(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tr&&pM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t){var f;const e=t.auth,n=await t.getIdToken(),r=await $i(t,Hm(e,{idToken:n}));H(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?bS(i.providerUserInfo):[],o=wM(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new R0(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function yM(t){const e=J(t);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e){const n=await _S(t,{},async()=>{const r=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await vS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(l.credentials="include"),wS.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vM(t,e){return Ke(t,"POST","/v2/accounts:revokeToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=tb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _M(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new $l;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new gM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new R0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $i(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mM(this,e)}reload(){return yM(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(Ot(this.auth));const e=await this.getIdToken();return await $i(this,hM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:x,stsTokenManager:A}=n;H(f&&A,e,"internal-error");const C=$l.fromJSON(this.name,A);H(typeof f=="string",e,"internal-error"),vs(r,e.name),vs(i,e.name),H(typeof p=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),vs(s,e.name),vs(o,e.name),vs(a,e.name),vs(l,e.name),vs(u,e.name),vs(h,e.name);const b=new Mr({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:C,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(b.providerData=x.map(v=>({...v}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new $l;i.updateFromServerResponse(n);const s=new Mr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];H(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new $l;a.updateFromIdToken(r);const l=new Mr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new R0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;function Pi(t){zi(t instanceof Function,"Expected a class definition");let e=nb.get(t);return e?(zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ES.type="NONE";const rb=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){return`firebase:${t}:${e}:${n}`}class ql{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Wf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Wf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hm(this.auth,{idToken:e}).catch(()=>{});return n?Mr._fromGetAccountInfoResponse(this.auth,n,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ql(Pi(rb),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Pi(rb);const o=Wf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Hm(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Mr._fromGetAccountInfoResponse(e,p,h)}else f=Mr._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ql(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ql(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NS(e))return"Blackberry";if(CS(e))return"Webos";if(AS(e))return"Safari";if((e.includes("chrome/")||SS(e))&&!e.includes("edge/"))return"Chrome";if(kS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TS(t=Rt()){return/firefox\//i.test(t)}function AS(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SS(t=Rt()){return/crios\//i.test(t)}function RS(t=Rt()){return/iemobile/i.test(t)}function kS(t=Rt()){return/android/i.test(t)}function NS(t=Rt()){return/blackberry/i.test(t)}function CS(t=Rt()){return/webos/i.test(t)}function x_(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xM(t=Rt()){var e;return x_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function IM(){return aL()&&document.documentMode===10}function PS(t=Rt()){return x_(t)||kS(t)||CS(t)||NS(t)||/windows phone/i.test(t)||RS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e=[]){let n;switch(t){case"Browser":n=ib(Rt());break;case"Worker":n=`${ib(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e={}){return Ke(t,"GET","/v2/passwordPolicy",We(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=6;class AM{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??TM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sb(this),this.idTokenSubscription=new sb(this),this.beforeStateQueue=new bM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hm(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Je(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(Ot(this));const n=e?J(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(Ot(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(Ot(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EM(this),n=new AM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Aa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&rM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ct(t){return J(t)}class sb{constructor(e){this.auth=e,this.observer=null,this.addObserver=fL(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RM(t){rh=t}function I_(t){return rh.loadJS(t)}function kM(){return rh.recaptchaV2Script}function NM(){return rh.recaptchaEnterpriseScript}function CM(){return rh.gapiScript}function LS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=500,DM=6e4,wf=1e12;class LM{constructor(e){this.auth=e,this.counter=wf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new MM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||wf;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||wf;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||wf;return(r=this._widgets.get(n))==null||r.execute(),""}}class VM{constructor(){this.enterprise=new OM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;H(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},DM)},PM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const FM="recaptcha-enterprise",Qu="NO_RECAPTCHA";class VS{constructor(e){this.type=FM,this.auth=ct(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{IS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new xS(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;eb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Qu)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&eb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=NM();l.length!==0&&(l+=a),I_(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function _u(t,e,n,r=!1,i=!1){const s=new VS(t);let o;if(i)o=Qu;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Js(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _u(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await _u(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await _u(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await _u(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await _u(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function OS(t){const e=ct(t),n=await IS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new xS(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new VS(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e){const n=zr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(wr(s,e??{}))return i;Vn(i,"already-initialized")}return n.initialize({options:e})}function BM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zM(t,e,n){const r=ct(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=MS(e),{host:o,port:a}=$M(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(wr(u,r.config.emulator)&&wr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ki(o)?(kp(`${s}//${o}${l}`),l_("Auth",!0)):i||qM()}function MS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $M(t){const e=MS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ob(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ob(o)}}}function ob(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t,e){return Ke(t,"POST","/v1/accounts:resetPassword",We(t,e))}async function GM(t,e){return Ke(t,"POST","/v1/accounts:update",e)}async function HM(t,e){return Ke(t,"POST","/v1/accounts:signUp",e)}async function WM(t,e){return Ke(t,"POST","/v1/accounts:update",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return Qi(t,"POST","/v1/accounts:signInWithPassword",We(t,e))}async function Lp(t,e){return Ke(t,"POST","/v1/accounts:sendOobCode",We(t,e))}async function QM(t,e){return Lp(t,e)}async function YM(t,e){return Lp(t,e)}async function XM(t,e){return Lp(t,e)}async function JM(t,e){return Lp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}async function e4(t,e){return Qi(t,"POST","/v1/accounts:signInWithEmailLink",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ih{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Rd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Js(e,n,"signInWithPassword",KM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZM(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Js(e,r,"signUpPassword",HM,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return e4(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(t,e){return Qi(t,"POST","/v1/accounts:signInWithIdp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="http://localhost";class qi extends ih{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new qi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oi(e,n)}buildRequest(){const e={requestUri:t4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(t,e){return Ke(t,"POST","/v1/accounts:sendVerificationCode",We(t,e))}async function n4(t,e){return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e))}async function r4(t,e){const n=await Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,e));if(n.temporaryProof)throw Pu(t,"account-exists-with-different-credential",n);return n}const i4={USER_NOT_FOUND:"user-not-found"};async function s4(t,e){const n={...e,operation:"REAUTH"};return Qi(t,"POST","/v1/accounts:signInWithPhoneNumber",We(t,n),i4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends ih{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ta({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ta({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return n4(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return r4(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return s4(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new ta({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a4(t){const e=Nu(Cu(t)).link,n=e?Nu(Cu(e)).deep_link_id:null,r=Nu(Cu(t)).deep_link_id;return(r?Nu(Cu(r)).link:null)||r||n||e||t}class sh{constructor(e){const n=Nu(Cu(e)),r=n.apiKey??null,i=n.oobCode??null,s=o4(n.mode??null);H(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=a4(e);try{return new sh(n)}catch{return null}}}function Uz(t){return sh.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.providerId=Ra.PROVIDER_ID}static credential(e,n){return Rd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sh.parseLink(n);return H(r,"argument-error"),Rd._fromEmailAndCode(e,r.code,r.tenantId)}}Ra.PROVIDER_ID="password";Ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kf extends Nc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),qi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),qi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Kf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Kf(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Nc{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Nc{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="http://localhost";class kd extends ih{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new kd(r,s)}static _create(e,n){return new kd(e,n)}buildRequest(){return{requestUri:l4,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="saml.";class k0 extends Yi{constructor(e){H(e.startsWith(c4),"argument-error"),super(e)}static credentialFromResult(e){return k0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return k0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=kd.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return kd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Nc{constructor(){super("twitter.com")}static credential(e,n){return qi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ds.credential(n,r)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FS(t,e){return Qi(t,"POST","/v1/accounts:signUp",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mr._fromIdTokenResponse(e,r,i),o=lb(r);return new vr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lb(r);return new vr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(t){var i;if(Je(t.app))return Promise.reject(Ot(t));const e=ct(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new vr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await FS(e,{returnSecureToken:!0}),r=await vr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends tr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wm(e,n,r,i)}}function US(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wm._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){const n=J(t);await Vp(!0,n,e);const{providerUserInfo:r}=await fM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=BS(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function b_(t,e,n=!1){const r=await $i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vr._forOperation(t,"link",r)}async function Vp(t,e,n){await Sd(e);const r=BS(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(t,e,n=!1){const{auth:r}=t;if(Je(r.app))return Promise.reject(Ot(r));const i="reauthenticate";try{const s=await $i(t,US(r,i,e,t),n);H(s.idToken,r,"internal-error");const o=Dp(s.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),vr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e,n=!1){if(Je(t.app))return Promise.reject(Ot(t));const r="signIn",i=await US(t,r,e),s=await vr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function E_(t,e){return $S(ct(t),e)}async function d4(t,e){const n=J(t);return await Vp(!1,n,e.providerId),b_(n,e)}async function h4(t,e){return zS(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){return Qi(t,"POST","/v1/accounts:signInWithCustomToken",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zz(t,e){if(Je(t.app))return Promise.reject(Ot(t));const n=ct(t),r=await f4(n,{token:e,returnSecureToken:!0}),i=await vr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?T_._fromServerResponse(e,n):"totpInfo"in n?A_._fromServerResponse(e,n):Vn(e,"internal-error")}}class T_ extends oh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new T_(n)}}class A_ extends oh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new A_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e,n){var r;H(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(t){const e=ct(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $z(t,e,n){const r=ct(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Op(r,i,n),await Js(r,i,"getOobCode",YM,"EMAIL_PASSWORD_PROVIDER")}async function qz(t,e,n){await jS(J(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S_(t),r})}async function Gz(t,e){await WM(J(t),{oobCode:e})}async function m4(t,e){const n=J(t),r=await jS(n,{oobCode:e}),i=r.requestType;switch(H(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=oh._fromServerResponse(ct(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Hz(t,e){const{data:n}=await m4(J(t),e);return n.email}async function Wz(t,e,n){if(Je(t.app))return Promise.reject(Ot(t));const r=ct(t),o=await Js(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FS,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&S_(t),l}),a=await vr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function Kz(t,e,n){return Je(t.app)?Promise.reject(Ot(t)):E_(J(t),Ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&S_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e,n){const r=ct(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,r,"argument-error"),a&&Op(r,o,a)}s(i,n),await Js(r,i,"getOobCode",XM,"EMAIL_PASSWORD_PROVIDER")}function Yz(t,e){const n=sh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Xz(t,e,n){if(Je(t.app))return Promise.reject(Ot(t));const r=J(t),i=Ra.credentialWithLink(e,n||Ad());return H(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),E_(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p4(t,e){return Ke(t,"POST","/v1/accounts:createAuthUri",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){const n=__()?Ad():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await p4(J(t),r);return i||[]}async function Zz(t,e){const n=J(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Op(n.auth,i,e);const{email:s}=await QM(n.auth,i);s!==t.email&&await t.reload()}async function e8(t,e,n){const r=J(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Op(r.auth,s,n);const{email:o}=await JM(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e){return Ke(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=J(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await $i(r,g4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function n8(t,e){const n=J(t);return Je(n.auth.app)?Promise.reject(Ot(n.auth)):qS(n,e,null)}function r8(t,e){return qS(J(t),null,e)}async function qS(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await $i(t,GM(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=Dp(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Gl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new w4(r,n);case"github.com":return new _4(r,n);case"google.com":return new v4(r,n);case"twitter.com":return new x4(r,n,t.screenName||null);case"custom":case"anonymous":return new Gl(r,null);default:return new Gl(r,e,n)}}class Gl{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class GS extends Gl{constructor(e,n,r,i){super(e,n,r),this.username=i}}class w4 extends Gl{constructor(e,n){super(e,"facebook.com",n)}}class _4 extends GS{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class v4 extends Gl{constructor(e,n){super(e,"google.com",n)}}class x4 extends GS{constructor(e,n,r){super(e,"twitter.com",n,r)}}function i8(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:y4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t,e){return J(t).setPersistence(e)}function o8(t){return OS(t)}async function a8(t,e){return ct(t).validatePassword(e)}function I4(t,e,n,r){return J(t).onIdTokenChanged(e,n,r)}function b4(t,e,n){return J(t).beforeAuthStateChanged(e,n)}function E4(t,e,n,r){return J(t).onAuthStateChanged(e,n,r)}function l8(t){J(t).useDeviceLanguage()}function c8(t,e){return J(t).updateCurrentUser(e)}function u8(t){return J(t).signOut()}function d8(t,e){return ct(t).revokeAccessToken(e)}async function h8(t){return J(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Xo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Xo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Xo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Xo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ct(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>oh._fromServerResponse(r,a));H(i.mfaPendingCredential,r,"internal-error");const o=Xo._fromMfaPendingCredential(i.mfaPendingCredential);return new R_(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await vr._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return H(n.user,r,"internal-error"),vr._forOperation(n.user,n.operationType,u);default:Vn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function f8(t,e){var i;const n=J(t),r=e;return H(e.customData.operationType,n,"argument-error"),H((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),R_._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e){return Ke(t,"POST","/v2/accounts/mfaEnrollment:start",We(t,e))}function T4(t,e){return Ke(t,"POST","/v2/accounts/mfaEnrollment:finalize",We(t,e))}function A4(t,e){return Ke(t,"POST","/v2/accounts/mfaEnrollment:start",We(t,e))}function S4(t,e){return Ke(t,"POST","/v2/accounts/mfaEnrollment:finalize",We(t,e))}function R4(t,e){return Ke(t,"POST","/v2/accounts/mfaEnrollment:withdraw",We(t,e))}class k_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>oh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new k_(e)}async getSession(){return Xo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await $i(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await $i(this.user,R4(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const sy=new WeakMap;function m8(t){const e=J(t);return sy.has(e)||sy.set(e,k_._fromUser(e)),sy.get(e)}const Km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Km,"1"),this.storage.removeItem(Km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=1e3,N4=10;class WS extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);IM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,N4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},k4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WS.type="LOCAL";const C4=WS;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=1e3;function oy(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function ay(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class KS{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=ay(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return oy(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=ay(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=ay(e);if(window.cookieStore){const a=u=>{const h=u.changed.find(p=>p.name===r);h&&n(h.value),u.deleted.find(p=>p.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=oy(r);const s=setInterval(()=>{const a=oy(r);a!==i&&(n(a),i=a)},P4),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}KS.type="COOKIE";const p8=KS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QS.type="SESSION";const YS=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Mp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await D4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=jp("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return window}function V4(t){vt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}async function O4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function j4(){return N_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firebaseLocalStorageDb",F4=1,Qm="firebaseLocalStorage",JS="fbase_key";class ah{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fp(t,e){return t.transaction([Qm],e?"readwrite":"readonly").objectStore(Qm)}function U4(){const t=indexedDB.deleteDatabase(XS);return new ah(t).toPromise()}function N0(){const t=indexedDB.open(XS,F4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qm,{keyPath:JS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qm)?e(r):(r.close(),await U4(),e(await N0()))})})}async function ub(t,e,n){const r=Fp(t,!0).put({[JS]:e,value:n});return new ah(r).toPromise()}async function B4(t,e){const n=Fp(t,!1).get(e),r=await new ah(n).toPromise();return r===void 0?null:r.value}function db(t,e){const n=Fp(t,!0).delete(e);return new ah(n).toPromise()}const z4=800,$4=3;class ZS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mp._getInstance(j4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await O4(),!this.activeServiceWorker)return;this.sender=new L4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await ub(e,Km,"1"),await db(e,Km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ub(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>db(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Fp(i,!1).getAll();return new ah(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZS.type="LOCAL";const q4=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t,e){return Ke(t,"POST","/v2/accounts/mfaSignIn:start",We(t,e))}function G4(t,e){return Ke(t,"POST","/v2/accounts/mfaSignIn:finalize",We(t,e))}function H4(t,e){return Ke(t,"POST","/v2/accounts/mfaSignIn:finalize",We(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=LS("rcb"),W4=new nh(3e4,6e4);class K4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=vt().grecaptcha)!=null&&e.render)}load(e,n=""){return H(Q4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ZI(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((r,i)=>{const s=vt().setTimeout(()=>{i(gn(e,"network-request-failed"))},W4.get());vt()[ly]=()=>{vt().clearTimeout(s),delete vt()[ly];const a=vt().grecaptcha;if(!a||!ZI(a)){i(gn(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const f=l(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${kM()}?${Rc({onload:ly,render:"explicit",hl:n})}`;I_(o).catch(()=>{clearTimeout(s),i(gn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=vt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Q4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Y4{async load(e){return new LM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="recaptcha",X4={theme:"light",type:"image"};class g8{constructor(e,n,r={...X4}){this.parameters=r,this.type=Yu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;H(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Y4:new K4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=vt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(__()&&!N_(),this.auth,"internal-error"),await J4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await dM(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function J4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ta._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function y8(t,e,n){if(Je(t.app))return Promise.reject(Ot(t));const r=ct(t),i=await Up(r,e,J(n));return new C_(i,s=>E_(r,s))}async function w8(t,e,n){const r=J(t);await Vp(!1,r,"phone");const i=await Up(r.auth,e,J(n));return new C_(i,s=>d4(r,s))}async function _8(t,e,n){const r=J(t);if(Je(r.auth.app))return Promise.reject(Ot(r.auth));const i=await Up(r.auth,e,J(n));return new C_(i,s=>h4(r,s))}async function Up(t,e,n){var r;if(!t._getRecaptchaConfig())try{await OS(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){H(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Js(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Qu){H((n==null?void 0:n.type)===Yu,h,"argument-error");const p=await cy(h,f,n);return cb(h,p)}return cb(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{H(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;H(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Js(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===Qu){H((n==null?void 0:n.type)===Yu,f,"argument-error");const y=await cy(f,p,n);return hb(f,y)}return hb(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Js(t,s,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===Qu){H((n==null?void 0:n.type)===Yu,u,"argument-error");const f=await cy(u,h,n);return ab(u,f)}return ab(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function v8(t,e){const n=J(t);if(Je(n.auth.app))return Promise.reject(Ot(n.auth));await b_(n,e)}async function cy(t,e,n){H(n.type===Yu,t,"argument-error");const r=await n.verify();H(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this.providerId=Hl.PROVIDER_ID,this.auth=ct(e)}verifyPhoneNumber(e,n){return Up(this.auth,e,J(n))}static credential(e,n){return ta._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Hl.credentialFromTaggedObject(n)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ta._fromTokenResponse(n,r):null}}Hl.PROVIDER_ID="phone";Hl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t,e){return e?Pi(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends ih{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z4(t){return $S(t.auth,new P_(t),t.bypassAuthState)}function ej(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),zS(n,new P_(t),t.bypassAuthState)}async function tj(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),b_(n,new P_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z4;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:Vn(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new nh(2e3,1e4);async function x8(t,e,n){if(Je(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const r=ct(t);kc(t,e,Yi);const i=ka(r,n);return new Di(r,"signInViaPopup",e,i).executeNotNull()}async function I8(t,e,n){const r=J(t);if(Je(r.auth.app))return Promise.reject(gn(r.auth,"operation-not-supported-in-this-environment"));kc(r.auth,e,Yi);const i=ka(r.auth,n);return new Di(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function b8(t,e,n){const r=J(t);kc(r.auth,e,Yi);const i=ka(r.auth,n);return new Di(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Di extends eR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nj.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="pendingRedirect",Qf=new Map;class ij extends eR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qf.get(this.auth._key());if(!e){try{const r=await sj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qf.set(this.auth._key(),e)}return this.bypassAuthState||Qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sj(t,e){const n=nR(e),r=tR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function D_(t,e){return tR(t)._set(nR(e),"true")}function oj(t,e){Qf.set(t._key(),e)}function tR(t){return Pi(t._redirectPersistence)}function nR(t){return Wf(rj,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(t,e,n){return aj(t,e,n)}async function aj(t,e,n){if(Je(t.app))return Promise.reject(Ot(t));const r=ct(t);kc(t,e,Yi),await r._initializationPromise;const i=ka(r,n);return await D_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function T8(t,e,n){return lj(t,e,n)}async function lj(t,e,n){const r=J(t);if(kc(r.auth,e,Yi),Je(r.auth.app))return Promise.reject(Ot(r.auth));await r.auth._initializationPromise;const i=ka(r.auth,n);await D_(i,r.auth);const s=await iR(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function A8(t,e,n){return cj(t,e,n)}async function cj(t,e,n){const r=J(t);kc(r.auth,e,Yi),await r.auth._initializationPromise;const i=ka(r.auth,n);await Vp(!1,r,e.providerId),await D_(i,r.auth);const s=await iR(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function S8(t,e){return await ct(t)._initializationPromise,rR(t,e,!1)}async function rR(t,e,n=!1){if(Je(t.app))return Promise.reject(Ot(t));const r=ct(t),i=ka(r,e),o=await new ij(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function iR(t){const e=jp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=10*60*1e3;class dj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sR(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(fb(e))}saveEventToCache(e){this.cachedEventUids.add(fb(e)),this.lastProcessedEventTime=Date.now()}}function fb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e={}){return Ke(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function gj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fj(t);for(const n of e)try{if(yj(n))return}catch{}Vn(t,"unauthorized-domain")}function yj(t){const e=Ad(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!pj.test(n))return!1;if(mj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new nh(3e4,6e4);function mb(){const t=vt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _j(t){return new Promise((e,n)=>{var i,s,o;function r(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),n(gn(t,"network-request-failed"))},timeout:wj.get()})}if((s=(i=vt().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=vt().gapi)!=null&&o.load)r();else{const a=LS("iframefcb");return vt()[a]=()=>{gapi.load?r():n(gn(t,"network-request-failed"))},I_(`${CM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Yf=null,e})}let Yf=null;function vj(t){return Yf=Yf||_j(t),Yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new nh(5e3,15e3),Ij="__/auth/iframe",bj="emulator/auth/iframe",Ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aj(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v_(e,bj):`https://${t.config.authDomain}/${Ij}`,r={apiKey:e.apiKey,appName:t.name,v:Sa},i=Tj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rc(r).slice(1)}`}async function Sj(t){const e=await vj(t),n=vt().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:Aj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ej,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gn(t,"network-request-failed"),a=vt().setTimeout(()=>{s(o)},xj.get());function l(){vt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kj=500,Nj=600,Cj="_blank",Pj="http://localhost";class pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dj(t,e,n,r=kj,i=Nj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...Rj,width:r.toString(),height:i.toString(),top:s,left:o},u=Rt().toLowerCase();n&&(a=SS(u)?Cj:n),TS(u)&&(e=e||Pj,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,x])=>`${p}${y}=${x},`,"");if(xM(u)&&a!=="_self")return Lj(e||"",a),new pb(null);const f=window.open(e||"",a,h);H(f,t,"popup-blocked");try{f.focus()}catch{}return new pb(f)}function Lj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="__/auth/handler",Oj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function gb(t,e,n,r,i,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sa,eventId:i};if(e instanceof Yi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Nc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${Mj}=${encodeURIComponent(l)}`:"";return`${jj(t)}?${Rc(a).slice(1)}${u}`}function jj({config:t}){return t.emulator?v_(t,Oj):`https://${t.authDomain}/${Vj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class Fj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YS,this._completeRedirectFn=rR,this._overrideRedirectResult=oj}async _openPopup(e,n,r,i){var o;zi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await gb(e,n,r,Ad(),i);return Dj(e,s,jp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gb(e,n,r,Ad(),i);return V4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Sj(e),r=new dj(e);return n.register("authEvent",i=>(H(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uy,{type:uy},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[uy];s!==void 0&&n(!!s),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PS()||AS()||x_()}}const Uj=Fj;class oR{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ii("unexpected MultiFactorSessionType")}}}class L_ extends oR{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new L_(e)}_finalizeEnroll(e,n,r){return T4(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return G4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Bj{constructor(){}static assertion(e){return L_._fromCredential(e)}}Bj.FACTOR_ID="phone";class zj{static assertionForEnrollment(e,n){return Nd._fromSecret(e,n)}static assertionForSignIn(e,n){return Nd._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;H(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await A4(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return V_._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}zj.FACTOR_ID="totp";class Nd extends oR{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new Nd(n,void 0,e)}static _fromEnrollmentId(e,n){return new Nd(n,e)}async _finalizeEnroll(e,n,r){return H(typeof this.secret<"u",e,"argument-error"),S4(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){H(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return H4(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class V_{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new V_(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(_f(e)||_f(n))&&(r=!0),r&&(_f(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),_f(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function _f(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var yb="@firebase/auth",wb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gj(t){_r(new Xn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DS(t)},u=new SM(r,i,s,l);return BM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_r(new Xn("auth-internal",e=>{const n=ct(e.getProvider("auth").getImmediate());return(r=>new $j(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(yb,wb,qj(t)),en(yb,wb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=5*60,Wj=PA("authIdTokenMaxAge")||Hj;let _b=null;const Kj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wj)return;const i=n==null?void 0:n.token;_b!==i&&(_b=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Qj(t=th()){const e=zr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UM(t,{popupRedirectResolver:Uj,persistence:[q4,C4,YS]}),r=PA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Kj(s.toString());b4(n,o,()=>o(n.currentUser)),I4(n,a=>o(a))}}const i=kA("auth");return i&&zM(n,`http://${i}`),n}function Yj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Yj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gj("Browser");var vb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,aR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function R(){}R.prototype=_.prototype,E.D=_.prototype,E.prototype=new R,E.prototype.constructor=E,E.C=function(S,P,N){for(var k=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)k[sn-2]=arguments[sn];return _.prototype[P].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,R){R||(R=0);var S=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)S[P]=_.charCodeAt(R++)|_.charCodeAt(R++)<<8|_.charCodeAt(R++)<<16|_.charCodeAt(R++)<<24;else for(P=0;16>P;++P)S[P]=_[R++]|_[R++]<<8|_[R++]<<16|_[R++]<<24;_=E.g[0],R=E.g[1],P=E.g[2];var N=E.g[3],k=_+(N^R&(P^N))+S[0]+3614090360&4294967295;_=R+(k<<7&4294967295|k>>>25),k=N+(P^_&(R^P))+S[1]+3905402710&4294967295,N=_+(k<<12&4294967295|k>>>20),k=P+(R^N&(_^R))+S[2]+606105819&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(_^P&(N^_))+S[3]+3250441966&4294967295,R=P+(k<<22&4294967295|k>>>10),k=_+(N^R&(P^N))+S[4]+4118548399&4294967295,_=R+(k<<7&4294967295|k>>>25),k=N+(P^_&(R^P))+S[5]+1200080426&4294967295,N=_+(k<<12&4294967295|k>>>20),k=P+(R^N&(_^R))+S[6]+2821735955&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(_^P&(N^_))+S[7]+4249261313&4294967295,R=P+(k<<22&4294967295|k>>>10),k=_+(N^R&(P^N))+S[8]+1770035416&4294967295,_=R+(k<<7&4294967295|k>>>25),k=N+(P^_&(R^P))+S[9]+2336552879&4294967295,N=_+(k<<12&4294967295|k>>>20),k=P+(R^N&(_^R))+S[10]+4294925233&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(_^P&(N^_))+S[11]+2304563134&4294967295,R=P+(k<<22&4294967295|k>>>10),k=_+(N^R&(P^N))+S[12]+1804603682&4294967295,_=R+(k<<7&4294967295|k>>>25),k=N+(P^_&(R^P))+S[13]+4254626195&4294967295,N=_+(k<<12&4294967295|k>>>20),k=P+(R^N&(_^R))+S[14]+2792965006&4294967295,P=N+(k<<17&4294967295|k>>>15),k=R+(_^P&(N^_))+S[15]+1236535329&4294967295,R=P+(k<<22&4294967295|k>>>10),k=_+(P^N&(R^P))+S[1]+4129170786&4294967295,_=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(_^R))+S[6]+3225465664&4294967295,N=_+(k<<9&4294967295|k>>>23),k=P+(_^R&(N^_))+S[11]+643717713&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^_&(P^N))+S[0]+3921069994&4294967295,R=P+(k<<20&4294967295|k>>>12),k=_+(P^N&(R^P))+S[5]+3593408605&4294967295,_=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(_^R))+S[10]+38016083&4294967295,N=_+(k<<9&4294967295|k>>>23),k=P+(_^R&(N^_))+S[15]+3634488961&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^_&(P^N))+S[4]+3889429448&4294967295,R=P+(k<<20&4294967295|k>>>12),k=_+(P^N&(R^P))+S[9]+568446438&4294967295,_=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(_^R))+S[14]+3275163606&4294967295,N=_+(k<<9&4294967295|k>>>23),k=P+(_^R&(N^_))+S[3]+4107603335&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^_&(P^N))+S[8]+1163531501&4294967295,R=P+(k<<20&4294967295|k>>>12),k=_+(P^N&(R^P))+S[13]+2850285829&4294967295,_=R+(k<<5&4294967295|k>>>27),k=N+(R^P&(_^R))+S[2]+4243563512&4294967295,N=_+(k<<9&4294967295|k>>>23),k=P+(_^R&(N^_))+S[7]+1735328473&4294967295,P=N+(k<<14&4294967295|k>>>18),k=R+(N^_&(P^N))+S[12]+2368359562&4294967295,R=P+(k<<20&4294967295|k>>>12),k=_+(R^P^N)+S[5]+4294588738&4294967295,_=R+(k<<4&4294967295|k>>>28),k=N+(_^R^P)+S[8]+2272392833&4294967295,N=_+(k<<11&4294967295|k>>>21),k=P+(N^_^R)+S[11]+1839030562&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^_)+S[14]+4259657740&4294967295,R=P+(k<<23&4294967295|k>>>9),k=_+(R^P^N)+S[1]+2763975236&4294967295,_=R+(k<<4&4294967295|k>>>28),k=N+(_^R^P)+S[4]+1272893353&4294967295,N=_+(k<<11&4294967295|k>>>21),k=P+(N^_^R)+S[7]+4139469664&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^_)+S[10]+3200236656&4294967295,R=P+(k<<23&4294967295|k>>>9),k=_+(R^P^N)+S[13]+681279174&4294967295,_=R+(k<<4&4294967295|k>>>28),k=N+(_^R^P)+S[0]+3936430074&4294967295,N=_+(k<<11&4294967295|k>>>21),k=P+(N^_^R)+S[3]+3572445317&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^_)+S[6]+76029189&4294967295,R=P+(k<<23&4294967295|k>>>9),k=_+(R^P^N)+S[9]+3654602809&4294967295,_=R+(k<<4&4294967295|k>>>28),k=N+(_^R^P)+S[12]+3873151461&4294967295,N=_+(k<<11&4294967295|k>>>21),k=P+(N^_^R)+S[15]+530742520&4294967295,P=N+(k<<16&4294967295|k>>>16),k=R+(P^N^_)+S[2]+3299628645&4294967295,R=P+(k<<23&4294967295|k>>>9),k=_+(P^(R|~N))+S[0]+4096336452&4294967295,_=R+(k<<6&4294967295|k>>>26),k=N+(R^(_|~P))+S[7]+1126891415&4294967295,N=_+(k<<10&4294967295|k>>>22),k=P+(_^(N|~R))+S[14]+2878612391&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~_))+S[5]+4237533241&4294967295,R=P+(k<<21&4294967295|k>>>11),k=_+(P^(R|~N))+S[12]+1700485571&4294967295,_=R+(k<<6&4294967295|k>>>26),k=N+(R^(_|~P))+S[3]+2399980690&4294967295,N=_+(k<<10&4294967295|k>>>22),k=P+(_^(N|~R))+S[10]+4293915773&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~_))+S[1]+2240044497&4294967295,R=P+(k<<21&4294967295|k>>>11),k=_+(P^(R|~N))+S[8]+1873313359&4294967295,_=R+(k<<6&4294967295|k>>>26),k=N+(R^(_|~P))+S[15]+4264355552&4294967295,N=_+(k<<10&4294967295|k>>>22),k=P+(_^(N|~R))+S[6]+2734768916&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~_))+S[13]+1309151649&4294967295,R=P+(k<<21&4294967295|k>>>11),k=_+(P^(R|~N))+S[4]+4149444226&4294967295,_=R+(k<<6&4294967295|k>>>26),k=N+(R^(_|~P))+S[11]+3174756917&4294967295,N=_+(k<<10&4294967295|k>>>22),k=P+(_^(N|~R))+S[2]+718787259&4294967295,P=N+(k<<15&4294967295|k>>>17),k=R+(N^(P|~_))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+N&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var R=_-this.blockSize,S=this.B,P=this.h,N=0;N<_;){if(P==0)for(;N<=R;)i(this,E,N),N+=this.blockSize;if(typeof E=="string"){for(;N<_;)if(S[P++]=E.charCodeAt(N++),P==this.blockSize){i(this,S),P=0;break}}else for(;N<_;)if(S[P++]=E[N++],P==this.blockSize){i(this,S),P=0;break}}this.h=P,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var R=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=R&255,R/=256;for(this.u(E),E=Array(16),_=R=0;4>_;++_)for(var S=0;32>S;S+=8)E[R++]=this.g[_]>>>S&255;return E};function s(E,_){var R=a;return Object.prototype.hasOwnProperty.call(R,E)?R[E]:R[E]=_(E)}function o(E,_){this.h=_;for(var R=[],S=!0,P=E.length-1;0<=P;P--){var N=E[P]|0;S&&N==_||(R[P]=N,S=!1)}this.g=R}var a={};function l(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return C(u(-E));for(var _=[],R=1,S=0;E>=R;S++)_[S]=E/R|0,R*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return C(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(_,8)),S=f,P=0;P<E.length;P+=8){var N=Math.min(8,E.length-P),k=parseInt(E.substring(P,P+N),_);8>N?(N=u(Math.pow(_,N)),S=S.j(N).add(u(k))):(S=S.j(R),S=S.add(u(k)))}return S}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,_=1,R=0;R<this.g.length;R++){var S=this.i(R);E+=(0<=S?S:4294967296+S)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var _=u(Math.pow(E,6)),R=this,S="";;){var P=L(R,_).g;R=b(R,P.j(_));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(E);if(R=P,x(R))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function x(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=b(this,E),A(E)?-1:x(E)?0:1};function C(E){for(var _=E.g.length,R=[],S=0;S<_;S++)R[S]=~E.g[S];return new o(R,~E.h).add(p)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),R=[],S=0,P=0;P<=_;P++){var N=S+(this.i(P)&65535)+(E.i(P)&65535),k=(N>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);S=k>>>16,N&=65535,k&=65535,R[P]=k<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function b(E,_){return E.add(C(_))}t.j=function(E){if(x(this)||x(E))return f;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(y)&&0>E.l(y))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,R=[],S=0;S<2*_;S++)R[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<E.g.length;P++){var N=this.i(S)>>>16,k=this.i(S)&65535,sn=E.i(P)>>>16,nr=E.i(P)&65535;R[2*S+2*P]+=k*nr,v(R,2*S+2*P),R[2*S+2*P+1]+=N*nr,v(R,2*S+2*P+1),R[2*S+2*P+1]+=k*sn,v(R,2*S+2*P+1),R[2*S+2*P+2]+=N*sn,v(R,2*S+2*P+2)}for(S=0;S<_;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=_;S<2*_;S++)R[S]=0;return new o(R,0)};function v(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function I(E,_){this.g=E,this.h=_}function L(E,_){if(x(_))throw Error("division by zero");if(x(E))return new I(f,f);if(A(E))return _=L(C(E),_),new I(C(_.g),C(_.h));if(A(_))return _=L(E,C(_)),new I(C(_.g),_.h);if(30<E.g.length){if(A(E)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var R=p,S=_;0>=S.l(E);)R=z(R),S=z(S);var P=q(R,1),N=q(S,1);for(S=q(S,2),R=q(R,2);!x(S);){var k=N.add(S);0>=k.l(E)&&(P=P.add(R),N=k),S=q(S,1),R=q(R,1)}return _=b(E,P.j(_)),new I(P,_)}for(P=f;0<=E.l(_);){for(R=Math.max(1,Math.floor(E.m()/_.m())),S=Math.ceil(Math.log(R)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=u(R),k=N.j(_);A(k)||0<k.l(E);)R-=S,N=u(R),k=N.j(_);x(N)&&(N=p),P=P.add(N),E=b(E,k)}return new I(P,E)}t.A=function(E){return L(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),R=[],S=0;S<_;S++)R[S]=this.i(S)&E.i(S);return new o(R,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),R=[],S=0;S<_;S++)R[S]=this.i(S)|E.i(S);return new o(R,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),R=[],S=0;S<_;S++)R[S]=this.i(S)^E.i(S);return new o(R,this.h^E.h)};function z(E){for(var _=E.g.length+1,R=[],S=0;S<_;S++)R[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(R,E.h)}function q(E,_){var R=_>>5;_%=32;for(var S=E.g.length-R,P=[],N=0;N<S;N++)P[N]=0<_?E.i(N+R)>>>_|E.i(N+R+1)<<32-_:E.i(N+R);return new o(P,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Zs=o}).apply(typeof vb<"u"?vb:typeof self<"u"?self:typeof window<"u"?window:{});var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lR,Du,cR,Xf,C0,uR,dR,hR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof vf=="object"&&vf];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var D=c[w];if(!(D in g))break e;g=g[D]}c=c[c.length-1],w=g[c],m=m(w),m!=w&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,w=!1,D={next:function(){if(!w&&g<c.length){var j=g++;return{value:m(j,c[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),c.apply(m,D)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function x(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(w,D,j){for(var W=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)W[Re-2]=arguments[Re];return m.prototype[D].apply(w,W)}}function A(c){const m=c.length;if(0<m){const g=Array(m);for(let w=0;w<m;w++)g[w]=c[w];return g}return[]}function C(c,m){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(l(w)){const D=c.length||0,j=w.length||0;c.length=D+j;for(let W=0;W<j;W++)c[D+W]=w[W]}else c.push(w)}}class b{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function L(c){return L[" "](c),c}L[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function q(c,m,g){for(const w in c)m.call(g,c[w],w,c)}function E(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function _(c){const m={};for(const g in c)m[g]=c[g];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,m){let g,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(g in w)c[g]=w[g];for(let j=0;j<R.length;j++)g=R[j],Object.prototype.hasOwnProperty.call(w,g)&&(c[g]=w[g])}}function P(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function k(){var c=se;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class sn{constructor(){this.h=this.g=null}add(m,g){const w=nr.get();w.set(m,g),this.h?this.h.next=w:this.g=w,this.h=w}}var nr=new b(()=>new ts,c=>c.reset());class ts{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let vn,Y=!1,se=new sn,ae=()=>{const c=a.Promise.resolve(void 0);vn=()=>{c.then(Ve)}};var Ve=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(g){N(g)}var m=nr;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Y=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var on=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function an(c,m){if(je.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(z){e:{try{L(m.nodeName);var D=!0;break e}catch{}D=!1}D||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ln[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&an.aa.h.call(this)}}x(an,je);var ln={2:"touch",3:"pen",4:"mouse"};an.prototype.h=function(){an.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),xo=0;function gt(c,m,g,w,D){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!w,this.ha=D,this.key=++xo,this.da=this.fa=!1}function xn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function rr(c){this.src=c,this.g={},this.h=0}rr.prototype.add=function(c,m,g,w,D){var j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);var W=Io(c,m,w,D);return-1<W?(m=c[W],g||(m.fa=!1)):(m=new gt(m,this.src,j,!!w,D),m.fa=g,c.push(m)),m};function re(c,m){var g=m.type;if(g in c.g){var w=c.g[g],D=Array.prototype.indexOf.call(w,m,void 0),j;(j=0<=D)&&Array.prototype.splice.call(w,D,1),j&&(xn(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Io(c,m,g,w){for(var D=0;D<c.length;++D){var j=c[D];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==w)return D}return-1}var On="closure_lm_"+(1e6*Math.random()|0),bo={};function Eo(c,m,g,w,D){if(w&&w.once)return Oa(c,m,g,w,D);if(Array.isArray(m)){for(var j=0;j<m.length;j++)Eo(c,m[j],g,w,D);return null}return g=Fa(g),c&&c[Ht]?c.K(m,g,u(w)?!!w.capture:!!w,D):pi(c,m,g,!1,w,D)}function pi(c,m,g,w,D,j){if(!m)throw Error("Invalid event type");var W=u(D)?!!D.capture:!!D,Re=Ao(c);if(Re||(c[On]=Re=new rr(c)),g=Re.add(m,g,w,W,j),g.proxy)return g;if(w=pg(),g.proxy=w,w.src=c,w.listener=g,c.addEventListener)on||(D=W),D===void 0&&(D=!1),c.addEventListener(m.toString(),w,D);else if(c.attachEvent)c.attachEvent(ja(m.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function pg(){function c(g){return m.call(c.src,c.listener,g)}const m=To;return c}function Oa(c,m,g,w,D){if(Array.isArray(m)){for(var j=0;j<m.length;j++)Oa(c,m[j],g,w,D);return null}return g=Fa(g),c&&c[Ht]?c.L(m,g,u(w)?!!w.capture:!!w,D):pi(c,m,g,!0,w,D)}function Ma(c,m,g,w,D){if(Array.isArray(m))for(var j=0;j<m.length;j++)Ma(c,m[j],g,w,D);else w=u(w)?!!w.capture:!!w,g=Fa(g),c&&c[Ht]?(c=c.i,m=String(m).toString(),m in c.g&&(j=c.g[m],g=Io(j,g,w,D),-1<g&&(xn(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ao(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Io(m,g,w,D)),(g=-1<c?m[c]:null)&&gi(g))}function gi(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ht])re(m.i,c);else{var g=c.type,w=c.proxy;m.removeEventListener?m.removeEventListener(g,w,c.capture):m.detachEvent?m.detachEvent(ja(g),w):m.addListener&&m.removeListener&&m.removeListener(w),(g=Ao(m))?(re(g,c),g.h==0&&(g.src=null,m[On]=null)):xn(c)}}}function ja(c){return c in bo?bo[c]:bo[c]="on"+c}function To(c,m){if(c.da)c=!0;else{m=new an(m,this);var g=c.listener,w=c.ha||c.src;c.fa&&gi(c),c=g.call(w,m)}return c}function Ao(c){return c=c[On],c instanceof rr?c:null}var ns="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fa(c){return typeof c=="function"?c:(c[ns]||(c[ns]=function(m){return c.handleEvent(m)}),c[ns])}function bt(){be.call(this),this.i=new rr(this),this.M=this,this.F=null}x(bt,be),bt.prototype[Ht]=!0,bt.prototype.removeEventListener=function(c,m,g,w){Ma(this,c,m,g,w)};function we(c,m){var g,w=c.F;if(w)for(g=[];w;w=w.F)g.push(w);if(c=c.M,w=m.type||m,typeof m=="string")m=new je(m,c);else if(m instanceof je)m.target=m.target||c;else{var D=m;m=new je(w,c),S(m,D)}if(D=!0,g)for(var j=g.length-1;0<=j;j--){var W=m.g=g[j];D=Ua(W,w,!0,m)&&D}if(W=m.g=c,D=Ua(W,w,!0,m)&&D,D=Ua(W,w,!1,m)&&D,g)for(j=0;j<g.length;j++)W=m.g=g[j],D=Ua(W,w,!1,m)&&D}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],w=0;w<g.length;w++)xn(g[w]);delete c.g[m],c.h--}}this.F=null},bt.prototype.K=function(c,m,g,w){return this.i.add(String(c),m,!1,g,w)},bt.prototype.L=function(c,m,g,w){return this.i.add(String(c),m,!0,g,w)};function Ua(c,m,g,w){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var D=!0,j=0;j<m.length;++j){var W=m[j];if(W&&!W.da&&W.capture==g){var Re=W.listener,Tt=W.ha||W.src;W.fa&&re(c.i,W),D=Re.call(Tt,w)!==!1&&D}}return D&&!w.defaultPrevented}function Wt(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function yt(c){c.g=Wt(()=>{c.g=null,c.i&&(c.i=!1,yt(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Jv extends be{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(c){be.call(this),this.h=c,this.g={}}x(qr,be);var Ba=[];function Sh(c){q(c.g,function(m,g){this.g.hasOwnProperty(g)&&gi(m)},c),c.g={}}qr.prototype.N=function(){qr.aa.N.call(this),Sh(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=a.JSON.stringify,za=a.JSON.parse,Kt=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function is(){}is.prototype.h=null;function zc(c){return c.h||(c.h=c.i())}function ss(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ir(){je.call(this,"d")}x(Ir,je);function yi(){je.call(this,"c")}x(yi,je);var Gr={},Rh=null;function Hr(){return Rh=Rh||new bt}Gr.La="serverreachability";function kh(c){je.call(this,Gr.La,c)}x(kh,je);function wi(c){const m=Hr();we(m,new kh(m))}Gr.STAT_EVENT="statevent";function sr(c,m){je.call(this,Gr.STAT_EVENT,c),this.stat=m}x(sr,je);function tt(c){const m=Hr();we(m,new sr(m,c))}Gr.Ma="timingevent";function br(c,m){je.call(this,Gr.Ma,c),this.size=m}x(br,je);function os(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function as(){this.g=!0}as.prototype.xa=function(){this.g=!1};function Nh(c,m,g,w,D,j){c.info(function(){if(c.g)if(j)for(var W="",Re=j.split("&"),Tt=0;Tt<Re.length;Tt++){var ge=Re[Tt].split("=");if(1<ge.length){var Nt=ge[0];ge=ge[1];var Ct=Nt.split("_");W=2<=Ct.length&&Ct[1]=="type"?W+(Nt+"="+ge+"&"):W+(Nt+"=redacted&")}}else W=null;else W=j;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+m+`
`+g+`
`+W})}function dt(c,m,g,w,D,j,W){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+m+`
`+g+`
`+j+" "+W})}function ls(c,m,g,w){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+gg(c,g)+(w?" "+w:"")})}function ht(c,m){c.info(function(){return"TIMEOUT: "+m})}as.prototype.info=function(){};function gg(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var w=g[c];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return rs(g)}catch{return m}}var cn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$c={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qc;function or(){}x(or,is),or.prototype.g=function(){return new XMLHttpRequest},or.prototype.i=function(){return{}},qc=new or;function Er(c,m,g,w){this.j=c,this.i=m,this.l=g,this.R=w||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gc}function Gc(){this.i=null,this.g="",this.h=!1}var Hc={},Ch={};function $a(c,m,g){c.L=1,c.v=Wa(Et(m)),c.m=g,c.P=!0,Wc(c,null)}function Wc(c,m){c.F=Date.now(),qa(c),c.A=Et(c.v);var g=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Ii(g.i,"t",w),c.C=0,g=c.j.J,c.h=new Gc,c.g=au(c.j,g?m:null,!c.m),0<c.O&&(c.M=new Jv(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,w=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Ba[0]=D.toString()),D=Ba);for(var j=0;j<D.length;j++){var W=Eo(g,D[j],w||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),wi(),Nh(c.i,c.u,c.A,c.l,c.R,c.m)}Er.prototype.ca=function(c){c=c.target;const m=this.M;m&&Sr(c)==3?m.j():this.Y(c)},Er.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=Sr(this.g);var m=this.g.Ba();const ys=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||Ct!=4||m==7||(m==8||0>=ys?wi(3):wi(2)),cs(this);var g=this.g.Z();this.X=g;t:if(Ph(this)){var w=No(this.g);c="";var D=w.length,j=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),So(this);var W="";break t}this.h.i=new a.TextDecoder}for(m=0;m<D;m++)this.h.h=!0,c+=this.h.i.decode(w[m],{stream:!(j&&m==D-1)});w.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,dt(this.i,this.u,this.A,this.l,this.R,Ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,Tt=this.g;if((Re=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Re)){var ge=Re;break t}}ge=null}if(g=ge)ls(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,g);else{this.o=!1,this.s=3,tt(12),Wr(this),So(this);break e}}if(this.P){g=!0;let Mn;for(;!this.J&&this.C<W.length;)if(Mn=Dh(this,W),Mn==Ch){Ct==4&&(this.s=4,tt(14),g=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Hc){this.s=4,tt(15),ls(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else ls(this.i,this.l,Mn,null),Ga(this,Mn);if(Ph(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||W.length!=0||this.h.h||(this.s=1,tt(16),g=!1),this.o=this.o&&g,!g)ls(this.i,this.l,W,"[Invalid Chunked Response]"),Wr(this),So(this);else if(0<W.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),su(Nt),Nt.M=!0,tt(11))}}else ls(this.i,this.l,W,null),Ga(this,W);Ct==4&&Wr(this),this.o&&!this.J&&(Ct==4?ps(this.j,this):(this.o=!1,qa(this)))}else _g(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),Wr(this),So(this)}}}catch{}finally{}};function Ph(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Dh(c,m){var g=c.C,w=m.indexOf(`
`,g);return w==-1?Ch:(g=Number(m.substring(g,w)),isNaN(g)?Hc:(w+=1,w+g>m.length?Ch:(m=m.slice(w,w+g),c.C=w+g,m)))}Er.prototype.cancel=function(){this.J=!0,Wr(this)};function qa(c){c.S=Date.now()+c.I,Lh(c,c.I)}function Lh(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=os(p(c.ba,c),m)}function cs(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Er.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ht(this.i,this.A),this.L!=2&&(wi(),tt(17)),Wr(this),this.s=2,So(this)):Lh(this,this.S-c)};function So(c){c.j.G==0||c.J||ps(c.j,c)}function Wr(c){cs(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Sh(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Ga(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||Kr(g.h,c))){if(!c.K&&Kr(g.h,c)&&g.G==3){try{var w=g.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)sl(g),Po(g);else break e;rl(g),tt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=os(p(g.Za,g),6e3));if(1>=Kc(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Jr(g,11)}else if((c.K||g.g==c)&&sl(g),!v(m))for(D=g.Da.g.parse(m),m=0;m<D.length;m++){let ge=D[m];if(g.T=ge[0],ge=ge[1],g.G==2)if(ge[0]=="c"){g.K=ge[1],g.ia=ge[2];const Nt=ge[3];Nt!=null&&(g.la=Nt,g.j.info("VER="+g.la));const Ct=ge[4];Ct!=null&&(g.Aa=Ct,g.j.info("SVER="+g.Aa));const ys=ge[5];ys!=null&&typeof ys=="number"&&0<ys&&(w=1.5*ys,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const Mn=c.g;if(Mn){const al=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var j=w.h;j.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Qc(j,j.h),j.h=null))}if(w.D){const cu=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;cu&&(w.ya=cu,Se(w.I,w.D,cu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var W=c;if(w.qa=Qh(w,w.J?w.ia:null,w.W),W.K){Yc(w.h,W);var Re=W,Tt=w.L;Tt&&(Re.I=Tt),Re.B&&(cs(Re),qa(Re)),w.g=W}else iu(w);0<g.i.length&&Do(g)}else ge[0]!="stop"&&ge[0]!="close"||Jr(g,7);else g.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?Jr(g,7):nl(g):ge[0]!="noop"&&g.l&&g.l.ta(ge),g.v=0)}}wi(4)}catch{}}var Vh=class{constructor(c,m){this.g=c,this.map=m}};function Oh(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Kc(c){return c.h?1:c.g?c.g.size:0}function Kr(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Qc(c,m){c.g?c.g.add(m):c.h=m}function Yc(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Oh.prototype.cancel=function(){if(this.i=Mh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Mh(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return A(c.i)}function jh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,w=0;w<g;w++)m.push(c[w]);return m}m=[],g=0;for(w in c)m[g++]=c[w];return m}function yg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const w in c)m[g++]=w;return m}}}function Fh(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=yg(c),w=jh(c),D=w.length,j=0;j<D;j++)m.call(void 0,w[j],g&&g[j],c)}var In=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var w=c[g].indexOf("="),D=null;if(0<=w){var j=c[g].substring(0,w);D=c[g].substring(w+1)}else j=c[g];m(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function bn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bn){this.h=c.h,Ro(this,c.j),this.o=c.o,this.g=c.g,_i(this,c.s),this.l=c.l;var m=c.i,g=new ds;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),Xc(this,g),this.m=c.m}else c&&(m=String(c).match(In))?(this.h=!1,Ro(this,m[1]||"",!0),this.o=vi(m[2]||""),this.g=vi(m[3]||"",!0),_i(this,m[4]),this.l=vi(m[5]||"",!0),Xc(this,m[6]||"",!0),this.m=vi(m[7]||"")):(this.h=!1,this.i=new ds(null,this.h))}bn.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Qr(m,xi,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Qr(m,xi,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Qr(g,g.charAt(0)=="/"?Ka:Bh,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Qr(g,$h)),c.join("")};function Et(c){return new bn(c)}function Ro(c,m,g){c.j=g?vi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function _i(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Xc(c,m,g){m instanceof ds?(c.i=m,Ya(c.i,c.h)):(g||(m=Qr(m,zh)),c.i=new ds(m,c.h))}function Se(c,m,g){c.i.set(m,g)}function Wa(c){return Se(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function vi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qr(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,Uh),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Uh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var xi=/[#\/\?@]/g,Bh=/[#\?:]/g,Ka=/[#\?]/g,zh=/[#\?@]/g,$h=/#/g;function ds(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Yr(c){c.g||(c.g=new Map,c.h=0,c.i&&us(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=ds.prototype,t.add=function(c,m){Yr(this),this.i=null,c=Ee(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function Qa(c,m){Yr(c),m=Ee(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Jc(c,m){return Yr(c),m=Ee(c,m),c.g.has(m)}t.forEach=function(c,m){Yr(this),this.g.forEach(function(g,w){g.forEach(function(D){c.call(m,D,w,this)},this)},this)},t.na=function(){Yr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let w=0;w<m.length;w++){const D=c[w];for(let j=0;j<D.length;j++)g.push(m[w])}return g},t.V=function(c){Yr(this);let m=[];if(typeof c=="string")Jc(this,c)&&(m=m.concat(this.g.get(Ee(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return Yr(this),this.i=null,c=Ee(this,c),Jc(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function Ii(c,m,g){Qa(c,m),0<g.length&&(c.i=null,c.g.set(Ee(c,m),A(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var w=m[g];const j=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var D=j;W[w]!==""&&(D+="="+encodeURIComponent(String(W[w]))),c.push(D)}}return this.i=c.join("&")};function Ee(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ya(c,m){m&&!c.j&&(Yr(c),c.i=null,c.g.forEach(function(g,w){var D=w.toLowerCase();w!=D&&(Qa(this,w),Ii(this,D,g))},c)),c.j=m}function Fe(c,m){const g=new as;if(a.Image){const w=new Image;w.onload=y(Tr,g,"TestLoadImage: loaded",!0,m,w),w.onerror=y(Tr,g,"TestLoadImage: error",!1,m,w),w.onabort=y(Tr,g,"TestLoadImage: abort",!1,m,w),w.ontimeout=y(Tr,g,"TestLoadImage: timeout",!1,m,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else m(!1)}function bi(c,m){const g=new as,w=new AbortController,D=setTimeout(()=>{w.abort(),Tr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:w.signal}).then(j=>{clearTimeout(D),j.ok?Tr(g,"TestPingServer: ok",!0,m):Tr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(D),Tr(g,"TestPingServer: error",!1,m)})}function Tr(c,m,g,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(g)}catch{}}function Xa(){this.g=new Kt}function wg(c,m,g){const w=g||"";try{Fh(c,function(D,j){let W=D;u(D)&&(W=rs(D)),m.push(w+j+"="+encodeURIComponent(W))})}catch(D){throw m.push(w+"type="+encodeURIComponent("_badmap")),D}}function hs(c){this.l=c.Ub||null,this.j=c.eb||!1}x(hs,is),hs.prototype.g=function(){return new fs(this.l,this.j)},hs.prototype.i=function(c){return function(){return c}}({});function fs(c,m){bt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(fs,bt),t=fs.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,ko(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ja(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ja(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ei(this):ko(this),this.readyState==3&&Ja(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ei(this))},t.Qa=function(c){this.g&&(this.response=c,Ei(this))},t.ga=function(){this.g&&Ei(this)};function Ei(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ko(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function ko(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Za(c){let m="";return q(c,function(g,w){m+=w,m+=":",m+=g,m+=`\r
`}),m}function el(c,m,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Za(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Se(c,m,g))}function ze(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ze,bt);var qh=/^https?$/i,Gh=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qc.g(),this.v=this.o?zc(this.o):zc(qc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(j){Ar(this,j);return}if(c=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)g.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())g.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Gh,m,void 0))||w||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,W]of g)this.g.setRequestHeader(j,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hh(this),this.u=!0,this.g.send(c),this.u=!1}catch(j){Ar(this,j)}};function Ar(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Zc(c),ms(c)}function Zc(c){c.A||(c.A=!0,we(c,"complete"),we(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,we(this,"complete"),we(this,"abort"),ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tl(this):this.bb())},t.bb=function(){tl(this)};function tl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Sr(c)!=4||c.Z()!=2)){if(c.u&&Sr(c)==4)Wt(c.Ea,0,c);else if(we(c,"readystatechange"),Sr(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var w;if(w=W===0){var D=String(c.D).match(In)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),w=!qh.test(D?D.toLowerCase():"")}g=w}if(g)we(c,"complete"),we(c,"success");else{c.m=6;try{var j=2<Sr(c)?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.Z()+"]",Zc(c)}}finally{ms(c)}}}}function ms(c,m){if(c.g){Hh(c);const g=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||we(c,"ready");try{g.onreadystatechange=w}catch{}}}function Hh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Sr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),za(m)}};function No(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _g(c){const m={};c=(c.g&&2<=Sr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(v(c[w]))continue;var g=P(c[w]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[D]||[];m[D]=j,j.push(g)}E(m,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Co(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function eu(c){this.Aa=0,this.i=[],this.j=new as,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Co("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Co("baseRetryDelayMs",5e3,c),this.cb=Co("retryDelaySeedMs",1e4,c),this.Wa=Co("forwardChannelMaxRetries",2,c),this.wa=Co("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Oh(c&&c.concurrentRequestLimit),this.Da=new Xa,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eu.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,w){tt(0),this.W=c,this.H=m||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Qh(this,null,this.W),Do(this)};function nl(c){if(tu(c),c.G==3){var m=c.U++,g=Et(c.I);if(Se(g,"SID",c.K),Se(g,"RID",m),Se(g,"TYPE","terminate"),Xr(c,g),m=new Er(c,c.j,m),m.L=2,m.v=Wa(Et(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=au(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qa(m)}Kh(c)}function Po(c){c.g&&(su(c),c.g.cancel(),c.g=null)}function tu(c){Po(c),c.u&&(a.clearTimeout(c.u),c.u=null),sl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Do(c){if(!Ha(c.h)&&!c.s){c.s=!0;var m=c.Ga;vn||ae(),Y||(vn(),Y=!0),se.add(m,c),c.B=0}}function nu(c,m){return Kc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=os(p(c.Ga,c,m),ou(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new Er(this,this.j,c);let j=this.o;if(this.S&&(j?(j=_(j),S(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=ru(this,D,m),g=Et(this.I),Se(g,"RID",c),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Xr(this,g),j&&(this.O?m="headers="+encodeURIComponent(String(Za(j)))+"&"+m:this.m&&el(g,this.m,j)),Qc(this.h,D),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",m),Se(g,"SID","null"),D.T=!0,$a(D,g,null)):$a(D,g,m),this.G=2}}else this.G==3&&(c?Wh(this,c):this.i.length==0||Ha(this.h)||Wh(this))};function Wh(c,m){var g;m?g=m.l:g=c.U++;const w=Et(c.I);Se(w,"SID",c.K),Se(w,"RID",g),Se(w,"AID",c.T),Xr(c,w),c.m&&c.o&&el(w,c.m,c.o),g=new Er(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=ru(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Qc(c.h,g),$a(g,w,m)}function Xr(c,m){c.H&&q(c.H,function(g,w){Se(m,w,g)}),c.l&&Fh({},function(g,w){Se(m,w,g)})}function ru(c,m,g){g=Math.min(c.i.length,g);var w=c.l?p(c.l.Na,c.l,c):null;e:{var D=c.i;let j=-1;for(;;){const W=["count="+g];j==-1?0<g?(j=D[0].g,W.push("ofs="+j)):j=0:W.push("ofs="+j);let Re=!0;for(let Tt=0;Tt<g;Tt++){let ge=D[Tt].g;const Nt=D[Tt].map;if(ge-=j,0>ge)j=Math.max(0,D[Tt].g-100),Re=!1;else try{wg(Nt,W,"req"+ge+"_")}catch{w&&w(Nt)}}if(Re){w=W.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,w}function iu(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;vn||ae(),Y||(vn(),Y=!0),se.add(m,c),c.v=0}}function rl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=os(p(c.Fa,c),ou(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,il(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=os(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),Po(this),il(this))};function su(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function il(c){c.g=new Er(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Et(c.qa);Se(m,"RID","rpc"),Se(m,"SID",c.K),Se(m,"AID",c.T),Se(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Se(m,"TO",c.ja),Se(m,"TYPE","xmlhttp"),Xr(c,m),c.m&&c.o&&el(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Wa(Et(m)),g.m=null,g.P=!0,Wc(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Po(this),rl(this),tt(19))};function sl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ps(c,m){var g=null;if(c.g==m){sl(c),su(c),c.g=null;var w=2}else if(Kr(c.h,m))g=m.D,Yc(c.h,m),w=1;else return;if(c.G!=0){if(m.o)if(w==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var D=c.B;w=Hr(),we(w,new br(w,g)),Do(c)}else iu(c);else if(D=m.s,D==3||D==0&&0<m.X||!(w==1&&nu(c,m)||w==2&&rl(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),D){case 1:Jr(c,5);break;case 4:Jr(c,10);break;case 3:Jr(c,6);break;default:Jr(c,2)}}}function ou(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function Jr(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),w=c.Xa;const D=!w;w=new bn(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ro(w,"https"),Wa(w),D?Fe(w.toString(),g):bi(w.toString(),g)}else tt(2);c.G=0,c.l&&c.l.sa(m),Kh(c),tu(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function Kh(c){if(c.G=0,c.ka=[],c.l){const m=Mh(c.h);(m.length!=0||c.i.length!=0)&&(C(c.ka,m),C(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Qh(c,m,g){var w=g instanceof bn?Et(g):new bn(g);if(w.g!="")m&&(w.g=m+"."+w.g),_i(w,w.s);else{var D=a.location;w=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;var j=new bn(null);w&&Ro(j,w),m&&(j.g=m),D&&_i(j,D),g&&(j.l=g),w=j}return g=c.D,m=c.ya,g&&m&&Se(w,g,m),Se(w,"VER",c.la),Xr(c,w),w}function au(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new ze(new hs({eb:g})):new ze(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}t=lu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ol(){}ol.prototype.g=function(c,m){return new un(c,m)};function un(c,m){bt.call(this),this.g=new eu(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!v(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new gs(this)}x(un,bt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){nl(this.g)},un.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=rs(c),c=g);m.i.push(new Vh(m.Ya++,c)),m.G==3&&Do(m)},un.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,un.aa.N.call(this)};function Yh(c){Ir.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}x(Yh,Ir);function Xh(){yi.call(this),this.status=1}x(Xh,yi);function gs(c){this.g=c}x(gs,lu),gs.prototype.ua=function(){we(this.g,"a")},gs.prototype.ta=function(c){we(this.g,new Yh(c))},gs.prototype.sa=function(c){we(this.g,new Xh)},gs.prototype.ra=function(){we(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,hR=function(){return new ol},dR=function(){return Hr()},uR=Gr,C0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cn.NO_ERROR=0,cn.TIMEOUT=8,cn.HTTP_ERROR=6,Xf=cn,$c.COMPLETE="complete",cR=$c,ss.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Du=ss,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,lR=ze}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore",Ib="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new eh("@firebase/firestore");function vl(){return ro.logLevel}function R8(t){ro.setLogLevel(t)}function $(t,...e){if(ro.logLevel<=me.DEBUG){const n=e.map(O_);ro.debug(`Firestore (${Cc}): ${t}`,...n)}}function mt(t,...e){if(ro.logLevel<=me.ERROR){const n=e.map(O_);ro.error(`Firestore (${Cc}): ${t}`,...n)}}function xr(t,...e){if(ro.logLevel<=me.WARN){const n=e.map(O_);ro.warn(`Firestore (${Cc}): ${t}`,...n)}}function O_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fR(t,r,n)}function fR(t,e,n){let r=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mt(r),new Error(r)}function ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||fR(e,i,r)}function k8(t,e){t||X(57014,e)}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class Jj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zj{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new mR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class e5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new e5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Je(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(this.o===void 0,3512);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new P0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new P0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class N8{getToken(){return Promise.resolve(new P0(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=r5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function D0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return dy(i)===dy(s)?oe(i,s):dy(i)?1:-1}return oe(t.length,e.length)}const i5=55296,s5=57343;function dy(t){const e=t.charCodeAt(0);return e>=i5&&e<=s5}function ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function pR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="__name__";class ti{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&X(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ti.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ti.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return oe(e.length,n.length)}static compareSegments(e,n){const r=ti.isNumericId(e),i=ti.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ti.extractNumericId(e).compare(ti.extractNumericId(n)):D0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class ce extends ti{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const o5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends ti{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return o5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===L0}static keyField(){return new Ze([L0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ce.fromString(e))}static fromName(e){return new K(ce.fromString(e).popFirst(5))}static empty(){return new K(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e,n){if(!n)throw new B(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a5(t,e,n,r){if(e===!0&&r===!0)throw new B(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bb(t){if(!K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Eb(t){if(K.isDocumentKey(t))throw new B(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function he(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bp(t);throw new B(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function yR(t,e){if(e<=0)throw new B(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){const n={typeString:t};return e&&(n.value=e),n}function Na(t,e){if(!gR(t))throw new B(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new B(O.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=-62135596800,Ab=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ab);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tb)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ab}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Na(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:It("string",Ce._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ce(0,0))}static max(){return new ne(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;class oc{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function V0(t){return t.fields.find(e=>e.kind===2)}function Fo(t){return t.fields.filter(e=>e.kind!==2)}function l5(t,e){let n=oe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=c5(t.fields[r],e.fields[r]),n!==0)return n;return oe(t.fields.length,e.fields.length)}oc.UNKNOWN_ID=-1;class na{constructor(e,n){this.fieldPath=e,this.kind=n}}function c5(t,e){const n=Ze.comparator(t.fieldPath,e.fieldPath);return n!==0?n:oe(t.kind,e.kind)}class ac{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ac(0,Jn.min())}}function wR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Jn(i,K.empty(),e)}function _R(t){return new Jn(t.readTime,t.key,sc)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(ne.min(),K.empty(),sc)}static max(){return new Jn(ne.max(),K.empty(),sc)}}function F_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==vR)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="SimpleDb";class zp{static open(e,n,r,i){try{return new zp(n,e.transaction(i,r))}catch(s){throw new Xu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Mt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Xu(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=U_(r.target.error);this.S.reject(new Xu(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(Bn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new d5(n)}}class ui{static delete(e){return $(Bn,"Removing database:",e),$o(RA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!c_())return!1;if(ui.F())return!0;const e=Rt(),n=ui.M(e),r=0<n&&n<10,i=IR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,ui.M(Rt())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(Bn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Xu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new B(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Xu(e,o))},i.onupgradeneeded=s=>{$(Bn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{$(Bn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=zp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if($(Bn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function IR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class u5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return $o(this.U.delete())}}class Xu extends B{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function go(t){return t.name==="IndexedDbTransactionError"}class d5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($(Bn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):($(Bn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$o(r)}add(e){return $(Bn,"ADD",this.store.name,e,e),$o(this.store.add(e))}get(e){return $o(this.store.get(e)).next(n=>(n===void 0&&(n=null),$(Bn,"GET",this.store.name,e,n),n))}delete(e){return $(Bn,"DELETE",this.store.name,e),$o(this.store.delete(e))}count(){return $(Bn,"COUNT",this.store.name),$o(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new V((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){$(Bn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new V((r,i)=>{n.onerror=s=>{const o=U_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new V((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new u5(a),u=n(a.primaryKey,a.value,l);if(u instanceof V){const h=u.catch(f=>(l.done(),V.reject(f)));r.push(h)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $o(t){return new V((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=U_(r.target.error);n(i)}})}let Sb=!1;function U_(t){const e=ui.M(Rt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sb||(Sb=!0,setTimeout(()=>{throw r},0)),r}}return t}const Ju="IndexBackfiller";class h5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(Ju,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();$(Ju,`Documents written: ${n}`)}catch(n){go(n)?$(Ju,"Ignoring IndexedDB error during index backfill: ",n):await po(n)}await this.re(6e4)})}}class f5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return V.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $(Ju,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>($(Ju,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=_R(s);F_(o,r)>0&&(r=o)}),new Jn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=-1;function lh(t){return t==null}function Cd(t){return t===0&&1/t==-1/0}function bR(t){return typeof t=="number"&&Number.isInteger(t)&&!Cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="";function tn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rb(e)),e=m5(t.get(n),e);return Rb(e)}function m5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Ym:n+="";break;default:n+=s}}return n}function Rb(t){return t+Ym+""}function si(t){const e=t.length;if(ee(e>=2,64408,{path:t}),e===2)return ee(t.charAt(0)===Ym&&t.charAt(1)==="",56145,{path:t}),ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Ym,s);switch((o<0||o>n)&&X(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:X(61167,{path:t})}s=o+2}return new ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="remoteDocuments",ch="owner",dl="owner",Pd="mutationQueues",p5="userId",Vr="mutations",kb="batchId",Jo="userMutationsIndex",Nb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e){return[t,tn(e)]}function ER(t,e,n){return[t,tn(e),n]}const g5={},lc="documentMutations",Xm="remoteDocumentsV14",y5=["prefixPath","collectionGroup","readTime","documentId"],Zf="documentKeyIndex",w5=["prefixPath","collectionGroup","documentId"],TR="collectionGroupIndex",_5=["collectionGroup","readTime","prefixPath","documentId"],Dd="remoteDocumentGlobal",O0="remoteDocumentGlobalKey",cc="targets",AR="queryTargetsIndex",v5=["canonicalId","targetId"],uc="targetDocuments",x5=["targetId","path"],B_="documentTargetsIndex",I5=["path","targetId"],Jm="targetGlobalKey",ra="targetGlobal",Ld="collectionParents",b5=["collectionId","parent"],dc="clientMetadata",E5="clientId",$p="bundles",T5="bundleId",qp="namedQueries",A5="name",z_="indexConfiguration",S5="indexId",M0="collectionGroupIndex",R5="collectionGroup",Zu="indexState",k5=["indexId","uid"],SR="sequenceNumberIndex",N5=["uid","sequenceNumber"],ed="indexEntries",C5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RR="documentKeyIndex",P5=["indexId","uid","orderedDocumentKey"],Gp="documentOverlays",D5=["userId","collectionPath","documentId"],j0="collectionPathOverlayIndex",L5=["userId","collectionPath","largestBatchId"],kR="collectionGroupOverlayIndex",V5=["userId","collectionGroup","largestBatchId"],$_="globals",O5="name",NR=[Pd,Vr,lc,Uo,cc,ch,ra,uc,dc,Dd,Ld,$p,qp],M5=[...NR,Gp],CR=[Pd,Vr,lc,Xm,cc,ch,ra,uc,dc,Dd,Ld,$p,qp,Gp],PR=CR,q_=[...PR,z_,Zu,ed],j5=q_,DR=[...q_,$_],F5=DR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends xR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function kt(t,e){const n=Q(t);return ui.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function VR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xf(this.root,e,this.comparator,!0)}}class xf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=s??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pb(this.data.getIterator())}getIteratorFrom(e){return new Pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class Pb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Le(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new OR("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const U5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(ee(!!t,39018),typeof t=="string"){let e=0;const n=U5.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="server_timestamp",jR="__type__",FR="__previous_value__",UR="__local_write_time__";function Hp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jR])==null?void 0:r.stringValue)===MR}function Wp(t){const e=t.mapValue.fields[FR];return Hp(e)?Wp(e):e}function Vd(t){const e=Gi(t.mapValue.fields[UR].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Od="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="__type__",BR="__max__",Fs={mapValue:{fields:{__type__:{stringValue:BR}}}},H_="__vector__",hc="value",em={nullValue:"NULL_VALUE"};function io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hp(t)?4:zR(t)?9007199254740991:Kp(t)?10:11:X(28295,{value:t})}function mi(t,e){if(t===e)return!0;const n=io(t);if(n!==io(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vd(t).isEqual(Vd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Gi(i.timestampValue),a=Gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hi(i.bytesValue).isEqual(Hi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?Cd(o)===Cd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Cb(o)!==Cb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!mi(o[l],a[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Md(t,e){return(t.values||[]).find(n=>mi(n,e))!==void 0}function so(t,e){if(t===e)return 0;const n=io(t),r=io(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Db(t.timestampValue,e.timestampValue);case 4:return Db(Vd(t),Vd(e));case 5:return D0(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Hi(s),l=Hi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=oe(a[u],l[u]);if(h!==0)return h}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Ye(s.latitude),Ye(o.latitude));return a!==0?a:oe(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,x,A;const a=s.fields||{},l=o.fields||{},u=(p=a[hc])==null?void 0:p.arrayValue,h=(y=l[hc])==null?void 0:y.arrayValue,f=oe(((x=u==null?void 0:u.values)==null?void 0:x.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:Lb(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Fs.mapValue&&o===Fs.mapValue)return 0;if(s===Fs.mapValue)return 1;if(o===Fs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=D0(l[f],h[f]);if(p!==0)return p;const y=so(a[l[f]],u[h[f]]);if(y!==0)return y}return oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function Db(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Gi(t),r=Gi(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function Lb(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=so(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function fc(t){return U0(t)}function U0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=U0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${U0(n.fields[o])}`;return i+"}"}(t.mapValue):X(61005,{value:t})}function tm(t){switch(io(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wp(t);return e?16+tm(e):16;case 5:return 2*t.stringValue.length;case 6:return Hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+tm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return yo(r.fields,(s,o)=>{i+=s.length+tm(o)}),i}(t.mapValue);default:throw X(13486,{value:t})}}function ma(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function B0(t){return!!t&&"integerValue"in t}function jd(t){return!!t&&"arrayValue"in t}function Vb(t){return!!t&&"nullValue"in t}function Ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nm(t){return!!t&&"mapValue"in t}function Kp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[G_])==null?void 0:r.stringValue)===H_}function td(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=td(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=td(t.arrayValue.values[n]);return e}return{...t}}function zR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BR}const $R={mapValue:{fields:{[G_]:{stringValue:H_},[hc]:{arrayValue:{}}}}};function z5(t){return"nullValue"in t?em:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ma(fa.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Kp(t)?$R:{mapValue:{}}:X(35942,{value:t})}function $5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ma(fa.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?$R:"mapValue"in t?Kp(t)?{mapValue:{}}:Fs:X(61959,{value:t})}function Mb(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jb(t,e){const n=so(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.value=e}static empty(){return new $t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=td(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new $t(td(this.value))}}function qR(t){const e=[];return yo(t.fields,(n,r)=>{const i=new Ze([n]);if(nm(r)){const s=qR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ne.min(),ne.min(),ne.min(),$t.empty(),0)}static newFoundDocument(e,n,r,i){return new Ge(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new Ge(e,2,n,ne.min(),ne.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ne.min(),ne.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.position=e,this.inclusive=n}}function Fb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=so(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ub(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n="asc"){this.field=e,this.dir=n}}function q5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{}class pe extends GR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G5(e,n,r):n==="array-contains"?new K5(e,r):n==="in"?new XR(e,r):n==="not-in"?new Q5(e,r):n==="array-contains-any"?new Y5(e,r):new pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new H5(e,r):new W5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(so(n,this.value)):n!==null&&io(this.value)===io(n)&&this.matchesComparison(so(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends GR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pe(e,n)}matches(e){return mc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mc(t){return t.op==="and"}function z0(t){return t.op==="or"}function W_(t){return HR(t)&&mc(t)}function HR(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function $0(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+fc(t.value);if(W_(t))return t.filters.map(e=>$0(e)).join(",");{const e=t.filters.map(n=>$0(n)).join(",");return`${t.op}(${e})`}}function WR(t,e){return t instanceof pe?function(r,i){return i instanceof pe&&r.op===i.op&&r.field.isEqual(i.field)&&mi(r.value,i.value)}(t,e):t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&WR(o,i.filters[a]),!0):!1}(t,e):void X(19439)}function KR(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function QR(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${fc(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(QR).join(" ,")+"}"}(t):"Filter"}class G5 extends pe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class H5 extends pe{constructor(e,n){super(e,"in",n),this.keys=YR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W5 extends pe{constructor(e,n){super(e,"not-in",n),this.keys=YR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class K5 extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jd(n)&&Md(n.arrayValue,this.value)}}class XR extends pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Md(this.value.arrayValue,n)}}class Q5 extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Md(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Md(this.value.arrayValue,n)}}class Y5 extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Md(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function q0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new X5(t,e,n,r,i,s,o)}function pa(t){const e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fc(r)).join(",")),e.Te=n}return e.Te}function uh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!q5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ub(t.startAt,e.startAt)&&Ub(t.endAt,e.endAt)}function Zm(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ep(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function Bb(t,e,n){let r=em,i=!0;for(const s of ep(t,e)){let o=em,a=!0;switch(s.op){case"<":case"<=":o=z5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=em}Mb({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Mb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function zb(t,e,n){let r=Fs,i=!0;for(const s of ep(t,e)){let o=Fs,a=!0;switch(s.op){case">=":case">":o=$5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Fs}jb({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];jb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JR(t,e,n,r,i,s,o,a){return new Xi(t,e,n,r,i,s,o,a)}function Pc(t){return new Xi(t)}function $b(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K_(t){return t.collectionGroup!==null}function Wl(t){const e=Q(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Le(Ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Fd(s,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new Fd(Ze.keyField(),r))}return e.Ie}function nn(t){const e=Q(t);return e.Ee||(e.Ee=ek(e,Wl(t))),e.Ee}function ZR(t){const e=Q(t);return e.de||(e.de=ek(e,t.explicitOrderBy)),e.de}function ek(t,e){if(t.limitType==="F")return q0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Fd(i.field,s)});const n=t.endAt?new oo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new oo(t.startAt.position,t.startAt.inclusive):null;return q0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function G0(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tp(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return uh(nn(t),nn(e))&&t.limitType===e.limitType}function tk(t){return`${pa(nn(t))}|lt:${t.limitType}`}function xl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QR(i)).join(", ")}]`),lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fc(i)).join(",")),`Target(${r})`}(nn(t))}; limitType=${t.limitType})`}function hh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Fb(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Wl(r),i)||r.endAt&&!function(o,a,l){const u=Fb(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Wl(r),i))}(t,e)}function nk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rk(t){return(e,n)=>{let r=!1;for(const i of Wl(t)){const s=J5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function J5(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?so(l,u):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return VR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new Be(K.comparator);function kn(){return Z5}const ik=new Be(K.comparator);function Lu(...t){let e=ik;for(const n of t)e=e.insert(n.key,n);return e}function sk(t){let e=ik;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return nd()}function ok(){return nd()}function nd(){return new Ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const e3=new Be(K.comparator),t3=new Le(K.comparator);function le(...t){let e=t3;for(const n of t)e=e.add(n);return e}const n3=new Le(oe);function Q_(){return n3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function ak(t){return{integerValue:""+t}}function lk(t,e){return bR(e)?ak(e):Y_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this._=void 0}}function r3(t,e,n){return t instanceof pc?function(i,s){const o={fields:{[jR]:{stringValue:MR},[UR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hp(s)&&(s=Wp(s)),s&&(o.fields[FR]=s),{mapValue:o}}(n,e):t instanceof ga?uk(t,e):t instanceof ya?dk(t,e):function(i,s){const o=ck(i,s),a=qb(o)+qb(i.Ae);return B0(o)&&B0(i.Ae)?ak(a):Y_(i.serializer,a)}(t,e)}function i3(t,e,n){return t instanceof ga?uk(t,e):t instanceof ya?dk(t,e):n}function ck(t,e){return t instanceof gc?function(r){return B0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pc extends Qp{}class ga extends Qp{constructor(e){super(),this.elements=e}}function uk(t,e){const n=hk(e);for(const r of t.elements)n.some(i=>mi(i,r))||n.push(r);return{arrayValue:{values:n}}}class ya extends Qp{constructor(e){super(),this.elements=e}}function dk(t,e){let n=hk(e);for(const r of t.elements)n=n.filter(i=>!mi(i,r));return{arrayValue:{values:n}}}class gc extends Qp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qb(t){return Ye(t.integerValue||t.doubleValue)}function hk(t){return jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n){this.field=e,this.transform=n}}function s3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ga&&i instanceof ga||r instanceof ya&&i instanceof ya?ic(r.elements,i.elements,mi):r instanceof gc&&i instanceof gc?mi(r.Ae,i.Ae):r instanceof pc&&i instanceof pc}(t.transform,e.transform)}class o3{constructor(e,n){this.version=e,this.transformResults=n}}class et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new et}static exists(e){return new et(void 0,e)}static updateTime(e){return new et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yp{}function fk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lc(t.key,et.none()):new Dc(t.key,t.data,et.none());{const n=t.data,r=$t.empty();let i=new Le(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zi(t.key,r,new Rn(i.toArray()),et.none())}}function a3(t,e,n){t instanceof Dc?function(i,s,o){const a=i.value.clone(),l=Hb(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zi?function(i,s,o){if(!rm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Hb(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(mk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rd(t,e,n,r){return t instanceof Dc?function(s,o,a,l){if(!rm(s.precondition,o))return a;const u=s.value.clone(),h=Wb(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zi?function(s,o,a,l){if(!rm(s.precondition,o))return a;const u=Wb(s.fieldTransforms,l,o),h=o.data;return h.setAll(mk(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return rm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l3(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ck(r.transform,i||null);s!=null&&(n===null&&(n=$t.empty()),n.set(r.field,s))}return n||null}function Gb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ic(r,i,(s,o)=>s3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dc extends Yp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zi extends Yp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Hb(t,e,n){const r=new Map;ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i3(o,a,n[i]))}return r}function Wb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,r3(s,o,e))}return r}class Lc extends Yp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X_ extends Yp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&a3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ok();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=fk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(n,r)=>Gb(n,r))&&ic(this.baseMutations,e.baseMutations,(n,r)=>Gb(n,r))}}class Z_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return e3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Z_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,ye;function gk(t){switch(t){case O.OK:return X(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function yk(t){if(t===void 0)return mt("GRPC error has no .code"),O.UNKNOWN;switch(t){case _t.OK:return O.OK;case _t.CANCELLED:return O.CANCELLED;case _t.UNKNOWN:return O.UNKNOWN;case _t.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case _t.INTERNAL:return O.INTERNAL;case _t.UNAVAILABLE:return O.UNAVAILABLE;case _t.UNAUTHENTICATED:return O.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case _t.NOT_FOUND:return O.NOT_FOUND;case _t.ALREADY_EXISTS:return O.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return O.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case _t.ABORTED:return O.ABORTED;case _t.OUT_OF_RANGE:return O.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return O.UNIMPLEMENTED;case _t.DATA_LOSS:return O.DATA_LOSS;default:return X(39323,{code:t})}}(ye=_t||(_t={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=new Zs([4294967295,4294967295],0);function Kb(t){const e=wk().encode(t),n=new aR;return n.update(e),new Uint8Array(n.digest())}function Qb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zs([n,r],0),new Zs([i,s],0)]}class tv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vu(`Invalid padding: ${n}`);if(r<0)throw new Vu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Zs.fromNumber(r)));return i.compare(u3)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kb(e),[r,i]=Qb(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Kb(e),[r,i]=Qb(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ph.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mh(ne.min(),i,new Be(oe),kn(),le())}}class ph{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ph(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class _k{constructor(e,n){this.targetId=e,this.Ce=n}}class vk{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yb{constructor(){this.ve=0,this.Fe=Xb(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:s})}}),new ph(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Xb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class d3{constructor(e){this.Ge=e,this.ze=new Map,this.je=kn(),this.Je=If(),this.He=If(),this.Ye=new Be(oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Zm(s))if(r===0){const o=new K(s.path);this.et(n,o,Ge.newNoDocument(o,ne.min()))}else ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}id==null||id.lt(function(h,f,p,y,x){var b,v,I;const A={localCacheCount:h,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},C=f.unchangedNames;return C&&(A.bloomFilter={applied:x===0,hashCount:(C==null?void 0:C.hashCount)??0,bitmapLength:((v=(b=C==null?void 0:C.bits)==null?void 0:b.bitmap)==null?void 0:v.length)??0,padding:((I=C==null?void 0:C.bits)==null?void 0:I.padding)??0,mightContain:L=>(y==null?void 0:y.mightContain(L))??!1}),A}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Hi(r).toUint8Array()}catch(l){if(l instanceof OR)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tv(o,i,s)}catch(l){return xr(l instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Zm(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ge.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new mh(e,n,this.Ye,this.je,r);return this.je=kn(),this.Je=If(),this.He=If(),this.Ye=new Be(oe),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Le(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Le(oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function If(){return new Be(K.comparator)}function Xb(){return new Be(K.comparator)}const h3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),f3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),m3=(()=>({and:"AND",or:"OR"}))();class p3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function H0(t,e){return t.useProto3Json||lh(e)?e:{value:e}}function yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g3(t,e){return yc(t,e.toTimestamp())}function pt(t){return ee(!!t,49232),ne.fromTimestamp(function(n){const r=Gi(n);return new Ce(r.seconds,r.nanos)}(t))}function nv(t,e){return W0(t,e).canonicalString()}function W0(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ik(t){const e=ce.fromString(t);return ee(Ck(e),10190,{key:e.toString()}),e}function Ud(t,e){return nv(t.databaseId,e.path)}function di(t,e){const n=Ik(e);if(n.get(1)!==t.databaseId.projectId)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Tk(n))}function bk(t,e){return nv(t.databaseId,e)}function Ek(t){const e=Ik(t);return e.length===4?ce.emptyPath():Tk(e)}function K0(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tk(t){return ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Jb(t,e,n){return{name:Ud(t,e),fields:n.value.mapValue.fields}}function Xp(t,e,n){const r=di(t,e.name),i=pt(e.updateTime),s=e.createTime?pt(e.createTime):ne.min(),o=new $t({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function y3(t,e){return"found"in e?function(r,i){ee(!!i.found,43571),i.found.name,i.found.updateTime;const s=di(r,i.found.name),o=pt(i.found.updateTime),a=i.found.createTime?pt(i.found.createTime):ne.min(),l=new $t({mapValue:{fields:i.found.fields}});return Ge.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing,3894),ee(!!i.readTime,22933);const s=di(r,i.missing),o=pt(i.readTime);return Ge.newNoDocument(s,o)}(t,e):X(7234,{result:e})}function w3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ee(h===void 0||typeof h=="string",58123),at.fromBase64String(h||"")):(ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?O.UNKNOWN:yk(u.code);return new B(h,u.message||"")}(o);n=new vk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=di(t,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):ne.min(),a=new $t({mapValue:{fields:r.document.fields}}),l=Ge.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new im(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=di(t,r.document),s=r.readTime?pt(r.readTime):ne.min(),o=Ge.newNoDocument(i,s),a=r.removedTargetIds||[];n=new im([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=di(t,r.document),s=r.removedTargetIds||[];n=new im([],s,i,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new c3(i,s),a=r.targetId;n=new _k(a,o)}}return n}function Bd(t,e){let n;if(e instanceof Dc)n={update:Jb(t,e.key,e.value)};else if(e instanceof Lc)n={delete:Ud(t,e.key)};else if(e instanceof Zi)n={update:Jb(t,e.key,e.data),updateMask:E3(e.fieldMask)};else{if(!(e instanceof X_))return X(16599,{Vt:e.type});n={verify:Ud(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ya)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:g3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function Q0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?et.updateTime(pt(s.updateTime)):s.exists!==void 0?et.exists(s.exists):et.none()}(e.currentDocument):et.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new pc;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new ga(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new ya(h)}else"increment"in a?l=new gc(o,a.increment):X(16584,{proto:a});const u=Ze.fromServerFormat(a.fieldPath);return new fh(u,l)}(t,i)):[];if(e.update){e.update.name;const i=di(t,e.update.name),s=new $t({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Rn(u.map(h=>Ze.fromServerFormat(h)))}(e.updateMask);return new Zi(i,s,o,n,r)}return new Dc(i,s,n,r)}if(e.delete){const i=di(t,e.delete);return new Lc(i,n)}if(e.verify){const i=di(t,e.verify);return new X_(i,n)}return X(1463,{proto:e})}function _3(t,e){return t&&t.length>0?(ee(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?pt(i.updateTime):pt(s);return o.isEqual(ne.min())&&(o=pt(s)),new o3(o,i.transformResults||[])}(n,e))):[]}function Ak(t,e){return{documents:[bk(t,e.path)]}}function Jp(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bk(t,i);const s=function(u){if(u.length!==0)return Nk(Pe.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Ls(p.field),direction:x3(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=H0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function Sk(t,e,n,r){const{ft:i,parent:s}=Jp(t,e),o={},a=[];let l=0;return n.forEach(u=>{const h=r?u.alias:"aggregate_"+l++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:Ls(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:Ls(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function Rk(t){let e=Ek(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=kk(f);return p instanceof Pe&&W_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(x){return new Fd(Il(x.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,lh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new oo(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new oo(y,p)}(n.endAt)),JR(e,i,o,s,a,"F",l,u)}function v3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Il(n.unaryFilter.field);return pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Il(n.unaryFilter.field);return pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Il(n.unaryFilter.field);return pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Il(n.unaryFilter.field);return pe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return pe.create(Il(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(r=>kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function x3(t){return h3[t]}function I3(t){return f3[t]}function b3(t){return m3[t]}function Ls(t){return{fieldPath:t.canonicalString()}}function Il(t){return Ze.fromServerFormat(t.fieldPath)}function Nk(t){return t instanceof pe?function(n){if(n.op==="=="){if(Ob(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(Vb(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ob(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(Vb(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:I3(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const r=n.getFilters().map(i=>Nk(i));return r.length===1?r[0]:{compositeFilter:{op:b3(n.op),filters:r}}}(t):X(54877,{filter:t})}function E3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ck(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.yt=e}}function T3(t,e){let n;if(e.document)n=Xp(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=_a(e.noDocument.readTime);n=Ge.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const r=K.fromSegments(e.unknownDocument.path),i=_a(e.unknownDocument.version);n=Ge.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ce(i[0],i[1]);return ne.fromTimestamp(s)}(e.readTime)),n}function Zb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Ud(s,o.key),fields:o.data.value.mapValue.fields,updateTime:yc(s,o.version.toTimestamp()),createTime:yc(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:wa(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:wa(e.version)}}return r}function np(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _a(t){const e=new Ce(t.seconds,t.nanoseconds);return ne.fromTimestamp(e)}function qo(t,e){const n=(e.baseMutations||[]).map(s=>Q0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Q0(t.yt,s)),i=Ce.fromMillis(e.localWriteTimeMs);return new J_(e.batchId,i,n,r)}function Ou(t){const e=_a(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?_a(t.lastLimboFreeSnapshotVersion):ne.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ee(o===1,1966,{count:o}),nn(Pc(Ek(s.documents[0])))}(t.query):function(s){return nn(Rk(s))}(t.query),new Li(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,at.fromBase64String(t.resumeToken))}function Dk(t,e){const n=wa(e.snapshotVersion),r=wa(e.lastLimboFreeSnapshotVersion);let i;i=Zm(e.target)?Ak(t.yt,e.target):Jp(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zp(t){const e=Rk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}function hy(t,e){return new ev(e.largestBatchId,Q0(t.yt,e.overlayMutation))}function e1(t,e){const n=e.path.lastSegment();return[t,tn(e.path.popLast()),n]}function t1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:wa(r.readTime),documentKey:tn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{getBundleMetadata(e,n){return n1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:_a(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return n1(e).put(function(i){return{bundleId:i.id,createTime:wa(pt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return r1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Zp(s.bundledQuery),readTime:_a(s.readTime)}}(r)})}saveNamedQuery(e,n){return r1(e).put(function(i){return{name:i.name,readTime:wa(pt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function n1(t){return kt(t,$p)}function r1(t){return kt(t,qp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new eg(e,r)}getOverlay(e,n){return vu(e).get(e1(this.userId,n)).next(r=>r?hy(this.serializer,r):null)}getOverlays(e,n){const r=oi();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ev(n,o);i.push(this.St(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(tn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(vu(e).Z(j0,a))}),V.waitFor(s)}getOverlaysForCollection(e,n,r){const i=oi(),s=tn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vu(e).J(j0,o).next(a=>{for(const l of a){const u=hy(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=oi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return vu(e).ee({index:kR,range:a},(l,u,h)=>{const f=hy(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}St(e,n){return vu(e).put(function(i,s,o){const[a,l,u]=e1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bd(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function vu(t){return kt(t,Gp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{bt(e){return kt(e,$_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?at.fromUint8Array(r):at.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ye(e.integerValue));else if("doubleValue"in e){const r=Ye(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Cd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Gi(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Hi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?zR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Kp(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=hc,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Ye(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Go.Kt=new Go;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=255;function R3(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function i1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=R3(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class k3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=i1(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=i1(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(fl),this.sn(255)}_n(){this.an(fl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===fl?(this.sn(fl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===fl?(this.an(fl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class N3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class C3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class xu{constructor(){this.cn=new k3,this.ln=new N3(this.cn),this.hn=new C3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ho(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:sm(this.En),directionalValue:sm(this.dn),orderedDocumentKey:sm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function xs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=s1(t.En,e.En),n!==0?n:(n=s1(t.dn,e.dn),n!==0?n:K.comparator(t.In,e.In)))}function s1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function sm(t){return MA()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function o1(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class a1{constructor(e){this.mn=new Le((n,r)=>Ze.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=V0(e);if(n!==void 0&&!this.wn(n))return!1;const r=Fo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Le(Ze.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new na(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new na(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new na(r.field,r.dir==="asc"?0:1)));return new oc(oc.UNKNOWN_ID,this.collectionId,n,ac.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){var n,r;if(ee(t instanceof pe||t instanceof Pe,20012),t instanceof pe){if(t instanceof XR){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>pe.create(t.field,"==",s)))||[];return Pe.create(i,"or")}return t}const e=t.filters.map(i=>Lk(i));return Pe.create(e,t.op)}function P3(t){if(t.getFilters().length===0)return[];const e=J0(Lk(t));return ee(Vk(e),7391),Y0(e)||X0(e)?[e]:e.getFilters()}function Y0(t){return t instanceof pe}function X0(t){return t instanceof Pe&&W_(t)}function Vk(t){return Y0(t)||X0(t)||function(n){if(n instanceof Pe&&z0(n)){for(const r of n.getFilters())if(!Y0(r)&&!X0(r))return!1;return!0}return!1}(t)}function J0(t){if(ee(t instanceof pe||t instanceof Pe,34018),t instanceof pe)return t;if(t.filters.length===1)return J0(t.filters[0]);const e=t.filters.map(r=>J0(r));let n=Pe.create(e,t.op);return n=rp(n),Vk(n)?n:(ee(n instanceof Pe,64498),ee(mc(n),40251),ee(n.filters.length>1,57927),n.filters.reduce((r,i)=>rv(r,i)))}function rv(t,e){let n;return ee(t instanceof pe||t instanceof Pe,38388),ee(e instanceof pe||e instanceof Pe,25473),n=t instanceof pe?e instanceof pe?function(i,s){return Pe.create([i,s],"and")}(t,e):l1(t,e):e instanceof pe?l1(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0,48005),mc(i)&&mc(s))return KR(i,s.getFilters());const o=z0(i)?i:s,a=z0(i)?s:i,l=o.filters.map(u=>rv(u,a));return Pe.create(l,"or")}(t,e),rp(n)}function l1(t,e){if(mc(e))return KR(e,t.getFilters());{const n=e.filters.map(r=>rv(t,r));return Pe.create(n,"or")}}function rp(t){if(ee(t instanceof pe||t instanceof Pe,11850),t instanceof pe)return t;const e=t.getFilters();if(e.length===1)return rp(e[0]);if(HR(t))return t;const n=e.map(i=>rp(i)),r=[];return n.forEach(i=>{i instanceof pe?r.push(i):i instanceof Pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.Cn=new iv}addToCollectionParentIndex(e,n){return this.Cn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Jn.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class iv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="IndexedDbIndexManager",bf=new Uint8Array(0);class L3{constructor(e,n){this.databaseId=n,this.vn=new iv,this.Fn=new Ji(r=>pa(r),(r,i)=>uh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:tn(i)};return u1(e).put(s)}return V.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[pR(n),""],!1,!0);return u1(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(si(o.parent))}return r})}addFieldIndex(e,n){const r=Iu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=pl(e);return s.next(a=>{o.put(t1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Iu(e),i=pl(e),s=ml(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Iu(e),r=ml(e),i=pl(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return V.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new a1(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ml(e);let i=!0;const s=new Map;return V.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=le();const a=[];return V.forEach(s,(l,u)=>{$(c1,`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(l)} to execute ${pa(n)}`);const h=function(I,L){const z=V0(L);if(z===void 0)return null;for(const q of ep(I,z.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null}(u,l),f=function(I,L){const z=new Map;for(const q of Fo(L))for(const E of ep(I,q.fieldPath))switch(E.op){case"==":case"in":z.set(q.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return z.set(q.fieldPath.canonicalString(),E.value),Array.from(z.values())}return null}(u,l),p=function(I,L){const z=[];let q=!0;for(const E of Fo(L)){const _=E.kind===0?Bb(I,E.fieldPath,I.startAt):zb(I,E.fieldPath,I.startAt);z.push(_.value),q&&(q=_.inclusive)}return new oo(z,q)}(u,l),y=function(I,L){const z=[];let q=!0;for(const E of Fo(L)){const _=E.kind===0?zb(I,E.fieldPath,I.endAt):Bb(I,E.fieldPath,I.endAt);z.push(_.value),q&&(q=_.inclusive)}return new oo(z,q)}(u,l),x=this.On(l,u,p),A=this.On(l,u,y),C=this.Nn(l,u,f),b=this.Bn(l.indexId,h,x,p.inclusive,A,y.inclusive,C);return V.forEach(b,v=>r.Y(v,n.limit).next(I=>{I.forEach(L=>{const z=K.fromSegments(L.documentKey);o.has(z)||(o=o.add(z),a.push(z))})}))}).next(()=>a)}return V.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=P3(Pe.create(e.filters,"and")).map(r=>q0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.Ln(n[f/u]):bf,y=this.kn(e,p,r[f%u],i),x=this.qn(e,p,s[f%u],o),A=a.map(C=>this.kn(e,p,C,!0));h.push(...this.createRange(y,x,A))}return h}kn(e,n,r,i){const s=new Ho(e,K.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Ho(e,K.empty(),n,r);return i?s.An():s}xn(e,n){const r=new a1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return V.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Le(Ze.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new xu;for(const i of Fo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Go.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new xu;return Go.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new xu;return Go.Kt.Dt(ma(this.databaseId,n),r.Pn(function(s){const o=Fo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new xu);let s=0;for(const o of Fo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&jd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);Go.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new xu;l.seed(a.un()),Go.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Iu(e),i=pl(e);return(n?r.J(M0,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return V.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new ac(f.sequenceNumber,new Jn(_a(f.readTime),new K(si(f.documentKey)),f.largestBatchId)):ac.empty(),y=h.fields.map(([x,A])=>new na(Ze.fromServerFormat(x),A));return new oc(h.indexId,h.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:oe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Iu(e),s=pl(e);return this.Gn(e).next(o=>i.J(M0,IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>s.put(t1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,l=>this.zn(e,i,l).next(u=>{const h=this.jn(s,l);return u.isEqual(h)?V.resolve():this.Jn(e,s,l,u,h)}))))})}Hn(e,n,r,i){return ml(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return ml(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=ml(e);let s=new Le(xs);return i.ee({index:RR,range:IDBKeyRange.only([r.indexId,this.uid,sm(this.$n(r,n))])},(o,a)=>{s=s.add(new Ho(r.indexId,n,o1(a.arrayValue),o1(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Le(xs);const i=this.Qn(n,e);if(i==null)return r;const s=V0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(jd(o))for(const a of o.arrayValue.values||[])r=r.add(new Ho(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ho(n.indexId,e.key,bf,i));return r}Jn(e,n,r,i,s){$(c1,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const y=l.getIterator(),x=u.getIterator();let A=hl(y),C=hl(x);for(;A||C;){let b=!1,v=!1;if(A&&C){const I=h(A,C);I<0?v=!0:I>0&&(b=!0)}else A!=null?v=!0:b=!0;b?(f(C),C=hl(x)):v?(p(A),A=hl(y)):(A=hl(y),C=hl(x))}}(i,s,xs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),V.waitFor(o)}Gn(e){let n=1;return pl(e).ee({index:SR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>xs(o,a)).filter((o,a,l)=>!a||xs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=xs(o,e),l=xs(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,bf,K.empty()),l=i[o+1].Vn(this.uid,bf,K.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return xs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(d1)}getMinOffset(e,n){return V.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||X(44426))).next(d1)}}function u1(t){return kt(t,Ld)}function ml(t){return kt(t,ed)}function Iu(t){return kt(t,z_)}function pl(t){return kt(t,Zu)}function d1(t){ee(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;F_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ok=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e,n){const r=t.store(Vr),i=t.store(lc),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{ee(a===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=ER(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return V.waitFor(s).next(()=>u)}function ip(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(Ok,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class tg{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ee(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new tg(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Is(e).ee({index:Jo,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=bl(e),o=Is(e);return o.add({}).next(a=>{ee(typeof a=="number",49019);const l=new J_(a,n,r,i),u=function(y,x,A){const C=A.baseMutations.map(v=>Bd(y.yt,v)),b=A.mutations.map(v=>Bd(y.yt,v));return{userId:x,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:b}}(this.serializer,this.userId,l),h=[];let f=new Le((p,y)=>oe(p.canonicalString(),y.canonicalString()));for(const p of i){const y=ER(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,g5))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),V.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Is(e).get(n).next(r=>r?(ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),qo(this.serializer,r)):null)}er(e,n){return this.Xn[n]?V.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Is(e).ee({index:Jo,range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r,47524,{tr:r}),s=qo(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=eo;return Is(e).ee({index:Jo,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,eo],[this.userId,Number.POSITIVE_INFINITY]);return Is(e).J(Jo,n).next(r=>r.map(i=>qo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Jf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return bl(e).ee({range:i},(o,a,l)=>{const[u,h,f]=o,p=si(h);if(u===this.userId&&n.path.isEqual(p))return Is(e).get(f).next(y=>{if(!y)throw X(61480,{nr:o,batchId:f});ee(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:f}),s.push(qo(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(oe);const i=[];return n.forEach(s=>{const o=Jf(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=bl(e).ee({range:a},(u,h,f)=>{const[p,y,x]=u,A=si(y);p===this.userId&&s.path.isEqual(A)?r=r.add(x):f.done()});i.push(l)}),V.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Jf(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Le(oe);return bl(e).ee({range:o},(l,u,h)=>{const[f,p,y]=l,x=si(p);f===this.userId&&r.isPrefixOf(x)?x.length===i&&(a=a.add(y)):h.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Is(e).get(s).next(o=>{if(o===null)throw X(35274,{batchId:s});ee(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(qo(this.serializer,o))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Mk(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return bl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=si(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return jk(e,this.userId,n)}_r(e){return Fk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:eo,lastStreamToken:""})}}function jk(t,e,n){const r=Jf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return bl(t).ee({range:s,X:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Is(t){return kt(t,Vr)}function bl(t){return kt(t,lc)}function Fk(t){return kt(t,Pd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new va(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ne.fromTimestamp(new Ce(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>gl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ee(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return gl(e).ee((o,a)=>{const l=Ou(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(s)).next(()=>i)}forEachTarget(e,n){return gl(e).ee((r,i)=>{const s=Ou(i);n(s)})}lr(e){return f1(e).get(Jm).next(n=>(ee(n!==null,2888),n))}hr(e,n){return f1(e).put(Jm,n)}Pr(e,n){return gl(e).put(Dk(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=pa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return gl(e).ee({range:i,index:AR},(o,a,l)=>{const u=Ou(a);uh(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Vs(e);return n.forEach(o=>{const a=tn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(i)}removeMatchingKeys(e,n,r){const i=Vs(e);return V.forEach(n,s=>{const o=tn(s.path);return V.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Vs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vs(e);let s=le();return i.ee({range:r,X:!0},(o,a,l)=>{const u=si(o[1]),h=new K(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=tn(n.path),i=IDBKeyRange.bound([r],[pR(r)],!1,!0);let s=0;return Vs(e).ee({index:B_,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return gl(e).get(n).next(r=>r?Ou(r):null)}}function gl(t){return kt(t,cc)}function f1(t){return kt(t,ra)}function Vs(t){return kt(t,uc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="LruGarbageCollector",Uk=1048576;function p1([t,e],[n,r]){const i=oe(t,n);return i===0?oe(e,r):i}class O3{constructor(e){this.Ir=e,this.buffer=new Le(p1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(m1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?$(m1,"Ignoring IndexedDB error during garbage collection: ",n):await po(n)}await this.Vr(3e5)})}}class M3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Sn.ce);const r=new O3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(h1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),vl()<=me.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function zk(t,e){return new M3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.db=e,this.garbageCollector=zk(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Ef(e,r)}removeReference(e,n,r){return Ef(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ef(e,n)}br(e,n){return function(i,s){let o=!1;return Fk(i).te(a=>jk(i,a,s).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ne.min()),Vs(e).delete(function(f){return[0,tn(f.path)]}(o))))});i.push(l)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ef(e,n)}Sr(e,n){const r=Vs(e);let i,s=Sn.ce;return r.ee({index:B_},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Sn.ce&&n(new K(si(i)),s),s=u,i=l):s=Sn.ce}).next(()=>{s!==Sn.ce&&n(new K(si(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ef(t,e){return Vs(t).put(function(r,i){return{targetId:0,path:tn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.changes=new Ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Lo(e).put(r)}removeEntry(e,n,r){return Lo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],np(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return Lo(e).ee({index:Zf,range:IDBKeyRange.only(bu(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return Lo(e).ee({index:Zf,range:IDBKeyRange.only(bu(n))},(i,s)=>{r={document:this.Cr(n,s),size:ip(s)}}).next(()=>r)}getEntries(e,n){let r=kn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=kn(),i=new Be(K.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,ip(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return V.resolve();let i=new Le(w1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(bu(i.first()),bu(i.last())),o=i.getIterator();let a=o.getNext();return Lo(e).ee({index:Zf,range:s},(l,u,h)=>{const f=K.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&w1(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(bu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),np(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lo(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=kn();for(const f of u){const p=this.Cr(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(hh(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=kn();const o=y1(n,r),a=y1(n,Jn.max());return Lo(e).ee({index:TR,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.Cr(K.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new U3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return g1(e).get(O0).next(n=>(ee(!!n,20021),n))}Dr(e,n){return g1(e).put(O0,n)}Cr(e,n){if(n){const r=T3(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return Ge.newInvalidDocument(e)}}function qk(t){return new F3(t)}class U3 extends $k{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ji(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Le((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Zb(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=ip(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=Zb(this.Nr.serializer,o.convertToNoDocument(ne.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function g1(t){return kt(t,Dd)}function Lo(t){return kt(t,Xm)}function bu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function y1(t,e){const n=e.documentKey.path.toArray();return[t,np(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function w1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=oe(n[s],r[s]),i)return i;return i=oe(n.length,r.length),i||(i=oe(n[n.length-2],r[r.length-2]),i||oe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rd(r.mutation,i,Rn.empty(),Ce.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Lu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=kn();const o=nd(),a=function(){return nd()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Zi)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),rd(h.mutation,u,h.mutation.getFieldMask(),Ce.now())):o.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new B3(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=nd();let i=new Be((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Rn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=ok();h.forEach(p=>{if(!s.has(p)){const y=fk(n.get(p),r.get(p));y!==null&&f.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(oi());let a=sc,l=s;return o.next(u=>V.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,le())).next(h=>({batchId:a,changes:sk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Lu();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,l=>{const u=function(f,p){return new Xi(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))});let a=Lu();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&rd(h.mutation,u,Rn.empty(),Ce.now()),hh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pt(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Zp(i.bundledQuery),readTime:pt(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.overlays=new Be(K.comparator),this.qr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oi();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=oi(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=oi(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=oi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return V.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ev(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.Qr=new Le(Pt.$r),this.Ur=new Le(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new ce([])),r=new Pt(n,e),i=new Pt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new ce([])),r=new Pt(n,e),i=new Pt(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Le(Pt.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new J_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?eo:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),i=new Pt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(oe);return n.forEach(i=>{const s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Pt(new K(s),0);let a=new Le(oe);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),V.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,i=>{const s=new Pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Pt(n,0),i=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.ri=e,this.docs=function(){return new Be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=kn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ge.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=kn();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||F_(_R(h),r)<=0||(i.has(h.key)||hh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X(9500)}ii(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new W3(this)}getSize(e){return V.resolve(this.size)}}class W3 extends $k{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.persistence=e,this.si=new Ji(n=>pa(n),uh),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new sv,this.targetCount=0,this.ai=va.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new va(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Pr(n),V.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sn(0),this.li=!1,this.li=!0,this.hi=new q3,this.referenceDelegate=e(this),this.Pi=new K3(this),this.indexManager=new D3,this.remoteDocumentCache=function(i){return new H3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pk(n),this.Ii=new z3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new G3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new Q3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return V.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Q3 extends xR{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ri=new sv,this.Vi=null}static mi(e){return new ng(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class sp{constructor(e,n){this.persistence=e,this.pi=new Ji(r=>tn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zk(this,n)}static mi(e,n){return new sp(e,n)}Ei(){}di(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return V.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?V.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),V.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tm(e.data.value)),n}br(e,n,r){return V.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new zp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(ch)}(e),function(l){l.createObjectStore(Pd,{keyPath:p5}),l.createObjectStore(Vr,{keyPath:kb,autoIncrement:!0}).createIndex(Jo,Nb,{unique:!0}),l.createObjectStore(lc)}(e),_1(e),function(l){l.createObjectStore(Uo)}(e));let o=V.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(uc),l.deleteObjectStore(cc),l.deleteObjectStore(ra)}(e),_1(e)),o=o.next(()=>function(l){const u=l.store(ra),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return u.put(Jm,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Vr).J().next(f=>{l.deleteObjectStore(Vr),l.createObjectStore(Vr,{keyPath:kb,autoIncrement:!0}).createIndex(Jo,Nb,{unique:!0});const p=u.store(Vr),y=f.map(x=>p.put(x));return V.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(dc,{keyPath:E5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Dd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore($p,{keyPath:T5})})(e),function(l){l.createObjectStore(qp,{keyPath:A5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Gp,{keyPath:D5});u.createIndex(j0,L5,{unique:!1}),u.createIndex(kR,V5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Xm,{keyPath:y5});u.createIndex(Zf,w5),u.createIndex(TR,_5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Uo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(z_,{keyPath:S5,autoIncrement:!0}).createIndex(M0,R5,{unique:!1}),l.createObjectStore(Zu,{keyPath:k5}).createIndex(SR,N5,{unique:!1}),l.createObjectStore(ed,{keyPath:C5}).createIndex(RR,P5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Zu).clear()}).next(()=>{n.objectStore(ed).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore($_,{keyPath:O5})})(e)})),r<18&&i>=18&&MA()&&(o=o.next(()=>{n.objectStore(Zu).clear()}).next(()=>{n.objectStore(ed).clear()})),o}wi(e){let n=0;return e.store(Uo).ee((r,i)=>{n+=ip(i)}).next(()=>{const r={byteSize:n};return e.store(Dd).put(O0,r)})}yi(e){const n=e.store(Pd),r=e.store(Vr);return n.J().next(i=>V.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,eo],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Jo,o).next(a=>V.forEach(a,l=>{ee(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=qo(this.serializer,l);return Mk(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(uc),r=e.store(Uo);return e.store(ra).get(Jm).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ce(o),u=function(f){return[0,tn(f)]}(l);s.push(n.get(u).next(h=>h?V.resolve():(f=>n.put({targetId:0,path:tn(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(s))})}bi(e,n){e.createObjectStore(Ld,{keyPath:b5});const r=n.store(Ld),i=new iv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:tn(l)})}};return n.store(Uo).ee({X:!0},(o,a)=>{const l=new ce(o);return s(l.popLast())}).next(()=>n.store(lc).ee({X:!0},([o,a,l],u)=>{const h=si(a);return s(h.popLast())}))}Di(e){const n=e.store(cc);return n.ee((r,i)=>{const s=Ou(i),o=Dk(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Uo),i=[];return r.ee((s,o)=>{const a=n.store(Xm),l=function(f){return f.document?new K(ce.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):X(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>V.waitFor(i))}Fi(e,n){const r=n.store(Vr),i=qk(this.serializer),s=new ov(ng.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??le();qo(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),V.forEach(a,(l,u)=>{const h=new Lt(u),f=eg.wt(this.serializer,h),p=s.getIndexManager(h),y=tg.wt(h,this.serializer,p,s.referenceDelegate);return new Gk(i,y,f,p).recalculateAndSaveOverlaysForDocumentKeys(new F0(n,Sn.ce),l).next()})})}}function _1(t){t.createObjectStore(uc,{keyPath:x5}).createIndex(B_,I5,{unique:!0}),t.createObjectStore(cc,{keyPath:"targetId"}).createIndex(AR,v5,{unique:!0}),t.createObjectStore(ra)}const bs="IndexedDbPersistence",fy=18e5,my=5e3,py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Hk="main";class av{constructor(e,n,r,i,s,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!av.v())throw new B(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new j3(this,i),this.$i=n+Hk,this.serializer=new Pk(l),this.Ui=new ui(this.$i,this.Ni,new Y3(this.serializer)),this.hi=new S3,this.Pi=new V3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qk(this.serializer),this.Ii=new A3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&mt(bs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,py);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Sn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(go(e))return $(bs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(bs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Eu(e).get(dl).next(n=>V.resolve(this.es(n)))}ts(e){return Tf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=kt(n,dc);return r.J().next(i=>{const s=this.ss(i,fy),o=i.filter(a=>s.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Eu(e).get(dl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,my)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new B(O.FAILED_PRECONDITION,py);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tf(e).J().next(r=>this.ss(r,my).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$(bs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ch,dc],e=>{const n=new F0(e,Sn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Tf(e).J().next(n=>this.ss(n,fy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return tg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return eg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){$(bs,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?F5:l===17?DR:l===16?j5:l===15?q_:l===14?PR:l===13?CR:l===12?M5:l===11?NR:void X(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new F0(a,this.ci?this.ci.next():Sn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new B(O.FAILED_PRECONDITION,vR);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Eu(e).get(dl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,my)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(O.FAILED_PRECONDITION,py)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eu(e).put(dl,n)}static v(){return ui.v()}Zi(e){const n=Eu(e);return n.get(dl).next(r=>this.es(r)?($(bs,"Releasing primary lease."),n.delete(dl)):V.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;OA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return $(bs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt(bs,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Eu(t){return kt(t,ch)}function Tf(t){return kt(t,dc)}function lv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return OA()?8:IR(Rt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new X3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(vl()<=me.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(vl()<=me.DEBUG&&$("QueryEngine","Query:",xl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(vl()<=me.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nn(n))):V.resolve())}ys(e,n){if($b(n))return V.resolve(null);let r=nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tp(n,null,"F"),r=nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,tp(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return $b(n)||i.isEqual(ne.min())?V.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?V.resolve(null):(vl()<=me.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xl(n)),this.vs(e,o,n,wR(i,sc)).next(a=>a))})}Ds(e,n){let r=new Le(rk(e));return n.forEach((i,s)=>{hh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return vl()<=me.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",xl(n)),this.ps.getDocumentsMatchingQuery(e,n,Jn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="LocalStore",J3=3e8;class Z3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Be(oe),this.xs=new Ji(s=>pa(s),uh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Kk(t,e,n,r){return new Z3(t,e,n,r)}async function Qk(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=le();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function eF(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let y=V.resolve();return p.forEach(x=>{y=y.next(()=>h.getEntry(l,x)).next(A=>{const C=u.docVersions.get(x);ee(C!==null,48541),A.version.compareTo(C)<0&&(f.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yk(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function tF(t,e){const n=Q(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(at.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(A,C,b){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=J3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let l=kn(),u=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Xk(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(ne.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Xk(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=kn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(uv,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function nF(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=eo),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wc(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Li(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function _c(t,e,n){const r=Q(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!go(o))throw o;$(uv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function op(t,e,n){const r=Q(t);let i=ne.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Q(l),p=f.xs.get(h);return p!==void 0?V.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:le())).next(a=>(eN(r,nk(e),a),{documents:a,Qs:s})))}function Jk(t,e){const n=Q(t),r=Q(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function Zk(t,e){const n=Q(t),r=n.Os.get(e)||ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,wR(r,sc),Number.MAX_SAFE_INTEGER)).then(i=>(eN(n,e,i),i))}function eN(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function rF(t,e,n,r){const i=Q(t);let s=le(),o=kn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(s=s.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(h,f)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await wc(i,function(h){return nn(Pc(ce.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Xk(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function iF(t,e,n=le()){const r=await wc(t,nn(Zp(e.bundledQuery))),i=Q(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=pt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(at.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firestore_clients";function v1(t,e){return`${tN}_${t}_${e}`}const nN="firestore_mutations";function x1(t,e,n){let r=`${nN}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const rN="firestore_targets";function gy(t,e){return`${rN}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="SharedClientState";class ap{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new B(i.error.code,i.error.message))),o?new ap(e,n,i.state,s):(mt(ni,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new B(r.error.code,r.error.message))),s?new sd(e,r.state,i):(mt(ni,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Q_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=bR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new lp(e,s):(mt(ni,`Failed to parse client data for instance '${e}': ${n}`),null)}}class dv{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new dv(n.clientId,n.onlineState):(mt(ni,`Failed to parse online state: ${e}`),null)}}class Z0{constructor(){this.activeTargetIds=Q_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yy{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Be(oe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=v1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Z0),this.ro=new RegExp(`^${tN}_${o}_([^_]*)$`),this.io=new RegExp(`^${nN}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${rN}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(v1(this.persistenceKey,r));if(i){const s=lp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gy(this.persistenceKey,e));if(i){const s=sd.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gy(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $(ni,"READ",e,n),n}setItem(e,n){$(ni,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){$(ni,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if($(ni,"EVENT",n.key,n.newValue),n.key===this.eo)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Sn.ce;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number",30636,{So:s}),o=a}catch(a){mt(ni,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Sn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new ap(this.currentUser,e,n,r),s=x1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=x1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=gy(this.persistenceKey,e),s=new sd(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return lp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ap.Ws(new Lt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return sd.Ws(i,n)}uo(e){return dv.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(ni,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Q_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class iN{constructor(){this.Mo=new Z0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Z0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="ConnectivityMonitor";class b1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(I1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(I1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function ew(){return Af===null?Af=function(){return 268435456+Math.round(2147483648*Math.random())}():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="RestConnection",oF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=ew(),a=this.zo(e,n.toUriEncodedString());$(wy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=Ki(u);return this.Jo(e,a,l,r,h).then(f=>($(wy,`Received RPC '${e}' ${o}: `,f),f),f=>{throw xr(wy,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=oF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class cF extends aF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=ew();return new Promise((a,l)=>{const u=new lR;u.setWithCredentials(!0),u.listenOnce(cR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Xf.NO_ERROR:const f=u.getResponseJson();$(Xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Xf.TIMEOUT:$(Xt,`RPC '${e}' ${o} timed out`),l(new B(O.DEADLINE_EXCEEDED,"Request time out"));break;case Xf.HTTP_ERROR:const p=u.getStatus();if($(Xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const A=function(b){const v=b.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(v)>=0?v:O.UNKNOWN}(x.status);l(new B(A,x.message))}else l(new B(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(O.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$(Xt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);$(Xt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=ew(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hR(),a=dR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");$(Xt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,y=!1;const x=new lF({Yo:C=>{y?$(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||($(Xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),$(Xt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},Zo:()=>f.close()}),A=(C,b,v)=>{C.listen(b,I=>{try{v(I)}catch(L){setTimeout(()=>{throw L},0)}})};return A(f,Du.EventType.OPEN,()=>{y||($(Xt,`RPC '${e}' stream ${i} transport opened.`),x.o_())}),A(f,Du.EventType.CLOSE,()=>{y||(y=!0,$(Xt,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(f))}),A(f,Du.EventType.ERROR,C=>{y||(y=!0,xr(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),x.a_(new B(O.UNAVAILABLE,"The operation could not be completed")))}),A(f,Du.EventType.MESSAGE,C=>{var b;if(!y){const v=C.data[0];ee(!!v,16349);const I=v,L=(I==null?void 0:I.error)||((b=I[0])==null?void 0:b.error);if(L){$(Xt,`RPC '${e}' stream ${i} received error:`,L);const z=L.status;let q=function(R){const S=_t[R];if(S!==void 0)return yk(S)}(z),E=L.message;q===void 0&&(q=O.INTERNAL,E="Unknown error status: "+z+" with message "+L.message),y=!0,x.a_(new B(q,E)),f.close()}else $(Xt,`RPC '${e}' stream ${i} received:`,v),x.u_(v)}}),A(a,uR.STAT_EVENT,C=>{C.stat===C0.PROXY?$(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===C0.NOPROXY&&$(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof window<"u"?window:null}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){return new p3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="PersistentStream";class oN{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new B(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(E1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(E1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uF extends oN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=w3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?pt(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=K0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Zm(l)?{documents:Ak(s,l)}:{query:Jp(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xk(s,o.resumeToken);const u=H0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=yc(s,o.snapshotVersion.toTimestamp());const u=H0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=v3(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=K0(this.serializer),n.removeTarget=e,this.q_(n)}}class dF extends oN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_3(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=K0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bd(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{}class fF extends hF{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,W0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(O.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,W0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(O.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mF{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mt(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class pF{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{wo(this)&&($(xa,"Restarting streams for network reachability change."),await async function(l){const u=Q(l);u.Ea.add(4),await Vc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gh(u)}(this))})}),this.Ra=new mF(r,i)}}async function gh(t){if(wo(t))for(const e of t.da)await e(!0)}async function Vc(t){for(const e of t.da)await e(!1)}function rg(t,e){const n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pv(n)?mv(n):Mc(n).O_()&&fv(n,e))}function vc(t,e){const n=Q(t),r=Mc(n);n.Ia.delete(e),r.O_()&&aN(n,e),n.Ia.size===0&&(r.O_()?r.L_():wo(n)&&n.Ra.set("Unknown"))}function fv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mc(t).Y_(e)}function aN(t,e){t.Va.Ue(e),Mc(t).Z_(e)}function mv(t){t.Va=new d3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Mc(t).start(),t.Ra.ua()}function pv(t){return wo(t)&&!Mc(t).x_()&&t.Ia.size>0}function wo(t){return Q(t).Ea.size===0}function lN(t){t.Va=void 0}async function gF(t){t.Ra.set("Online")}async function yF(t){t.Ia.forEach((e,n)=>{fv(t,e)})}async function wF(t,e){lN(t),pv(t)?(t.Ra.ha(e),mv(t)):t.Ra.set("Unknown")}async function _F(t,e,n){if(t.Ra.set("Online"),e instanceof vk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){$(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cp(t,r)}else if(e instanceof im?t.Va.Ze(e):e instanceof _k?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await Yk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),aN(s,l);const f=new Li(h.target,l,u,h.sequenceNumber);fv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$(xa,"Failed to raise snapshot:",r),await cp(t,r)}}async function cp(t,e,n){if(!go(e))throw e;t.Ea.add(1),await Vc(t),t.Ra.set("Offline"),n||(n=()=>Yk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(xa,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gh(t)})}function cN(t,e){return e().catch(n=>cp(t,n,e))}async function Oc(t){const e=Q(t),n=ao(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eo;for(;vF(e);)try{const i=await nF(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,xF(e,i)}catch(i){await cp(e,i)}uN(e)&&dN(e)}function vF(t){return wo(t)&&t.Ta.length<10}function xF(t,e){t.Ta.push(e);const n=ao(t);n.O_()&&n.X_&&n.ea(e.mutations)}function uN(t){return wo(t)&&!ao(t).x_()&&t.Ta.length>0}function dN(t){ao(t).start()}async function IF(t){ao(t).ra()}async function bF(t){const e=ao(t);for(const n of t.Ta)e.ea(n.mutations)}async function EF(t,e,n){const r=t.Ta.shift(),i=Z_.from(r,e,n);await cN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Oc(t)}async function TF(t,e){e&&ao(t).X_&&await async function(r,i){if(function(o){return gk(o)&&o!==O.ABORTED}(i.code)){const s=r.Ta.shift();ao(r).B_(),await cN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Oc(r)}}(t,e),uN(t)&&dN(t)}async function T1(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),$(xa,"RemoteStore received new credentials");const r=wo(n);n.Ea.add(3),await Vc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gh(n)}async function tw(t,e){const n=Q(t);e?(n.Ea.delete(2),await gh(n)):e||(n.Ea.add(2),await Vc(n),n.Ra.set("Unknown"))}function Mc(t){return t.ma||(t.ma=function(n,r,i){const s=Q(n);return s.sa(),new uF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:gF.bind(null,t),t_:yF.bind(null,t),r_:wF.bind(null,t),H_:_F.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),pv(t)?mv(t):t.Ra.set("Unknown")):(await t.ma.stop(),lN(t))})),t.ma}function ao(t){return t.fa||(t.fa=function(n,r,i){const s=Q(n);return s.sa(),new dF(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IF.bind(null,t),r_:TF.bind(null,t),ta:bF.bind(null,t),na:EF.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Oc(t)):(await t.fa.stop(),t.Ta.length>0&&($(xa,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jc(t,e){if(mt("AsyncQueue",`${e}: ${t}`),go(t))return new B(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{static emptySet(e){return new ia(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Lu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.ga=new Be(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ia{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ia(e,n,ia.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class SF{constructor(){this.queries=S1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Q(n),s=i.queries;i.queries=S1(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new B(O.ABORTED,"Firestore shutting down"))}}function S1(){return new Ji(t=>tk(t),dh)}async function yv(t,e){const n=Q(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new AF,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=jc(o,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&_v(n)}async function wv(t,e){const n=Q(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RF(t,e){const n=Q(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&_v(n)}function kF(t,e,n){const r=Q(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function _v(t){t.Ca.forEach(e=>{e.next()})}var nw,R1;(R1=nw||(nw={})).Ma="default",R1.Cache="cache";class vv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.serializer=e}$s(e){return di(this.serializer,e)}Us(e){return e.metadata.exists?Xp(this.serializer,e.document,!1):Ge.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return pt(e)}}class xv{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=fN(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ce.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new k1(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||le()).add(s);n.set(o,a)}}return n}async ja(e){const n=await rF(e,new k1(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await iF(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function fN(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.key=e}}class pN{constructor(e){this.key=e}}class gN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=rk(e),this.tu=new ia(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new A1,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),y=hh(this.query,f)?f:null,x=!!p&&this.mutatedKeys.has(p.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;p&&y?p.data.isEqual(y.data)?x!==A&&(r.track({type:3,doc:y}),C=!0):this.su(p,y)||(r.track({type:2,doc:y}),C=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),C=!0):p&&!y&&(r.track({type:1,doc:p}),C=!0,(l||u)&&(a=!0)),C&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,x){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:C})}};return A(y)-A(x)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ia(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new pN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new mN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ia.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _o="SyncEngine";class NF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CF{constructor(e){this.key=e,this.hu=!1}}class PF{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ji(a=>tk(a),dh),this.Iu=new Map,this.Eu=new Set,this.du=new Be(K.comparator),this.Au=new Map,this.Ru=new sv,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DF(t,e,n=!0){const r=ig(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await yN(r,e,n,!0),i}async function LF(t,e){const n=ig(t);await yN(n,e,!0,!1)}async function yN(t,e,n,r){const i=await wc(t.localStore,nn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Iv(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&rg(t.remoteStore,i),a}async function Iv(t,e,n,r,i){t.pu=(f,p,y)=>async function(A,C,b,v){let I=C.view.ru(b);I.Cs&&(I=await op(A.localStore,C.query,!1).then(({documents:E})=>C.view.ru(E,I)));const L=v&&v.targetChanges.get(C.targetId),z=v&&v.targetMismatches.get(C.targetId)!=null,q=C.view.applyChanges(I,A.isPrimaryClient,L,z);return rw(A,C.targetId,q.au),q.snapshot}(t,f,p,y);const s=await op(t.localStore,e,!0),o=new gN(e,s.Qs),a=o.ru(s.documents),l=ph.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);rw(t,n,u.au);const h=new NF(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function VF(t,e,n){const r=Q(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!dh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _c(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vc(r.remoteStore,i.targetId),xc(r,i.targetId)}).catch(po)):(xc(r,i.targetId),await _c(r.localStore,i.targetId,!0))}async function OF(t,e){const n=Q(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vc(n.remoteStore,r.targetId))}async function MF(t,e,n){const r=Av(t);try{const i=await function(o,a){const l=Q(o),u=Ce.now(),h=a.reduce((y,x)=>y.add(x.key),le());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=kn(),A=le();return l.Ns.getEntries(y,h).next(C=>{x=C,x.forEach((b,v)=>{v.isValidDocument()||(A=A.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(C=>{f=C;const b=[];for(const v of a){const I=l3(v,f.get(v.key).overlayedDocument);I!=null&&b.push(new Zi(v.key,I,qR(I.value.mapValue),et.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,b,a)}).next(C=>{p=C;const b=C.applyToLocalDocumentSet(f,A);return l.documentOverlayCache.saveOverlays(y,C.batchId,b)})}).then(()=>({batchId:p.batchId,changes:sk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Be(oe)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await es(r,i.changes),await Oc(r.remoteStore)}catch(i){const s=jc(i,"Failed to persist write");n.reject(s)}}async function wN(t,e){const n=Q(t);try{const r=await tF(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ee(o.hu,14607):i.removedDocuments.size>0&&(ee(o.hu,42227),o.hu=!1))}),await es(n,r,e)}catch(r){await po(r)}}function N1(t,e,n){const r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Q(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&_v(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jF(t,e,n){const r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Be(K.comparator);o=o.insert(s,Ge.newNoDocument(s,ne.min()));const a=le().add(s),l=new mh(ne.min(),new Map,new Be(oe),o,a);await wN(r,l),r.du=r.du.remove(s),r.Au.delete(e),Tv(r)}else await _c(r.localStore,e,!1).then(()=>xc(r,e,n)).catch(po)}async function FF(t,e){const n=Q(t),r=e.batch.batchId;try{const i=await eF(n.localStore,e);Ev(n,r,null),bv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await es(n,i)}catch(i){await po(i)}}async function UF(t,e,n){const r=Q(t);try{const i=await function(o,a){const l=Q(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ee(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Ev(r,e,n),bv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await es(r,i)}catch(i){await po(i)}}async function BF(t,e){const n=Q(t);wo(n.remoteStore)||$(_o,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Q(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===eo)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=jc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function bv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Ev(t,e,n){const r=Q(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function xc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||_N(t,r)})}function _N(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(vc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Tv(t))}function rw(t,e,n){for(const r of n)r instanceof mN?(t.Ru.addReference(r.key,e),zF(t,r)):r instanceof pN?($(_o,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||_N(t,r.key)):X(19791,{wu:r})}function zF(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(_o,"New document in limbo: "+n),t.Eu.add(r),Tv(t))}function Tv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ce.fromString(e)),r=t.fu.next();t.Au.set(r,new CF(n)),t.du=t.du.insert(n,r),rg(t.remoteStore,new Li(nn(Pc(n.path)),r,"TargetPurposeLimboResolution",Sn.ce))}}async function es(t,e,n){const r=Q(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=cv.As(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,p=>V.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>V.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!go(f))throw f;$(uv,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),x=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(p,A)}}}(r.localStore,s))}async function $F(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){$(_o,"User change. New user:",e.toKey());const r=await Qk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new B(O.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await es(n,r.Ls)}}function qF(t,e){const n=Q(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function GF(t,e){const n=Q(t),r=await op(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&rw(n,e.targetId,i.au),i}async function HF(t,e){const n=Q(t);return Zk(n.localStore,e).then(r=>es(n,r))}async function WF(t,e,n,r){const i=Q(t),s=await function(a,l){const u=Q(a),h=Q(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):V.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Oc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Ev(i,e,r||null),bv(i,e),function(a,l){Q(Q(a).mutationQueue).ir(l)}(i.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await es(i,s)):$(_o,"Cannot apply mutation batch with id: "+e)}async function KF(t,e){const n=Q(t);if(ig(n),Av(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await C1(n,r.toArray());n.gu=!0,await tw(n.remoteStore,!0);for(const s of i)rg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(xc(n,o),_c(n.localStore,o,!0))),vc(n.remoteStore,o)}),await i,await C1(n,r),function(o){const a=Q(o);a.Au.forEach((l,u)=>{vc(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Be(K.comparator)}(n),n.gu=!1,await tw(n.remoteStore,!1)}}async function C1(t,e,n){const r=Q(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await wc(r.localStore,nn(l[0]));for(const u of l){const h=r.Tu.get(u),f=await GF(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await Jk(r.localStore,o);a=await wc(r.localStore,u),await Iv(r,vN(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function vN(t){return JR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function QF(t){return function(n){return Q(Q(n).persistence).Ts()}(Q(t).localStore)}async function YF(t,e,n,r){const i=Q(t);if(i.gu)return void $(_o,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Zk(i.localStore,nk(s[0])),a=mh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",at.EMPTY_BYTE_STRING);await es(i,o,a);break}case"rejected":await _c(i.localStore,e,!0),xc(i,e,r);break;default:X(64155,n)}}async function XF(t,e,n){const r=ig(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$(_o,"Adding an already active target "+i);continue}const s=await Jk(r.localStore,i),o=await wc(r.localStore,s);await Iv(r,vN(s),o.targetId,!1,o.resumeToken),rg(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await _c(r.localStore,i,!1).then(()=>{vc(r.remoteStore,i),xc(r,i)}).catch(po)}}function ig(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jF.bind(null,e),e.Pu.H_=RF.bind(null,e.eventManager),e.Pu.yu=kF.bind(null,e.eventManager),e}function Av(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UF.bind(null,e),e}function JF(t,e,n){const r=Q(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,x){const A=Q(y),C=pt(x.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",b=>A.Ii.getBundleMetadata(b,x.id)).then(b=>!!b&&b.createTime.compareTo(C)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(fN(l));const u=new xv(l,o.serializer);let h=await o.bu();for(;h;){const p=await u.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await u.ja(s.localStore);return await es(s,f.Ha,void 0),await function(y,x){const A=Q(y);return A.persistence.runTransaction("Save bundle","readwrite",C=>A.Ii.saveBundleMetadata(C,x))}(s.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return xr(_o,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ca(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Kk(this.persistence,new Wk,e.initialUser,this.serializer)}Cu(e){return new ov(ng.mi,this.serializer)}Du(e){return new iN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ic.provider={build:()=>new Ic};class Sv extends Ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ee(this.persistence.referenceDelegate instanceof sp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Bk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new ov(r=>sp.mi(r,n),this.serializer)}}class Rv extends Ic{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Av(this.xu.syncEngine),await Oc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Kk(this.persistence,new Wk,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Bk(r,e.asyncQueue,n)}Mu(e,n){const r=new f5(n,this.persistence);return new h5(e.asyncQueue,r)}Cu(e){const n=lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new av(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,sN(),om(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new iN}}class xN extends Rv{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof yy&&(this.sharedClientState.syncEngine={Co:WF.bind(null,n),vo:YF.bind(null,n),Fo:XF.bind(null,n),Ts:QF.bind(null,n),Do:HF.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await KF(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=sN();if(!yy.v(n))throw new B(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yy(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class lo{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>N1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$F.bind(null,this.syncEngine),await tw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SF}()}createDatastore(e){const n=Ca(e.databaseInfo.databaseId),r=function(s){return new cF(s)}(e.databaseInfo);return function(s,o,a,l){return new fF(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new pF(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>N1(this.syncEngine,n,0),function(){return b1.v()?new b1:new sF}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new PF(i,s,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Q(i);$(xa,"RemoteStore shutting down."),s.Ea.add(5),await Vc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}lo.provider={build:()=>new lo};function P1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Mt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new hN(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new hN(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new B(O.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Q(i),a={documents:s.map(f=>Ud(o.serializer,f))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ce.emptyPath(),a,s.length),u=new Map;l.forEach(f=>{const p=y3(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=u.get(f.toString());ee(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new X_(i,this.precondition(i)))}),await async function(r,i){const s=Q(r),o={writes:i.map(a=>Bd(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ne.min())?et.exists(!1):et.updateTime(n):et.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ne.min()))throw new B(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return et.updateTime(n)}return et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new hv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new t6(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!lh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="FirestoreClient";class r6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=M_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$(co,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(co,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _y(t,e){t.asyncQueue.verifyOperationInProgress(),$(co,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Qk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function D1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kv(t);$(co,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>T1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>T1(e.remoteStore,i)),t._onlineComponents=e}async function kv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(co,"Using user provided OfflineComponentProvider");try{await _y(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===O.FAILED_PRECONDITION||i.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),await _y(t,new Ic)}}else $(co,"Using default OfflineComponentProvider"),await _y(t,new Sv(void 0));return t._offlineComponents}async function og(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(co,"Using user provided OnlineComponentProvider"),await D1(t,t._uninitializedComponentsProvider._online)):($(co,"Using default OnlineComponentProvider"),await D1(t,new lo))),t._onlineComponents}function IN(t){return kv(t).then(e=>e.persistence)}function Fc(t){return kv(t).then(e=>e.localStore)}function bN(t){return og(t).then(e=>e.remoteStore)}function Nv(t){return og(t).then(e=>e.syncEngine)}function EN(t){return og(t).then(e=>e.datastore)}async function bc(t){const e=await og(t),n=e.eventManager;return n.onListen=DF.bind(null,e.syncEngine),n.onUnlisten=VF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OF.bind(null,e.syncEngine),n}function i6(t){return t.asyncQueue.enqueue(async()=>{const e=await IN(t),n=await bN(t);return e.setNetworkEnabled(!0),function(i){const s=Q(i);return s.Ea.delete(0),gh(s)}(n)})}function s6(t){return t.asyncQueue.enqueue(async()=>{const e=await IN(t),n=await bN(t);return e.setNetworkEnabled(!1),async function(i){const s=Q(i);s.Ea.add(0),await Vc(s),s.Ra.set("Offline")}(n)})}function o6(t,e){const n=new Mt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,h){const f=Q(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new B(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=jc(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Fc(t),e,n)),n.promise}function TN(t,e,n={}){const r=new Mt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new sg({next:p=>{h.Nu(),o.enqueueAndForget(()=>wv(s,f));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new B(O.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?u.reject(new B(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new vv(Pc(a.path),h,{includeMetadataChanges:!0,qa:!0});return yv(s,f)}(await bc(t),t.asyncQueue,e,n,r)),r.promise}function a6(t,e){const n=new Mt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await op(i,s,!0),l=new gN(s,a.Qs),u=l.ru(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const l=jc(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Fc(t),e,n)),n.promise}function AN(t,e,n={}){const r=new Mt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new sg({next:p=>{h.Nu(),o.enqueueAndForget(()=>wv(s,f)),p.fromCache&&l.source==="server"?u.reject(new B(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new vv(a,h,{includeMetadataChanges:!0,qa:!0});return yv(s,f)}(await bc(t),t.asyncQueue,e,n,r)),r.promise}function l6(t,e,n){const r=new Mt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await EN(t);r.resolve(async function(o,a,l){var A;const u=Q(o),{request:h,gt:f,parent:p}=Sk(u.serializer,ZR(a),l);u.connection.$o||delete h.parent;const y=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(C=>!!C.result);ee(y.length===1,64727);const x=(A=y[0].result)==null?void 0:A.aggregateFields;return Object.keys(x).reduce((C,b)=>(C[f[b]]=x[b],C),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function c6(t,e){const n=new sg(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).Ca.add(s),s.next()}(await bc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Q(i).Ca.delete(s)}(await bc(t),n))}}function u6(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?wk().encode(o):o,function(h,f){return new ZF(h,f)}(function(h,f){if(h instanceof Uint8Array)return P1(h,f);if(h instanceof ArrayBuffer)return P1(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Ca(e));t.asyncQueue.enqueueAndForget(async()=>{JF(await Nv(t),i,r)})}function d6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Q(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await Fc(t),e))}function SN(t,e){return function(r,i){return new e6(r,i)}(t,e)}function h6(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=Q(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(f,p,y,x,A){f=[...f],p=[...p],f.sort(y),p.sort(y);const C=f.length,b=p.length;let v=0,I=0;for(;v<b&&I<C;){const L=y(f[I],p[v]);L<0?A(f[I++]):L>0?x(p[v++]):(v++,I++)}for(;v<b;)x(p[v++]);for(;I<C;)A(f[I++])}(u,i,l5,h=>{a.push(o.addFieldIndex(l,h))},h=>{a.push(o.deleteFieldIndex(l,h))})).next(()=>V.waitFor(a)))}(await Fc(t),e))}function f6(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){Q(r).Fs.Vs=i}(await Fc(t),e))}function m6(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Q(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await Fc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firestore.googleapis.com",V1=!0;class O1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=V1}else this.host=e.host,this.ssl=e.ssl??V1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ok;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Uk)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(O.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xj;switch(r.type){case"firstParty":return new t5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=L1.get(n);r&&($("ComponentProvider","Removing Datastore"),L1.delete(n),r.terminate())}(this),Promise.resolve()}}function p6(t,e,n,r={}){var u;t=he(t,yh);const i=Ki(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(kp(`https://${a}`),l_("Firestore",!0)),s.host!==kN&&s.host!==a&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!wr(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Lt.MOCK_USER;else{h=DA(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new B(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Lt(p)}t._authCredentials=new Jj(new mR(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jt(this.firestore,e,this._query)}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Na(n,Oe._jsonSchema))return new Oe(e,r||null,new K(ce.fromString(n.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:It("string",Oe._jsonSchemaVersion),referencePath:It("string")};class hi extends jt{constructor(e,n,r){super(e,n,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new K(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function wh(t,e,...n){if(t=J(t),j_("collection","path",e),t instanceof yh){const r=ce.fromString(e,...n);return Eb(r),new hi(t,null,r)}{if(!(t instanceof Oe||t instanceof hi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Eb(r),new hi(t.firestore,null,r)}}function D8(t,e){if(t=he(t,yh),j_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(t,null,function(r){return new Xi(ce.emptyPath(),r)}(e))}function mr(t,e,...n){if(t=J(t),arguments.length===1&&(e=M_.newId()),j_("doc","path",e),t instanceof yh){const r=ce.fromString(e,...n);return bb(r),new Oe(t,null,new K(r))}{if(!(t instanceof Oe||t instanceof hi))throw new B(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return bb(r),new Oe(t.firestore,t instanceof hi?t.converter:null,new K(r))}}function L8(t,e){return t=J(t),e=J(e),(t instanceof Oe||t instanceof hi)&&(e instanceof Oe||e instanceof hi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function NN(t,e){return t=J(t),e=J(e),t instanceof jt&&e instanceof jt&&t.firestore===e.firestore&&dh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1="AsyncQueue";class j1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hv(this,"async_queue_retry"),this._c=()=>{const r=om();r&&$(M1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!go(e))throw e;$(M1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mt("INTERNAL UNHANDLED ERROR: ",F1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=gv.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&X(47125,{Pc:F1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function F1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class g6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=-1;class Me extends yh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new j1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j1(e),this._firestoreClient=void 0,await e}}}function O8(t,e,n){n||(n=Od);const r=zr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(wr(s,e))return i;throw new B(O.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new B(O.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Uk)throw new B(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ki(e.host)&&kp(e.host),r.initialize({options:e,instanceIdentifier:n})}function y6(t,e){const n=typeof t=="object"?t:th(),r=typeof t=="string"?t:e||Od,i=zr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=NA("firestore");s&&p6(i,...s)}return i}function st(t){if(t._terminated)throw new B(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CN(t),t._firestoreClient}function CN(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new B5(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new r6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function M8(t,e){xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return PN(t,lo.provider,{build:r=>new Rv(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function j8(t){xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();PN(t,lo.provider,{build:n=>new xN(n,e.cacheSizeBytes)})}function PN(t,e,n){if((t=he(t,Me))._firestoreClient||t._terminated)throw new B(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new B(O.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},CN(t)}function F8(t){if(t._initialized&&!t._terminated)throw new B(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ui.v())return Promise.resolve();const i=r+Hk;await ui.delete(i)}(lv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function U8(t){return function(n){const r=new Mt;return n.asyncQueue.enqueueAndForget(async()=>BF(await Nv(n),r)),r.promise}(st(t=he(t,Me)))}function B8(t){return i6(st(t=he(t,Me)))}function z8(t){return s6(st(t=he(t,Me)))}function $8(t){return pV(t.app,"firestore",t._databaseId.database),t._delete()}function U1(t,e){const n=st(t=he(t,Me)),r=new g6;return u6(n,t._databaseId,e,r),r}function w6(t,e){return d6(st(t=he(t,Me)),e).then(n=>n?new jt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class _6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(at.fromBase64String(e))}catch(n){throw new B(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Na(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:It("string",$n._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function q8(){return new Pa(L0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Na(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:It("string",fi._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Na(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ur(e.vectorValues);throw new B(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:It("string",Ur._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=/^__.*__$/;class x6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dc(e,this.data,n,this.fieldTransforms)}}class DN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class ag{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ag({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return up(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LN(this.Ac)&&v6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ca(e)}Cc(e,n,r,i=!1){return new ag({Ac:e,methodName:n,Dc:r,path:Ze.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function La(t){const e=t._freezeSettings(),n=Ca(t._databaseId);return new I6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lg(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Mv("Data must be an object, but it was:",o,r);const a=MN(r,o);let l,u;if(s.merge)l=new Rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=$d(e,f,n);if(!o.contains(p))throw new B(O.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FN(h,p)||h.push(p)}l=new Rn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new x6(new $t(a),l,u)}class _h extends Da{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}function VN(t,e,n){return new ag({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cv extends Da{_toFieldTransform(e){return new fh(e.path,new pc)}isEqual(e){return e instanceof Cv}}class Pv extends Da{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=VN(this,e,!0),r=this.vc.map(s=>Va(s,n)),i=new ga(r);return new fh(e.path,i)}isEqual(e){return e instanceof Pv&&wr(this.vc,e.vc)}}class Dv extends Da{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=VN(this,e,!0),r=this.vc.map(s=>Va(s,n)),i=new ya(r);return new fh(e.path,i)}isEqual(e){return e instanceof Dv&&wr(this.vc,e.vc)}}class Lv extends Da{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new gc(e.serializer,lk(e.serializer,this.Fc));return new fh(e.path,n)}isEqual(e){return e instanceof Lv&&this.Fc===e.Fc}}function Vv(t,e,n,r){const i=t.Cc(1,e,n);Mv("Data must be an object, but it was:",i,r);const s=[],o=$t.empty();yo(r,(l,u)=>{const h=cg(e,l,n);u=J(u);const f=i.yc(h);if(u instanceof _h)s.push(h);else{const p=Va(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Rn(s);return new DN(o,a,i.fieldTransforms)}function Ov(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[$d(e,r,n)],l=[i];if(s.length%2!=0)throw new B(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push($d(e,s[p])),l.push(s[p+1]);const u=[],h=$t.empty();for(let p=a.length-1;p>=0;--p)if(!FN(u,a[p])){const y=a[p];let x=l[p];x=J(x);const A=o.yc(y);if(x instanceof _h)u.push(y);else{const C=Va(x,A);C!=null&&(u.push(y),h.set(y,C))}}const f=new Rn(u);return new DN(h,f,o.fieldTransforms)}function ON(t,e,n,r=!1){return Va(n,t.Cc(r?4:3,e))}function Va(t,e){if(jN(t=J(t)))return Mv("Unsupported field value:",e,t),MN(t,e);if(t instanceof Da)return function(r,i){if(!LN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Va(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=J(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ce.fromDate(r);return{timestampValue:yc(i.serializer,s)}}if(r instanceof Ce){const s=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yc(i.serializer,s)}}if(r instanceof fi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:xk(i.serializer,r._byteString)};if(r instanceof Oe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ur)return function(o,a){return{mapValue:{fields:{[G_]:{stringValue:H_},[hc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Y_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Bp(r)}`)}(t,e)}function MN(t,e){const n={};return VR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(r,i)=>{const s=Va(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof fi||t instanceof $n||t instanceof Oe||t instanceof Da||t instanceof Ur)}function Mv(t,e,n){if(!jN(n)||!gR(n)){const r=Bp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function $d(t,e,n){if((e=J(e))instanceof Pa)return e._internalPath;if(typeof e=="string")return cg(t,e);throw up("Field path arguments must be of type string or ",t,!1,void 0,n)}const b6=new RegExp("[~\\*/\\[\\]]");function cg(t,e,n){if(e.search(b6)>=0)throw up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pa(...e.split("."))._internalPath}catch{throw up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function up(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new B(O.INVALID_ARGUMENT,a+t+l)}function FN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E6 extends qd{data(){return super.data()}}function ug(t,e){return typeof e=="string"?cg(t,e):e instanceof Pa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jv{}class vh extends jv{}function am(t,e,...n){let r=[];e instanceof jv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Uc).length,a=s.filter(l=>l instanceof xh).length;if(o>1||o>0&&a>0)throw new B(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class xh extends vh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new xh(e,n,r)}_apply(e){const n=this._parse(e);return zN(e._query,n),new jt(e.firestore,e.converter,G0(e._query,n))}_parse(e){const n=La(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){z1(f,h);const x=[];for(const A of f)x.push(B1(l,s,A));p={arrayValue:{values:x}}}else p=B1(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||z1(f,h),p=ON(a,o,f,h==="in"||h==="not-in");return pe.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lm(t,e,n){const r=e,i=ug("where",t);return xh._create(i,r,n)}class Uc extends jv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zN(o,l),o=G0(o,l)}(e._query,n),new jt(e.firestore,e.converter,G0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G8(...t){return t.forEach(e=>$N("or",e)),Uc._create("or",t)}function H8(...t){return t.forEach(e=>$N("and",e)),Uc._create("and",t)}class Fv extends vh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fd(s,o)}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Xi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function cm(t,e="asc"){const n=e,r=ug("orderBy",t);return Fv._create(r,n)}class dg extends vh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dg(e,n,r)}_apply(e){return new jt(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}}function vy(t){return yR("limit",t),dg._create("limit",t,"F")}function W8(t){return yR("limitToLast",t),dg._create("limitToLast",t,"L")}class hg extends vh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new hg(e,n,r)}_apply(e){const n=BN(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(i,s){return new Xi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function K8(...t){return hg._create("startAt",t,!0)}function T6(...t){return hg._create("startAfter",t,!1)}class fg extends vh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new fg(e,n,r)}_apply(e){const n=BN(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(i,s){return new Xi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function Q8(...t){return fg._create("endBefore",t,!1)}function Y8(...t){return fg._create("endAt",t,!0)}function BN(t,e,n,r){if(n[0]=J(n[0]),n[0]instanceof qd)return function(s,o,a,l,u){if(!l)throw new B(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Wl(s))if(f.field.isKeyField())h.push(ma(o,l.key));else{const p=l.data.field(f.field);if(Hp(p))throw new B(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=f.field.canonicalString();throw new B(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new oo(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=La(t.firestore);return function(o,a,l,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new B(O.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let x=0;x<h.length;x++){const A=h[x];if(p[x].field.isKeyField()){if(typeof A!="string")throw new B(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!K_(o)&&A.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);const C=o.path.child(ce.fromString(A));if(!K.isDocumentKey(C))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const b=new K(C);y.push(ma(a,b))}else{const C=ON(l,u,A);y.push(C)}}return new oo(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function B1(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new B(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K_(e)&&n.indexOf("/")!==-1)throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!K.isDocumentKey(r))throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ma(t,new K(r))}if(n instanceof Oe)return ma(t,n._key);throw new B(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bp(n)}.`)}function z1(t,e){if(!Array.isArray(t)||t.length===0)throw new B(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $N(t,e){if(!(e instanceof xh||e instanceof Uc))throw new B(O.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class qN{convertValue(e,n="none"){switch(io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[hc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ye(o.doubleValue));return new Ur(n)}convertGeoPoint(e){return new fi(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vd(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);ee(Ck(r),9688,{name:e});const i=new fa(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Uv extends qN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t){return new zd("sum",$d("sum",t))}function J8(t){return new zd("avg",$d("average",t))}function A6(){return new zd("count")}function Z8(t,e){var n,r;return t instanceof zd&&e instanceof zd&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function e$(t,e){return NN(t.query,e.query)&&wr(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="NOT SUPPORTED";class Us{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kn extends qd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ug("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Kn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function t$(t,e,n){if(Na(e,Kn._jsonSchema)){if(e.bundle===GN)throw new B(O.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ca(t._databaseId),i=SN(e.bundle,r),s=i.Wu(),o=new xv(i.getMetadata(),r);for(const h of s)o.Ga(h);const a=o.documents;if(a.length!==1)throw new B(O.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Xp(r,a[0].document),u=new K(ce.fromString(e.bundleName));return new Kn(t,new Uv(t),u,l,new Us(!1,!1),n||null)}}Kn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kn._jsonSchema={type:It("string",Kn._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class um extends Kn{data(e={}){return super.data(e)}}class Qn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Us(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new um(this._firestore,this._userDataWriter,r.key,r,new Us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new um(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new um(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Us(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:S6(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=M_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function n$(t,e,n){if(Na(e,Qn._jsonSchema)){if(e.bundle===GN)throw new B(O.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ca(t._databaseId),i=SN(e.bundle,r),s=i.Wu(),o=new xv(i.getMetadata(),r);for(const p of s)o.Ga(p);if(o.queries.length!==1)throw new B(O.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Zp(o.queries[0].bundledQuery),l=o.documents;let u=new ia;l.map(p=>{const y=Xp(r,p.document);u=u.add(y)});const h=Ia.fromInitialDocuments(a,u,le(),!1,!1),f=new jt(t,n||null,a);return new Qn(t,new Uv(t),f,h)}}function S6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function r$(t,e){return t instanceof Kn&&e instanceof Kn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qn&&e instanceof Qn&&t._firestore===e._firestore&&NN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){t=he(t,Oe);const e=he(t.firestore,Me);return TN(st(e),t._key).then(n=>Bv(e,t,n))}Qn._jsonSchemaVersion="firestore/querySnapshot/1.0",Qn._jsonSchema={type:It("string",Qn._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class vo extends qN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function i$(t){t=he(t,Oe);const e=he(t.firestore,Me),n=st(e),r=new vo(e);return o6(n,t._key).then(i=>new Kn(e,r,t._key,i,new Us(i!==null&&i.hasLocalMutations,!0),t.converter))}function s$(t){t=he(t,Oe);const e=he(t.firestore,Me);return TN(st(e),t._key,{source:"server"}).then(n=>Bv(e,t,n))}function iw(t){t=he(t,jt);const e=he(t.firestore,Me),n=st(e),r=new vo(e);return UN(t._query),AN(n,t._query).then(i=>new Qn(e,r,t,i))}function o$(t){t=he(t,jt);const e=he(t.firestore,Me),n=st(e),r=new vo(e);return a6(n,t._query).then(i=>new Qn(e,r,t,i))}function a$(t){t=he(t,jt);const e=he(t.firestore,Me),n=st(e),r=new vo(e);return AN(n,t._query,{source:"server"}).then(i=>new Qn(e,r,t,i))}function Ih(t,e,n){t=he(t,Oe);const r=he(t.firestore,Me),i=mg(t.converter,e,n);return bh(r,[lg(La(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,et.none())])}function l$(t,e,n,...r){t=he(t,Oe);const i=he(t.firestore,Me),s=La(i);let o;return o=typeof(e=J(e))=="string"||e instanceof Pa?Ov(s,"updateDoc",t._key,e,n,r):Vv(s,"updateDoc",t._key,e),bh(i,[o.toMutation(t._key,et.exists(!0))])}function c$(t){return bh(he(t.firestore,Me),[new Lc(t._key,et.none())])}function u$(t,e){const n=he(t.firestore,Me),r=mr(t),i=mg(t.converter,e);return bh(n,[lg(La(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,et.exists(!1))]).then(()=>r)}function Ql(t,...e){var l,u,h;t=J(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Kl(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Kl(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,a;if(t instanceof Oe)o=he(t.firestore,Me),a=Pc(t._key.path),s={next:f=>{e[r]&&e[r](Bv(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=he(t,jt);o=he(f.firestore,Me),a=f._query;const p=new vo(o);s={next:y=>{e[r]&&e[r](new Qn(o,p,f,y))},error:e[r+1],complete:e[r+2]},UN(t._query)}return function(p,y,x,A){const C=new sg(A),b=new vv(y,C,x);return p.asyncQueue.enqueueAndForget(async()=>yv(await bc(p),b)),()=>{C.Nu(),p.asyncQueue.enqueueAndForget(async()=>wv(await bc(p),b))}}(st(o),a,i,s)}function d$(t,e,...n){const r=J(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const f of h){if(!(f in l)){u.error=`snapshotJson missing required field: ${f}`;break}const p=l[f];if(typeof p!="string"){u.error=`snapshotJson field '${f}' must be a string.`;break}if(p.length===0){u.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?u.bundle=p:f==="bundleName"?u.bundleName=p:f==="bundleSource"&&(u.bundleSource=p)}return u}(e);if(i.error)throw new B(O.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||Kl(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Kl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let x,A=!1;return U1(u,h.bundle).then(()=>w6(u,h.bundleName)).then(b=>{b&&!A&&(y&&b.withConverter(y),x=Ql(b,f||{},p))}).catch(b=>(p.error&&p.error(b),()=>{})),()=>{A||(A=!0,x&&x())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Kl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let x,A=!1;return U1(u,h.bundle).then(()=>{if(!A){const b=new Oe(u,y||null,K.fromPath(h.bundleName));x=Ql(b,f||{},p)}}).catch(b=>(p.error&&p.error(b),()=>{})),()=>{A||(A=!0,x&&x())}}(r,i,s,a,n[o])}throw new B(O.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function h$(t,e){return c6(st(t=he(t,Me)),Kl(e)?e:{next:e})}function bh(t,e){return function(r,i){const s=new Mt;return r.asyncQueue.enqueueAndForget(async()=>MF(await Nv(r),i,s)),s.promise}(st(t),e)}function Bv(t,e,n){const r=n.docs.get(e._key),i=new vo(t);return new Kn(t,i,e._key,r,new Us(n.hasPendingWrites,n.fromCache),e.converter)}function f$(t){return R6(t,{count:A6()})}function R6(t,e){const n=he(t.firestore,Me),r=st(n),i=LR(e,(s,o)=>new pk(o,s.aggregateType,s._internalFieldPath));return l6(r,t._query,i).then(s=>function(a,l,u){const h=new vo(a);return new _6(l,h,u)}(n,t,s))}class k6{constructor(e){this.kind="memory",this._onlineComponentProvider=lo.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new Sv(void 0)}}toJSON(){return{kind:this.kind}}}class N6{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=V6(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class C6{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ic.provider}toJSON(){return{kind:this.kind}}}class P6{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Sv(e)}}toJSON(){return{kind:this.kind}}}function m$(){return new C6}function p$(t){return new P6(t==null?void 0:t.cacheSizeBytes)}function g$(t){return new k6(t)}function y$(t){return new N6(t)}class D6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lo.provider,this._offlineComponentProvider={build:n=>new Rv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class L6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lo.provider,this._offlineComponentProvider={build:n=>new xN(n,e==null?void 0:e.cacheSizeBytes)}}}function V6(t){return new D6(t==null?void 0:t.forceOwnership)}function w$(){return new L6}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=La(e)}set(e,n,r){this._verifyNotCommitted();const i=Bs(e,this._firestore),s=mg(i.converter,n,r),o=lg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,et.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Bs(e,this._firestore);let o;return o=typeof(n=J(n))=="string"||n instanceof Pa?Ov(this._dataReader,"WriteBatch.update",s._key,n,r,i):Vv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,et.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Bs(e,this._firestore);return this._mutations=this._mutations.concat(new Lc(n._key,et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bs(t,e){if((t=J(t)).firestore!==e)throw new B(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=La(e)}get(e){const n=Bs(e,this._firestore),r=new Uv(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return X(24041);const s=i[0];if(s.isFoundDocument())return new qd(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new qd(this._firestore,r,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,r){const i=Bs(e,this._firestore),s=mg(i.converter,n,r),o=lg(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Bs(e,this._firestore);let o;return o=typeof(n=J(n))=="string"||n instanceof Pa?Ov(this._dataReader,"Transaction.update",s._key,n,r,i):Vv(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Bs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6 extends j6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Bs(e,this._firestore),r=new vo(this._firestore);return super.get(e).then(i=>new Kn(this._firestore,r,n._key,i._document,new Us(!1,!1),n.converter))}}function _$(t,e,n){t=he(t,Me);const r={...O6,...n};return function(s){if(s.maxAttempts<1)throw new B(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Mt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await EN(s);new n6(s.asyncQueue,u,a,o,l).ju()}),l.promise}(st(t),i=>e(new F6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(){return new _h("deleteField")}function x$(){return new Cv("serverTimestamp")}function I$(...t){return new Pv("arrayUnion",t)}function b$(...t){return new Dv("arrayRemove",t)}function E$(t){return new Lv("increment",t)}function T$(t){return new Ur(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t){return st(t=he(t,Me)),new M6(t,e=>bh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t,e){const n=st(t=he(t,Me));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return xr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(h){throw new B(O.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=q1(l,"collectionGroup"),h=[];if(Array.isArray(l.fields))for(const f of l.fields){const p=cg("setIndexConfiguration",q1(f,"fieldPath"));f.arrayConfig==="CONTAINS"?h.push(new na(p,2)):f.order==="ASCENDING"?h.push(new na(p,0)):f.order==="DESCENDING"&&h.push(new na(p,1))}a.push(new oc(oc.UNKNOWN_ID,u,h,ac.empty()))}return a}(e);return h6(n,r)}function q1(t,e){if(typeof t[e]!="string")throw new B(O.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function R$(t){var i;t=he(t,Me);const e=G1.get(t);if(e)return e;if(((i=st(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new U6(t);return G1.set(t,r),r}function k$(t){HN(t,!0)}function N$(t){HN(t,!1)}function C$(t){m6(st(t._firestore)).then(e=>$("deleting all persistent cache indexes succeeded")).catch(e=>xr("deleting all persistent cache indexes failed",e))}function HN(t,e){f6(st(t._firestore),e).then(n=>$(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>xr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const G1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P$(t){var r;const e=st(he(t.firestore,Me)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:Jp(n,nn(t._query)).ft}function D$(t,e){var s;const n=LR(e,(o,a)=>new pk(a,o.aggregateType,o._internalFieldPath)),r=st(he(t.firestore,Me)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:Sk(i,ZR(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return zv.instance.onExistenceFilterMismatch(e)}}class zv{constructor(){this.Mc=new Map}static get instance(){return Sf||(Sf=new zv,function(n){if(id)throw new Error("a TestingHooksSpi instance is already set");id=n}(Sf)),Sf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let Sf=null;(function(e,n=!0){(function(i){Cc=i})(Sa),_r(new Xn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Me(new Zj(r.getProvider("auth-internal")),new n5(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),en(xb,Ib,e),en(xb,Ib,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="firebasestorage.googleapis.com",KN="storageBucket",B6=2*60*1e3,z6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends tr{constructor(e,n,r=0){super(xy(e),`Firebase Storage: ${n} (${xy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function xy(t){return"storage/"+t}function $v(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(lt.UNKNOWN,t)}function $6(t){return new ut(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function q6(t){return new ut(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function G6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(lt.UNAUTHENTICATED,t)}function H6(){return new ut(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W6(t){return new ut(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function K6(){return new ut(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q6(){return new ut(lt.CANCELED,"User canceled the upload/download.")}function Y6(t){return new ut(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function X6(t){return new ut(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function J6(){return new ut(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KN+"' property when initializing the app?")}function Z6(){return new ut(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eU(){return new ut(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tU(t){return new ut(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sw(t){return new ut(lt.INVALID_ARGUMENT,t)}function QN(){return new ut(lt.APP_DELETED,"The Firebase app was deleted.")}function nU(t){return new ut(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function od(t,e){return new ut(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Tu(t){throw new ut(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gn.makeFromUrl(e,n)}catch{return new Gn(e,"")}if(r.path==="")return r;throw X6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(L){L.path_=decodeURIComponent(L.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),x={bucket:1,path:3},A=n===WN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",b=new RegExp(`^https?://${A}/${i}/${C}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:y,indices:x,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let L=0;L<I.length;L++){const z=I[L],q=z.regex.exec(e);if(q){const E=q[z.indices.bucket];let _=q[z.indices.path];_||(_=""),r=new Gn(E,_),z.postModify(r);break}}if(r==null)throw Y6(e);return r}}class rU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...C){u||(u=!0,e.apply(null,C))}function f(C){i=setTimeout(()=>{i=null,t(y,l())},C)}function p(){s&&clearTimeout(s)}function y(C,...b){if(u){p();return}if(C){p(),h.call(null,C,...b);return}if(l()||o){p(),h.call(null,C,...b);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,f(I)}let x=!1;function A(C){x||(x=!0,p(),!u&&(i!==null?(C||(a=2),clearTimeout(i),f(0)):C||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}function sU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(t){return t!==void 0}function aU(t){return typeof t=="object"&&!Array.isArray(t)}function qv(t){return typeof t=="string"||t instanceof String}function H1(t){return Gv()&&t instanceof Blob}function Gv(){return typeof Blob<"u"}function W1(t,e,n,r){if(r<e)throw sw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw sw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var sa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(sa||(sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,A)=>{this.resolve_=x,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Rf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===sa.NO_ERROR,l=s.getStatus();if(!a||lU(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===sa.ABORT;r(!1,new Rf(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Rf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());oU(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=$v();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?QN():Q6();o(l)}else{const l=K6();o(l)}};this.canceled_?n(!1,new Rf(!1,null,!0)):this.backoffId_=iU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function uU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function dU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mU(t,e,n,r,i,s,o=!0,a=!1){const l=YN(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return hU(h,e),uU(h,n),dU(h,s),fU(h,r),new cU(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gU(...t){const e=pU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Gv())return new Blob(t);throw new ut(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){if(typeof atob>"u")throw tU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Iy{constructor(e,n){this.data=e,this.contentType=n||null}}function _U(t,e){switch(t){case ai.RAW:return new Iy(XN(e));case ai.BASE64:case ai.BASE64URL:return new Iy(JN(t,e));case ai.DATA_URL:return new Iy(xU(e),IU(e))}throw $v()}function XN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function vU(t){let e;try{e=decodeURIComponent(t)}catch{throw od(ai.DATA_URL,"Malformed data URL.")}return XN(e)}function JN(t,e){switch(t){case ai.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw od(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw od(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wU(e)}catch(i){throw i.message.includes("polyfill")?i:od(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ZN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw od(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=bU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xU(t){const e=new ZN(t);return e.base64?JN(ai.BASE64,e.rest):vU(e.rest)}function IU(t){return new ZN(t).contentType}function bU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){let r=0,i="";H1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(H1(this.data_)){const r=this.data_,i=yU(r,e,n);return i===null?null:new Os(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Os(r,!0)}}static getBlob(...e){if(Gv()){const n=e.map(r=>r instanceof Os?r.data_:r);return new Os(gU.apply(null,n))}else{const n=e.map(o=>qv(o)?_U(ai.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Os(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){let e;try{e=JSON.parse(t)}catch{return null}return aU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function TU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e){return e}class dn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||AU}}let kf=null;function SU(t){return!qv(t)||t.length<2?t:tC(t)}function nC(){if(kf)return kf;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,o){return SU(o)}const n=new dn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new dn("size");return i.xform=r,t.push(i),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),kf=t,kf}function RU(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Gn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function kU(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return RU(r,t),r}function rC(t,e,n){const r=eC(e);return r===null?null:kU(t,r,n)}function NU(t,e,n,r){const i=eC(e);if(i===null||!qv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),y=Hv(p,n,r),x=YN({alt:"media",token:u});return y+x})[0]}function CU(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class iC{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){if(!t)throw $v()}function PU(t,e){function n(r,i){const s=rC(t,i,e);return sC(s!==null),s}return n}function DU(t,e){function n(r,i){const s=rC(t,i,e);return sC(s!==null),NU(s,i,t.host,t._protocol)}return n}function oC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=H6():i=G6():n.getStatus()===402?i=q6(t.bucket):n.getStatus()===403?i=W6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function LU(t){const e=oC(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=$6(t.path)),s.serverResponse=i.serverResponse,s}return n}function VU(t,e,n){const r=e.fullServerUrl(),i=Hv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new iC(i,s,DU(t,n),o);return a.errorHandler=LU(e),a}function OU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function MU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=OU(null,e)),r}function jU(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let I="";for(let L=0;L<2;L++)I=I+Math.random().toString().slice(2);return I}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=MU(e,r,i),h=CU(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",y=Os.getBlob(f,r,p);if(y===null)throw Z6();const x={name:u.fullPath},A=Hv(s,t.host,t._protocol),C="POST",b=t.maxUploadRetryTime,v=new iC(A,C,PU(t,n),b);return v.urlParams=x,v.headers=o,v.body=y.uploadData(),v.errorHandler=oC(e),v}class FU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Tu("cannot .send() more than once");if(Ki(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UU extends FU{initXhr(){this.xhr_.responseType="text"}}function aC(){return new UU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n){this._service=e,n instanceof Gn?this._location=n:this._location=Gn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ba(e,n)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tC(this._location.path)}get storage(){return this._service}get parent(){const e=EU(this._location.path);if(e===null)return null;const n=new Gn(this._location.bucket,e);return new ba(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw nU(e)}}function BU(t,e,n){t._throwIfRoot("uploadBytes");const r=jU(t.storage,t._location,nC(),new Os(e,!0),n);return t.storage.makeRequestWithTokens(r,aC).then(i=>({metadata:i,ref:t}))}function zU(t){t._throwIfRoot("getDownloadURL");const e=VU(t.storage,t._location,nC());return t.storage.makeRequestWithTokens(e,aC).then(n=>{if(n===null)throw eU();return n})}function $U(t,e){const n=TU(t._location.path,e),r=new Gn(t._location.bucket,n);return new ba(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){return/^[A-Za-z]+:\/\//.test(t)}function GU(t,e){return new ba(t,e)}function lC(t,e){if(t instanceof Wv){const n=t;if(n._bucket==null)throw J6();const r=new ba(n,n._bucket);return e!=null?lC(r,e):r}else return e!==void 0?$U(t,e):t}function HU(t,e){if(e&&qU(e)){if(t instanceof Wv)return GU(t,e);throw sw("To use ref(service, url), the first argument must be a Storage instance.")}else return lC(t,e)}function K1(t,e){const n=e==null?void 0:e[KN];return n==null?null:Gn.makeFromBucketSpec(n,t)}function WU(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ki(e);i&&(kp(`https://${t.host}/b`),l_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:DA(s,t.app.options.projectId))}class Wv{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=WN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B6,this._maxUploadRetryTime=z6,this._requests=new Set,i!=null?this._bucket=Gn.makeFromBucketSpec(i,this._host):this._bucket=K1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=K1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ba(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rU(QN());{const o=mU(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Q1="@firebase/storage",Y1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="storage";function Gd(t,e,n){return t=J(t),BU(t,e,n)}function Hd(t){return t=J(t),zU(t)}function Wd(t,e){return t=J(t),HU(t,e)}function KU(t=th(),e){t=J(t);const r=zr(t,cC).getImmediate({identifier:e}),i=NA("storage");return i&&QU(r,...i),r}function QU(t,e,n,r={}){WU(t,e,n,r)}function YU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Wv(n,r,i,e,Sa)}function XU(){_r(new Xn(cC,YU,"PUBLIC").setMultipleInstances(!0)),en(Q1,Y1,""),en(Q1,Y1,"esm2020")}XU();var uC="5.0.1";function dp(t,e){return new Promise(n=>setTimeout(n,t,e))}function JU(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function ZU(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):dp(Math.min(t,e))}function dC(t){return!!t&&typeof t.then=="function"}function X1(t,e){try{const n=t();dC(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function J1(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await JU())}return r}function Kd(t){return t.then(void 0,()=>{}),t}function e9(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function t9(t,e){return!e9(t,e)}function Kv(t){return parseInt(t)}function Dr(t){return parseFloat(t)}function Ri(t,e){return typeof t=="number"&&isNaN(t)?e:t}function yn(t){return t.reduce((e,n)=>e+(n?1:0),0)}function hC(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function n9(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,h)=>{o[u]=o[u]||[],o[u].push(h)};for(;;){const u=a.exec(i[2]);if(!u)break;const h=u[0];switch(h[0]){case".":l("class",h.slice(1));break;case"#":l("id",h.slice(1));break;case"[":{const f=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(h);if(f)l(f[1],(n=(e=f[4])!==null&&e!==void 0?e:f[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function r9(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function Es(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s+u,p+=y>>>16,y&=65535,p+=i+l,f+=p>>>16,p&=65535,f+=r+a,h+=f>>>16,f&=65535,h+=n+o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function lr(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s*u,p+=y>>>16,y&=65535,p+=i*u,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,f+=s*a,h+=f>>>16,f&=65535,h+=n*u+r*l+i*a+s*o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function yl(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function Fn(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function Qe(t,e){t[0]^=e[0],t[1]^=e[1]}const i9=[4283543511,3981806797],s9=[3301882366,444984403];function Z1(t){const e=[0,t[0]>>>1];Qe(t,e),lr(t,i9),e[1]=t[0]>>>1,Qe(t,e),lr(t,s9),e[1]=t[0]>>>1,Qe(t,e)}const Nf=[2277735313,289559509],Cf=[1291169091,658871167],eE=[0,5],o9=[0,1390208809],a9=[0,944331445];function l9(t,e){const n=r9(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let h;for(h=0;h<s;h=h+16)l[0]=n[h+4]|n[h+5]<<8|n[h+6]<<16|n[h+7]<<24,l[1]=n[h]|n[h+1]<<8|n[h+2]<<16|n[h+3]<<24,u[0]=n[h+12]|n[h+13]<<8|n[h+14]<<16|n[h+15]<<24,u[1]=n[h+8]|n[h+9]<<8|n[h+10]<<16|n[h+11]<<24,lr(l,Nf),yl(l,31),lr(l,Cf),Qe(o,l),yl(o,27),Es(o,a),lr(o,eE),Es(o,o9),lr(u,Cf),yl(u,33),lr(u,Nf),Qe(a,u),yl(a,31),Es(a,o),lr(a,eE),Es(a,a9);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const f=[0,0];switch(i){case 15:f[1]=n[h+14],Fn(f,48),Qe(u,f);case 14:f[1]=n[h+13],Fn(f,40),Qe(u,f);case 13:f[1]=n[h+12],Fn(f,32),Qe(u,f);case 12:f[1]=n[h+11],Fn(f,24),Qe(u,f);case 11:f[1]=n[h+10],Fn(f,16),Qe(u,f);case 10:f[1]=n[h+9],Fn(f,8),Qe(u,f);case 9:f[1]=n[h+8],Qe(u,f),lr(u,Cf),yl(u,33),lr(u,Nf),Qe(a,u);case 8:f[1]=n[h+7],Fn(f,56),Qe(l,f);case 7:f[1]=n[h+6],Fn(f,48),Qe(l,f);case 6:f[1]=n[h+5],Fn(f,40),Qe(l,f);case 5:f[1]=n[h+4],Fn(f,32),Qe(l,f);case 4:f[1]=n[h+3],Fn(f,24),Qe(l,f);case 3:f[1]=n[h+2],Fn(f,16),Qe(l,f);case 2:f[1]=n[h+1],Fn(f,8),Qe(l,f);case 1:f[1]=n[h],Qe(l,f),lr(l,Nf),yl(l,31),lr(l,Cf),Qe(o,l)}return Qe(o,r),Qe(a,r),Es(o,a),Es(a,o),Z1(o),Z1(a),Es(o,a),Es(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function c9(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function u9(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function d9(t){return typeof t!="function"}function h9(t,e){const n=Kd(new Promise(r=>{const i=Date.now();X1(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(d9(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();X1(a,(...h)=>{const f=o+Date.now()-u;if(!h[0])return l({error:h[1],duration:f});l({value:h[1],duration:f})})}))})}));return function(){return n.then(i=>i())}}function f9(t,e,n,r){const i=Object.keys(t).filter(o=>t9(n,o)),s=Kd(J1(i,o=>h9(t[o],e),r));return async function(){const a=await s,l=await J1(a,f=>Kd(f()),r),u=await Promise.all(l),h={};for(let f=0;f<i.length;++f)h[i[f]]=u[f];return h}}function fC(){const t=window,e=navigator;return yn(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function m9(){const t=window,e=navigator;return yn(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!fC()}function Eh(){const t=window,e=navigator;return yn(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function $r(){const t=window,e=navigator;return yn(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function Qv(){const t=window,{HTMLElement:e,Document:n}=t;return yn(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function Th(){const t=window;return u9(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function mC(){var t,e;const n=window;return yn(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function p9(){const t=window;return yn([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function g9(){const t=window,{URLPattern:e}=t;return yn(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function y9(){const t=window;return yn(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function Ah(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return yn([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function w9(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return yn(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function _9(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function v9(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function Yv(){const t=Eh(),e=mC(),n=window,r=navigator,i="connection";return t?yn([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?yn(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function x9(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return yn(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function I9(){return T9()?-4:b9()}function b9(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(E9())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=A9(i),u=Kd(a.then(h=>S9(h.getChannelData(0).subarray(n)),h=>{if(h.name==="timeout"||h.name==="suspended")return-3;throw h}));return()=>(l(),u)}function E9(){return $r()&&!Qv()&&!y9()}function T9(){return $r()&&Ah()&&Th()||Eh()&&x9()&&g9()}function A9(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,h=0,f=0;t.oncomplete=x=>a(x.renderedBuffer);const p=()=>{setTimeout(()=>l(tE("timeout")),Math.min(500,f+5e3-Date.now()))},y=()=>{try{const x=t.startRendering();switch(dC(x)&&Kd(x),t.state){case"running":f=Date.now(),u&&p();break;case"suspended":document.hidden||h++,u&&h>=3?l(tE("suspended")):setTimeout(y,500);break}}catch(x){l(x)}};y(),s=()=>{u||(u=!0,f>0&&p())}}),s]}function S9(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function tE(t){const e=new Error(t);return e.name=t,e}async function pC(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await dp(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let h=!1;const f=()=>{h=!0,l()},p=A=>{h=!0,u(A)};a.onload=f,a.onerror=p;const{style:y}=a;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const x=()=>{var A,C;h||(((C=(A=a.contentWindow)===null||A===void 0?void 0:A.document)===null||C===void 0?void 0:C.readyState)==="complete"?f():setTimeout(x,10))};x()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await dp(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function R9(t){const[e,n]=n9(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?k9(r.style,s):r.setAttribute(i,s)}return r}function k9(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function N9(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const C9="mmMwWLliI0O&1",P9="48px",wl=["monospace","sans-serif","serif"],nE=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function D9(){return pC(async(t,{document:e})=>{const n=e.body;n.style.fontSize=P9;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=y=>{const x=e.createElement("span"),{style:A}=x;return A.position="absolute",A.top="0",A.left="0",A.fontFamily=y,x.textContent=C9,r.appendChild(x),x},a=(y,x)=>o(`'${y}',${x}`),l=()=>wl.map(o),u=()=>{const y={};for(const x of nE)y[x]=wl.map(A=>a(x,A));return y},h=y=>wl.some((x,A)=>y[A].offsetWidth!==i[x]||y[A].offsetHeight!==s[x]),f=l(),p=u();n.appendChild(r);for(let y=0;y<wl.length;y++)i[wl[y]]=f[y].offsetWidth,s[wl[y]]=f[y].offsetHeight;return nE.filter(y=>h(p[y]))})}function L9(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function V9(){return O9($9())}function O9(t){let e=!1,n,r;const[i,s]=M9();return j9(i,s)?(e=F9(s),t?n=r="skipped":[n,r]=U9(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function M9(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function j9(t,e){return!!(e&&t.toDataURL)}function F9(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function U9(t,e){B9(t,e);const n=by(t),r=by(t);return n!==r?["unstable","unstable"]:(z9(t,e),[by(t),n])}function B9(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function z9(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function by(t){return t.toDataURL()}function $9(){return $r()&&Ah()&&Th()}function q9(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=Kv(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function G9(){return navigator.oscpu}function H9(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))Eh()&&p9()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function W9(){return window.screen.colorDepth}function K9(){return Ri(Dr(navigator.deviceMemory),void 0)}function Q9(){if(!($r()&&Ah()&&Th()))return Y9()}function Y9(){const t=screen,e=r=>Ri(Kv(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const X9=2500,J9=10;let dm,Ey;function Z9(){if(Ey!==void 0)return;const t=()=>{const e=ow();aw(e)?Ey=setTimeout(t,X9):(dm=e,Ey=void 0)};t()}function eB(){return Z9(),async()=>{let t=ow();if(aw(t)){if(dm)return[...dm];_9()&&(await v9(),t=ow())}return aw(t)||(dm=t),t}}function tB(){if($r()&&Ah()&&Th())return()=>Promise.resolve(void 0);const t=eB();return async()=>{const e=await t(),n=r=>r===null?null:hC(r,J9);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function ow(){const t=screen;return[Ri(Dr(t.availTop),null),Ri(Dr(t.width)-Dr(t.availWidth)-Ri(Dr(t.availLeft),0),null),Ri(Dr(t.height)-Dr(t.availHeight)-Ri(Dr(t.availTop),0),null),Ri(Dr(t.availLeft),null)]}function aw(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function nB(){return Ri(Kv(navigator.hardwareConcurrency),void 0)}function rB(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-iB();return`UTC${n>=0?"+":""}${n}`}function iB(){const t=new Date().getFullYear();return Math.max(Dr(new Date(t,0,1).getTimezoneOffset()),Dr(new Date(t,6,1).getTimezoneOffset()))}function sB(){try{return!!window.sessionStorage}catch{return!0}}function oB(){try{return!!window.localStorage}catch{return!0}}function aB(){if(!(fC()||m9()))try{return!!window.indexedDB}catch{return!0}}function lB(){return!!window.openDatabase}function cB(){return navigator.cpuClass}function uB(){const{platform:t}=navigator;return t==="MacIntel"&&$r()&&!Qv()?w9()?"iPad":"iPhone":t}function dB(){return navigator.vendor||""}function hB(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function fB(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function mB(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function pB({debug:t}={}){if(!gB())return;const e=mB(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await yB(r);t&&wB(e,i);const s=n.filter(o=>{const a=e[o];return yn(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function gB(){return $r()||Yv()}async function yB(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};rE(r);for(let o=0;o<t.length;++o){const a=R9(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");rE(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await dp(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function rE(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function wB(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function _B(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function vB(){if(iE("inverted"))return!0;if(iE("none"))return!1}function iE(t){return matchMedia(`(inverted-colors: ${t})`).matches}function xB(){if(sE("active"))return!0;if(sE("none"))return!1}function sE(t){return matchMedia(`(forced-colors: ${t})`).matches}const IB=100;function bB(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=IB;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function EB(){if(_l("no-preference"))return 0;if(_l("high")||_l("more"))return 1;if(_l("low")||_l("less"))return-1;if(_l("forced"))return 10}function _l(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function TB(){if(oE("reduce"))return!0;if(oE("no-preference"))return!1}function oE(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function AB(){if(aE("reduce"))return!0;if(aE("no-preference"))return!1}function aE(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function SB(){if(lE("high"))return!0;if(lE("standard"))return!1}function lE(t){return matchMedia(`(dynamic-range: ${t})`).matches}const Ae=Math,hn=()=>0;function RB(){const t=Ae.acos||hn,e=Ae.acosh||hn,n=Ae.asin||hn,r=Ae.asinh||hn,i=Ae.atanh||hn,s=Ae.atan||hn,o=Ae.sin||hn,a=Ae.sinh||hn,l=Ae.cos||hn,u=Ae.cosh||hn,h=Ae.tan||hn,f=Ae.tanh||hn,p=Ae.exp||hn,y=Ae.expm1||hn,x=Ae.log1p||hn,A=_=>Ae.pow(Ae.PI,_),C=_=>Ae.log(_+Ae.sqrt(_*_-1)),b=_=>Ae.log(_+Ae.sqrt(_*_+1)),v=_=>Ae.log((1+_)/(1-_))/2,I=_=>Ae.exp(_)-1/Ae.exp(_)/2,L=_=>(Ae.exp(_)+1/Ae.exp(_))/2,z=_=>Ae.exp(_)-1,q=_=>(Ae.exp(2*_)-1)/(Ae.exp(2*_)+1),E=_=>Ae.log(1+_);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:C(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:b(1),atanh:i(.5),atanhPf:v(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:I(1),cos:l(10.000000000123),cosh:u(1),coshPf:L(1),tan:h(-1e300),tanh:f(1),tanhPf:q(1),exp:p(1),expm1:y(1),expm1Pf:z(1),log1p:x(10),log1pPf:E(10),powPI:A(-100)}}const kB="mmMwWLliI0fiflO&1",Ty={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function NB(){return CB((t,e)=>{const n={},r={};for(const i of Object.keys(Ty)){const[s={},o=kB]=Ty[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(Ty))r[i]=n[i].getBoundingClientRect().width;return r})}function CB(t,e=4e3){return pC((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",Eh()?s.style.zoom=`${1/r.devicePixelRatio}`:$r()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function PB(){return navigator.pdfViewerEnabled}function DB(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function LB(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(VB())return-3;try{return t.canMakePayments()?1:0}catch(e){return OB(e)}}const VB=N9;function OB(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function MB(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const gC=-1,yC=-2,jB=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),FB=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),UB=["FRAGMENT_SHADER","VERTEX_SHADER"],BB=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],wC="WEBGL_debug_renderer_info",zB="WEBGL_polygon_mode";function $B({cache:t}){var e,n,r,i,s,o;const a=_C(t);if(!a)return gC;if(!xC(a))return yC;const l=vC()?null:a.getExtension(wC);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function qB({cache:t}){const e=_C(t);if(!e)return gC;if(!xC(e))return yC;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const h of Object.keys(r))s.push(`${h}=${r[h]}`);const u=cE(e);for(const h of u){const f=e[h];o.push(`${h}=${f}${jB.has(f)?`=${e.getParameter(f)}`:""}`)}if(n)for(const h of n){if(h===wC&&vC()||h===zB&&WB())continue;const f=e.getExtension(h);if(!f){i.push(h);continue}for(const p of cE(f)){const y=f[p];a.push(`${p}=${y}${FB.has(y)?`=${e.getParameter(y)}`:""}`)}}for(const h of UB)for(const f of BB){const p=GB(e,h,f);l.push(`${h}.${f}=${p.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function _C(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function GB(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function cE(t){return Object.keys(t.__proto__).filter(HB)}function HB(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function vC(){return mC()}function WB(){return Eh()||$r()}function xC(t){return typeof t.getParameter=="function"}function KB(){if(!(Yv()||$r()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function QB(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const YB={fonts:D9,domBlockers:pB,fontPreferences:NB,audio:I9,screenFrame:tB,canvas:V9,osCpu:G9,languages:H9,colorDepth:W9,deviceMemory:K9,screenResolution:Q9,hardwareConcurrency:nB,timezone:rB,sessionStorage:sB,localStorage:oB,indexedDB:aB,openDatabase:lB,cpuClass:cB,platform:uB,plugins:L9,touchSupport:q9,vendor:dB,vendorFlavors:hB,cookiesEnabled:fB,colorGamut:_B,invertedColors:vB,forcedColors:xB,monochrome:bB,contrast:EB,reducedMotion:TB,reducedTransparency:AB,hdr:SB,math:RB,pdfViewerEnabled:PB,architecture:DB,applePay:LB,privateClickMeasurement:MB,audioBaseLatency:KB,dateTimeLocale:QB,webGlBasics:$B,webGlExtensions:qB};function XB(t){return f9(YB,t,[])}const JB="$ if upgrade to Pro: https://fpjs.dev/pro";function ZB(t){const e=ez(t),n=tz(e);return{score:e,comment:JB.replace(/\$/g,`${n}`)}}function ez(t){if(Yv())return .4;if($r())return Qv()&&!(Ah()&&Th())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function tz(t){return hC(.99+.01*t,1e-4)}function nz(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function IC(t){return JSON.stringify(t,(e,n)=>n instanceof Error?c9(n):n,2)}function bC(t){return l9(nz(t))}function rz(t){let e;const n=ZB(t);return{get visitorId(){return e===void 0&&(e=bC(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:uC}}function iz(t=50){return ZU(t,t*2)}function sz(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=rz(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${IC(s)}
\`\`\``),o}}}function oz(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${uC}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function az(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&oz();const{delayFallback:n,debug:r}=t;await iz(n);const i=XB({cache:{},debug:r});return sz(i,r)}var lz={load:az,hashComponents:bC,componentsToDebugString:IC};const cz={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},Bc=zA(cz),EC=GO(Bc),Ss=Qj(Bc),Nn=y6(Bc),Ec=KU(Bc);XO(Bc,{backend:new Pp});async function TC(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function uz(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function AC(){try{return(await u4(Ss)).user}catch(t){throw console.error("Error signing in:",t),t}}function SC(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let Ay=null,zn=null;async function Xv(){return zn||(Ay||(Ay=lz.load().then(t=>t.get()).then(t=>(zn=t.visitorId,localStorage.setItem("moomhe_fingerprint",zn),console.log("Browser fingerprint generated:",zn),zn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),zn=e,e})),Ay)}function dz(){if(zn)return zn;const t=localStorage.getItem("moomhe_fingerprint");return t?(zn=t,t):null}async function lw(){if(zn)return zn;const t=localStorage.getItem("moomhe_fingerprint");return t?(zn=t,t):await Xv()}Xv();async function Bo(t){const e=SC(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:hz(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await Ih(mr(Nn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function hz(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function uo(t,e=1920,n=1080,r=.8,i=!1){if(i||t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const a=await(await fetch(t)).blob();if(a.type==="image/jpeg"||a.type==="image/png"||a.type==="image/webp"){console.log("File already in displayable format, skipping HEIC conversion");const f=await new Promise(p=>{const y=new FileReader;y.onload=()=>p(y.result),y.readAsDataURL(a)});return await uo(f,e,n,r)}const{heicTo:l}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]),u=await l({blob:a,type:"image/jpeg",quality:r}),h=await new Promise(f=>{const p=new FileReader;p.onload=()=>f(p.result),p.readAsDataURL(u)});return console.log("HEIC converted to JPEG successfully"),await uo(h,e,n,r)}catch(o){throw console.error("Error converting HEIC image:",o),new Error("Failed to convert HEIC image to JPEG")}return new Promise((o,a)=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>{try{const u=document.createElement("canvas"),h=u.getContext("2d");let{width:f,height:p}=l;if(f<=e&&p<=n)u.width=f,u.height=p;else{const y=e/f,x=n/p,A=Math.min(y,x);f=Math.floor(f*A),p=Math.floor(p*A),u.width=f,u.height=p}h.drawImage(l,0,0,f,p),u.toBlob(y=>{y?(console.log(`Image compressed: Original ${l.width}x${l.height} -> ${f}x${p}, Size: ${(y.size/1024/1024).toFixed(2)}MB`),o(y)):a(new Error("Failed to create compressed image blob"))},"image/jpeg",r)}catch(u){console.error("Error compressing image:",u),a(u)}},l.onerror=()=>{a(new Error("Failed to load image for compression"))},l.src=t})}function fz(t,e=1920,n=1080,r=.8){return new Promise((i,s)=>{const o=new FileReader;o.onload=a=>{uo(a.target.result,e,n,r).then(i).catch(s)},o.onerror=()=>s(new Error("Failed to read file")),o.readAsDataURL(t)})}function RC(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(h=>{h?r(h):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function mz(t,e,n){try{let r;try{r=await uo(e,1920,1080,.8)}catch(x){console.warn("Failed to compress image, using original:",x),r=await(await fetch(e)).blob()}let i;try{i=await RC(e)}catch(x){console.warn("Failed to create thumbnail, using compressed image:",x),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=Wd(Ec,`userHistory/${t}/${o}`),u=await Gd(l,r),h=await Hd(u.ref),f=Wd(Ec,`userHistory/${t}/${a}`),p=await Gd(f,i),y=await Hd(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function pz(t,e){try{const n=await new Promise(x=>{const A=new FileReader;A.onload=()=>x(A.result),A.readAsDataURL(e)});let r;try{r=await uo(n,1920,1080,.8)}catch(x){console.warn("Failed to compress image, using original file:",x),r=e}let i;try{i=await RC(n)}catch(x){console.warn("Failed to create thumbnail, using compressed image:",x),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=Wd(Ec,`userHistory/${t}/${o}`),u=await Gd(l,r),h=await Hd(u.ref),f=Wd(Ec,`userHistory/${t}/${a}`),p=await Gd(f,i),y=await Hd(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function gz(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await mz(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=mr(wh(Nn,"userHistory"));return await Ih(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function kC(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await pz(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=mr(wh(Nn,"userHistory"));return await Ih(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function yz(t){try{const e=wh(Nn,"userHistory"),n=am(e,lm("userId","==",t),cm("createdAt","desc")),r=await iw(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename,o.result.originalImageUrl&&(a.originalImageUrl=o.result.originalImageUrl)),o.originalImageUrl?a.originalImageUrl=o.originalImageUrl:o.imageData&&typeof o.imageData=="string"&&o.imageData.startsWith("http")&&(a.originalImageUrl=o.imageData),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function El(t,e=1,n=7){try{const r=wh(Nn,"userHistory");let i=null;if(e>1){const f=am(r,lm("userId","==",t),cm("createdAt","desc"),vy((e-1)*n)),p=await iw(f);p.empty||(i=p.docs[p.docs.length-1])}let s;const o=n*2;i&&e>1?s=am(r,lm("userId","==",t),cm("createdAt","desc"),T6(i),vy(o)):s=am(r,lm("userId","==",t),cm("createdAt","desc"),vy(o));const a=await iw(s),l=[];a.forEach(f=>{const p=f.data();if(!p.isError){const y={id:f.id,...p};p.result&&p.result.storageUrl&&(y.storageUrl=p.result.storageUrl,y.thumbnailUrl=p.result.thumbnailUrl,y.filename=p.result.filename,y.thumbnailFilename=p.result.thumbnailFilename,p.result.originalImageUrl&&(y.originalImageUrl=p.result.originalImageUrl)),p.originalImageUrl?y.originalImageUrl=p.originalImageUrl:p.imageData&&typeof p.imageData=="string"&&p.imageData.startsWith("http")&&(y.originalImageUrl=p.imageData),p.objects&&(y.objects=p.objects),l.push(y)}});const u=l.slice(0,n),h=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${h}`),{history:u,hasMore:h}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function cw(t,e){try{let n;try{n=await uo(e,1920,1080,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=Wd(Ec,`temp/${t}/${i}`),o=await Gd(s,n),a=await Hd(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function ue(t,e={}){try{fS(EC,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const hm=(t="email")=>ue("sign_up",{method:t}),NC=(t="email")=>ue("login",{method:t}),CC=()=>ue("anonymous_sign_in"),PC=()=>ue("logout"),uw=t=>ue("account_link",{success:t}),DC=t=>ue("image_upload",{file_type:t}),LC=()=>ue("object_image_upload"),VC=()=>ue("image_download"),OC=t=>ue("image_share",{platform:t}),MC=(t,e=!1)=>ue("generation_start",{prompt_type:t,has_object_image:e}),jC=(t,e)=>ue("generation_complete",{prompt_type:t,duration_ms:e}),fm=t=>ue("generation_error",{error_type:t}),mm=(t,e,n)=>ue("limit_reached",{subscription:t,usage:e,limit:n}),wz=(t,e=0)=>ue("object_detection",{success:t,object_count:e}),pm=(t,e=null)=>ue("feature_use",{feature:t,value:e}),FC=t=>ue("style_select",{style:t}),UC=(t,e)=>ue("color_select",{color:t,category:e}),_z=t=>ue("angle_select",{angle:t}),BC=t=>ue("lighting_select",{lighting:t}),zC=t=>ue("furniture_select",{furniture:t}),$C=t=>ue("repairs_select",{repair:t}),qC=t=>ue("doors_windows_select",{option:t}),GC=t=>ue("bathroom_select",{option:t}),dw=()=>ue("onboarding_start"),HC=t=>ue("onboarding_step",{step:t}),WC=()=>ue("onboarding_complete"),KC=t=>ue("onboarding_skip",{at_step:t}),hw=()=>ue("subscription_modal_view"),QC=t=>ue("subscription_click",{tier:t}),YC=()=>ue("welcome_premium_show"),XC=()=>ue("history_click"),JC=t=>ue("history_load_more",{page:t}),ZC=()=>ue("contact_form_submit"),eP=()=>ue("contact_form_success"),vz=t=>ue("category_select",{category:t}),xz=t=>ue("page_view",{page:t}),tP=()=>ue("app_open"),Iz=Object.freeze(Object.defineProperty({__proto__:null,analytics:EC,app:Bc,auth:Ss,compressFile:fz,compressImage:uo,createOrUpdateUser:Bo,db:Nn,fileToGenerativePart:TC,getDeviceFingerprint:lw,getDeviceId:SC,getFingerprint:dz,initFingerprint:Xv,loadUserHistory:yz,loadUserHistoryPaginated:El,logAnalyticsEvent:ue,saveImageToHistory:gz,saveUploadToHistory:kC,signInUser:AC,storage:Ec,trackAccountLink:uw,trackAngleSelect:_z,trackAnonymousSignIn:CC,trackAppOpen:tP,trackBathroomSelect:GC,trackCategorySelect:vz,trackColorSelect:UC,trackContactFormSubmit:ZC,trackContactFormSuccess:eP,trackDoorsWindowsSelect:qC,trackFeatureUse:pm,trackFurnitureSelect:zC,trackGenerationComplete:jC,trackGenerationError:fm,trackGenerationStart:MC,trackHistoryClick:XC,trackHistoryLoadMore:JC,trackImageDownload:VC,trackImageShare:OC,trackImageUpload:DC,trackLightingSelect:BC,trackLimitReached:mm,trackLogin:NC,trackLogout:PC,trackObjectDetection:wz,trackObjectImageUpload:LC,trackOnboardingComplete:WC,trackOnboardingSkip:KC,trackOnboardingStart:dw,trackOnboardingStep:HC,trackPageView:xz,trackRepairsSelect:$C,trackSignUp:hm,trackStyleSelect:FC,trackSubscriptionClick:QC,trackSubscriptionModalView:hw,trackWelcomePremiumShow:YC,uploadImageForSharing:cw,urlToFile:uz},Symbol.toStringTag,{value:"Module"}));class bz{constructor(){nx(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=Ql(mr(Nn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map,this.useExperimentalModel=!0}setUseExperimentalModel(e){this.useExperimentalModel=e,console.log(`[AIService] Experimental model (GPT-image-1.5) ${e?"ENABLED":"DISABLED"}`)}isExperimentalModelEnabled(){return this.useExperimentalModel}async submitImageGenerationRequest(e,n,r,i=null,s=null,o=null){try{const a=await e.getIdToken(),l=o!==null?o:this.useExperimentalModel;l&&console.log("[AIService] Using EXPERIMENTAL GPT-image-1.5 model for this request");const u={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:a,deviceId:s,prompt:n,imageData:r,originalImageUrl:r&&r.startsWith("http")?r:null,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date,useExperimentalModel:l},h=mr(wh(Nn,"userHistory"));return await Ih(h,u),h.id}catch(a){throw console.error("Error submitting image generation request:",a),a}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=mr(Nn,"genCount",r,"users",e),s=mr(Nn,"users",e),[o,a]=await Promise.all([$1(i),$1(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},h=u.credits!==void 0?u.credits:0;return{count:l,limit:h}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const Pf=new bz,Ez=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const[s,o]=F.useState(null),[a,l]=F.useState({width:window.innerWidth,height:window.innerHeight}),[u,h]=F.useState(window.innerWidth<1024),f=e[t];F.useEffect(()=>{const v=()=>{const L=window.innerWidth<1024;if(h(L),l({width:window.innerWidth,height:window.innerHeight}),f.targetRef&&f.targetRef.current){const z=f.targetRef.current.getBoundingClientRect();z.width>0&&z.height>0?o(z):o(null)}else o(null)};v(),window.addEventListener("resize",v),window.addEventListener("scroll",v,!0);const I=setTimeout(v,500);return()=>{window.removeEventListener("resize",v),window.removeEventListener("scroll",v,!0),clearTimeout(I)}},[t,f]);const p=t===e.length-1;if(!s)return d.jsxs("div",{className:"fixed inset-0 z-[100]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",dir:"rtl",children:[d.jsx("h3",{className:"font-bold text-xl text-primary-600",children:f.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(mn,{size:20})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:"rtl",children:f.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[d.jsx("div",{className:"flex gap-1.5",children:e.map((v,I)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${I===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},I))}),d.jsxs("button",{onClick:p?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[p?"":"",!p&&d.jsx(fI,{size:16})]})]})]})})]});const y=u?Math.min(280,a.width-40):300,x=200,A=u?12:20,C={};let b="";if(u){let v=(a.width-y)/2;C.left=v,C.width=y;const I=s.top;a.height-s.bottom,I>x+A+50?(C.top=s.top-x-A+20,b="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(C.top=s.bottom+A,b="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]"),C.top=Math.max(20,Math.min(a.height-x-20,C.top))}else{const v=s.left>a.width-350,I=s.left<350;if(v){C.left=s.left-y-A;let L=s.top+s.height/2-80;L=Math.max(20,Math.min(a.height-x-20,L)),C.top=L,b="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(I){C.left=s.right+A;let L=s.top+s.height/2-80;L=Math.max(20,Math.min(a.height-x-20,L)),C.top=L,b="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let L=s.left+s.width/2-y/2;L=Math.max(20,Math.min(a.width-y-20,L)),C.left=L;const z=s.top;a.height-s.bottom,z>x+A?(C.top=s.top-180,b="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(C.top=s.bottom+A,b="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}}return d.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[d.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[d.jsx("defs",{children:d.jsxs("mask",{id:"spotlight-mask",children:[d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),d.jsx("rect",{x:s.left-5,y:s.top-5,width:s.width+10,height:s.height+10,rx:"12",fill:"black"})]})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),d.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:s.left-5,top:s.top-5,width:s.width+10,height:s.height+10}}),d.jsxs("div",{className:`absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl pointer-events-auto animate-bounce-in origin-center transition-all duration-300 ${u?"":"w-[300px]"}`,style:C,children:[d.jsx("div",{className:`absolute w-0 h-0 border-solid ${b}`}),d.jsxs("div",{className:"flex justify-between items-start mb-2",dir:"rtl",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:f.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(mn,{size:16})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:"rtl",children:f.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:"rtl",children:[d.jsx("div",{className:"flex gap-1",children:e.map((v,I)=>d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${I===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},I))}),d.jsxs("button",{onClick:p?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[p?"":"",!p&&d.jsx(fI,{size:16})]})]})]})]})},Tz=({color:t,onClose:e,onApply:n})=>{const[r,i]=F.useState(""),[s,o]=F.useState("all"),a=u=>{const h=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(u);return h?{r:parseInt(h[1],16),g:parseInt(h[2],16),b:parseInt(h[3],16)}:null},l=()=>{const u=a(t.hex),h=u?`RGB(${u.r}, ${u.g}, ${u.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${h}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const f=/[\u0590-\u05FF]/.test(r);n(f?`  ${r}  ${t.value} (${t.ral}, ${h})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${h}) color completely and opaquely, covering the original color entirely`)}};return d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "})]}),d.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:d.jsx(mn,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:" "}),d.jsx("span",{className:"text-xs text-gray-400",children:"    "})]})]}),d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:" "}),d.jsx("span",{className:"text-xs text-gray-400",children:"   "})]})]})]}),s==="custom"&&d.jsxs("div",{className:"animate-slide-up",children:[d.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:" ?"}),d.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:": , , ...",className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),d.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:""}),d.jsxs("button",{onClick:l,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[d.jsx("span",{children:""}),d.jsx(I0,{size:16})]})]})]})]})})},uE=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=F.useState(!1);return F.useEffect(()=>{a(!0)},[]),!t||!o?null:a_.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(mn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:d.jsx(Ed,{className:"w-8 h-8 text-primary-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?"   ":"   "}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?`    (${s} ).         .`:`   ${s}   .        ,   .`}),d.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:" "}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[i," "]})]}),d.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:""}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[s," "]})]})]}),d.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[d.jsx(Ed,{className:"w-5 h-5"}),r>0?" ":"  "]}),d.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:" , "})]})]})}),document.body)},Az=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=F.useState(!1);return F.useEffect(()=>{i(!0)},[]),!t||!r?null:a_.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:d.jsx(mn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:d.jsx(Qg,{size:16,fill:"currentColor"})}),d.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:d.jsx(Qg,{size:12,fill:"currentColor"})}),d.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:d.jsx(Qg,{size:14,fill:"currentColor"})})]}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[d.jsx(Ed,{className:"w-10 h-10 text-yellow-400"}),d.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:d.jsx(I0,{className:"w-4 h-4 text-white stroke-[3]"})})]}),d.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),d.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(cr,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(I0,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"    "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[d.jsx(Ed,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]})]}),d.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",d.jsx(cr,{className:"w-5 h-5"})]})]})]})}),document.body)},dE=({beforeImage:t,afterImage:e})=>{const[n,r]=F.useState(50),i=F.useRef(null),s=F.useRef(!1),o=h=>{s.current=!0,l(h)},a=()=>{s.current=!1},l=h=>{if(!i.current)return;let f;h.touches?f=h.touches[0].clientX:f=h.clientX;const p=i.current.getBoundingClientRect(),x=Math.max(0,Math.min(f-p.left,p.width))/p.width*100;r(x)},u=h=>{s.current&&l(h)};return d.jsxs("div",{className:"relative w-full h-full select-none overflow-hidden group cursor-col-resize",ref:i,onMouseDown:o,onTouchStart:o,onMouseMove:u,onTouchMove:u,onMouseUp:a,onMouseLeave:a,onTouchEnd:a,children:[d.jsx("img",{src:e,alt:"After",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),d.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden select-none",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:d.jsx("img",{src:t,alt:"Before",className:"absolute inset-0 w-full h-full object-contain select-none",draggable:!1})}),d.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-col-resize z-10 shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{left:`${n}%`},children:d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg text-primary-600 transition-transform group-hover:scale-110",children:d.jsx(x0,{size:16})})}),d.jsx("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""}),d.jsx("div",{className:"absolute bottom-4 right-4 bg-primary-600/80 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""})]})},Sy="/assets/avatar-f01b7208.png",hE=({suggestions:t,onSelect:e,onClose:n,isMobile:r=!1,isThinking:i=!1,initialShowSuggestions:s=!0})=>{const[o,a]=F.useState(!1),[l,u]=F.useState(!1);F.useEffect(()=>{if(i)a(!0),u(!1);else if(t&&t.length>0){const y=setTimeout(()=>{a(!0),u(!!s)},500);return()=>clearTimeout(y)}else a(!1)},[t,i,s]);const h=y=>{e(y),u(!1)},f=()=>{a(!1),setTimeout(()=>{n()},500)},p=()=>{!i&&t&&t.length>0&&u(!l)};return!i&&(!t||t.length===0)?null:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relative group cursor-pointer",onClick:p,children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl border border-purple-400/40 overflow-hidden bg-purple-100/50 relative z-10 transition-transform duration-300 transform active:scale-95 flex items-center justify-center",children:d.jsx("img",{src:Sy,alt:"AI Designer",className:"w-full h-full object-cover opacity-90 hover:opacity-100",onError:y=>{y.target.onerror=null,y.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),l&&!i&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center",onClick:()=>u(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10 max-h-[70vh] overflow-hidden flex flex-col",onClick:y=>y.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",dir:"rtl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white/20 overflow-hidden bg-purple-100 flex-shrink-0",children:d.jsx("img",{src:Sy,alt:"AI",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:" "}),d.jsx("p",{className:"text-xs text-purple-300",children:"    !"})]})]}),d.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(mn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 p-1",children:t.map((y,x)=>d.jsxs("button",{onClick:()=>h(y),className:"w-full text-right p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(cr,{className:"w-5 h-5 text-purple-400"}),d.jsx("span",{className:"text-white font-medium text-sm flex-1",children:y.label||y.title_he})]},x))})]})]})]}):d.jsx("div",{className:`fixed z-50 transition-all duration-500 ease-in-out ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-20 pointer-events-none"}`,style:{bottom:"40px",right:"40px",left:"auto",maxWidth:"400px"},children:d.jsxs("div",{className:"flex flex-col items-end gap-4",children:[" ",d.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[" ",d.jsxs("div",{className:"relative group cursor-pointer",onClick:p,children:[d.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white shadow-xl overflow-hidden bg-purple-100 relative z-10 transition-transform duration-300 transform group-hover:scale-105",children:d.jsx("img",{src:Sy,alt:"AI Designer",className:"w-full h-full object-cover",onError:y=>{y.target.onerror=null,y.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i?d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-5 h-5 rounded-full border-2 border-white z-20"})]}),!i&&l&&d.jsxs("div",{className:"bg-white rounded-2xl rounded-br-none p-4 shadow-xl border border-purple-100 max-w-[250px] animate-bounce-in relative",children:[d.jsx("div",{className:"absolute bottom-0 right-[-8px] w-0 h-0 border-r-[8px] border-r-transparent border-b-[12px] border-b-white border-l-[0px] border-l-transparent transform -rotate-12"}),d.jsx("p",{className:"text-gray-800 text-sm font-medium text-right",dir:"rtl",children:"!         "})]})]}),!i&&l&&t&&t.length>0&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-4 rounded-2xl shadow-2xl border border-white/50 w-full animate-fade-in-up",children:[d.jsx("div",{className:"flex flex-col gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map((y,x)=>d.jsxs("button",{onClick:()=>h(y),className:"w-full text-right p-3 rounded-xl bg-purple-50 hover:bg-purple-100 border border-purple-100 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(cr,{className:"w-4 h-4 text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsx("span",{className:"text-gray-700 font-medium text-sm flex-1",children:y.label||y.title_he})]},x))}),d.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-end",children:d.jsx("button",{onClick:f,className:"text-xs text-gray-400 hover:text-gray-600 font-medium px-3 py-1 rounded-full hover:bg-gray-100 transition-colors",children:" "})})]})]})})},Sz=({isOpen:t,onClose:e,user:n,userCredits:r,userUsage:i,userSubscription:s,onLogin:o,onLogout:a,onSubscriptionClick:l,onRedeemCoupon:u,onCouponSuccess:h})=>{const[f,p]=F.useState(!1),[y,x]=F.useState(""),[A,C]=F.useState(null),[b,v]=F.useState("");if(!t)return null;const I=n&&!n.isAnonymous&&n.email,L=((n==null?void 0:n.email)||"U")[0].toUpperCase(),z=()=>{if(C(null),v(""),x(""),s>0){C("error"),v("    "),p(!1);return}p(!0)},q=async()=>{if(!y.trim()){C("error"),v("   ");return}C("loading"),v("");try{const E=await u(y.trim());E.success?(x(""),p(!1),C(null),v(""),e(),h&&h(E.creditsAdded||0)):(C("error"),v(E.error||"  "))}catch(E){C("error"),v(E.message||"  ")}};return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm bg-[#1a1a2e] rounded-3xl overflow-hidden shadow-2xl animate-scale-up border border-white/10",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 p-6 text-center border-b border-white/5",children:[d.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-1 mb-3 shadow-lg shadow-purple-500/20",children:d.jsx("div",{className:"w-full h-full rounded-full bg-[#1a1a2e] flex items-center justify-center text-3xl font-bold text-white",children:I?L:d.jsx(Gf,{className:"w-8 h-8 text-gray-300"})})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:I?n.displayName||n.email.split("@")[0]:""}),d.jsx("p",{className:"text-sm text-gray-400",children:I?n.email:"     "})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("button",{onClick:()=>{l(),e()},className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 hover:from-amber-500/20 hover:to-orange-500/20 border border-amber-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(Ed,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-medium",children:" "}),d.jsx("div",{className:"text-xs text-amber-400/80",children:r-i>0?`${r-i}  `:" "})]})]}),d.jsx("div",{className:"text-amber-400 text-lg",children:""})]}),d.jsxs("div",{className:"space-y-3",children:[f?d.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[d.jsx(pI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"  "})]}),d.jsx("input",{type:"text",value:y,onChange:E=>x(E.target.value.replace(/\s/g,"").toUpperCase()),placeholder:" ...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50 text-center tracking-wider uppercase",disabled:A==="loading",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{p(!1),x(""),C(null),v("")},className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 font-medium transition-colors",disabled:A==="loading",children:""}),d.jsx("button",{onClick:q,disabled:A==="loading"||!y.trim(),className:"flex-1 py-2.5 rounded-xl bg-emerald-500/80 hover:bg-emerald-500 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A==="loading"?d.jsxs(d.Fragment,{children:[d.jsx(Mo,{className:"w-4 h-4 animate-spin"}),"..."]}):""})]})]}):d.jsxs("button",{onClick:z,className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 hover:from-emerald-500/20 hover:to-teal-500/20 border border-emerald-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(pI,{className:"w-5 h-5 text-emerald-400"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-medium",children:"  "}),d.jsx("div",{className:"text-xs text-emerald-400/80",children:"    "})]})]}),d.jsx("div",{className:"text-emerald-400 text-lg",children:""})]}),A&&b&&d.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-xl text-sm ${A==="success"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":A==="error"?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-white/10 text-gray-300"}`,children:[A==="success"?d.jsx(Ti,{className:"w-4 h-4 flex-shrink-0"}):A==="error"?d.jsx($D,{className:"w-4 h-4 flex-shrink-0"}):null,d.jsx("span",{children:b})]})]}),d.jsxs("button",{onClick:()=>{I?a():o(),e()},className:`w-full flex items-center justify-between p-4 rounded-2xl border transition-all group ${I?"bg-red-500/10 hover:bg-red-500/20 border-red-500/20":"bg-blue-500/10 hover:bg-blue-500/20 border-blue-500/20"}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform ${I?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:I?d.jsx(HD,{className:"w-5 h-5"}):d.jsx(GD,{className:"w-5 h-5"})}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-medium",children:I?"":""}),d.jsx("div",{className:`text-xs ${I?"text-red-400/80":"text-blue-400/80"}`,children:I?" ":"  "})]})]}),d.jsx("div",{className:I?"text-red-400 text-lg":"text-blue-400 text-lg",children:""})]})]}),d.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors",children:d.jsx(mn,{className:"w-5 h-5"})})]})]})};function Rz(){var ex;const[t,e]=F.useState(!1),[n,r]=F.useState(!1),[i,s]=F.useState(0),[o,a]=F.useState(null),[l,u]=F.useState(!1),[h,f]=F.useState(()=>localStorage.getItem("hasSeenFirstUploadTip")==="true"),[p,y]=F.useState(window.innerWidth<1024),[x,A]=F.useState(!1),C=F.useRef(null),b=F.useRef(null),v=F.useRef(null),I=F.useRef(null);F.useEffect(()=>{const T=()=>y(window.innerWidth<1024);return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const L=F.useRef(null),z=F.useRef(null),q=F.useRef(null),E=F.useRef(null);F.useRef(null),F.useRef(null),F.useState("  ");const[_,R]=F.useState(null),[S,P]=F.useState("/assets/design_img.jpg"),[N,k]=F.useState(!1),[sn,nr]=F.useState(!1);F.useState(!1);const[ts,vn]=F.useState(!1),[Y,se]=F.useState(!1),[ae,Ve]=F.useState(!1),[be,je]=F.useState(!1),[on,an]=F.useState(!1),[ln,Ht]=F.useState(!1),[xo,gt]=F.useState(!1),[xn,rr]=F.useState([]),[re,Io]=F.useState(null),[On,bo]=F.useState(!1),[Eo,pi]=F.useState(!1),[pg,Oa]=F.useState(!1),[Ma,gi]=F.useState(null),[ja,To]=F.useState([]),[Ao,ns]=F.useState(!1),[Fa,bt]=F.useState(!1),[we,Ua]=F.useState(()=>{const T=localStorage.getItem("designerAvatarEnabled");return T===null?!0:T==="true"}),[Wt,yt]=F.useState(""),[Jv,qr]=F.useState(16/9),[Ba,Sh]=F.useState(""),[rs,za]=F.useState(null),[Kt,is]=F.useState(null),[zc,ss]=F.useState(1),[ir,Ir]=F.useState(!0),[yi,Gr]=F.useState(!1),[Rh,Hr]=F.useState(!1),[kh,wi]=F.useState(!1),[sr,tt]=F.useState("signup"),[br,os]=F.useState(""),[as,Nh]=F.useState(""),[dt,ls]=F.useState(0),[ht,gg]=F.useState(0),[cn,$c]=F.useState(0),qc={0:"",1:"",2:"",3:""},[or,Er]=F.useState(""),[Gc,Hc]=F.useState(!1),[Ch,$a]=F.useState(!1),[Wc,Ph]=F.useState(!1),[Dh,qa]=F.useState(!1),[Lh,cs]=F.useState(!1),[So,Wr]=F.useState(!1),[Ga,Vh]=F.useState(null),[Oh,Ha]=F.useState(!1),[Kc,Kr]=F.useState(!1),[Qc,Yc]=F.useState(!1);F.useState(0);const[Mh,jh]=F.useState(!1),[yg,Fh]=F.useState(0),[In,us]=F.useState(null),[bn,Et]=F.useState(!1),[Ro,_i]=F.useState(!1),[Xc,Se]=F.useState(!1),[Wa,vi]=F.useState(!1),[Qr,Uh]=F.useState(""),[xi,Bh]=F.useState(""),[Ka,zh]=F.useState(""),[$h,ds]=F.useState(!1),[Yr,Qa]=F.useState(!1),[Jc,Ii]=F.useState(""),[Ee,Ya]=F.useState(!1),[Fe,bi]=F.useState(null),[Tr,Xa]=F.useState(!1),[wg,hs]=F.useState(!1);F.useRef(null);const fs=F.useRef(null),Ja=F.useRef(null);F.useEffect(()=>{Ga&&re&&!re.isAnonymous&&(cs(!0),hw(),Vh(null))},[re,Ga]);const Ei=T=>{const M=T.includes("starter")?"starter":T.includes("value")?"value":T.includes("pro")?"pro":"unknown";QC(M),tl.current=!0,window.open(T,"_blank","noopener,noreferrer"),cs(!1),(!re||re.isAnonymous)&&Ha(!0)},[ko,Za]=F.useState(!1),[el,ze]=F.useState(null),qh=F.useRef(null),Gh=F.useRef(null),Ar=F.useRef(null);F.useRef(null);const Zc=F.useRef(!0),tl=F.useRef(!1);F.useEffect(()=>{tP()},[]),F.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{e(!0),dw()},1e3)},[]);const ms=()=>{e(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),WC()},Hh=()=>{if(i<3){const T=i+1;s(T),HC(T)}else ms()},Sr=()=>{KC(i),ms()},No=()=>{hw(),cs(!0)},_g=[{title:" ",description:"      .   ?  ,   .",targetRef:p?b:C},{title:"  ",description:'      .  " "    .',targetRef:p?z:L},{title:" ",description:'  "" -AI       !',targetRef:p?E:q},{title:" :  ",description:'   ?   " "        .',targetRef:p?I:v}];F.useEffect(()=>{const T=E4(Ss,async M=>{if(M){console.log("User UID:",M.uid),Io(M),bo(!0),await Bo(M),pi(!0);try{const Te=await El(M.uid,1,7);if(rr(Te.history),Ir(Te.hasMore),Te.history.length>0){const Ie=Te.history[0],Ne=Ie.storageUrl||Ie.imageUrl;Ne&&(P(Ne),gi(Ie.id),Ie.originalImageUrl&&us(Ie.originalImageUrl))}}finally{pi(!1)}const U=mr(Nn,"users",M.uid),te=Ql(U,Te=>{if(Te.exists()){const Ie=Te.data(),Ne=Ie.subscription!==void 0?Ie.subscription:0;gg($e=>Zc.current?(Zc.current=!1,Ne):($e===0&&Ne>0&&tl.current&&(Yc(!0),YC(),tl.current=!1),Ne)),ls(Ie.credits!==void 0?Ie.credits:0)}}),de=new Date,ke=`${String(de.getMonth()+1).padStart(2,"0")}-${de.getFullYear()}`,xe=mr(Nn,"genCount",ke,"users",M.uid),ie=Ql(xe,Te=>{Te.exists()?$c(Te.data().count||0):$c(0)});return()=>{te(),ie()}}else try{const U=await AC();Io(U),bo(!0),await Bo(U),CC()}catch(U){console.error("Failed to sign in anonymously:",U)}});return()=>T()},[]);const Co=async T=>{const M=T.target.files[0];if(M){const U=M.type||M.name.split(".").pop().toLowerCase();DC(U);const te=M.type==="image/heic"||M.type==="image/heif"||M.name.toLowerCase().endsWith(".heic")||M.name.toLowerCase().endsWith(".heif");let de=M;if(te){console.log("HEIC file detected, converting to JPEG...",{name:M.name,type:M.type,size:M.size});try{if(M.type==="image/jpeg"||M.type==="image/png"||M.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),de=M;else{const{heicTo:xe}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]);de=await xe({blob:M,type:"image/jpeg",quality:.9}),console.log("HEIC converted to JPEG successfully:",{type:de.type,size:de.size})}}catch(xe){console.error("HEIC conversion failed:",xe),console.error("Error details:",xe.message,xe.stack),alert(`Failed to convert HEIC image: ${xe.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const ke=new FileReader;ke.onload=async xe=>{const ie=xe.target.result;let Te=ie;try{const Ie=await uo(ie,1920,1080,.8),Ne=new FileReader;Te=await new Promise($e=>{Ne.onload=()=>$e(Ne.result),Ne.readAsDataURL(Ie)}),console.log("Image compressed for display")}catch(Ie){console.warn("Failed to compress image for display, using original:",Ie)}if(R(Te),P(Te),us(null),Et(!1),qr(16/9),gi(null),h||setTimeout(()=>{u(!0)},1e3),On&&re){pi(!0);try{const Ie=await kC(re.uid,M,`Uploaded: ${M.name}`),Ne=Ie.id;console.log("Upload result ID:",Ne),console.log("Upload result:",Ie);const $e=await El(re.uid,1,7);rr($e.history),ss(1),Ir($e.hasMore),gi(Ne),console.log("Set current history ID to newly uploaded image:",Ne),we&&(ns(!0),bt(!0)),console.log("Current history after reload:",$e.history.map(wt=>({id:wt.id,prompt:wt.prompt})))}catch(Ie){console.error("Failed to save upload to Firebase:",Ie)}finally{pi(!1)}}},ke.readAsDataURL(de)}},eu=()=>{qh.current.click()},nl=async()=>{VC();try{const U=await(await fetch(S)).blob(),te=window.URL.createObjectURL(U),de=document.createElement("a");de.href=te,de.download=`moomhe-design-${Date.now()}.png`,document.body.appendChild(de),de.click(),document.body.removeChild(de),window.URL.revokeObjectURL(te)}catch(T){console.error("Download failed:",T);try{window.open(S,"_blank")}catch(M){console.error("Fallback download also failed:",M),alert("  .  .")}}},Po=()=>{Ya(!0),bi(null),pm("google_lens_start")},tu=T=>{var de,ke,xe,ie;if(!Ee)return;const M=T.currentTarget.getBoundingClientRect(),U=(T.clientX||((ke=(de=T.touches)==null?void 0:de[0])==null?void 0:ke.clientX))-M.left,te=(T.clientY||((ie=(xe=T.touches)==null?void 0:xe[0])==null?void 0:ie.clientY))-M.top;Xa(!0),bi({startX:U,startY:te,endX:U,endY:te})},Do=T=>{var de,ke,xe,ie;if(!Tr||!Ee)return;const M=T.currentTarget.getBoundingClientRect(),U=Math.max(0,Math.min((T.clientX||((ke=(de=T.touches)==null?void 0:de[0])==null?void 0:ke.clientX))-M.left,M.width)),te=Math.max(0,Math.min((T.clientY||((ie=(xe=T.touches)==null?void 0:xe[0])==null?void 0:ie.clientY))-M.top,M.height));bi(Te=>Te?{...Te,endX:U,endY:te}:null)},nu=async()=>{if(!Tr||!Fe)return;Xa(!1);const T=Math.abs(Fe.endX-Fe.startX),M=Math.abs(Fe.endY-Fe.startY);if(T<20||M<20){bi(null);return}await Wh()},Wh=async()=>{if(!(!Fe||!fs.current||!Ja.current)){hs(!0),pm("google_lens_search");try{const T=fs.current,U=Ja.current.getBoundingClientRect(),te=T.getBoundingClientRect(),de=te.width,ke=te.height,xe=te.left-U.left,ie=te.top-U.top,Te=T.naturalWidth/de,Ie=T.naturalHeight/ke,Ne=Math.min(Fe.startX,Fe.endX),$e=Math.min(Fe.startY,Fe.endY),wt=Math.abs(Fe.endX-Fe.startX),Rr=Math.abs(Fe.endY-Fe.startY),jn=Ne-xe,Ft=$e-ie,ar=Math.max(0,jn*Te),tx=Math.max(0,Ft*Ie),vg=Math.min(wt*Te,T.naturalWidth-ar),xg=Math.min(Rr*Ie,T.naturalHeight-tx);if(vg<=0||xg<=0){alert("   "),hs(!1);return}const iP=await fetch(S).then(lP=>lP.blob()),sP=await createImageBitmap(iP),ll=document.createElement("canvas");ll.width=Math.max(1,Math.round(vg)),ll.height=Math.max(1,Math.round(xg)),ll.getContext("2d").drawImage(sP,Math.round(ar),Math.round(tx),Math.round(vg),Math.round(xg),0,0,ll.width,ll.height);const{downloadURL:oP}=await cw((re==null?void 0:re.uid)||"anonymous",ll.toDataURL("image/jpeg",.9)),aP=`https://lens.google.com/uploadbyurl?url=${encodeURIComponent(oP)}`;window.open(aP,"_blank","noopener,noreferrer"),Ya(!1),bi(null)}catch(T){console.error("Google Lens search failed:",T),alert(" .  .")}finally{hs(!1)}}},Xr=()=>{Ya(!1),bi(null),Xa(!1)};F.useEffect(()=>{if(!Ma||!we){To([]),ns(!1);return}const T=Ql(mr(Nn,"userHistory",Ma),M=>{if(M.exists()){const U=M.data();we&&U.suggestions&&Array.isArray(U.suggestions)&&U.suggestions.length>0&&(To(U.suggestions),ns(!1))}});return()=>T()},[Ma,we]);const ru=T=>{const M=T.prompt;yt(M),uu(M),setTimeout(()=>yt(""),100)},iu=()=>{const T=!we;Ua(T),localStorage.setItem("designerAvatarEnabled",T.toString()),T||(To([]),ns(!1))},rl=async()=>{OC("whatsapp");try{let T=S;const M=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(T.startsWith("data:"))try{k(!0);const{downloadURL:U}=await cw((re==null?void 0:re.uid)||"anonymous",T);T=U,console.log(" Image uploaded to temporary storage:",U)}catch(U){console.error("Error uploading image to Firebase:",U),alert("  .  .");return}finally{k(!1)}if(M){const U=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(T)}`;window.open(U,"_blank")}else{const U=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(T)}`;window.open(U,"_blank")}}catch(T){console.error("WhatsApp share failed:",T),alert("  .  .")}},su=async()=>{if(!xi.trim()&&!Qr.trim()){Ii("     ");return}if(xi.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(xi)){Ii("    ");return}if(!Ka.trim()){Ii("  ");return}Ii(""),ds(!0),ZC();try{const T=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,M={id:T,uid:(re==null?void 0:re.uid)||"anonymous",email:xi.trim()||null,phone:Qr.trim()||null,message:Ka.trim(),createdAt:new Date,userEmail:(re==null?void 0:re.email)||null,isAnonymous:(re==null?void 0:re.isAnonymous)||!0};let U=null;try{const te=await fetch("https://formspree.io/f/xkgdpbjg",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:xi.trim()||null,phone:Qr.trim()||null,message:Ka.trim()})});if(!te.ok){const de=await te.text();U=`HTTP ${te.status}: ${de}`,console.error("Formspree error:",U)}}catch(te){U=`Network error: ${te.message}`,console.error("Formspree network error:",te)}await Ih(mr(Nn,"supportMsgs",T),{...M,formspreeError:U}),Uh(""),Bh(""),zh(""),vi(!1),Qa(!0),eP(),setTimeout(()=>Qa(!1),5e3)}catch(T){console.error("Error submitting contact form:",T),Ii("  .  .")}finally{ds(!1)}},il=T=>{XC();const M=T.storageUrl||T.imageUrl;P(M),T.originalImageUrl?(us(T.originalImageUrl),Et(!1)):(us(null),Et(!1)),qr(16/9),gi(T.id),bt(!1)},sl=()=>{N||(Oa(!0),In&&Et(!0),Se(!1),_i(!0))},ps=()=>{Oa(!1),Et(!1),Se(!1),_i(!1),Ya(!1),bi(null),Xa(!1)},ou=()=>{In&&(P(In),us(null)),ps()},Jr=()=>{_i(!0)},Kh=T=>{const M=T.target,U=M.naturalWidth/M.naturalHeight;qr(U)},Qh=async T=>{const M=T.target.files[0];if(M){LC();const U=M.type==="image/heic"||M.type==="image/heif"||M.name.toLowerCase().endsWith(".heic")||M.name.toLowerCase().endsWith(".heif");let te=M;if(U){console.log("HEIC object image detected, converting to JPEG...",{name:M.name,type:M.type,size:M.size});try{if(M.type==="image/jpeg"||M.type==="image/png"||M.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),te=M;else{const{heicTo:ke}=await Nr(()=>import("./heic-to-49ba7c0b.js"),[]);te=await ke({blob:M,type:"image/jpeg",quality:.9}),console.log("HEIC object image converted to JPEG successfully")}}catch(ke){console.error("HEIC conversion failed:",ke),alert(`Failed to convert HEIC image: ${ke.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const de=new FileReader;de.onload=ke=>{const xe=new Image;xe.onload=()=>{const Ie=document.createElement("canvas");let Ne=xe.width,$e=xe.height;const wt=1200;(Ne>wt||$e>wt)&&(Ne>$e?($e=Math.round($e*wt/Ne),Ne=wt):(Ne=Math.round(Ne*wt/$e),$e=wt)),Ie.width=Ne,Ie.height=$e,Ie.getContext("2d").drawImage(xe,0,0,Ne,$e);const jn=Ie.toDataURL("image/jpeg",.9);za(jn),fetch(jn).then(Ft=>Ft.blob()).then(Ft=>{const ar=new File([Ft],M.name,{type:"image/jpeg"});is(ar)})},xe.src=ke.target.result,Zv("  !      .");const ie="    ",Te=Wt.trim();Te?Te.includes(ie)||yt(`${Te} ${ie}`):yt(ie)},de.readAsDataURL(te)}},au=()=>{Ar.current.click()},lu=()=>{za(null),is(null),Ar.current&&(Ar.current.value="")},ol=async T=>{if(T.preventDefault(),!(!br||!or)){if(sr==="signup"&&or!==as){alert("  .  .");return}Hc(!0);try{if(sr==="signup")if(re&&re.isAnonymous){const{linkWithCredential:U,EmailAuthProvider:te}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]),de=te.credential(br,or);try{const ke=await U(re,de);await Bo(ke.user),uw(!0),hm("email_link"),alert("  !    .")}catch(ke){if(uw(!1),ke.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:xe}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]),ie=await xe(Ss,br,or);await Xh(re.uid,ie.user.uid),await Bo(ie.user),hm("email_migrate"),alert("  !      .")}else throw ke}}else{const{createUserWithEmailAndPassword:U}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]),te=await U(Ss,br,or);await Bo(te.user),hm("email"),alert("  !")}else{const{signInWithEmailAndPassword:M}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]),U=await M(Ss,br,or);await Bo(U.user),NC("email"),alert(" !")}Hr(!1),os(""),Nh(""),Er(""),tt("signup")}catch(M){console.error("Authentication error:",M),M.code==="auth/email-already-in-use"?(alert("   .   ."),tt("login")):M.code==="auth/user-not-found"?(alert("  .    ."),tt("signup")):M.code==="auth/wrong-password"?alert(" .  ."):M.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{Hc(!1)}}},un=T=>{T.preventDefault(),ol(T)},Yh=async()=>{if(!br){alert("    .");return}$a(!0);try{const{sendPasswordResetEmail:T}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]);await T(Ss,br),alert("     .")}catch(T){console.error("Password reset error:",T),T.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{$a(!1)}},Xh=async(T,M)=>{try{const{collection:U,query:te,where:de,getDocs:ke,doc:xe,setDoc:ie,deleteDoc:Te}=await Nr(()=>import("./index.esm-6dc7db34.js"),[]),{db:Ie}=await Nr(()=>Promise.resolve().then(()=>Iz),void 0),Ne=U(Ie,"userHistory"),$e=te(Ne,de("userId","==",T)),wt=await ke($e),Rr=[];if(wt.forEach(jn=>{const Ft=jn.data();Ft.userId=M;const ar=xe(U(Ie,"userHistory"));Rr.push(ie(ar,Ft)),Rr.push(Te(jn.ref))}),await Promise.all(Rr),console.log(`Migrated ${wt.size} history entries from ${T} to ${M}`),On){const jn=await El(M,1,7);rr(jn.history),ss(1),Ir(jn.hasMore)}}catch(U){console.error("Error migrating user data:",U)}},gs=async()=>{try{PC();const{signOut:T}=await Nr(()=>import("./index.esm-cea6ca0b.js"),[]);await T(Ss),rr([]),Io(null),bo(!1),wi(!1),window.location.reload()}catch(T){console.error("Logout error:",T),alert(" .  .")}},c=async T=>{try{const M=await re.getIdToken(),U=await lw(),de=await(await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/redeemCoupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({couponCode:T,authToken:M,deviceId:U})})).json();return de.success&&pm("coupon_redeemed",T),de}catch(M){return console.error("Coupon redemption error:",M),{success:!1,error:"  .  ."}}},m=async()=>{if(!On||!re||yi||!ir){console.log("Load more history blocked:",{isAuthenticated:On,currentUser:!!re,isLoadingMoreHistory:yi,hasMoreHistory:ir});return}console.log("Loading more history, current page:",zc),Gr(!0);try{const T=zc+1;JC(T);const M=await El(re.uid,T,7);console.log("Load more result:",{nextPage:T,historyCount:M.history.length,hasMore:M.hasMore}),M.history.length>0?(rr(U=>[...U,...M.history]),ss(T),Ir(M.hasMore)):Ir(!1)}catch(T){console.error("Failed to load more history:",T)}finally{Gr(!1)}};F.useEffect(()=>{const T=M=>{Wc&&Gh.current&&!Gh.current.contains(M.target)&&Ph(!1),Dh&&!M.target.closest(".suggestions-modal")&&qa(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[Wc,Dh]);const g=T=>{const M=String(T.getDate()).padStart(2,"0"),U=String(T.getMonth()+1).padStart(2,"0"),te=String(T.getFullYear()).slice(-2);return`${M}/${U}/${te}`},w=T=>{const U=Math.floor((new Date-T)/1e3);return U<60?" ":U<3600?` ${Math.floor(U/60)} `:U<86400?` ${Math.floor(U/3600)} `:U<172800?"":U<604800?` ${Math.floor(U/86400)} `:U<2592e3?` ${Math.floor(U/604800)} `:U<31536e3?` ${Math.floor(U/2592e3)} `:` ${Math.floor(U/31536e3)} `},D=T=>{const M=T.createdAt;if(!M)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(M))return M;try{let U;if(M&&typeof M=="object"&&M.toDate?U=M.toDate():M&&typeof M=="object"&&M.seconds?U=new Date(M.seconds*1e3):U=new Date(M),!isNaN(U.getTime()))return w(U)}catch(U){console.warn("Failed to parse timestamp:",M,U)}return M||"  "},j=async()=>{if(Wt.trim()){if(On&&re&&!await Pf.canMakeRequest(re.uid)){mm(ht,cn,dt),Kr(!0);return}k(!0);try{const T=Wt;let M=T;Kt&&(M=`  , ${T}`),console.log(" Final prompt for AI:",M),await uu(M),yt(""),za(null),is(null),Ar.current&&(Ar.current.value="")}catch(T){console.error("Custom prompt failed:",T),T.message&&(T.message.includes("limit reached")||T.message.includes("credits"))?Kr(!0):alert("  .  .")}finally{k(!1)}}},W={:"#C1121C",:"#FF7514",:"#E5BE01",:"#287233",:"#1E2460",:"#6D3F5B",:"#78858B"," ":"#F4F4F4"},Re={:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}]," ":[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},Tt=T=>{UC(T.value,Ba),ze(T),Za(!0)},ge=T=>{Za(!1),nr(!1),ze(null),console.log(" Color Selection - Prompt being added to input and executing:",T);const M=Wt.trim();let U;M?M.endsWith(" ")?U=`${M}${T}`:U=`${M}, ${T}`:U=T,yt(U),uu(U),yt("")},Nt=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],Ct=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}],ys=[{name:"  ",value:"mediterranean-modern",thumbnail:"/assets/styles/mediterranean.png",prompt:"Transform this room into a Modern Mediterranean interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use natural materials like Jerusalem stone walls, terracotta tiles, and light oak wood flooring. Add arched doorways and windows. Use a warm color palette with white, cream, sand, and olive green accents. Include linen curtains, woven textures, ceramic vases with olive branches, and modern furniture with clean lines. Maximize natural light with large windows. Add indoor plants like olive trees and succulents. Create an airy, relaxed, and sophisticated atmosphere inspired by Israeli coastal living."},{name:" ",value:"warm-minimalism",thumbnail:"/assets/styles/warm-minimalism.jpg",prompt:"Transform this room into Warm Minimalism interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Keep the space clean and uncluttered but add warmth through natural materials. Use oak wood floors, cream-colored walls, and natural stone accents. Include low-profile modern furniture in warm neutrals like camel, beige, and soft terracotta. Add texture through wool rugs, linen cushions, and organic cotton throws. Use rounded furniture edges and soft curves. Include subtle decorative elements like a single large plant, minimalist art, and sculptural ceramic pieces. Emphasize natural light with sheer curtains. Create a serene, cozy, and sophisticated atmosphere."},{name:"",value:"biophilic",thumbnail:"/assets/styles/biophilic.jpg",prompt:"Transform this room into Biophilic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a strong connection to nature inside the home. Add abundant indoor plants including large statement plants like fiddle leaf figs, monstera, and hanging pothos. Use natural materials throughout: raw wood furniture, stone surfaces, bamboo accents, and cork flooring. Include a living green wall or plant shelf. Use earthy colors: forest green, terracotta, sand, and natural wood tones. Maximize natural light through existing windows. Include water features or natural elements like driftwood and pebbles. Create a fresh, calming, and nature-immersive atmosphere."},{name:" ",value:"modern-luxury",thumbnail:"/assets/styles/modern-luxury.jpg",prompt:"Transform this room into Modern Luxury interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an elegant and sophisticated high-end space. Use premium materials: Italian marble floors or feature walls, rich wood veneers, brushed brass or gold metal accents. Include designer furniture with sculptural forms and plush velvet upholstery in jewel tones like emerald green, sapphire blue, or deep burgundy. Add statement lighting fixtures like a modern chandelier or sculptural pendant lights. Use a refined color palette with charcoal, cream, and metallic accents. Include floor-to-ceiling curtains, large abstract art, and designer accessories. Create a glamorous, refined, and opulent atmosphere."},{name:"",value:"japandi",thumbnail:"/assets/styles/japandi.jpg",prompt:"Transform this room into Japandi interior design style - a fusion of Japanese and Scandinavian aesthetics. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a muted, neutral color palette with soft whites, warm grays, and natural wood tones. Include low-profile furniture with clean lines and natural materials like light ash or oak wood. Add Japanese elements: shoji-style screens, floor cushions, bonsai plants, and ceramic pottery. Incorporate Scandinavian hygge with cozy textiles, wool throws, and sheepskin rugs. Keep the space minimal and functional with hidden storage. Use paper lanterns or simple pendant lighting. Add indoor plants like bamboo or peace lilies. Create a zen-like, harmonious, and tranquil atmosphere."},{name:"",value:"scandinavian",thumbnail:"/assets/styles/scandinavian.jpg",prompt:"Transform this room into Scandinavian interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a bright, airy color palette dominated by white and light gray walls. Add light wood floors in birch or pine. Include minimalist furniture with clean lines and functional design in natural wood and white finishes. Add cozy textiles: chunky knit blankets, sheepskin throws, and soft wool rugs. Include statement lighting with modern pendant lamps. Use indoor plants like eucalyptus and ferns for natural touches. Add black accents through frames, fixtures, and accessories for contrast. Keep decor minimal but meaningful. Create a bright, cozy, and hygge-inspired atmosphere with excellent natural lighting."},{name:" ",value:"boho-chic",thumbnail:"/assets/styles/boho.jpg",prompt:"Transform this room into Bohemian Chic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an eclectic, artistic, and free-spirited space. Layer rich textures with Moroccan rugs, macram wall hangings, and woven baskets. Use warm, earthy colors mixed with vibrant accents: terracotta, mustard yellow, teal, and burnt orange. Include rattan and wicker furniture, vintage pieces, and floor cushions. Add abundant plants in decorative pots, hanging planters, and trailing vines. Include global-inspired decor: Turkish lanterns, Indian textiles, and African baskets. Add fairy lights or warm Edison bulb lighting. Create a relaxed, artistic, and globally-inspired atmosphere full of personality and warmth."},{name:"",value:"industrial",thumbnail:"/assets/styles/industrial.jpg",prompt:"Transform this room into Industrial interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Expose raw architectural elements: brick walls, concrete ceilings, metal pipes, and ductwork. Use a color palette of charcoal gray, black, rust, and raw concrete tones. Include metal and iron furniture: steel-framed shelving, iron coffee tables, and metal bar stools. Add distressed leather sofas and vintage factory-style lighting with exposed bulbs. Include reclaimed wood elements for warmth: wooden dining tables, floating shelves, or accent walls. Add large factory-style mirrors. Include industrial accessories: metal clocks, wire baskets, and vintage signs. Create a raw, edgy, urban loft atmosphere with character and history."},{name:" ",value:"earthy-natural",thumbnail:"/assets/styles/earthy-natural.jpg",prompt:"Transform this room into Earthy Natural interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a grounded, organic, and serene space connected to nature. Use a warm earth-tone color palette: terracotta, ochre, olive green, warm browns, and sandy beige. Include natural materials: raw wood furniture, stone surfaces, clay pottery, and jute or sisal rugs. Add textured walls with lime wash or clay plaster in warm tones. Include linen and cotton textiles in natural undyed colors. Add organic shapes and handcrafted elements: ceramic vases, woven baskets, and artisanal objects. Include large indoor plants and dried flowers or pampas grass. Create a warm, grounded, and nature-inspired sanctuary."},{name:"",value:"jerusalem",thumbnail:"/assets/styles/jerusalem.jpg",prompt:"Transform this room into Contemporary Israeli interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a bright, modern space that reflects Mediterranean living. Use Jerusalem stone or natural stone feature walls, terrazzo floors, and light wood accents. Use a neutral palette with white walls, warm beige, and pops of earthy colors like olive and terracotta. Add modern Israeli design furniture with clean lines and functional aesthetics. Include local crafts: ceramic pieces, woven textiles, and modern Israeli art. Add olive branches, succulents, and Mediterranean plants. Create an airy, sophisticated, and culturally-rooted atmosphere that celebrates Israeli design heritage."},{name:"",value:"minimalist",thumbnail:"/assets/styles/minimalist.jpg",prompt:"Transform this room into Minimalist interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a clean, uncluttered, and intentional space. Use an all-white or monochromatic color palette with subtle texture variations. Include streamlined furniture with geometric forms and hidden storage solutions. Keep surfaces completely clear with minimal decorative objects - only one or two statement pieces. Use high-quality materials: polished concrete floors, seamless white walls, and sleek fixtures. Add architectural interest through recessed lighting, clean lines, and negative space. Include one bold statement element like a large plant or single artwork. Create a serene, peaceful, and focused atmosphere where less is more."},{name:" ",value:"modern-classic",thumbnail:"/assets/styles/modern-classic.jpg",prompt:"Transform this room into Modern Classic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Blend timeless elegance with contemporary comfort. Use a sophisticated color palette of cream, soft gray, navy blue, and gold accents. Include classic architectural details: crown moldings, wainscoting, and paneled walls with modern interpretation. Add furniture that combines classic silhouettes with updated fabrics: tufted sofas, wingback chairs in modern fabrics, and elegant side tables. Include crystal or modern chandeliers and wall sconces. Add marble surfaces, silk or velvet textiles, and gilded mirrors. Include fresh flowers, classic art, and refined accessories. Create an elegant, sophisticated, and timeless atmosphere that feels both grand and welcoming."}],Mn=T=>{vn(!1),BC(T.value),console.log(" Lighting Selection - Prompt being added to input:",T.prompt),console.log(" Selected lighting:",T.name,T.value),Zh(T.prompt)},al=T=>{se(!1),zC(T.value),console.log(" Furniture Selection - Prompt being added to input:",T.prompt),console.log(" Selected furniture:",T.name,T.value),Zh(T.prompt)},cu=T=>{je(!1),FC(T.value),console.log(" Style Selection - Prompt being added to input and executing:",T.prompt),console.log(" Selected style:",T.name,T.value);const M=Wt.trim();let U;M?M.endsWith(" ")?U=`${M}${T.prompt}`:U=`${M}, ${T.prompt}`:U=T.prompt,yt(U),uu(U),yt("")},Jh=(T,M="other")=>{on?qC(T):ln?GC(T):ae&&$C(T),an(!1),Ht(!1),Ve(!1);const U=Wt.trim();let te;U?U.endsWith(" ")?te=`${U}${T}`:te=`${U}, ${T}`:te=T,yt(te),uu(te),yt("")},Zv=T=>{a(T),setTimeout(()=>a(null),3e3)},Zh=T=>{const M=Wt.trim();let U;M?M.endsWith(" ")?U=`${M}${T}`:U=`${M} ${T}`:U=T,yt(U),Zv("  .     ")},uu=async T=>{var de,ke,xe;if(!S)return;const M=Date.now();k(!0);const te=(ie=>ie.includes("")||ie.includes("")||ie.includes("")||ie.includes("")?"style":ie.includes("")||ie.includes("")?"color":ie.includes("")||ie.includes("")?"lighting":ie.includes("")||ie.includes("")||ie.includes("")||ie.includes("")?"furniture":ie.includes("")||ie.includes("")||ie.includes("")?"angle":ie.includes("")||ie.includes("")?"repairs":ie.includes("")||ie.includes("")?"doors_windows":ie.includes("")||ie.includes("")||ie.includes("")?"bathroom":"custom")(T);MC(te,!!Kt),us(S),Et(!1);try{if(console.log(" AI Image Alteration - Prompt being sent:",T),console.log(" Main image URL:",S),console.log(" Object image available:",!!Kt),On&&re&&!await Pf.canMakeRequest(re.uid)){mm(ht,cn,dt),Kr(!0),k(!1);return}let ie=S;if(S.startsWith("/assets/")||S.startsWith("./assets/"))try{const Rr=await(await fetch(S)).blob();ie=await new Promise(Ft=>{const ar=new FileReader;ar.onload=()=>Ft(ar.result),ar.readAsDataURL(Rr)})}catch(wt){throw console.error("Error converting local image to data URL:",wt),new Error("Failed to load the default image")}let Te=null;Kt?(console.log(" Processing object image file:",Kt.name,Kt.type,Kt.size),Te=await TC(Kt),console.log(" Object image processed successfully:",!!Te)):console.log(" No object image file available");const Ie=await lw(),Ne=await Pf.submitImageGenerationRequest(re,T,ie,Te,Ie),$e=await Pf.waitForRequestCompletion(Ne);if(console.log("AI Service result:",$e),$e&&$e.storageUrl){const wt=Date.now()-M;jC(te,wt);const Rr=$e.storageUrl,jn={imageUrl:Rr,prompt:T,timestamp:g(new Date)};if(On&&re){pi(!0);try{const Ft=await El(re.uid,1,7);rr(Ft.history),ss(1),Ir(Ft.hasMore)}catch(Ft){console.error("Failed to reload history from Firebase:",Ft)}finally{pi(!1)}}else{const Ft={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...jn};rr(ar=>[Ft,...ar]),ss(1),Ir(!0)}P(Rr),qr(16/9),gi(null),za(null),is(null),Ar.current&&(Ar.current.value=""),yt(""),Oa(!0),Et(!0),Se(!0),_i(!1)}else alert("   .       .")}catch(ie){console.error("AI processing failed:",ie),(de=ie.message)!=null&&de.includes("limit reached")||(ke=ie.message)!=null&&ke.includes(" ")?(fm("limit_reached"),mm(ht,cn,dt),Kr(!0)):(xe=ie.message)!=null&&xe.includes("timeout")?(fm("timeout"),alert("    .  .")):(fm("unknown"),alert("  .       ."))}finally{k(!1)}},nP=[{title:" ",items:[{name:" ",description:"      ",icon:En},{name:" ",description:"  ",icon:En},{name:" ",description:"  ",icon:En},{name:" -",description:"  - ( )",icon:En},{name:"  ",description:"    ()",icon:En},{name:" ",description:"  ",icon:En},{name:" ",description:"  ",icon:En},{name:" ",description:"     ",icon:En}]},{title:" ",items:[{name:" ",description:"     ",icon:En},{name:" ",description:"    ",icon:En},{name:" ",description:"     ",icon:En},{name:" ",description:"     ",icon:En}]}],rP=[{title:" ",items:[{name:" ",description:"    ",icon:Ut},{name:" ",description:"  ",icon:Ut}]},{title:" ",items:[{name:" ",description:"  ",icon:Ut},{name:" ",description:"  vintage",icon:Ut},{name:" ",description:"  ",icon:Ut}]},{title:" ",items:[{name:" ",description:"     ",icon:Ut},{name:"",description:" ",icon:Ut},{name:" ",description:"    ",icon:Ut}]},{title:" ",items:[{name:" ",description:"    ",icon:Ut},{name:" ",description:"  ",icon:Ut},{name:" ",description:"    ",icon:Ut}]},{title:" '/",items:[{name:"' ",description:" '   ",icon:Ut},{name:"' ",description:"  ",icon:Ut}]},{title:" ",items:[{name:"  ",description:"      ",icon:Ut},{name:"  ",description:"      ",icon:Ut}]}];return d.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",children:[d.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",d.jsx("span",{className:"text-lg sm:text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),d.jsxs("button",{onClick:No,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${ht>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[ht>0?d.jsx(Ti,{className:"w-5 h-5"}):d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),ht>0?d.jsxs("div",{className:"flex flex-col items-start leading-none",children:[d.jsx("span",{children:" "}),d.jsxs("span",{className:"text-[10px] opacity-80",children:[dt-cn>0?dt-cn:0," "]})]}):" "]}),d.jsx("button",{onClick:()=>{s(0),e(!0),dw()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"",children:d.jsx(qD,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>vi(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:" ",children:d.jsx(WD,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"md:hidden flex items-center bg-surface/50 backdrop-blur-md rounded-full border border-white/10 p-1 pl-3 pr-1 gap-1",children:d.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-3",children:[On?d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((re==null?void 0:re.email)||"U")[0].toUpperCase()})}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center",children:d.jsx(Gf,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30",children:[d.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:dt-cn>0?dt-cn:0}),d.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})]})]})}),d.jsx("button",{onClick:()=>r(!0),className:"hidden md:flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:On?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((re==null?void 0:re.email)||"U")[0].toUpperCase()})}),d.jsxs("div",{className:"text-right hidden sm:block",children:[!(re!=null&&re.isAnonymous)&&d.jsx("div",{className:"text-xs text-textMuted",children:" -"}),d.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((re==null?void 0:re.email)||"").split("@")[0]||""})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(Gf,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:""})]})})]})]}),d.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[d.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-28 glass-panel rounded-2xl p-3 items-center animate-slide-in-right relative",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"flex flex-col gap-2.5 w-full",children:[d.jsxs("button",{ref:C,onClick:eu,disabled:N,className:"w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:" ",children:[d.jsx(AI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),d.jsx("span",{className:"text-[11px] text-blue-300 font-medium",children:" "})]}),d.jsxs("button",{ref:v,onClick:au,disabled:N,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group ${Kt?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/50":"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 hover:border-green-400/50"} hover:from-green-500/30 hover:to-emerald-500/30 border rounded-xl transition-all duration-300 shadow-lg shadow-green-500/10 hover:shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(xI,{className:`w-6 h-6 group-hover:scale-110 transition-transform ${Kt?"text-primary-400":"text-green-400"}`}),d.jsx("span",{className:`text-[11px] font-medium ${Kt?"text-primary-300":"text-green-300"}`,children:" "})]}),d.jsx("div",{className:"h-px w-full bg-white/10 my-1"}),d.jsxs("button",{ref:L,onClick:()=>je(!be),disabled:N,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-400/30 hover:border-purple-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20 ${be?"ring-2 ring-purple-400/50":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(SI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-purple-400"}),d.jsx("span",{className:"text-[11px] text-purple-300 font-medium",children:" "})]}),d.jsxs("button",{onClick:()=>gt(!xo),disabled:N,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-surfaceHighlight/40 border border-white/80 rounded-xl transition-all duration-300 ${xo?"bg-surfaceHighlight/60":"hover:bg-surfaceHighlight/50"} disabled:opacity-50 disabled:cursor-not-allowed`,title:" ",children:[d.jsx(_I,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${xo?"text-primary-300":"text-textMuted"}`}),d.jsx("span",{className:"text-[11px] text-textMuted font-medium",children:""})]})]})}),xo&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>gt(!1)}),d.jsxs("div",{className:"hidden lg:block fixed top-1/2 right-32 -translate-y-1/2 w-48 bg-surface/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-white/10 z-50 animate-fade-in",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm font-medium text-white",children:" "}),d.jsx("button",{onClick:()=>gt(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(mn,{className:"w-4 h-4 text-textMuted"})})]}),d.jsx("div",{className:"flex flex-col gap-1",children:[{icon:vI,label:"",action:()=>{nr(!sn),gt(!1)}},{icon:TI,label:"",action:()=>{se(!Y),gt(!1)}},{icon:yI,label:"",action:()=>{vn(!ts),gt(!1)}},{icon:En,label:" ",action:()=>{an(!on),gt(!1)}},{icon:Ut,label:"",action:()=>{Ht(!ln),gt(!1)}},{icon:ul,label:"",action:()=>{Ve(!ae),gt(!1)}}].map((T,M)=>d.jsxs("button",{onClick:T.action,disabled:N,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors text-right disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(T.icon,{className:"w-5 h-5 text-primary-400"}),d.jsx("span",{className:"text-sm text-white",children:T.label})]},M))}),d.jsx("div",{className:"mt-2 pt-2 border-t border-white/10",children:d.jsxs("button",{onClick:iu,className:`flex items-center justify-between w-full p-2 rounded-lg transition-all ${we?"bg-emerald-500/20 hover:bg-emerald-500/30":"hover:bg-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(II,{className:`w-5 h-5 ${we?"text-emerald-400":"text-gray-500"}`}),d.jsx("span",{className:"text-sm text-white",children:" AI"})]}),d.jsx("div",{className:`w-9 h-5 rounded-full p-0.5 transition-all ${we?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform ${we?"translate-x-4":"translate-x-0"}`})})]})})]})]}),d.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[d.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[bn&&In?d.jsx(dE,{beforeImage:In,afterImage:S}):d.jsx("img",{src:S,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${N?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:sl,onLoad:Kh,style:{objectPosition:"center"}}),N&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[d.jsxs("div",{className:"w-20 h-20 relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),d.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:"  ..."})]}),d.jsx("button",{onClick:()=>A(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:"",children:d.jsx(gI,{className:"w-5 h-5"})}),rs&&d.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:rs,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:lu,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),d.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",value:Wt,onChange:T=>yt(T.target.value),placeholder:"   ... (:     ,   )",disabled:N,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:T=>T.key==="Enter"&&!N&&j()}),d.jsx(cr,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),Wt&&d.jsx("button",{onClick:()=>!N&&yt(""),disabled:N,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),d.jsxs("button",{ref:q,onClick:j,disabled:N||!Wt.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{children:""}),d.jsx(cr,{className:"w-4 h-4"})]})]})]}),d.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[d.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:" "}),d.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${N?"opacity-50 pointer-events-none":""}`,children:[xn.length===0?d.jsxs("div",{className:"text-center py-10 opacity-50",children:[d.jsx(cr,{className:"w-8 h-8 mx-auto mb-2"}),d.jsx("p",{className:"text-xs",children:"  "})]}):xn.map(T=>d.jsxs("div",{onClick:()=>!N&&il(T),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),d.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[d.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:T.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:D(T)})]})]},T.id)),Eo&&d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Mo,{className:"w-6 h-6 text-primary-400 animate-spin"})}),ir&&!Eo&&xn.length>0&&d.jsx("button",{onClick:m,disabled:N,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),o&&d.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[d.jsx(cr,{className:"w-4 h-4 text-white flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:[d.jsx("span",{className:"md:inline block",children:"  ."}),d.jsx("span",{className:"hidden md:inline",children:" "}),d.jsx("span",{className:"md:inline block",children:"    "})]})]}),l&&d.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},children:[d.jsx("div",{className:"absolute inset-0 bg-black/70"}),d.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-44 lg:bottom-32 w-[90%] max-w-[340px] bg-white text-gray-900 p-5 rounded-2xl shadow-2xl animate-bounce-in",dir:"rtl",onClick:T=>T.stopPropagation(),children:[d.jsx("div",{className:"absolute bottom-[-8px] left-1/2 -translate-x-1/2 w-0 h-0 border-solid border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:" !  "}),d.jsx("button",{onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(mn,{size:18})})]}),d.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:['     . : "    "  "  ".',d.jsx("br",{}),d.jsx("br",{})," ",d.jsx("strong",{children:":"}),'   ""      , ,  !']}),d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary-50 rounded-xl mb-4",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("span",{className:"text-sm text-primary-700 font-medium",children:'       ""'})]}),d.jsx("button",{onClick:()=>{u(!1),f(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg",children:",  !"})]})]})]}),d.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:d.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[d.jsxs("div",{className:"relative",children:[rs&&d.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:rs,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:lu,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[d.jsx("input",{type:"text",value:Wt,onChange:T=>yt(T.target.value),placeholder:" ?",disabled:N,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:T=>T.key==="Enter"&&!N&&j()}),Wt&&d.jsx("button",{onClick:()=>!N&&yt(""),disabled:N,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),d.jsx("button",{ref:E,onClick:j,disabled:!Wt.trim()||N,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(cr,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex justify-center gap-4 py-1",children:[d.jsxs("button",{ref:b,onClick:eu,disabled:N,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:d.jsx(AI,{className:"w-6 h-6 text-blue-400"})}),d.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:" "})]}),d.jsxs("button",{ref:I,onClick:au,disabled:N,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl ${Kt?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/40":"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-400/40"} flex items-center justify-center border active:scale-95 transition-transform shadow-lg shadow-green-500/20`,children:d.jsx(xI,{className:`w-6 h-6 ${Kt?"text-primary-400":"text-green-400"}`})}),d.jsx("span",{className:`text-[10px] font-medium ${Kt?"text-primary-300":"text-green-300"}`,children:" "})]}),d.jsxs("button",{ref:z,onClick:()=>je(!0),disabled:N,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center border border-purple-400/40 active:scale-95 transition-transform shadow-lg shadow-purple-500/20",children:d.jsx(SI,{className:"w-6 h-6 text-purple-400"})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:" "})]}),p&&!N&&we&&(ja.length>0||Ao)&&d.jsxs("div",{className:"relative flex flex-col items-center gap-1",children:[d.jsx("div",{className:"w-14 h-14 flex items-center justify-center",children:d.jsx(hE,{suggestions:ja,onSelect:ru,onClose:()=>To([]),isMobile:!0,isThinking:Ao,initialShowSuggestions:Fa})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:" AI"})]}),d.jsxs("button",{onClick:()=>gt(!0),disabled:N,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surfaceHighlight/40 flex items-center justify-center border border-white/80 active:scale-95 transition-transform",children:d.jsx(_I,{className:"w-6 h-6 text-textMuted"})}),d.jsx("span",{className:"text-[10px] text-textMuted font-medium",children:""})]})]}),xo&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>gt(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10",onClick:T=>T.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),d.jsx("button",{onClick:()=>gt(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(mn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:vI,label:"",action:()=>{nr(!0),gt(!1)}},{icon:TI,label:"",action:()=>{se(!0),gt(!1)}},{icon:yI,label:"",action:()=>{vn(!0),gt(!1)}},{icon:En,label:" ",action:()=>{an(!0),gt(!1)}},{icon:Ut,label:"",action:()=>{Ht(!0),gt(!1)}},{icon:ul,label:"",action:()=>{Ve(!0),gt(!1)}}].map((T,M)=>d.jsxs("button",{onClick:T.action,disabled:N,className:"flex flex-col items-center gap-2 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(T.icon,{className:"w-7 h-7 text-primary-400"}),d.jsx("span",{className:"text-xs text-white font-medium",children:T.label})]},M))}),d.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:d.jsxs("button",{onClick:iu,className:`w-full flex items-center justify-between p-4 rounded-2xl transition-all active:scale-[0.98] ${we?"bg-gradient-to-r from-emerald-500/20 to-green-500/20 border border-emerald-400/30":"bg-white/5 border border-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(II,{className:`w-6 h-6 ${we?"text-emerald-400":"text-gray-500"}`}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm text-white font-medium block",children:" AI"}),d.jsx("span",{className:`text-xs ${we?"text-emerald-300":"text-gray-500"}`,children:we?" -  ":" -  "})]})]}),d.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-all ${we?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${we?"translate-x-5":"translate-x-0"}`})})]})})]})]}),d.jsx("div",{className:"hidden",children:xn.length>0&&d.jsxs("div",{className:`pt-2 border-t border-white/5 ${N?"opacity-50 pointer-events-none":""}`,children:[d.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[" (",xn.length,")"]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:T=>{if(N)return;const{scrollLeft:M,scrollWidth:U,clientWidth:te}=T.target;M+te>=U-10&&ir&&!yi&&m()},children:[xn.map(T=>d.jsx("div",{onClick:()=>!N&&il(T),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-full h-full object-cover"})},T.id)),yi&&d.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:d.jsx(Mo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),ir&&!yi&&d.jsxs("button",{onClick:m,disabled:N,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{className:"text-[10px]",children:""}),d.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),x&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>A(!1)}),d.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(gI,{className:"w-5 h-5 text-primary-400"})," "]}),d.jsx("button",{onClick:()=>A(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:d.jsx("span",{className:"text-xl leading-none",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[xn.length===0?d.jsxs("div",{className:"text-center py-8 opacity-50",children:[d.jsx(cr,{className:"w-6 h-6 mx-auto mb-2"}),d.jsx("p",{className:"text-xs text-gray-400",children:"  "})]}):xn.map(T=>d.jsxs("div",{onClick:()=>{N||(il(T),A(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[d.jsx("img",{src:T.thumbnailUrl||T.storageUrl||T.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:T.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:D(T)})]})]},T.id)),Eo&&d.jsx("div",{className:"flex justify-center py-2",children:d.jsx(Mo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),ir&&!Eo&&xn.length>0&&d.jsx("button",{onClick:m,disabled:N,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),pg&&d.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 md:p-8 animate-fade-in",onClick:ps,children:d.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center gap-4",onClick:T=>T.stopPropagation(),children:[d.jsx("button",{onClick:ps,className:"absolute top-2 right-2 bg-black/40 hover:bg-black/60 text-white p-2 md:p-3 rounded-full backdrop-blur-md border border-white/10 z-50 transition-all hover:scale-110",children:d.jsx(mn,{className:"w-5 h-5 md:w-6 md:h-6"})}),d.jsxs("div",{ref:Ja,className:`flex-1 w-full relative flex items-center justify-center overflow-hidden rounded-2xl bg-black/50 border border-white/5 ${p?"mb-20":""} ${Ee?"cursor-crosshair":""}`,onMouseDown:Ee?tu:void 0,onMouseMove:Ee?Do:void 0,onMouseUp:Ee?nu:void 0,onMouseLeave:Ee?nu:void 0,onTouchStart:Ee?tu:void 0,onTouchMove:Ee?Do:void 0,onTouchEnd:Ee?nu:void 0,children:[In&&bn&&!Ee?d.jsx(dE,{beforeImage:In,afterImage:S}):d.jsx("img",{ref:fs,src:S,alt:"Full size view",className:`max-w-full max-h-full object-contain rounded-lg shadow-2xl ${Ee?"select-none pointer-events-none":""}`,draggable:!1,crossOrigin:"anonymous"}),Ee&&Fe&&d.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 pointer-events-none",style:{left:Math.min(Fe.startX,Fe.endX),top:Math.min(Fe.startY,Fe.endY),width:Math.abs(Fe.endX-Fe.startX),height:Math.abs(Fe.endY-Fe.startY)},children:d.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"  "})}),Ee&&!Fe&&d.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-30 pointer-events-none",children:d.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-sm text-white px-4 py-2 rounded-full text-center shadow-lg flex items-center gap-2",children:[d.jsx(Kg,{className:"w-4 h-4"}),d.jsx("p",{className:"text-sm font-medium",children:"    "})]})}),wg&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-20",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Mo,{className:"w-10 h-10 text-blue-400 animate-spin mx-auto mb-2"}),d.jsx("p",{className:"text-white",children:" -Google Lens..."})]})})]}),p?Xc&&!Ro&&In?d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/90 backdrop-blur-xl border-t border-white/10 px-3 py-3 pb-7 z-50",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:ou,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 active:bg-white/10 transition-all",children:[d.jsx(bI,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:" "})]}),d.jsxs("button",{onClick:Jr,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold active:from-emerald-600 active:to-teal-600 transition-all",children:[d.jsx(Ti,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:"! "})]})]})}):d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-surface/95 backdrop-blur-xl border-t border-white/10 p-2 pb-8 z-50 grid grid-cols-5 gap-1",children:[d.jsxs("button",{onClick:()=>Et(!bn),disabled:!In||Ee,className:`flex flex-col items-center justify-center gap-1 p-2 rounded-xl transition-all ${bn?"text-primary-300 bg-primary-500/20":"text-gray-400 hover:text-white disabled:opacity-30"}`,children:[d.jsx(x0,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),Ee?d.jsxs("button",{onClick:Xr,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 bg-red-500/10 hover:bg-red-500/20 transition-all",children:[d.jsx(mn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}):d.jsxs("button",{onClick:Po,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-blue-400 bg-blue-500/10 hover:bg-blue-500/20 transition-all",children:[d.jsx(Kg,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:rl,disabled:Ee,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-green-400 bg-green-500/10 hover:bg-green-500/20 transition-all disabled:opacity-30",children:[d.jsx(EI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:nl,disabled:Ee,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all disabled:opacity-30",children:[d.jsx(mI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]}),d.jsxs("button",{onClick:Ee?Xr:ps,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 hover:bg-red-500/10 transition-all",children:[d.jsx(mn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:""})]})]}):Xc&&!Ro&&In?d.jsx("div",{className:"w-full flex justify-center",children:d.jsx("div",{className:"bg-gradient-to-r from-surface/95 via-surface/90 to-surface/95 backdrop-blur-xl p-6 rounded-3xl border border-white/10 shadow-2xl",children:d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 shadow-lg shadow-amber-500/30",children:d.jsx(cr,{className:"w-7 h-7 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white",children:"    ?"}),d.jsx("p",{className:"text-sm text-gray-400",children:"     "})]})]}),d.jsx("div",{className:"w-px h-12 bg-white/10"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:ou,className:"flex items-center gap-2 px-5 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/20 transition-all whitespace-nowrap group",children:[d.jsx(bI,{className:"w-5 h-5 group-hover:-rotate-45 transition-transform"}),d.jsx("span",{className:"font-medium",children:"  "})]}),d.jsxs("button",{onClick:Jr,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold hover:from-emerald-600 hover:to-teal-600 transition-all shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/40 whitespace-nowrap group",children:[d.jsx(Ti,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{children:"!   "})]})]})]})})}):d.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-900/90 via-gray-800/90 to-gray-900/90 backdrop-blur-xl p-4 px-8 rounded-2xl border border-white/15 shadow-2xl shadow-black/50",children:[d.jsxs("button",{onClick:()=>Et(!bn),disabled:!In||Ee,className:`group flex items-center gap-2.5 px-5 py-3.5 rounded-xl border transition-all duration-200 whitespace-nowrap ${bn?"bg-primary-500/25 text-primary-300 border-primary-500/40 shadow-lg shadow-primary-500/20":"bg-white/5 text-gray-300 border-white/10 hover:bg-white/10 hover:border-white/20 hover:text-white hover:scale-[1.02] disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100"}`,children:[d.jsx(x0,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:""})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),Ee?d.jsxs("button",{onClick:Xr,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl border border-red-500/30 hover:border-red-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/20",children:[d.jsx(mn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:" "})]}):d.jsxs("button",{onClick:Po,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-blue-600/20 hover:bg-blue-600/35 text-blue-400 hover:text-blue-300 rounded-xl border border-blue-500/30 hover:border-blue-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-blue-500/20",children:[d.jsx(Kg,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:"  "})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:rl,disabled:Ee,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-green-600/20 hover:bg-green-600/35 text-green-400 hover:text-green-300 rounded-xl border border-green-500/30 hover:border-green-500/50 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-green-500/20",children:[d.jsx(EI,{className:"w-5 h-5 group-hover:scale-110 group-hover:-rotate-12 transition-transform"}),d.jsx("span",{className:"font-medium",children:""})]}),d.jsxs("button",{onClick:nl,disabled:Ee,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-white/10 hover:bg-white/20 text-white rounded-xl border border-white/15 hover:border-white/30 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-white/10",children:[d.jsx(mI,{className:"w-5 h-5 group-hover:translate-y-0.5 transition-transform"}),d.jsx("span",{className:"font-medium",children:""})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:Ee?Xr:ps,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/10 hover:bg-red-500/25 text-red-400 hover:text-red-300 rounded-xl border border-red-500/20 hover:border-red-500/40 transition-all duration-200 whitespace-nowrap hover:scale-[1.02]",children:[d.jsx(mn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:""})]})]})]})}),sn&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:" "}),d.jsx("button",{onClick:()=>nr(!1),className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(W).map(T=>d.jsx("button",{onClick:()=>Sh(T),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${Ba===T?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:T},T))}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(ex=Re[Ba])==null?void 0:ex.map((T,M)=>d.jsxs("button",{onClick:()=>Tt(T),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[d.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:T.hex}})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:T.name}),d.jsx("div",{className:"text-[10px] text-gray-500",children:T.ral})]})]},M))})]})]})}),[{show:Y,close:()=>se(!1),title:"  ",options:Ct,onSelect:al},{show:ts,close:()=>vn(!1),title:"  ",options:Nt,onSelect:Mn},{show:be,close:()=>je(!1),title:"  ",options:ys,onSelect:cu}].map((T,M)=>T.show&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:T.title}),d.jsx("button",{onClick:T.close,className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.options.map((U,te)=>d.jsxs("button",{onClick:()=>T.onSelect(U),className:`flex items-center p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group ${U.thumbnail?"h-24":""}`,children:[U.thumbnail?d.jsx("div",{className:"ml-3 h-20 w-auto min-w-[80px] rounded-lg overflow-hidden flex-shrink-0 border border-white/10 group-hover:border-primary-500/50 transition-colors bg-black/20",children:d.jsx("img",{src:U.thumbnail,alt:U.name,className:"h-full w-auto object-contain"})}):d.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform flex-shrink-0",children:""}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300 truncate",children:U.name}),d.jsx("div",{className:"text-xs text-gray-400 truncate",children:U.value})]})]},te))})})]})},M)),(on||ln||ae)&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:on?" ":ln?" ":"  /"}),d.jsx("button",{onClick:()=>{an(!1),Ht(!1),Ve(!1)},className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[d.jsx("p",{className:"text-center text-gray-400 mb-6",children:"    ."}),d.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[on&&nP.map((T,M)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:T.title}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.items.map((U,te)=>d.jsxs("button",{onClick:()=>{Zh(U.description),an(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:U.name}),d.jsx(U.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:U.description})]},te))})]},M)),ln&&rP.map((T,M)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:T.title}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.items.map((U,te)=>d.jsxs("button",{onClick:()=>{Zh(U.description),Ht(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:U.name}),d.jsx(U.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:U.description})]},te))})]},M)),ae&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:()=>Jh("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"   "}),d.jsx(ul,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>Jh("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"  "}),d.jsx(ul,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>Jh("   "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"   "}),d.jsx(ul,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>Jh("  "),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:"  "}),d.jsx(ul,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),Rh&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl overflow-hidden",children:[d.jsx("button",{onClick:()=>Hr(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white z-10",children:""}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:["",d.jsx("span",{className:"text-xl align-super mr-1 bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light",children:"AI"})]})]})}),d.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 mb-4 relative",children:[d.jsx("div",{className:`absolute inset-y-1 w-[calc(50%-4px)] bg-primary-600 shadow-lg rounded-lg transition-all duration-300 ease-in-out ${sr==="signup"?"left-[50%]":"left-1"}`}),d.jsx("button",{onClick:()=>tt("signup"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${sr==="signup"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:"  "}),d.jsx("button",{onClick:()=>tt("login"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${sr==="login"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:""})]}),d.jsx("p",{className:"text-sm text-gray-400 min-h-[20px]",children:sr==="login"?" !   ":"        '"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"email",placeholder:"",value:br,onChange:T=>os(T.target.value),className:"input-glass w-full"}),d.jsx("input",{type:"password",placeholder:"",value:or,onChange:T=>Er(T.target.value),className:"input-glass w-full"}),sr==="signup"&&d.jsx("div",{className:"animate-slide-down",children:d.jsx("input",{type:"password",placeholder:" ",value:as,onChange:T=>Nh(T.target.value),className:"input-glass w-full"})}),d.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:["   ",d.jsx("a",{href:"/eula.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "}),"",d.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:" "})]}),d.jsx("button",{onClick:un,disabled:Gc,className:"btn-primary w-full py-3 text-lg mt-4",children:Gc?d.jsx(Mo,{className:"w-6 h-6 animate-spin mx-auto"}):sr==="login"?"":" "}),d.jsx("div",{className:"flex justify-center items-center mt-4 text-sm",children:sr==="login"&&d.jsx("button",{onClick:Yh,className:"text-gray-400 hover:text-white text-xs",children:" ?"})})]})]})}),kh&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),d.jsx("p",{className:"text-gray-400 mb-6",children:"    ?"}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:()=>wi(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:""}),d.jsx("button",{onClick:gs,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),d.jsx("input",{ref:qh,type:"file",accept:"image/*",onChange:Co,className:"hidden"}),d.jsx("input",{ref:Ar,type:"file",accept:"image/*",onChange:Qh,className:"hidden"}),d.jsx(uE,{isOpen:Kc,onClose:()=>Kr(!1),onShowPricing:No,userSubscription:ht,currentUsage:cn,limit:dt}),d.jsx(Sz,{isOpen:n,onClose:()=>r(!1),user:re,userCredits:dt,userUsage:cn,userSubscription:ht,onLogin:()=>{tt("login"),Hr(!0)},onLogout:()=>wi(!0),onSubscriptionClick:No,onRedeemCoupon:c,onCouponSuccess:T=>{Fh(T),jh(!0)}}),d.jsx(Az,{isOpen:Qc,onClose:()=>Yc(!1),subscriptionName:qc[ht]}),Mh&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-emerald-900/90 to-teal-900/90 rounded-3xl overflow-hidden shadow-2xl border border-emerald-500/30 animate-scale-up",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-4 left-8 w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),d.jsx("div",{className:"absolute top-12 right-12 w-2 h-2 bg-emerald-300 rounded-full animate-bounce",style:{animationDelay:"0.3s"}}),d.jsx("div",{className:"absolute top-8 left-1/3 w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),d.jsx("div",{className:"absolute top-16 right-1/4 w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),d.jsxs("div",{className:"relative p-8 text-center",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/30 animate-pulse",children:d.jsx(cr,{className:"w-12 h-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" ! "}),d.jsxs("div",{className:"my-6 py-4 px-6 rounded-2xl bg-white/10 border border-white/20",children:[d.jsx("div",{className:"text-5xl font-bold text-emerald-300 mb-1",children:yg}),d.jsx("div",{className:"text-emerald-100/80 text-lg",children:"  "})]}),d.jsx("p",{className:"text-emerald-100/70 mb-6",children:" ! "}),d.jsx("button",{onClick:()=>jh(!1),className:"w-full py-4 rounded-2xl bg-white text-emerald-900 font-bold text-lg hover:bg-emerald-50 transition-colors shadow-lg",children:",  !"})]})]})}),Oh&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:d.jsx(Ti,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),d.jsxs("p",{className:"text-gray-300",children:["  ,   ",d.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),d.jsx("button",{onClick:()=>{Ha(!1),tt("signup"),Hr(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),d.jsx("button",{onClick:()=>Ha(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),So&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:d.jsx(Gf,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" "}),d.jsxs("p",{className:"text-gray-300",children:["       .",d.jsx("br",{}),"   ?"]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>{Wr(!1),Vh(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:" "}),d.jsx("button",{onClick:()=>{Wr(!1),Hr(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),Lh&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[d.jsx("button",{onClick:()=>cs(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent",children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:" "}),d.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:"   "}),d.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:"         .       ."})]}),d.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 pt-6 md:pt-8 scrollbar-custom",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-5 md:p-6 flex flex-col h-full",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-white",children:"19"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"50  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"   "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:" "})]})]}),d.jsx("button",{onClick:()=>Ei("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:ht===1&&dt===50,className:`w-full py-3 rounded-xl font-medium border block text-center ${ht===1&&dt===50?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10 hover:bg-white/10 transition-all"}`,children:ht===1&&dt===50?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(Ti,{className:"w-5 h-5"}),"  "]}):" "})]})]}),d.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:" :  4  ! "}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"49"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 35%  "})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{className:"font-medium",children:"200  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"  '"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:"   "})]})]}),d.jsx("button",{onClick:()=>Ei("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:ht===2&&dt===200,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ht===2&&dt===200?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30 hover:from-secondary-400 hover:to-secondary-500 transition-all"}`,children:ht===2&&dt===200?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(Ti,{className:"w-5 h-5"}),"  "]}):" "})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-amber-900/30 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/30 border border-amber-500/30 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-amber-900/10",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-amber-500 to-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:"  "}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:""}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:"99"}),d.jsx("span",{className:"text-sm text-gray-400",children:"/"})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:" 42%  "})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{className:"font-medium",children:"450  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:" "})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:"  "})]})]}),d.jsx("button",{onClick:()=>Ei("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:ht===3&&dt===450,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ht===3&&dt===450?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-amber-500 to-yellow-500 text-black shadow-amber-900/30 hover:from-amber-400 hover:to-yellow-400 transition-all"}`,children:ht===3&&dt===450?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(Ti,{className:"w-5 h-5"}),"  "]}):" "})]})]})]})}),d.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:"     .     . .."})]})}),!p&&!N&&we&&d.jsx(hE,{suggestions:ja,onSelect:ru,onClose:()=>To([]),isMobile:!1,isThinking:Ao,initialShowSuggestions:Fa}),t&&d.jsx(Ez,{step:i,steps:_g,onNext:Hh,onSkip:Sr,onComplete:ms}),ko&&el&&d.jsx(Tz,{color:el,onClose:()=>Za(!1),onApply:ge}),d.jsx(uE,{isOpen:Kc,onClose:()=>Kr(!1),onShowPricing:No,userSubscription:ht,currentUsage:cn,limit:dt}),Wa&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(wI,{className:"w-5 h-5 text-primary-400"})," "]}),d.jsx("button",{onClick:()=>{vi(!1),Ii("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:d.jsx("span",{className:"text-2xl leading-none",children:""})})]}),d.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"  !      ."})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[Jc&&d.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:Jc}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("input",{type:"tel",value:Qr,onChange:T=>Uh(T.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("input",{type:"email",value:xi,onChange:T=>Bh(T.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:""}),d.jsx("textarea",{value:Ka,onChange:T=>zh(T.target.value),placeholder:"   ...",rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:"rtl"})]}),d.jsx("p",{className:"text-xs text-gray-500 text-center",children:"*      "}),d.jsx("button",{onClick:su,disabled:$h,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:$h?d.jsxs(d.Fragment,{children:[d.jsx(Mo,{className:"w-5 h-5 animate-spin"}),"..."]}):d.jsxs(d.Fragment,{children:[d.jsx(wI,{className:"w-5 h-5"})," "]})})]})]})}),Yr&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[d.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:d.jsx(Ti,{className:"w-10 h-10 text-emerald-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:" !"})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:["   .",d.jsx("br",{}),"   ."]}),d.jsx("button",{onClick:()=>Qa(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:""})]})]})})]})}Ry.createRoot(document.getElementById("root")).render(d.jsx(SP.StrictMode,{children:d.jsx(Rz,{})}));export{I4 as $,Oz as A,Jz as B,i8 as C,Qj as D,Rd as E,Ns as F,Ps as G,Fz as H,mM as I,f8 as J,S8 as K,rb as L,q4 as M,UM as N,qi as O,ta as P,o8 as Q,g8 as R,k0 as S,zj as T,Yz as U,d4 as V,w8 as W,b8 as X,A8 as Y,m8 as Z,E4 as _,sh as a,fa as a$,Uz as a0,nM as a1,h4 as a2,_8 as a3,I8 as a4,T8 as a5,yM as a6,d8 as a7,Zz as a8,$z as a9,hi as aA,Oe as aB,Kn as aC,Pa as aD,Da as aE,Me as aF,B as aG,fi as aH,g6 as aI,U6 as aJ,jt as aK,Uc as aL,vh as aM,um as aN,fg as aO,xh as aP,dg as aQ,Fv as aR,Qn as aS,hg as aT,Us as aU,Ce as aV,F6 as aW,Ur as aX,M6 as aY,M_ as aZ,at as a_,Qz as aa,s8 as ab,u4 as ac,E_ as ad,zz as ae,Kz as af,Xz as ag,y8 as ah,x8 as ai,E8 as aj,u8 as ak,Bz as al,c8 as am,n8 as an,r8 as ao,v8 as ap,t8 as aq,l8 as ar,a8 as as,e8 as at,Hz as au,qN as av,zd as aw,_6 as ax,$n as ay,V8 as az,ih as b,cm as b$,K as b0,N8 as b1,Xj as b2,Ze as b3,L$ as b4,he as b5,k8 as b6,D$ as b7,P$ as b8,P8 as b9,Y8 as bA,Q8 as bB,st as bC,bh as bD,R6 as bE,f$ as bF,$1 as bG,i$ as bH,s$ as bI,iw as bJ,o$ as bK,a$ as bL,y6 as bM,R$ as bN,E$ as bO,O8 as bP,vy as bQ,W8 as bR,U1 as bS,m$ as bT,g$ as bU,p$ as bV,w6 as bW,Ql as bX,d$ as bY,h$ as bZ,G8 as b_,xr as ba,a5 as bb,u$ as bc,Z8 as bd,e$ as be,H8 as bf,b$ as bg,I$ as bh,J8 as bi,F8 as bj,wh as bk,D8 as bl,p6 as bm,A6 as bn,C$ as bo,c$ as bp,v$ as bq,z8 as br,N$ as bs,mr as bt,q8 as bu,t$ as bv,M8 as bw,j8 as bx,B8 as by,k$ as bz,jz as c,y$ as c0,w$ as c1,V6 as c2,am as c3,NN as c4,n$ as c5,L8 as c6,_$ as c7,x$ as c8,Ih as c9,S$ as ca,R8 as cb,r$ as cc,T6 as cd,K8 as ce,X8 as cf,$8 as cg,l$ as ch,T$ as ci,U8 as cj,lm as ck,A$ as cl,Ra as d,Pz as e,Cs as f,Kf as g,Vz as h,Hl as i,Bj as j,Dz as k,Lz as l,V_ as m,Ds as n,Gz as o,b4 as p,p8 as q,C4 as r,Uj as s,YS as t,m4 as u,qz as v,zM as w,Wz as x,Mz as y,h8 as z};
