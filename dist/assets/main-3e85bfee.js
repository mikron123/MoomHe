var kN=Object.defineProperty;var CN=(t,e,n)=>e in t?kN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fb=(t,e,n)=>(CN(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bE={exports:{}},_p={},IE={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=Symbol.for("react.element"),PN=Symbol.for("react.portal"),NN=Symbol.for("react.fragment"),DN=Symbol.for("react.strict_mode"),LN=Symbol.for("react.profiler"),ON=Symbol.for("react.provider"),MN=Symbol.for("react.context"),VN=Symbol.for("react.forward_ref"),jN=Symbol.for("react.suspense"),FN=Symbol.for("react.memo"),UN=Symbol.for("react.lazy"),mb=Symbol.iterator;function zN(t){return t===null||typeof t!="object"?null:(t=mb&&t[mb]||t["@@iterator"],typeof t=="function"?t:null)}var xE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TE=Object.assign,EE={};function Rc(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||xE}Rc.prototype.isReactComponent={};Rc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SE(){}SE.prototype=Rc.prototype;function E0(t,e,n){this.props=t,this.context=e,this.refs=EE,this.updater=n||xE}var S0=E0.prototype=new SE;S0.constructor=E0;TE(S0,Rc.prototype);S0.isPureReactComponent=!0;var pb=Array.isArray,AE=Object.prototype.hasOwnProperty,A0={current:null},kE={key:!0,ref:!0,__self:!0,__source:!0};function CE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)AE.call(e,r)&&!kE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:lh,type:t,key:s,ref:o,props:i,_owner:A0.current}}function BN(t,e){return{$$typeof:lh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k0(t){return typeof t=="object"&&t!==null&&t.$$typeof===lh}function $N(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gb=/\/+/g;function Pg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$N(""+t.key):e.toString(36)}function Uf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lh:case PN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pg(o,0):r,pb(i)?(n="",t!=null&&(n=t.replace(gb,"$&/")+"/"),Uf(i,e,n,"",function(u){return u})):i!=null&&(k0(i)&&(i=BN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Pg(s,a);o+=Uf(s,e,n,l,i)}else if(l=zN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Pg(s,a++),o+=Uf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lf(t,e,n){if(t==null)return t;var r=[],i=0;return Uf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},zf={transition:null},HN={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:zf,ReactCurrentOwner:A0};function RE(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:lf,forEach:function(t,e,n){lf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lf(t,function(){e++}),e},toArray:function(t){return lf(t,function(e){return e})||[]},only:function(t){if(!k0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Rc;pe.Fragment=NN;pe.Profiler=LN;pe.PureComponent=E0;pe.StrictMode=DN;pe.Suspense=jN;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HN;pe.act=RE;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=TE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=A0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)AE.call(e,l)&&!kE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:lh,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:MN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ON,_context:t},t.Consumer=t};pe.createElement=CE;pe.createFactory=function(t){var e=CE.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:VN,render:t}};pe.isValidElement=k0;pe.lazy=function(t){return{$$typeof:UN,_payload:{_status:-1,_result:t},_init:WN}};pe.memo=function(t,e){return{$$typeof:FN,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=zf.transition;zf.transition={};try{t()}finally{zf.transition=e}};pe.unstable_act=RE;pe.useCallback=function(t,e){return xn.current.useCallback(t,e)};pe.useContext=function(t){return xn.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};pe.useEffect=function(t,e){return xn.current.useEffect(t,e)};pe.useId=function(){return xn.current.useId()};pe.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return xn.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};pe.useRef=function(t){return xn.current.useRef(t)};pe.useState=function(t){return xn.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return xn.current.useTransition()};pe.version="18.3.1";IE.exports=pe;var F=IE.exports;const GN=RN(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=F,KN=Symbol.for("react.element"),YN=Symbol.for("react.fragment"),QN=Object.prototype.hasOwnProperty,JN=qN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XN={key:!0,ref:!0,__self:!0,__source:!0};function PE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QN.call(e,r)&&!XN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:KN,type:t,key:s,ref:o,props:i,_owner:JN.current}}_p.Fragment=YN;_p.jsx=PE;_p.jsxs=PE;bE.exports=_p;var d=bE.exports,Uy={},NE={exports:{}},sr={},DE={exports:{}},LE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,re){var se=Q.length;Q.push(re);e:for(;0<se;){var Ee=se-1>>>1,ve=Q[Ee];if(0<i(ve,re))Q[Ee]=re,Q[se]=ve,se=Ee;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var re=Q[0],se=Q.pop();if(se!==re){Q[0]=se;e:for(var Ee=0,ve=Q.length,$e=ve>>>1;Ee<$e;){var dn=2*(Ee+1)-1,jn=Q[dn],hn=dn+1,lt=Q[hn];if(0>i(jn,se))hn<ve&&0>i(lt,jn)?(Q[Ee]=lt,Q[hn]=se,Ee=hn):(Q[Ee]=jn,Q[dn]=se,Ee=dn);else if(hn<ve&&0>i(lt,se))Q[Ee]=lt,Q[hn]=se,Ee=hn;else break e}}return re}function i(Q,re){var se=Q.sortIndex-re.sortIndex;return se!==0?se:Q.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,y=!1,_=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=Q)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=n(u)}}function N(Q){if(E=!1,T(Q),!_)if(n(l)!==null)_=!0,Cr(z);else{var re=n(u);re!==null&&le(N,re.startTime-Q)}}function z(Q,re){_=!1,E&&(E=!1,I(w),w=-1),y=!0;var se=p;try{for(T(re),f=n(l);f!==null&&(!(f.expirationTime>re)||Q&&!P());){var Ee=f.callback;if(typeof Ee=="function"){f.callback=null,p=f.priorityLevel;var ve=Ee(f.expirationTime<=re);re=t.unstable_now(),typeof ve=="function"?f.callback=ve:f===n(l)&&r(l),T(re)}else r(l);f=n(l)}if(f!==null)var $e=!0;else{var dn=n(u);dn!==null&&le(N,dn.startTime-re),$e=!1}return $e}finally{f=null,p=se,y=!1}}var B=!1,x=null,w=-1,A=5,C=-1;function P(){return!(t.unstable_now()-C<A)}function O(){if(x!==null){var Q=t.unstable_now();C=Q;var re=!0;try{re=x(!0,Q)}finally{re?k():(B=!1,x=null)}}else B=!1}var k;if(typeof b=="function")k=function(){b(O)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,rt=Se.port2;Se.port1.onmessage=O,k=function(){rt.postMessage(null)}}else k=function(){R(O,0)};function Cr(Q){x=Q,B||(B=!0,k())}function le(Q,re){w=R(function(){Q(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,Cr(z))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var se=p;p=re;try{return Q()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var se=p;p=Q;try{return re()}finally{p=se}},t.unstable_scheduleCallback=function(Q,re,se){var Ee=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ee+se:Ee):se=Ee,Q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,Q={id:h++,callback:re,priorityLevel:Q,startTime:se,expirationTime:ve,sortIndex:-1},se>Ee?(Q.sortIndex=se,e(u,Q),n(l)===null&&Q===n(u)&&(E?(I(w),w=-1):E=!0,le(N,se-Ee))):(Q.sortIndex=ve,e(l,Q),_||y||(_=!0,Cr(z))),Q},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Q){var re=p;return function(){var se=p;p=re;try{return Q.apply(this,arguments)}finally{p=se}}}})(LE);DE.exports=LE;var ZN=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=F,nr=ZN;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OE=new Set,_d={};function Ma(t,e){tc(t,e),tc(t+"Capture",e)}function tc(t,e){for(_d[t]=e,t=0;t<e.length;t++)OE.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zy=Object.prototype.hasOwnProperty,t2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yb={},wb={};function n2(t){return zy.call(wb,t)?!0:zy.call(yb,t)?!1:t2.test(t)?wb[t]=!0:(yb[t]=!0,!1)}function r2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function i2(t,e,n,r){if(e===null||typeof e>"u"||r2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qt[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qt[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qt[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qt[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qt[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qt[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qt[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qt[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qt[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var C0=/[\-:]([a-z])/g;function R0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(C0,R0);Qt[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(C0,R0);Qt[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(C0,R0);Qt[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function P0(t,e,n,r){var i=Qt.hasOwnProperty(e)?Qt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(i2(e,n,i,r)&&(n=null),r||i===null?n2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var os=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cf=Symbol.for("react.element"),Rl=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),N0=Symbol.for("react.strict_mode"),By=Symbol.for("react.profiler"),ME=Symbol.for("react.provider"),VE=Symbol.for("react.context"),D0=Symbol.for("react.forward_ref"),$y=Symbol.for("react.suspense"),Wy=Symbol.for("react.suspense_list"),L0=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),jE=Symbol.for("react.offscreen"),vb=Symbol.iterator;function xu(t){return t===null||typeof t!="object"?null:(t=vb&&t[vb]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Ng;function ju(t){if(Ng===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ng=e&&e[1]||""}return`
`+Ng+t}var Dg=!1;function Lg(t,e){if(!t||Dg)return"";Dg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Dg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ju(t):""}function s2(t){switch(t.tag){case 5:return ju(t.type);case 16:return ju("Lazy");case 13:return ju("Suspense");case 19:return ju("SuspenseList");case 0:case 2:case 15:return t=Lg(t.type,!1),t;case 11:return t=Lg(t.type.render,!1),t;case 1:return t=Lg(t.type,!0),t;default:return""}}function Hy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pl:return"Fragment";case Rl:return"Portal";case By:return"Profiler";case N0:return"StrictMode";case $y:return"Suspense";case Wy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VE:return(t.displayName||"Context")+".Consumer";case ME:return(t._context.displayName||"Context")+".Provider";case D0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case L0:return e=t.displayName||null,e!==null?e:Hy(t.type)||"Memo";case Ls:e=t._payload,t=t._init;try{return Hy(t(e))}catch{}}return null}function o2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hy(e);case 8:return e===N0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a2(t){var e=FE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uf(t){t._valueTracker||(t._valueTracker=a2(t))}function UE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gy(t,e){var n=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _b(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=uo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zE(t,e){e=e.checked,e!=null&&P0(t,"checked",e,!1)}function qy(t,e){zE(t,e);var n=uo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ky(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ky(t,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ky(t,e,n){(e!=="number"||xm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fu=Array.isArray;function Bl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+uo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Yy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ib(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Fu(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:uo(n)}}function BE(t,e){var n=uo(e.value),r=uo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $E(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$E(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var df,WE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(df=df||document.createElement("div"),df.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=df.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l2=["Webkit","ms","Moz","O"];Object.keys(Qu).forEach(function(t){l2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qu[e]=Qu[t]})});function HE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qu.hasOwnProperty(t)&&Qu[t]?(""+e).trim():e+"px"}function GE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=HE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var c2=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jy(t,e){if(e){if(c2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Xy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zy=null;function O0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ew=null,$l=null,Wl=null;function Tb(t){if(t=dh(t)){if(typeof ew!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Ep(e),ew(t.stateNode,t.type,e))}}function qE(t){$l?Wl?Wl.push(t):Wl=[t]:$l=t}function KE(){if($l){var t=$l,e=Wl;if(Wl=$l=null,Tb(t),e)for(t=0;t<e.length;t++)Tb(e[t])}}function YE(t,e){return t(e)}function QE(){}var Og=!1;function JE(t,e,n){if(Og)return t(e,n);Og=!0;try{return YE(t,e,n)}finally{Og=!1,($l!==null||Wl!==null)&&(QE(),KE())}}function Id(t,e){var n=t.stateNode;if(n===null)return null;var r=Ep(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var tw=!1;if(Qi)try{var Tu={};Object.defineProperty(Tu,"passive",{get:function(){tw=!0}}),window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{tw=!1}function u2(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ju=!1,Tm=null,Em=!1,nw=null,d2={onError:function(t){Ju=!0,Tm=t}};function h2(t,e,n,r,i,s,o,a,l){Ju=!1,Tm=null,u2.apply(d2,arguments)}function f2(t,e,n,r,i,s,o,a,l){if(h2.apply(this,arguments),Ju){if(Ju){var u=Tm;Ju=!1,Tm=null}else throw Error(H(198));Em||(Em=!0,nw=u)}}function Va(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Eb(t){if(Va(t)!==t)throw Error(H(188))}function m2(t){var e=t.alternate;if(!e){if(e=Va(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Eb(i),t;if(s===r)return Eb(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function ZE(t){return t=m2(t),t!==null?e1(t):null}function e1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=e1(t);if(e!==null)return e;t=t.sibling}return null}var t1=nr.unstable_scheduleCallback,Sb=nr.unstable_cancelCallback,p2=nr.unstable_shouldYield,g2=nr.unstable_requestPaint,_t=nr.unstable_now,y2=nr.unstable_getCurrentPriorityLevel,M0=nr.unstable_ImmediatePriority,n1=nr.unstable_UserBlockingPriority,Sm=nr.unstable_NormalPriority,w2=nr.unstable_LowPriority,r1=nr.unstable_IdlePriority,bp=null,vi=null;function v2(t){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(bp,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:I2,_2=Math.log,b2=Math.LN2;function I2(t){return t>>>=0,t===0?32:31-(_2(t)/b2|0)|0}var hf=64,ff=4194304;function Uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Am(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Uu(a):(s&=o,s!==0&&(r=Uu(s)))}else o=n&~i,o!==0?r=Uu(o):s!==0&&(r=Uu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hr(e),i=1<<n,r|=t[n],e&=~i;return r}function x2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=x2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function rw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function i1(){var t=hf;return hf<<=1,!(hf&4194240)&&(hf=64),t}function Mg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ch(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=n}function E2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function V0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function s1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var o1,j0,a1,l1,c1,iw=!1,mf=[],Js=null,Xs=null,Zs=null,xd=new Map,Td=new Map,Vs=[],S2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ab(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":xd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function Eu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dh(e),e!==null&&j0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function A2(t,e,n,r,i){switch(e){case"focusin":return Js=Eu(Js,t,e,n,r,i),!0;case"dragenter":return Xs=Eu(Xs,t,e,n,r,i),!0;case"mouseover":return Zs=Eu(Zs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xd.set(s,Eu(xd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Td.set(s,Eu(Td.get(s)||null,t,e,n,r,i)),!0}return!1}function u1(t){var e=sa(t.target);if(e!==null){var n=Va(e);if(n!==null){if(e=n.tag,e===13){if(e=XE(n),e!==null){t.blockedOn=e,c1(t.priority,function(){a1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zy=r,n.target.dispatchEvent(r),Zy=null}else return e=dh(n),e!==null&&j0(e),t.blockedOn=n,!1;e.shift()}return!0}function kb(t,e,n){Bf(t)&&n.delete(e)}function k2(){iw=!1,Js!==null&&Bf(Js)&&(Js=null),Xs!==null&&Bf(Xs)&&(Xs=null),Zs!==null&&Bf(Zs)&&(Zs=null),xd.forEach(kb),Td.forEach(kb)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,iw||(iw=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,k2)))}function Ed(t){function e(i){return Su(i,t)}if(0<mf.length){Su(mf[0],t);for(var n=1;n<mf.length;n++){var r=mf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Su(Js,t),Xs!==null&&Su(Xs,t),Zs!==null&&Su(Zs,t),xd.forEach(e),Td.forEach(e),n=0;n<Vs.length;n++)r=Vs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vs.length&&(n=Vs[0],n.blockedOn===null);)u1(n),n.blockedOn===null&&Vs.shift()}var Hl=os.ReactCurrentBatchConfig,km=!0;function C2(t,e,n,r){var i=Oe,s=Hl.transition;Hl.transition=null;try{Oe=1,F0(t,e,n,r)}finally{Oe=i,Hl.transition=s}}function R2(t,e,n,r){var i=Oe,s=Hl.transition;Hl.transition=null;try{Oe=4,F0(t,e,n,r)}finally{Oe=i,Hl.transition=s}}function F0(t,e,n,r){if(km){var i=sw(t,e,n,r);if(i===null)Gg(t,e,r,Cm,n),Ab(t,r);else if(A2(i,t,e,n,r))r.stopPropagation();else if(Ab(t,r),e&4&&-1<S2.indexOf(t)){for(;i!==null;){var s=dh(i);if(s!==null&&o1(s),s=sw(t,e,n,r),s===null&&Gg(t,e,r,Cm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Gg(t,e,r,null,n)}}var Cm=null;function sw(t,e,n,r){if(Cm=null,t=O0(r),t=sa(t),t!==null)if(e=Va(t),e===null)t=null;else if(n=e.tag,n===13){if(t=XE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cm=t,null}function d1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y2()){case M0:return 1;case n1:return 4;case Sm:case w2:return 16;case r1:return 536870912;default:return 16}default:return 16}}var Gs=null,U0=null,$f=null;function h1(){if($f)return $f;var t,e=U0,n=e.length,r,i="value"in Gs?Gs.value:Gs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $f=i.slice(t,1<r?1-r:void 0)}function Wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pf(){return!0}function Cb(){return!1}function or(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pf:Cb,this.isPropagationStopped=Cb,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z0=or(Pc),uh=ot({},Pc,{view:0,detail:0}),P2=or(uh),Vg,jg,Au,Ip=ot({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Au&&(Au&&t.type==="mousemove"?(Vg=t.screenX-Au.screenX,jg=t.screenY-Au.screenY):jg=Vg=0,Au=t),Vg)},movementY:function(t){return"movementY"in t?t.movementY:jg}}),Rb=or(Ip),N2=ot({},Ip,{dataTransfer:0}),D2=or(N2),L2=ot({},uh,{relatedTarget:0}),Fg=or(L2),O2=ot({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),M2=or(O2),V2=ot({},Pc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j2=or(V2),F2=ot({},Pc,{data:0}),Pb=or(F2),U2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=B2[t])?!!e[t]:!1}function B0(){return $2}var W2=ot({},uh,{key:function(t){if(t.key){var e=U2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B0,charCode:function(t){return t.type==="keypress"?Wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H2=or(W2),G2=ot({},Ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nb=or(G2),q2=ot({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B0}),K2=or(q2),Y2=ot({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q2=or(Y2),J2=ot({},Ip,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),X2=or(J2),Z2=[9,13,27,32],$0=Qi&&"CompositionEvent"in window,Xu=null;Qi&&"documentMode"in document&&(Xu=document.documentMode);var eD=Qi&&"TextEvent"in window&&!Xu,f1=Qi&&(!$0||Xu&&8<Xu&&11>=Xu),Db=String.fromCharCode(32),Lb=!1;function m1(t,e){switch(t){case"keyup":return Z2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function tD(t,e){switch(t){case"compositionend":return p1(e);case"keypress":return e.which!==32?null:(Lb=!0,Db);case"textInput":return t=e.data,t===Db&&Lb?null:t;default:return null}}function nD(t,e){if(Nl)return t==="compositionend"||!$0&&m1(t,e)?(t=h1(),$f=U0=Gs=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f1&&e.locale!=="ko"?null:e.data;default:return null}}var rD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rD[t.type]:e==="textarea"}function g1(t,e,n,r){qE(r),e=Rm(e,"onChange"),0<e.length&&(n=new z0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zu=null,Sd=null;function iD(t){A1(t,0)}function xp(t){var e=Ol(t);if(UE(e))return t}function sD(t,e){if(t==="change")return e}var y1=!1;if(Qi){var Ug;if(Qi){var zg="oninput"in document;if(!zg){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),zg=typeof Mb.oninput=="function"}Ug=zg}else Ug=!1;y1=Ug&&(!document.documentMode||9<document.documentMode)}function Vb(){Zu&&(Zu.detachEvent("onpropertychange",w1),Sd=Zu=null)}function w1(t){if(t.propertyName==="value"&&xp(Sd)){var e=[];g1(e,Sd,t,O0(t)),JE(iD,e)}}function oD(t,e,n){t==="focusin"?(Vb(),Zu=e,Sd=n,Zu.attachEvent("onpropertychange",w1)):t==="focusout"&&Vb()}function aD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xp(Sd)}function lD(t,e){if(t==="click")return xp(e)}function cD(t,e){if(t==="input"||t==="change")return xp(e)}function uD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kr=typeof Object.is=="function"?Object.is:uD;function Ad(t,e){if(Kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zy.call(e,i)||!Kr(t[i],e[i]))return!1}return!0}function jb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fb(t,e){var n=jb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jb(n)}}function v1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _1(){for(var t=window,e=xm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xm(t.document)}return e}function W0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dD(t){var e=_1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v1(n.ownerDocument.documentElement,n)){if(r!==null&&W0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Fb(n,s);var o=Fb(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hD=Qi&&"documentMode"in document&&11>=document.documentMode,Dl=null,ow=null,ed=null,aw=!1;function Ub(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aw||Dl==null||Dl!==xm(r)||(r=Dl,"selectionStart"in r&&W0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ed&&Ad(ed,r)||(ed=r,r=Rm(ow,"onSelect"),0<r.length&&(e=new z0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Dl)))}function gf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ll={animationend:gf("Animation","AnimationEnd"),animationiteration:gf("Animation","AnimationIteration"),animationstart:gf("Animation","AnimationStart"),transitionend:gf("Transition","TransitionEnd")},Bg={},b1={};Qi&&(b1=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Tp(t){if(Bg[t])return Bg[t];if(!Ll[t])return t;var e=Ll[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b1)return Bg[t]=e[n];return t}var I1=Tp("animationend"),x1=Tp("animationiteration"),T1=Tp("animationstart"),E1=Tp("transitionend"),S1=new Map,zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(t,e){S1.set(t,e),Ma(e,[t])}for(var $g=0;$g<zb.length;$g++){var Wg=zb[$g],fD=Wg.toLowerCase(),mD=Wg[0].toUpperCase()+Wg.slice(1);bo(fD,"on"+mD)}bo(I1,"onAnimationEnd");bo(x1,"onAnimationIteration");bo(T1,"onAnimationStart");bo("dblclick","onDoubleClick");bo("focusin","onFocus");bo("focusout","onBlur");bo(E1,"onTransitionEnd");tc("onMouseEnter",["mouseout","mouseover"]);tc("onMouseLeave",["mouseout","mouseover"]);tc("onPointerEnter",["pointerout","pointerover"]);tc("onPointerLeave",["pointerout","pointerover"]);Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pD=new Set("cancel close invalid load scroll toggle".split(" ").concat(zu));function Bb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,f2(r,e,void 0,t),t.currentTarget=null}function A1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Bb(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Bb(i,a,u),s=l}}}if(Em)throw t=nw,Em=!1,nw=null,t}function He(t,e){var n=e[hw];n===void 0&&(n=e[hw]=new Set);var r=t+"__bubble";n.has(r)||(k1(e,t,2,!1),n.add(r))}function Hg(t,e,n){var r=0;e&&(r|=4),k1(n,t,r,e)}var yf="_reactListening"+Math.random().toString(36).slice(2);function kd(t){if(!t[yf]){t[yf]=!0,OE.forEach(function(n){n!=="selectionchange"&&(pD.has(n)||Hg(n,!1,t),Hg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yf]||(e[yf]=!0,Hg("selectionchange",!1,e))}}function k1(t,e,n,r){switch(d1(e)){case 1:var i=C2;break;case 4:i=R2;break;default:i=F0}n=i.bind(null,e,n,t),i=void 0,!tw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=sa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}JE(function(){var u=s,h=O0(n),f=[];e:{var p=S1.get(t);if(p!==void 0){var y=z0,_=t;switch(t){case"keypress":if(Wf(n)===0)break e;case"keydown":case"keyup":y=H2;break;case"focusin":_="focus",y=Fg;break;case"focusout":_="blur",y=Fg;break;case"beforeblur":case"afterblur":y=Fg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Rb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=K2;break;case I1:case x1:case T1:y=M2;break;case E1:y=Q2;break;case"scroll":y=P2;break;case"wheel":y=X2;break;case"copy":case"cut":case"paste":y=j2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Nb}var E=(e&4)!==0,R=!E&&t==="scroll",I=E?p!==null?p+"Capture":null:p;E=[];for(var b=u,T;b!==null;){T=b;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,I!==null&&(N=Id(b,I),N!=null&&E.push(Cd(b,N,T)))),R)break;b=b.return}0<E.length&&(p=new y(p,_,null,n,h),f.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Zy&&(_=n.relatedTarget||n.fromElement)&&(sa(_)||_[Ji]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?sa(_):null,_!==null&&(R=Va(_),_!==R||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(E=Rb,N="onMouseLeave",I="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(E=Nb,N="onPointerLeave",I="onPointerEnter",b="pointer"),R=y==null?p:Ol(y),T=_==null?p:Ol(_),p=new E(N,b+"leave",y,n,h),p.target=R,p.relatedTarget=T,N=null,sa(h)===u&&(E=new E(I,b+"enter",_,n,h),E.target=T,E.relatedTarget=R,N=E),R=N,y&&_)t:{for(E=y,I=_,b=0,T=E;T;T=fl(T))b++;for(T=0,N=I;N;N=fl(N))T++;for(;0<b-T;)E=fl(E),b--;for(;0<T-b;)I=fl(I),T--;for(;b--;){if(E===I||I!==null&&E===I.alternate)break t;E=fl(E),I=fl(I)}E=null}else E=null;y!==null&&$b(f,p,y,E,!1),_!==null&&R!==null&&$b(f,R,_,E,!0)}}e:{if(p=u?Ol(u):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var z=sD;else if(Ob(p))if(y1)z=cD;else{z=aD;var B=oD}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=lD);if(z&&(z=z(t,u))){g1(f,z,n,h);break e}B&&B(t,p,u),t==="focusout"&&(B=p._wrapperState)&&B.controlled&&p.type==="number"&&Ky(p,"number",p.value)}switch(B=u?Ol(u):window,t){case"focusin":(Ob(B)||B.contentEditable==="true")&&(Dl=B,ow=u,ed=null);break;case"focusout":ed=ow=Dl=null;break;case"mousedown":aw=!0;break;case"contextmenu":case"mouseup":case"dragend":aw=!1,Ub(f,n,h);break;case"selectionchange":if(hD)break;case"keydown":case"keyup":Ub(f,n,h)}var x;if($0)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Nl?m1(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(f1&&n.locale!=="ko"&&(Nl||w!=="onCompositionStart"?w==="onCompositionEnd"&&Nl&&(x=h1()):(Gs=h,U0="value"in Gs?Gs.value:Gs.textContent,Nl=!0)),B=Rm(u,w),0<B.length&&(w=new Pb(w,t,null,n,h),f.push({event:w,listeners:B}),x?w.data=x:(x=p1(n),x!==null&&(w.data=x)))),(x=eD?tD(t,n):nD(t,n))&&(u=Rm(u,"onBeforeInput"),0<u.length&&(h=new Pb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=x))}A1(f,e)})}function Cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Id(t,n),s!=null&&r.unshift(Cd(t,s,i)),s=Id(t,e),s!=null&&r.push(Cd(t,s,i))),t=t.return}return r}function fl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $b(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Id(n,s),l!=null&&o.unshift(Cd(n,l,a))):i||(l=Id(n,s),l!=null&&o.push(Cd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gD=/\r\n?/g,yD=/\u0000|\uFFFD/g;function Wb(t){return(typeof t=="string"?t:""+t).replace(gD,`
`).replace(yD,"")}function wf(t,e,n){if(e=Wb(e),Wb(t)!==e&&n)throw Error(H(425))}function Pm(){}var lw=null,cw=null;function uw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dw=typeof setTimeout=="function"?setTimeout:void 0,wD=typeof clearTimeout=="function"?clearTimeout:void 0,Hb=typeof Promise=="function"?Promise:void 0,vD=typeof queueMicrotask=="function"?queueMicrotask:typeof Hb<"u"?function(t){return Hb.resolve(null).then(t).catch(_D)}:dw;function _D(t){setTimeout(function(){throw t})}function qg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ed(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ed(e)}function eo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),mi="__reactFiber$"+Nc,Rd="__reactProps$"+Nc,Ji="__reactContainer$"+Nc,hw="__reactEvents$"+Nc,bD="__reactListeners$"+Nc,ID="__reactHandles$"+Nc;function sa(t){var e=t[mi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ji]||n[mi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gb(t);t!==null;){if(n=t[mi])return n;t=Gb(t)}return e}t=n,n=t.parentNode}return null}function dh(t){return t=t[mi]||t[Ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ol(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Ep(t){return t[Rd]||null}var fw=[],Ml=-1;function Io(t){return{current:t}}function qe(t){0>Ml||(t.current=fw[Ml],fw[Ml]=null,Ml--)}function ze(t,e){Ml++,fw[Ml]=t.current,t.current=e}var ho={},un=Io(ho),Dn=Io(!1),wa=ho;function nc(t,e){var n=t.type.contextTypes;if(!n)return ho;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ln(t){return t=t.childContextTypes,t!=null}function Nm(){qe(Dn),qe(un)}function qb(t,e,n){if(un.current!==ho)throw Error(H(168));ze(un,e),ze(Dn,n)}function C1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,o2(t)||"Unknown",i));return ot({},n,r)}function Dm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ho,wa=un.current,ze(un,t),ze(Dn,Dn.current),!0}function Kb(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=C1(t,e,wa),r.__reactInternalMemoizedMergedChildContext=t,qe(Dn),qe(un),ze(un,t)):qe(Dn),ze(Dn,n)}var Ui=null,Sp=!1,Kg=!1;function R1(t){Ui===null?Ui=[t]:Ui.push(t)}function xD(t){Sp=!0,R1(t)}function xo(){if(!Kg&&Ui!==null){Kg=!0;var t=0,e=Oe;try{var n=Ui;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ui=null,Sp=!1}catch(i){throw Ui!==null&&(Ui=Ui.slice(t+1)),t1(M0,xo),i}finally{Oe=e,Kg=!1}}return null}var Vl=[],jl=0,Lm=null,Om=0,yr=[],wr=0,va=null,Bi=1,$i="";function qo(t,e){Vl[jl++]=Om,Vl[jl++]=Lm,Lm=t,Om=e}function P1(t,e,n){yr[wr++]=Bi,yr[wr++]=$i,yr[wr++]=va,va=t;var r=Bi;t=$i;var i=32-Hr(r)-1;r&=~(1<<i),n+=1;var s=32-Hr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bi=1<<32-Hr(e)+i|n<<i|r,$i=s+t}else Bi=1<<s|n<<i|r,$i=t}function H0(t){t.return!==null&&(qo(t,1),P1(t,1,0))}function G0(t){for(;t===Lm;)Lm=Vl[--jl],Vl[jl]=null,Om=Vl[--jl],Vl[jl]=null;for(;t===va;)va=yr[--wr],yr[wr]=null,$i=yr[--wr],yr[wr]=null,Bi=yr[--wr],yr[wr]=null}var Xn=null,Qn=null,Ze=!1,$r=null;function N1(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=eo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=va!==null?{id:Bi,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Qn=null,!0):!1;default:return!1}}function mw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pw(t){if(Ze){var e=Qn;if(e){var n=e;if(!Yb(t,e)){if(mw(t))throw Error(H(418));e=eo(n.nextSibling);var r=Xn;e&&Yb(t,e)?N1(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Xn=t)}}else{if(mw(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ze=!1,Xn=t}}}function Qb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function vf(t){if(t!==Xn)return!1;if(!Ze)return Qb(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uw(t.type,t.memoizedProps)),e&&(e=Qn)){if(mw(t))throw D1(),Error(H(418));for(;e;)N1(t,e),e=eo(e.nextSibling)}if(Qb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=eo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Xn?eo(t.stateNode.nextSibling):null;return!0}function D1(){for(var t=Qn;t;)t=eo(t.nextSibling)}function rc(){Qn=Xn=null,Ze=!1}function q0(t){$r===null?$r=[t]:$r.push(t)}var TD=os.ReactCurrentBatchConfig;function ku(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function _f(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jb(t){var e=t._init;return e(t._payload)}function L1(t){function e(I,b){if(t){var T=I.deletions;T===null?(I.deletions=[b],I.flags|=16):T.push(b)}}function n(I,b){if(!t)return null;for(;b!==null;)e(I,b),b=b.sibling;return null}function r(I,b){for(I=new Map;b!==null;)b.key!==null?I.set(b.key,b):I.set(b.index,b),b=b.sibling;return I}function i(I,b){return I=io(I,b),I.index=0,I.sibling=null,I}function s(I,b,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<b?(I.flags|=2,b):T):(I.flags|=2,b)):(I.flags|=1048576,b)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,b,T,N){return b===null||b.tag!==6?(b=ty(T,I.mode,N),b.return=I,b):(b=i(b,T),b.return=I,b)}function l(I,b,T,N){var z=T.type;return z===Pl?h(I,b,T.props.children,N,T.key):b!==null&&(b.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ls&&Jb(z)===b.type)?(N=i(b,T.props),N.ref=ku(I,b,T),N.return=I,N):(N=Jf(T.type,T.key,T.props,null,I.mode,N),N.ref=ku(I,b,T),N.return=I,N)}function u(I,b,T,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=ny(T,I.mode,N),b.return=I,b):(b=i(b,T.children||[]),b.return=I,b)}function h(I,b,T,N,z){return b===null||b.tag!==7?(b=ha(T,I.mode,N,z),b.return=I,b):(b=i(b,T),b.return=I,b)}function f(I,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ty(""+b,I.mode,T),b.return=I,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cf:return T=Jf(b.type,b.key,b.props,null,I.mode,T),T.ref=ku(I,null,b),T.return=I,T;case Rl:return b=ny(b,I.mode,T),b.return=I,b;case Ls:var N=b._init;return f(I,N(b._payload),T)}if(Fu(b)||xu(b))return b=ha(b,I.mode,T,null),b.return=I,b;_f(I,b)}return null}function p(I,b,T,N){var z=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return z!==null?null:a(I,b,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case cf:return T.key===z?l(I,b,T,N):null;case Rl:return T.key===z?u(I,b,T,N):null;case Ls:return z=T._init,p(I,b,z(T._payload),N)}if(Fu(T)||xu(T))return z!==null?null:h(I,b,T,N,null);_f(I,T)}return null}function y(I,b,T,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return I=I.get(T)||null,a(b,I,""+N,z);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case cf:return I=I.get(N.key===null?T:N.key)||null,l(b,I,N,z);case Rl:return I=I.get(N.key===null?T:N.key)||null,u(b,I,N,z);case Ls:var B=N._init;return y(I,b,T,B(N._payload),z)}if(Fu(N)||xu(N))return I=I.get(T)||null,h(b,I,N,z,null);_f(b,N)}return null}function _(I,b,T,N){for(var z=null,B=null,x=b,w=b=0,A=null;x!==null&&w<T.length;w++){x.index>w?(A=x,x=null):A=x.sibling;var C=p(I,x,T[w],N);if(C===null){x===null&&(x=A);break}t&&x&&C.alternate===null&&e(I,x),b=s(C,b,w),B===null?z=C:B.sibling=C,B=C,x=A}if(w===T.length)return n(I,x),Ze&&qo(I,w),z;if(x===null){for(;w<T.length;w++)x=f(I,T[w],N),x!==null&&(b=s(x,b,w),B===null?z=x:B.sibling=x,B=x);return Ze&&qo(I,w),z}for(x=r(I,x);w<T.length;w++)A=y(x,I,w,T[w],N),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?w:A.key),b=s(A,b,w),B===null?z=A:B.sibling=A,B=A);return t&&x.forEach(function(P){return e(I,P)}),Ze&&qo(I,w),z}function E(I,b,T,N){var z=xu(T);if(typeof z!="function")throw Error(H(150));if(T=z.call(T),T==null)throw Error(H(151));for(var B=z=null,x=b,w=b=0,A=null,C=T.next();x!==null&&!C.done;w++,C=T.next()){x.index>w?(A=x,x=null):A=x.sibling;var P=p(I,x,C.value,N);if(P===null){x===null&&(x=A);break}t&&x&&P.alternate===null&&e(I,x),b=s(P,b,w),B===null?z=P:B.sibling=P,B=P,x=A}if(C.done)return n(I,x),Ze&&qo(I,w),z;if(x===null){for(;!C.done;w++,C=T.next())C=f(I,C.value,N),C!==null&&(b=s(C,b,w),B===null?z=C:B.sibling=C,B=C);return Ze&&qo(I,w),z}for(x=r(I,x);!C.done;w++,C=T.next())C=y(x,I,w,C.value,N),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?w:C.key),b=s(C,b,w),B===null?z=C:B.sibling=C,B=C);return t&&x.forEach(function(O){return e(I,O)}),Ze&&qo(I,w),z}function R(I,b,T,N){if(typeof T=="object"&&T!==null&&T.type===Pl&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case cf:e:{for(var z=T.key,B=b;B!==null;){if(B.key===z){if(z=T.type,z===Pl){if(B.tag===7){n(I,B.sibling),b=i(B,T.props.children),b.return=I,I=b;break e}}else if(B.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ls&&Jb(z)===B.type){n(I,B.sibling),b=i(B,T.props),b.ref=ku(I,B,T),b.return=I,I=b;break e}n(I,B);break}else e(I,B);B=B.sibling}T.type===Pl?(b=ha(T.props.children,I.mode,N,T.key),b.return=I,I=b):(N=Jf(T.type,T.key,T.props,null,I.mode,N),N.ref=ku(I,b,T),N.return=I,I=N)}return o(I);case Rl:e:{for(B=T.key;b!==null;){if(b.key===B)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){n(I,b.sibling),b=i(b,T.children||[]),b.return=I,I=b;break e}else{n(I,b);break}else e(I,b);b=b.sibling}b=ny(T,I.mode,N),b.return=I,I=b}return o(I);case Ls:return B=T._init,R(I,b,B(T._payload),N)}if(Fu(T))return _(I,b,T,N);if(xu(T))return E(I,b,T,N);_f(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(n(I,b.sibling),b=i(b,T),b.return=I,I=b):(n(I,b),b=ty(T,I.mode,N),b.return=I,I=b),o(I)):n(I,b)}return R}var ic=L1(!0),O1=L1(!1),Mm=Io(null),Vm=null,Fl=null,K0=null;function Y0(){K0=Fl=Vm=null}function Q0(t){var e=Mm.current;qe(Mm),t._currentValue=e}function gw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gl(t,e){Vm=t,K0=Fl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(K0!==t)if(t={context:t,memoizedValue:e,next:null},Fl===null){if(Vm===null)throw Error(H(308));Fl=t,Vm.dependencies={lanes:0,firstContext:t}}else Fl=Fl.next=t;return e}var oa=null;function J0(t){oa===null?oa=[t]:oa.push(t)}function M1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,J0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xi(t,r)}function Xi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function X0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function to(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xi(t,n)}return i=r.interleaved,i===null?(e.next=e,J0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xi(t,n)}function Hf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V0(t,n)}}function Xb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jm(t,e,n,r){var i=t.updateQueue;Os=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(p=e,y=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){f=_.call(y,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,p=typeof _=="function"?_.call(y,f,p):_,p==null)break e;f=ot({},f,p);break e;case 2:Os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ba|=o,t.lanes=o,t.memoizedState=f}}function Zb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var hh={},_i=Io(hh),Pd=Io(hh),Nd=Io(hh);function aa(t){if(t===hh)throw Error(H(174));return t}function Z0(t,e){switch(ze(Nd,e),ze(Pd,t),ze(_i,hh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qy(e,t)}qe(_i),ze(_i,e)}function sc(){qe(_i),qe(Pd),qe(Nd)}function j1(t){aa(Nd.current);var e=aa(_i.current),n=Qy(e,t.type);e!==n&&(ze(Pd,t),ze(_i,n))}function ev(t){Pd.current===t&&(qe(_i),qe(Pd))}var it=Io(0);function Fm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yg=[];function tv(){for(var t=0;t<Yg.length;t++)Yg[t]._workInProgressVersionPrimary=null;Yg.length=0}var Gf=os.ReactCurrentDispatcher,Qg=os.ReactCurrentBatchConfig,_a=0,st=null,Nt=null,Ft=null,Um=!1,td=!1,Dd=0,ED=0;function en(){throw Error(H(321))}function nv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kr(t[n],e[n]))return!1;return!0}function rv(t,e,n,r,i,s){if(_a=s,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gf.current=t===null||t.memoizedState===null?CD:RD,t=n(r,i),td){s=0;do{if(td=!1,Dd=0,25<=s)throw Error(H(301));s+=1,Ft=Nt=null,e.updateQueue=null,Gf.current=PD,t=n(r,i)}while(td)}if(Gf.current=zm,e=Nt!==null&&Nt.next!==null,_a=0,Ft=Nt=st=null,Um=!1,e)throw Error(H(300));return t}function iv(){var t=Dd!==0;return Dd=0,t}function ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?st.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function Tr(){if(Nt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ft===null?st.memoizedState:Ft.next;if(e!==null)Ft=e,Nt=t;else{if(t===null)throw Error(H(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ft===null?st.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Ld(t,e){return typeof e=="function"?e(t):e}function Jg(t){var e=Tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((_a&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,st.lanes|=h,ba|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Kr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,st.lanes|=s,ba|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xg(t){var e=Tr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Kr(s,e.memoizedState)||(kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function F1(){}function U1(t,e){var n=st,r=Tr(),i=e(),s=!Kr(r.memoizedState,i);if(s&&(r.memoizedState=i,kn=!0),r=r.queue,sv($1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Od(9,B1.bind(null,n,r,i,e),void 0,null),zt===null)throw Error(H(349));_a&30||z1(n,e,i)}return i}function z1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function B1(t,e,n,r){e.value=n,e.getSnapshot=r,W1(e)&&H1(t)}function $1(t,e,n){return n(function(){W1(e)&&H1(t)})}function W1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kr(t,n)}catch{return!0}}function H1(t){var e=Xi(t,1);e!==null&&Gr(e,t,1,-1)}function eI(t){var e=ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:t},e.queue=t,t=t.dispatch=kD.bind(null,st,t),[e.memoizedState,t]}function Od(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function G1(){return Tr().memoizedState}function qf(t,e,n,r){var i=ui();st.flags|=t,i.memoizedState=Od(1|e,n,void 0,r===void 0?null:r)}function Ap(t,e,n,r){var i=Tr();r=r===void 0?null:r;var s=void 0;if(Nt!==null){var o=Nt.memoizedState;if(s=o.destroy,r!==null&&nv(r,o.deps)){i.memoizedState=Od(e,n,s,r);return}}st.flags|=t,i.memoizedState=Od(1|e,n,s,r)}function tI(t,e){return qf(8390656,8,t,e)}function sv(t,e){return Ap(2048,8,t,e)}function q1(t,e){return Ap(4,2,t,e)}function K1(t,e){return Ap(4,4,t,e)}function Y1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Q1(t,e,n){return n=n!=null?n.concat([t]):null,Ap(4,4,Y1.bind(null,e,t),n)}function ov(){}function J1(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X1(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Z1(t,e,n){return _a&21?(Kr(n,e)||(n=i1(),st.lanes|=n,ba|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function SD(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Qg.transition;Qg.transition={};try{t(!1),e()}finally{Oe=n,Qg.transition=r}}function eS(){return Tr().memoizedState}function AD(t,e,n){var r=ro(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tS(t))nS(e,n);else if(n=M1(t,e,n,r),n!==null){var i=_n();Gr(n,t,r,i),rS(n,e,r)}}function kD(t,e,n){var r=ro(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tS(t))nS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Kr(a,o)){var l=e.interleaved;l===null?(i.next=i,J0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=M1(t,e,i,r),n!==null&&(i=_n(),Gr(n,t,r,i),rS(n,e,r))}}function tS(t){var e=t.alternate;return t===st||e!==null&&e===st}function nS(t,e){td=Um=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,V0(t,n)}}var zm={readContext:xr,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},CD={readContext:xr,useCallback:function(t,e){return ui().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:tI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qf(4194308,4,Y1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qf(4194308,4,t,e)},useInsertionEffect:function(t,e){return qf(4,2,t,e)},useMemo:function(t,e){var n=ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AD.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=ui();return t={current:t},e.memoizedState=t},useState:eI,useDebugValue:ov,useDeferredValue:function(t){return ui().memoizedState=t},useTransition:function(){var t=eI(!1),e=t[0];return t=SD.bind(null,t[1]),ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,i=ui();if(Ze){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),zt===null)throw Error(H(349));_a&30||z1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tI($1.bind(null,r,s,t),[t]),r.flags|=2048,Od(9,B1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ui(),e=zt.identifierPrefix;if(Ze){var n=$i,r=Bi;n=(r&~(1<<32-Hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ED++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RD={readContext:xr,useCallback:J1,useContext:xr,useEffect:sv,useImperativeHandle:Q1,useInsertionEffect:q1,useLayoutEffect:K1,useMemo:X1,useReducer:Jg,useRef:G1,useState:function(){return Jg(Ld)},useDebugValue:ov,useDeferredValue:function(t){var e=Tr();return Z1(e,Nt.memoizedState,t)},useTransition:function(){var t=Jg(Ld)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:U1,useId:eS,unstable_isNewReconciler:!1},PD={readContext:xr,useCallback:J1,useContext:xr,useEffect:sv,useImperativeHandle:Q1,useInsertionEffect:q1,useLayoutEffect:K1,useMemo:X1,useReducer:Xg,useRef:G1,useState:function(){return Xg(Ld)},useDebugValue:ov,useDeferredValue:function(t){var e=Tr();return Nt===null?e.memoizedState=t:Z1(e,Nt.memoizedState,t)},useTransition:function(){var t=Xg(Ld)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:U1,useId:eS,unstable_isNewReconciler:!1};function jr(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ot({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kp={isMounted:function(t){return(t=t._reactInternals)?Va(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),i=ro(t),s=Ki(r,i);s.payload=e,n!=null&&(s.callback=n),e=to(t,s,i),e!==null&&(Gr(e,t,i,r),Hf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),i=ro(t),s=Ki(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=to(t,s,i),e!==null&&(Gr(e,t,i,r),Hf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=ro(t),i=Ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=to(t,i,r),e!==null&&(Gr(e,t,r,n),Hf(e,t,r))}};function nI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ad(n,r)||!Ad(i,s):!0}function iS(t,e,n){var r=!1,i=ho,s=e.contextType;return typeof s=="object"&&s!==null?s=xr(s):(i=Ln(e)?wa:un.current,r=e.contextTypes,s=(r=r!=null)?nc(t,i):ho),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kp.enqueueReplaceState(e,e.state,null)}function ww(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},X0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xr(s):(s=Ln(e)?wa:un.current,i.context=nc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kp.enqueueReplaceState(i,i.state,null),jm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oc(t,e){try{var n="",r=e;do n+=s2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Zg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ND=typeof WeakMap=="function"?WeakMap:Map;function sS(t,e,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$m||($m=!0,Cw=r),vw(t,e)},n}function oS(t,e,n){n=Ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vw(t,e),typeof r!="function"&&(no===null?no=new Set([this]):no.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ND;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GD.bind(null,t,e,n),e.then(t,t))}function sI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ki(-1,1),e.tag=2,to(n,e,1))),n.lanes|=1),t)}var DD=os.ReactCurrentOwner,kn=!1;function vn(t,e,n,r){e.child=t===null?O1(e,null,n,r):ic(e,t.child,n,r)}function aI(t,e,n,r,i){n=n.render;var s=e.ref;return Gl(e,i),r=rv(t,e,n,r,s,i),n=iv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(Ze&&n&&H0(e),e.flags|=1,vn(t,e,r,i),e.child)}function lI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aS(t,e,s,r,i)):(t=Jf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ad,n(o,r)&&t.ref===e.ref)return Zi(t,e,i)}return e.flags|=1,t=io(s,r),t.ref=e.ref,t.return=e,e.child=t}function aS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ad(s,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Zi(t,e,i)}return _w(t,e,n,r,i)}function lS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(zl,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(zl,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(zl,Gn),Gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(zl,Gn),Gn|=r;return vn(t,e,i,n),e.child}function cS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _w(t,e,n,r,i){var s=Ln(n)?wa:un.current;return s=nc(e,s),Gl(e,i),n=rv(t,e,n,r,s,i),r=iv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zi(t,e,i)):(Ze&&r&&H0(e),e.flags|=1,vn(t,e,n,i),e.child)}function cI(t,e,n,r,i){if(Ln(n)){var s=!0;Dm(e)}else s=!1;if(Gl(e,i),e.stateNode===null)Kf(t,e),iS(e,n,r),ww(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=Ln(n)?wa:un.current,u=nc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&rI(e,o,r,u),Os=!1;var p=e.memoizedState;o.state=p,jm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Dn.current||Os?(typeof h=="function"&&(yw(e,n,h,r),l=e.memoizedState),(a=Os||nI(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,V1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jr(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=Ln(n)?wa:un.current,l=nc(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&rI(e,o,r,l),Os=!1,p=e.memoizedState,o.state=p,jm(e,r,o,i);var _=e.memoizedState;a!==f||p!==_||Dn.current||Os?(typeof y=="function"&&(yw(e,n,y,r),_=e.memoizedState),(u=Os||nI(e,n,u,r,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return bw(t,e,n,r,s,i)}function bw(t,e,n,r,i,s){cS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Kb(e,n,!1),Zi(t,e,s);r=e.stateNode,DD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ic(e,t.child,null,s),e.child=ic(e,null,a,s)):vn(t,e,a,s),e.memoizedState=r.state,i&&Kb(e,n,!0),e.child}function uS(t){var e=t.stateNode;e.pendingContext?qb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qb(t,e.context,!1),Z0(t,e.containerInfo)}function uI(t,e,n,r,i){return rc(),q0(i),e.flags|=256,vn(t,e,n,r),e.child}var Iw={dehydrated:null,treeContext:null,retryLane:0};function xw(t){return{baseLanes:t,cachePool:null,transitions:null}}function dS(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(it,i&1),t===null)return pw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pp(o,r,0,null),t=ha(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xw(n),e.memoizedState=Iw,t):av(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return LD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=io(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=io(a,s):(s=ha(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Iw,r}return s=t.child,t=s.sibling,r=io(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function av(t,e){return e=Pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bf(t,e,n,r){return r!==null&&q0(r),ic(e,t.child,null,n),t=av(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Zg(Error(H(422))),bf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pp({mode:"visible",children:r.children},i,0,null),s=ha(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ic(e,t.child,null,o),e.child.memoizedState=xw(o),e.memoizedState=Iw,s);if(!(e.mode&1))return bf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Zg(s,r,void 0),bf(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=zt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xi(t,i),Gr(r,t,i,-1))}return fv(),r=Zg(Error(H(421))),bf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=eo(i.nextSibling),Xn=e,Ze=!0,$r=null,t!==null&&(yr[wr++]=Bi,yr[wr++]=$i,yr[wr++]=va,Bi=t.id,$i=t.overflow,va=e),e=av(e,r.children),e.flags|=4096,e)}function dI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gw(t.return,e,n)}function ey(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function hS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dI(t,n,e);else if(t.tag===19)dI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ey(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ey(e,!0,n,null,s);break;case"together":ey(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ba|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=io(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=io(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OD(t,e,n){switch(e.tag){case 3:uS(e),rc();break;case 5:j1(e);break;case 1:Ln(e.type)&&Dm(e);break;case 4:Z0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(Mm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?dS(t,e,n):(ze(it,it.current&1),t=Zi(t,e,n),t!==null?t.sibling:null);ze(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,lS(t,e,n)}return Zi(t,e,n)}var fS,Tw,mS,pS;fS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tw=function(){};mS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,aa(_i.current);var s=null;switch(n){case"input":i=Gy(t,i),r=Gy(t,r),s=[];break;case"select":i=ot({},i,{value:void 0}),r=ot({},r,{value:void 0}),s=[];break;case"textarea":i=Yy(t,i),r=Yy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pm)}Jy(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&He("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};pS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cu(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MD(t,e,n){var r=e.pendingProps;switch(G0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return Ln(e.type)&&Nm(),tn(e),null;case 3:return r=e.stateNode,sc(),qe(Dn),qe(un),tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$r!==null&&(Nw($r),$r=null))),Tw(t,e),tn(e),null;case 5:ev(e);var i=aa(Nd.current);if(n=e.type,t!==null&&e.stateNode!=null)mS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return tn(e),null}if(t=aa(_i.current),vf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[mi]=e,r[Rd]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<zu.length;i++)He(zu[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":_b(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":Ib(r,s),He("invalid",r)}Jy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wf(r.textContent,a,t),i=["children",""+a]):_d.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":uf(r),bb(r,s,!0);break;case"textarea":uf(r),xb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$E(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mi]=e,t[Rd]=r,fS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xy(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<zu.length;i++)He(zu[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":_b(t,r),i=Gy(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ot({},r,{value:void 0}),He("invalid",t);break;case"textarea":Ib(t,r),i=Yy(t,r),He("invalid",t);break;default:i=r}Jy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?GE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bd(t,l):typeof l=="number"&&bd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_d.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&P0(t,s,l,o))}switch(n){case"input":uf(t),bb(t,r,!1);break;case"textarea":uf(t),xb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+uo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)pS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=aa(Nd.current),aa(_i.current),vf(e)){if(r=e.stateNode,n=e.memoizedProps,r[mi]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:wf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mi]=e,e.stateNode=r}return tn(e),null;case 13:if(qe(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Qn!==null&&e.mode&1&&!(e.flags&128))D1(),rc(),e.flags|=98560,s=!1;else if(s=vf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[mi]=e}else rc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),s=!1}else $r!==null&&(Nw($r),$r=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Dt===0&&(Dt=3):fv())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return sc(),Tw(t,e),t===null&&kd(e.stateNode.containerInfo),tn(e),null;case 10:return Q0(e.type._context),tn(e),null;case 17:return Ln(e.type)&&Nm(),tn(e),null;case 19:if(qe(it),s=e.memoizedState,s===null)return tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Cu(s,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fm(t),o!==null){for(e.flags|=128,Cu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&_t()>ac&&(e.flags|=128,r=!0,Cu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Fm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ze)return tn(e),null}else 2*_t()-s.renderingStartTime>ac&&n!==1073741824&&(e.flags|=128,r=!0,Cu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_t(),e.sibling=null,n=it.current,ze(it,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return hv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function VD(t,e){switch(G0(e),e.tag){case 1:return Ln(e.type)&&Nm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sc(),qe(Dn),qe(un),tv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ev(e),null;case 13:if(qe(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));rc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(it),null;case 4:return sc(),null;case 10:return Q0(e.type._context),null;case 22:case 23:return hv(),null;case 24:return null;default:return null}}var If=!1,on=!1,jD=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ul(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function Ew(t,e,n){try{n()}catch(r){dt(t,e,r)}}var hI=!1;function FD(t,e){if(lw=km,t=_1(),W0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cw={focusedElem:t,selectionRange:n},km=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,R=_.memoizedState,I=e.stateNode,b=I.getSnapshotBeforeUpdate(e.elementType===e.type?E:jr(e.type,E),R);I.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(N){dt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return _=hI,hI=!1,_}function nd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ew(e,n,s)}i=i.next}while(i!==r)}}function Cp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gS(t){var e=t.alternate;e!==null&&(t.alternate=null,gS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mi],delete e[Rd],delete e[hw],delete e[bD],delete e[ID])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yS(t){return t.tag===5||t.tag===3||t.tag===4}function fI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Aw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pm));else if(r!==4&&(t=t.child,t!==null))for(Aw(t,e,n),t=t.sibling;t!==null;)Aw(t,e,n),t=t.sibling}function kw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kw(t,e,n),t=t.sibling;t!==null;)kw(t,e,n),t=t.sibling}var Gt=null,zr=!1;function As(t,e,n){for(n=n.child;n!==null;)wS(t,e,n),n=n.sibling}function wS(t,e,n){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(bp,n)}catch{}switch(n.tag){case 5:on||Ul(n,e);case 6:var r=Gt,i=zr;Gt=null,As(t,e,n),Gt=r,zr=i,Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?qg(t.parentNode,n):t.nodeType===1&&qg(t,n),Ed(t)):qg(Gt,n.stateNode));break;case 4:r=Gt,i=zr,Gt=n.stateNode.containerInfo,zr=!0,As(t,e,n),Gt=r,zr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ew(n,e,o),i=i.next}while(i!==r)}As(t,e,n);break;case 1:if(!on&&(Ul(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,e,a)}As(t,e,n);break;case 21:As(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,As(t,e,n),on=r):As(t,e,n);break;default:As(t,e,n)}}function mI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jD),e.forEach(function(r){var i=KD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,zr=!1;break e;case 3:Gt=a.stateNode.containerInfo,zr=!0;break e;case 4:Gt=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Gt===null)throw Error(H(160));wS(s,o,i),Gt=null,zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){dt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vS(e,t),e=e.sibling}function vS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mr(e,t),ci(t),r&4){try{nd(3,t,t.return),Cp(3,t)}catch(E){dt(t,t.return,E)}try{nd(5,t,t.return)}catch(E){dt(t,t.return,E)}}break;case 1:Mr(e,t),ci(t),r&512&&n!==null&&Ul(n,n.return);break;case 5:if(Mr(e,t),ci(t),r&512&&n!==null&&Ul(n,n.return),t.flags&32){var i=t.stateNode;try{bd(i,"")}catch(E){dt(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&zE(i,s),Xy(a,o);var u=Xy(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?GE(i,f):h==="dangerouslySetInnerHTML"?WE(i,f):h==="children"?bd(i,f):P0(i,h,f,u)}switch(a){case"input":qy(i,s);break;case"textarea":BE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Bl(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?Bl(i,!!s.multiple,s.defaultValue,!0):Bl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rd]=s}catch(E){dt(t,t.return,E)}}break;case 6:if(Mr(e,t),ci(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){dt(t,t.return,E)}}break;case 3:if(Mr(e,t),ci(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(E){dt(t,t.return,E)}break;case 4:Mr(e,t),ci(t);break;case 13:Mr(e,t),ci(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(uv=_t())),r&4&&mI(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(on=(u=on)||h,Mr(e,t),on=u):Mr(e,t),ci(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(p=Z,y=p.child,p.tag){case 0:case 11:case 14:case 15:nd(4,p,p.return);break;case 1:Ul(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){dt(r,n,E)}}break;case 5:Ul(p,p.return);break;case 22:if(p.memoizedState!==null){gI(f);continue}}y!==null?(y.return=p,Z=y):gI(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=HE("display",o))}catch(E){dt(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(E){dt(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mr(e,t),ci(t),r&4&&mI(t);break;case 21:break;default:Mr(e,t),ci(t)}}function ci(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yS(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bd(i,""),r.flags&=-33);var s=fI(t);kw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fI(t);Aw(t,a,o);break;default:throw Error(H(161))}}catch(l){dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UD(t,e,n){Z=t,_S(t)}function _S(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||If;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||on;a=If;var u=on;if(If=o,(on=l)&&!u)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?yI(i):l!==null?(l.return=o,Z=l):yI(i);for(;s!==null;)Z=s,_S(s),s=s.sibling;Z=i,If=a,on=u}pI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):pI(t)}}function pI(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Cp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zb(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zb(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ed(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}on||e.flags&512&&Sw(e)}catch(p){dt(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function gI(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function yI(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cp(4,e)}catch(l){dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dt(e,i,l)}}var s=e.return;try{Sw(e)}catch(l){dt(e,s,l)}break;case 5:var o=e.return;try{Sw(e)}catch(l){dt(e,o,l)}}}catch(l){dt(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var zD=Math.ceil,Bm=os.ReactCurrentDispatcher,lv=os.ReactCurrentOwner,Ir=os.ReactCurrentBatchConfig,Ie=0,zt=null,kt=null,Yt=0,Gn=0,zl=Io(0),Dt=0,Md=null,ba=0,Rp=0,cv=0,rd=null,An=null,uv=0,ac=1/0,Fi=null,$m=!1,Cw=null,no=null,xf=!1,qs=null,Wm=0,id=0,Rw=null,Yf=-1,Qf=0;function _n(){return Ie&6?_t():Yf!==-1?Yf:Yf=_t()}function ro(t){return t.mode&1?Ie&2&&Yt!==0?Yt&-Yt:TD.transition!==null?(Qf===0&&(Qf=i1()),Qf):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:d1(t.type)),t):1}function Gr(t,e,n,r){if(50<id)throw id=0,Rw=null,Error(H(185));ch(t,n,r),(!(Ie&2)||t!==zt)&&(t===zt&&(!(Ie&2)&&(Rp|=n),Dt===4&&js(t,Yt)),On(t,r),n===1&&Ie===0&&!(e.mode&1)&&(ac=_t()+500,Sp&&xo()))}function On(t,e){var n=t.callbackNode;T2(t,e);var r=Am(t,t===zt?Yt:0);if(r===0)n!==null&&Sb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sb(n),e===1)t.tag===0?xD(wI.bind(null,t)):R1(wI.bind(null,t)),vD(function(){!(Ie&6)&&xo()}),n=null;else{switch(s1(r)){case 1:n=M0;break;case 4:n=n1;break;case 16:n=Sm;break;case 536870912:n=r1;break;default:n=Sm}n=kS(n,bS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bS(t,e){if(Yf=-1,Qf=0,Ie&6)throw Error(H(327));var n=t.callbackNode;if(ql()&&t.callbackNode!==n)return null;var r=Am(t,t===zt?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hm(t,r);else{e=r;var i=Ie;Ie|=2;var s=xS();(zt!==t||Yt!==e)&&(Fi=null,ac=_t()+500,da(t,e));do try{WD();break}catch(a){IS(t,a)}while(1);Y0(),Bm.current=s,Ie=i,kt!==null?e=0:(zt=null,Yt=0,e=Dt)}if(e!==0){if(e===2&&(i=rw(t),i!==0&&(r=i,e=Pw(t,i))),e===1)throw n=Md,da(t,0),js(t,r),On(t,_t()),n;if(e===6)js(t,r);else{if(i=t.current.alternate,!(r&30)&&!BD(i)&&(e=Hm(t,r),e===2&&(s=rw(t),s!==0&&(r=s,e=Pw(t,s))),e===1))throw n=Md,da(t,0),js(t,r),On(t,_t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Ko(t,An,Fi);break;case 3:if(js(t,r),(r&130023424)===r&&(e=uv+500-_t(),10<e)){if(Am(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dw(Ko.bind(null,t,An,Fi),e);break}Ko(t,An,Fi);break;case 4:if(js(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Hr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zD(r/1960))-r,10<r){t.timeoutHandle=dw(Ko.bind(null,t,An,Fi),r);break}Ko(t,An,Fi);break;case 5:Ko(t,An,Fi);break;default:throw Error(H(329))}}}return On(t,_t()),t.callbackNode===n?bS.bind(null,t):null}function Pw(t,e){var n=rd;return t.current.memoizedState.isDehydrated&&(da(t,e).flags|=256),t=Hm(t,e),t!==2&&(e=An,An=n,e!==null&&Nw(e)),t}function Nw(t){An===null?An=t:An.push.apply(An,t)}function BD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function js(t,e){for(e&=~cv,e&=~Rp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hr(e),r=1<<n;t[n]=-1,e&=~r}}function wI(t){if(Ie&6)throw Error(H(327));ql();var e=Am(t,0);if(!(e&1))return On(t,_t()),null;var n=Hm(t,e);if(t.tag!==0&&n===2){var r=rw(t);r!==0&&(e=r,n=Pw(t,r))}if(n===1)throw n=Md,da(t,0),js(t,e),On(t,_t()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ko(t,An,Fi),On(t,_t()),null}function dv(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(ac=_t()+500,Sp&&xo())}}function Ia(t){qs!==null&&qs.tag===0&&!(Ie&6)&&ql();var e=Ie;Ie|=1;var n=Ir.transition,r=Oe;try{if(Ir.transition=null,Oe=1,t)return t()}finally{Oe=r,Ir.transition=n,Ie=e,!(Ie&6)&&xo()}}function hv(){Gn=zl.current,qe(zl)}function da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wD(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(G0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nm();break;case 3:sc(),qe(Dn),qe(un),tv();break;case 5:ev(r);break;case 4:sc();break;case 13:qe(it);break;case 19:qe(it);break;case 10:Q0(r.type._context);break;case 22:case 23:hv()}n=n.return}if(zt=t,kt=t=io(t.current,null),Yt=Gn=e,Dt=0,Md=null,cv=Rp=ba=0,An=rd=null,oa!==null){for(e=0;e<oa.length;e++)if(n=oa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}oa=null}return t}function IS(t,e){do{var n=kt;try{if(Y0(),Gf.current=zm,Um){for(var r=st.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Um=!1}if(_a=0,Ft=Nt=st=null,td=!1,Dd=0,lv.current=null,n===null||n.return===null){Dt=1,Md=e,kt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=sI(o);if(y!==null){y.flags&=-257,oI(y,o,a,s,e),y.mode&1&&iI(s,u,e),e=y,l=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){iI(s,u,e),fv();break e}l=Error(H(426))}}else if(Ze&&a.mode&1){var R=sI(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),oI(R,o,a,s,e),q0(oc(l,a));break e}}s=l=oc(l,a),Dt!==4&&(Dt=2),rd===null?rd=[s]:rd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=sS(s,l,e);Xb(s,I);break e;case 1:a=l;var b=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(no===null||!no.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=oS(s,a,e);Xb(s,N);break e}}s=s.return}while(s!==null)}ES(n)}catch(z){e=z,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(1)}function xS(){var t=Bm.current;return Bm.current=zm,t===null?zm:t}function fv(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),zt===null||!(ba&268435455)&&!(Rp&268435455)||js(zt,Yt)}function Hm(t,e){var n=Ie;Ie|=2;var r=xS();(zt!==t||Yt!==e)&&(Fi=null,da(t,e));do try{$D();break}catch(i){IS(t,i)}while(1);if(Y0(),Ie=n,Bm.current=r,kt!==null)throw Error(H(261));return zt=null,Yt=0,Dt}function $D(){for(;kt!==null;)TS(kt)}function WD(){for(;kt!==null&&!p2();)TS(kt)}function TS(t){var e=AS(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?ES(t):kt=e,lv.current=null}function ES(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VD(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,kt=null;return}}else if(n=MD(n,e,Gn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Dt===0&&(Dt=5)}function Ko(t,e,n){var r=Oe,i=Ir.transition;try{Ir.transition=null,Oe=1,HD(t,e,n,r)}finally{Ir.transition=i,Oe=r}return null}function HD(t,e,n,r){do ql();while(qs!==null);if(Ie&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(E2(t,s),t===zt&&(kt=zt=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xf||(xf=!0,kS(Sm,function(){return ql(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ir.transition,Ir.transition=null;var o=Oe;Oe=1;var a=Ie;Ie|=4,lv.current=null,FD(t,n),vS(n,t),dD(cw),km=!!lw,cw=lw=null,t.current=n,UD(n),g2(),Ie=a,Oe=o,Ir.transition=s}else t.current=n;if(xf&&(xf=!1,qs=t,Wm=i),s=t.pendingLanes,s===0&&(no=null),v2(n.stateNode),On(t,_t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($m)throw $m=!1,t=Cw,Cw=null,t;return Wm&1&&t.tag!==0&&ql(),s=t.pendingLanes,s&1?t===Rw?id++:(id=0,Rw=t):id=0,xo(),null}function ql(){if(qs!==null){var t=s1(Wm),e=Ir.transition,n=Oe;try{if(Ir.transition=null,Oe=16>t?16:t,qs===null)var r=!1;else{if(t=qs,qs=null,Wm=0,Ie&6)throw Error(H(331));var i=Ie;for(Ie|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:nd(8,h,s)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var p=h.sibling,y=h.return;if(gS(h),h===u){Z=null;break}if(p!==null){p.return=y,Z=p;break}Z=y}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var R=E.sibling;E.sibling=null,E=R}while(E!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:nd(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Z=I;break e}Z=s.return}}var b=t.current;for(Z=b;Z!==null;){o=Z;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Z=T;else e:for(o=b;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cp(9,a)}}catch(z){dt(a,a.return,z)}if(a===o){Z=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,Z=N;break e}Z=a.return}}if(Ie=i,xo(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(bp,t)}catch{}r=!0}return r}finally{Oe=n,Ir.transition=e}}return!1}function vI(t,e,n){e=oc(n,e),e=sS(t,e,1),t=to(t,e,1),e=_n(),t!==null&&(ch(t,1,e),On(t,e))}function dt(t,e,n){if(t.tag===3)vI(t,t,n);else for(;e!==null;){if(e.tag===3){vI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(no===null||!no.has(r))){t=oc(n,t),t=oS(e,t,1),e=to(e,t,1),t=_n(),e!==null&&(ch(e,1,t),On(e,t));break}}e=e.return}}function GD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Yt&n)===n&&(Dt===4||Dt===3&&(Yt&130023424)===Yt&&500>_t()-uv?da(t,0):cv|=n),On(t,e)}function SS(t,e){e===0&&(t.mode&1?(e=ff,ff<<=1,!(ff&130023424)&&(ff=4194304)):e=1);var n=_n();t=Xi(t,e),t!==null&&(ch(t,e,n),On(t,n))}function qD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SS(t,n)}function KD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),SS(t,n)}var AS;AS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,OD(t,e,n);kn=!!(t.flags&131072)}else kn=!1,Ze&&e.flags&1048576&&P1(e,Om,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kf(t,e),t=e.pendingProps;var i=nc(e,un.current);Gl(e,n),i=rv(null,e,r,t,i,n);var s=iv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ln(r)?(s=!0,Dm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X0(e),i.updater=kp,e.stateNode=i,i._reactInternals=e,ww(e,r,t,n),e=bw(null,e,r,!0,s,n)):(e.tag=0,Ze&&s&&H0(e),vn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=QD(r),t=jr(r,t),i){case 0:e=_w(null,e,r,t,n);break e;case 1:e=cI(null,e,r,t,n);break e;case 11:e=aI(null,e,r,t,n);break e;case 14:e=lI(null,e,r,jr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),_w(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),cI(t,e,r,i,n);case 3:e:{if(uS(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,V1(t,e),jm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oc(Error(H(423)),e),e=uI(t,e,r,n,i);break e}else if(r!==i){i=oc(Error(H(424)),e),e=uI(t,e,r,n,i);break e}else for(Qn=eo(e.stateNode.containerInfo.firstChild),Xn=e,Ze=!0,$r=null,n=O1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rc(),r===i){e=Zi(t,e,n);break e}vn(t,e,r,n)}e=e.child}return e;case 5:return j1(e),t===null&&pw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,uw(r,i)?o=null:s!==null&&uw(r,s)&&(e.flags|=32),cS(t,e),vn(t,e,o,n),e.child;case 6:return t===null&&pw(e),null;case 13:return dS(t,e,n);case 4:return Z0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ic(e,null,r,n):vn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),aI(t,e,r,i,n);case 7:return vn(t,e,e.pendingProps,n),e.child;case 8:return vn(t,e,e.pendingProps.children,n),e.child;case 12:return vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(Mm,r._currentValue),r._currentValue=o,s!==null)if(Kr(s.value,o)){if(s.children===i.children&&!Dn.current){e=Zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ki(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gl(e,n),i=xr(i),r=r(i),e.flags|=1,vn(t,e,r,n),e.child;case 14:return r=e.type,i=jr(r,e.pendingProps),i=jr(r.type,i),lI(t,e,r,i,n);case 15:return aS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),Kf(t,e),e.tag=1,Ln(r)?(t=!0,Dm(e)):t=!1,Gl(e,n),iS(e,r,i),ww(e,r,i,n),bw(null,e,r,!0,t,n);case 19:return hS(t,e,n);case 22:return lS(t,e,n)}throw Error(H(156,e.tag))};function kS(t,e){return t1(t,e)}function YD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,r){return new YD(t,e,n,r)}function mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QD(t){if(typeof t=="function")return mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D0)return 11;if(t===L0)return 14}return 2}function io(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pl:return ha(n.children,i,s,e);case N0:o=8,i|=8;break;case By:return t=vr(12,n,e,i|2),t.elementType=By,t.lanes=s,t;case $y:return t=vr(13,n,e,i),t.elementType=$y,t.lanes=s,t;case Wy:return t=vr(19,n,e,i),t.elementType=Wy,t.lanes=s,t;case jE:return Pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ME:o=10;break e;case VE:o=9;break e;case D0:o=11;break e;case L0:o=14;break e;case Ls:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=vr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ha(t,e,n,r){return t=vr(7,t,r,e),t.lanes=n,t}function Pp(t,e,n,r){return t=vr(22,t,r,e),t.elementType=jE,t.lanes=n,t.stateNode={isHidden:!1},t}function ty(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function ny(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mg(0),this.expirationTimes=Mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pv(t,e,n,r,i,s,o,a,l){return t=new JD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X0(s),t}function XD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CS(t){if(!t)return ho;t=t._reactInternals;e:{if(Va(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Ln(n))return C1(t,n,e)}return e}function RS(t,e,n,r,i,s,o,a,l){return t=pv(n,r,!0,t,i,s,o,a,l),t.context=CS(null),n=t.current,r=_n(),i=ro(n),s=Ki(r,i),s.callback=e??null,to(n,s,i),t.current.lanes=i,ch(t,i,r),On(t,r),t}function Np(t,e,n,r){var i=e.current,s=_n(),o=ro(i);return n=CS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ki(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=to(i,e,o),t!==null&&(Gr(t,i,o,s),Hf(t,i,o)),o}function Gm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _I(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gv(t,e){_I(t,e),(t=t.alternate)&&_I(t,e)}function ZD(){return null}var PS=typeof reportError=="function"?reportError:function(t){console.error(t)};function yv(t){this._internalRoot=t}Dp.prototype.render=yv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Np(t,e,null,null)};Dp.prototype.unmount=yv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ia(function(){Np(null,t,null,null)}),e[Ji]=null}};function Dp(t){this._internalRoot=t}Dp.prototype.unstable_scheduleHydration=function(t){if(t){var e=l1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vs.length&&e!==0&&e<Vs[n].priority;n++);Vs.splice(n,0,t),n===0&&u1(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bI(){}function eL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Gm(o);s.call(u)}}var o=RS(e,r,t,0,null,!1,!1,"",bI);return t._reactRootContainer=o,t[Ji]=o.current,kd(t.nodeType===8?t.parentNode:t),Ia(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gm(l);a.call(u)}}var l=pv(t,0,!1,null,null,!1,!1,"",bI);return t._reactRootContainer=l,t[Ji]=l.current,kd(t.nodeType===8?t.parentNode:t),Ia(function(){Np(e,l,n,r)}),l}function Op(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Gm(o);a.call(l)}}Np(e,o,t,i)}else o=eL(n,e,t,i,r);return Gm(o)}o1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uu(e.pendingLanes);n!==0&&(V0(e,n|1),On(e,_t()),!(Ie&6)&&(ac=_t()+500,xo()))}break;case 13:Ia(function(){var r=Xi(t,1);if(r!==null){var i=_n();Gr(r,t,1,i)}}),gv(t,1)}};j0=function(t){if(t.tag===13){var e=Xi(t,134217728);if(e!==null){var n=_n();Gr(e,t,134217728,n)}gv(t,134217728)}};a1=function(t){if(t.tag===13){var e=ro(t),n=Xi(t,e);if(n!==null){var r=_n();Gr(n,t,e,r)}gv(t,e)}};l1=function(){return Oe};c1=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};ew=function(t,e,n){switch(e){case"input":if(qy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ep(r);if(!i)throw Error(H(90));UE(r),qy(r,i)}}}break;case"textarea":BE(t,n);break;case"select":e=n.value,e!=null&&Bl(t,!!n.multiple,e,!1)}};YE=dv;QE=Ia;var tL={usingClientEntryPoint:!1,Events:[dh,Ol,Ep,qE,KE,dv]},Ru={findFiberByHostInstance:sa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nL={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||ZD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tf.isDisabled&&Tf.supportsFiber)try{bp=Tf.inject(nL),vi=Tf}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(H(200));return XD(t,e,null,n)};sr.createRoot=function(t,e){if(!wv(t))throw Error(H(299));var n=!1,r="",i=PS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pv(t,1,!1,null,null,n,!1,r,i),t[Ji]=e.current,kd(t.nodeType===8?t.parentNode:t),new yv(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=ZE(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return Ia(t)};sr.hydrate=function(t,e,n){if(!Lp(e))throw Error(H(200));return Op(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!wv(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=PS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=RS(e,null,t,1,n??null,i,!1,s,o),t[Ji]=e.current,kd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Dp(e)};sr.render=function(t,e,n){if(!Lp(e))throw Error(H(200));return Op(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!Lp(t))throw Error(H(40));return t._reactRootContainer?(Ia(function(){Op(null,null,t,!1,function(){t._reactRootContainer=null,t[Ji]=null})}),!0):!1};sr.unstable_batchedUpdates=dv;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lp(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Op(t,e,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function NS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NS)}catch(t){console.error(t)}}NS(),NE.exports=sr;var vv=NE.exports,II=vv;Uy.createRoot=II.createRoot,Uy.hydrateRoot=II.hydrateRoot;const rL="modulepreload",iL=function(t){return"/"+t},xI={},Vr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=iL(s),s in xI)return;xI[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":rL,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var sL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aL=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},u)=>F.createElement("svg",{ref:u,...sL,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${oL(t)}`,...l},[...e.map(([h,f])=>F.createElement(h,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ge=aL;const lL=ge("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Dw=ge("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),di=ge("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Lw=ge("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),TI=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),EI=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vd=ge("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),SI=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vt=ge("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),AI=ge("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),kI=ge("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),$n=ge("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),cL=ge("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),CI=ge("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),gn=ge("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ry=ge("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Yo=ge("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),uL=ge("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),dL=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),RI=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hL=ge("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),PI=ge("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Mi=ge("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ml=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),NI=ge("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),Vi=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),iy=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),pl=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),DI=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),sy=ge("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]),Hn=ge("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),oy=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),fL=ge("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]),LI=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Xf=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ji=ge("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),rn=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mL=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},LS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new gL;const p=s<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const _=u<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yL=function(t){const e=DS(t);return LS.encodeByteArray(e,!0)},qm=function(t){return yL(t).replace(/\./g,"")},OS=function(t){try{return LS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=()=>MS().__FIREBASE_DEFAULTS__,vL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_L=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},Mp=()=>{try{return mL()||wL()||vL()||_L()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VS=t=>{var e,n;return(n=(e=Mp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},jS=t=>{const e=VS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FS=()=>{var t;return(t=Mp())==null?void 0:t.config},US=t=>{var e;return(e=Mp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[qm(JSON.stringify(n)),qm(JSON.stringify(o)),a].join(".")}const sd={};function IL(){const t={prod:[],emulator:[]};for(const e of Object.keys(sd))sd[e]?t.emulator.push(e):t.prod.push(e);return t}function xL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let OI=!1;function _v(t,e){if(typeof window>"u"||typeof document>"u"||!as(window.location.host)||sd[t]===e||sd[t]||OI)return;sd[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=IL().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{OI=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=xL(r),y=n("text"),_=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),R=document.getElementById(E)||document.createElement("a"),I=n("preprendIcon"),b=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;a(T),h(R,E);const N=u();l(b,I),T.append(b,_,R,N),document.body.appendChild(T)}s?(_.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function BS(){var e;const t=(e=Mp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AL(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WS(){return!BS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HS(){return!BS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bv(){try{return typeof indexedDB=="object"}catch{return!1}}function GS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function kL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=CL,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ja.prototype.create)}}class ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ar(i,a,r)}}function RL(t,e){return t.replace(PL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PL=/\{\$([^}]+)}/g;function NL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Er(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(MI(s)&&MI(o)){if(!Er(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function MI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function $u(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DL(t,e){const n=new LL(t,e);return n.subscribe.bind(n)}class LL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ay(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=1e3,VL=2,jL=4*60*60*1e3,FL=.5;function VI(t,e=ML,n=VL){const r=e*Math.pow(n,t),i=Math.round(FL*r*(Math.random()-.5)*2);return Math.min(jL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t){return t&&t._delegate?t._delegate:t}class rr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BL(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zL(t){return t===Qo?void 0:t}function BL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const WL={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},HL=ye.INFO,GL={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},qL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=GL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fh{constructor(e){this.name=e,this._logLevel=HL,this._logHandler=qL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const KL=(t,e)=>e.some(n=>t instanceof n);let jI,FI;function YL(){return jI||(jI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QL(){return FI||(FI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,Ow=new WeakMap,KS=new WeakMap,ly=new WeakMap,Iv=new WeakMap;function JL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(so(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qS.set(n,t)}).catch(()=>{}),Iv.set(e,t),e}function XL(t){if(Ow.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ow.set(t,e)}let Mw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ow.get(t);if(e==="objectStoreNames")return t.objectStoreNames||KS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZL(t){Mw=t(Mw)}function eO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cy(this),e,...n);return KS.set(r,e.sort?e.sort():[e]),so(r)}:QL().includes(t)?function(...e){return t.apply(cy(this),e),so(qS.get(this))}:function(...e){return so(t.apply(cy(this),e))}}function tO(t){return typeof t=="function"?eO(t):(t instanceof IDBTransaction&&XL(t),KL(t,YL())?new Proxy(t,Mw):t)}function so(t){if(t instanceof IDBRequest)return JL(t);if(ly.has(t))return ly.get(t);const e=tO(t);return e!==t&&(ly.set(t,e),Iv.set(e,t)),e}const cy=t=>Iv.get(t);function YS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=so(o);return r&&o.addEventListener("upgradeneeded",l=>{r(so(o.result),l.oldVersion,l.newVersion,so(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nO=["get","getKey","getAll","getAllKeys","count"],rO=["put","add","delete","clear"],uy=new Map;function UI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uy.get(e))return uy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return uy.set(e,s),s}ZL(t=>({...t,get:(e,n,r)=>UI(e,n)||t.get(e,n,r),has:(e,n)=>!!UI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vw="@firebase/app",zI="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new fh("@firebase/app"),oO="@firebase/app-compat",aO="@firebase/analytics-compat",lO="@firebase/analytics",cO="@firebase/app-check-compat",uO="@firebase/app-check",dO="@firebase/auth",hO="@firebase/auth-compat",fO="@firebase/database",mO="@firebase/data-connect",pO="@firebase/database-compat",gO="@firebase/functions",yO="@firebase/functions-compat",wO="@firebase/installations",vO="@firebase/installations-compat",_O="@firebase/messaging",bO="@firebase/messaging-compat",IO="@firebase/performance",xO="@firebase/performance-compat",TO="@firebase/remote-config",EO="@firebase/remote-config-compat",SO="@firebase/storage",AO="@firebase/storage-compat",kO="@firebase/firestore",CO="@firebase/ai",RO="@firebase/firestore-compat",PO="firebase",NO="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="[DEFAULT]",DO={[Vw]:"fire-core",[oO]:"fire-core-compat",[lO]:"fire-analytics",[aO]:"fire-analytics-compat",[uO]:"fire-app-check",[cO]:"fire-app-check-compat",[dO]:"fire-auth",[hO]:"fire-auth-compat",[fO]:"fire-rtdb",[mO]:"fire-data-connect",[pO]:"fire-rtdb-compat",[gO]:"fire-fn",[yO]:"fire-fn-compat",[wO]:"fire-iid",[vO]:"fire-iid-compat",[_O]:"fire-fcm",[bO]:"fire-fcm-compat",[IO]:"fire-perf",[xO]:"fire-perf-compat",[TO]:"fire-rc",[EO]:"fire-rc-compat",[SO]:"fire-gcs",[AO]:"fire-gcs-compat",[kO]:"fire-fst",[RO]:"fire-fst-compat",[CO]:"fire-vertex","fire-js":"fire-js",[PO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=new Map,LO=new Map,jw=new Map;function BI(t,e){try{t.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){const e=t.name;if(jw.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;jw.set(e,t);for(const n of Ym.values())BI(n,t);for(const n of LO.values())BI(n,t);return!0}function Yr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function OO(t,e,n=Km){Yr(t,e).clearInstance(n)}function et(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new ja("app","Firebase",MO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=NO;function QS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Km,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw oo.create("bad-app-name",{appName:String(i)});if(n||(n=FS()),!n)throw oo.create("no-options");const s=Ym.get(i);if(s){if(Er(n,s.options)&&Er(r,s.config))return s;throw oo.create("duplicate-app",{appName:i})}const o=new $L(i);for(const l of jw.values())o.addComponent(l);const a=new VO(n,r,o);return Ym.set(i,a),a}function mh(t=Km){const e=Ym.get(t);if(!e&&t===Km&&FS())return QS();if(!e)throw oo.create("no-app",{appName:t});return e}function an(t,e,n){let r=DO[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(o.join(" "));return}Sr(new rr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="firebase-heartbeat-database",FO=1,jd="firebase-heartbeat-store";let dy=null;function JS(){return dy||(dy=YS(jO,FO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jd)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),dy}async function UO(t){try{const n=(await JS()).transaction(jd),r=await n.objectStore(jd).get(XS(t));return await n.done,r}catch(e){if(e instanceof ar)es.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(n.message)}}}async function $I(t,e){try{const r=(await JS()).transaction(jd,"readwrite");await r.objectStore(jd).put(e,XS(t)),await r.done}catch(n){if(n instanceof ar)es.warn(n.message);else{const r=oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});es.warn(r.message)}}}function XS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=1024,BO=30;class $O{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>BO){const o=GO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WI(),{heartbeatsToSend:r,unsentEntries:i}=WO(this._heartbeatsCache.heartbeats),s=qm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return es.warn(n),""}}}function WI(){return new Date().toISOString().substring(0,10)}function WO(t,e=zO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),HI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),HI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bv()?GS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $I(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $I(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function HI(t){return qm(JSON.stringify({version:2,heartbeats:t})).length}function GO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){Sr(new rr("platform-logger",e=>new iO(e),"PRIVATE")),Sr(new rr("heartbeat",e=>new $O(e),"PRIVATE")),an(Vw,zI,t),an(Vw,zI,"esm2020"),an("fire-js","")}qO("");var KO="firebase",YO="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an(KO,YO,"app");const ZS="@firebase/installations",xv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=1e4,tA=`w:${xv}`,nA="FIS_v2",QO="https://firebaseinstallations.googleapis.com/v1",JO=60*60*1e3,XO="installations",ZO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xa=new ja(XO,ZO,eM);function rA(t){return t instanceof ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA({projectId:t}){return`${QO}/projects/${t}/installations`}function sA(t){return{token:t.token,requestStatus:2,expiresIn:nM(t.expiresIn),creationTime:Date.now()}}async function oA(t,e){const r=(await e.json()).error;return xa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function aA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function tM(t,{refreshToken:e}){const n=aA(t);return n.append("Authorization",rM(e)),n}async function lA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nM(t){return Number(t.replace("s","000"))}function rM(t){return`${nA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iA(t),i=aA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:nA,appId:t.appId,sdkVersion:tA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await lA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:sA(u.authToken)}}else throw await oA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=/^[cdef][\w-]{21}$/,Fw="";function aM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lM(t);return oM.test(n)?n:Fw}catch{return Fw}}function lM(t){return sM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map;function dA(t,e){const n=jp(t);hA(n,e),cM(n,e)}function hA(t,e){const n=uA.get(t);if(n)for(const r of n)r(e)}function cM(t,e){const n=uM();n&&n.postMessage({key:t,fid:e}),dM()}let la=null;function uM(){return!la&&"BroadcastChannel"in self&&(la=new BroadcastChannel("[Firebase] FID Change"),la.onmessage=t=>{hA(t.data.key,t.data.fid)}),la}function dM(){uA.size===0&&la&&(la.close(),la=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="firebase-installations-database",fM=1,Ta="firebase-installations-store";let hy=null;function Tv(){return hy||(hy=YS(hM,fM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ta)}}})),hy}async function Qm(t,e){const n=jp(t),i=(await Tv()).transaction(Ta,"readwrite"),s=i.objectStore(Ta),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&dA(t,e.fid),e}async function fA(t){const e=jp(t),r=(await Tv()).transaction(Ta,"readwrite");await r.objectStore(Ta).delete(e),await r.done}async function Fp(t,e){const n=jp(t),i=(await Tv()).transaction(Ta,"readwrite"),s=i.objectStore(Ta),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&dA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(t){let e;const n=await Fp(t.appConfig,r=>{const i=mM(r),s=pM(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Fw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mM(t){const e=t||{fid:aM(),registrationStatus:0};return mA(e)}function pM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(xa.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=gM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yM(t)}:{installationEntry:e}}async function gM(t,e){try{const n=await iM(t,e);return Qm(t.appConfig,n)}catch(n){throw rA(n)&&n.customData.serverCode===409?await fA(t.appConfig):await Qm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function yM(t){let e=await GI(t.appConfig);for(;e.registrationStatus===1;)await cA(100),e=await GI(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ev(t);return r||n}return e}function GI(t){return Fp(t,e=>{if(!e)throw xa.create("installation-not-found");return mA(e)})}function mA(t){return wM(t)?{fid:t.fid,registrationStatus:0}:t}function wM(t){return t.registrationStatus===1&&t.registrationTime+eA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM({appConfig:t,heartbeatServiceProvider:e},n){const r=_M(t,n),i=tM(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:tA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await lA(()=>fetch(r,a));if(l.ok){const u=await l.json();return sA(u)}else throw await oA("Generate Auth Token",l)}function _M(t,{fid:e}){return`${iA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sv(t,e=!1){let n;const r=await Fp(t.appConfig,s=>{if(!pA(s))throw xa.create("not-registered");const o=s.authToken;if(!e&&xM(o))return s;if(o.requestStatus===1)return n=bM(t,e),s;{if(!navigator.onLine)throw xa.create("app-offline");const a=EM(s);return n=IM(t,a),a}});return n?await n:r.authToken}async function bM(t,e){let n=await qI(t.appConfig);for(;n.authToken.requestStatus===1;)await cA(100),n=await qI(t.appConfig);const r=n.authToken;return r.requestStatus===0?Sv(t,e):r}function qI(t){return Fp(t,e=>{if(!pA(e))throw xa.create("not-registered");const n=e.authToken;return SM(n)?{...e,authToken:{requestStatus:0}}:e})}async function IM(t,e){try{const n=await vM(t,e),r={...e,authToken:n};return await Qm(t.appConfig,r),n}catch(n){if(rA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await fA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Qm(t.appConfig,r)}throw n}}function pA(t){return t!==void 0&&t.registrationStatus===2}function xM(t){return t.requestStatus===2&&!TM(t)}function TM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JO}function EM(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function SM(t){return t.requestStatus===1&&t.requestTime+eA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ev(e);return r?r.catch(console.error):Sv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e=!1){const n=t;return await CM(n),(await Sv(n,e)).token}async function CM(t){const{registrationPromise:e}=await Ev(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){if(!t||!t.options)throw fy("App Configuration");if(!t.name)throw fy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fy(t){return xa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="installations",PM="installations-internal",NM=t=>{const e=t.getProvider("app").getImmediate(),n=RM(e),r=Yr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DM=t=>{const e=t.getProvider("app").getImmediate(),n=Yr(e,gA).getImmediate();return{getId:()=>AM(n),getToken:i=>kM(n,i)}};function LM(){Sr(new rr(gA,NM,"PUBLIC")),Sr(new rr(PM,DM,"PRIVATE"))}LM();an(ZS,xv);an(ZS,xv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="analytics",OM="firebase_id",MM="origin",VM=60*1e3,jM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Av="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new fh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new ja("analytics","Analytics",FM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){if(!t.startsWith(Av)){const e=Zn.create("invalid-gtag-resource",{gtagURL:t});return Mn.warn(e.message),""}return t}function yA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function zM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function BM(t,e){const n=zM("firebase-js-sdk-policy",{createScriptURL:UM}),r=document.createElement("script"),i=`${Av}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function $M(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WM(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await yA(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Mn.error(a)}t("config",i,s)}async function HM(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await yA(n);for(const l of o){const u=a.find(f=>f.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Mn.error(s)}}function GM(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await HM(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await WM(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Mn.error(a)}}return i}function qM(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=GM(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function KM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Av)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=30,QM=1e3;class JM{constructor(e={},n=QM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wA=new JM;function XM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZM(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:XM(n)},i=jM.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function eV(t,e=wA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Zn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new rV;return setTimeout(async()=>{a.abort()},n!==void 0?n:VM),vA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function vA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=wA){var a;const{appId:s,measurementId:o}=t;try{await tV(r,e)}catch(l){if(o)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await ZM(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!nV(u)){if(i.deleteThrottleMetadata(s),o)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?VI(n,i.intervalMillis,YM):VI(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,f),Mn.debug(`Calling attemptFetch again in ${h} millis`),vA(t,f,r,i)}}function tV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nV(t){if(!(t instanceof ar)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class rV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(){if(bv())try{await GS()}catch(t){return Mn.warn(Zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Mn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function oV(t,e,n,r,i,s,o){const a=eV(t);a.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Mn.error(p)),e.push(a);const l=sV().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([a,l]);KM(s)||BM(s,u.measurementId),i("js",new Date);const f=(o==null?void 0:o.config)??{};return f[MM]="firebase",f.update=!0,h!=null&&(f[OM]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.app=e}_delete(){return delete od[this.app.options.appId],Promise.resolve()}}let od={},KI=[];const YI={};let my="dataLayer",lV="gtag",QI,_A,JI=!1;function cV(){const t=[];if($S()&&t.push("This is a browser extension environment."),kL()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});Mn.warn(n.message)}}function uV(t,e,n){cV();const r=t.options.appId;if(!r)throw Zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(od[r]!=null)throw Zn.create("already-exists",{id:r});if(!JI){$M(my);const{wrappedGtag:s,gtagCore:o}=qM(od,KI,YI,my,lV);_A=s,QI=o,JI=!0}return od[r]=oV(t,KI,YI,e,QI,my,n),new aV(t)}function dV(t=mh()){t=X(t);const e=Yr(t,Jm);return e.isInitialized()?e.getImmediate():hV(t)}function hV(t,e={}){const n=Yr(t,Jm);if(n.isInitialized()){const i=n.getImmediate();if(Er(e,n.getOptions()))return i;throw Zn.create("already-initialized")}return n.initialize({options:e})}function bA(t,e,n,r){t=X(t),iV(_A,od[t.app.options.appId],e,n,r).catch(i=>Mn.error(i))}const XI="@firebase/analytics",ZI="0.10.18";function fV(){Sr(new rr(Jm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return uV(r,i,n)},"PUBLIC")),Sr(new rr("analytics-internal",t,"PRIVATE")),an(XI,ZI),an(XI,ZI,"esm2020");function t(e){try{const n=e.getProvider(Jm).getImmediate();return{logEvent:(r,i,s)=>bA(n,r,i,s)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}}}fV();var ex="@firebase/ai",tx="2.2.1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc="AI",nx="us-central1",rx={PREFER_ON_DEVICE:"prefer_on_device",ONLY_ON_DEVICE:"only_on_device",ONLY_IN_CLOUD:"only_in_cloud"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",SESSION_CLOSED:"session-closed",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.backendType=e}}class Up extends xA{constructor(){super(IA.GOOGLE_AI)}}class kv extends xA{constructor(e=nx){super(IA.VERTEX_AI),e?this.location=e:this.location=nx}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mV=class{constructor(e,n,r,i,s){this.app=e,this.backend=n,this.chromeAdapterFactory=s;const o=i==null?void 0:i.getImmediate({optional:!0}),a=r==null?void 0:r.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,n instanceof kv?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}set options(e){this._options=e}get options(){return this._options}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends ar{constructor(e,n,r){const i=lc,s=`${i}/${e}`,o=`${i}: ${n} (${s})`;super(e,o),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,_r),Object.setPrototypeOf(this,_r.prototype),this.toString=()=>o}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){if(t instanceof Up)return`${lc}/googleai`;if(t instanceof kv)return`${lc}/vertexai/${t.location}`;throw new _r(Wi.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function gV(t){const e=t.split("/");if(e[0]!==lc)throw new _r(Wi.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new _r(Wi.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new kv(r);case"googleai":return new Up;default:throw new _r(Wi.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new fh("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ix;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(ix||(ix={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(t=mh(),e){t=X(t);const n=Yr(t,lc),r=(e==null?void 0:e.backend)??new Up,i={useLimitedUseAppCheckTokens:(e==null?void 0:e.useLimitedUseAppCheckTokens)??!1},s=pV(r),o=n.getImmediate({identifier:s});return o.options=i,o}var ea;(function(t){t.UNAVAILABLE="unavailable",t.DOWNLOADABLE="downloadable",t.DOWNLOADING="downloading",t.AVAILABLE="available"})(ea||(ea={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r={createOptions:{expectedInputs:[{type:"image"}]}}){this.languageModelProvider=e,this.mode=n,this.onDeviceParams=r,this.isDownloading=!1}async isAvailable(e){if(!this.mode)return ks.debug("On-device inference unavailable because mode is undefined."),!1;if(this.mode===rx.ONLY_IN_CLOUD)return ks.debug('On-device inference unavailable because mode is "only_in_cloud".'),!1;const n=await this.downloadIfAvailable();if(this.mode===rx.ONLY_ON_DEVICE){if(n===ea.UNAVAILABLE)throw new _r(Wi.API_NOT_ENABLED,"Local LanguageModel API not available in this environment.");return(n===ea.DOWNLOADABLE||n===ea.DOWNLOADING)&&(ks.debug("Waiting for download of LanguageModel to complete."),await this.downloadPromise),!0}return n!==ea.AVAILABLE?(ks.debug(`On-device inference unavailable because availability is "${n}".`),!1):Fr.isOnDeviceRequest(e)?!0:(ks.debug("On-device inference unavailable because request is incompatible."),!1)}async generateContent(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Fr.toLanguageModelMessage)),i=await n.prompt(r,this.onDeviceParams.promptOptions);return Fr.toResponse(i)}async generateContentStream(e){const n=await this.createSession(),r=await Promise.all(e.contents.map(Fr.toLanguageModelMessage)),i=n.promptStreaming(r,this.onDeviceParams.promptOptions);return Fr.toStreamResponse(i)}async countTokens(e){throw new _r(Wi.REQUEST_ERROR,"Count Tokens is not yet available for on-device model.")}static isOnDeviceRequest(e){if(e.contents.length===0)return ks.debug("Empty prompt rejected for on-device inference."),!1;for(const n of e.contents){if(n.role==="function")return ks.debug('"Function" role rejected for on-device inference.'),!1;for(const r of n.parts)if(r.inlineData&&Fr.SUPPORTED_MIME_TYPES.indexOf(r.inlineData.mimeType)===-1)return ks.debug(`Unsupported mime type "${r.inlineData.mimeType}" rejected for on-device inference.`),!1}return!0}async downloadIfAvailable(){var n;const e=await((n=this.languageModelProvider)==null?void 0:n.availability(this.onDeviceParams.createOptions));return e===ea.DOWNLOADABLE&&this.download(),e}download(){var e;this.isDownloading||(this.isDownloading=!0,this.downloadPromise=(e=this.languageModelProvider)==null?void 0:e.create(this.onDeviceParams.createOptions).finally(()=>{this.isDownloading=!1}))}static async toLanguageModelMessage(e){const n=await Promise.all(e.parts.map(Fr.toLanguageModelMessageContent));return{role:Fr.toLanguageModelMessageRole(e.role),content:n}}static async toLanguageModelMessageContent(e){if(e.text)return{type:"text",value:e.text};if(e.inlineData){const r=await(await fetch(`data:${e.inlineData.mimeType};base64,${e.inlineData.data}`)).blob();return{type:"image",value:await createImageBitmap(r)}}throw new _r(Wi.REQUEST_ERROR,"Processing of this Part type is not currently supported.")}static toLanguageModelMessageRole(e){return e==="model"?"assistant":"user"}async createSession(){if(!this.languageModelProvider)throw new _r(Wi.UNSUPPORTED,"Chrome AI requested for unsupported browser version.");const e=await this.languageModelProvider.create(this.onDeviceParams.createOptions);return this.oldSession&&this.oldSession.destroy(),this.oldSession=e,e}static toResponse(e){return{json:async()=>({candidates:[{content:{parts:[{text:e}]}}]})}}static toStreamResponse(e){const n=new TextEncoder;return{body:e.pipeThrough(new TransformStream({transform(r,i){const s=JSON.stringify({candidates:[{content:{role:"model",parts:[{text:r}]}}]});i.enqueue(n.encode(`data: ${s}

`))}}))}}}Fr.SUPPORTED_MIME_TYPES=["image/jpeg","image/png"];function wV(t,e,n){if(typeof e<"u"&&t)return new Fr(e.LanguageModel,t,n)}function vV(t,{instanceIdentifier:e}){if(!e)throw new _r(Wi.ERROR,"AIService instance identifier is undefined.");const n=gV(e),r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new mV(r,n,i,s,wV)}function _V(){Sr(new rr(lc,vV,"PUBLIC").setMultipleInstances(!0)),an(ex,tx),an(ex,tx,"esm2020")}_V();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$={PHONE:"phone",TOTP:"totp"},R$={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},P$={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},N$={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},D$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function TA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L$=bV,IV=TA,EA=new ja("auth","Firebase",TA()),O$={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new fh("@firebase/auth");function xV(t,...e){Xm.logLevel<=ye.WARN&&Xm.warn(`Auth (${Fa}): ${t}`,...e)}function Zf(t,...e){Xm.logLevel<=ye.ERROR&&Xm.error(`Auth (${Fa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw Rv(t,...e)}function bn(t,...e){return Rv(t,...e)}function Cv(t,e,n){const r={...IV(),[e]:n};return new ja("auth","Firebase",r).create(e,{appName:t.name})}function Bt(t){return Cv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vn(t,"argument-error"),Cv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EA.create(t,...e)}function G(t,e,...n){if(!t)throw Rv(e,...n)}function pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zf(e),new Error(e)}function ts(t,e){t||pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Pv(){return sx()==="http:"||sx()==="https:"}function sx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pv()||$S()||"connection"in navigator)?navigator.onLine:!0}function EV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.shortDelay=e,this.longDelay=n,ts(n>e,"Short delay should be less than long delay!"),this.isMobile=TL()||SL()}get(){return TV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t,e){ts(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kV=new ph(3e4,6e4);function Ke(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ye(t,e,n,r,i={}){return AA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Dc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return EL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&as(t.emulatorConfig.host)&&(u.credentials="include"),SA.fetch()(await kA(t,t.config.apiHost,n,a),u)})}async function AA(t,e,n){t._canInitEmulator=!1;const r={...SV,...e};try{const i=new RV(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Cv(t,h,u);Vn(t,h)}}catch(i){if(i instanceof ar)throw i;Vn(t,"network-request-failed",{message:String(i)})}}async function ls(t,e,n,r,i={}){const s=await Ye(t,e,n,r,i);return"mfaPendingCredential"in s&&Vn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function kA(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Nv(t.config,i):`${t.config.apiScheme}://${i}`;return AV.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function CV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),kV.get())})}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){return t!==void 0&&t.getResponse!==void 0}function ax(t){return t!==void 0&&t.enterprise!==void 0}class CA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t){return(await Ye(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function RA(t,e){return Ye(t,"GET","/v2/recaptchaConfig",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){return Ye(t,"POST","/v1/accounts:delete",e)}async function DV(t,e){return Ye(t,"POST","/v1/accounts:update",e)}async function Zm(t,e){return Ye(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t,e=!1){return X(t).getIdToken(e)}async function LV(t,e=!1){const n=X(t),r=await n.getIdToken(e),i=zp(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ad(py(i.auth_time)),issuedAtTime:ad(py(i.iat)),expirationTime:ad(py(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function py(t){return Number(t)*1e3}function zp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const i=OS(n);return i?JSON.parse(i):(Zf("Failed to decode base64 JWT payload"),null)}catch(i){return Zf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lx(t){const e=zp(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ns(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&OV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ad(this.lastLoginAt),this.creationTime=ad(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ns(t,Zm(e,{idToken:n}));G(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?PA(i.providerUserInfo):[],o=jV(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Uw(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function VV(t){const e=X(t);await Ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){const n=await AA(t,{},async()=>{const r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await kA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&as(t.emulatorConfig.host)&&(l.credentials="include"),SA.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UV(t,e){return Ye(t,"POST","/v2/accounts:revokeToken",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=lx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Kl;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(G(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wr{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new MV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ns(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LV(this,e)}reload(){return VV(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ud(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(et(this.auth.app))return Promise.reject(Bt(this.auth));const e=await this.getIdToken();return await ns(this,NV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:y,providerData:_,stsTokenManager:E}=n;G(f&&E,e,"internal-error");const R=Kl.fromJSON(this.name,E);G(typeof f=="string",e,"internal-error"),Cs(r,e.name),Cs(i,e.name),G(typeof p=="boolean",e,"internal-error"),G(typeof y=="boolean",e,"internal-error"),Cs(s,e.name),Cs(o,e.name),Cs(a,e.name),Cs(l,e.name),Cs(u,e.name),Cs(h,e.name);const I=new Wr({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:R,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(I.providerData=_.map(b=>({...b}))),l&&(I._redirectEventId=l),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Kl;i.updateFromServerResponse(n);const s=new Wr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ud(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];G(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?PA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Kl;a.updateFromIdToken(r);const l=new Wr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Uw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Map;function Hi(t){ts(t instanceof Function,"Expected a class definition");let e=cx.get(t);return e?(ts(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NA.type="NONE";const ux=NA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){return`firebase:${t}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=em(this.userKey,i.apiKey,s),this.fullPersistenceKey=em("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zm(this.auth,{idToken:e}).catch(()=>{});return n?Wr._fromGetAccountInfoResponse(this.auth,n,e):null}return Wr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(Hi(ux),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Hi(ux);const o=em(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Zm(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Wr._fromGetAccountInfoResponse(e,p,h)}else f=Wr._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Yl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Yl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jA(e))return"Blackberry";if(FA(e))return"Webos";if(LA(e))return"Safari";if((e.includes("chrome/")||OA(e))&&!e.includes("edge/"))return"Chrome";if(VA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DA(t=Lt()){return/firefox\//i.test(t)}function LA(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OA(t=Lt()){return/crios\//i.test(t)}function MA(t=Lt()){return/iemobile/i.test(t)}function VA(t=Lt()){return/android/i.test(t)}function jA(t=Lt()){return/blackberry/i.test(t)}function FA(t=Lt()){return/webos/i.test(t)}function Dv(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zV(t=Lt()){var e;return Dv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function BV(){return AL()&&document.documentMode===10}function UA(t=Lt()){return Dv(t)||VA(t)||FA(t)||jA(t)||/windows phone/i.test(t)||MA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e=[]){let n;switch(t){case"Browser":n=dx(Lt());break;case"Worker":n=`${dx(Lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(t,e={}){return Ye(t,"GET","/v2/passwordPolicy",Ke(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=6;class GV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hx(this),this.idTokenSubscription=new hx(this),this.beforeStateQueue=new $V(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zm(this,{idToken:e}),r=await Wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(et(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ud(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(et(this.app))return Promise.reject(Bt(this));const n=e?X(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return et(this.app)?Promise.reject(Bt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return et(this.app)?Promise.reject(Bt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WV(this),n=new GV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mt(t){return X(t)}class hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=DL(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KV(t){gh=t}function Lv(t){return gh.loadJS(t)}function YV(){return gh.recaptchaV2Script}function QV(){return gh.recaptchaEnterpriseScript}function JV(){return gh.gapiScript}function BA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=500,ZV=6e4,Ef=1e12;class ej{constructor(e){this.auth=e,this.counter=Ef,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new rj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Ef;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Ef;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Ef;return(r=this._widgets.get(n))==null||r.execute(),""}}class tj{constructor(){this.enterprise=new nj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;G(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ij(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ZV)},XV))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ij(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const sj="recaptcha-enterprise",ld="NO_RECAPTCHA";class $A{constructor(e){this.type=sj,this.auth=mt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{RA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new CA(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;ax(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(ld)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tj().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&ax(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QV();l.length!==0&&(l+=a),Lv(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Pu(t,e,n,r=!1,i=!1){const s=new $A(t);let o;if(i)o=ld;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ao(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Pu(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Pu(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Pu(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Pu(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await Pu(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function WA(t){const e=mt(t),n=await RA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new CA(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new $A(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t,e){const n=Yr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Er(s,e??{}))return i;Vn(i,"already-initialized")}return n.initialize({options:e})}function aj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lj(t,e,n){const r=mt(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=HA(e),{host:o,port:a}=cj(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Er(u,r.config.emulator)&&Er(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,as(o)?(Vp(`${s}//${o}${l}`),_v("Auth",!0)):i||uj()}function HA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cj(t){const e=HA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:fx(o)}}}function fx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pi("not implemented")}_getIdTokenResponse(e){return pi("not implemented")}_linkToIdToken(e,n){return pi("not implemented")}_getReauthenticationResolver(e){return pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return Ye(t,"POST","/v1/accounts:resetPassword",Ke(t,e))}async function dj(t,e){return Ye(t,"POST","/v1/accounts:update",e)}async function hj(t,e){return Ye(t,"POST","/v1/accounts:signUp",e)}async function fj(t,e){return Ye(t,"POST","/v1/accounts:update",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){return ls(t,"POST","/v1/accounts:signInWithPassword",Ke(t,e))}async function Bp(t,e){return Ye(t,"POST","/v1/accounts:sendOobCode",Ke(t,e))}async function pj(t,e){return Bp(t,e)}async function gj(t,e){return Bp(t,e)}async function yj(t,e){return Bp(t,e)}async function wj(t,e){return Bp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return ls(t,"POST","/v1/accounts:signInWithEmailLink",Ke(t,e))}async function _j(t,e){return ls(t,"POST","/v1/accounts:signInWithEmailLink",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends yh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new zd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ao(e,n,"signInWithPassword",mj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vj(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ao(e,r,"signUpPassword",hj,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _j(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return ls(t,"POST","/v1/accounts:signInWithIdp",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="http://localhost";class rs extends yh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new rs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}buildRequest(){const e={requestUri:bj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(t,e){return Ye(t,"POST","/v1/accounts:sendVerificationCode",Ke(t,e))}async function Ij(t,e){return ls(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,e))}async function xj(t,e){const n=await ls(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,e));if(n.temporaryProof)throw Wu(t,"account-exists-with-different-credential",n);return n}const Tj={USER_NOT_FOUND:"user-not-found"};async function Ej(t,e){const n={...e,operation:"REAUTH"};return ls(t,"POST","/v1/accounts:signInWithPhoneNumber",Ke(t,n),Tj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends yh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new fa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new fa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Ij(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return xj(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return Ej(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new fa({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Aj(t){const e=Bu($u(t)).link,n=e?Bu($u(e)).deep_link_id:null,r=Bu($u(t)).deep_link_id;return(r?Bu($u(r)).link:null)||r||n||e||t}class wh{constructor(e){const n=Bu($u(e)),r=n.apiKey??null,i=n.oobCode??null,s=Sj(n.mode??null);G(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Aj(e);try{return new wh(n)}catch{return null}}}function V$(t){return wh.parseLink(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.providerId=Ua.PROVIDER_ID}static credential(e,n){return zd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wh.parseLink(n);return G(r,"argument-error"),zd._fromEmailAndCode(e,r.code,r.tenantId)}}Ua.PROVIDER_ID="password";Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tm extends Oc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),rs._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),rs._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return tm.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tm.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new tm(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Oc{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Oc{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="http://localhost";class Bd extends yh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Bd(r,s)}static _create(e,n){return new Bd(e,n)}buildRequest(){return{requestUri:kj,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="saml.";class zw extends cs{constructor(e){G(e.startsWith(Cj),"argument-error"),super(e)}static credentialFromResult(e){return zw.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return zw.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Bd.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Bd._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Oc{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e){return ls(t,"POST","/v1/accounts:signUp",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Wr._fromIdTokenResponse(e,r,i),o=px(r);return new Ar({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=px(r);return new Ar({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function px(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t){var i;if(et(t.app))return Promise.reject(Bt(t));const e=mt(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Ar({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await qA(e,{returnSecureToken:!0}),r=await Ar._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends ar{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ep(e,n,r,i)}}function KA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ep._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,e){const n=X(t);await $p(!0,n,e);const{providerUserInfo:r}=await DV(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=YA(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ov(t,e,n=!1){const r=await ns(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ar._forOperation(t,"link",r)}async function $p(t,e,n){await Ud(e);const r=YA(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";G(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(t,e,n=!1){const{auth:r}=t;if(et(r.app))return Promise.reject(Bt(r));const i="reauthenticate";try{const s=await ns(t,KA(r,i,e,t),n);G(s.idToken,r,"internal-error");const o=zp(s.idToken);G(o,r,"internal-error");const{sub:a}=o;return G(t.uid===a,r,"user-mismatch"),Ar._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e,n=!1){if(et(t.app))return Promise.reject(Bt(t));const r="signIn",i=await KA(t,r,e),s=await Ar._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Mv(t,e){return JA(mt(t),e)}async function Pj(t,e){const n=X(t);return await $p(!1,n,e.providerId),Ov(n,e)}async function Nj(t,e){return QA(X(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(t,e){return ls(t,"POST","/v1/accounts:signInWithCustomToken",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F$(t,e){if(et(t.app))return Promise.reject(Bt(t));const n=mt(t),r=await Dj(n,{token:e,returnSecureToken:!0}),i=await Ar._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Vv._fromServerResponse(e,n):"totpInfo"in n?jv._fromServerResponse(e,n):Vn(e,"internal-error")}}class Vv extends vh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Vv(n)}}class jv extends vh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new jv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e,n){var r;G(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fv(t){const e=mt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function U$(t,e,n){const r=mt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Wp(r,i,n),await ao(r,i,"getOobCode",gj,"EMAIL_PASSWORD_PROVIDER")}async function z$(t,e,n){await GA(X(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fv(t),r})}async function B$(t,e){await fj(X(t),{oobCode:e})}async function Lj(t,e){const n=X(t),r=await GA(n,{oobCode:e}),i=r.requestType;switch(G(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(r.mfaInfo,n,"internal-error");default:G(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=vh._fromServerResponse(mt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function $$(t,e){const{data:n}=await Lj(X(t),e);return n.email}async function W$(t,e,n){if(et(t.app))return Promise.reject(Bt(t));const r=mt(t),o=await ao(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qA,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Fv(t),l}),a=await Ar._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function H$(t,e,n){return et(t.app)?Promise.reject(Bt(t)):Mv(X(t),Ua.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G$(t,e,n){const r=mt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){G(a.handleCodeInApp,r,"argument-error"),a&&Wp(r,o,a)}s(i,n),await ao(r,i,"getOobCode",yj,"EMAIL_PASSWORD_PROVIDER")}function q$(t,e){const n=wh.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function K$(t,e,n){if(et(t.app))return Promise.reject(Bt(t));const r=X(t),i=Ua.credentialWithLink(e,n||Fd());return G(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Mv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return Ye(t,"POST","/v1/accounts:createAuthUri",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y$(t,e){const n=Pv()?Fd():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Oj(X(t),r);return i||[]}async function Q$(t,e){const n=X(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Wp(n.auth,i,e);const{email:s}=await pj(n.auth,i);s!==t.email&&await t.reload()}async function J$(t,e,n){const r=X(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Wp(r.auth,s,n);const{email:o}=await wj(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){return Ye(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=X(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ns(r,Mj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Z$(t,e){const n=X(t);return et(n.auth.app)?Promise.reject(Bt(n.auth)):XA(n,e,null)}function e8(t,e){return XA(X(t),null,e)}async function XA(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await ns(t,dj(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const o=(s=(i=zp(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Ql(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new jj(r,n);case"github.com":return new Fj(r,n);case"google.com":return new Uj(r,n);case"twitter.com":return new zj(r,n,t.screenName||null);case"custom":case"anonymous":return new Ql(r,null);default:return new Ql(r,e,n)}}class Ql{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class ZA extends Ql{constructor(e,n,r,i){super(e,n,r),this.username=i}}class jj extends Ql{constructor(e,n){super(e,"facebook.com",n)}}class Fj extends ZA{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Uj extends Ql{constructor(e,n){super(e,"google.com",n)}}class zj extends ZA{constructor(e,n,r){super(e,"twitter.com",n,r)}}function t8(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Vj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t,e){return X(t).setPersistence(e)}function r8(t){return WA(t)}async function i8(t,e){return mt(t).validatePassword(e)}function Bj(t,e,n,r){return X(t).onIdTokenChanged(e,n,r)}function $j(t,e,n){return X(t).beforeAuthStateChanged(e,n)}function Wj(t,e,n,r){return X(t).onAuthStateChanged(e,n,r)}function s8(t){X(t).useDeviceLanguage()}function o8(t,e){return X(t).updateCurrentUser(e)}function a8(t){return X(t).signOut()}function l8(t,e){return mt(t).revokeAccessToken(e)}async function c8(t){return X(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ca("enroll",e,n)}static _fromMfaPendingCredential(e){return new ca("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return ca._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return ca._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=mt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>vh._fromServerResponse(r,a));G(i.mfaPendingCredential,r,"internal-error");const o=ca._fromMfaPendingCredential(i.mfaPendingCredential);return new Uv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u={...i,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await Ar._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return G(n.user,r,"internal-error"),Ar._forOperation(n.user,n.operationType,u);default:Vn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function u8(t,e){var i;const n=X(t),r=e;return G(e.customData.operationType,n,"argument-error"),G((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),Uv._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:start",Ke(t,e))}function Hj(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(t,e))}function Gj(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:start",Ke(t,e))}function qj(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(t,e))}function Kj(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ke(t,e))}class zv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>vh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new zv(e)}async getSession(){return ca._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await ns(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ns(this.user,Kj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const gy=new WeakMap;function d8(t){const e=X(t);return gy.has(e)||gy.set(e,zv._fromUser(e)),gy.get(e)}const tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=1e3,Qj=10;class tk extends ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);BV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Qj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tk.type="LOCAL";const Jj=tk;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=1e3;function yy(t){var r;const e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return((r=document.cookie.match(n))==null?void 0:r[1])??null}function wy(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}class nk{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;const n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;const n=wy(e);if(window.cookieStore){const r=await window.cookieStore.get(n);return r==null?void 0:r.value}return yy(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;const r=wy(e);document.cookie=`${r}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;const r=wy(e);if(window.cookieStore){const a=u=>{const h=u.changed.find(p=>p.name===r);h&&n(h.value),u.deleted.find(p=>p.name===r)&&n(null)},l=()=>window.cookieStore.removeEventListener("change",a);return this.listenerUnsubscribes.set(n,l),window.cookieStore.addEventListener("change",a)}let i=yy(r);const s=setInterval(()=>{const a=yy(r);a!==i&&(n(a),i=a)},Xj),o=()=>clearInterval(s);this.listenerUnsubscribes.set(n,o)}_removeListener(e,n){const r=this.listenerUnsubscribes.get(n);r&&(r(),this.listenerUnsubscribes.delete(n))}}nk.type="COOKIE";const h8=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk extends ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rk.type="SESSION";const ik=rk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Zj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Gp("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return window}function t4(t){At().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){return typeof At().WorkerGlobalScope<"u"&&typeof At().importScripts=="function"}async function n4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function i4(){return Bv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="firebaseLocalStorageDb",s4=1,np="firebaseLocalStorage",ok="fbase_key";class _h{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qp(t,e){return t.transaction([np],e?"readwrite":"readonly").objectStore(np)}function o4(){const t=indexedDB.deleteDatabase(sk);return new _h(t).toPromise()}function Bw(){const t=indexedDB.open(sk,s4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(np,{keyPath:ok})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(np)?e(r):(r.close(),await o4(),e(await Bw()))})})}async function yx(t,e,n){const r=qp(t,!0).put({[ok]:e,value:n});return new _h(r).toPromise()}async function a4(t,e){const n=qp(t,!1).get(e),r=await new _h(n).toPromise();return r===void 0?null:r.value}function wx(t,e){const n=qp(t,!0).delete(e);return new _h(n).toPromise()}const l4=800,c4=3;class ak{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>c4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hp._getInstance(i4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await n4(),!this.activeServiceWorker)return;this.sender=new e4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bw();return await yx(e,tp,"1"),await wx(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>a4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=qp(i,!1).getAll();return new _h(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ak.type="LOCAL";const u4=ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){return Ye(t,"POST","/v2/accounts/mfaSignIn:start",Ke(t,e))}function d4(t,e){return Ye(t,"POST","/v2/accounts/mfaSignIn:finalize",Ke(t,e))}function h4(t,e){return Ye(t,"POST","/v2/accounts/mfaSignIn:finalize",Ke(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=BA("rcb"),f4=new ph(3e4,6e4);class m4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=At().grecaptcha)!=null&&e.render)}load(e,n=""){return G(p4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ox(At().grecaptcha)?Promise.resolve(At().grecaptcha):new Promise((r,i)=>{const s=At().setTimeout(()=>{i(bn(e,"network-request-failed"))},f4.get());At()[vy]=()=>{At().clearTimeout(s),delete At()[vy];const a=At().grecaptcha;if(!a||!ox(a)){i(bn(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const f=l(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${YV()}?${Dc({onload:vy,render:"explicit",hl:n})}`;Lv(o).catch(()=>{clearTimeout(s),i(bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=At().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function p4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class g4{async load(e){return new ej(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="recaptcha",y4={theme:"light",type:"image"};class f8{constructor(e,n,r={...y4}){this.parameters=r,this.type=cd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mt(e),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;G(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new g4:new m4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=At()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(Pv()&&!Bv(),this.auth,"internal-error"),await w4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await PV(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function w4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=fa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function m8(t,e,n){if(et(t.app))return Promise.reject(Bt(t));const r=mt(t),i=await Kp(r,e,X(n));return new $v(i,s=>Mv(r,s))}async function p8(t,e,n){const r=X(t);await $p(!1,r,"phone");const i=await Kp(r.auth,e,X(n));return new $v(i,s=>Pj(r,s))}async function g8(t,e,n){const r=X(t);if(et(r.auth.app))return Promise.reject(Bt(r.auth));const i=await Kp(r.auth,e,X(n));return new $v(i,s=>Nj(r,s))}async function Kp(t,e,n){var r;if(!t._getRecaptchaConfig())try{await WA(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){G(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ao(t,o,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===ld){G((n==null?void 0:n.type)===cd,h,"argument-error");const p=await _y(h,f,n);return gx(h,p)}return gx(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{G(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;G(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ao(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===ld){G((n==null?void 0:n.type)===cd,f,"argument-error");const y=await _y(f,p,n);return vx(f,y)}return vx(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ao(t,s,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===ld){G((n==null?void 0:n.type)===cd,u,"argument-error");const f=await _y(u,h,n);return mx(u,f)}return mx(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function y8(t,e){const n=X(t);if(et(n.auth.app))return Promise.reject(Bt(n.auth));await Ov(n,e)}async function _y(t,e,n){G(n.type===cd,t,"argument-error");const r=await n.verify();G(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.providerId=Jl.PROVIDER_ID,this.auth=mt(e)}verifyPhoneNumber(e,n){return Kp(this.auth,e,X(n))}static credential(e,n){return fa._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Jl.credentialFromTaggedObject(n)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?fa._fromTokenResponse(n,r):null}}Jl.PROVIDER_ID="phone";Jl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t,e){return e?Hi(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends yh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function v4(t){return JA(t.auth,new Wv(t),t.bypassAuthState)}function _4(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),QA(n,new Wv(t),t.bypassAuthState)}async function b4(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),Ov(n,new Wv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return b4;case"reauthViaPopup":case"reauthViaRedirect":return _4;default:Vn(this.auth,"internal-error")}}resolve(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new ph(2e3,1e4);async function w8(t,e,n){if(et(t.app))return Promise.reject(bn(t,"operation-not-supported-in-this-environment"));const r=mt(t);Lc(t,e,cs);const i=za(r,n);return new Gi(r,"signInViaPopup",e,i).executeNotNull()}async function v8(t,e,n){const r=X(t);if(et(r.auth.app))return Promise.reject(bn(r.auth,"operation-not-supported-in-this-environment"));Lc(r.auth,e,cs);const i=za(r.auth,n);return new Gi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function _8(t,e,n){const r=X(t);Lc(r.auth,e,cs);const i=za(r.auth,n);return new Gi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Gi extends lk{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){ts(this.filter.length===1,"Popup operations only handle one event");const e=Gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I4.get())};e()}}Gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="pendingRedirect",nm=new Map;class T4 extends lk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nm.get(this.auth._key());if(!e){try{const r=await E4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nm.set(this.auth._key(),e)}return this.bypassAuthState||nm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E4(t,e){const n=uk(e),r=ck(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Hv(t,e){return ck(t)._set(uk(e),"true")}function S4(t,e){nm.set(t._key(),e)}function ck(t){return Hi(t._redirectPersistence)}function uk(t){return em(x4,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e,n){return A4(t,e,n)}async function A4(t,e,n){if(et(t.app))return Promise.reject(Bt(t));const r=mt(t);Lc(t,e,cs),await r._initializationPromise;const i=za(r,n);return await Hv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function I8(t,e,n){return k4(t,e,n)}async function k4(t,e,n){const r=X(t);if(Lc(r.auth,e,cs),et(r.auth.app))return Promise.reject(Bt(r.auth));await r.auth._initializationPromise;const i=za(r.auth,n);await Hv(i,r.auth);const s=await hk(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function x8(t,e,n){return C4(t,e,n)}async function C4(t,e,n){const r=X(t);Lc(r.auth,e,cs),await r.auth._initializationPromise;const i=za(r.auth,n);await $p(!1,r,e.providerId),await Hv(i,r.auth);const s=await hk(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function T8(t,e){return await mt(t)._initializationPromise,dk(t,e,!1)}async function dk(t,e,n=!1){if(et(t.app))return Promise.reject(Bt(t));const r=mt(t),i=za(r,e),o=await new T4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function hk(t){const e=Gp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=10*60*1e3;class P4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fk(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=R4&&this.cachedEventUids.clear(),this.cachedEventUids.has(_x(e))}saveEventToCache(e){this.cachedEventUids.add(_x(e)),this.lastProcessedEventTime=Date.now()}}function _x(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(t,e={}){return Ye(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O4=/^https?/;async function M4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D4(t);for(const n of e)try{if(V4(n))return}catch{}Vn(t,"unauthorized-domain")}function V4(t){const e=Fd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!O4.test(n))return!1;if(L4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new ph(3e4,6e4);function bx(){const t=At().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function F4(t){return new Promise((e,n)=>{var i,s,o;function r(){bx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bx(),n(bn(t,"network-request-failed"))},timeout:j4.get()})}if((s=(i=At().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=At().gapi)!=null&&o.load)r();else{const a=BA("iframefcb");return At()[a]=()=>{gapi.load?r():n(bn(t,"network-request-failed"))},Lv(`${JV()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw rm=null,e})}let rm=null;function U4(t){return rm=rm||F4(t),rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=new ph(5e3,15e3),B4="__/auth/iframe",$4="emulator/auth/iframe",W4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G4(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Nv(e,$4):`https://${t.config.authDomain}/${B4}`,r={apiKey:e.apiKey,appName:t.name,v:Fa},i=H4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Dc(r).slice(1)}`}async function q4(t){const e=await U4(t),n=At().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:G4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),a=At().setTimeout(()=>{s(o)},z4.get());function l(){At().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y4=500,Q4=600,J4="_blank",X4="http://localhost";class Ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z4(t,e,n,r=Y4,i=Q4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...K4,width:r.toString(),height:i.toString(),top:s,left:o},u=Lt().toLowerCase();n&&(a=OA(u)?J4:n),DA(u)&&(e=e||X4,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,_])=>`${p}${y}=${_},`,"");if(zV(u)&&a!=="_self")return e5(e||"",a),new Ix(null);const f=window.open(e||"",a,h);G(f,t,"popup-blocked");try{f.focus()}catch{}return new Ix(f)}function e5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="__/auth/handler",n5="emulator/auth/handler",r5=encodeURIComponent("fac");async function xx(t,e,n,r,i,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fa,eventId:i};if(e instanceof cs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Oc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${r5}=${encodeURIComponent(l)}`:"";return`${i5(t)}?${Dc(a).slice(1)}${u}`}function i5({config:t}){return t.emulator?Nv(t,n5):`https://${t.authDomain}/${t5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="webStorageSupport";class s5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ik,this._completeRedirectFn=dk,this._overrideRedirectResult=S4}async _openPopup(e,n,r,i){var o;ts((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await xx(e,n,r,Fd(),i);return Z4(e,s,Gp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await xx(e,n,r,Fd(),i);return t4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ts(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await q4(e),r=new P4(e);return n.register("authEvent",i=>(G(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(by,{type:by},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[by];s!==void 0&&n(!!s),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UA()||LA()||Dv()}}const o5=s5;class mk{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return pi("unexpected MultiFactorSessionType")}}}class Gv extends mk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gv(e)}_finalizeEnroll(e,n,r){return Hj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return d4(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class a5{constructor(){}static assertion(e){return Gv._fromCredential(e)}}a5.FACTOR_ID="phone";class l5{static assertionForEnrollment(e,n){return $d._fromSecret(e,n)}static assertionForSignIn(e,n){return $d._fromEnrollmentId(e,n)}static async generateSecret(e){var i;const n=e;G(typeof((i=n.user)==null?void 0:i.auth)<"u","internal-error");const r=await Gj(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return qv._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}l5.FACTOR_ID="totp";class $d extends mk{constructor(e,n,r){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=r}static _fromSecret(e,n){return new $d(n,void 0,e)}static _fromEnrollmentId(e,n){return new $d(n,e)}async _finalizeEnroll(e,n,r){return G(typeof this.secret<"u",e,"argument-error"),qj(e,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){G(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");const r={verificationCode:this.otp};return h4(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}}class qv{constructor(e,n,r,i,s,o,a){this.sessionInfo=o,this.auth=a,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,n){return new qv(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){var i;let r=!1;return(Sf(e)||Sf(n))&&(r=!0),r&&(Sf(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Sf(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Sf(t){return typeof t>"u"||(t==null?void 0:t.length)===0}var Tx="@firebase/auth",Ex="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d5(t){Sr(new rr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zA(t)},u=new qV(r,i,s,l);return aj(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new rr("auth-internal",e=>{const n=mt(e.getProvider("auth").getImmediate());return(r=>new c5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(Tx,Ex,u5(t)),an(Tx,Ex,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=5*60,f5=US("authIdTokenMaxAge")||h5;let Sx=null;const m5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>f5)return;const i=n==null?void 0:n.token;Sx!==i&&(Sx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function p5(t=mh()){const e=Yr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oj(t,{popupRedirectResolver:o5,persistence:[u4,Jj,ik]}),r=US("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=m5(s.toString());$j(n,o,()=>o(n.currentUser)),Bj(n,a=>o(a))}}const i=VS("auth");return i&&lj(n,`http://${i}`),n}function g5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}KV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=bn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",g5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d5("Browser");var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,pk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function A(){}A.prototype=w.prototype,x.D=w.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(C,P,O){for(var k=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)k[Se-2]=arguments[Se];return w.prototype[P].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)C[P]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(P=0;16>P;++P)C[P]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=x.g[0],A=x.g[1],P=x.g[2];var O=x.g[3],k=w+(O^A&(P^O))+C[0]+3614090360&4294967295;w=A+(k<<7&4294967295|k>>>25),k=O+(P^w&(A^P))+C[1]+3905402710&4294967295,O=w+(k<<12&4294967295|k>>>20),k=P+(A^O&(w^A))+C[2]+606105819&4294967295,P=O+(k<<17&4294967295|k>>>15),k=A+(w^P&(O^w))+C[3]+3250441966&4294967295,A=P+(k<<22&4294967295|k>>>10),k=w+(O^A&(P^O))+C[4]+4118548399&4294967295,w=A+(k<<7&4294967295|k>>>25),k=O+(P^w&(A^P))+C[5]+1200080426&4294967295,O=w+(k<<12&4294967295|k>>>20),k=P+(A^O&(w^A))+C[6]+2821735955&4294967295,P=O+(k<<17&4294967295|k>>>15),k=A+(w^P&(O^w))+C[7]+4249261313&4294967295,A=P+(k<<22&4294967295|k>>>10),k=w+(O^A&(P^O))+C[8]+1770035416&4294967295,w=A+(k<<7&4294967295|k>>>25),k=O+(P^w&(A^P))+C[9]+2336552879&4294967295,O=w+(k<<12&4294967295|k>>>20),k=P+(A^O&(w^A))+C[10]+4294925233&4294967295,P=O+(k<<17&4294967295|k>>>15),k=A+(w^P&(O^w))+C[11]+2304563134&4294967295,A=P+(k<<22&4294967295|k>>>10),k=w+(O^A&(P^O))+C[12]+1804603682&4294967295,w=A+(k<<7&4294967295|k>>>25),k=O+(P^w&(A^P))+C[13]+4254626195&4294967295,O=w+(k<<12&4294967295|k>>>20),k=P+(A^O&(w^A))+C[14]+2792965006&4294967295,P=O+(k<<17&4294967295|k>>>15),k=A+(w^P&(O^w))+C[15]+1236535329&4294967295,A=P+(k<<22&4294967295|k>>>10),k=w+(P^O&(A^P))+C[1]+4129170786&4294967295,w=A+(k<<5&4294967295|k>>>27),k=O+(A^P&(w^A))+C[6]+3225465664&4294967295,O=w+(k<<9&4294967295|k>>>23),k=P+(w^A&(O^w))+C[11]+643717713&4294967295,P=O+(k<<14&4294967295|k>>>18),k=A+(O^w&(P^O))+C[0]+3921069994&4294967295,A=P+(k<<20&4294967295|k>>>12),k=w+(P^O&(A^P))+C[5]+3593408605&4294967295,w=A+(k<<5&4294967295|k>>>27),k=O+(A^P&(w^A))+C[10]+38016083&4294967295,O=w+(k<<9&4294967295|k>>>23),k=P+(w^A&(O^w))+C[15]+3634488961&4294967295,P=O+(k<<14&4294967295|k>>>18),k=A+(O^w&(P^O))+C[4]+3889429448&4294967295,A=P+(k<<20&4294967295|k>>>12),k=w+(P^O&(A^P))+C[9]+568446438&4294967295,w=A+(k<<5&4294967295|k>>>27),k=O+(A^P&(w^A))+C[14]+3275163606&4294967295,O=w+(k<<9&4294967295|k>>>23),k=P+(w^A&(O^w))+C[3]+4107603335&4294967295,P=O+(k<<14&4294967295|k>>>18),k=A+(O^w&(P^O))+C[8]+1163531501&4294967295,A=P+(k<<20&4294967295|k>>>12),k=w+(P^O&(A^P))+C[13]+2850285829&4294967295,w=A+(k<<5&4294967295|k>>>27),k=O+(A^P&(w^A))+C[2]+4243563512&4294967295,O=w+(k<<9&4294967295|k>>>23),k=P+(w^A&(O^w))+C[7]+1735328473&4294967295,P=O+(k<<14&4294967295|k>>>18),k=A+(O^w&(P^O))+C[12]+2368359562&4294967295,A=P+(k<<20&4294967295|k>>>12),k=w+(A^P^O)+C[5]+4294588738&4294967295,w=A+(k<<4&4294967295|k>>>28),k=O+(w^A^P)+C[8]+2272392833&4294967295,O=w+(k<<11&4294967295|k>>>21),k=P+(O^w^A)+C[11]+1839030562&4294967295,P=O+(k<<16&4294967295|k>>>16),k=A+(P^O^w)+C[14]+4259657740&4294967295,A=P+(k<<23&4294967295|k>>>9),k=w+(A^P^O)+C[1]+2763975236&4294967295,w=A+(k<<4&4294967295|k>>>28),k=O+(w^A^P)+C[4]+1272893353&4294967295,O=w+(k<<11&4294967295|k>>>21),k=P+(O^w^A)+C[7]+4139469664&4294967295,P=O+(k<<16&4294967295|k>>>16),k=A+(P^O^w)+C[10]+3200236656&4294967295,A=P+(k<<23&4294967295|k>>>9),k=w+(A^P^O)+C[13]+681279174&4294967295,w=A+(k<<4&4294967295|k>>>28),k=O+(w^A^P)+C[0]+3936430074&4294967295,O=w+(k<<11&4294967295|k>>>21),k=P+(O^w^A)+C[3]+3572445317&4294967295,P=O+(k<<16&4294967295|k>>>16),k=A+(P^O^w)+C[6]+76029189&4294967295,A=P+(k<<23&4294967295|k>>>9),k=w+(A^P^O)+C[9]+3654602809&4294967295,w=A+(k<<4&4294967295|k>>>28),k=O+(w^A^P)+C[12]+3873151461&4294967295,O=w+(k<<11&4294967295|k>>>21),k=P+(O^w^A)+C[15]+530742520&4294967295,P=O+(k<<16&4294967295|k>>>16),k=A+(P^O^w)+C[2]+3299628645&4294967295,A=P+(k<<23&4294967295|k>>>9),k=w+(P^(A|~O))+C[0]+4096336452&4294967295,w=A+(k<<6&4294967295|k>>>26),k=O+(A^(w|~P))+C[7]+1126891415&4294967295,O=w+(k<<10&4294967295|k>>>22),k=P+(w^(O|~A))+C[14]+2878612391&4294967295,P=O+(k<<15&4294967295|k>>>17),k=A+(O^(P|~w))+C[5]+4237533241&4294967295,A=P+(k<<21&4294967295|k>>>11),k=w+(P^(A|~O))+C[12]+1700485571&4294967295,w=A+(k<<6&4294967295|k>>>26),k=O+(A^(w|~P))+C[3]+2399980690&4294967295,O=w+(k<<10&4294967295|k>>>22),k=P+(w^(O|~A))+C[10]+4293915773&4294967295,P=O+(k<<15&4294967295|k>>>17),k=A+(O^(P|~w))+C[1]+2240044497&4294967295,A=P+(k<<21&4294967295|k>>>11),k=w+(P^(A|~O))+C[8]+1873313359&4294967295,w=A+(k<<6&4294967295|k>>>26),k=O+(A^(w|~P))+C[15]+4264355552&4294967295,O=w+(k<<10&4294967295|k>>>22),k=P+(w^(O|~A))+C[6]+2734768916&4294967295,P=O+(k<<15&4294967295|k>>>17),k=A+(O^(P|~w))+C[13]+1309151649&4294967295,A=P+(k<<21&4294967295|k>>>11),k=w+(P^(A|~O))+C[4]+4149444226&4294967295,w=A+(k<<6&4294967295|k>>>26),k=O+(A^(w|~P))+C[11]+3174756917&4294967295,O=w+(k<<10&4294967295|k>>>22),k=P+(w^(O|~A))+C[2]+718787259&4294967295,P=O+(k<<15&4294967295|k>>>17),k=A+(O^(P|~w))+C[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var A=w-this.blockSize,C=this.B,P=this.h,O=0;O<w;){if(P==0)for(;O<=A;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<w;)if(C[P++]=x.charCodeAt(O++),P==this.blockSize){i(this,C),P=0;break}}else for(;O<w;)if(C[P++]=x[O++],P==this.blockSize){i(this,C),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var A=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=A&255,A/=256;for(this.u(x),x=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)x[A++]=this.g[w]>>>C&255;return x};function s(x,w){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=w(x)}function o(x,w){this.h=w;for(var A=[],C=!0,P=x.length-1;0<=P;P--){var O=x[P]|0;C&&O==w||(A[P]=O,C=!1)}this.g=A}var a={};function l(x){return-128<=x&&128>x?s(x,function(w){return new o([w|0],0>w?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return R(u(-x));for(var w=[],A=1,C=0;x>=A;C++)w[C]=x/A|0,A*=4294967296;return new o(w,0)}function h(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return R(h(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(w,8)),C=f,P=0;P<x.length;P+=8){var O=Math.min(8,x.length-P),k=parseInt(x.substring(P,P+O),w);8>O?(O=u(Math.pow(w,O)),C=C.j(O).add(u(k))):(C=C.j(A),C=C.add(u(k)))}return C}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-R(this).m();for(var x=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);x+=(0<=C?C:4294967296+C)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(_(this))return"0";if(E(this))return"-"+R(this).toString(x);for(var w=u(Math.pow(x,6)),A=this,C="";;){var P=N(A,w).g;A=I(A,P.j(w));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=P,_(A))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function _(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function E(x){return x.h==-1}t.l=function(x){return x=I(this,x),E(x)?-1:_(x)?0:1};function R(x){for(var w=x.g.length,A=[],C=0;C<w;C++)A[C]=~x.g[C];return new o(A,~x.h).add(p)}t.abs=function(){return E(this)?R(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),A=[],C=0,P=0;P<=w;P++){var O=C+(this.i(P)&65535)+(x.i(P)&65535),k=(O>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);C=k>>>16,O&=65535,k&=65535,A[P]=k<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function I(x,w){return x.add(R(w))}t.j=function(x){if(_(this)||_(x))return f;if(E(this))return E(x)?R(this).j(R(x)):R(R(this).j(x));if(E(x))return R(this.j(R(x)));if(0>this.l(y)&&0>x.l(y))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<x.g.length;P++){var O=this.i(C)>>>16,k=this.i(C)&65535,Se=x.i(P)>>>16,rt=x.i(P)&65535;A[2*C+2*P]+=k*rt,b(A,2*C+2*P),A[2*C+2*P+1]+=O*rt,b(A,2*C+2*P+1),A[2*C+2*P+1]+=k*Se,b(A,2*C+2*P+1),A[2*C+2*P+2]+=O*Se,b(A,2*C+2*P+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new o(A,0)};function b(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function T(x,w){this.g=x,this.h=w}function N(x,w){if(_(w))throw Error("division by zero");if(_(x))return new T(f,f);if(E(x))return w=N(R(x),w),new T(R(w.g),R(w.h));if(E(w))return w=N(x,R(w)),new T(R(w.g),w.h);if(30<x.g.length){if(E(x)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var A=p,C=w;0>=C.l(x);)A=z(A),C=z(C);var P=B(A,1),O=B(C,1);for(C=B(C,2),A=B(A,2);!_(C);){var k=O.add(C);0>=k.l(x)&&(P=P.add(A),O=k),C=B(C,1),A=B(A,1)}return w=I(x,P.j(w)),new T(P,w)}for(P=f;0<=x.l(w);){for(A=Math.max(1,Math.floor(x.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=u(A),k=O.j(w);E(k)||0<k.l(x);)A-=C,O=u(A),k=O.j(w);_(O)&&(O=p),P=P.add(O),x=I(x,k)}return new T(P,x)}t.A=function(x){return N(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&x.i(C);return new o(A,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|x.i(C);return new o(A,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^x.i(C);return new o(A,this.h^x.h)};function z(x){for(var w=x.g.length+1,A=[],C=0;C<w;C++)A[C]=x.i(C)<<1|x.i(C-1)>>>31;return new o(A,x.h)}function B(x,w){var A=w>>5;w%=32;for(var C=x.g.length-A,P=[],O=0;O<C;O++)P[O]=0<w?x.i(O+A)>>>w|x.i(O+A+1)<<32-w:x.i(O+A);return new o(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,lo=o}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var Af=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gk,Hu,yk,im,$w,wk,vk,_k;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Af=="object"&&Af];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var D=c[v];if(!(D in g))break e;g=g[D]}c=c[c.length-1],v=g[c],m=m(v),m!=v&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,v=!1,D={next:function(){if(!v&&g<c.length){var j=g++;return{value:m(j,c[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),c.apply(m,D)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function _(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(v,D,j){for(var q=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)q[Re-2]=arguments[Re];return m.prototype[D].apply(v,q)}}function E(c){const m=c.length;if(0<m){const g=Array(m);for(let v=0;v<m;v++)g[v]=c[v];return g}return[]}function R(c,m){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(l(v)){const D=c.length||0,j=v.length||0;c.length=D+j;for(let q=0;q<j;q++)c[D+q]=v[q]}else c.push(v)}}class I{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function N(c){return N[" "](c),c}N[" "]=function(){};var z=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function B(c,m,g){for(const v in c)m.call(g,c[v],v,c)}function x(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function w(c){const m={};for(const g in c)m[g]=c[g];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,m){let g,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(g in v)c[g]=v[g];for(let j=0;j<A.length;j++)g=A[j],Object.prototype.hasOwnProperty.call(v,g)&&(c[g]=v[g])}}function P(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function O(c){a.setTimeout(()=>{throw c},0)}function k(){var c=re;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Se{constructor(){this.h=this.g=null}add(m,g){const v=rt.get();v.set(m,g),this.h?this.h.next=v:this.g=v,this.h=v}}var rt=new I(()=>new Cr,c=>c.reset());class Cr{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Q=!1,re=new Se,se=()=>{const c=a.Promise.resolve(void 0);le=()=>{c.then(Ee)}};var Ee=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(g){O(g)}var m=rt;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}Q=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $e(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}$e.prototype.h=function(){this.defaultPrevented=!0};var dn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function jn(c,m){if($e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(z){e:{try{N(m.nodeName);var D=!0;break e}catch{}D=!1}D||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:hn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&jn.aa.h.call(this)}}_(jn,$e);var hn={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var lt="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function lr(c,m,g,v,D){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!v,this.ha=D,this.key=++Fn,this.da=this.fa=!1}function Jt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Rr(c){this.src=c,this.g={},this.h=0}Rr.prototype.add=function(c,m,g,v,D){var j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);var q=Xr(c,m,v,D);return-1<q?(m=c[q],g||(m.fa=!1)):(m=new lr(m,this.src,j,!!v,D),m.fa=g,c.push(m)),m};function Jr(c,m){var g=m.type;if(g in c.g){var v=c.g[g],D=Array.prototype.indexOf.call(v,m,void 0),j;(j=0<=D)&&Array.prototype.splice.call(v,D,1),j&&(Jt(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Xr(c,m,g,v){for(var D=0;D<c.length;++D){var j=c[D];if(!j.da&&j.listener==m&&j.capture==!!g&&j.ha==v)return D}return-1}var Zr="closure_lm_"+(1e6*Math.random()|0),Si={};function gt(c,m,g,v,D){if(v&&v.once)return ie(c,m,g,v,D);if(Array.isArray(m)){for(var j=0;j<m.length;j++)gt(c,m[j],g,v,D);return null}return g=Ro(g),c&&c[lt]?c.K(m,g,u(v)?!!v.capture:!!v,D):cr(c,m,g,!1,v,D)}function cr(c,m,g,v,D,j){if(!m)throw Error("Invalid event type");var q=u(D)?!!D.capture:!!D,Re=ei(c);if(Re||(c[Zr]=Re=new Rr(c)),g=Re.add(m,g,v,q,j),g.proxy)return g;if(v=Ai(),g.proxy=v,v.src=c,v.listener=g,c.addEventListener)dn||(D=q),D===void 0&&(D=!1),c.addEventListener(m.toString(),v,D);else if(c.attachEvent)c.attachEvent(Ya(m.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ai(){function c(g){return m.call(c.src,c.listener,g)}const m=Qa;return c}function ie(c,m,g,v,D){if(Array.isArray(m)){for(var j=0;j<m.length;j++)ie(c,m[j],g,v,D);return null}return g=Ro(g),c&&c[lt]?c.L(m,g,u(v)?!!v.capture:!!v,D):cr(c,m,g,!0,v,D)}function Ka(c,m,g,v,D){if(Array.isArray(m))for(var j=0;j<m.length;j++)Ka(c,m[j],g,v,D);else v=u(v)?!!v.capture:!!v,g=Ro(g),c&&c[lt]?(c=c.i,m=String(m).toString(),m in c.g&&(j=c.g[m],g=Xr(j,g,v,D),-1<g&&(Jt(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete c.g[m],c.h--)))):c&&(c=ei(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Xr(m,g,v,D)),(g=-1<c?m[c]:null)&&Un(g))}function Un(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[lt])Jr(m.i,c);else{var g=c.type,v=c.proxy;m.removeEventListener?m.removeEventListener(g,v,c.capture):m.detachEvent?m.detachEvent(Ya(g),v):m.addListener&&m.removeListener&&m.removeListener(v),(g=ei(m))?(Jr(g,c),g.h==0&&(g.src=null,m[Zr]=null)):Jt(c)}}}function Ya(c){return c in Si?Si[c]:Si[c]="on"+c}function Qa(c,m){if(c.da)c=!0;else{m=new jn(m,this);var g=c.listener,v=c.ha||c.src;c.fa&&Un(c),c=g.call(v,m)}return c}function ei(c){return c=c[Zr],c instanceof Rr?c:null}var Kc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ro(c){return typeof c=="function"?c:(c[Kc]||(c[Kc]=function(m){return c.handleEvent(m)}),c[Kc])}function xt(){ve.call(this),this.i=new Rr(this),this.M=this,this.F=null}_(xt,ve),xt.prototype[lt]=!0,xt.prototype.removeEventListener=function(c,m,g,v){Ka(this,c,m,g,v)};function yt(c,m){var g,v=c.F;if(v)for(g=[];v;v=v.F)g.push(v);if(c=c.M,v=m.type||m,typeof m=="string")m=new $e(m,c);else if(m instanceof $e)m.target=m.target||c;else{var D=m;m=new $e(v,c),C(m,D)}if(D=!0,g)for(var j=g.length-1;0<=j;j--){var q=m.g=g[j];D=ms(q,v,!0,m)&&D}if(q=m.g=c,D=ms(q,v,!0,m)&&D,D=ms(q,v,!1,m)&&D,g)for(j=0;j<g.length;j++)q=m.g=g[j],D=ms(q,v,!1,m)&&D}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],v=0;v<g.length;v++)Jt(g[v]);delete c.g[m],c.h--}}this.F=null},xt.prototype.K=function(c,m,g,v){return this.i.add(String(c),m,!1,g,v)},xt.prototype.L=function(c,m,g,v){return this.i.add(String(c),m,!0,g,v)};function ms(c,m,g,v){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var D=!0,j=0;j<m.length;++j){var q=m[j];if(q&&!q.da&&q.capture==g){var Re=q.listener,Pt=q.ha||q.src;q.fa&&Jr(c.i,q),D=Re.call(Pt,v)!==!1&&D}}return D&&!v.defaultPrevented}function ps(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Ja(c){c.g=ps(()=>{c.g=null,c.i&&(c.i=!1,Ja(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Xa extends ve{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ja(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(c){ve.call(this),this.h=c,this.g={}}_(gs,ve);var Yc=[];function Tt(c){B(c.g,function(m,g){this.g.hasOwnProperty(g)&&Un(m)},c),c.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Tt(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qc=a.JSON.stringify,fn=a.JSON.parse,Rt=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Uh(){}Uh.prototype.h=null;function Po(c){return c.h||(c.h=c.i())}function Za(){}var No={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ys(){$e.call(this,"d")}_(ys,$e);function ws(){$e.call(this,"c")}_(ws,$e);var ct={},Do=null;function Lo(){return Do=Do||new xt}ct.La="serverreachability";function vs(c){$e.call(this,ct.La,c)}_(vs,$e);function ur(c){const m=Lo();yt(m,new vs(m))}ct.STAT_EVENT="statevent";function ti(c,m){$e.call(this,ct.STAT_EVENT,c),this.stat=m}_(ti,$e);function wt(c){const m=Lo();yt(m,new ti(m,c))}ct.Ma="timingevent";function Jc(c,m){$e.call(this,ct.Ma,c),this.size=m}_(Jc,$e);function Oo(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function Pr(){this.g=!0}Pr.prototype.xa=function(){this.g=!1};function xg(c,m,g,v,D,j){c.info(function(){if(c.g)if(j)for(var q="",Re=j.split("&"),Pt=0;Pt<Re.length;Pt++){var _e=Re[Pt].split("=");if(1<_e.length){var vt=_e[0];_e=_e[1];var Mt=vt.split("_");q=2<=Mt.length&&Mt[1]=="type"?q+(vt+"="+_e+"&"):q+(vt+"=redacted&")}}else q=null;else q=j;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+m+`
`+g+`
`+q})}function Xc(c,m,g,v,D,j,q){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+m+`
`+g+`
`+j+" "+q})}function Xt(c,m,g,v){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+ni(c,g)+(v?" "+v:"")})}function ki(c,m){c.info(function(){return"TIMEOUT: "+m})}Pr.prototype.info=function(){};function ni(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var v=g[c];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var q=1;q<D.length;q++)D[q]=""}}}}return Qc(g)}catch{return m}}var Mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},el;function Qe(){}_(Qe,Uh),Qe.prototype.g=function(){return new XMLHttpRequest},Qe.prototype.i=function(){return{}},el=new Qe;function ri(c,m,g,v){this.j=c,this.i=m,this.l=g,this.R=v||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var zh={},En={};function tl(c,m,g){c.L=1,c.v=Dr(Nr(m)),c.m=g,c.P=!0,Bh(c,null)}function Bh(c,m){c.F=Date.now(),Vo(c),c.A=Nr(c.v);var g=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),zo(g.i,"t",v),c.C=0,g=c.j.J,c.h=new ut,c.g=vu(c.j,g?m:null,!c.m),0<c.O&&(c.M=new Xa(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,v=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Yc[0]=D.toString()),D=Yc);for(var j=0;j<D.length;j++){var q=gt(g,D[j],v||m.handleEvent,!1,m.h||m);if(!q)break;m.g[q.key]=q}m=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ur(),xg(c.i,c.u,c.A,c.l,c.R,c.m)}ri.prototype.ca=function(c){c=c.target;const m=this.M;m&&fr(c)==3?m.j():this.Y(c)},ri.prototype.Y=function(c){try{if(c==this.g)e:{const Mt=fr(this.g);var m=this.g.Ba();const Ss=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||Mt!=4||m==7||(m==8||0>=Ss?ur(3):ur(2)),Wh(this);var g=this.g.Z();this.X=g;t:if(ii(this)){var v=mu(this.g);c="";var D=v.length,j=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),_s(this);var q="";break t}this.h.i=new a.TextDecoder}for(m=0;m<D;m++)this.h.h=!0,c+=this.h.i.decode(v[m],{stream:!(j&&m==D-1)});v.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,Xc(this.i,this.u,this.A,this.l,this.R,Mt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,Pt=this.g;if((Re=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Re)){var _e=Re;break t}}_e=null}if(g=_e)Xt(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tu(this,g);else{this.o=!1,this.s=3,wt(12),si(this),_s(this);break e}}if(this.P){g=!0;let Sn;for(;!this.J&&this.C<q.length;)if(Sn=$h(this,q),Sn==En){Mt==4&&(this.s=4,wt(14),g=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==zh){this.s=4,wt(15),Xt(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else Xt(this.i,this.l,Sn,null),tu(this,Sn);if(ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||q.length!=0||this.h.h||(this.s=1,wt(16),g=!1),this.o=this.o&&g,!g)Xt(this.i,this.l,q,"[Invalid Chunked Response]"),si(this),_s(this);else if(0<q.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),ul(vt),vt.M=!0,wt(11))}}else Xt(this.i,this.l,q,null),tu(this,q);Mt==4&&si(this),this.o&&!this.J&&(Mt==4?dl(this.j,this):(this.o=!1,Vo(this)))}else li(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),si(this),_s(this)}}}catch{}finally{}};function ii(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $h(c,m){var g=c.C,v=m.indexOf(`
`,g);return v==-1?En:(g=Number(m.substring(g,v)),isNaN(g)?zh:(v+=1,v+g>m.length?En:(m=m.slice(v,v+g),c.C=v+g,m)))}ri.prototype.cancel=function(){this.J=!0,si(this)};function Vo(c){c.S=Date.now()+c.I,eu(c,c.I)}function eu(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Oo(p(c.ba,c),m)}function Wh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ri.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ki(this.i,this.A),this.L!=2&&(ur(),wt(17)),si(this),this.s=2,_s(this)):eu(this,this.S-c)};function _s(c){c.j.G==0||c.J||dl(c.j,c)}function si(c){Wh(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Tt(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function tu(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||nu(g.h,c))){if(!c.K&&nu(g.h,c)&&g.G==3){try{var v=g.Da.g.parse(m)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Ho(g),al(g);else break e;cl(g),wt(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=Oo(p(g.Za,g),6e3));if(1>=jo(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else mr(g,11)}else if((c.K||g.g==c)&&Ho(g),!b(m))for(D=g.Da.g.parse(m),m=0;m<D.length;m++){let _e=D[m];if(g.T=_e[0],_e=_e[1],g.G==2)if(_e[0]=="c"){g.K=_e[1],g.ia=_e[2];const vt=_e[3];vt!=null&&(g.la=vt,g.j.info("VER="+g.la));const Mt=_e[4];Mt!=null&&(g.Aa=Mt,g.j.info("SVER="+g.Aa));const Ss=_e[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(v=1.5*Ss,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Sn=c.g;if(Sn){const Oi=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var j=v.h;j.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(nl(j,j.h),j.h=null))}if(v.D){const bu=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;bu&&(v.ya=bu,he(v.I,v.D,bu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var q=c;if(v.qa=wu(v,v.J?v.ia:null,v.W),q.K){ru(v.h,q);var Re=q,Pt=v.L;Pt&&(Re.I=Pt),Re.B&&(Wh(Re),Vo(Re)),v.g=q}else pu(v);0<g.i.length&&Di(g)}else _e[0]!="stop"&&_e[0]!="close"||mr(g,7);else g.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?mr(g,7):Wo(g):_e[0]!="noop"&&g.l&&g.l.ta(_e),g.v=0)}}ur(4)}catch{}}var Hh=class{constructor(c,m){this.g=c,this.map=m}};function Gh(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qh(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function jo(c){return c.h?1:c.g?c.g.size:0}function nu(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function nl(c,m){c.g?c.g.add(m):c.h=m}function ru(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}Gh.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function iu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return E(c.i)}function Tg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,v=0;v<g;v++)m.push(c[v]);return m}m=[],g=0;for(v in c)m[g++]=c[v];return m}function su(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const v in c)m[g++]=v;return m}}}function ou(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=su(c),v=Tg(c),D=v.length,j=0;j<D;j++)m.call(void 0,v[j],g&&g[j],c)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eg(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var v=c[g].indexOf("="),D=null;if(0<=v){var j=c[g].substring(0,v);D=c[g].substring(v+1)}else j=c[g];m(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,Fo(this,c.j),this.o=c.o,this.g=c.g,rl(this,c.s),this.l=c.l;var m=c.i,g=new ai;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),Kh(this,g),this.m=c.m}else c&&(m=String(c).match(Ci))?(this.h=!1,Fo(this,m[1]||"",!0),this.o=dr(m[2]||""),this.g=dr(m[3]||"",!0),rl(this,m[4]),this.l=dr(m[5]||"",!0),Kh(this,m[6]||"",!0),this.m=dr(m[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}oi.prototype.toString=function(){var c=[],m=this.j;m&&c.push(mn(m,Uo,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(mn(m,Uo,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(mn(g,g.charAt(0)=="/"?au:Qh,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",mn(g,lu)),c.join("")};function Nr(c){return new oi(c)}function Fo(c,m,g){c.j=g?dr(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function rl(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Kh(c,m,g){m instanceof ai?(c.i=m,Jh(c.i,c.h)):(g||(m=mn(m,Sg)),c.i=new ai(m,c.h))}function he(c,m,g){c.i.set(m,g)}function Dr(c){return he(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function dr(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mn(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,Yh),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Yh(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uo=/[#\/\?@]/g,Qh=/[#\?:]/g,au=/[#\?]/g,Sg=/[#\?@]/g,lu=/#/g;function ai(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Lr(c){c.g||(c.g=new Map,c.h=0,c.i&&Eg(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=ai.prototype,t.add=function(c,m){Lr(this),this.i=null,c=Pi(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function Ri(c,m){Lr(c),m=Pi(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function cu(c,m){return Lr(c),m=Pi(c,m),c.g.has(m)}t.forEach=function(c,m){Lr(this),this.g.forEach(function(g,v){g.forEach(function(D){c.call(m,D,v,this)},this)},this)},t.na=function(){Lr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let v=0;v<m.length;v++){const D=c[v];for(let j=0;j<D.length;j++)g.push(m[v])}return g},t.V=function(c){Lr(this);let m=[];if(typeof c=="string")cu(this,c)&&(m=m.concat(this.g.get(Pi(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return Lr(this),this.i=null,c=Pi(this,c),cu(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function zo(c,m,g){Ri(c,m),0<g.length&&(c.i=null,c.g.set(Pi(c,m),E(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var v=m[g];const j=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var D=j;q[v]!==""&&(D+="="+encodeURIComponent(String(q[v]))),c.push(D)}}return this.i=c.join("&")};function Pi(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Jh(c,m){m&&!c.j&&(Lr(c),c.i=null,c.g.forEach(function(g,v){var D=v.toLowerCase();v!=D&&(Ri(this,v),zo(this,D,g))},c)),c.j=m}function Xh(c,m){const g=new Pr;if(a.Image){const v=new Image;v.onload=y(hr,g,"TestLoadImage: loaded",!0,m,v),v.onerror=y(hr,g,"TestLoadImage: error",!1,m,v),v.onabort=y(hr,g,"TestLoadImage: abort",!1,m,v),v.ontimeout=y(hr,g,"TestLoadImage: timeout",!1,m,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else m(!1)}function Ag(c,m){const g=new Pr,v=new AbortController,D=setTimeout(()=>{v.abort(),hr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:v.signal}).then(j=>{clearTimeout(D),j.ok?hr(g,"TestPingServer: ok",!0,m):hr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(D),hr(g,"TestPingServer: error",!1,m)})}function hr(c,m,g,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(g)}catch{}}function Zh(){this.g=new Rt}function bs(c,m,g){const v=g||"";try{ou(c,function(D,j){let q=D;u(D)&&(q=Qc(D)),m.push(v+j+"="+encodeURIComponent(q))})}catch(D){throw m.push(v+"type="+encodeURIComponent("_badmap")),D}}function Ce(c){this.l=c.Ub||null,this.j=c.eb||!1}_(Ce,Uh),Ce.prototype.g=function(){return new Ni(this.l,this.j)},Ce.prototype.i=function(c){return function(){return c}}({});function Ni(c,m){xt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ni,xt),t=Ni.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Is(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;je(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function je(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?zn(this):Is(this),this.readyState==3&&je(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,zn(this))},t.Qa=function(c){this.g&&(this.response=c,zn(this))},t.ga=function(){this.g&&zn(this)};function zn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Is(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function Is(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bo(c){let m="";return B(c,function(g,v){m+=v,m+=":",m+=g,m+=`\r
`}),m}function uu(c,m,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Bo(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):he(c,m,g))}function Ue(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ue,xt);var du=/^https?$/i,hu=["POST","PUT"];t=Ue.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():el.g(),this.v=this.o?Po(this.o):Po(el),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(j){il(this,j);return}if(c=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)g.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())g.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hu,m,void 0))||v||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,q]of g)this.g.setRequestHeader(j,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fu(this),this.u=!0,this.g.send(c),this.u=!1}catch(j){il(this,j)}};function il(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,ef(c),$o(c)}function ef(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sl(this):this.bb())},t.bb=function(){sl(this)};function sl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||fr(c)!=4||c.Z()!=2)){if(c.u&&fr(c)==4)ps(c.Ea,0,c);else if(yt(c,"readystatechange"),fr(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var v;if(v=q===0){var D=String(c.D).match(Ci)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),v=!du.test(D?D.toLowerCase():"")}g=v}if(g)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var j=2<fr(c)?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.Z()+"]",ef(c)}}finally{$o(c)}}}}function $o(c,m){if(c.g){fu(c);const g=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||yt(c,"ready");try{g.onreadystatechange=v}catch{}}}function fu(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function fr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),fn(m)}};function mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function li(c){const m={};c=(c.g&&2<=fr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(b(c[v]))continue;var g=P(c[v]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=m[D]||[];m[D]=j,j.push(g)}x(m,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xs(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function ol(c){this.Aa=0,this.i=[],this.j=new Pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xs("baseRetryDelayMs",5e3,c),this.cb=xs("retryDelaySeedMs",1e4,c),this.Wa=xs("forwardChannelMaxRetries",2,c),this.wa=xs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Gh(c&&c.concurrentRequestLimit),this.Da=new Zh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ol.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,v){wt(0),this.W=c,this.H=m||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=wu(this,null,this.W),Di(this)};function Wo(c){if(tf(c),c.G==3){var m=c.U++,g=Nr(c.I);if(he(g,"SID",c.K),he(g,"RID",m),he(g,"TYPE","terminate"),ll(c,g),m=new ri(c,c.j,m),m.L=2,m.v=Dr(Nr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=vu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Vo(m)}yu(c)}function al(c){c.g&&(ul(c),c.g.cancel(),c.g=null)}function tf(c){al(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ho(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Di(c){if(!qh(c.h)&&!c.s){c.s=!0;var m=c.Ga;le||se(),Q||(le(),Q=!0),re.add(m,c),c.B=0}}function kg(c,m){return jo(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Oo(p(c.Ga,c,m),sf(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new ri(this,this.j,c);let j=this.o;if(this.S&&(j?(j=w(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(m+=v,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=rf(this,D,m),g=Nr(this.I),he(g,"RID",c),he(g,"CVER",22),this.D&&he(g,"X-HTTP-Session-Id",this.D),ll(this,g),j&&(this.O?m="headers="+encodeURIComponent(String(Bo(j)))+"&"+m:this.m&&uu(g,this.m,j)),nl(this.h,D),this.Ua&&he(g,"TYPE","init"),this.P?(he(g,"$req",m),he(g,"SID","null"),D.T=!0,tl(D,g,null)):tl(D,g,m),this.G=2}}else this.G==3&&(c?nf(this,c):this.i.length==0||qh(this.h)||nf(this))};function nf(c,m){var g;m?g=m.l:g=c.U++;const v=Nr(c.I);he(v,"SID",c.K),he(v,"RID",g),he(v,"AID",c.T),ll(c,v),c.m&&c.o&&uu(v,c.m,c.o),g=new ri(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=rf(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),nl(c.h,g),tl(g,v,m)}function ll(c,m){c.H&&B(c.H,function(g,v){he(m,v,g)}),c.l&&ou({},function(g,v){he(m,v,g)})}function rf(c,m,g){g=Math.min(c.i.length,g);var v=c.l?p(c.l.Na,c.l,c):null;e:{var D=c.i;let j=-1;for(;;){const q=["count="+g];j==-1?0<g?(j=D[0].g,q.push("ofs="+j)):j=0:q.push("ofs="+j);let Re=!0;for(let Pt=0;Pt<g;Pt++){let _e=D[Pt].g;const vt=D[Pt].map;if(_e-=j,0>_e)j=Math.max(0,D[Pt].g-100),Re=!1;else try{bs(vt,q,"req"+_e+"_")}catch{v&&v(vt)}}if(Re){v=q.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,v}function pu(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;le||se(),Q||(le(),Q=!0),re.add(m,c),c.v=0}}function cl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Oo(p(c.Fa,c),sf(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Oo(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),al(this),gu(this))};function ul(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function gu(c){c.g=new ri(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Nr(c.qa);he(m,"RID","rpc"),he(m,"SID",c.K),he(m,"AID",c.T),he(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&he(m,"TO",c.ja),he(m,"TYPE","xmlhttp"),ll(c,m),c.m&&c.o&&uu(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Dr(Nr(m)),g.m=null,g.P=!0,Bh(g,c)}t.Za=function(){this.C!=null&&(this.C=null,al(this),cl(this),wt(19))};function Ho(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function dl(c,m){var g=null;if(c.g==m){Ho(c),ul(c),c.g=null;var v=2}else if(nu(c.h,m))g=m.D,ru(c.h,m),v=1;else return;if(c.G!=0){if(m.o)if(v==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var D=c.B;v=Lo(),yt(v,new Jc(v,g)),Di(c)}else pu(c);else if(D=m.s,D==3||D==0&&0<m.X||!(v==1&&kg(c,m)||v==2&&cl(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),D){case 1:mr(c,5);break;case 4:mr(c,10);break;case 3:mr(c,6);break;default:mr(c,2)}}}function sf(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function mr(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),v=c.Xa;const D=!v;v=new oi(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fo(v,"https"),Dr(v),D?Xh(v.toString(),g):Ag(v.toString(),g)}else wt(2);c.G=0,c.l&&c.l.sa(m),yu(c),tf(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function yu(c){if(c.G=0,c.ka=[],c.l){const m=iu(c.h);(m.length!=0||c.i.length!=0)&&(R(c.ka,m),R(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function wu(c,m,g){var v=g instanceof oi?Nr(g):new oi(g);if(v.g!="")m&&(v.g=m+"."+v.g),rl(v,v.s);else{var D=a.location;v=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;var j=new oi(null);v&&Fo(j,v),m&&(j.g=m),D&&rl(j,D),g&&(j.l=g),v=j}return g=c.D,m=c.ya,g&&m&&he(v,g,m),he(v,"VER",c.la),ll(c,v),v}function vu(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ue(new Ce({eb:g})):new Ue(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function of(){}t=of.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ts(){}Ts.prototype.g=function(c,m){return new pn(c,m)};function pn(c,m){xt.call(this),this.g=new ol(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!b(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!b(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Li(this)}_(pn,xt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Wo(this.g)},pn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Qc(c),c=g);m.i.push(new Hh(m.Ya++,c)),m.G==3&&Di(m)},pn.prototype.N=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,pn.aa.N.call(this)};function Es(c){ys.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}_(Es,ys);function _u(){ws.call(this),this.status=1}_(_u,ws);function Li(c){this.g=c}_(Li,of),Li.prototype.ua=function(){yt(this.g,"a")},Li.prototype.ta=function(c){yt(this.g,new Es(c))},Li.prototype.sa=function(c){yt(this.g,new _u)},Li.prototype.ra=function(){yt(this.g,"b")},Ts.prototype.createWebChannel=Ts.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,_k=function(){return new Ts},vk=function(){return Lo()},wk=ct,$w={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,im=Mo,Zc.COMPLETE="complete",yk=Zc,Za.EventType=No,No.OPEN="a",No.CLOSE="b",No.ERROR="c",No.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Hu=Za,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,gk=Ue}).apply(typeof Af<"u"?Af:typeof self<"u"?self:typeof window<"u"?window:{});const kx="@firebase/firestore",Cx="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new fh("@firebase/firestore");function El(){return fo.logLevel}function E8(t){fo.setLogLevel(t)}function W(t,...e){if(fo.logLevel<=ye.DEBUG){const n=e.map(Kv);fo.debug(`Firestore (${Mc}): ${t}`,...n)}}function bt(t,...e){if(fo.logLevel<=ye.ERROR){const n=e.map(Kv);fo.error(`Firestore (${Mc}): ${t}`,...n)}}function kr(t,...e){if(fo.logLevel<=ye.WARN){const n=e.map(Kv);fo.warn(`Firestore (${Mc}): ${t}`,...n)}}function Kv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bk(t,r,n)}function bk(t,e,n){let r=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw bt(r),new Error(r)}function ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bk(e,i,r)}function S8(t,e){t||J(57014,e)}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class w5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v5{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $t,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $t)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new Ik(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class _5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class b5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ww{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ww(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ww(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class A8{getToken(){return Promise.resolve(new Ww(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=x5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Hw(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Iy(i)===Iy(s)?ae(i,s):Iy(i)?1:-1}return ae(t.length,e.length)}const T5=55296,E5=57343;function Iy(t){const e=t.charCodeAt(0);return e>=T5&&e<=E5}function cc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function xk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="__name__";class hi{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=hi.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=hi.isNumericId(e),i=hi.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hi.extractNumericId(e).compare(hi.extractNumericId(n)):Hw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lo.fromString(e.substring(4,e.length-2))}}class ue extends hi{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const S5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends hi{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return S5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gw}static keyField(){return new tt([Gw])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ue.fromString(e))}static fromName(e){return new K(ue.fromString(e).popFirst(5))}static empty(){return new K(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A5(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rx(t){if(!K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Px(t){if(K.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Yp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yp(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ek(t,e){if(e<=0)throw new $(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ba(t,e){if(!Tk(t))throw new $(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new $(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=-62135596800,Dx=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Dx);return new De(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nx)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dx}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ba(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Ct("string",De._jsonSchemaVersion),seconds:Ct("number"),nanoseconds:Ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new De(0,0))}static max(){return new ne(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=-1;class dc{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function qw(t){return t.fields.find(e=>e.kind===2)}function Jo(t){return t.fields.filter(e=>e.kind!==2)}function k5(t,e){let n=ae(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=C5(t.fields[r],e.fields[r]),n!==0)return n;return ae(t.fields.length,e.fields.length)}dc.UNKNOWN_ID=-1;class ma{constructor(e,n){this.fieldPath=e,this.kind=n}}function C5(t,e){const n=tt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:ae(t.kind,e.kind)}class hc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new hc(0,ir.min())}}function Sk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new ir(i,K.empty(),e)}function Ak(t){return new ir(t.readTime,t.key,uc)}class ir{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ir(ne.min(),K.empty(),uc)}static max(){return new ir(ne.max(),K.empty(),uc)}}function Jv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ck{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==kk)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="SimpleDb";class Qp{static open(e,n,r,i){try{return new Qp(n,e.transaction(i,r))}catch(s){throw new ud(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new $t,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ud(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Xv(r.target.error);this.S.reject(new ud(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(W(qn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new P5(n)}}class bi{static delete(e){return W(qn,"Removing database:",e),ta(MS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!bv())return!1;if(bi.F())return!0;const e=Lt(),n=bi.M(e),r=0<n&&n<10,i=Rk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,bi.M(Lt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(W(qn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new $(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ud(e,o))},i.onupgradeneeded=s=>{W(qn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{W(qn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Qp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(W(qn,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Rk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class R5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ta(this.U.delete())}}class ud extends ${constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Eo(t){return t.name==="IndexedDbTransactionError"}class P5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(W(qn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(W(qn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ta(r)}add(e){return W(qn,"ADD",this.store.name,e,e),ta(this.store.add(e))}get(e){return ta(this.store.get(e)).next(n=>(n===void 0&&(n=null),W(qn,"GET",this.store.name,e,n),n))}delete(e){return W(qn,"DELETE",this.store.name,e),ta(this.store.delete(e))}count(){return W(qn,"COUNT",this.store.name),ta(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){W(qn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=Xv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new R5(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const h=u.catch(f=>(l.done(),L.reject(f)));r.push(h)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ta(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Xv(r.target.error);n(i)}})}let Lx=!1;function Xv(t){const e=bi.M(Lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lx||(Lx=!0,setTimeout(()=>{throw r},0)),r}}return t}const dd="IndexBackfiller";class N5{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){W(dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();W(dd,`Documents written: ${n}`)}catch(n){Eo(n)?W(dd,"Ignoring IndexedDB error during index backfill: ",n):await To(n)}await this.re(6e4)})}}class D5{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return W(dd,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(W(dd,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Ak(s);Jv(o,r)>0&&(r=o)}),new ir(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=-1;function bh(t){return t==null}function Wd(t){return t===0&&1/t==-1/0}function Pk(t){return typeof t=="number"&&Number.isInteger(t)&&!Wd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="";function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ox(e)),e=L5(t.get(n),e);return Ox(e)}function L5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case rp:n+="";break;default:n+=s}}return n}function Ox(t){return t+rp+""}function gi(t){const e=t.length;if(ee(e>=2,64408,{path:t}),e===2)return ee(t.charAt(0)===rp&&t.charAt(1)==="",56145,{path:t}),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(rp,s);switch((o<0||o>n)&&J(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:J(61167,{path:t})}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="remoteDocuments",Ih="owner",gl="owner",Hd="mutationQueues",O5="userId",Br="mutations",Mx="batchId",ua="userMutationsIndex",Vx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){return[t,ln(e)]}function Nk(t,e,n){return[t,ln(e),n]}const M5={},fc="documentMutations",ip="remoteDocumentsV14",V5=["prefixPath","collectionGroup","readTime","documentId"],om="documentKeyIndex",j5=["prefixPath","collectionGroup","documentId"],Dk="collectionGroupIndex",F5=["collectionGroup","readTime","prefixPath","documentId"],Gd="remoteDocumentGlobal",Kw="remoteDocumentGlobalKey",mc="targets",Lk="queryTargetsIndex",U5=["canonicalId","targetId"],pc="targetDocuments",z5=["targetId","path"],Zv="documentTargetsIndex",B5=["path","targetId"],sp="targetGlobalKey",pa="targetGlobal",qd="collectionParents",$5=["collectionId","parent"],gc="clientMetadata",W5="clientId",Jp="bundles",H5="bundleId",Xp="namedQueries",G5="name",e_="indexConfiguration",q5="indexId",Yw="collectionGroupIndex",K5="collectionGroup",hd="indexState",Y5=["indexId","uid"],Ok="sequenceNumberIndex",Q5=["uid","sequenceNumber"],fd="indexEntries",J5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mk="documentKeyIndex",X5=["indexId","uid","orderedDocumentKey"],Zp="documentOverlays",Z5=["userId","collectionPath","documentId"],Qw="collectionPathOverlayIndex",eF=["userId","collectionPath","largestBatchId"],Vk="collectionGroupOverlayIndex",tF=["userId","collectionGroup","largestBatchId"],t_="globals",nF="name",jk=[Hd,Br,fc,Xo,mc,Ih,pa,pc,gc,Gd,qd,Jp,Xp],rF=[...jk,Zp],Fk=[Hd,Br,fc,ip,mc,Ih,pa,pc,gc,Gd,qd,Jp,Xp,Zp],Uk=Fk,n_=[...Uk,e_,hd,fd],iF=n_,zk=[...n_,t_],sF=zk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Ck{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Ot(t,e){const n=Y(t);return bi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bk(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function $k(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??qt.RED,this.left=i??qt.EMPTY,this.right=s??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new qt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fx(this.data.getIterator())}getIteratorFrom(e){return new Fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class Fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Me(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wk("Invalid base64 string: "+s):s}}(e);return new ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const oF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(ee(!!t,39018),typeof t=="string"){let e=0;const n=oF.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="server_timestamp",Gk="__type__",qk="__previous_value__",Kk="__local_write_time__";function eg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Gk])==null?void 0:r.stringValue)===Hk}function tg(t){const e=t.mapValue.fields[qk];return eg(e)?tg(e):e}function Kd(t){const e=is(t.mapValue.fields[Kk].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Yd="(default)";class Ea{constructor(e,n){this.projectId=e,this.database=n||Yd}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="__type__",Yk="__max__",Ks={mapValue:{fields:{__type__:{stringValue:Yk}}}},i_="__vector__",yc="value",am={nullValue:"NULL_VALUE"};function mo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eg(t)?4:Qk(t)?9007199254740991:ng(t)?10:11:J(28295,{value:t})}function Ei(t,e){if(t===e)return!0;const n=mo(t);if(n!==mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kd(t).isEqual(Kd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=is(i.timestampValue),a=is(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ss(i.bytesValue).isEqual(ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?Wd(o)===Wd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cc(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(jx(o)!==jx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ei(o[l],a[l])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Qd(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=mo(t),r=mo(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ux(t.timestampValue,e.timestampValue);case 4:return Ux(Kd(t),Kd(e));case 5:return Hw(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ss(s),l=ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ae(a[u],l[u]);if(h!==0)return h}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ae(Xe(s.latitude),Xe(o.latitude));return a!==0?a:ae(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,y,_,E;const a=s.fields||{},l=o.fields||{},u=(p=a[yc])==null?void 0:p.arrayValue,h=(y=l[yc])==null?void 0:y.arrayValue,f=ae(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return f!==0?f:zx(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ks.mapValue&&o===Ks.mapValue)return 0;if(s===Ks.mapValue)return 1;if(o===Ks.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=Hw(l[f],h[f]);if(p!==0)return p;const y=po(a[l[f]],u[h[f]]);if(y!==0)return y}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function Ux(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=is(t),r=is(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function zx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=po(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function wc(t){return Xw(t)}function Xw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xw(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xw(n.fields[o])}`;return i+"}"}(t.mapValue):J(61005,{value:t})}function lm(t){switch(mo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(t);return e?16+lm(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+lm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return So(r.fields,(s,o)=>{i+=s.length+lm(o)}),i}(t.mapValue);default:throw J(13486,{value:t})}}function Sa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zw(t){return!!t&&"integerValue"in t}function Jd(t){return!!t&&"arrayValue"in t}function Bx(t){return!!t&&"nullValue"in t}function $x(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cm(t){return!!t&&"mapValue"in t}function ng(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[r_])==null?void 0:r.stringValue)===i_}function md(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return So(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=md(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=md(t.arrayValue.values[n]);return e}return{...t}}function Qk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Yk}const Jk={mapValue:{fields:{[r_]:{stringValue:i_},[yc]:{arrayValue:{}}}}};function lF(t){return"nullValue"in t?am:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Sa(Ea.empty(),K.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ng(t)?Jk:{mapValue:{}}:J(35942,{value:t})}function cF(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Sa(Ea.empty(),K.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Jk:"mapValue"in t?ng(t)?{mapValue:{}}:Ks:J(61959,{value:t})}function Wx(t,e){const n=po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Hx(t,e){const n=po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=md(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];cm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){So(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kt(md(this.value))}}function Xk(t){const e=[];return So(t.fields,(n,r)=>{const i=new tt([n]);if(cm(r)){const s=Xk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,ne.min(),ne.min(),ne.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ge(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new Ge(e,2,n,ne.min(),ne.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,ne.min(),ne.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.position=e,this.inclusive=n}}function Gx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=po(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function uF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{}class we extends Zk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dF(e,n,r):n==="array-contains"?new mF(e,r):n==="in"?new sC(e,r):n==="not-in"?new pF(e,r):n==="array-contains-any"?new gF(e,r):new we(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hF(e,r):new fF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends Zk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Le(e,n)}matches(e){return vc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vc(t){return t.op==="and"}function e0(t){return t.op==="or"}function s_(t){return eC(t)&&vc(t)}function eC(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function t0(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+wc(t.value);if(s_(t))return t.filters.map(e=>t0(e)).join(",");{const e=t.filters.map(n=>t0(n)).join(",");return`${t.op}(${e})`}}function tC(t,e){return t instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.field.isEqual(i.field)&&Ei(r.value,i.value)}(t,e):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tC(o,i.filters[a]),!0):!1}(t,e):void J(19439)}function nC(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function rC(t){return t instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${wc(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(rC).join(" ,")+"}"}(t):"Filter"}class dF extends we{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class hF extends we{constructor(e,n){super(e,"in",n),this.keys=iC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fF extends we{constructor(e,n){super(e,"not-in",n),this.keys=iC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class mF extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jd(n)&&Qd(n.arrayValue,this.value)}}class sC extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qd(this.value.arrayValue,n)}}class pF extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qd(this.value.arrayValue,n)}}class gF extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function n0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new yF(t,e,n,r,i,s,o)}function Aa(t){const e=Y(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>t0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wc(r)).join(",")),e.Te=n}return e.Te}function xh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qx(t.startAt,e.startAt)&&qx(t.endAt,e.endAt)}function op(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ap(t,e){return t.filters.filter(n=>n instanceof we&&n.field.isEqual(e))}function Kx(t,e,n){let r=am,i=!0;for(const s of ap(t,e)){let o=am,a=!0;switch(s.op){case"<":case"<=":o=lF(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=am}Wx({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Wx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Yx(t,e,n){let r=Ks,i=!0;for(const s of ap(t,e)){let o=Ks,a=!0;switch(s.op){case">=":case">":o=cF(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ks}Hx({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Hx({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oC(t,e,n,r,i,s,o,a){return new us(t,e,n,r,i,s,o,a)}function Vc(t){return new us(t)}function Qx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o_(t){return t.collectionGroup!==null}function Xl(t){const e=Y(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Me(tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Xd(s,r))}),n.has(tt.keyField().canonicalString())||e.Ie.push(new Xd(tt.keyField(),r))}return e.Ie}function cn(t){const e=Y(t);return e.Ee||(e.Ee=lC(e,Xl(t))),e.Ee}function aC(t){const e=Y(t);return e.de||(e.de=lC(e,t.explicitOrderBy)),e.de}function lC(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xd(i.field,s)});const n=t.endAt?new go(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new go(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r0(t,e){const n=t.filters.concat([e]);return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lp(t,e,n){return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Th(t,e){return xh(cn(t),cn(e))&&t.limitType===e.limitType}function cC(t){return`${Aa(cn(t))}|lt:${t.limitType}`}function Sl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rC(i)).join(", ")}]`),bh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wc(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function Eh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Gx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Xl(r),i)||r.endAt&&!function(o,a,l){const u=Gx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Xl(r),i))}(t,e)}function uC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dC(t){return(e,n)=>{let r=!1;for(const i of Xl(t)){const s=wF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wF(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?po(l,u):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $k(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new Be(K.comparator);function Pn(){return vF}const hC=new Be(K.comparator);function Gu(...t){let e=hC;for(const n of t)e=e.insert(n.key,n);return e}function fC(t){let e=hC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yi(){return pd()}function mC(){return pd()}function pd(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const _F=new Be(K.comparator),bF=new Me(K.comparator);function ce(...t){let e=bF;for(const n of t)e=e.add(n);return e}const IF=new Me(ae);function a_(){return IF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wd(e)?"-0":e}}function pC(t){return{integerValue:""+t}}function gC(t,e){return Pk(e)?pC(e):l_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this._=void 0}}function xF(t,e,n){return t instanceof _c?function(i,s){const o={fields:{[Gk]:{stringValue:Hk},[Kk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eg(s)&&(s=tg(s)),s&&(o.fields[qk]=s),{mapValue:o}}(n,e):t instanceof ka?wC(t,e):t instanceof Ca?vC(t,e):function(i,s){const o=yC(i,s),a=Jx(o)+Jx(i.Ae);return Zw(o)&&Zw(i.Ae)?pC(a):l_(i.serializer,a)}(t,e)}function TF(t,e,n){return t instanceof ka?wC(t,e):t instanceof Ca?vC(t,e):n}function yC(t,e){return t instanceof bc?function(r){return Zw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _c extends rg{}class ka extends rg{constructor(e){super(),this.elements=e}}function wC(t,e){const n=_C(e);for(const r of t.elements)n.some(i=>Ei(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ca extends rg{constructor(e){super(),this.elements=e}}function vC(t,e){let n=_C(e);for(const r of t.elements)n=n.filter(i=>!Ei(i,r));return{arrayValue:{values:n}}}class bc extends rg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Jx(t){return Xe(t.integerValue||t.doubleValue)}function _C(t){return Jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.field=e,this.transform=n}}function EF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ka&&i instanceof ka||r instanceof Ca&&i instanceof Ca?cc(r.elements,i.elements,Ei):r instanceof bc&&i instanceof bc?Ei(r.Ae,i.Ae):r instanceof _c&&i instanceof _c}(t.transform,e.transform)}class SF{constructor(e,n){this.version=e,this.transformResults=n}}class nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nt}static exists(e){return new nt(void 0,e)}static updateTime(e){return new nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ig{}function bC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fc(t.key,nt.none()):new jc(t.key,t.data,nt.none());{const n=t.data,r=Kt.empty();let i=new Me(tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hs(t.key,r,new Rn(i.toArray()),nt.none())}}function AF(t,e,n){t instanceof jc?function(i,s,o){const a=i.value.clone(),l=Zx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hs?function(i,s,o){if(!um(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Zx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(IC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gd(t,e,n,r){return t instanceof jc?function(s,o,a,l){if(!um(s.precondition,o))return a;const u=s.value.clone(),h=eT(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof hs?function(s,o,a,l){if(!um(s.precondition,o))return a;const u=eT(s.fieldTransforms,l,o),h=o.data;return h.setAll(IC(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return um(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=yC(r.transform,i||null);s!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,s))}return n||null}function Xx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cc(r,i,(s,o)=>EF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jc extends ig{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hs extends ig{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zx(t,e,n){const r=new Map;ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,TF(o,a,n[i]))}return r}function eT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,xF(s,o,e))}return r}class Fc extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c_ extends ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&AF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=bC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,(n,r)=>Xx(n,r))&&cc(this.baseMutations,e.baseMutations,(n,r)=>Xx(n,r))}}class d_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return _F}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new d_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,be;function TC(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function EC(t){if(t===void 0)return bt("GRPC error has no .code"),M.UNKNOWN;switch(t){case St.OK:return M.OK;case St.CANCELLED:return M.CANCELLED;case St.UNKNOWN:return M.UNKNOWN;case St.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case St.INTERNAL:return M.INTERNAL;case St.UNAVAILABLE:return M.UNAVAILABLE;case St.UNAUTHENTICATED:return M.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case St.NOT_FOUND:return M.NOT_FOUND;case St.ALREADY_EXISTS:return M.ALREADY_EXISTS;case St.PERMISSION_DENIED:return M.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case St.ABORTED:return M.ABORTED;case St.OUT_OF_RANGE:return M.OUT_OF_RANGE;case St.UNIMPLEMENTED:return M.UNIMPLEMENTED;case St.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(be=St||(St={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=new lo([4294967295,4294967295],0);function tT(t){const e=SC().encode(t),n=new pk;return n.update(e),new Uint8Array(n.digest())}function nT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new lo([n,r],0),new lo([i,s],0)]}class f_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qu(`Invalid padding: ${n}`);if(r<0)throw new qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=lo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(lo.fromNumber(r)));return i.compare(RF)===1&&(i=new lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tT(e),[r,i]=nT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new f_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=tT(e),[r,i]=nT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(ne.min(),i,new Be(ae),Pn(),ce())}}class kh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kh(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class AC{constructor(e,n){this.targetId=e,this.Ce=n}}class kC{constructor(e,n,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rT{constructor(){this.ve=0,this.Fe=iT(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J(38017,{changeType:s})}}),new kh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=iT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PF{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pn(),this.Je=Cf(),this.He=Cf(),this.Ye=new Be(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(op(s))if(r===0){const o=new K(s.path);this.et(n,o,Ge.newNoDocument(o,ne.min()))}else ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}yd==null||yd.lt(function(h,f,p,y,_){var I,b,T;const E={localCacheCount:h,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},R=f.unchangedNames;return R&&(E.bloomFilter={applied:_===0,hashCount:(R==null?void 0:R.hashCount)??0,bitmapLength:((b=(I=R==null?void 0:R.bits)==null?void 0:I.bitmap)==null?void 0:b.length)??0,padding:((T=R==null?void 0:R.bits)==null?void 0:T.padding)??0,mightContain:N=>(y==null?void 0:y.mightContain(N))??!1}),E}(o,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ss(r).toUint8Array()}catch(l){if(l instanceof Wk)return kr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new f_(o,i,s)}catch(l){return kr(l instanceof qu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&op(a.target)){const l=new K(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ge.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ce();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ah(e,n,this.Ye,this.je,r);return this.je=Pn(),this.Je=Cf(),this.He=Cf(),this.Ye=new Be(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new rT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Me(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Me(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Cf(){return new Be(K.comparator)}function iT(){return new Be(K.comparator)}const NF=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),DF=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),LF=(()=>({and:"AND",or:"OR"}))();class OF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i0(t,e){return t.useProto3Json||bh(e)?e:{value:e}}function Ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MF(t,e){return Ic(t,e.toTimestamp())}function It(t){return ee(!!t,49232),ne.fromTimestamp(function(n){const r=is(n);return new De(r.seconds,r.nanos)}(t))}function m_(t,e){return s0(t,e).canonicalString()}function s0(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RC(t){const e=ue.fromString(t);return ee(FC(e),10190,{key:e.toString()}),e}function Zd(t,e){return m_(t.databaseId,e.path)}function Ii(t,e){const n=RC(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(DC(n))}function PC(t,e){return m_(t.databaseId,e)}function NC(t){const e=RC(t);return e.length===4?ue.emptyPath():DC(e)}function o0(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DC(t){return ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sT(t,e,n){return{name:Zd(t,e),fields:n.value.mapValue.fields}}function sg(t,e,n){const r=Ii(t,e.name),i=It(e.updateTime),s=e.createTime?It(e.createTime):ne.min(),o=new Kt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function VF(t,e){return"found"in e?function(r,i){ee(!!i.found,43571),i.found.name,i.found.updateTime;const s=Ii(r,i.found.name),o=It(i.found.updateTime),a=i.found.createTime?It(i.found.createTime):ne.min(),l=new Kt({mapValue:{fields:i.found.fields}});return Ge.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing,3894),ee(!!i.readTime,22933);const s=Ii(r,i.missing),o=It(i.readTime);return Ge.newNoDocument(s,o)}(t,e):J(7234,{result:e})}function jF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ee(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?M.UNKNOWN:EC(u.code);return new $(h,u.message||"")}(o);n=new kC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ii(t,r.document.name),s=It(r.document.updateTime),o=r.document.createTime?It(r.document.createTime):ne.min(),a=new Kt({mapValue:{fields:r.document.fields}}),l=Ge.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new dm(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ii(t,r.document),s=r.readTime?It(r.readTime):ne.min(),o=Ge.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ii(t,r.document),s=r.removedTargetIds||[];n=new dm([],s,i,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new CF(i,s),a=r.targetId;n=new AC(a,o)}}return n}function eh(t,e){let n;if(e instanceof jc)n={update:sT(t,e.key,e.value)};else if(e instanceof Fc)n={delete:Zd(t,e.key)};else if(e instanceof hs)n={update:sT(t,e.key,e.data),updateMask:WF(e.fieldMask)};else{if(!(e instanceof c_))return J(16599,{Vt:e.type});n={verify:Zd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof _c)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ka)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ca)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:MF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J(27497)}(t,e.precondition)),n}function a0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?nt.updateTime(It(s.updateTime)):s.exists!==void 0?nt.exists(s.exists):nt.none()}(e.currentDocument):nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new _c;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new ka(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Ca(h)}else"increment"in a?l=new bc(o,a.increment):J(16584,{proto:a});const u=tt.fromServerFormat(a.fieldPath);return new Sh(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ii(t,e.update.name),s=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Rn(u.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new hs(i,s,o,n,r)}return new jc(i,s,n,r)}if(e.delete){const i=Ii(t,e.delete);return new Fc(i,n)}if(e.verify){const i=Ii(t,e.verify);return new c_(i,n)}return J(1463,{proto:e})}function FF(t,e){return t&&t.length>0?(ee(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?It(i.updateTime):It(s);return o.isEqual(ne.min())&&(o=It(s)),new SF(o,i.transformResults||[])}(n,e))):[]}function LC(t,e){return{documents:[PC(t,e.path)]}}function og(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PC(t,i);const s=function(u){if(u.length!==0)return jC(Le.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:$s(p.field),direction:zF(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=i0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function OC(t,e,n,r){const{ft:i,parent:s}=og(t,e),o={},a=[];let l=0;return n.forEach(u=>{const h=r?u.alias:"aggregate_"+l++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:$s(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:$s(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:s}}function MC(t){let e=NC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=VC(f);return p instanceof Le&&s_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(_){return new Xd(Al(_.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,bh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new go(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new go(y,p)}(n.endAt)),oC(e,i,o,s,a,"F",l,u)}function UF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Al(n.unaryFilter.field);return we.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Al(n.unaryFilter.field);return we.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Al(n.unaryFilter.field);return we.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Al(n.unaryFilter.field);return we.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return we.create(Al(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(r=>VC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function zF(t){return NF[t]}function BF(t){return DF[t]}function $F(t){return LF[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Al(t){return tt.fromServerFormat(t.fieldPath)}function jC(t){return t instanceof we?function(n){if(n.op==="=="){if($x(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(Bx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($x(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(Bx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:BF(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>jC(i));return r.length===1?r[0]:{compositeFilter:{op:$F(n.op),filters:r}}}(t):J(54877,{filter:t})}function WF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.yt=e}}function HF(t,e){let n;if(e.document)n=sg(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=K.fromSegments(e.noDocument.path),i=Pa(e.noDocument.readTime);n=Ge.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J(56709);{const r=K.fromSegments(e.unknownDocument.path),i=Pa(e.unknownDocument.version);n=Ge.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new De(i[0],i[1]);return ne.fromTimestamp(s)}(e.readTime)),n}function oT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Zd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ic(s,o.version.toTimestamp()),createTime:Ic(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ra(e.version)};else{if(!e.isUnknownDocument())return J(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ra(e.version)}}return r}function cp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ra(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pa(t){const e=new De(t.seconds,t.nanoseconds);return ne.fromTimestamp(e)}function na(t,e){const n=(e.baseMutations||[]).map(s=>a0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>a0(t.yt,s)),i=De.fromMillis(e.localWriteTimeMs);return new u_(e.batchId,i,n,r)}function Ku(t){const e=Pa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Pa(t.lastLimboFreeSnapshotVersion):ne.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ee(o===1,1966,{count:o}),cn(Vc(NC(s.documents[0])))}(t.query):function(s){return cn(MC(s))}(t.query),new qi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ht.fromBase64String(t.resumeToken))}function zC(t,e){const n=Ra(e.snapshotVersion),r=Ra(e.lastLimboFreeSnapshotVersion);let i;i=op(e.target)?LC(t.yt,e.target):og(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ag(t){const e=MC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lp(e,e.limit,"L"):e}function xy(t,e){return new h_(e.largestBatchId,a0(t.yt,e.overlayMutation))}function aT(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function lT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ra(r.readTime),documentKey:ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{getBundleMetadata(e,n){return cT(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Pa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return cT(e).put(function(i){return{bundleId:i.id,createTime:Ra(It(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return uT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:ag(s.bundledQuery),readTime:Pa(s.readTime)}}(r)})}saveNamedQuery(e,n){return uT(e).put(function(i){return{name:i.name,readTime:Ra(It(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function cT(t){return Ot(t,Jp)}function uT(t){return Ot(t,Xp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new lg(e,r)}getOverlay(e,n){return Nu(e).get(aT(this.userId,n)).next(r=>r?xy(this.serializer,r):null)}getOverlays(e,n){const r=yi();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new h_(n,o);i.push(this.St(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ln(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Nu(e).Z(Qw,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=yi(),s=ln(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Nu(e).J(Qw,o).next(a=>{for(const l of a){const u=xy(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=yi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Nu(e).ee({index:Vk,range:a},(l,u,h)=>{const f=xy(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}St(e,n){return Nu(e).put(function(i,s,o){const[a,l,u]=aT(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:eh(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function Nu(t){return Ot(t,Zp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{bt(e){return Ot(e,t_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ht.fromUint8Array(r):ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Xe(e.integerValue));else if("doubleValue"in e){const r=Xe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Wd(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=is(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ss(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Qk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ng(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):J(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=yc,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(Xe(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),K.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ra.Kt=new ra;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=255;function KF(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function dT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=KF(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class YF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=dT(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=dT(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(wl),this.sn(255)}_n(){this.an(wl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===wl?(this.sn(wl),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===wl?(this.an(wl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QF{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class JF{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Du{constructor(){this.cn=new YF,this.ln=new QF(this.cn),this.hn=new JF(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ia(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:hm(this.En),directionalValue:hm(this.dn),orderedDocumentKey:hm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Rs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=hT(t.En,e.En),n!==0?n:(n=hT(t.dn,e.dn),n!==0?n:K.comparator(t.In,e.In)))}function hT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function hm(t){return HS()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function fT(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class mT{constructor(e){this.mn=new Me((n,r)=>tt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=qw(e);if(n!==void 0&&!this.wn(n))return!1;const r=Jo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Me(tt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ma(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ma(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ma(r.field,r.dir==="asc"?0:1)));return new dc(dc.UNKNOWN_ID,this.collectionId,n,hc.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){var n,r;if(ee(t instanceof we||t instanceof Le,20012),t instanceof we){if(t instanceof sC){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>we.create(t.field,"==",s)))||[];return Le.create(i,"or")}return t}const e=t.filters.map(i=>BC(i));return Le.create(e,t.op)}function XF(t){if(t.getFilters().length===0)return[];const e=u0(BC(t));return ee($C(e),7391),l0(e)||c0(e)?[e]:e.getFilters()}function l0(t){return t instanceof we}function c0(t){return t instanceof Le&&s_(t)}function $C(t){return l0(t)||c0(t)||function(n){if(n instanceof Le&&e0(n)){for(const r of n.getFilters())if(!l0(r)&&!c0(r))return!1;return!0}return!1}(t)}function u0(t){if(ee(t instanceof we||t instanceof Le,34018),t instanceof we)return t;if(t.filters.length===1)return u0(t.filters[0]);const e=t.filters.map(r=>u0(r));let n=Le.create(e,t.op);return n=up(n),$C(n)?n:(ee(n instanceof Le,64498),ee(vc(n),40251),ee(n.filters.length>1,57927),n.filters.reduce((r,i)=>p_(r,i)))}function p_(t,e){let n;return ee(t instanceof we||t instanceof Le,38388),ee(e instanceof we||e instanceof Le,25473),n=t instanceof we?e instanceof we?function(i,s){return Le.create([i,s],"and")}(t,e):pT(t,e):e instanceof we?pT(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0,48005),vc(i)&&vc(s))return nC(i,s.getFilters());const o=e0(i)?i:s,a=e0(i)?s:i,l=o.filters.map(u=>p_(u,a));return Le.create(l,"or")}(t,e),up(n)}function pT(t,e){if(vc(e))return nC(e,t.getFilters());{const n=e.filters.map(r=>p_(t,r));return Le.create(n,"or")}}function up(t){if(ee(t instanceof we||t instanceof Le,11850),t instanceof we)return t;const e=t.getFilters();if(e.length===1)return up(e[0]);if(eC(t))return t;const n=e.map(i=>up(i)),r=[];return n.forEach(i=>{i instanceof we?r.push(i):i instanceof Le&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Le.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(){this.Cn=new g_}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ir.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class g_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Me(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Me(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="IndexedDbIndexManager",Rf=new Uint8Array(0);class e3{constructor(e,n){this.databaseId=n,this.vn=new g_,this.Fn=new ds(r=>Aa(r),(r,i)=>xh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:ln(i)};return yT(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[xk(n),""],!1,!0);return yT(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(gi(o.parent))}return r})}addFieldIndex(e,n){const r=Lu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=_l(e);return s.next(a=>{o.put(lT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Lu(e),i=_l(e),s=vl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Lu(e),r=vl(e),i=_l(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return L.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new mT(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=vl(e);let i=!0;const s=new Map;return L.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ce();const a=[];return L.forEach(s,(l,u)=>{W(gT,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${Aa(n)}`);const h=function(T,N){const z=qw(N);if(z===void 0)return null;for(const B of ap(T,z.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(u,l),f=function(T,N){const z=new Map;for(const B of Jo(N))for(const x of ap(T,B.fieldPath))switch(x.op){case"==":case"in":z.set(B.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return z.set(B.fieldPath.canonicalString(),x.value),Array.from(z.values())}return null}(u,l),p=function(T,N){const z=[];let B=!0;for(const x of Jo(N)){const w=x.kind===0?Kx(T,x.fieldPath,T.startAt):Yx(T,x.fieldPath,T.startAt);z.push(w.value),B&&(B=w.inclusive)}return new go(z,B)}(u,l),y=function(T,N){const z=[];let B=!0;for(const x of Jo(N)){const w=x.kind===0?Yx(T,x.fieldPath,T.endAt):Kx(T,x.fieldPath,T.endAt);z.push(w.value),B&&(B=w.inclusive)}return new go(z,B)}(u,l),_=this.On(l,u,p),E=this.On(l,u,y),R=this.Nn(l,u,f),I=this.Bn(l.indexId,h,_,p.inclusive,E,y.inclusive,R);return L.forEach(I,b=>r.Y(b,n.limit).next(T=>{T.forEach(N=>{const z=K.fromSegments(N.documentKey);o.has(z)||(o=o.add(z),a.push(z))})}))}).next(()=>a)}return L.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=XF(Le.create(e.filters,"and")).map(r=>n0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.Ln(n[f/u]):Rf,y=this.kn(e,p,r[f%u],i),_=this.qn(e,p,s[f%u],o),E=a.map(R=>this.kn(e,p,R,!0));h.push(...this.createRange(y,_,E))}return h}kn(e,n,r,i){const s=new ia(e,K.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ia(e,K.empty(),n,r);return i?s.An():s}xn(e,n){const r=new mT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return L.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Me(tt.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Du;for(const i of Jo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);ra.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new Du;return ra.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Du;return ra.Kt.Dt(Sa(this.databaseId,n),r.Pn(function(s){const o=Jo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Du);let s=0;for(const o of Jo(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Jd(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);ra.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Du;l.seed(a.un()),ra.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof we&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Lu(e),i=_l(e);return(n?r.J(Yw,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new hc(f.sequenceNumber,new ir(Pa(f.readTime),new K(gi(f.documentKey)),f.largestBatchId)):hc.empty(),y=h.fields.map(([_,E])=>new ma(tt.fromServerFormat(_),E));return new dc(h.indexId,h.collectionGroup,y,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Lu(e),s=_l(e);return this.Gn(e).next(o=>i.J(Yw,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(lT(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.zn(e,i,l).next(u=>{const h=this.jn(s,l);return u.isEqual(h)?L.resolve():this.Jn(e,s,l,u,h)}))))})}Hn(e,n,r,i){return vl(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return vl(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=vl(e);let s=new Me(Rs);return i.ee({index:Mk,range:IDBKeyRange.only([r.indexId,this.uid,hm(this.$n(r,n))])},(o,a)=>{s=s.add(new ia(r.indexId,n,fT(a.arrayValue),fT(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Me(Rs);const i=this.Qn(n,e);if(i==null)return r;const s=qw(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Jd(o))for(const a of o.arrayValue.values||[])r=r.add(new ia(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ia(n.indexId,e.key,Rf,i));return r}Jn(e,n,r,i,s){W(gT,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const y=l.getIterator(),_=u.getIterator();let E=yl(y),R=yl(_);for(;E||R;){let I=!1,b=!1;if(E&&R){const T=h(E,R);T<0?b=!0:T>0&&(I=!0)}else E!=null?b=!0:I=!0;I?(f(R),R=yl(_)):b?(p(E),E=yl(y)):(E=yl(y),R=yl(_))}}(i,s,Rs,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),L.waitFor(o)}Gn(e){let n=1;return _l(e).ee({index:Ok,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Rs(o,a)).filter((o,a,l)=>!a||Rs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Rs(o,e),l=Rs(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Rf,K.empty()),l=i[o+1].Vn(this.uid,Rf,K.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Rs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wT)}getMinOffset(e,n){return L.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||J(44426))).next(wT)}}function yT(t){return Ot(t,qd)}function vl(t){return Ot(t,fd)}function Lu(t){return Ot(t,e_)}function _l(t){return Ot(t,hd)}function wT(t){ee(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Jv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ir(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WC=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(t,e,n){const r=t.store(Br),i=t.store(fc),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{ee(a===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=Nk(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return L.waitFor(s).next(()=>u)}function dp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(WC,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class cg{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ee(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new cg(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).ee({index:ua,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=kl(e),o=Ps(e);return o.add({}).next(a=>{ee(typeof a=="number",49019);const l=new u_(a,n,r,i),u=function(y,_,E){const R=E.baseMutations.map(b=>eh(y.yt,b)),I=E.mutations.map(b=>eh(y.yt,b));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:R,mutations:I}}(this.serializer,this.userId,l),h=[];let f=new Me((p,y)=>ae(p.canonicalString(),y.canonicalString()));for(const p of i){const y=Nk(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(y,M5))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),L.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Ps(e).get(n).next(r=>r?(ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),na(this.serializer,r)):null)}er(e,n){return this.Xn[n]?L.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ps(e).ee({index:ua,range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r,47524,{tr:r}),s=na(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=co;return Ps(e).ee({index:ua,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,co],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).J(ua,n).next(r=>r.map(i=>na(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return kl(e).ee({range:i},(o,a,l)=>{const[u,h,f]=o,p=gi(h);if(u===this.userId&&n.path.isEqual(p))return Ps(e).get(f).next(y=>{if(!y)throw J(61480,{nr:o,batchId:f});ee(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:f}),s.push(na(this.serializer,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(ae);const i=[];return n.forEach(s=>{const o=sm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=kl(e).ee({range:a},(u,h,f)=>{const[p,y,_]=u,E=gi(y);p===this.userId&&s.path.isEqual(E)?r=r.add(_):f.done()});i.push(l)}),L.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=sm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Me(ae);return kl(e).ee({range:o},(l,u,h)=>{const[f,p,y]=l,_=gi(p);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(y)):h.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ps(e).get(s).next(o=>{if(o===null)throw J(35274,{batchId:s});ee(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(na(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return HC(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return kl(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=gi(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return GC(e,this.userId,n)}_r(e){return qC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:co,lastStreamToken:""})}}function GC(t,e,n){const r=sm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return kl(t).ee({range:s,X:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Ps(t){return Ot(t,Br)}function kl(t){return Ot(t,fc)}function qC(t){return Ot(t,Hd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Na(0)}static cr(){return new Na(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Na(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ne.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bl(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ee(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return bl(e).ee((o,a)=>{const l=Ku(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return bl(e).ee((r,i)=>{const s=Ku(i);n(s)})}lr(e){return _T(e).get(sp).next(n=>(ee(n!==null,2888),n))}hr(e,n){return _T(e).put(sp,n)}Pr(e,n){return bl(e).put(zC(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Aa(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return bl(e).ee({range:i,index:Lk},(o,a,l)=>{const u=Ku(a);xh(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ws(e);return n.forEach(o=>{const a=ln(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ws(e);return L.forEach(n,s=>{const o=ln(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ws(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ws(e);let s=ce();return i.ee({range:r,X:!0},(o,a,l)=>{const u=gi(o[1]),h=new K(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=ln(n.path),i=IDBKeyRange.bound([r],[xk(r)],!1,!0);let s=0;return Ws(e).ee({index:Zv,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return bl(e).get(n).next(r=>r?Ku(r):null)}}function bl(t){return Ot(t,mc)}function _T(t){return Ot(t,pa)}function Ws(t){return Ot(t,pc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="LruGarbageCollector",KC=1048576;function IT([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class n3{constructor(e){this.Ir=e,this.buffer=new Me(IT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();IT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(bT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?W(bT,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Vr(3e5)})}}class r3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Cn.ce);const r=new n3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(vT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),El()<=ye.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function QC(t,e){return new r3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e,n){this.db=e,this.garbageCollector=QC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Pf(e,r)}removeReference(e,n,r){return Pf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Pf(e,n)}br(e,n){return function(i,s){let o=!1;return qC(i).te(a=>GC(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ne.min()),Ws(e).delete(function(f){return[0,ln(f.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Pf(e,n)}Sr(e,n){const r=Ws(e);let i,s=Cn.ce;return r.ee({index:Zv},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.ce&&n(new K(gi(i)),s),s=u,i=l):s=Cn.ce}).next(()=>{s!==Cn.ce&&n(new K(gi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Pf(t,e){return Ws(t).put(function(r,i){return{targetId:0,path:ln(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Go(e).put(r)}removeEntry(e,n,r){return Go(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],cp(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Ge.newInvalidDocument(n);return Go(e).ee({index:om,range:IDBKeyRange.only(Ou(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Ge.newInvalidDocument(n)};return Go(e).ee({index:om,range:IDBKeyRange.only(Ou(n))},(i,s)=>{r={document:this.Cr(n,s),size:dp(s)}}).next(()=>r)}getEntries(e,n){let r=Pn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=Pn(),i=new Be(K.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,dp(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Me(ET);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ou(i.first()),Ou(i.last())),o=i.getIterator();let a=o.getNext();return Go(e).ee({index:om,range:s},(l,u,h)=>{const f=K.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&ET(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(Ou(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),cp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=Pn();for(const f of u){const p=this.Cr(K.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Eh(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Pn();const o=TT(n,r),a=TT(n,ir.max());return Go(e).ee({index:Dk,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.Cr(K.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new o3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xT(e).get(Kw).next(n=>(ee(!!n,20021),n))}Dr(e,n){return xT(e).put(Kw,n)}Cr(e,n){if(n){const r=HF(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return Ge.newInvalidDocument(e)}}function XC(t){return new s3(t)}class o3 extends JC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ds(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Me((s,o)=>ae(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=oT(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=dp(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=oT(this.Nr.serializer,o.convertToNoDocument(ne.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function xT(t){return Ot(t,Gd)}function Go(t){return Ot(t,ip)}function Ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TT(t,e){const n=e.documentKey.path.toArray();return[t,cp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ET(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ae(n[s],r[s]),i)return i;return i=ae(n.length,r.length),i||(i=ae(n[n.length-2],r[r.length-2]),i||ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gd(r.mutation,i,Rn.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Gu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pn();const o=pd(),a=function(){return pd()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof hs)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),gd(h.mutation,u,h.mutation.getFieldMask(),De.now())):o.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new a3(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=pd();let i=new Be((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Rn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=mC();h.forEach(p=>{if(!s.has(p)){const y=bC(n.get(p),r.get(p));y!==null&&f.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(yi());let a=uc,l=s;return o.next(u=>L.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ce())).next(h=>({batchId:a,changes:fC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=Gu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Gu();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const u=function(f,p){return new us(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ge.newInvalidDocument(h)))});let a=Gu();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&gd(h.mutation,u,Rn.empty(),De.now()),Eh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:It(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ag(i.bundledQuery),readTime:It(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.overlays=new Be(K.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yi();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=yi(),s=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=yi(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=yi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return L.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new h_(n,r));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.Qr=new Me(jt.$r),this.Ur=new Me(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new ue([])),r=new jt(n,e),i=new jt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new ue([])),r=new jt(n,e),i=new jt(n,e+1);let s=ce();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Me(jt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?co:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),i=new jt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(ae);return n.forEach(i=>{const s=new jt(i,0),o=new jt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new jt(new K(s),0);let a=new Me(ae);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),L.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,i=>{const s=new jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),i=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.ri=e,this.docs=function(){return new Be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ge.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pn();const o=n.path,a=new K(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Jv(Ak(h),r)<=0||(i.has(h.key)||Eh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new f3(this)}getSize(e){return L.resolve(this.size)}}class f3 extends JC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.persistence=e,this.si=new ds(n=>Aa(n),xh),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new y_,this.targetCount=0,this.ai=Na.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Cn(0),this.li=!1,this.li=!0,this.hi=new u3,this.referenceDelegate=e(this),this.Pi=new m3(this),this.indexManager=new ZF,this.remoteDocumentCache=function(i){return new h3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new UC(n),this.Ii=new l3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new c3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new d3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new p3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class p3 extends Ck{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new y_,this.Vi=null}static mi(e){return new ug(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const i=K.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hp{constructor(e,n){this.persistence=e,this.pi=new ds(r=>ln(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QC(this,n)}static mi(e,n){return new hp(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lm(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Qp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Ih)}(e),function(l){l.createObjectStore(Hd,{keyPath:O5}),l.createObjectStore(Br,{keyPath:Mx,autoIncrement:!0}).createIndex(ua,Vx,{unique:!0}),l.createObjectStore(fc)}(e),ST(e),function(l){l.createObjectStore(Xo)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(pc),l.deleteObjectStore(mc),l.deleteObjectStore(pa)}(e),ST(e)),o=o.next(()=>function(l){const u=l.store(pa),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return u.put(sp,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Br).J().next(f=>{l.deleteObjectStore(Br),l.createObjectStore(Br,{keyPath:Mx,autoIncrement:!0}).createIndex(ua,Vx,{unique:!0});const p=u.store(Br),y=f.map(_=>p.put(_));return L.waitFor(y)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(gc,{keyPath:W5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(Gd)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Jp,{keyPath:H5})})(e),function(l){l.createObjectStore(Xp,{keyPath:G5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Zp,{keyPath:Z5});u.createIndex(Qw,eF,{unique:!1}),u.createIndex(Vk,tF,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(ip,{keyPath:V5});u.createIndex(om,j5),u.createIndex(Dk,F5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Xo))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(e_,{keyPath:q5,autoIncrement:!0}).createIndex(Yw,K5,{unique:!1}),l.createObjectStore(hd,{keyPath:Y5}).createIndex(Ok,Q5,{unique:!1}),l.createObjectStore(fd,{keyPath:J5}).createIndex(Mk,X5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(hd).clear()}).next(()=>{n.objectStore(fd).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(t_,{keyPath:nF})})(e)})),r<18&&i>=18&&HS()&&(o=o.next(()=>{n.objectStore(hd).clear()}).next(()=>{n.objectStore(fd).clear()})),o}wi(e){let n=0;return e.store(Xo).ee((r,i)=>{n+=dp(i)}).next(()=>{const r={byteSize:n};return e.store(Gd).put(Kw,r)})}yi(e){const n=e.store(Hd),r=e.store(Br);return n.J().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,co],[s.userId,s.lastAcknowledgedBatchId]);return r.J(ua,o).next(a=>L.forEach(a,l=>{ee(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=na(this.serializer,l);return HC(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(pc),r=e.store(Xo);return e.store(pa).get(sp).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ue(o),u=function(f){return[0,ln(f)]}(l);s.push(n.get(u).next(h=>h?L.resolve():(f=>n.put({targetId:0,path:ln(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}bi(e,n){e.createObjectStore(qd,{keyPath:$5});const r=n.store(qd),i=new g_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ln(l)})}};return n.store(Xo).ee({X:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>n.store(fc).ee({X:!0},([o,a,l],u)=>{const h=gi(a);return s(h.popLast())}))}Di(e){const n=e.store(mc);return n.ee((r,i)=>{const s=Ku(i),o=zC(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(Xo),i=[];return r.ee((s,o)=>{const a=n.store(ip),l=function(f){return f.document?new K(ue.fromString(f.document.name).popFirst(5)):f.noDocument?K.fromSegments(f.noDocument.path):f.unknownDocument?K.fromSegments(f.unknownDocument.path):J(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>L.waitFor(i))}Fi(e,n){const r=n.store(Br),i=XC(this.serializer),s=new w_(ug.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??ce();na(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),L.forEach(a,(l,u)=>{const h=new Ut(u),f=lg.wt(this.serializer,h),p=s.getIndexManager(h),y=cg.wt(h,this.serializer,p,s.referenceDelegate);return new ZC(i,y,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Jw(n,Cn.ce),l).next()})})}}function ST(t){t.createObjectStore(pc,{keyPath:z5}).createIndex(Zv,B5,{unique:!0}),t.createObjectStore(mc,{keyPath:"targetId"}).createIndex(Lk,U5,{unique:!0}),t.createObjectStore(pa)}const Ns="IndexedDbPersistence",Ty=18e5,Ey=5e3,Sy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eR="main";class v_{constructor(e,n,r,i,s,o,a,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!v_.v())throw new $(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i3(this,i),this.$i=n+eR,this.serializer=new UC(l),this.Ui=new bi(this.$i,this.Ni,new g3(this.serializer)),this.hi=new qF,this.Pi=new t3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=XC(this.serializer),this.Ii=new GF,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&bt(Ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(M.FAILED_PRECONDITION,Sy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Cn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Eo(e))return W(Ns,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W(Ns,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Mu(e).get(gl).next(n=>L.resolve(this.es(n)))}ts(e){return Nf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ty)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ot(n,gc);return r.J().next(i=>{const s=this.ss(i,Ty),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Mu(e).get(gl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ey)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new $(M.FAILED_PRECONDITION,Sy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nf(e).J().next(r=>this.ss(r,Ey).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W(Ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ih,gc],e=>{const n=new Jw(e,Cn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Nf(e).J().next(n=>this.ss(n,Ty).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return cg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new e3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return lg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){W(Ns,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?sF:l===17?zk:l===16?iF:l===15?n_:l===14?Uk:l===13?Fk:l===12?rF:l===11?jk:void J(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new Jw(a,this.ci?this.ci.next():Cn.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new $(M.FAILED_PRECONDITION,kk);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return Mu(e).get(gl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ey)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new $(M.FAILED_PRECONDITION,Sy)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put(gl,n)}static v(){return bi.v()}Zi(e){const n=Mu(e);return n.get(gl).next(r=>this.es(r)?(W(Ns,"Releasing primary lease."),n.delete(gl)):L.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;WS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return W(Ns,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bt(Ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(t){return Ot(t,Ih)}function Nf(t){return Ot(t,gc)}function __(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new b_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WS()?8:Rk(Lt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new y3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(El()<=ye.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(El()<=ye.DEBUG&&W("QueryEngine","Query:",Sl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(El()<=ye.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):L.resolve())}ys(e,n){if(Qx(n))return L.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lp(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,lp(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return Qx(n)||i.isEqual(ne.min())?L.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?L.resolve(null):(El()<=ye.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sl(n)),this.vs(e,o,n,Sk(i,uc)).next(a=>a))})}Ds(e,n){let r=new Me(dC(e));return n.forEach((i,s)=>{Eh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return El()<=ye.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Sl(n)),this.ps.getDocumentsMatchingQuery(e,n,ir.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="LocalStore",w3=3e8;class v3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Be(ae),this.xs=new ds(s=>Aa(s),xh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function nR(t,e,n,r){return new v3(t,e,n,r)}async function rR(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function _3(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let y=L.resolve();return p.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(E=>{const R=u.docVersions.get(_);ee(R!==null,48541),E.version.compareTo(R)<0&&(f.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iR(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function b3(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ht.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(E,R,I){return E.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=w3?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let l=Pn(),u=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(sR(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(ne.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function sR(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W(I_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function I3(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=co),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xc(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new qi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Tc(t,e,n){const r=Y(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eo(o))throw o;W(I_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function fp(t,e,n){const r=Y(t);let i=ne.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=Y(l),p=f.xs.get(h);return p!==void 0?L.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:ce())).next(a=>(lR(r,uC(e),a),{documents:a,Qs:s})))}function oR(t,e){const n=Y(t),r=Y(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function aR(t,e){const n=Y(t),r=n.Os.get(e)||ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,Sk(r,uc),Number.MAX_SAFE_INTEGER)).then(i=>(lR(n,e,i),i))}function lR(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function x3(t,e,n,r){const i=Y(t);let s=ce(),o=Pn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(s=s.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),o=o.insert(h,f)}const a=i.Ns.newChangeBuffer({trackRemovals:!0}),l=await xc(i,function(h){return cn(Vc(ue.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>sR(u,a,o).next(h=>(a.apply(u),h)).next(h=>i.Pi.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Pi.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function T3(t,e,n=ce()){const r=await xc(t,cn(ag(e.bundledQuery))),i=Y(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=It(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(s,e);const a=r.withResumeToken(ht.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Pi.updateTargetData(s,a).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firestore_clients";function AT(t,e){return`${cR}_${t}_${e}`}const uR="firestore_mutations";function kT(t,e,n){let r=`${uR}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const dR="firestore_targets";function Ay(t,e){return`${dR}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="SharedClientState";class mp{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new $(i.error.code,i.error.message))),o?new mp(e,n,i.state,s):(bt(fi,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new $(r.error.code,r.error.message))),s?new wd(e,r.state,i):(bt(fi,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=a_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Pk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new pp(e,s):(bt(fi,`Failed to parse client data for instance '${e}': ${n}`),null)}}class x_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new x_(n.clientId,n.onlineState):(bt(fi,`Failed to parse online state: ${e}`),null)}}class d0{constructor(){this.activeTargetIds=a_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ky{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Be(ae),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=AT(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new d0),this.ro=new RegExp(`^${cR}_${o}_([^_]*)$`),this.io=new RegExp(`^${uR}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${dR}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(AT(this.persistenceKey,r));if(i){const s=pp.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ay(this.persistenceKey,e));if(i){const s=wd.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ay(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return W(fi,"READ",e,n),n}setItem(e,n){W(fi,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){W(fi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(W(fi,"EVENT",n.key,n.newValue),n.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=Cn.ce;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number",30636,{So:s}),o=a}catch(a){bt(fi,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Cn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new mp(this.currentUser,e,n,r),s=kT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=kT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Ay(this.persistenceKey,e),s=new wd(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return pp.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return mp.Ws(new Ut(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return wd.Ws(i,n)}uo(e){return x_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);W(fi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=a_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class hR{constructor(){this.Mo=new d0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="ConnectivityMonitor";class RT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(CT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(CT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df=null;function h0(){return Df===null?Df=function(){return 268435456+Math.round(2147483648*Math.random())}():Df++,"0x"+Df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="RestConnection",S3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Yd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=h0(),a=this.zo(e,n.toUriEncodedString());W(Cy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=as(u);return this.Jo(e,a,l,r,h).then(f=>(W(Cy,`Received RPC '${e}' ${o}: `,f),f),f=>{throw kr(Cy,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=S3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class C3 extends A3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=h0();return new Promise((a,l)=>{const u=new gk;u.setWithCredentials(!0),u.listenOnce(yk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case im.NO_ERROR:const f=u.getResponseJson();W(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case im.TIMEOUT:W(nn,`RPC '${e}' ${o} timed out`),l(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case im.HTTP_ERROR:const p=u.getStatus();if(W(nn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const E=function(I){const b=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(b)>=0?b:M.UNKNOWN}(_.status);l(new $(E,_.message))}else l(new $(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{W(nn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);W(nn,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=h0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_k(),a=vk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(nn,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let p=!1,y=!1;const _=new k3({Yo:R=>{y?W(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(W(nn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(nn,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},Zo:()=>f.close()}),E=(R,I,b)=>{R.listen(I,T=>{try{b(T)}catch(N){setTimeout(()=>{throw N},0)}})};return E(f,Hu.EventType.OPEN,()=>{y||(W(nn,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),E(f,Hu.EventType.CLOSE,()=>{y||(y=!0,W(nn,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(f))}),E(f,Hu.EventType.ERROR,R=>{y||(y=!0,kr(nn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),_.a_(new $(M.UNAVAILABLE,"The operation could not be completed")))}),E(f,Hu.EventType.MESSAGE,R=>{var I;if(!y){const b=R.data[0];ee(!!b,16349);const T=b,N=(T==null?void 0:T.error)||((I=T[0])==null?void 0:I.error);if(N){W(nn,`RPC '${e}' stream ${i} received error:`,N);const z=N.status;let B=function(A){const C=St[A];if(C!==void 0)return EC(C)}(z),x=N.message;B===void 0&&(B=M.INTERNAL,x="Unknown error status: "+z+" with message "+N.message),y=!0,_.a_(new $(B,x)),f.close()}else W(nn,`RPC '${e}' stream ${i} received:`,b),_.u_(b)}}),E(a,wk.STAT_EVENT,R=>{R.stat===$w.PROXY?W(nn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===$w.NOPROXY&&W(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(){return typeof window<"u"?window:null}function fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){return new OF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="PersistentStream";class mR{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(bt(n.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(PT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(PT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R3 extends mR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jF(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?It(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=o0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=op(l)?{documents:LC(s,l)}:{query:og(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CC(s,o.resumeToken);const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=Ic(s,o.snapshotVersion.toTimestamp());const u=i0(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=UF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=o0(this.serializer),n.removeTarget=e,this.q_(n)}}class P3 extends mR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FF(e.writeResults,e.commitTime),r=It(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=o0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eh(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{}class D3 extends N3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,s0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(M.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,s0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class L3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class O3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ao(this)&&(W(Da,"Restarting streams for network reachability change."),await async function(l){const u=Y(l);u.Ea.add(4),await Uc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ch(u)}(this))})}),this.Ra=new L3(r,i)}}async function Ch(t){if(Ao(t))for(const e of t.da)await e(!0)}async function Uc(t){for(const e of t.da)await e(!1)}function dg(t,e){const n=Y(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),A_(n)?S_(n):Bc(n).O_()&&E_(n,e))}function Ec(t,e){const n=Y(t),r=Bc(n);n.Ia.delete(e),r.O_()&&pR(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ao(n)&&n.Ra.set("Unknown"))}function E_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bc(t).Y_(e)}function pR(t,e){t.Va.Ue(e),Bc(t).Z_(e)}function S_(t){t.Va=new PF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bc(t).start(),t.Ra.ua()}function A_(t){return Ao(t)&&!Bc(t).x_()&&t.Ia.size>0}function Ao(t){return Y(t).Ea.size===0}function gR(t){t.Va=void 0}async function M3(t){t.Ra.set("Online")}async function V3(t){t.Ia.forEach((e,n)=>{E_(t,e)})}async function j3(t,e){gR(t),A_(t)?(t.Ra.ha(e),S_(t)):t.Ra.set("Unknown")}async function F3(t,e,n){if(t.Ra.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){W(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gp(t,r)}else if(e instanceof dm?t.Va.Ze(e):e instanceof AC?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await iR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),pR(s,l);const f=new qi(h.target,l,u,h.sequenceNumber);E_(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W(Da,"Failed to raise snapshot:",r),await gp(t,r)}}async function gp(t,e,n){if(!Eo(e))throw e;t.Ea.add(1),await Uc(t),t.Ra.set("Offline"),n||(n=()=>iR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Da,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ch(t)})}function yR(t,e){return e().catch(n=>gp(t,n,e))}async function zc(t){const e=Y(t),n=yo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:co;for(;U3(e);)try{const i=await I3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,z3(e,i)}catch(i){await gp(e,i)}wR(e)&&vR(e)}function U3(t){return Ao(t)&&t.Ta.length<10}function z3(t,e){t.Ta.push(e);const n=yo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wR(t){return Ao(t)&&!yo(t).x_()&&t.Ta.length>0}function vR(t){yo(t).start()}async function B3(t){yo(t).ra()}async function $3(t){const e=yo(t);for(const n of t.Ta)e.ea(n.mutations)}async function W3(t,e,n){const r=t.Ta.shift(),i=d_.from(r,e,n);await yR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zc(t)}async function H3(t,e){e&&yo(t).X_&&await async function(r,i){if(function(o){return TC(o)&&o!==M.ABORTED}(i.code)){const s=r.Ta.shift();yo(r).B_(),await yR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zc(r)}}(t,e),wR(t)&&vR(t)}async function NT(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),W(Da,"RemoteStore received new credentials");const r=Ao(n);n.Ea.add(3),await Uc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function f0(t,e){const n=Y(t);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await Uc(n),n.Ra.set("Unknown"))}function Bc(t){return t.ma||(t.ma=function(n,r,i){const s=Y(n);return s.sa(),new R3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:M3.bind(null,t),t_:V3.bind(null,t),r_:j3.bind(null,t),H_:F3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),A_(t)?S_(t):t.Ra.set("Unknown")):(await t.ma.stop(),gR(t))})),t.ma}function yo(t){return t.fa||(t.fa=function(n,r,i){const s=Y(n);return s.sa(),new P3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:B3.bind(null,t),r_:H3.bind(null,t),ta:$3.bind(null,t),na:W3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zc(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Da,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new k_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $c(t,e){if(bt("AsyncQueue",`${e}: ${t}`),Eo(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{static emptySet(e){return new ga(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ga)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.ga=new Be(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class La{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new La(e,n,ga.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class q3{constructor(){this.queries=LT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Y(n),s=i.queries;i.queries=LT(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function LT(){return new ds(t=>cC(t),Th)}async function C_(t,e){const n=Y(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new G3,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$c(o,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&P_(n)}async function R_(t,e){const n=Y(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function K3(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&P_(n)}function Y3(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function P_(t){t.Ca.forEach(e=>{e.next()})}var m0,OT;(OT=m0||(m0={})).Ma="default",OT.Cache="cache";class N_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new La(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.serializer=e}$s(e){return Ii(this.serializer,e)}Us(e){return e.metadata.exists?sg(this.serializer,e.document,!1):Ge.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return It(e)}}class D_{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=bR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ue.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new MT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ce()).add(s);n.set(o,a)}}return n}async ja(e){const n=await x3(e,new MT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await T3(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function bR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.key=e}}class xR{constructor(e){this.key=e}}class TR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=dC(e),this.tu=new ga(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new DT,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),y=Eh(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?_!==E&&(r.track({type:3,doc:y}),R=!0):this.su(p,y)||(r.track({type:2,doc:y}),R=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),R=!0):p&&!y&&(r.track({type:1,doc:p}),R=!0,(l||u)&&(a=!0)),R&&(y?(o=o.add(y),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,_){const E=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:R})}};return E(y)-E(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new La(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new xR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new IR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return La.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ko="SyncEngine";class Q3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class J3{constructor(e){this.key=e,this.hu=!1}}class X3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ds(a=>cC(a),Th),this.Iu=new Map,this.Eu=new Set,this.du=new Be(K.comparator),this.Au=new Map,this.Ru=new y_,this.Vu={},this.mu=new Map,this.fu=Na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z3(t,e,n=!0){const r=hg(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ER(r,e,n,!0),i}async function eU(t,e){const n=hg(t);await ER(n,e,!0,!1)}async function ER(t,e,n,r){const i=await xc(t.localStore,cn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await L_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&dg(t.remoteStore,i),a}async function L_(t,e,n,r,i){t.pu=(f,p,y)=>async function(E,R,I,b){let T=R.view.ru(I);T.Cs&&(T=await fp(E.localStore,R.query,!1).then(({documents:x})=>R.view.ru(x,T)));const N=b&&b.targetChanges.get(R.targetId),z=b&&b.targetMismatches.get(R.targetId)!=null,B=R.view.applyChanges(T,E.isPrimaryClient,N,z);return p0(E,R.targetId,B.au),B.snapshot}(t,f,p,y);const s=await fp(t.localStore,e,!0),o=new TR(e,s.Qs),a=o.ru(s.documents),l=kh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);p0(t,n,u.au);const h=new Q3(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function tU(t,e,n){const r=Y(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Th(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Tc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ec(r.remoteStore,i.targetId),Sc(r,i.targetId)}).catch(To)):(Sc(r,i.targetId),await Tc(r.localStore,i.targetId,!0))}async function nU(t,e){const n=Y(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ec(n.remoteStore,r.targetId))}async function rU(t,e,n){const r=j_(t);try{const i=await function(o,a){const l=Y(o),u=De.now(),h=a.reduce((y,_)=>y.add(_.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Pn(),E=ce();return l.Ns.getEntries(y,h).next(R=>{_=R,_.forEach((I,b)=>{b.isValidDocument()||(E=E.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(R=>{f=R;const I=[];for(const b of a){const T=kF(b,f.get(b.key).overlayedDocument);T!=null&&I.push(new hs(b.key,T,Xk(T.value.mapValue),nt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,I,a)}).next(R=>{p=R;const I=R.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(y,R.batchId,I)})}).then(()=>({batchId:p.batchId,changes:fC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Be(ae)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await fs(r,i.changes),await zc(r.remoteStore)}catch(i){const s=$c(i,"Failed to persist write");n.reject(s)}}async function SR(t,e){const n=Y(t);try{const r=await b3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ee(o.hu,14607):i.removedDocuments.size>0&&(ee(o.hu,42227),o.hu=!1))}),await fs(n,r,e)}catch(r){await To(r)}}function VT(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Y(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&P_(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iU(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Be(K.comparator);o=o.insert(s,Ge.newNoDocument(s,ne.min()));const a=ce().add(s),l=new Ah(ne.min(),new Map,new Be(ae),o,a);await SR(r,l),r.du=r.du.remove(s),r.Au.delete(e),V_(r)}else await Tc(r.localStore,e,!1).then(()=>Sc(r,e,n)).catch(To)}async function sU(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await _3(n.localStore,e);M_(n,r,null),O_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fs(n,i)}catch(i){await To(i)}}async function oU(t,e,n){const r=Y(t);try{const i=await function(o,a){const l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ee(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);M_(r,e,n),O_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fs(r,i)}catch(i){await To(i)}}async function aU(t,e){const n=Y(t);Ao(n.remoteStore)||W(ko,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Y(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===co)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=$c(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function O_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function M_(t,e,n){const r=Y(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Sc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||AR(t,r)})}function AR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ec(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),V_(t))}function p0(t,e,n){for(const r of n)r instanceof IR?(t.Ru.addReference(r.key,e),lU(t,r)):r instanceof xR?(W(ko,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||AR(t,r.key)):J(19791,{wu:r})}function lU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(ko,"New document in limbo: "+n),t.Eu.add(r),V_(t))}function V_(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new J3(n)),t.du=t.du.insert(n,r),dg(t.remoteStore,new qi(cn(Vc(n.path)),r,"TargetPurposeLimboResolution",Cn.ce))}}async function fs(t,e,n){const r=Y(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=b_.As(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=Y(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,p=>L.forEach(p.Es,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>L.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!Eo(f))throw f;W(I_,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.Ms.get(p),_=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(p,E)}}}(r.localStore,s))}async function cU(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){W(ko,"User change. New user:",e.toKey());const r=await rR(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(M.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fs(n,r.Ls)}}function uU(t,e){const n=Y(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function dU(t,e){const n=Y(t),r=await fp(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&p0(n,e.targetId,i.au),i}async function hU(t,e){const n=Y(t);return aR(n.localStore,e).then(r=>fs(n,r))}async function fU(t,e,n,r){const i=Y(t),s=await function(a,l){const u=Y(a),h=Y(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await zc(i.remoteStore):n==="acknowledged"||n==="rejected"?(M_(i,e,r||null),O_(i,e),function(a,l){Y(Y(a).mutationQueue).ir(l)}(i.localStore,e)):J(6720,"Unknown batchState",{Su:n}),await fs(i,s)):W(ko,"Cannot apply mutation batch with id: "+e)}async function mU(t,e){const n=Y(t);if(hg(n),j_(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await jT(n,r.toArray());n.gu=!0,await f0(n.remoteStore,!0);for(const s of i)dg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Sc(n,o),Tc(n.localStore,o,!0))),Ec(n.remoteStore,o)}),await i,await jT(n,r),function(o){const a=Y(o);a.Au.forEach((l,u)=>{Ec(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new Be(K.comparator)}(n),n.gu=!1,await f0(n.remoteStore,!1)}}async function jT(t,e,n){const r=Y(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await xc(r.localStore,cn(l[0]));for(const u of l){const h=r.Tu.get(u),f=await dU(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await oR(r.localStore,o);a=await xc(r.localStore,u),await L_(r,kR(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function kR(t){return oC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function pU(t){return function(n){return Y(Y(n).persistence).Ts()}(Y(t).localStore)}async function gU(t,e,n,r){const i=Y(t);if(i.gu)return void W(ko,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await aR(i.localStore,uC(s[0])),a=Ah.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ht.EMPTY_BYTE_STRING);await fs(i,o,a);break}case"rejected":await Tc(i.localStore,e,!0),Sc(i,e,r);break;default:J(64155,n)}}async function yU(t,e,n){const r=hg(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){W(ko,"Adding an already active target "+i);continue}const s=await oR(r.localStore,i),o=await xc(r.localStore,s);await L_(r,kR(s),o.targetId,!1,o.resumeToken),dg(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await Tc(r.localStore,i,!1).then(()=>{Ec(r.remoteStore,i),Sc(r,i)}).catch(To)}}function hg(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iU.bind(null,e),e.Pu.H_=K3.bind(null,e.eventManager),e.Pu.yu=Y3.bind(null,e.eventManager),e}function j_(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oU.bind(null,e),e}function wU(t,e,n){const r=Y(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(y,_){const E=Y(y),R=It(_.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",I=>E.Ii.getBundleMetadata(I,_.id)).then(I=>!!I&&I.createTime.compareTo(R)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(bR(l));const u=new D_(l,o.serializer);let h=await o.bu();for(;h;){const p=await u.Ga(h);p&&a._updateProgress(p),h=await o.bu()}const f=await u.ja(s.localStore);return await fs(s,f.Ha,void 0),await function(y,_){const E=Y(y);return E.persistence.runTransaction("Save bundle","readwrite",R=>E.Ii.saveBundleMetadata(R,_))}(s.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return kr(ko,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$a(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}Cu(e){return new w_(ug.mi,this.serializer)}Du(e){return new hR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ac.provider={build:()=>new Ac};class F_ extends Ac{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ee(this.persistence.referenceDelegate instanceof hp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new w_(r=>hp.mi(r,n),this.serializer)}}class U_ extends Ac{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await j_(this.xu.syncEngine),await zc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return nR(this.persistence,new tR,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,n)}Mu(e,n){const r=new D5(n,this.persistence);return new N5(e.asyncQueue,r)}Cu(e){const n=__(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new v_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,fR(),fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hR}}class CR extends U_{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof ky&&(this.sharedClientState.syncEngine={Co:fU.bind(null,n),vo:gU.bind(null,n),Fo:yU.bind(null,n),Ts:pU.bind(null,n),Do:hU.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await mU(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=fR();if(!ky.v(n))throw new $(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=__(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ky(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class wo{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cU.bind(null,this.syncEngine),await f0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q3}()}createDatastore(e){const n=$a(e.databaseInfo.databaseId),r=function(s){return new C3(s)}(e.databaseInfo);return function(s,o,a,l){return new D3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new O3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>VT(this.syncEngine,n,0),function(){return RT.v()?new RT:new E3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new X3(i,s,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Y(i);W(Da,"RemoteStore shutting down."),s.Ea.add(5),await Uc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wo.provider={build:()=>new wo};function FT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new $t,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new _R(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new _R(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new $(M.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Y(i),a={documents:s.map(f=>Zd(o.serializer,f))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),u=new Map;l.forEach(f=>{const p=VF(o.serializer,f);u.set(p.key.toString(),p)});const h=[];return s.forEach(f=>{const p=u.get(f.toString());ee(!!p,55234,{key:f}),h.push(p)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=K.fromPath(r);this.mutations.push(new c_(i,this.precondition(i)))}),await async function(r,i){const s=Y(r),o={writes:i.map(a=>eh(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J(50498,{Gu:e.constructor.name});n=ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ne.min())?nt.exists(!1):nt.updateTime(n):nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ne.min()))throw new $(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(n)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new T_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new bU(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!bh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!TC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo="FirestoreClient";class xU{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=Yv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(vo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(vo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$c(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ry(t,e){t.asyncQueue.verifyOperationInProgress(),W(vo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function UT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z_(t);W(vo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>NT(e.remoteStore,i)),t._onlineComponents=e}async function z_(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(vo,"Using user provided OfflineComponentProvider");try{await Ry(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await Ry(t,new Ac)}}else W(vo,"Using default OfflineComponentProvider"),await Ry(t,new F_(void 0));return t._offlineComponents}async function mg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(vo,"Using user provided OnlineComponentProvider"),await UT(t,t._uninitializedComponentsProvider._online)):(W(vo,"Using default OnlineComponentProvider"),await UT(t,new wo))),t._onlineComponents}function RR(t){return z_(t).then(e=>e.persistence)}function Wc(t){return z_(t).then(e=>e.localStore)}function PR(t){return mg(t).then(e=>e.remoteStore)}function B_(t){return mg(t).then(e=>e.syncEngine)}function NR(t){return mg(t).then(e=>e.datastore)}async function kc(t){const e=await mg(t),n=e.eventManager;return n.onListen=Z3.bind(null,e.syncEngine),n.onUnlisten=tU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nU.bind(null,e.syncEngine),n}function TU(t){return t.asyncQueue.enqueue(async()=>{const e=await RR(t),n=await PR(t);return e.setNetworkEnabled(!0),function(i){const s=Y(i);return s.Ea.delete(0),Ch(s)}(n)})}function EU(t){return t.asyncQueue.enqueue(async()=>{const e=await RR(t),n=await PR(t);return e.setNetworkEnabled(!1),async function(i){const s=Y(i);s.Ea.add(0),await Uc(s),s.Ra.set("Offline")}(n)})}function SU(t,e){const n=new $t;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,h){const f=Y(u);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new $(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=$c(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Wc(t),e,n)),n.promise}function DR(t,e,n={}){const r=new $t;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new fg({next:p=>{h.Nu(),o.enqueueAndForget(()=>R_(s,f));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?u.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new N_(Vc(a.path),h,{includeMetadataChanges:!0,qa:!0});return C_(s,f)}(await kc(t),t.asyncQueue,e,n,r)),r.promise}function AU(t,e){const n=new $t;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await fp(i,s,!0),l=new TR(s,a.Qs),u=l.ru(a.documents),h=l.applyChanges(u,!1);o.resolve(h.snapshot)}catch(a){const l=$c(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Wc(t),e,n)),n.promise}function LR(t,e,n={}){const r=new $t;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new fg({next:p=>{h.Nu(),o.enqueueAndForget(()=>R_(s,f)),p.fromCache&&l.source==="server"?u.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new N_(a,h,{includeMetadataChanges:!0,qa:!0});return C_(s,f)}(await kc(t),t.asyncQueue,e,n,r)),r.promise}function kU(t,e,n){const r=new $t;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await NR(t);r.resolve(async function(o,a,l){var E;const u=Y(o),{request:h,gt:f,parent:p}=OC(u.serializer,aC(a),l);u.connection.$o||delete h.parent;const y=(await u.Ho("RunAggregationQuery",u.serializer.databaseId,p,h,1)).filter(R=>!!R.result);ee(y.length===1,64727);const _=(E=y[0].result)==null?void 0:E.aggregateFields;return Object.keys(_).reduce((R,I)=>(R[f[I]]=_[I],R),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function CU(t,e){const n=new fg(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).Ca.add(s),s.next()}(await kc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).Ca.delete(s)}(await kc(t),n))}}function RU(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?SC().encode(o):o,function(h,f){return new vU(h,f)}(function(h,f){if(h instanceof Uint8Array)return FT(h,f);if(h instanceof ArrayBuffer)return FT(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,$a(e));t.asyncQueue.enqueueAndForget(async()=>{wU(await B_(t),i,r)})}function PU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Y(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ii.getNamedQuery(o,i))}(await Wc(t),e))}function OR(t,e){return function(r,i){return new _U(r,i)}(t,e)}function NU(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=Y(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(u=>function(f,p,y,_,E){f=[...f],p=[...p],f.sort(y),p.sort(y);const R=f.length,I=p.length;let b=0,T=0;for(;b<I&&T<R;){const N=y(f[T],p[b]);N<0?E(f[T++]):N>0?_(p[b++]):(b++,T++)}for(;b<I;)_(p[b++]);for(;T<R;)E(f[T++])}(u,i,k5,h=>{a.push(o.addFieldIndex(l,h))},h=>{a.push(o.deleteFieldIndex(l,h))})).next(()=>L.waitFor(a)))}(await Wc(t),e))}function DU(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){Y(r).Fs.Vs=i}(await Wc(t),e))}function LU(t){return t.asyncQueue.enqueue(async()=>function(n){const r=Y(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await Wc(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firestore.googleapis.com",BT=!0;class $T{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VR,this.ssl=BT}else this.host=e.host,this.ssl=e.ssl??BT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KC)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new y5;switch(r.type){case"firstParty":return new b5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zT.get(n);r&&(W("ComponentProvider","Removing Datastore"),zT.delete(n),r.terminate())}(this),Promise.resolve()}}function OU(t,e,n,r={}){var u;t=me(t,Rh);const i=as(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Vp(`https://${a}`),_v("Firestore",!0)),s.host!==VR&&s.host!==a&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!Er(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ut.MOCK_USER;else{h=zS(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ut(p)}t._authCredentials=new w5(new Ik(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wt(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ba(n,Ve._jsonSchema))return new Ve(e,r||null,new K(ue.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ct("string",Ve._jsonSchemaVersion),referencePath:Ct("string")};class xi extends Wt{constructor(e,n,r){super(e,n,Vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new K(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Ph(t,e,...n){if(t=X(t),Qv("collection","path",e),t instanceof Rh){const r=ue.fromString(e,...n);return Px(r),new xi(t,null,r)}{if(!(t instanceof Ve||t instanceof xi))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return Px(r),new xi(t.firestore,null,r)}}function R8(t,e){if(t=me(t,Rh),Qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wt(t,null,function(r){return new us(ue.emptyPath(),r)}(e))}function br(t,e,...n){if(t=X(t),arguments.length===1&&(e=Yv.newId()),Qv("doc","path",e),t instanceof Rh){const r=ue.fromString(e,...n);return Rx(r),new Ve(t,null,new K(r))}{if(!(t instanceof Ve||t instanceof xi))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return Rx(r),new Ve(t.firestore,t instanceof xi?t.converter:null,new K(r))}}function P8(t,e){return t=X(t),e=X(e),(t instanceof Ve||t instanceof xi)&&(e instanceof Ve||e instanceof xi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function jR(t,e){return t=X(t),e=X(e),t instanceof Wt&&e instanceof Wt&&t.firestore===e.firestore&&Th(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="AsyncQueue";class HT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T_(this,"async_queue_retry"),this._c=()=>{const r=fm();r&&W(WT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new $t;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Eo(e))throw e;W(WT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",GT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=k_.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&J(47125,{Pc:GT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function GT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class MU{constructor(){this._progressObserver={},this._taskCompletionResolver=new $t,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=-1;class Fe extends Rh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new HT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HT(e),this._firestoreClient=void 0,await e}}}function D8(t,e,n){n||(n=Yd);const r=Yr(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Er(s,e))return i;throw new $(M.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new $(M.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KC)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&as(e.host)&&Vp(e.host),r.initialize({options:e,instanceIdentifier:n})}function VU(t,e){const n=typeof t=="object"?t:mh(),r=typeof t=="string"?t:e||Yd,i=Yr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jS("firestore");s&&OU(i,...s)}return i}function at(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FR(t),t._firestoreClient}function FR(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new aF(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function L8(t,e){kr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return UR(t,wo.provider,{build:r=>new U_(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function O8(t){kr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();UR(t,wo.provider,{build:n=>new CR(n,e.cacheSizeBytes)})}function UR(t,e,n){if((t=me(t,Fe))._firestoreClient||t._terminated)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new $(M.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},FR(t)}function M8(t){if(t._initialized&&!t._terminated)throw new $(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $t;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!bi.v())return Promise.resolve();const i=r+eR;await bi.delete(i)}(__(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function V8(t){return function(n){const r=new $t;return n.asyncQueue.enqueueAndForget(async()=>aU(await B_(n),r)),r.promise}(at(t=me(t,Fe)))}function j8(t){return TU(at(t=me(t,Fe)))}function F8(t){return EU(at(t=me(t,Fe)))}function U8(t){return OO(t.app,"firestore",t._databaseId.database),t._delete()}function qT(t,e){const n=at(t=me(t,Fe)),r=new MU;return RU(n,t._databaseId,e,r),r}function jU(t,e){return PU(at(t=me(t,Fe)),e).then(n=>n?new Wt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class FU{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(ht.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yn(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ba(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ct("string",Yn._jsonSchemaVersion),bytes:Ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function z8(){return new Wa(Gw)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(Ba(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:Ct("string",Ti._jsonSchemaVersion),latitude:Ct("number"),longitude:Ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ba(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new qr(e.vectorValues);throw new $(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Ct("string",qr._jsonSchemaVersion),vectorValues:Ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=/^__.*__$/;class zU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new jc(e,this.data,n,this.fieldTransforms)}}class zR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class pg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(BR(this.Ac)&&UU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$a(e)}Cc(e,n,r,i=!1){return new pg({Ac:e,methodName:n,Dc:r,path:tt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ga(t){const e=t._freezeSettings(),n=$a(t._databaseId);return new BU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gg(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Y_("Data must be an object, but it was:",o,r);const a=HR(r,o);let l,u;if(s.merge)l=new Rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=nh(e,f,n);if(!o.contains(p))throw new $(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);qR(h,p)||h.push(p)}l=new Rn(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new zU(new Kt(a),l,u)}class Nh extends Ha{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nh}}function $R(t,e,n){return new pg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $_ extends Ha{_toFieldTransform(e){return new Sh(e.path,new _c)}isEqual(e){return e instanceof $_}}class W_ extends Ha{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=$R(this,e,!0),r=this.vc.map(s=>qa(s,n)),i=new ka(r);return new Sh(e.path,i)}isEqual(e){return e instanceof W_&&Er(this.vc,e.vc)}}class H_ extends Ha{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=$R(this,e,!0),r=this.vc.map(s=>qa(s,n)),i=new Ca(r);return new Sh(e.path,i)}isEqual(e){return e instanceof H_&&Er(this.vc,e.vc)}}class G_ extends Ha{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new bc(e.serializer,gC(e.serializer,this.Fc));return new Sh(e.path,n)}isEqual(e){return e instanceof G_&&this.Fc===e.Fc}}function q_(t,e,n,r){const i=t.Cc(1,e,n);Y_("Data must be an object, but it was:",i,r);const s=[],o=Kt.empty();So(r,(l,u)=>{const h=yg(e,l,n);u=X(u);const f=i.yc(h);if(u instanceof Nh)s.push(h);else{const p=qa(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Rn(s);return new zR(o,a,i.fieldTransforms)}function K_(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[nh(e,r,n)],l=[i];if(s.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(nh(e,s[p])),l.push(s[p+1]);const u=[],h=Kt.empty();for(let p=a.length-1;p>=0;--p)if(!qR(u,a[p])){const y=a[p];let _=l[p];_=X(_);const E=o.yc(y);if(_ instanceof Nh)u.push(y);else{const R=qa(_,E);R!=null&&(u.push(y),h.set(y,R))}}const f=new Rn(u);return new zR(h,f,o.fieldTransforms)}function WR(t,e,n,r=!1){return qa(n,t.Cc(r?4:3,e))}function qa(t,e){if(GR(t=X(t)))return Y_("Unsupported field value:",e,t),HR(t,e);if(t instanceof Ha)return function(r,i){if(!BR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=qa(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=X(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=De.fromDate(r);return{timestampValue:Ic(i.serializer,s)}}if(r instanceof De){const s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,s)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:CC(i.serializer,r._byteString)};if(r instanceof Ve){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:m_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qr)return function(o,a){return{mapValue:{fields:{[r_]:{stringValue:i_},[yc]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return l_(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Yp(r)}`)}(t,e)}function HR(t,e){const n={};return $k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,(r,i)=>{const s=qa(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function GR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Ti||t instanceof Yn||t instanceof Ve||t instanceof Ha||t instanceof qr)}function Y_(t,e,n){if(!GR(n)||!Tk(n)){const r=Yp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function nh(t,e,n){if((e=X(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return yg(t,e);throw yp("Field path arguments must be of type string or ",t,!1,void 0,n)}const $U=new RegExp("[~\\*/\\[\\]]");function yg(t,e,n){if(e.search($U)>=0)throw yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wa(...e.split("."))._internalPath}catch{throw yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(M.INVALID_ARGUMENT,a+t+l)}function qR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WU extends rh{data(){return super.data()}}function wg(t,e){return typeof e=="string"?yg(t,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q_{}class Dh extends Q_{}function mm(t,e,...n){let r=[];e instanceof Q_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Hc).length,a=s.filter(l=>l instanceof Lh).length;if(o>1||o>0&&a>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Lh extends Dh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Lh(e,n,r)}_apply(e){const n=this._parse(e);return QR(e._query,n),new Wt(e.firestore,e.converter,r0(e._query,n))}_parse(e){const n=Ga(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){YT(f,h);const _=[];for(const E of f)_.push(KT(l,s,E));p={arrayValue:{values:_}}}else p=KT(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||YT(f,h),p=WR(a,o,f,h==="in"||h==="not-in");return we.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pm(t,e,n){const r=e,i=wg("where",t);return Lh._create(i,r,n)}class Hc extends Q_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)QR(o,l),o=r0(o,l)}(e._query,n),new Wt(e.firestore,e.converter,r0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function B8(...t){return t.forEach(e=>JR("or",e)),Hc._create("or",t)}function $8(...t){return t.forEach(e=>JR("and",e)),Hc._create("and",t)}class J_ extends Dh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new J_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xd(s,o)}(e._query,this._field,this._direction);return new Wt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new us(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function gm(t,e="asc"){const n=e,r=wg("orderBy",t);return J_._create(r,n)}class vg extends Dh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vg(e,n,r)}_apply(e){return new Wt(e.firestore,e.converter,lp(e._query,this._limit,this._limitType))}}function Py(t){return Ek("limit",t),vg._create("limit",t,"F")}function W8(t){return Ek("limitToLast",t),vg._create("limitToLast",t,"L")}class _g extends Dh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new _g(e,n,r)}_apply(e){const n=YR(e,this.type,this._docOrFields,this._inclusive);return new Wt(e.firestore,e.converter,function(i,s){return new us(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function H8(...t){return _g._create("startAt",t,!0)}function HU(...t){return _g._create("startAfter",t,!1)}class bg extends Dh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new bg(e,n,r)}_apply(e){const n=YR(e,this.type,this._docOrFields,this._inclusive);return new Wt(e.firestore,e.converter,function(i,s){return new us(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function G8(...t){return bg._create("endBefore",t,!1)}function q8(...t){return bg._create("endAt",t,!0)}function YR(t,e,n,r){if(n[0]=X(n[0]),n[0]instanceof rh)return function(s,o,a,l,u){if(!l)throw new $(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of Xl(s))if(f.field.isKeyField())h.push(Sa(o,l.key));else{const p=l.data.field(f.field);if(eg(p))throw new $(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=f.field.canonicalString();throw new $(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(p)}return new go(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ga(t.firestore);return function(o,a,l,u,h,f){const p=o.explicitOrderBy;if(h.length>p.length)throw new $(M.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let _=0;_<h.length;_++){const E=h[_];if(p[_].field.isKeyField()){if(typeof E!="string")throw new $(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof E}`);if(!o_(o)&&E.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${E}' contains a slash.`);const R=o.path.child(ue.fromString(E));if(!K.isDocumentKey(R))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const I=new K(R);y.push(Sa(a,I))}else{const R=WR(l,u,E);y.push(R)}}return new go(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function KT(t,e,n){if(typeof(n=X(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!K.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sa(t,new K(r))}if(n instanceof Ve)return Sa(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(n)}.`)}function YT(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function JR(t,e){if(!(e instanceof Lh||e instanceof Hc))throw new $(M.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class XR{convertValue(e,n="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return So(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[yc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Xe(o.doubleValue));return new qr(n)}convertGeoPoint(e){return new Ti(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kd(e));default:return null}}convertTimestamp(e){const n=is(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ee(FC(r),9688,{name:e});const i=new Ea(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||bt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class X_ extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(t){return new th("sum",nh("sum",t))}function Y8(t){return new th("avg",nh("average",t))}function GU(){return new th("count")}function Q8(t,e){var n,r;return t instanceof th&&e instanceof th&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((r=e._internalFieldPath)==null?void 0:r.canonicalString())}function J8(t,e){return jR(t.query,e.query)&&Er(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="NOT SUPPORTED";class Ys{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class er extends rh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=er._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function X8(t,e,n){if(Ba(e,er._jsonSchema)){if(e.bundle===ZR)throw new $(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=$a(t._databaseId),i=OR(e.bundle,r),s=i.Wu(),o=new D_(i.getMetadata(),r);for(const h of s)o.Ga(h);const a=o.documents;if(a.length!==1)throw new $(M.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=sg(r,a[0].document),u=new K(ue.fromString(e.bundleName));return new er(t,new X_(t),u,l,new Ys(!1,!1),n||null)}}er._jsonSchemaVersion="firestore/documentSnapshot/1.0",er._jsonSchema={type:Ct("string",er._jsonSchemaVersion),bundleSource:Ct("string","DocumentSnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class ym extends er{data(e={}){return super.data(e)}}class tr{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ym(this._firestore,this._userDataWriter,r.key,r,new Ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:qU(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z8(t,e,n){if(Ba(e,tr._jsonSchema)){if(e.bundle===ZR)throw new $(M.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=$a(t._databaseId),i=OR(e.bundle,r),s=i.Wu(),o=new D_(i.getMetadata(),r);for(const p of s)o.Ga(p);if(o.queries.length!==1)throw new $(M.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=ag(o.queries[0].bundledQuery),l=o.documents;let u=new ga;l.map(p=>{const y=sg(r,p.document);u=u.add(y)});const h=La.fromInitialDocuments(a,u,ce(),!1,!1),f=new Wt(t,n||null,a);return new tr(t,new X_(t),f,h)}}function qU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}function eW(t,e){return t instanceof er&&e instanceof er?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof tr&&e instanceof tr&&t._firestore===e._firestore&&jR(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){t=me(t,Ve);const e=me(t.firestore,Fe);return DR(at(e),t._key).then(n=>Z_(e,t,n))}tr._jsonSchemaVersion="firestore/querySnapshot/1.0",tr._jsonSchema={type:Ct("string",tr._jsonSchemaVersion),bundleSource:Ct("string","QuerySnapshot"),bundleName:Ct("string"),bundle:Ct("string")};class Co extends XR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function tW(t){t=me(t,Ve);const e=me(t.firestore,Fe),n=at(e),r=new Co(e);return SU(n,t._key).then(i=>new er(e,r,t._key,i,new Ys(i!==null&&i.hasLocalMutations,!0),t.converter))}function nW(t){t=me(t,Ve);const e=me(t.firestore,Fe);return DR(at(e),t._key,{source:"server"}).then(n=>Z_(e,t,n))}function g0(t){t=me(t,Wt);const e=me(t.firestore,Fe),n=at(e),r=new Co(e);return KR(t._query),LR(n,t._query).then(i=>new tr(e,r,t,i))}function rW(t){t=me(t,Wt);const e=me(t.firestore,Fe),n=at(e),r=new Co(e);return AU(n,t._query).then(i=>new tr(e,r,t,i))}function iW(t){t=me(t,Wt);const e=me(t.firestore,Fe),n=at(e),r=new Co(e);return LR(n,t._query,{source:"server"}).then(i=>new tr(e,r,t,i))}function Oh(t,e,n){t=me(t,Ve);const r=me(t.firestore,Fe),i=Ig(t.converter,e,n);return Mh(r,[gg(Ga(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nt.none())])}function sW(t,e,n,...r){t=me(t,Ve);const i=me(t.firestore,Fe),s=Ga(i);let o;return o=typeof(e=X(e))=="string"||e instanceof Wa?K_(s,"updateDoc",t._key,e,n,r):q_(s,"updateDoc",t._key,e),Mh(i,[o.toMutation(t._key,nt.exists(!0))])}function oW(t){return Mh(me(t.firestore,Fe),[new Fc(t._key,nt.none())])}function aW(t,e){const n=me(t.firestore,Fe),r=br(t),i=Ig(t.converter,e);return Mh(n,[gg(Ga(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nt.exists(!1))]).then(()=>r)}function ec(t,...e){var l,u,h;t=X(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zl(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Zl(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,a;if(t instanceof Ve)o=me(t.firestore,Fe),a=Vc(t._key.path),s={next:f=>{e[r]&&e[r](Z_(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=me(t,Wt);o=me(f.firestore,Fe),a=f._query;const p=new Co(o);s={next:y=>{e[r]&&e[r](new tr(o,p,f,y))},error:e[r+1],complete:e[r+2]},KR(t._query)}return function(p,y,_,E){const R=new fg(E),I=new N_(y,R,_);return p.asyncQueue.enqueueAndForget(async()=>C_(await kc(p),I)),()=>{R.Nu(),p.asyncQueue.enqueueAndForget(async()=>R_(await kc(p),I))}}(at(o),a,i,s)}function lW(t,e,...n){const r=X(t),i=function(l){const u={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const f of h){if(!(f in l)){u.error=`snapshotJson missing required field: ${f}`;break}const p=l[f];if(typeof p!="string"){u.error=`snapshotJson field '${f}' must be a string.`;break}if(p.length===0){u.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?u.bundle=p:f==="bundleName"?u.bundleName=p:f==="bundleSource"&&(u.bundleSource=p)}return u}(e);if(i.error)throw new $(M.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||Zl(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Zl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let _,E=!1;return qT(u,h.bundle).then(()=>jU(u,h.bundleName)).then(I=>{I&&!E&&(y&&I.withConverter(y),_=ec(I,f||{},p))}).catch(I=>(p.error&&p.error(I),()=>{})),()=>{E||(E=!0,_&&_())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Zl(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(u,h,f,p,y){let _,E=!1;return qT(u,h.bundle).then(()=>{if(!E){const I=new Ve(u,y||null,K.fromPath(h.bundleName));_=ec(I,f||{},p)}}).catch(I=>(p.error&&p.error(I),()=>{})),()=>{E||(E=!0,_&&_())}}(r,i,s,a,n[o])}throw new $(M.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function cW(t,e){return CU(at(t=me(t,Fe)),Zl(e)?e:{next:e})}function Mh(t,e){return function(r,i){const s=new $t;return r.asyncQueue.enqueueAndForget(async()=>rU(await B_(r),i,s)),s.promise}(at(t),e)}function Z_(t,e,n){const r=n.docs.get(e._key),i=new Co(t);return new er(t,i,e._key,r,new Ys(n.hasPendingWrites,n.fromCache),e.converter)}function uW(t){return KU(t,{count:GU()})}function KU(t,e){const n=me(t.firestore,Fe),r=at(n),i=Bk(e,(s,o)=>new xC(o,s.aggregateType,s._internalFieldPath));return kU(r,t._query,i).then(s=>function(a,l,u){const h=new Co(a);return new FU(l,h,u)}(n,t,s))}class YU{constructor(e){this.kind="memory",this._onlineComponentProvider=wo.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new F_(void 0)}}toJSON(){return{kind:this.kind}}}class QU{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=t6(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class JU{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ac.provider}toJSON(){return{kind:this.kind}}}class XU{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new F_(e)}}toJSON(){return{kind:this.kind}}}function dW(){return new JU}function hW(t){return new XU(t==null?void 0:t.cacheSizeBytes)}function fW(t){return new YU(t)}function mW(t){return new QU(t)}class ZU{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wo.provider,this._offlineComponentProvider={build:n=>new U_(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class e6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wo.provider,this._offlineComponentProvider={build:n=>new CR(n,e==null?void 0:e.cacheSizeBytes)}}}function t6(t){return new ZU(t==null?void 0:t.forceOwnership)}function pW(){return new e6}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ga(e)}set(e,n,r){this._verifyNotCommitted();const i=Qs(e,this._firestore),s=Ig(i.converter,n,r),o=gg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Qs(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof Wa?K_(this._dataReader,"WriteBatch.update",s._key,n,r,i):q_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Qs(e,this._firestore);return this._mutations=this._mutations.concat(new Fc(n._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qs(t,e){if((t=X(t)).firestore!==e)throw new $(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ga(e)}get(e){const n=Qs(e,this._firestore),r=new X_(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return J(24041);const s=i[0];if(s.isFoundDocument())return new rh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new rh(this._firestore,r,n._key,null,n.converter);throw J(18433,{doc:s})})}set(e,n,r){const i=Qs(e,this._firestore),s=Ig(i.converter,n,r),o=gg(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Qs(e,this._firestore);let o;return o=typeof(n=X(n))=="string"||n instanceof Wa?K_(this._dataReader,"Transaction.update",s._key,n,r,i):q_(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Qs(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6 extends i6{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Qs(e,this._firestore),r=new Co(this._firestore);return super.get(e).then(i=>new er(this._firestore,r,n._key,i._document,new Ys(!1,!1),n.converter))}}function gW(t,e,n){t=me(t,Fe);const r={...n6,...n};return function(s){if(s.maxAttempts<1)throw new $(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new $t;return s.asyncQueue.enqueueAndForget(async()=>{const u=await NR(s);new IU(s.asyncQueue,u,a,o,l).ju()}),l.promise}(at(t),i=>e(new s6(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yW(){return new Nh("deleteField")}function wW(){return new $_("serverTimestamp")}function vW(...t){return new W_("arrayUnion",t)}function _W(...t){return new H_("arrayRemove",t)}function bW(t){return new G_("increment",t)}function IW(t){return new qr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t){return at(t=me(t,Fe)),new r6(t,e=>Mh(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t,e){const n=at(t=me(t,Fe));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return kr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(u){try{return JSON.parse(u)}catch(h){throw new $(M.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const u=JT(l,"collectionGroup"),h=[];if(Array.isArray(l.fields))for(const f of l.fields){const p=yg("setIndexConfiguration",JT(f,"fieldPath"));f.arrayConfig==="CONTAINS"?h.push(new ma(p,2)):f.order==="ASCENDING"?h.push(new ma(p,0)):f.order==="DESCENDING"&&h.push(new ma(p,1))}a.push(new dc(dc.UNKNOWN_ID,u,h,hc.empty()))}return a}(e);return NU(n,r)}function JT(t,e){if(typeof t[e]!="string")throw new $(M.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function EW(t){var i;t=me(t,Fe);const e=XT.get(t);if(e)return e;if(((i=at(t)._uninitializedComponentsProvider)==null?void 0:i._offline.kind)!=="persistent")return null;const r=new o6(t);return XT.set(t,r),r}function SW(t){eP(t,!0)}function AW(t){eP(t,!1)}function kW(t){LU(at(t._firestore)).then(e=>W("deleting all persistent cache indexes succeeded")).catch(e=>kr("deleting all persistent cache indexes failed",e))}function eP(t,e){DU(at(t._firestore),e).then(n=>W(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>kr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const XT=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(t){var r;const e=at(me(t.firestore,Fe)),n=(r=e._onlineComponents)==null?void 0:r.datastore.serializer;return n===void 0?null:og(n,cn(t._query)).ft}function RW(t,e){var s;const n=Bk(e,(o,a)=>new xC(a,o.aggregateType,o._internalFieldPath)),r=at(me(t.firestore,Fe)),i=(s=r._onlineComponents)==null?void 0:s.datastore.serializer;return i===void 0?null:OC(i,aC(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return eb.instance.onExistenceFilterMismatch(e)}}class eb{constructor(){this.Mc=new Map}static get instance(){return Lf||(Lf=new eb,function(n){if(yd)throw new Error("a TestingHooksSpi instance is already set");yd=n}(Lf)),Lf}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Mc;return r.set(n,e),()=>r.delete(n)}}let Lf=null;(function(e,n=!0){(function(i){Mc=i})(Fa),Sr(new rr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Fe(new v5(r.getProvider("auth-internal")),new I5(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),an(kx,Cx,e),an(kx,Cx,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebasestorage.googleapis.com",nP="storageBucket",a6=2*60*1e3,l6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends ar{constructor(e,n,r=0){super(Ny(e),`Firebase Storage: ${n} (${Ny(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ny(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function Ny(t){return"storage/"+t}function tb(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(ft.UNKNOWN,t)}function c6(t){return new pt(ft.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function u6(t){return new pt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(ft.UNAUTHENTICATED,t)}function h6(){return new pt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function f6(t){return new pt(ft.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function m6(){return new pt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p6(){return new pt(ft.CANCELED,"User canceled the upload/download.")}function g6(t){return new pt(ft.INVALID_URL,"Invalid URL '"+t+"'.")}function y6(t){return new pt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function w6(){return new pt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nP+"' property when initializing the app?")}function v6(){return new pt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _6(){return new pt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function b6(t){return new pt(ft.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function y0(t){return new pt(ft.INVALID_ARGUMENT,t)}function rP(){return new pt(ft.APP_DELETED,"The Firebase app was deleted.")}function I6(t){return new pt(ft.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new pt(ft.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vu(t){throw new pt(ft.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw y6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),_={bucket:1,path:3},E=n===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",I=new RegExp(`^https?://${E}/${i}/${R}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:y,indices:_,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<T.length;N++){const z=T[N],B=z.regex.exec(e);if(B){const x=B[z.indices.bucket];let w=B[z.indices.path];w||(w=""),r=new Jn(x,w),z.postModify(r);break}}if(r==null)throw g6(e);return r}}class x6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...R){u||(u=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,t(y,l())},R)}function p(){s&&clearTimeout(s)}function y(R,...I){if(u){p();return}if(R){p(),h.call(null,R,...I);return}if(l()||o){p(),h.call(null,R,...I);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,f(T)}let _=!1;function E(R){_||(_=!0,p(),!u&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function E6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){return t!==void 0}function A6(t){return typeof t=="object"&&!Array.isArray(t)}function nb(t){return typeof t=="string"||t instanceof String}function ZT(t){return rb()&&t instanceof Blob}function rb(){return typeof Blob<"u"}function eE(t,e,n,r){if(r<e)throw y0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw y0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function iP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ya;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ya||(ya={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Of(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ya.NO_ERROR,l=s.getStatus();if(!a||k6(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===ya.ABORT;r(!1,new Of(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Of(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());S6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=tb();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?rP():p6();o(l)}else{const l=m6();o(l)}};this.canceled_?n(!1,new Of(!1,null,!0)):this.backoffId_=T6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Of{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function R6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function P6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function D6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function L6(t,e,n,r,i,s,o=!0,a=!1){const l=iP(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return N6(h,e),R6(h,n),P6(h,s),D6(h,r),new C6(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function M6(...t){const e=O6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rb())return new Blob(t);throw new pt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function V6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){if(typeof atob>"u")throw b6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dy{constructor(e,n){this.data=e,this.contentType=n||null}}function F6(t,e){switch(t){case wi.RAW:return new Dy(sP(e));case wi.BASE64:case wi.BASE64URL:return new Dy(oP(t,e));case wi.DATA_URL:return new Dy(z6(e),B6(e))}throw tb()}function sP(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function U6(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(wi.DATA_URL,"Malformed data URL.")}return sP(e)}function oP(t,e){switch(t){case wi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=j6(e)}catch(i){throw i.message.includes("polyfill")?i:vd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class aP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vd(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function z6(t){const e=new aP(t);return e.base64?oP(wi.BASE64,e.rest):U6(e.rest)}function B6(t){return new aP(t).contentType}function $6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){let r=0,i="";ZT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ZT(this.data_)){const r=this.data_,i=V6(r,e,n);return i===null?null:new Hs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hs(r,!0)}}static getBlob(...e){if(rb()){const n=e.map(r=>r instanceof Hs?r.data_:r);return new Hs(M6.apply(null,n))}else{const n=e.map(o=>nb(o)?F6(wi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Hs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t){let e;try{e=JSON.parse(t)}catch{return null}return A6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function H6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t,e){return e}class yn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||G6}}let Mf=null;function q6(t){return!nb(t)||t.length<2?t:cP(t)}function uP(){if(Mf)return Mf;const t=[];t.push(new yn("bucket")),t.push(new yn("generation")),t.push(new yn("metageneration")),t.push(new yn("name","fullPath",!0));function e(s,o){return q6(o)}const n=new yn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new yn("size");return i.xform=r,t.push(i),t.push(new yn("timeCreated")),t.push(new yn("updated")),t.push(new yn("md5Hash",null,!0)),t.push(new yn("cacheControl",null,!0)),t.push(new yn("contentDisposition",null,!0)),t.push(new yn("contentEncoding",null,!0)),t.push(new yn("contentLanguage",null,!0)),t.push(new yn("contentType",null,!0)),t.push(new yn("metadata","customMetadata",!0)),Mf=t,Mf}function K6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Jn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Y6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return K6(r,t),r}function dP(t,e,n){const r=lP(e);return r===null?null:Y6(t,r,n)}function Q6(t,e,n,r){const i=lP(e);if(i===null||!nb(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),y=ib(p,n,r),_=iP({alt:"media",token:u});return y+_})[0]}function J6(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class hP{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){if(!t)throw tb()}function X6(t,e){function n(r,i){const s=dP(t,i,e);return fP(s!==null),s}return n}function Z6(t,e){function n(r,i){const s=dP(t,i,e);return fP(s!==null),Q6(s,i,t.host,t._protocol)}return n}function mP(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=h6():i=d6():n.getStatus()===402?i=u6(t.bucket):n.getStatus()===403?i=f6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ez(t){const e=mP(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=c6(t.path)),s.serverResponse=i.serverResponse,s}return n}function tz(t,e,n){const r=e.fullServerUrl(),i=ib(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new hP(i,s,Z6(t,n),o);return a.errorHandler=ez(e),a}function nz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function rz(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=nz(null,e)),r}function iz(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let N=0;N<2;N++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=rz(e,r,i),h=J6(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",y=Hs.getBlob(f,r,p);if(y===null)throw v6();const _={name:u.fullPath},E=ib(s,t.host,t._protocol),R="POST",I=t.maxUploadRetryTime,b=new hP(E,R,X6(t,n),I);return b.urlParams=_,b.headers=o,b.body=y.uploadData(),b.errorHandler=mP(e),b}class sz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ya.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ya.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ya.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Vu("cannot .send() more than once");if(as(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oz extends sz{initXhr(){this.xhr_.responseType="text"}}function pP(){return new oz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oa(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cP(this._location.path)}get storage(){return this._service}get parent(){const e=W6(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Oa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I6(e)}}function az(t,e,n){t._throwIfRoot("uploadBytes");const r=iz(t.storage,t._location,uP(),new Hs(e,!0),n);return t.storage.makeRequestWithTokens(r,pP).then(i=>({metadata:i,ref:t}))}function lz(t){t._throwIfRoot("getDownloadURL");const e=tz(t.storage,t._location,uP());return t.storage.makeRequestWithTokens(e,pP).then(n=>{if(n===null)throw _6();return n})}function cz(t,e){const n=H6(t._location.path,e),r=new Jn(t._location.bucket,n);return new Oa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){return/^[A-Za-z]+:\/\//.test(t)}function dz(t,e){return new Oa(t,e)}function gP(t,e){if(t instanceof sb){const n=t;if(n._bucket==null)throw w6();const r=new Oa(n,n._bucket);return e!=null?gP(r,e):r}else return e!==void 0?cz(t,e):t}function hz(t,e){if(e&&uz(e)){if(t instanceof sb)return dz(t,e);throw y0("To use ref(service, url), the first argument must be a Storage instance.")}else return gP(t,e)}function tE(t,e){const n=e==null?void 0:e[nP];return n==null?null:Jn.makeFromBucketSpec(n,t)}function fz(t,e,n,r={}){t.host=`${e}:${n}`;const i=as(e);i&&(Vp(`https://${t.host}/b`),_v("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:zS(s,t.app.options.projectId))}class sb{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=a6,this._maxUploadRetryTime=l6,this._requests=new Set,i!=null?this._bucket=Jn.makeFromBucketSpec(i,this._host):this._bucket=tE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=tE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new x6(rP());{const o=L6(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const nE="@firebase/storage",rE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="storage";function ih(t,e,n){return t=X(t),az(t,e,n)}function sh(t){return t=X(t),lz(t)}function oh(t,e){return t=X(t),hz(t,e)}function mz(t=mh(),e){t=X(t);const r=Yr(t,yP).getImmediate({identifier:e}),i=jS("storage");return i&&pz(r,...i),r}function pz(t,e,n,r={}){fz(t,e,n,r)}function gz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new sb(n,r,i,e,Fa)}function yz(){Sr(new rr(yP,gz,"PUBLIC").setMultipleInstances(!0)),an(nE,rE,""),an(nE,rE,"esm2020")}yz();var wP="5.0.1";function wp(t,e){return new Promise(n=>setTimeout(n,t,e))}function wz(){return new Promise(t=>{const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage(null)})}function vz(t,e=1/0){const{requestIdleCallback:n}=window;return n?new Promise(r=>n.call(window,()=>r(),{timeout:e})):wp(Math.min(t,e))}function vP(t){return!!t&&typeof t.then=="function"}function iE(t,e){try{const n=t();vP(n)?n.then(r=>e(!0,r),r=>e(!1,r)):e(!0,n)}catch(n){e(!1,n)}}async function sE(t,e,n=16){const r=Array(t.length);let i=Date.now();for(let s=0;s<t.length;++s){r[s]=e(t[s],s);const o=Date.now();o>=i+n&&(i=o,await wz())}return r}function ah(t){return t.then(void 0,()=>{}),t}function _z(t,e){for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function bz(t,e){return!_z(t,e)}function ob(t){return parseInt(t)}function Ur(t){return parseFloat(t)}function zi(t,e){return typeof t=="number"&&isNaN(t)?e:t}function In(t){return t.reduce((e,n)=>e+(n?1:0),0)}function _P(t,e=1){if(Math.abs(e)>=1)return Math.round(t/e)*e;{const n=1/e;return Math.round(t*n)/n}}function Iz(t){var e,n;const r=`Unexpected syntax '${t}'`,i=/^\s*([a-z-]*)(.*)$/i.exec(t),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,l=(u,h)=>{o[u]=o[u]||[],o[u].push(h)};for(;;){const u=a.exec(i[2]);if(!u)break;const h=u[0];switch(h[0]){case".":l("class",h.slice(1));break;case"#":l("id",h.slice(1));break;case"[":{const f=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(h);if(f)l(f[1],(n=(e=f[4])!==null&&e!==void 0?e:f[5])!==null&&n!==void 0?n:"");else throw new Error(r);break}default:throw new Error(r)}}return[s,o]}function xz(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(r>127)return new TextEncoder().encode(t);e[n]=r}return e}function Ds(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s+u,p+=y>>>16,y&=65535,p+=i+l,f+=p>>>16,p&=65535,f+=r+a,h+=f>>>16,f&=65535,h+=n+o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function gr(t,e){const n=t[0]>>>16,r=t[0]&65535,i=t[1]>>>16,s=t[1]&65535,o=e[0]>>>16,a=e[0]&65535,l=e[1]>>>16,u=e[1]&65535;let h=0,f=0,p=0,y=0;y+=s*u,p+=y>>>16,y&=65535,p+=i*u,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u,h+=f>>>16,f&=65535,f+=i*l,h+=f>>>16,f&=65535,f+=s*a,h+=f>>>16,f&=65535,h+=n*u+r*l+i*a+s*o,h&=65535,t[0]=h<<16|f,t[1]=p<<16|y}function Il(t,e){const n=t[0];e%=64,e===32?(t[0]=t[1],t[1]=n):e<32?(t[0]=n<<e|t[1]>>>32-e,t[1]=t[1]<<e|n>>>32-e):(e-=32,t[0]=t[1]<<e|n>>>32-e,t[1]=n<<e|t[1]>>>32-e)}function Wn(t,e){e%=64,e!==0&&(e<32?(t[0]=t[1]>>>32-e,t[1]=t[1]<<e):(t[0]=t[1]<<e-32,t[1]=0))}function Je(t,e){t[0]^=e[0],t[1]^=e[1]}const Tz=[4283543511,3981806797],Ez=[3301882366,444984403];function oE(t){const e=[0,t[0]>>>1];Je(t,e),gr(t,Tz),e[1]=t[0]>>>1,Je(t,e),gr(t,Ez),e[1]=t[0]>>>1,Je(t,e)}const Vf=[2277735313,289559509],jf=[1291169091,658871167],aE=[0,5],Sz=[0,1390208809],Az=[0,944331445];function kz(t,e){const n=xz(t);e=e||0;const r=[0,n.length],i=r[1]%16,s=r[1]-i,o=[0,e],a=[0,e],l=[0,0],u=[0,0];let h;for(h=0;h<s;h=h+16)l[0]=n[h+4]|n[h+5]<<8|n[h+6]<<16|n[h+7]<<24,l[1]=n[h]|n[h+1]<<8|n[h+2]<<16|n[h+3]<<24,u[0]=n[h+12]|n[h+13]<<8|n[h+14]<<16|n[h+15]<<24,u[1]=n[h+8]|n[h+9]<<8|n[h+10]<<16|n[h+11]<<24,gr(l,Vf),Il(l,31),gr(l,jf),Je(o,l),Il(o,27),Ds(o,a),gr(o,aE),Ds(o,Sz),gr(u,jf),Il(u,33),gr(u,Vf),Je(a,u),Il(a,31),Ds(a,o),gr(a,aE),Ds(a,Az);l[0]=0,l[1]=0,u[0]=0,u[1]=0;const f=[0,0];switch(i){case 15:f[1]=n[h+14],Wn(f,48),Je(u,f);case 14:f[1]=n[h+13],Wn(f,40),Je(u,f);case 13:f[1]=n[h+12],Wn(f,32),Je(u,f);case 12:f[1]=n[h+11],Wn(f,24),Je(u,f);case 11:f[1]=n[h+10],Wn(f,16),Je(u,f);case 10:f[1]=n[h+9],Wn(f,8),Je(u,f);case 9:f[1]=n[h+8],Je(u,f),gr(u,jf),Il(u,33),gr(u,Vf),Je(a,u);case 8:f[1]=n[h+7],Wn(f,56),Je(l,f);case 7:f[1]=n[h+6],Wn(f,48),Je(l,f);case 6:f[1]=n[h+5],Wn(f,40),Je(l,f);case 5:f[1]=n[h+4],Wn(f,32),Je(l,f);case 4:f[1]=n[h+3],Wn(f,24),Je(l,f);case 3:f[1]=n[h+2],Wn(f,16),Je(l,f);case 2:f[1]=n[h+1],Wn(f,8),Je(l,f);case 1:f[1]=n[h],Je(l,f),gr(l,Vf),Il(l,31),gr(l,jf),Je(o,l)}return Je(o,r),Je(a,r),Ds(o,a),Ds(a,o),oE(o),oE(a),Ds(o,a),Ds(a,o),("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}function Cz(t){var e;return{name:t.name,message:t.message,stack:(e=t.stack)===null||e===void 0?void 0:e.split(`
`),...t}}function Rz(t){return/^function\s.*?\{\s*\[native code]\s*}$/.test(String(t))}function Pz(t){return typeof t!="function"}function Nz(t,e){const n=ah(new Promise(r=>{const i=Date.now();iE(t.bind(null,e),(...s)=>{const o=Date.now()-i;if(!s[0])return r(()=>({error:s[1],duration:o}));const a=s[1];if(Pz(a))return r(()=>({value:a,duration:o}));r(()=>new Promise(l=>{const u=Date.now();iE(a,(...h)=>{const f=o+Date.now()-u;if(!h[0])return l({error:h[1],duration:f});l({value:h[1],duration:f})})}))})}));return function(){return n.then(i=>i())}}function Dz(t,e,n,r){const i=Object.keys(t).filter(o=>bz(n,o)),s=ah(sE(i,o=>Nz(t[o],e),r));return async function(){const a=await s,l=await sE(a,f=>ah(f()),r),u=await Promise.all(l),h={};for(let f=0;f<i.length;++f)h[i[f]]=u[f];return h}}function bP(){const t=window,e=navigator;return In(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function Lz(){const t=window,e=navigator;return In(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!bP()}function Vh(){const t=window,e=navigator;return In(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,(e.vendor||"").indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function Qr(){const t=window,e=navigator;return In(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,e.vendor.indexOf("Apple")===0,"RGBColor"in t,"WebKitMediaKeys"in t])>=4}function ab(){const t=window,{HTMLElement:e,Document:n}=t;return In(["safari"in t,!("ongestureend"in t),!("TouchEvent"in t),!("orientation"in t),e&&!("autocapitalize"in e.prototype),n&&"pointerLockElement"in n.prototype])>=4}function jh(){const t=window;return Rz(t.print)&&String(t.browser)==="[object WebPageNamespace]"}function IP(){var t,e;const n=window;return In(["buildID"in navigator,"MozAppearance"in((e=(t=document.documentElement)===null||t===void 0?void 0:t.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}function Oz(){const t=window;return In([!("MediaSettingsRange"in t),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3}function Mz(){const t=window,{URLPattern:e}=t;return In(["union"in Set.prototype,"Iterator"in t,e&&"hasRegExpGroups"in e.prototype,"RGB8"in WebGLRenderingContext.prototype])>=3}function Vz(){const t=window;return In(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}function Fh(){const t=window,e=navigator,{CSS:n,HTMLButtonElement:r}=t;return In([!("getStorageUpdates"in e),r&&"popover"in r.prototype,"CSSCounterStyleRule"in t,n.supports("font-size-adjust: ex-height 0.5"),n.supports("text-transform: full-width")])>=4}function jz(){if(navigator.platform==="iPad")return!0;const t=screen,e=t.width/t.height;return In(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function Fz(){const t=document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||null}function Uz(){const t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function lb(){const t=Vh(),e=IP(),n=window,r=navigator,i="connection";return t?In([!("SharedWorker"in n),r[i]&&"ontypechange"in r[i],!("sinkId"in new Audio)])>=2:e?In(["onorientationchange"in n,"orientation"in n,/android/i.test(r.appVersion)])>=2:!1}function zz(){const t=navigator,e=window,n=Audio.prototype,{visualViewport:r}=e;return In(["srLatency"in n,"srChannelCount"in n,"devicePosture"in t,r&&"segments"in r,"getTextInformation"in Image.prototype])>=3}function Bz(){return Hz()?-4:$z()}function $z(){const t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(Wz())return-1;const n=4500,r=5e3,i=new e(1,r,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;const o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);const[a,l]=Gz(i),u=ah(a.then(h=>qz(h.getChannelData(0).subarray(n)),h=>{if(h.name==="timeout"||h.name==="suspended")return-3;throw h}));return()=>(l(),u)}function Wz(){return Qr()&&!ab()&&!Vz()}function Hz(){return Qr()&&Fh()&&jh()||Vh()&&zz()&&Mz()}function Gz(t){let s=()=>{};return[new Promise((a,l)=>{let u=!1,h=0,f=0;t.oncomplete=_=>a(_.renderedBuffer);const p=()=>{setTimeout(()=>l(lE("timeout")),Math.min(500,f+5e3-Date.now()))},y=()=>{try{const _=t.startRendering();switch(vP(_)&&ah(_),t.state){case"running":f=Date.now(),u&&p();break;case"suspended":document.hidden||h++,u&&h>=3?l(lE("suspended")):setTimeout(y,500);break}}catch(_){l(_)}};y(),s=()=>{u||(u=!0,f>0&&p())}}),s]}function qz(t){let e=0;for(let n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}function lE(t){const e=new Error(t);return e.name=t,e}async function xP(t,e,n=50){var r,i,s;const o=document;for(;!o.body;)await wp(n);const a=o.createElement("iframe");try{for(await new Promise((l,u)=>{let h=!1;const f=()=>{h=!0,l()},p=E=>{h=!0,u(E)};a.onload=f,a.onerror=p;const{style:y}=a;y.setProperty("display","block","important"),y.position="absolute",y.top="0",y.left="0",y.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);const _=()=>{var E,R;h||(((R=(E=a.contentWindow)===null||E===void 0?void 0:E.document)===null||R===void 0?void 0:R.readyState)==="complete"?f():setTimeout(_,10))};_()});!(!((i=(r=a.contentWindow)===null||r===void 0?void 0:r.document)===null||i===void 0)&&i.body);)await wp(n);return await t(a,a.contentWindow)}finally{(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}function Kz(t){const[e,n]=Iz(t),r=document.createElement(e??"div");for(const i of Object.keys(n)){const s=n[i].join(" ");i==="style"?Yz(r.style,s):r.setAttribute(i,s)}return r}function Yz(t,e){for(const n of e.split(";")){const r=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(r){const[,i,s,,o]=r;t.setProperty(i,s,o||"")}}}function Qz(){let t=window;for(;;){const e=t.parent;if(!e||e===t)return!1;try{if(e.location.origin!==t.location.origin)return!0}catch(n){if(n instanceof Error&&n.name==="SecurityError")return!0;throw n}t=e}}const Jz="mmMwWLliI0O&1",Xz="48px",xl=["monospace","sans-serif","serif"],cE=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Zz(){return xP(async(t,{document:e})=>{const n=e.body;n.style.fontSize=Xz;const r=e.createElement("div");r.style.setProperty("visibility","hidden","important");const i={},s={},o=y=>{const _=e.createElement("span"),{style:E}=_;return E.position="absolute",E.top="0",E.left="0",E.fontFamily=y,_.textContent=Jz,r.appendChild(_),_},a=(y,_)=>o(`'${y}',${_}`),l=()=>xl.map(o),u=()=>{const y={};for(const _ of cE)y[_]=xl.map(E=>a(_,E));return y},h=y=>xl.some((_,E)=>y[E].offsetWidth!==i[_]||y[E].offsetHeight!==s[_]),f=l(),p=u();n.appendChild(r);for(let y=0;y<xl.length;y++)i[xl[y]]=f[y].offsetWidth,s[xl[y]]=f[y].offsetHeight;return cE.filter(y=>h(p[y]))})}function eB(){const t=navigator.plugins;if(!t)return;const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(!r)continue;const i=[];for(let s=0;s<r.length;++s){const o=r[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:r.name,description:r.description,mimeTypes:i})}return e}function tB(){return nB(cB())}function nB(t){let e=!1,n,r;const[i,s]=rB();return iB(i,s)?(e=sB(s),t?n=r="skipped":[n,r]=oB(i,s)):n=r="unsupported",{winding:e,geometry:n,text:r}}function rB(){const t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}function iB(t,e){return!!(e&&t.toDataURL)}function sB(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}function oB(t,e){aB(t,e);const n=Ly(t),r=Ly(t);return n!==r?["unstable","unstable"]:(lB(t,e),[Ly(t),n])}function aB(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';const n=`Cwm fjordbank gly ${String.fromCharCode(55357,56835)}`;e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(n,4,45)}function lB(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(const[n,r,i]of[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]])e.fillStyle=n,e.beginPath(),e.arc(r,i,40,0,Math.PI*2,!0),e.closePath(),e.fill();e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function Ly(t){return t.toDataURL()}function cB(){return Qr()&&Fh()&&jh()}function uB(){const t=navigator;let e=0,n;t.maxTouchPoints!==void 0?e=ob(t.maxTouchPoints):t.msMaxTouchPoints!==void 0&&(e=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),n=!0}catch{n=!1}const r="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:n,touchStart:r}}function dB(){return navigator.oscpu}function hB(){const t=navigator,e=[],n=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;if(n!==void 0&&e.push([n]),Array.isArray(t.languages))Vh()&&Oz()||e.push(t.languages);else if(typeof t.languages=="string"){const r=t.languages;r&&e.push(r.split(","))}return e}function fB(){return window.screen.colorDepth}function mB(){return zi(Ur(navigator.deviceMemory),void 0)}function pB(){if(!(Qr()&&Fh()&&jh()))return gB()}function gB(){const t=screen,e=r=>zi(ob(r),null),n=[e(t.width),e(t.height)];return n.sort().reverse(),n}const yB=2500,wB=10;let wm,Oy;function vB(){if(Oy!==void 0)return;const t=()=>{const e=w0();v0(e)?Oy=setTimeout(t,yB):(wm=e,Oy=void 0)};t()}function _B(){return vB(),async()=>{let t=w0();if(v0(t)){if(wm)return[...wm];Fz()&&(await Uz(),t=w0())}return v0(t)||(wm=t),t}}function bB(){if(Qr()&&Fh()&&jh())return()=>Promise.resolve(void 0);const t=_B();return async()=>{const e=await t(),n=r=>r===null?null:_P(r,wB);return[n(e[0]),n(e[1]),n(e[2]),n(e[3])]}}function w0(){const t=screen;return[zi(Ur(t.availTop),null),zi(Ur(t.width)-Ur(t.availWidth)-zi(Ur(t.availLeft),0),null),zi(Ur(t.height)-Ur(t.availHeight)-zi(Ur(t.availTop),0),null),zi(Ur(t.availLeft),null)]}function v0(t){for(let e=0;e<4;++e)if(t[e])return!1;return!0}function IB(){return zi(ob(navigator.hardwareConcurrency),void 0)}function xB(){var t;const e=(t=window.Intl)===null||t===void 0?void 0:t.DateTimeFormat;if(e){const r=new e().resolvedOptions().timeZone;if(r)return r}const n=-TB();return`UTC${n>=0?"+":""}${n}`}function TB(){const t=new Date().getFullYear();return Math.max(Ur(new Date(t,0,1).getTimezoneOffset()),Ur(new Date(t,6,1).getTimezoneOffset()))}function EB(){try{return!!window.sessionStorage}catch{return!0}}function SB(){try{return!!window.localStorage}catch{return!0}}function AB(){if(!(bP()||Lz()))try{return!!window.indexedDB}catch{return!0}}function kB(){return!!window.openDatabase}function CB(){return navigator.cpuClass}function RB(){const{platform:t}=navigator;return t==="MacIntel"&&Qr()&&!ab()?jz()?"iPad":"iPhone":t}function PB(){return navigator.vendor||""}function NB(){const t=[];for(const e of["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"]){const n=window[e];n&&typeof n=="object"&&t.push(e)}return t.sort()}function DB(){const t=document;try{t.cookie="cookietest=1; SameSite=Strict;";const e=t.cookie.indexOf("cookietest=")!==-1;return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function LB(){const t=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",'[title="ALIENBOLA" i]',t("I0JveC1CYW5uZXItYWRz")],abpvn:[".quangcao","#mobileCatfish",t("LmNsb3NlLWFkcw=="),'[id^="bn_bottom_fixed_"]',"#pmadv"],adBlockFinland:[".mainostila",t("LnNwb25zb3JpdA=="),".ylamainos",t("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",t("YVtocmVmXj0iaHR0cDovL2cxLnYuZndtcm0ubmV0L2FkLyJd")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",t("LmhlYWRlci1ibG9ja2VkLWFk"),t("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:[".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil",'[data-cypress="soft-push-notification-modal"]'],adGuardBase:[".BetterJsPopOverlay",t("I2FkXzMwMFgyNTA="),t("I2Jhbm5lcmZsb2F0MjI="),t("I2NhbXBhaWduLWJhbm5lcg=="),t("I0FkLUNvbnRlbnQ=")],adGuardChinese:[t("LlppX2FkX2FfSA=="),t("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),"#widget-quan",t("YVtocmVmKj0iLzg0OTkyMDIwLnh5eiJd"),t("YVtocmVmKj0iLjE5NTZobC5jb20vIl0=")],adGuardFrench:["#pavePub",t("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv",t("LmFkc19iYW4=")],adGuardGerman:['aside[data-portal-id="leaderboard"]'],adGuardJapanese:["#kauli_yad_1",t("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),t("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),t("LmFkZ29vZ2xl"),t("Ll9faXNib29zdFJldHVybkFk")],adGuardMobile:[t("YW1wLWF1dG8tYWRz"),t("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",t("I2FkX2ludmlld19hcmVh")],adGuardRussian:[t("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),t("LnJlY2xhbWE="),'div[id^="smi2adblock"]',t("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),"#psyduckpockeball"],adGuardSocial:[t("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),t("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",".cnt-publi"],adGuardTrackingProtection:["#qoo-counter",t("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),t("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),t("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",t("I3Jla2xhbWk="),t("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),t("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),t("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[t("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers"],easyList:[".yb-floorad",t("LndpZGdldF9wb19hZHNfd2lkZ2V0"),t("LnRyYWZmaWNqdW5reS1hZA=="),".textad_headline",t("LnNwb25zb3JlZC10ZXh0LWxpbmtz")],easyListChina:[t("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),t("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box",".cfa_popup"],easyListCookie:[".ezmob-footer",".cc-CookieWarning","[data-cookie-number]",t("LmF3LWNvb2tpZS1iYW5uZXI="),".sygnal24-gdpr-modal-wrap"],easyListCzechSlovak:["#onlajny-stickers",t("I3Jla2xhbW5pLWJveA=="),t("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",t("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[t("I2FkdmVydGVudGll"),t("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",t("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:["#SSpotIMPopSlider",t("LnNwb25zb3JsaW5rZ3J1ZW4="),t("I3dlcmJ1bmdza3k="),t("I3Jla2xhbWUtcmVjaHRzLW1pdHRl"),t("YVtocmVmXj0iaHR0cHM6Ly9iZDc0Mi5jb20vIl0=")],easyListItaly:[t("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",t("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[t("LnJla2xhbW9zX3RhcnBhcw=="),t("LnJla2xhbW9zX251b3JvZG9z"),t("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),t("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),t("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[t("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#ac-lre-player",".navigate-to-top","#subscribe_popup",".newsletter_holder","#back-top"],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:["#FollowUs","#meteored_share","#social_follow",".article-sharer",".community__social-desc"],frellwitSwedish:[t("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),t("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",t("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[t("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),t("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),t("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",t("LmFkX19tYWlu"),t("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container","#cookies-policy-sticky","#stickyCookieBar"],icelandicAbp:[t("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),t("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[t("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),t("I2xpdmVyZUFkV3JhcHBlcg=="),t("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),t("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[t("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",t("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),t("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),t("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[t("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),t("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),t("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",t("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),t("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),t("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),t("ZGl2I3NrYXBpZWNfYWQ=")],ro:[t("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),t("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),t("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd"),'a[href^="/url/"]'],ruAd:[t("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),t("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),t("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",t("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),t("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",t("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}async function OB({debug:t}={}){if(!MB())return;const e=LB(),n=Object.keys(e),r=[].concat(...n.map(o=>e[o])),i=await VB(r);t&&jB(e,i);const s=n.filter(o=>{const a=e[o];return In(a.map(u=>i[u]))>a.length*.6});return s.sort(),s}function MB(){return Qr()||lb()}async function VB(t){var e;const n=document,r=n.createElement("div"),i=new Array(t.length),s={};uE(r);for(let o=0;o<t.length;++o){const a=Kz(t[o]);a.tagName==="DIALOG"&&a.show();const l=n.createElement("div");uE(l),l.appendChild(a),r.appendChild(l),i[o]=a}for(;!n.body;)await wp(50);n.body.appendChild(r);try{for(let o=0;o<t.length;++o)i[o].offsetParent||(s[t[o]]=!0)}finally{(e=r.parentNode)===null||e===void 0||e.removeChild(r)}return s}function uE(t){t.style.setProperty("visibility","hidden","important"),t.style.setProperty("display","block","important")}function jB(t,e){let n="DOM blockers debug:\n```";for(const r of Object.keys(t)){n+=`
${r}:`;for(const i of t[r])n+=`
  ${e[i]?"":""} ${i}`}console.log(`${n}
\`\`\``)}function FB(){for(const t of["rec2020","p3","srgb"])if(matchMedia(`(color-gamut: ${t})`).matches)return t}function UB(){if(dE("inverted"))return!0;if(dE("none"))return!1}function dE(t){return matchMedia(`(inverted-colors: ${t})`).matches}function zB(){if(hE("active"))return!0;if(hE("none"))return!1}function hE(t){return matchMedia(`(forced-colors: ${t})`).matches}const BB=100;function $B(){if(matchMedia("(min-monochrome: 0)").matches){for(let t=0;t<=BB;++t)if(matchMedia(`(max-monochrome: ${t})`).matches)return t;throw new Error("Too high value")}}function WB(){if(Tl("no-preference"))return 0;if(Tl("high")||Tl("more"))return 1;if(Tl("low")||Tl("less"))return-1;if(Tl("forced"))return 10}function Tl(t){return matchMedia(`(prefers-contrast: ${t})`).matches}function HB(){if(fE("reduce"))return!0;if(fE("no-preference"))return!1}function fE(t){return matchMedia(`(prefers-reduced-motion: ${t})`).matches}function GB(){if(mE("reduce"))return!0;if(mE("no-preference"))return!1}function mE(t){return matchMedia(`(prefers-reduced-transparency: ${t})`).matches}function qB(){if(pE("high"))return!0;if(pE("standard"))return!1}function pE(t){return matchMedia(`(dynamic-range: ${t})`).matches}const ke=Math,wn=()=>0;function KB(){const t=ke.acos||wn,e=ke.acosh||wn,n=ke.asin||wn,r=ke.asinh||wn,i=ke.atanh||wn,s=ke.atan||wn,o=ke.sin||wn,a=ke.sinh||wn,l=ke.cos||wn,u=ke.cosh||wn,h=ke.tan||wn,f=ke.tanh||wn,p=ke.exp||wn,y=ke.expm1||wn,_=ke.log1p||wn,E=w=>ke.pow(ke.PI,w),R=w=>ke.log(w+ke.sqrt(w*w-1)),I=w=>ke.log(w+ke.sqrt(w*w+1)),b=w=>ke.log((1+w)/(1-w))/2,T=w=>ke.exp(w)-1/ke.exp(w)/2,N=w=>(ke.exp(w)+1/ke.exp(w))/2,z=w=>ke.exp(w)-1,B=w=>(ke.exp(2*w)-1)/(ke.exp(2*w)+1),x=w=>ke.log(1+w);return{acos:t(.12312423423423424),acosh:e(1e308),acoshPf:R(1e154),asin:n(.12312423423423424),asinh:r(1),asinhPf:I(1),atanh:i(.5),atanhPf:b(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:T(1),cos:l(10.000000000123),cosh:u(1),coshPf:N(1),tan:h(-1e300),tanh:f(1),tanhPf:B(1),exp:p(1),expm1:y(1),expm1Pf:z(1),log1p:_(10),log1pPf:x(10),powPI:E(-100)}}const YB="mmMwWLliI0fiflO&1",My={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function QB(){return JB((t,e)=>{const n={},r={};for(const i of Object.keys(My)){const[s={},o=YB]=My[i],a=t.createElement("span");a.textContent=o,a.style.whiteSpace="nowrap";for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a.style[l]=u)}n[i]=a,e.append(t.createElement("br"),a)}for(const i of Object.keys(My))r[i]=n[i].getBoundingClientRect().width;return r})}function JB(t,e=4e3){return xP((n,r)=>{const i=r.document,s=i.body,o=s.style;o.width=`${e}px`,o.webkitTextSizeAdjust=o.textSizeAdjust="none",Vh()?s.style.zoom=`${1/r.devicePixelRatio}`:Qr()&&(s.style.zoom="reset");const a=i.createElement("div");return a.textContent=[...Array(e/20<<0)].map(()=>"word").join(" "),s.appendChild(a),t(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}function XB(){return navigator.pdfViewerEnabled}function ZB(){const t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function e9(){const{ApplePaySession:t}=window;if(typeof(t==null?void 0:t.canMakePayments)!="function")return-1;if(t9())return-3;try{return t.canMakePayments()?1:0}catch(e){return n9(e)}}const t9=Qz;function n9(t){if(t instanceof Error&&t.name==="InvalidAccessError"&&/\bfrom\b.*\binsecure\b/i.test(t.message))return-2;throw t}function r9(){var t;const e=document.createElement("a"),n=(t=e.attributionSourceId)!==null&&t!==void 0?t:e.attributionsourceid;return n===void 0?void 0:String(n)}const TP=-1,EP=-2,i9=new Set([10752,2849,2884,2885,2886,2928,2929,2930,2931,2932,2960,2961,2962,2963,2964,2965,2966,2967,2968,2978,3024,3042,3088,3089,3106,3107,32773,32777,32777,32823,32824,32936,32937,32938,32939,32968,32969,32970,32971,3317,33170,3333,3379,3386,33901,33902,34016,34024,34076,3408,3410,3411,3412,3413,3414,3415,34467,34816,34817,34818,34819,34877,34921,34930,35660,35661,35724,35738,35739,36003,36004,36005,36347,36348,36349,37440,37441,37443,7936,7937,7938]),s9=new Set([34047,35723,36063,34852,34853,34854,34229,36392,36795,38449]),o9=["FRAGMENT_SHADER","VERTEX_SHADER"],a9=["LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT"],SP="WEBGL_debug_renderer_info",l9="WEBGL_polygon_mode";function c9({cache:t}){var e,n,r,i,s,o;const a=AP(t);if(!a)return TP;if(!CP(a))return EP;const l=kP()?null:a.getExtension(SP);return{version:((e=a.getParameter(a.VERSION))===null||e===void 0?void 0:e.toString())||"",vendor:((n=a.getParameter(a.VENDOR))===null||n===void 0?void 0:n.toString())||"",vendorUnmasked:l?(r=a.getParameter(l.UNMASKED_VENDOR_WEBGL))===null||r===void 0?void 0:r.toString():"",renderer:((i=a.getParameter(a.RENDERER))===null||i===void 0?void 0:i.toString())||"",rendererUnmasked:l?(s=a.getParameter(l.UNMASKED_RENDERER_WEBGL))===null||s===void 0?void 0:s.toString():"",shadingLanguageVersion:((o=a.getParameter(a.SHADING_LANGUAGE_VERSION))===null||o===void 0?void 0:o.toString())||""}}function u9({cache:t}){const e=AP(t);if(!e)return TP;if(!CP(e))return EP;const n=e.getSupportedExtensions(),r=e.getContextAttributes(),i=[],s=[],o=[],a=[],l=[];if(r)for(const h of Object.keys(r))s.push(`${h}=${r[h]}`);const u=gE(e);for(const h of u){const f=e[h];o.push(`${h}=${f}${i9.has(f)?`=${e.getParameter(f)}`:""}`)}if(n)for(const h of n){if(h===SP&&kP()||h===l9&&f9())continue;const f=e.getExtension(h);if(!f){i.push(h);continue}for(const p of gE(f)){const y=f[p];a.push(`${p}=${y}${s9.has(y)?`=${e.getParameter(y)}`:""}`)}}for(const h of o9)for(const f of a9){const p=d9(e,h,f);l.push(`${h}.${f}=${p.join(",")}`)}return a.sort(),o.sort(),{contextAttributes:s,parameters:o,shaderPrecisions:l,extensions:n,extensionParameters:a,unsupportedExtensions:i}}function AP(t){if(t.webgl)return t.webgl.context;const e=document.createElement("canvas");let n;e.addEventListener("webglCreateContextError",()=>n=void 0);for(const r of["webgl","experimental-webgl"]){try{n=e.getContext(r)}catch{}if(n)break}return t.webgl={context:n},n}function d9(t,e,n){const r=t.getShaderPrecisionFormat(t[e],t[n]);return r?[r.rangeMin,r.rangeMax,r.precision]:[]}function gE(t){return Object.keys(t.__proto__).filter(h9)}function h9(t){return typeof t=="string"&&!t.match(/[^A-Z0-9_x]/)}function kP(){return IP()}function f9(){return Vh()||Qr()}function CP(t){return typeof t.getParameter=="function"}function m9(){if(!(lb()||Qr()))return-2;if(!window.AudioContext)return-1;const e=new AudioContext().baseLatency;return e==null?-1:isFinite(e)?e:-3}function p9(){if(!window.Intl)return-1;const t=window.Intl.DateTimeFormat;if(!t)return-2;const e=t().resolvedOptions().locale;return!e&&e!==""?-3:e}const g9={fonts:Zz,domBlockers:OB,fontPreferences:QB,audio:Bz,screenFrame:bB,canvas:tB,osCpu:dB,languages:hB,colorDepth:fB,deviceMemory:mB,screenResolution:pB,hardwareConcurrency:IB,timezone:xB,sessionStorage:EB,localStorage:SB,indexedDB:AB,openDatabase:kB,cpuClass:CB,platform:RB,plugins:eB,touchSupport:uB,vendor:PB,vendorFlavors:NB,cookiesEnabled:DB,colorGamut:FB,invertedColors:UB,forcedColors:zB,monochrome:$B,contrast:WB,reducedMotion:HB,reducedTransparency:GB,hdr:qB,math:KB,pdfViewerEnabled:XB,architecture:ZB,applePay:e9,privateClickMeasurement:r9,audioBaseLatency:m9,dateTimeLocale:p9,webGlBasics:c9,webGlExtensions:u9};function y9(t){return Dz(g9,t,[])}const w9="$ if upgrade to Pro: https://fpjs.dev/pro";function v9(t){const e=_9(t),n=b9(e);return{score:e,comment:w9.replace(/\$/g,`${n}`)}}function _9(t){if(lb())return .4;if(Qr())return ab()&&!(Fh()&&jh())?.5:.3;const e="value"in t.platform?t.platform.value:"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function b9(t){return _P(.99+.01*t,1e-4)}function I9(t){let e="";for(const n of Object.keys(t).sort()){const r=t[n],i="error"in r?"error":JSON.stringify(r.value);e+=`${e?"|":""}${n.replace(/([:|\\])/g,"\\$1")}:${i}`}return e}function RP(t){return JSON.stringify(t,(e,n)=>n instanceof Error?Cz(n):n,2)}function PP(t){return kz(I9(t))}function x9(t){let e;const n=v9(t);return{get visitorId(){return e===void 0&&(e=PP(this.components)),e},set visitorId(r){e=r},confidence:n,components:t,version:wP}}function T9(t=50){return vz(t,t*2)}function E9(t,e){const n=Date.now();return{async get(r){const i=Date.now(),s=await t(),o=x9(s);return(e||r!=null&&r.debug)&&console.log(`Copy the text below to get the debug data:

\`\`\`
version: ${o.version}
userAgent: ${navigator.userAgent}
timeBetweenLoadAndGet: ${i-n}
visitorId: ${o.visitorId}
components: ${RP(s)}
\`\`\``),o}}}function S9(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{const t=new XMLHttpRequest;t.open("get",`https://m1.openfpcdn.io/fingerprintjs/v${wP}/npm-monitoring`,!0),t.send()}catch(t){console.error(t)}}async function A9(t={}){var e;(!((e=t.monitoring)!==null&&e!==void 0)||e)&&S9();const{delayFallback:n,debug:r}=t;await T9(n);const i=y9({cache:{},debug:r});return E9(i,r)}var k9={load:A9,hashComponents:PP,componentsToDebugString:RP};const C9={apiKey:"AIzaSyDexERfe7htllA1aq7vlbnyQAmfgjx6HnI",authDomain:"moomhe-6de30.firebaseapp.com",projectId:"moomhe-6de30",storageBucket:"moomhe-6de30.firebasestorage.app",messagingSenderId:"951714207506",appId:"1:951714207506:web:0e3a50f5d663095e4345cb",measurementId:"G-6PHVQNPHNL"},Gc=QS(C9),NP=dV(Gc),Ms=p5(Gc),Nn=VU(Gc),Cc=mz(Gc);yV(Gc,{backend:new Up});async function DP(t){return{inlineData:{data:await new Promise(n=>{const r=new FileReader;r.onloadend=()=>n(r.result.split(",")[1]),r.readAsDataURL(t)}),mimeType:t.type}}}async function R9(t){const n=await(await fetch(t)).blob();return new File([n],"image.jpg",{type:n.type})}async function LP(){try{return(await Rj(Ms)).user}catch(t){throw console.error("Error signing in:",t),t}}function OP(){let t=localStorage.getItem("moomhe_device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_device_id",t)),t}let Vy=null,Kn=null;async function cb(){return Kn||(Vy||(Vy=k9.load().then(t=>t.get()).then(t=>(Kn=t.visitorId,localStorage.setItem("moomhe_fingerprint",Kn),console.log("Browser fingerprint generated:",Kn),Kn)).catch(t=>{console.error("FingerprintJS error, falling back to localStorage:",t);let e=localStorage.getItem("moomhe_fingerprint");return e||(e="fallback_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),localStorage.setItem("moomhe_fingerprint",e)),Kn=e,e})),Vy)}function P9(){if(Kn)return Kn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Kn=t,t):null}async function _0(){if(Kn)return Kn;const t=localStorage.getItem("moomhe_fingerprint");return t?(Kn=t,t):await cb()}cb();async function Zo(t){const e=OP(),n="1.0.0",r={uid:t.uid,email:t.email||null,lastActive:new Date,os:navigator.platform,userAgent:navigator.userAgent,deviceBrand:N9(),appVersion:n,deviceId:e,createdAt:t.metadata.creationTime,isAnonymous:t.isAnonymous};try{return await Oh(br(Nn,"users",t.uid),r,{merge:!0}),r}catch(i){throw console.error("Error creating/updating user:",i),i}}function N9(){const t=navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")||t.includes("macintosh")?"Apple":t.includes("samsung")?"Samsung":t.includes("xiaomi")?"Xiaomi":t.includes("huawei")?"Huawei":t.includes("pixel")?"Google":t.includes("android")?"Android Device":t.includes("windows")?"Windows PC":"Unknown"}async function _o(t,e=1536,n=.8,r=!1){if(r||t.includes("image/heic")||t.includes("image/heif"))try{console.log("Converting HEIC image to JPEG...");const o=await(await fetch(t)).blob();if(o.type==="image/jpeg"||o.type==="image/png"||o.type==="image/webp"){console.log("File already in displayable format, skipping HEIC conversion");const h=await new Promise(f=>{const p=new FileReader;p.onload=()=>f(p.result),p.readAsDataURL(o)});return await _o(h,e,n)}const{heicTo:a}=await Vr(()=>import("./heic-to-49ba7c0b.js"),[]),l=await a({blob:o,type:"image/jpeg",quality:n}),u=await new Promise(h=>{const f=new FileReader;f.onload=()=>h(f.result),f.readAsDataURL(l)});return console.log("HEIC converted to JPEG successfully"),await _o(u,e,n)}catch(s){throw console.error("Error converting HEIC image:",s),new Error("Failed to convert HEIC image to JPEG")}return new Promise((s,o)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{try{const l=document.createElement("canvas"),u=l.getContext("2d");let{width:h,height:f}=a;const p=h,y=f;if(h<=e&&f<=e)l.width=h,l.height=f;else{const _=h/f;h>f?(h=e,f=Math.round(e/_)):(f=e,h=Math.round(e*_)),l.width=h,l.height=f}u.drawImage(a,0,0,h,f),l.toBlob(_=>{_?(console.log(`Image compressed: Original ${p}x${y} -> ${h}x${f} (max ${e}), Size: ${(_.size/1024/1024).toFixed(2)}MB`),s(_)):o(new Error("Failed to create compressed image blob"))},"image/jpeg",n)}catch(l){console.error("Error compressing image:",l),o(l)}},a.onerror=()=>{o(new Error("Failed to load image for compression"))},a.src=t})}function D9(t,e=1536,n=.8){return new Promise((r,i)=>{const s=new FileReader;s.onload=o=>{_o(o.target.result,e,n).then(r).catch(i)},s.onerror=()=>i(new Error("Failed to read file")),s.readAsDataURL(t)})}function MP(t,e=200,n=200){return new Promise((r,i)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{try{const o=document.createElement("canvas"),a=o.getContext("2d");let{width:l,height:u}=s;l>u?l>e&&(u=u*e/l,l=e):u>n&&(l=l*n/u,u=n),o.width=l,o.height=u,a.drawImage(s,0,0,l,u),o.toBlob(h=>{h?r(h):i(new Error("Failed to create thumbnail blob"))},"image/jpeg",.8)}catch(o){console.error("Error creating thumbnail:",o),i(o)}},s.onerror=()=>{i(new Error("Failed to load image for thumbnail creation"))},s.src=t})}async function L9(t,e,n){try{let r;try{r=await _o(e,1536,.8)}catch(_){console.warn("Failed to compress image, using original:",_),r=await(await fetch(e)).blob()}let i;try{i=await MP(e)}catch(_){console.warn("Failed to create thumbnail, using compressed image:",_),i=r}const s=Date.now(),o=`image_${s}.jpg`,a=`thumbnail_${s}.jpg`,l=oh(Cc,`userHistory/${t}/${o}`),u=await ih(l,r),h=await sh(u.ref),f=oh(Cc,`userHistory/${t}/${a}`),p=await ih(f,i),y=await sh(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(r){throw console.error("Error uploading image:",r),r}}async function O9(t,e){try{const n=await new Promise(_=>{const E=new FileReader;E.onload=()=>_(E.result),E.readAsDataURL(e)});let r;try{r=await _o(n,1536,.8)}catch(_){console.warn("Failed to compress image, using original file:",_),r=e}let i;try{i=await MP(n)}catch(_){console.warn("Failed to create thumbnail, using compressed image:",_),i=r}const s=Date.now(),o=`upload_${s}.jpg`,a=`upload_thumbnail_${s}.jpg`,l=oh(Cc,`userHistory/${t}/${o}`),u=await ih(l,r),h=await sh(u.ref),f=oh(Cc,`userHistory/${t}/${a}`),p=await ih(f,i),y=await sh(p.ref);return{downloadURL:h,thumbnailURL:y,filename:o,thumbnailFilename:a,timestamp:s}}catch(n){throw console.error("Error uploading user image:",n),n}}async function M9(t,e){try{const{downloadURL:n,thumbnailURL:r,filename:i,thumbnailFilename:s,timestamp:o}=await L9(t,e.imageUrl,e.prompt),a={storageUrl:n,thumbnailUrl:r,filename:i,thumbnailFilename:s,prompt:e.prompt,timestamp:e.timestamp,createdAt:new Date,userId:t,type:"generated"},l=br(Ph(Nn,"userHistory"));return await Oh(l,a),{id:l.id,...a}}catch(n){throw console.error("Error saving image to history:",n),n}}async function VP(t,e,n=""){try{const{downloadURL:r,thumbnailURL:i,filename:s,thumbnailFilename:o,timestamp:a}=await O9(t,e),l={storageUrl:r,thumbnailUrl:i,filename:s,thumbnailFilename:o,prompt:n||`Uploaded: ${e.name}`,timestamp:new Date().toLocaleString("he-IL"),createdAt:new Date,userId:t,type:"uploaded"},u=br(Ph(Nn,"userHistory"));return await Oh(u,l),{id:u.id,...l}}catch(r){throw console.error("Error saving upload to history:",r),r}}async function V9(t){try{const e=Ph(Nn,"userHistory"),n=mm(e,pm("userId","==",t),gm("createdAt","desc")),r=await g0(n),i=[];return r.forEach(s=>{const o=s.data();if(!o.isError){const a={id:s.id,...o};o.result&&o.result.storageUrl&&(a.storageUrl=o.result.storageUrl,a.thumbnailUrl=o.result.thumbnailUrl,a.filename=o.result.filename,a.thumbnailFilename=o.result.thumbnailFilename,o.result.originalImageUrl&&(a.originalImageUrl=o.result.originalImageUrl)),o.originalImageUrl?a.originalImageUrl=o.originalImageUrl:o.imageData&&typeof o.imageData=="string"&&o.imageData.startsWith("http")&&(a.originalImageUrl=o.imageData),o.objects&&(a.objects=o.objects),i.push(a)}}),i}catch(e){return console.error("Error loading user history:",e),[]}}async function Cl(t,e=1,n=7){try{const r=Ph(Nn,"userHistory");let i=null;if(e>1){const f=mm(r,pm("userId","==",t),gm("createdAt","desc"),Py((e-1)*n)),p=await g0(f);p.empty||(i=p.docs[p.docs.length-1])}let s;const o=n*2;i&&e>1?s=mm(r,pm("userId","==",t),gm("createdAt","desc"),HU(i),Py(o)):s=mm(r,pm("userId","==",t),gm("createdAt","desc"),Py(o));const a=await g0(s),l=[];a.forEach(f=>{const p=f.data();if(!p.isError){const y={id:f.id,...p};p.result&&p.result.storageUrl&&(y.storageUrl=p.result.storageUrl,y.thumbnailUrl=p.result.thumbnailUrl,y.filename=p.result.filename,y.thumbnailFilename=p.result.thumbnailFilename,p.result.originalImageUrl&&(y.originalImageUrl=p.result.originalImageUrl)),p.originalImageUrl?y.originalImageUrl=p.originalImageUrl:p.imageData&&typeof p.imageData=="string"&&p.imageData.startsWith("http")&&(y.originalImageUrl=p.imageData),p.objects&&(y.objects=p.objects),l.push(y)}});const u=l.slice(0,n),h=a.docs.length===o&&l.length>=n;return console.log(`Pagination debug - Page: ${e}, Requested: ${n}, Fetched: ${a.docs.length}, Valid: ${l.length}, Returned: ${u.length}, HasMore: ${h}`),{history:u,hasMore:h}}catch(r){return console.error("Error loading paginated user history:",r),{history:[],hasMore:!1}}}async function b0(t,e){try{let n;try{n=await _o(e,1536,.8)}catch(l){console.warn("Failed to compress image for sharing, using original:",l),n=await(await fetch(e)).blob()}const r=Date.now(),i=`temp_${r}.jpg`,s=oh(Cc,`temp/${t}/${i}`),o=await ih(s,n),a=await sh(o.ref);return setTimeout(()=>{try{console.log(" Cleanup scheduled for temporary file:",i)}catch(l){console.error("Error during cleanup:",l)}},36e5),{downloadURL:a,filename:i,timestamp:r}}catch(n){throw console.error("Error uploading image for sharing:",n),n}}function de(t,e={}){try{bA(NP,t,{...e,timestamp:new Date().toISOString()}),console.log(` Analytics: ${t}`,e)}catch(n){console.error("Analytics error:",n)}}const vm=(t="email")=>de("sign_up",{method:t}),jP=(t="email")=>de("login",{method:t}),FP=()=>de("anonymous_sign_in"),UP=()=>de("logout"),I0=t=>de("account_link",{success:t}),zP=t=>de("image_upload",{file_type:t}),BP=()=>de("object_image_upload"),$P=()=>de("image_download"),WP=t=>de("image_share",{platform:t}),HP=(t,e=!1)=>de("generation_start",{prompt_type:t,has_object_image:e}),GP=(t,e)=>de("generation_complete",{prompt_type:t,duration_ms:e}),_m=t=>de("generation_error",{error_type:t}),bm=(t,e,n)=>de("limit_reached",{subscription:t,usage:e,limit:n}),j9=(t,e=0)=>de("object_detection",{success:t,object_count:e}),Im=(t,e=null)=>de("feature_use",{feature:t,value:e}),qP=t=>de("style_select",{style:t}),KP=(t,e)=>de("color_select",{color:t,category:e}),F9=t=>de("angle_select",{angle:t}),YP=t=>de("lighting_select",{lighting:t}),QP=t=>de("furniture_select",{furniture:t}),JP=t=>de("repairs_select",{repair:t}),XP=t=>de("doors_windows_select",{option:t}),ZP=t=>de("bathroom_select",{option:t}),x0=()=>de("onboarding_start"),eN=t=>de("onboarding_step",{step:t}),tN=()=>de("onboarding_complete"),nN=t=>de("onboarding_skip",{at_step:t}),T0=()=>de("subscription_modal_view"),rN=t=>de("subscription_click",{tier:t}),iN=()=>de("welcome_premium_show"),sN=()=>de("history_click"),oN=t=>de("history_load_more",{page:t}),aN=()=>de("contact_form_submit"),lN=()=>de("contact_form_success"),U9=t=>de("category_select",{category:t}),z9=t=>de("page_view",{page:t}),cN=()=>de("app_open"),B9=Object.freeze(Object.defineProperty({__proto__:null,analytics:NP,app:Gc,auth:Ms,compressFile:D9,compressImage:_o,createOrUpdateUser:Zo,db:Nn,fileToGenerativePart:DP,getDeviceFingerprint:_0,getDeviceId:OP,getFingerprint:P9,initFingerprint:cb,loadUserHistory:V9,loadUserHistoryPaginated:Cl,logAnalyticsEvent:de,saveImageToHistory:M9,saveUploadToHistory:VP,signInUser:LP,storage:Cc,trackAccountLink:I0,trackAngleSelect:F9,trackAnonymousSignIn:FP,trackAppOpen:cN,trackBathroomSelect:ZP,trackCategorySelect:U9,trackColorSelect:KP,trackContactFormSubmit:aN,trackContactFormSuccess:lN,trackDoorsWindowsSelect:XP,trackFeatureUse:Im,trackFurnitureSelect:QP,trackGenerationComplete:GP,trackGenerationError:_m,trackGenerationStart:HP,trackHistoryClick:sN,trackHistoryLoadMore:oN,trackImageDownload:$P,trackImageShare:WP,trackImageUpload:zP,trackLightingSelect:YP,trackLimitReached:bm,trackLogin:jP,trackLogout:UP,trackObjectDetection:j9,trackObjectImageUpload:BP,trackOnboardingComplete:tN,trackOnboardingSkip:nN,trackOnboardingStart:x0,trackOnboardingStep:eN,trackPageView:z9,trackRepairsSelect:JP,trackSignUp:vm,trackStyleSelect:qP,trackSubscriptionClick:rN,trackSubscriptionModalView:T0,trackWelcomePremiumShow:iN,uploadImageForSharing:b0,urlToFile:R9},Symbol.toStringTag,{value:"Module"}));class $9{constructor(){fb(this,"waitForRequestCompletion",async(e,n=6e4)=>new Promise((r,i)=>{const s=setTimeout(()=>{this.activeRequests.delete(e),i(new Error("Request timeout"))},n),o=ec(br(Nn,"userHistory",e),a=>{if(!a.exists()){clearTimeout(s),o(),i(new Error("Request document not found"));return}const l=a.data();l.isDone&&(clearTimeout(s),o(),this.activeRequests.delete(e),l.isError?i(new Error(l.error||"Request failed")):r(l.result))},a=>{clearTimeout(s),o(),this.activeRequests.delete(e),i(a)});this.activeRequests.set(e,o)}));this.activeRequests=new Map,this.useExperimentalModel=!0}setUseExperimentalModel(e){this.useExperimentalModel=e,console.log(`[AIService] Experimental model (GPT-image-1.5) ${e?"ENABLED":"DISABLED"}`)}isExperimentalModelEnabled(){return this.useExperimentalModel}async submitImageGenerationRequest(e,n,r,i=null,s=null,o=null){try{const a=await e.getIdToken(),l=o!==null?o:this.useExperimentalModel;l&&console.log("[AIService] Using EXPERIMENTAL GPT-image-1.5 model for this request");const u={type:"request",requestType:"imageGeneration",userId:e.uid,authToken:a,deviceId:s,prompt:n,imageData:r,originalImageUrl:r&&r.startsWith("http")?r:null,objectImageData:i,isDone:!1,isError:!1,createdAt:new Date,useExperimentalModel:l},h=br(Ph(Nn,"userHistory"));return await Oh(h,u),h.id}catch(a){throw console.error("Error submitting image generation request:",a),a}}async submitObjectDetectionRequest(e,n,r=null,i=null){try{const s=await e.getIdToken(),o=await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/detectObjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:n,authToken:s,historyId:r,deviceId:i})});if(!o.ok){const l=await o.json();throw new Error(l.error||"Object detection failed")}const a=await o.json();if(!a.success)throw new Error(a.error||"Object detection failed");return a}catch(s){throw console.error("Error submitting object detection request:",s),s}}cancelRequest(e){const n=this.activeRequests.get(e);n&&(n(),this.activeRequests.delete(e))}async getUserGenerationCount(e){try{const n=new Date,r=`${String(n.getMonth()+1).padStart(2,"0")}-${n.getFullYear()}`,i=br(Nn,"genCount",r,"users",e),s=br(Nn,"users",e),[o,a]=await Promise.all([QT(i),QT(s)]),l=o.exists()&&o.data().count||0,u=a.exists()?a.data():{},h=u.credits!==void 0?u.credits:0;return{count:l,limit:h}}catch(n){return console.error("Error getting user generation count:",n),{count:0,limit:0}}}async canMakeRequest(e){const{count:n,limit:r}=await this.getUserGenerationCount(e);return n<r}}const Ff=new $9,W9={appTitle:" AI",appName:"",guest:"",loginToSaveDesigns:"   ",loggedOutSuccess:"   ",login:" ",logout:" ",createAccount:" ",createNewAccount:" ",welcomeBack:" !   ",joinUs:"       ",email:" ",password:" ",confirmPassword:"  ",fillAllFields:"   ",passwordsNotMatch:"   ",loginButton:" ",createAccountButton:" ",forgotPassword:"  ",enterEmailFirst:"     ",passwordResetEmailSent:"      !       .",passwordResetError:"       ",termsAgreement:"    ",termsOfService:" ",and:"",privacyPolicy:" ",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"  ...",creatingAccount:"  ...",loginSuccess:"   ! ",accountCreated:"   ! ",loginError:"   ",userNotFound:"  ",wrongPassword:"  ",emailInUse:"   ",weakPassword:"   ",invalidEmail:"    ",exitAccount:"  ",loginWithEmail:"     ",uploadImage:" ",clickToUploadImage:"     ",gallery:"",camera:"",uploadItem:" ",redesign:" ",more:"",moreOptions:" ",history:"",noHistoryYet:"   ",uploadedImagesWillAppear:"     ",whatToChange:"  ",uploadImageFirst:"   ",uploadingImage:"  ...",errorUploadingImage:"   ",itemImageLoaded:"   !      .",addAttachedItem:"    ",processingStarting:" ...",processingMagic:" ",processing:" ...",connectingToCloud:"  ... ",sendingToAI:"   AI... ",analyzingItem:"  ... ",creatingDesign:"  ... ",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",selectDesignStyle:"  ",colorPalette:" ",selectLightingType:"  ",selectFurnitureType:"  ",selectRepairType:"  /",bathroomOptions:" ",whatToDo:"   ",describeChange:"  ...",cancel:"",execute:"",confirm:"",close:"",tryAgain:"  ",mySubscription:"",creditsRemaining:"{count}  ",upgradeToPremium:"  ",iHaveCoupon:" ",enterCouponCode:"      ",enterCouponCodeTitle:"  ",couponCode:" ",mustEnterCoupon:"   ",couponActivated:"   !",errorRedeemingCoupon:"   ",redeemCoupon:" ",creditsAddedToAccount:"  {count}   ! ",contactUs:" ",phone:"",message:"",writeYourMessage:"  ...",sendMessage:" ",messageSentSuccess:"   !",contentNotAllowed:"  ",requestFailed:" ",oopsSomethingWrong:"!   ",errorUnknown:"  ",imageSavedToGallery:"    !",errorDownloadingImage:"   ",errorSharing:"  ",comparison:"",download:"",share:"",revertToOriginal:" ",loveItSave:"! ",language:"",selectLanguage:" ",languageChanged:"  ",create:"",tutorial:"",designHistory:" ",professionalSubscription:" ",moreTools:" ",colors:"",aiDesigner:" AI",aiDesignerActiveClickToDisable:" -  ",aiDesignerInactiveClickToEnable:"  -  ",promptPlaceholder:"  ... (:         )",bathroomShort:"",skip:"",next:"",finish:"",later:"",loginNow:"  ",startDesigning:" ",thankYou:" !",sending:" ...",onboardingUploadTitle:" ",onboardingUploadDesc:"      .        .",onboardingStyleTitle:"  ",onboardingStyleDesc:'      .  " "   .',onboardingCreateTitle:" ",onboardingCreateDesc:'  ""        !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'       " "      .'},H9={appTitle:"Experto AI",appName:"Experto",guest:"Invitado",loginToSaveDesigns:"Inicia sesin para guardar tus diseos",loggedOutSuccess:"Sesin cerrada con xito",login:"Iniciar sesin",logout:"Cerrar sesin",createAccount:"Crear cuenta",createNewAccount:"Nueva cuenta",welcomeBack:"Bienvenido de nuevo! Inicia sesin para continuar",joinUs:"nete a nosotros para guardar diseos y acceder a todas las funciones",email:"Correo electrnico",password:"Contrasea",confirmPassword:"Confirmar contrasea",fillAllFields:"Por favor, completa todos los campos",passwordsNotMatch:"Las contraseas no coinciden",loginButton:"Iniciar sesin",createAccountButton:"Crear cuenta",forgotPassword:"Olvidaste tu contrasea?",enterEmailFirst:"Por favor, introduce primero tu correo electrnico",passwordResetEmailSent:"Correo de restablecimiento enviado! Revisa tu bandeja de entrada y spam.",passwordResetError:"Error al enviar el correo de restablecimiento",termsAgreement:"Al iniciar sesin aceptas los",termsOfService:"Trminos de servicio",and:"y",privacyPolicy:"Poltica de privacidad",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"Iniciando sesin...",creatingAccount:"Creando cuenta...",loginSuccess:"Sesin iniciada con xito! ",accountCreated:"Cuenta creada con xito! ",loginError:"Error de inicio de sesin",userNotFound:"Usuario no encontrado",wrongPassword:"Contrasea incorrecta",emailInUse:"El correo ya est en uso",weakPassword:"La contrasea es muy dbil",invalidEmail:"Correo electrnico invlido",exitAccount:"Salir de la cuenta",loginWithEmail:"Inicia sesin con tu correo para guardar tus diseos",uploadImage:"Subir imagen",clickToUploadImage:"Haz clic aqu para subir una imagen de la galera",gallery:"Galera",camera:"Cmara",uploadItem:"Aadir elemento",redesign:"Redisear",more:"Ms",moreOptions:"Ms opciones",history:"Historial",noHistoryYet:"An no hay historial",uploadedImagesWillAppear:"Las imgenes que subas y edites aparecern aqu",whatToChange:"Qu cambiar?",uploadImageFirst:"Por favor, sube una imagen primero",uploadingImage:"Subiendo imagen...",errorUploadingImage:"Error al subir la imagen",itemImageLoaded:"Imagen del elemento cargada! Describe en el prompt dnde aadirlo.",addAttachedItem:"Aadir el elemento adjunto a la imagen",processingStarting:"Iniciando...",processingMagic:"La magia est sucediendo",processing:"Procesando...",connectingToCloud:"Conectando a la nube... ",sendingToAI:"Enviando a AI... ",analyzingItem:"Analizando elemento... ",creatingDesign:"Creando diseo... ",designStyle:"Estilo de diseo",wallColor:"Cambiar color",lighting:"Iluminacin",furniture:"Muebles",doorsWindows:"Puertas y ventanas",bathroom:"Bao",repairs:"Reparaciones",general:"General",selectDesignStyle:"Seleccionar estilo de diseo",colorPalette:"Paleta de colores",selectLightingType:"Seleccionar tipo de iluminacin",selectFurnitureType:"Seleccionar tipo de mueble",selectRepairType:"Seleccionar tipo de reparacin/dao",bathroomOptions:"Opciones de bao",whatToDo:"Qu hacer?",describeChange:"Describe el cambio deseado...",cancel:"Cancelar",execute:"Ejecutar",confirm:"Confirmar",close:"Cerrar",tryAgain:"Intentar de nuevo",mySubscription:"Mi suscripcin",creditsRemaining:"{count} crditos restantes",upgradeToPremium:"Actualizar a Premium",iHaveCoupon:"Tengo un cupn",enterCouponCode:"Introduce el cdigo del cupn para obtener crditos gratis",enterCouponCodeTitle:"Introducir cdigo de cupn",couponCode:"Cdigo de cupn",mustEnterCoupon:"Debes introducir un cdigo de cupn",couponActivated:"Cupn activado con xito!",errorRedeemingCoupon:"Error al canjear el cupn",redeemCoupon:"Canjear cupn",creditsAddedToAccount:"{count} crditos aadidos a tu cuenta! ",contactUs:"Contctanos",phone:"Telfono",message:"Mensaje",writeYourMessage:"Escribe tu mensaje aqu...",sendMessage:"Enviar mensaje",messageSentSuccess:"Mensaje enviado con xito!",contentNotAllowed:"Contenido no permitido",requestFailed:"Solicitud fallida",oopsSomethingWrong:"Ups! Algo sali mal",errorUnknown:"Error desconocido",imageSavedToGallery:"Imagen guardada en la galera!",errorDownloadingImage:"Error al descargar la imagen",errorSharing:"Error al compartir",comparison:"Comparacin",download:"Descargar",share:"Compartir",revertToOriginal:"Volver al original",loveItSave:"Me encanta! Guardar",language:"Idioma",selectLanguage:"Seleccionar idioma",languageChanged:"Idioma cambiado",create:"Crear",tutorial:"Tutorial",designHistory:"Historial de diseos",professionalSubscription:"Plan profesional",moreTools:"Ms herramientas",colors:"Colores",aiDesigner:"Diseador AI",aiDesignerActiveClickToDisable:"Activo - Clic para desactivar",aiDesignerInactiveClickToEnable:"Inactivo - Clic para activar",promptPlaceholder:"Describe el diseo deseado... (ej: cambia el sof a azul, aade plantas en la esquina)",bathroomShort:"Bao",skip:"Saltar",next:"Siguiente",finish:"Terminar",later:"Ms tarde",loginNow:"Iniciar sesin ahora",startDesigning:"Empezar a disear",thankYou:"Gracias!",sending:"Enviando...",onboardingUploadTitle:"Subir imagen",onboardingUploadDesc:"Comienza subiendo una foto de la habitacin que quieres disear. No tienes una? No te preocupes, usaremos una imagen de ejemplo.",onboardingStyleTitle:"Elige un estilo de rediseo",onboardingStyleDesc:'Selecciona tu estilo preferido del men lateral. Prueba "Redisear" para ver diferentes opciones.',onboardingCreateTitle:"Crear diseo",onboardingCreateDesc:'Haz clic en "Crear" y la IA redisear tu habitacin en segundos!',onboardingItemTipTitle:"Consejo: Aadir elemento",onboardingItemTipDesc:'Quieres aadir un mueble especfico? Usa el botn "Aadir elemento" para subir una imagen de un objeto e incorporarlo al diseo.'},G9={appTitle:"Experte AI",appName:"Experte",guest:"Gast",loginToSaveDesigns:"Melden Sie sich an, um Ihre Designs zu speichern",loggedOutSuccess:"Erfolgreich abgemeldet",login:"Anmelden",logout:"Abmelden",createAccount:"Konto erstellen",createNewAccount:"Neues Konto",welcomeBack:"Willkommen zurck! Melden Sie sich an, um fortzufahren",joinUs:"Treten Sie uns bei, um Designs zu speichern und auf alle Funktionen zuzugreifen",email:"E-Mail",password:"Passwort",confirmPassword:"Passwort besttigen",fillAllFields:"Bitte fllen Sie alle Felder aus",passwordsNotMatch:"Passwrter stimmen nicht berein",loginButton:"Anmelden",createAccountButton:"Konto erstellen",forgotPassword:"Passwort vergessen?",enterEmailFirst:"Bitte geben Sie zuerst eine E-Mail-Adresse ein",passwordResetEmailSent:"E-Mail zum Zurcksetzen des Passworts gesendet! berprfen Sie Ihren Posteingang und Spam-Ordner.",passwordResetError:"Fehler beim Senden der E-Mail zum Zurcksetzen des Passworts",termsAgreement:"Mit der Anmeldung stimmen Sie den",termsOfService:"Nutzungsbedingungen",and:"und",privacyPolicy:"Datenschutzrichtlinie",loggingIn:"Anmeldung...",creatingAccount:"Konto wird erstellt...",loginSuccess:"Erfolgreich angemeldet! ",accountCreated:"Konto erfolgreich erstellt! ",loginError:"Anmeldefehler",userNotFound:"Benutzer nicht gefunden",wrongPassword:"Falsches Passwort",emailInUse:"E-Mail bereits in Verwendung",weakPassword:"Passwort ist zu schwach",invalidEmail:"Ungltige E-Mail-Adresse",exitAccount:"Konto verlassen",loginWithEmail:"Melden Sie sich mit E-Mail an, um Ihre Designs zu speichern",uploadImage:"Bild hochladen",clickToUploadImage:"Klicken Sie hier, um ein Bild aus der Galerie hochzuladen",gallery:"Galerie",camera:"Kamera",uploadItem:"Element hinzufgen",redesign:"Neu gestalten",more:"Mehr",moreOptions:"Weitere Optionen",history:"Verlauf",noHistoryYet:"Noch kein Verlauf",uploadedImagesWillAppear:"Bilder, die Sie hochladen und bearbeiten, erscheinen hier",whatToChange:"Was ndern?",uploadImageFirst:"Bitte laden Sie zuerst ein Bild hoch",uploadingImage:"Bild wird hochgeladen...",errorUploadingImage:"Fehler beim Hochladen des Bildes",processingStarting:"Starten...",processingMagic:"Die Magie geschieht",processing:"Verarbeitung...",connectingToCloud:"Verbindung zur Cloud... ",sendingToAI:"Senden an AI... ",analyzingItem:"Element analysieren... ",creatingDesign:"Design erstellen... ",designStyle:"Designstil",wallColor:"Farbe ndern",lighting:"Beleuchtung",furniture:"Mbel",doorsWindows:"Tren & Fenster",bathroom:"Badezimmer",repairs:"Reparaturen",general:"Allgemein",selectDesignStyle:"Designstil auswhlen",colorPalette:"Farbpalette",colorReds:"Rottne",colorOranges:"Orangetne",colorYellows:"Gelbtne",colorGreens:"Grntne",colorBlues:"Blautne",colorPurples:"Violetttne",colorGrays:"Grautne",colorWhitesAndBlacks:"Wei & Schwarz",selectLightingType:"Beleuchtungsart auswhlen",selectFurnitureType:"Mbeltyp auswhlen",selectRepairType:"Reparatur-/Schadenstyp auswhlen",bathroomOptions:"Badezimmeroptionen",pleaseSelectOption:"Bitte whlen Sie eine Option aus der Liste unten.",repairEverything:"Alles reparieren",fixAndRepairEverything:"Alles richten und reparieren",messUpEverything:"Alles durcheinander bringen",destroyAndCauseDamage:"Alles zerstren und beschdigen",windowOptions:"Fensteroptionen",doorOptions:"Troptionen",fixedWindow:"Festverglasung",slidingWindow:"Schiebefenster",casementWindow:"Flgelfenster",tiltTurnWindow:"Dreh-Kipp-Fenster",awningWindow:"Markisenfenster",doubleHungWindow:"Schiebefenster vertikal",pocketWindow:"Taschenfenster",archWindow:"Bogenfenster",pocketDoor:"Schiebetr in der Wand",frenchDoors:"Franzsische Tren",louverDoor:"Lamellentr",barnDoor:"Scheunentr",toiletOptions:"WC-Optionen",bathtubOptions:"Badewannenoptionen",showerOptions:"Duschoptionen",sinkOptions:"Waschbeckenoptionen",jacuzziSpaOptions:"Whirlpool/Spa-Optionen",poolOptions:"Pool-Optionen",bidetSeat:"Bidet-Sitz",toiletSeat:"WC-Sitz",freestandingTub:"Freistehende Wanne",vintageTub:"Vintage-Wanne",standardTub:"Standard-Wanne",rainShower:"Regendusche",showerEnclosure:"Duschkabine",slidingShower:"Schiebetr-Dusche",pedestalSink:"Standwaschbecken",stainlessSink:"Edelstahlsple",undermountSink:"Einbauwaschbecken",builtInJacuzzi:"Einbau-Whirlpool",portableJacuzzi:"Mobiler Whirlpool",ingroundPool:"Einbau-Pool",abovegroundPool:"Aufstell-Pool",whatToDo:"Was tun?",describeChange:"Beschreiben Sie die gewnschte nderung...",cancel:"Abbrechen",execute:"Ausfhren",confirm:"Besttigen",close:"Schlieen",tryAgain:"Erneut versuchen",mySubscription:"Mein Abonnement",creditsRemaining:"{count} Credits brig",upgradeToPremium:"Auf Premium upgraden",iHaveCoupon:"Ich habe einen Gutschein",enterCouponCode:"Gutscheincode eingeben, um kostenlose Credits zu erhalten",enterCouponCodeTitle:"Gutscheincode eingeben",couponCode:"Gutscheincode",mustEnterCoupon:"Sie mssen einen Gutscheincode eingeben",couponActivated:"Gutschein erfolgreich aktiviert!",errorRedeemingCoupon:"Fehler beim Einlsen des Gutscheins",redeemCoupon:"Gutschein einlsen",creditsAddedToAccount:"{count} Credits zu Ihrem Konto hinzugefgt! ",contactUs:"Kontaktieren Sie uns",phone:"Telefon",message:"Nachricht",writeYourMessage:"Schreiben Sie hier Ihre Nachricht...",sendMessage:"Nachricht senden",messageSentSuccess:"Nachricht erfolgreich gesendet!",contentNotAllowed:"Inhalt nicht erlaubt",requestFailed:"Anfrage fehlgeschlagen",oopsSomethingWrong:"Hoppla! Etwas ist schief gelaufen",errorUnknown:"Unbekannter Fehler",imageSavedToGallery:"Bild in Galerie gespeichert!",errorDownloadingImage:"Fehler beim Herunterladen des Bildes",errorSharing:"Fehler beim Teilen",comparison:"Vergleich",download:"Herunterladen",share:"Teilen",revertToOriginal:"Zum Original zurckkehren",loveItSave:"Gefllt mir! Speichern",whatsApp:"WhatsApp",products:"Produkte",cancelSearch:"Suche abbrechen",searchSimilarProducts:"hnliche Produkte suchen",whatDoYouThink:"Was halten Sie vom neuen Design?",dragSliderForComparison:"Ziehen Sie den Schieberegler fr den Vergleich",returnToOriginal:"Zum Originalbild zurckkehren",loveItSaveDesign:"Gefllt mir! Design speichern",language:"Sprache",selectLanguage:"Sprache auswhlen",languageChanged:"Sprache gendert",create:"Erstellen",tutorial:"Anleitung",designHistory:"Designverlauf",professionalSubscription:"Professioneller Plan",moreTools:"Weitere Werkzeuge",colors:"Farben",aiDesigner:"AI-Designer",aiDesignerActiveClickToDisable:"Aktiv - Klicken zum Deaktivieren",aiDesignerInactiveClickToEnable:"Inaktiv - Klicken zum Aktivieren",yourDesigner:"Ihr Designer",iHaveIdeasForYou:"Ich habe ein paar Ideen fr Sie!",heyIHaveGreatIdeas:"Hey! Ich habe tolle Ideen, um diesen Raum aufzuwerten ",noThanks:"Nein danke",processingNewDesign:"Verarbeite neues Design...",promptPlaceholder:"Beschreiben Sie das gewnschte Design... (z.B. Sofa blau frben, Pflanzen in der Ecke hinzufgen)",bathroomShort:"Bad",skip:"berspringen",next:"Weiter",finish:"Fertig",later:"Spter",loginNow:"Jetzt anmelden",startDesigning:"Design starten",thankYou:"Danke!",sending:"Wird gesendet...",changeColor:"Farbe ndern",allWalls:"Alle Wnde",paintAllWallsInRoom:"Alle Wnde im Raum streichen",paintAllWalls:"Alle Wnde im Raum streichen",specificObject:"Bestimmtes Objekt",chooseWhatToPaint:"Whlen Sie, was Sie streichen mchten",selectWhatToPaint:"Whlen Sie, was Sie streichen mchten",whatToPaint:"Was streichen?",paintExamplePlaceholder:"z.B. Tr, Fensterrahmen, Decke...",specialLaunchPrices:"Spezielle Einfhrungspreise ",upgradeYourDesignAbilities:"Erweitern Sie Ihre Design-Fhigkeiten mit professionellen Werkzeugen und unbegrenzten Mglichkeiten",starter:"Starter",value:"Wert",professional:"Professionell",perMonth:"/Monat",imagesPerMonth:"{count} Bilder pro Monat",accessToAllTools:"Zugang zu allen Design-Werkzeugen",emailSupport:"E-Mail-Support",yourCurrentPlan:"Ihr aktueller Plan",selectPlan:"Plan auswhlen",mostValue:"Bestes Preis-Leistungs-Verhltnis",savePerImage:"35% pro Bild sparen",earlyAccess:"Frher Zugang zu neuen Funktionen",prioritySupport:"Prioritts-Support",historyStorage:"Verlaufsspeicherung",forProfessionals:"Fr Profis ",unlimitedImages:"Unbegrenzte Bilder",premiumSupport:"Premium-Support",commercialLicense:"Kommerzielle Lizenz",forIndustryProfessionals:"Fr Branchenprofis",save42PerImage:"42% pro Bild sparen",allAdvancedFeatures:"Alle erweiterten Funktionen",subscriptionDisclaimer:"Sie knnen Ihr Abonnement jederzeit kndigen. Die Abrechnung wird jeden Monat automatisch erneuert.",creditsDepletedThisMonth:"Credits diesen Monat aufgebraucht",reachedFreeLimit:"Kostenloses Limit erreicht",creditsDepletedDesc:"Ihre monatlichen Credits sind aufgebraucht. Upgraden Sie fr mehr.",reachedFreeLimitDesc:"Sie haben alle {limit} kostenlosen Credits verbraucht. Um ohne Einschrnkungen weiterzuarbeiten, upgraden Sie auf ein professionelles Abonnement.",currentUsage:"Aktuelle Nutzung",designs:"Designs",limitLabel:"Limit",upgradePlan:"Plan upgraden",goToProfessional:"Zu Professionell wechseln",notNowThanks:"Nicht jetzt, danke",imageUploadedSuccess:"Bild erfolgreich hochgeladen!",describeWhatToChange:"Beschreiben Sie im Eingabefeld unten, was Sie am Design ndern mchten",gotItLetsStart:"Verstanden, los geht's!",onboardingUploadTitle:"Bild hochladen",onboardingUploadDesc:"Laden Sie ein Bild Ihres Raumes hoch, um mit dem Design zu beginnen",onboardingStyleTitle:"Designstil whlen",onboardingStyleDesc:"Whlen Sie einen Designstil, der zu Ihnen passt",onboardingCreateTitle:"Design erstellen",onboardingCreateDesc:"Beschreiben Sie, was Sie ndern mchten, und klicken Sie auf Erstellen",onboardingItemTipTitle:"Element hinzufgen",onboardingItemTipDesc:"Fgen Sie Mbel, Dekoration oder andere Elemente zu Ihrem Design hinzu"},q9={appTitle:"Expert AI",appName:"Expert",guest:"Invit",loginToSaveDesigns:"Connectez-vous pour sauvegarder vos designs",loggedOutSuccess:"Dconnexion russie",login:"Connexion",logout:"Dconnexion",createAccount:"Crer un compte",createNewAccount:"Nouveau compte",welcomeBack:"Bienvenue ! Connectez-vous pour continuer",joinUs:"Rejoignez-nous pour sauvegarder vos designs et accder  toutes les fonctionnalits",email:"E-mail",password:"Mot de passe",confirmPassword:"Confirmer le mot de passe",fillAllFields:"Veuillez remplir tous les champs",passwordsNotMatch:"Les mots de passe ne correspondent pas",loginButton:"Se connecter",createAccountButton:"Crer un compte",forgotPassword:"Mot de passe oubli ?",enterEmailFirst:"Veuillez d'abord entrer une adresse e-mail",passwordResetEmailSent:"E-mail de rinitialisation envoy ! Vrifiez votre bote de rception et spam.",passwordResetError:"Erreur lors de l'envoi de l'e-mail de rinitialisation",termsAgreement:"En vous connectant, vous acceptez les",termsOfService:"Conditions d'utilisation",and:"et",privacyPolicy:"Politique de confidentialit",loggingIn:"Connexion en cours...",creatingAccount:"Cration du compte...",loginSuccess:"Connexion russie ! ",accountCreated:"Compte cr avec succs ! ",loginError:"Erreur de connexion",userNotFound:"Utilisateur non trouv",wrongPassword:"Mot de passe incorrect",emailInUse:"E-mail dj utilis",weakPassword:"Le mot de passe est trop faible",invalidEmail:"Adresse e-mail invalide",exitAccount:"Quitter le compte",loginWithEmail:"Connectez-vous avec votre e-mail pour sauvegarder vos designs",uploadImage:"Tlcharger une image",clickToUploadImage:"Cliquez ici pour tlcharger une image de la galerie",gallery:"Galerie",camera:"Camra",uploadItem:"Ajouter un lment",redesign:"Redessiner",more:"Plus",moreOptions:"Plus d'options",history:"Historique",noHistoryYet:"Pas encore d'historique",uploadedImagesWillAppear:"Les images que vous tlchargez et ditez apparatront ici",whatToChange:"Quoi changer ?",uploadImageFirst:"Veuillez d'abord tlcharger une image",uploadingImage:"Tlchargement de l'image...",errorUploadingImage:"Erreur lors du tlchargement de l'image",processingStarting:"Dmarrage...",processingMagic:"La magie opre",processing:"Traitement...",connectingToCloud:"Connexion au cloud... ",sendingToAI:"Envoi  l'AI... ",analyzingItem:"Analyse de l'lment... ",creatingDesign:"Cration du design... ",designStyle:"Style de design",wallColor:"Changer la couleur",lighting:"clairage",furniture:"Mobilier",doorsWindows:"Portes et fentres",bathroom:"Salle de bain",repairs:"Rparations",general:"Gnral",selectDesignStyle:"Slectionner le style de design",colorPalette:"Palette de couleurs",selectLightingType:"Slectionner le type d'clairage",selectFurnitureType:"Slectionner le type de meuble",selectRepairType:"Slectionner le type de rparation/dommage",bathroomOptions:"Options de salle de bain",whatToDo:"Que faire ?",describeChange:"Dcrivez le changement souhait...",cancel:"Annuler",execute:"Excuter",confirm:"Confirmer",close:"Fermer",tryAgain:"Ressayer",mySubscription:"Mon abonnement",creditsRemaining:"{count} crdits restants",upgradeToPremium:"Passer  Premium",iHaveCoupon:"J'ai un coupon",enterCouponCode:"Entrez le code coupon pour obtenir des crdits gratuits",enterCouponCodeTitle:"Entrer le code coupon",couponCode:"Code coupon",mustEnterCoupon:"Vous devez entrer un code coupon",couponActivated:"Coupon activ avec succs !",errorRedeemingCoupon:"Erreur lors de l'utilisation du coupon",redeemCoupon:"Utiliser le coupon",creditsAddedToAccount:"{count} crdits ajouts  votre compte ! ",contactUs:"Contactez-nous",phone:"Tlphone",message:"Message",writeYourMessage:"crivez votre message ici...",sendMessage:"Envoyer le message",messageSentSuccess:"Message envoy avec succs !",contentNotAllowed:"Contenu non autoris",requestFailed:"chec de la requte",oopsSomethingWrong:"Oups ! Quelque chose s'est mal pass",errorUnknown:"Erreur inconnue",imageSavedToGallery:"Image sauvegarde dans la galerie !",errorDownloadingImage:"Erreur lors du tlchargement de l'image",errorSharing:"Erreur lors du partage",comparison:"Comparaison",download:"Tlcharger",share:"Partager",revertToOriginal:"Revenir  l'original",loveItSave:"J'adore ! Sauvegarder",language:"Langue",selectLanguage:"Slectionner la langue",languageChanged:"Langue change",create:"Crer",tutorial:"Tutoriel",designHistory:"Historique des designs",professionalSubscription:"Plan professionnel",moreTools:"Plus d'outils",colors:"Couleurs",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Actif - Cliquez pour dsactiver",aiDesignerInactiveClickToEnable:"Inactif - Cliquez pour activer",yourDesigner:"Votre Designer",iHaveIdeasForYou:"J'ai quelques ides pour vous !",heyIHaveGreatIdeas:"Salut ! J'ai de superbes ides pour amliorer cette pice ",noThanks:"Non merci",processingNewDesign:"Traitement du nouveau design...",promptPlaceholder:"Dcrivez le design souhait... (ex: changer le canap en bleu, ajouter des plantes dans le coin)",bathroomShort:"Bain",skip:"Passer",next:"Suivant",finish:"Terminer",later:"Plus tard",loginNow:"Se connecter maintenant",startDesigning:"Commencer  designer",thankYou:"Merci !",sending:"Envoi...",specialLaunchPrices:"Prix de lancement spciaux ",upgradeYourDesignAbilities:"Amliorez vos capacits de design avec des outils professionnels et des possibilits illimites",starter:"Dbutant",value:"Valeur",professional:"Professionnel",perMonth:"/mois",imagesPerMonth:"{count} images par mois",accessToAllTools:"Accs  tous les outils de design",emailSupport:"Support par e-mail",yourCurrentPlan:"Votre plan actuel",selectPlan:"Choisir ce plan",mostValue:"Meilleur rapport qualit-prix",savePerImage:"conomisez 35% par image",earlyAccess:"Accs anticip aux nouvelles fonctionnalits",prioritySupport:"Support prioritaire",historyStorage:"Stockage de l'historique",forProfessionals:"Pour les pros ",unlimitedImages:"Images illimites",premiumSupport:"Support premium",commercialLicense:"Licence commerciale",forIndustryProfessionals:"Pour les professionnels du secteur",save42PerImage:"conomisez 42% par image",allAdvancedFeatures:"Toutes les fonctionnalits avances",subscriptionDisclaimer:"Vous pouvez annuler votre abonnement  tout moment. La facturation est automatiquement renouvele chaque mois.",creditsDepletedThisMonth:"Crdits puiss ce mois-ci",reachedFreeLimit:"Limite gratuite atteinte",creditsDepletedDesc:"Vos crdits mensuels sont puiss. Passez  un plan suprieur pour en obtenir plus.",reachedFreeLimitDesc:"Vous avez utilis tous vos {limit} crdits gratuits. Pour continuer sans restrictions, passez  un abonnement professionnel.",currentUsage:"Utilisation actuelle",designs:"Designs",limitLabel:"Limite",upgradePlan:"Amliorer le plan",goToProfessional:"Passer au plan professionnel",notNowThanks:"Pas maintenant, merci",imageUploadedSuccess:"Image tlcharge avec succs !",describeWhatToChange:"Dcrivez dans le champ ci-dessous ce que vous souhaitez modifier dans le design",gotItLetsStart:"Compris, commenons !",changeColor:"Changer la couleur",allWalls:"Tous les murs",paintAllWallsInRoom:"Peindre tous les murs de la pice",specificObject:"Objet spcifique",chooseWhatToPaint:"Choisir quoi peindre",selectWhatToPaint:"Slectionnez ce que vous voulez peindre",whatToPaint:"Quoi peindre ?",paintExamplePlaceholder:"ex: porte, cadre de fentre, plafond...",whatsApp:"WhatsApp",products:"Produits",cancelSearch:"Annuler la recherche",searchSimilarProducts:"Rechercher des produits similaires",whatDoYouThink:"Que pensez-vous du nouveau design ?",dragSliderForComparison:"Faites glisser le curseur pour comparer",returnToOriginal:"Retourner  l'image originale",loveItSaveDesign:"J'adore ! Sauvegarder le design",reds:"Rouges",oranges:"Oranges",yellows:"Jaunes",greens:"Verts",blues:"Bleus",purples:"Violets",greys:"Gris",blacksAndWhites:"Noirs et blancs",repairEverything:"Tout rparer",fixAndRepairEverything:"Rparer et rnover tout",messUpEverything:"Tout abmer",destroyAndCauseDamage:"Dtruire et causer des dgts",windowOptions:"Options de fentre",doorOptions:"Options de porte",pleaseSelectOption:"Veuillez slectionner une option dans la liste ci-dessous",fixedWindow:"Fentre fixe",slidingWindow:"Fentre coulissante",casementWindow:"Fentre  battant",tiltTurnWindow:"Fentre oscillo-battante",awningWindow:"Fentre  auvent",doubleHungWindow:"Fentre  guillotine",pocketWindow:"Fentre escamotable",archWindow:"Fentre en arc",pocketDoor:"Porte escamotable",frenchDoors:"Portes franaises",louverDoor:"Porte  persiennes",barnDoor:"Porte de grange",bathroomOptions:"Options de salle de bain",selectRepairType:"Slectionner le type de rparation",toiletOptions:"Options de toilettes",bathtubOptions:"Options de baignoire",showerOptions:"Options de douche",sinkOptions:"Options de lavabo",jacuzziSpaOptions:"Options de jacuzzi/spa",poolOptions:"Options de piscine",bidetSeat:"Sige de bidet",toiletSeat:"Sige de toilette",freestandingTub:"Baignoire lot",vintageTub:"Baignoire vintage",standardTub:"Baignoire standard",rainShower:"Douche pluie",showerEnclosure:"Cabine de douche",slidingShower:"Douche coulissante",pedestalSink:"Lavabo sur pied",stainlessSink:"Lavabo en inox",undermountSink:"Lavabo encastr",builtInJacuzzi:"Jacuzzi encastr",portableJacuzzi:"Jacuzzi portable",ingroundPool:"Piscine enterre",abovegroundPool:"Piscine hors-sol",onboardingUploadTitle:"Tlcharger une image",onboardingUploadDesc:"Commencez par tlcharger une photo de la pice que vous souhaitez designer. Vous n'en avez pas ? Pas de souci, nous utiliserons une image d'exemple.",onboardingStyleTitle:"Choisir un style de redesign",onboardingStyleDesc:'Slectionnez votre style prfr dans le menu latral. Essayez "Redesigner" pour voir diffrentes options.',onboardingCreateTitle:"Crer le design",onboardingCreateDesc:`Cliquez sur "Crer" et l'IA redesignera votre pice en quelques secondes !`,onboardingItemTipTitle:"Astuce : Ajouter un lment",onboardingItemTipDesc:`Vous voulez ajouter un meuble spcifique ? Utilisez le bouton "Ajouter un lment" pour tlcharger une image d'un objet et l'incorporer dans le design.`},K9={appTitle:"Esperto AI",appName:"Esperto",guest:"Ospite",loginToSaveDesigns:"Accedi per salvare i tuoi design",loggedOutSuccess:"Disconnessione riuscita",login:"Accedi",logout:"Esci",createAccount:"Crea account",createNewAccount:"Nuovo account",email:"Email",password:"Password",confirmPassword:"Conferma password",fillAllFields:"Compila tutti i campi",passwordsNotMatch:"Le password non corrispondono",uploadImage:"Carica immagine",gallery:"Galleria",camera:"Fotocamera",uploadItem:"Aggiungi elemento",redesign:"Ridisegna",more:"Altro",moreOptions:"Altre opzioni",history:"Cronologia",whatToChange:"Cosa cambiare?",processing:"Elaborazione...",designStyle:"Stile di design",wallColor:"Cambia colore",lighting:"Illuminazione",furniture:"Mobili",doorsWindows:"Porte e finestre",bathroom:"Bagno",repairs:"Riparazioni",general:"Generale",selectDesignStyle:"Seleziona stile di design",colorPalette:"Palette colori",selectLightingType:"Seleziona tipo di illuminazione",selectFurnitureType:"Seleziona tipo di mobile",cancel:"Annulla",execute:"Esegui",confirm:"Conferma",close:"Chiudi",tryAgain:"Riprova",mySubscription:"Il mio abbonamento",creditsRemaining:"{count} crediti rimanenti",upgradeToPremium:"Passa a Premium",iHaveCoupon:"Ho un coupon",enterCouponCode:"Inserisci il codice coupon per ottenere crediti gratuiti",couponCode:"Codice coupon",redeemCoupon:"Riscatta coupon",contactUs:"Contattaci",phone:"Telefono",message:"Messaggio",sendMessage:"Invia messaggio",contentNotAllowed:"Contenuto non consentito",requestFailed:"Richiesta fallita",oopsSomethingWrong:"Ops! Qualcosa  andato storto",comparison:"Confronto",download:"Scarica",share:"Condividi",language:"Lingua",selectLanguage:"Seleziona lingua",languageChanged:"Lingua cambiata",create:"Crea",tutorial:"Tutorial",designHistory:"Cronologia design",professionalSubscription:"Piano professionale",moreTools:"Altri strumenti",colors:"Colori",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Attivo - Clicca per disattivare",aiDesignerInactiveClickToEnable:"Inattivo - Clicca per attivare",promptPlaceholder:"Descrivi il design desiderato... (es: cambia il divano in blu, aggiungi piante nell'angolo)",bathroomShort:"Bagno",skip:"Salta",next:"Avanti",finish:"Fine",later:"Dopo",loginNow:"Accedi ora",startDesigning:"Inizia a progettare",thankYou:"Grazie!",sending:"Invio...",onboardingUploadTitle:"Carica immagine",onboardingUploadDesc:"Inizia caricando una foto della stanza che vuoi progettare. Non ne hai una? Nessun problema, useremo un'immagine di esempio.",onboardingStyleTitle:"Scegli uno stile di redesign",onboardingStyleDesc:'Seleziona il tuo stile preferito dal menu laterale. Prova "Ridisegna" per vedere diverse opzioni.',onboardingCreateTitle:"Crea il design",onboardingCreateDesc:`Clicca su "Crea" e l'IA ridisegner la tua stanza in pochi secondi!`,onboardingItemTipTitle:"Suggerimento: Aggiungi elemento",onboardingItemTipDesc:`Vuoi aggiungere un mobile specifico? Usa il pulsante "Aggiungi elemento" per caricare un'immagine di un oggetto e incorporarlo nel design.`},Y9={appTitle:"Especialista AI",appName:"Especialista",guest:"Convidado",loginToSaveDesigns:"Faa login para salvar seus designs",loggedOutSuccess:"Logout realizado com sucesso",login:"Entrar",logout:"Sair",createAccount:"Criar conta",createNewAccount:"Nova conta",email:"E-mail",password:"Senha",confirmPassword:"Confirmar senha",fillAllFields:"Por favor, preencha todos os campos",passwordsNotMatch:"As senhas no coincidem",uploadImage:"Enviar imagem",gallery:"Galeria",camera:"Cmera",uploadItem:"Adicionar item",redesign:"Redesenhar",more:"Mais",moreOptions:"Mais opes",history:"Histrico",whatToChange:"O que mudar?",processing:"Processando...",designStyle:"Estilo de design",wallColor:"Mudar cor",lighting:"Iluminao",furniture:"Mveis",doorsWindows:"Portas e janelas",bathroom:"Banheiro",repairs:"Reparos",general:"Geral",selectDesignStyle:"Selecionar estilo de design",colorPalette:"Paleta de cores",selectLightingType:"Selecionar tipo de iluminao",selectFurnitureType:"Selecionar tipo de mvel",cancel:"Cancelar",execute:"Executar",confirm:"Confirmar",close:"Fechar",tryAgain:"Tentar novamente",mySubscription:"Minha assinatura",creditsRemaining:"{count} crditos restantes",upgradeToPremium:"Atualizar para Premium",iHaveCoupon:"Tenho um cupom",enterCouponCode:"Digite o cdigo do cupom para obter crditos grtis",couponCode:"Cdigo do cupom",redeemCoupon:"Resgatar cupom",contactUs:"Fale conosco",phone:"Telefone",message:"Mensagem",sendMessage:"Enviar mensagem",contentNotAllowed:"Contedo no permitido",requestFailed:"Solicitao falhou",oopsSomethingWrong:"Ops! Algo deu errado",comparison:"Comparao",download:"Baixar",share:"Compartilhar",language:"Idioma",selectLanguage:"Selecionar idioma",languageChanged:"Idioma alterado",create:"Criar",tutorial:"Tutorial",designHistory:"Histrico de designs",professionalSubscription:"Plano profissional",moreTools:"Mais ferramentas",colors:"Cores",aiDesigner:"Designer AI",aiDesignerActiveClickToDisable:"Ativo - Clique para desativar",aiDesignerInactiveClickToEnable:"Inativo - Clique para ativar",promptPlaceholder:"Descreva o design desejado... (ex: mude o sof para azul, adicione plantas no canto)",bathroomShort:"Banho",skip:"Pular",next:"Prximo",finish:"Finalizar",later:"Depois",loginNow:"Entrar agora",startDesigning:"Comear a projetar",thankYou:"Obrigado!",sending:"Enviando...",onboardingUploadTitle:"Carregar imagem",onboardingUploadDesc:"Comece carregando uma foto do cmodo que voc quer projetar. No tem uma? Sem problemas, usaremos uma imagem de exemplo.",onboardingStyleTitle:"Escolha um estilo de redesign",onboardingStyleDesc:'Selecione seu estilo preferido no menu lateral. Tente "Redesenhar" para ver diferentes opes.',onboardingCreateTitle:"Criar design",onboardingCreateDesc:'Clique em "Criar" e a IA ir redesenhar seu cmodo em segundos!',onboardingItemTipTitle:"Dica: Adicionar elemento",onboardingItemTipDesc:'Quer adicionar um mvel especfico? Use o boto "Adicionar elemento" para carregar uma imagem de um objeto e incorpor-lo ao design.'},Q9={appTitle:"Expert AI",appName:"Expert",guest:"Gast",login:"Inloggen",logout:"Uitloggen",createAccount:"Account aanmaken",email:"E-mail",password:"Wachtwoord",uploadImage:"Afbeelding uploaden",gallery:"Galerij",camera:"Camera",uploadItem:"Item toevoegen",redesign:"Herontwerpen",more:"Meer",history:"Geschiedenis",whatToChange:"Wat wijzigen?",processing:"Verwerken...",designStyle:"Ontwerpstijl",wallColor:"Kleur wijzigen",lighting:"Verlichting",furniture:"Meubels",doorsWindows:"Deuren en ramen",bathroom:"Badkamer",repairs:"Reparaties",general:"Algemeen",cancel:"Annuleren",confirm:"Bevestigen",close:"Sluiten",tryAgain:"Opnieuw proberen",mySubscription:"Mijn abonnement",creditsRemaining:"{count} credits over",upgradeToPremium:"Upgrade naar Premium",iHaveCoupon:"Ik heb een coupon",couponCode:"Couponcode",redeemCoupon:"Coupon inwisselen",contactUs:"Contact",phone:"Telefoon",message:"Bericht",sendMessage:"Bericht verzenden",comparison:"Vergelijking",download:"Downloaden",share:"Delen",language:"Taal",selectLanguage:"Taal selecteren",create:"Maken",tutorial:"Handleiding",moreTools:"Meer tools",colors:"Kleuren",aiDesigner:"AI-ontwerper",promptPlaceholder:"Beschrijf het gewenste ontwerp... (bijv: verander de bank naar blauw, voeg planten toe in de hoek)",bathroomShort:"Bad",skip:"Overslaan",next:"Volgende",finish:"Voltooien",thankYou:"Dank u!",sending:"Verzenden...",onboardingUploadTitle:"Afbeelding uploaden",onboardingUploadDesc:"Begin met het uploaden van een foto van de kamer die je wilt ontwerpen. Heb je er geen? Geen probleem, we gebruiken een voorbeeldafbeelding.",onboardingStyleTitle:"Kies een herontwerpstijl",onboardingStyleDesc:'Selecteer je favoriete stijl in het zijmenu. Probeer "Herontwerpen" om verschillende opties te zien.',onboardingCreateTitle:"Ontwerp maken",onboardingCreateDesc:'Klik op "Maken" en de AI zal je kamer in seconden herontwerpen!',onboardingItemTipTitle:"Tip: Element toevoegen",onboardingItemTipDesc:'Wil je een specifiek meubelstuk toevoegen? Gebruik de knop "Element toevoegen" om een afbeelding van een object te uploaden en in het ontwerp op te nemen.'},J9={appTitle:"AI",appName:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... (: )",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:"",onboardingCreateTitle:"",onboardingCreateDesc:"AI",onboardingItemTipTitle:"",onboardingItemTipDesc:""},X9={appTitle:" AI",appName:"",guest:"",login:"",logout:"",createAccount:" ",email:"",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:" ?",processing:" ...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:" ",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:" ",couponCode:" ",redeemCoupon:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:"  ",colors:"",aiDesigner:"AI ",promptPlaceholder:"  ... (:   ,   )",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:" ...",onboardingUploadTitle:" ",onboardingUploadDesc:"    .    ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:'    . ""    .',onboardingCreateTitle:" ",onboardingCreateDesc:'""  AI     !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'   ? " "       .'},Z9={appTitle:"AI",appName:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... ()",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:'""',onboardingCreateTitle:"",onboardingCreateDesc:'""AI',onboardingItemTipTitle:"",onboardingItemTipDesc:'""'},e$={appTitle:"AI",appName:"",guest:"",login:"",logout:"",createAccount:"",email:"",password:"",uploadImage:"",gallery:"",camera:"",uploadItem:"",redesign:"",more:"",history:"",whatToChange:"",processing:"...",designStyle:"",wallColor:"",lighting:"",furniture:"",doorsWindows:"",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",tryAgain:"",mySubscription:"",creditsRemaining:"{count}",upgradeToPremium:"",iHaveCoupon:"",couponCode:"",redeemCoupon:"",contactUs:"",phone:"",message:"",sendMessage:"",comparison:"",download:"",share:"",language:"",selectLanguage:"",create:"",tutorial:"",moreTools:"",colors:"",aiDesigner:"AI",promptPlaceholder:"... ()",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"",sending:"...",onboardingUploadTitle:"",onboardingUploadDesc:"",onboardingStyleTitle:"",onboardingStyleDesc:'""',onboardingCreateTitle:"",onboardingCreateDesc:'""AI',onboardingItemTipTitle:"",onboardingItemTipDesc:'""'},t$={appTitle:"Expert AI",appName:"Expert",guest:"Host",login:"Pihlsit",logout:"Odhlsit",email:"E-mail",password:"Heslo",uploadImage:"Nahrt obrzek",gallery:"Galerie",camera:"Fotoapart",uploadItem:"Pidat poloku",redesign:"Petvoit",more:"Vce",history:"Historie",whatToChange:"Co zmnit?",processing:"Zpracovn...",designStyle:"Styl designu",wallColor:"Zmnit barvu",lighting:"Osvtlen",furniture:"Nbytek",doorsWindows:"Dvee a okna",bathroom:"Koupelna",repairs:"Opravy",general:"Obecn",cancel:"Zruit",confirm:"Potvrdit",close:"Zavt",mySubscription:"Moje pedplatn",creditsRemaining:"{count} kredit zbv",upgradeToPremium:"Pejt na Premium",iHaveCoupon:"Mm kupon",couponCode:"Kd kuponu",contactUs:"Kontaktujte ns",phone:"Telefon",message:"Zprva",sendMessage:"Odeslat zprvu",comparison:"Srovnn",download:"Sthnout",share:"Sdlet",language:"Jazyk",selectLanguage:"Vybrat jazyk",create:"Vytvoit",tutorial:"Nvod",moreTools:"Dal nstroje",colors:"Barvy",aiDesigner:"AI Designer",promptPlaceholder:"Popite poadovan design...",bathroomShort:"Koupelna",skip:"Peskoit",next:"Dal",finish:"Dokonit",thankYou:"Dkujeme!",sending:"Odesln...",onboardingUploadTitle:"Nahrt obrzek",onboardingUploadDesc:"Zante nahrnm fotky mstnosti, kterou chcete navrhnout.",onboardingStyleTitle:"Vyberte styl redesignu",onboardingStyleDesc:"Vyberte svj oblben styl v postrannm menu.",onboardingCreateTitle:"Vytvoit design",onboardingCreateDesc:'Kliknte na "Vytvoit" a AI petvo v pokoj!',onboardingItemTipTitle:"Tip: Pidat prvek",onboardingItemTipDesc:'Chcete pidat konkrtn nbytek? Pouijte tlatko "Pidat prvek".'},n$={appTitle:"Expert AI",appName:"Expert",guest:"Gst",login:"Log ind",logout:"Log ud",email:"E-mail",password:"Adgangskode",uploadImage:"Upload billede",gallery:"Galleri",camera:"Kamera",uploadItem:"Tilfj element",redesign:"Redesign",more:"Mere",history:"Historik",whatToChange:"Hvad skal ndres?",processing:"Behandler...",designStyle:"Designstil",wallColor:"Skift farve",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Dre og vinduer",bathroom:"Badevrelse",repairs:"Reparationer",general:"Generelt",cancel:"Annuller",confirm:"Bekrft",close:"Luk",mySubscription:"Mit abonnement",creditsRemaining:"{count} kreditter tilbage",upgradeToPremium:"Opgrader til Premium",iHaveCoupon:"Jeg har en kupon",couponCode:"Kuponkode",contactUs:"Kontakt os",phone:"Telefon",message:"Besked",sendMessage:"Send besked",comparison:"Sammenligning",download:"Download",share:"Del",language:"Sprog",selectLanguage:"Vlg sprog",create:"Opret",tutorial:"Vejledning",moreTools:"Flere vrktjer",colors:"Farver",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv det nskede design...",bathroomShort:"Bad",skip:"Spring over",next:"Nste",finish:"Afslut",thankYou:"Tak!",sending:"Sender...",onboardingUploadTitle:"Upload billede",onboardingUploadDesc:"Start med at uploade et foto af det rum, du vil designe.",onboardingStyleTitle:"Vlg en redesign-stil",onboardingStyleDesc:"Vlg din foretrukne stil i sidemenuen.",onboardingCreateTitle:"Opret design",onboardingCreateDesc:'Klik p "Opret" og AI vil redesigne dit rum!',onboardingItemTipTitle:"Tip: Tilfj element",onboardingItemTipDesc:'Vil du tilfje et specifikt mbel? Brug knappen "Tilfj element".'},r$={appTitle:"Expert AI",appName:"Expert",guest:"",login:"",logout:"",email:"Email",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:"  ;",processing:"...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:"  ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",mySubscription:"  ",creditsRemaining:"{count}  ",upgradeToPremium:"  Premium",iHaveCoupon:" ",couponCode:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:" ",colors:"",aiDesigner:"AI Designer",promptPlaceholder:"   ...",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:"...",onboardingUploadTitle:" ",onboardingUploadDesc:"         .",onboardingStyleTitle:"  ",onboardingStyleDesc:"        .",onboardingCreateTitle:" ",onboardingCreateDesc:'   ""   AI     !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'     ;    " ".'},i$={appTitle:"Expert AI",appName:"Expert",guest:"Klaline",login:"Logi sisse",logout:"Logi vlja",email:"E-post",password:"Parool",uploadImage:"Laadi pilt les",gallery:"Galerii",camera:"Kaamera",uploadItem:"Lisa element",redesign:"Kujunda mber",more:"Rohkem",history:"Ajalugu",whatToChange:"Mida muuta?",processing:"Ttlemine...",designStyle:"Disainistiil",wallColor:"Muuda vrvi",lighting:"Valgustus",furniture:"Mbel",doorsWindows:"Uksed ja aknad",bathroom:"Vannituba",repairs:"Remont",general:"ldine",cancel:"Thista",confirm:"Kinnita",close:"Sulge",mySubscription:"Minu tellimus",creditsRemaining:"{count} krediiti alles",upgradeToPremium:"Tienda Premiumiks",iHaveCoupon:"Mul on kupong",couponCode:"Kupongi kood",contactUs:"Vta hendust",phone:"Telefon",message:"Snum",sendMessage:"Saada snum",comparison:"Vrdlus",download:"Laadi alla",share:"Jaga",language:"Keel",selectLanguage:"Vali keel",create:"Loo",tutorial:"Juhend",moreTools:"Rohkem triistu",colors:"Vrvid",aiDesigner:"AI Disainer",promptPlaceholder:"Kirjelda soovitud disaini...",bathroomShort:"Vann",skip:"Jta vahele",next:"Jrgmine",finish:"Lpeta",thankYou:"Aith!",sending:"Saatmine...",onboardingUploadTitle:"Laadi pilt les",onboardingUploadDesc:"Alusta laadides les foto toast, mida soovid kujundada.",onboardingStyleTitle:"Vali mber kujundamise stiil",onboardingStyleDesc:"Vali oma lemmik stiil klgmenst.",onboardingCreateTitle:"Loo disain",onboardingCreateDesc:'Klpsa "Loo" ja AI kujundab su toa mber!',onboardingItemTipTitle:"Vihje: Lisa element",onboardingItemTipDesc:'Soovid lisada konkreetse mblieseme? Kasuta nuppu "Lisa element".'},s$={appTitle:"Expert AI",appName:"Expert",guest:"Vieras",login:"Kirjaudu",logout:"Kirjaudu ulos",email:"Shkposti",password:"Salasana",uploadImage:"Lataa kuva",gallery:"Galleria",camera:"Kamera",uploadItem:"Lis kohde",redesign:"Suunnittele uudelleen",more:"Lis",history:"Historia",whatToChange:"Mit muuttaa?",processing:"Ksitelln...",designStyle:"Suunnittelutyyli",wallColor:"Vaihda vri",lighting:"Valaistus",furniture:"Huonekalut",doorsWindows:"Ovet ja ikkunat",bathroom:"Kylpyhuone",repairs:"Korjaukset",general:"Yleinen",cancel:"Peruuta",confirm:"Vahvista",close:"Sulje",mySubscription:"Tilaukseni",creditsRemaining:"{count} krediitti jljell",upgradeToPremium:"Pivit Premiumiin",iHaveCoupon:"Minulla on kuponki",couponCode:"Kuponkikoodi",contactUs:"Ota yhteytt",phone:"Puhelin",message:"Viesti",sendMessage:"Lhet viesti",comparison:"Vertailu",download:"Lataa",share:"Jaa",language:"Kieli",selectLanguage:"Valitse kieli",create:"Luo",tutorial:"Opas",moreTools:"Lis tykaluja",colors:"Vrit",aiDesigner:"AI-suunnittelija",promptPlaceholder:"Kuvaile haluamasi suunnittelu...",bathroomShort:"Kylpy",skip:"Ohita",next:"Seuraava",finish:"Valmis",thankYou:"Kiitos!",sending:"Lhetetn...",onboardingUploadTitle:"Lataa kuva",onboardingUploadDesc:"Aloita lataamalla kuva huoneesta, jonka haluat suunnitella.",onboardingStyleTitle:"Valitse uudelleensuunnittelun tyyli",onboardingStyleDesc:"Valitse suosikkityylisi sivuvalikosta.",onboardingCreateTitle:"Luo suunnitelma",onboardingCreateDesc:'Napsauta "Luo" ja AI suunnittelee huoneesi uudelleen!',onboardingItemTipTitle:"Vinkki: Lis elementti",onboardingItemTipDesc:'Haluatko list tietyn huonekalun? Kyt "Lis elementti" -painiketta.'},o$={appTitle:"Saineola AI",appName:"Saineola",guest:"Aoi",login:"Logil isteach",logout:"Logil amach",email:"Romhphost",password:"Pasfhocal",uploadImage:"Uasldil omh",gallery:"Gaileara",camera:"Ceamara",uploadItem:"Cuir mr leis",redesign:"Athdearadh",more:"Nos m",history:"Stair",whatToChange:"Cad le hathr?",processing:"Ag priseil...",designStyle:"Stl dearaidh",wallColor:"Athraigh dath",lighting:"Soilsi",furniture:"Troscn",doorsWindows:"Doirse agus fuinneoga",bathroom:"Seomra folctha",repairs:"Deisichin",general:"Ginearlta",cancel:"Cealaigh",confirm:"Deimhnigh",close:"Dn",mySubscription:"Mo shntis",creditsRemaining:"{count} creidiint fgtha",upgradeToPremium:"Uasghrdaigh go Primhe",iHaveCoupon:"T cpon agam",couponCode:"Cd cpin",contactUs:"Dan teagmhil linn",phone:"Fn",message:"Teachtaireacht",sendMessage:"Seol teachtaireacht",comparison:"Comparid",download:"osldil",share:"Roinn",language:"Teanga",selectLanguage:"Roghnaigh teanga",create:"Cruthaigh",tutorial:"Teagasc",moreTools:"Tuilleadh uirlis",colors:"Dathanna",aiDesigner:"Dearthir AI",promptPlaceholder:"Dan cur sos ar an dearadh at uait...",bathroomShort:"Folcadh",skip:"Scipeil",next:"Ar aghaidh",finish:"Crochnaigh",thankYou:"Go raibh maith agat!",sending:"Ag seoladh...",onboardingUploadTitle:"Uasldil omh",onboardingUploadDesc:"Tosaigh ag uasldil grianghraf den seomra a theastaonn uait a dhearadh.",onboardingStyleTitle:"Roghnaigh stl athdearaidh",onboardingStyleDesc:"Roghnaigh do stl is fearr leat n roghchlr taobh.",onboardingCreateTitle:"Cruthaigh dearadh",onboardingCreateDesc:'Cliceil "Cruthaigh" agus danfaidh an AI athdearadh ar do sheomra!',onboardingItemTipTitle:"Leid: Cuir mr leis",onboardingItemTipDesc:'Ar mhaith leat posa troscin ar leith a chur leis? sid an cnaipe "Cuir mr leis".'},a$={appTitle:"Expert AI",appName:"Expert",guest:"Gost",login:"Prijava",logout:"Odjava",email:"E-pota",password:"Lozinka",uploadImage:"Prenesi sliku",gallery:"Galerija",camera:"Kamera",uploadItem:"Dodaj stavku",redesign:"Redizajniraj",more:"Vie",history:"Povijest",whatToChange:"to promijeniti?",processing:"Obrada...",designStyle:"Stil dizajna",wallColor:"Promijeni boju",lighting:"Rasvjeta",furniture:"Namjetaj",doorsWindows:"Vrata i prozori",bathroom:"Kupaonica",repairs:"Popravci",general:"Openito",cancel:"Odustani",confirm:"Potvrdi",close:"Zatvori",mySubscription:"Moja pretplata",creditsRemaining:"{count} kredita preostalo",upgradeToPremium:"Nadogradi na Premium",iHaveCoupon:"Imam kupon",couponCode:"Kod kupona",contactUs:"Kontaktirajte nas",phone:"Telefon",message:"Poruka",sendMessage:"Poalji poruku",comparison:"Usporedba",download:"Preuzmi",share:"Podijeli",language:"Jezik",selectLanguage:"Odaberi jezik",create:"Stvori",tutorial:"Vodi",moreTools:"Vie alata",colors:"Boje",aiDesigner:"AI Dizajner",promptPlaceholder:"Opiite eljeni dizajn...",bathroomShort:"Kupaonica",skip:"Preskoi",next:"Dalje",finish:"Zavri",thankYou:"Hvala!",sending:"Slanje...",onboardingUploadTitle:"Prenesi sliku",onboardingUploadDesc:"Zaponite uitavanjem fotografije sobe koju elite dizajnirati.",onboardingStyleTitle:"Odaberite stil redizajna",onboardingStyleDesc:"Odaberite eljeni stil iz bonog izbornika.",onboardingCreateTitle:"Kreiraj dizajn",onboardingCreateDesc:'Kliknite "Stvori" i AI e redizajnirati vau sobu!',onboardingItemTipTitle:"Savjet: Dodaj element",onboardingItemTipDesc:'elite dodati odreeni komad namjetaja? Koristite gumb "Dodaj stavku".'},l$={appTitle:"Expert AI",appName:"Expert",guest:"Vendg",login:"Bejelentkezs",logout:"Kijelentkezs",email:"E-mail",password:"Jelsz",uploadImage:"Kp feltltse",gallery:"Galria",camera:"Kamera",uploadItem:"Elem hozzadsa",redesign:"jratervezs",more:"Tbb",history:"Elzmnyek",whatToChange:"Mit vltoztassunk?",processing:"Feldolgozs...",designStyle:"Tervezsi stlus",wallColor:"Szn mdostsa",lighting:"Vilgts",furniture:"Btor",doorsWindows:"Ajtk s ablakok",bathroom:"Frdszoba",repairs:"Javtsok",general:"ltalnos",cancel:"Mgse",confirm:"Megersts",close:"Bezrs",mySubscription:"Elfizetsem",creditsRemaining:"{count} kredit maradt",upgradeToPremium:"Frissts Premiumra",iHaveCoupon:"Van kuponom",couponCode:"Kuponkd",contactUs:"Kapcsolat",phone:"Telefon",message:"zenet",sendMessage:"zenet kldse",comparison:"sszehasonlts",download:"Letlts",share:"Megoszts",language:"Nyelv",selectLanguage:"Nyelv kivlasztsa",create:"Ltrehozs",tutorial:"tmutat",moreTools:"Tovbbi eszkzk",colors:"Sznek",aiDesigner:"AI Tervez",promptPlaceholder:"rja le a kvnt dizjnt...",bathroomShort:"Frd",skip:"Kihagys",next:"Kvetkez",finish:"Befejezs",thankYou:"Ksznjk!",sending:"Klds...",onboardingUploadTitle:"Kp feltltse",onboardingUploadDesc:"Kezdje el egy fnykp feltltsvel a szobrl, amelyet tervezni szeretne.",onboardingStyleTitle:"Vlasszon jratervezsi stlust",onboardingStyleDesc:"Vlassza ki kedvenc stlust az oldals menbl.",onboardingCreateTitle:"Terv ltrehozsa",onboardingCreateDesc:'Kattintson a "Ltrehozs" gombra, s az AI jratervezi a szobjt!',onboardingItemTipTitle:"Tipp: Elem hozzadsa",onboardingItemTipDesc:'Szeretne hozzadni egy adott btordarabot? Hasznlja az "Elem hozzadsa" gombot.'},c$={appTitle:"Expert AI",appName:"Expert",guest:"Gestur",login:"Innskr",logout:"tskr",email:"Netfang",password:"Lykilor",uploadImage:"Hlaa upp mynd",gallery:"Myndasafn",camera:"Myndavl",uploadItem:"Bta vi hlut",redesign:"Endurhanna",more:"Meira",history:"Saga",whatToChange:"Hva  a breyta?",processing:"Vinnur...",designStyle:"Hnnunarstll",wallColor:"Breyta lit",lighting:"Lsing",furniture:"Hsggn",doorsWindows:"Hurir og gluggar",bathroom:"Baherbergi",repairs:"Vigerir",general:"Almennt",cancel:"Htta vi",confirm:"Stafesta",close:"Loka",mySubscription:"skriftin mn",creditsRemaining:"{count} inneign eftir",upgradeToPremium:"Uppfra  Premium",iHaveCoupon:"g er me afslttarka",couponCode:"Afslttarki",contactUs:"Hafu samband",phone:"Smi",message:"Skilabo",sendMessage:"Senda skilabo",comparison:"Samanburur",download:"Skja",share:"Deila",language:"Tunguml",selectLanguage:"Velja tunguml",create:"Ba til",tutorial:"Leibeiningar",moreTools:"Fleiri verkfri",colors:"Litir",aiDesigner:"AI Hnnuur",promptPlaceholder:"Lstu skilegri hnnun...",bathroomShort:"Ba",skip:"Sleppa",next:"Nsta",finish:"Ljka",thankYou:"Takk!",sending:"Sendir...",onboardingUploadTitle:"Hlaa upp mynd",onboardingUploadDesc:"Byrjau  a hlaa upp mynd af herberginu sem  vilt hanna.",onboardingStyleTitle:"Veldu endurhnnunarstl",onboardingStyleDesc:"Veldu upphalds stlinn inn r hliarvalmyndinni.",onboardingCreateTitle:"Ba til hnnun",onboardingCreateDesc:'Smelltu  "Ba til" og gervigreindin mun endurhanna herbergi itt!',onboardingItemTipTitle:"bending: Bta vi hlut",onboardingItemTipDesc:'Viltu bta vi tilteknu hsgagni? Notau "Bta vi hlut" hnappinn.'},u$={appTitle:" AI",appName:"",guest:"",login:"",logout:"",email:"-",password:"",uploadImage:" ",gallery:"",camera:"",uploadItem:" ",redesign:"",more:"",history:"",whatToChange:" ?",processing:"...",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:"  ",bathroom:"",repairs:"",general:"",cancel:"",confirm:"",close:"",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:" ",couponCode:" ",contactUs:"",phone:"",message:"",sendMessage:" ",comparison:"",download:"",share:"",language:"",selectLanguage:" ",create:"",tutorial:"",moreTools:" ",colors:"",aiDesigner:"AI ",promptPlaceholder:"  ...",bathroomShort:"",skip:"",next:"",finish:"",thankYou:"!",sending:"...",onboardingUploadTitle:" ",onboardingUploadDesc:"    ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:"     .",onboardingCreateTitle:" ",onboardingCreateDesc:' ""  AI   !',onboardingItemTipTitle:":  ",onboardingItemTipDesc:'   ?  " " .'},d$={appTitle:"Ekspertas AI",appName:"Ekspertas",guest:"Sveias",login:"Prisijungti",logout:"Atsijungti",email:"El. patas",password:"Slaptaodis",uploadImage:"kelti nuotrauk",gallery:"Galerija",camera:"Kamera",uploadItem:"Pridti element",redesign:"Perdaryti dizain",more:"Daugiau",history:"Istorija",whatToChange:"K keisti?",processing:"Apdorojama...",designStyle:"Dizaino stilius",wallColor:"Keisti spalv",lighting:"Apvietimas",furniture:"Baldai",doorsWindows:"Durys ir langai",bathroom:"Vonios kambarys",repairs:"Remontas",general:"Bendra",cancel:"Ataukti",confirm:"Patvirtinti",close:"Udaryti",mySubscription:"Mano prenumerata",creditsRemaining:"Liko {count} kredit",upgradeToPremium:"Pereiti  Premium",iHaveCoupon:"Turiu kupon",couponCode:"Kupono kodas",contactUs:"Susisiekite",phone:"Telefonas",message:"inut",sendMessage:"Sisti inut",comparison:"Palyginimas",download:"Atsisisti",share:"Dalintis",language:"Kalba",selectLanguage:"Pasirinkti kalb",create:"Kurti",tutorial:"Vadovas",moreTools:"Daugiau ranki",colors:"Spalvos",aiDesigner:"AI Dizaineris",promptPlaceholder:"Apibdinkite norim dizain...",bathroomShort:"Vonia",skip:"Praleisti",next:"Kitas",finish:"Baigti",thankYou:"Ai!",sending:"Siuniama...",onboardingUploadTitle:"kelti nuotrauk",onboardingUploadDesc:"Pradkite keldami nuotrauk kambario, kur norite suprojektuoti.",onboardingStyleTitle:"Pasirinkite naujo dizaino stili",onboardingStyleDesc:"Pasirinkite mgstam stili oniniame meniu.",onboardingCreateTitle:"Sukurti dizain",onboardingCreateDesc:'Spustelkite "Kurti" ir AI perdizainuos js kambar!',onboardingItemTipTitle:"Patarimas: Pridti element",onboardingItemTipDesc:'Norite pridti konkret bald? Naudokite mygtuk "Pridti element".'},h$={appTitle:"Expert AI",appName:"Expert",guest:"Gjest",login:"Logg inn",logout:"Logg ut",email:"E-post",password:"Passord",uploadImage:"Last opp bilde",gallery:"Galleri",camera:"Kamera",uploadItem:"Legg til element",redesign:"Redesign",more:"Mer",history:"Historikk",whatToChange:"Hva skal endres?",processing:"Behandler...",designStyle:"Designstil",wallColor:"Endre farge",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Drer og vinduer",bathroom:"Bad",repairs:"Reparasjoner",general:"Generelt",cancel:"Avbryt",confirm:"Bekreft",close:"Lukk",mySubscription:"Mitt abonnement",creditsRemaining:"{count} kreditter igjen",upgradeToPremium:"Oppgrader til Premium",iHaveCoupon:"Jeg har en kupong",couponCode:"Kupongkode",contactUs:"Kontakt oss",phone:"Telefon",message:"Melding",sendMessage:"Send melding",comparison:"Sammenligning",download:"Last ned",share:"Del",language:"Sprk",selectLanguage:"Velg sprk",create:"Opprett",tutorial:"Veiledning",moreTools:"Flere verkty",colors:"Farger",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv nsket design...",bathroomShort:"Bad",skip:"Hopp over",next:"Neste",finish:"Fullfr",thankYou:"Takk!",sending:"Sender...",onboardingUploadTitle:"Last opp bilde",onboardingUploadDesc:"Begynn med  laste opp et bilde av rommet du vil designe.",onboardingStyleTitle:"Velg en redesignstil",onboardingStyleDesc:"Velg din foretrukne stil fra sidemenyen.",onboardingCreateTitle:"Opprett design",onboardingCreateDesc:'Klikk p "Opprett" og AI vil redesigne rommet ditt!',onboardingItemTipTitle:"Tips: Legg til element",onboardingItemTipDesc:'Vil du legge til et spesifikt mbel? Bruk knappen "Legg til element".'},f$={appTitle:"Expert AI",appName:"Expert",guest:"Go",login:"Zaloguj",logout:"Wyloguj",email:"E-mail",password:"Haso",uploadImage:"Przelij zdjcie",gallery:"Galeria",camera:"Aparat",uploadItem:"Dodaj element",redesign:"Przeprojektuj",more:"Wicej",history:"Historia",whatToChange:"Co zmieni?",processing:"Przetwarzanie...",designStyle:"Styl projektowy",wallColor:"Zmie kolor",lighting:"Owietlenie",furniture:"Meble",doorsWindows:"Drzwi i okna",bathroom:"azienka",repairs:"Naprawy",general:"Oglne",cancel:"Anuluj",confirm:"Potwierd",close:"Zamknij",mySubscription:"Moja subskrypcja",creditsRemaining:"Pozostao {count} kredytw",upgradeToPremium:"Uaktualnij do Premium",iHaveCoupon:"Mam kupon",couponCode:"Kod kuponu",contactUs:"Kontakt",phone:"Telefon",message:"Wiadomo",sendMessage:"Wylij wiadomo",comparison:"Porwnanie",download:"Pobierz",share:"Udostpnij",language:"Jzyk",selectLanguage:"Wybierz jzyk",create:"Utwrz",tutorial:"Poradnik",moreTools:"Wicej narzdzi",colors:"Kolory",aiDesigner:"Projektant AI",promptPlaceholder:"Opisz podany projekt...",bathroomShort:"azienka",skip:"Pomi",next:"Dalej",finish:"Zakocz",thankYou:"Dzikujemy!",sending:"Wysyanie...",onboardingUploadTitle:"Przelij zdjcie",onboardingUploadDesc:"Zacznij od przesania zdjcia pokoju, ktry chcesz zaprojektowa.",onboardingStyleTitle:"Wybierz styl przeprojektowania",onboardingStyleDesc:"Wybierz swj ulubiony styl z menu bocznego.",onboardingCreateTitle:"Utwrz projekt",onboardingCreateDesc:'Kliknij "Utwrz" a AI przeprojektuje Twj pokj!',onboardingItemTipTitle:"Wskazwka: Dodaj element",onboardingItemTipDesc:'Chcesz doda konkretny mebel? Uyj przycisku "Dodaj element".'},m$={appTitle:"Expert AI",appName:"Expert",guest:"Oaspete",login:"Conectare",logout:"Deconectare",email:"E-mail",password:"Parol",uploadImage:"ncarc imagine",gallery:"Galerie",camera:"Camer",uploadItem:"Adaug element",redesign:"Redesign",more:"Mai mult",history:"Istoric",whatToChange:"Ce s schimbm?",processing:"Se proceseaz...",designStyle:"Stil de design",wallColor:"Schimb culoarea",lighting:"Iluminat",furniture:"Mobilier",doorsWindows:"Ui i ferestre",bathroom:"Baie",repairs:"Reparaii",general:"General",cancel:"Anuleaz",confirm:"Confirm",close:"nchide",mySubscription:"Abonamentul meu",creditsRemaining:"{count} credite rmase",upgradeToPremium:"Upgrade la Premium",iHaveCoupon:"Am un cupon",couponCode:"Cod cupon",contactUs:"Contacteaz-ne",phone:"Telefon",message:"Mesaj",sendMessage:"Trimite mesaj",comparison:"Comparaie",download:"Descarc",share:"Distribuie",language:"Limb",selectLanguage:"Selecteaz limba",create:"Creeaz",tutorial:"Tutorial",moreTools:"Mai multe instrumente",colors:"Culori",aiDesigner:"Designer AI",promptPlaceholder:"Descrie designul dorit...",bathroomShort:"Baie",skip:"Sari",next:"Urmtorul",finish:"Finalizeaz",thankYou:"Mulumim!",sending:"Se trimite...",onboardingUploadTitle:"ncarc imagine",onboardingUploadDesc:"ncepe prin ncrcarea unei fotografii a camerei pe care vrei s o proiectezi.",onboardingStyleTitle:"Alege un stil de redesign",onboardingStyleDesc:"Selecteaz stilul preferat din meniul lateral.",onboardingCreateTitle:"Creeaz design",onboardingCreateDesc:'Apas pe "Creeaz" i AI va redesigna camera ta!',onboardingItemTipTitle:"Sfat: Adaug element",onboardingItemTipDesc:'Vrei s adaugi o pies de mobilier specific? Folosete butonul "Adaug element".'},p$={appTitle:"Expert AI",appName:"Expert",guest:"Gost",login:"Prijava",logout:"Odjava",email:"E-pota",password:"Geslo",uploadImage:"Naloi sliko",gallery:"Galerija",camera:"Kamera",uploadItem:"Dodaj element",redesign:"Preoblikuj",more:"Ve",history:"Zgodovina",whatToChange:"Kaj spremeniti?",processing:"Obdelava...",designStyle:"Slog oblikovanja",wallColor:"Spremeni barvo",lighting:"Osvetlitev",furniture:"Pohitvo",doorsWindows:"Vrata in okna",bathroom:"Kopalnica",repairs:"Popravila",general:"Splono",cancel:"Preklii",confirm:"Potrdi",close:"Zapri",mySubscription:"Moja naronina",creditsRemaining:"Preostalo {count} kreditov",upgradeToPremium:"Nadgradi na Premium",iHaveCoupon:"Imam kupon",couponCode:"Koda kupona",contactUs:"Kontaktirajte nas",phone:"Telefon",message:"Sporoilo",sendMessage:"Polji sporoilo",comparison:"Primerjava",download:"Prenesi",share:"Deli",language:"Jezik",selectLanguage:"Izberi jezik",create:"Ustvari",tutorial:"Vodi",moreTools:"Ve orodij",colors:"Barve",aiDesigner:"AI Oblikovalec",promptPlaceholder:"Opiite eleno oblikovanje...",bathroomShort:"Kopalnica",skip:"Preskoi",next:"Naprej",finish:"Konaj",thankYou:"Hvala!",sending:"Poiljanje...",onboardingUploadTitle:"Naloi sliko",onboardingUploadDesc:"Zanite z nalaganjem fotografije sobe, ki jo elite oblikovati.",onboardingStyleTitle:"Izberite slog preoblikovanja",onboardingStyleDesc:"Izberite svoj najljubi slog iz stranskega menija.",onboardingCreateTitle:"Ustvarite oblikovanje",onboardingCreateDesc:'Kliknite "Ustvari" in AI bo preoblikoval vao sobo!',onboardingItemTipTitle:"Nasvet: Dodajte element",onboardingItemTipDesc:'elite dodati doloen kos pohitva? Uporabite gumb "Dodaj element".'},g$={appTitle:"Expert AI",appName:"Expert",guest:"Gst",login:"Logga in",logout:"Logga ut",email:"E-post",password:"Lsenord",uploadImage:"Ladda upp bild",gallery:"Galleri",camera:"Kamera",uploadItem:"Lgg till objekt",redesign:"Designa om",more:"Mer",history:"Historik",whatToChange:"Vad ska ndras?",processing:"Bearbetar...",designStyle:"Designstil",wallColor:"ndra frg",lighting:"Belysning",furniture:"Mbler",doorsWindows:"Drrar och fnster",bathroom:"Badrum",repairs:"Reparationer",general:"Allmnt",cancel:"Avbryt",confirm:"Bekrfta",close:"Stng",mySubscription:"Min prenumeration",creditsRemaining:"{count} krediter kvar",upgradeToPremium:"Uppgradera till Premium",iHaveCoupon:"Jag har en kupong",couponCode:"Kupongkod",contactUs:"Kontakta oss",phone:"Telefon",message:"Meddelande",sendMessage:"Skicka meddelande",comparison:"Jmfrelse",download:"Ladda ner",share:"Dela",language:"Sprk",selectLanguage:"Vlj sprk",create:"Skapa",tutorial:"Handledning",moreTools:"Fler verktyg",colors:"Frger",aiDesigner:"AI Designer",promptPlaceholder:"Beskriv nskad design...",bathroomShort:"Bad",skip:"Hoppa ver",next:"Nsta",finish:"Slutfr",thankYou:"Tack!",sending:"Skickar...",onboardingUploadTitle:"Ladda upp bild",onboardingUploadDesc:"Brja med att ladda upp ett foto av rummet du vill designa.",onboardingStyleTitle:"Vlj en omdesignstil",onboardingStyleDesc:"Vlj din favoritstil frn sidomenyn.",onboardingCreateTitle:"Skapa design",onboardingCreateDesc:'Klicka p "Skapa" s omdesignar AI ditt rum!',onboardingItemTipTitle:"Tips: Lgg till element",onboardingItemTipDesc:'Vill du lgga till en specifik mbel? Anvnd knappen "Lgg till objekt".'},y$={IL:"he",SA:"ar",AE:"ar",EG:"ar",JO:"ar",LB:"ar",SY:"ar",IQ:"ar",KW:"ar",QA:"ar",BH:"ar",OM:"ar",YE:"ar",LY:"ar",TN:"ar",MA:"ar",DZ:"ar",DE:"de",AT:"de",CH:"de",LI:"de",ES:"es",MX:"es",AR:"es",CO:"es",PE:"es",VE:"es",CL:"es",EC:"es",GT:"es",CU:"es",BO:"es",DO:"es",HN:"es",PY:"es",SV:"es",NI:"es",CR:"es",PA:"es",UY:"es",PR:"es",FR:"fr",BE:"fr",CA:"fr",SN:"fr",CI:"fr",ML:"fr",BF:"fr",NE:"fr",TG:"fr",BJ:"fr",GA:"fr",CG:"fr",CD:"fr",CM:"fr",MG:"fr",HT:"fr",IT:"it",SM:"it",VA:"it",PT:"pt",BR:"pt",AO:"pt",MZ:"pt",NL:"nl",PL:"pl",RU:"en",BY:"en",KZ:"en",UA:"en",JP:"ja",KR:"ko",CN:"zh",TW:"zh",HK:"zh_HK",MO:"zh_HK",SE:"sv",NO:"nb",DK:"da",FI:"fi",CZ:"cs",HU:"hu",RO:"ro",GR:"el",CY:"el",HR:"hr",SI:"sl",LT:"lt",EE:"et",IS:"is",GE:"ka",IE:"ga",US:"en",GB:"en",AU:"en",NZ:"en",ZA:"en",IN:"en",PH:"en",SG:"en",MY:"en",NG:"en",KE:"en",GH:"en",TZ:"en",UG:"en",ZW:"en",JM:"en",TT:"en",BB:"en",BS:"en",BZ:"en",GY:"en"},jy=["he","ar"],vp=[{code:"en",name:"English",nativeName:"English"},{code:"ar",name:"Arabic",nativeName:""},{code:"cs",name:"Czech",nativeName:"etina"},{code:"da",name:"Danish",nativeName:"Dansk"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"el",name:"Greek",nativeName:""},{code:"es",name:"Spanish",nativeName:"Espaol"},{code:"et",name:"Estonian",nativeName:"Eesti"},{code:"fi",name:"Finnish",nativeName:"Suomi"},{code:"fr",name:"French",nativeName:"Franais"},{code:"ga",name:"Irish",nativeName:"Gaeilge"},{code:"he",name:"Hebrew",nativeName:""},{code:"hr",name:"Croatian",nativeName:"Hrvatski"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"is",name:"Icelandic",nativeName:"slenska"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"ja",name:"Japanese",nativeName:""},{code:"ka",name:"Georgian",nativeName:""},{code:"ko",name:"Korean",nativeName:""},{code:"lt",name:"Lithuanian",nativeName:"Lietuvi"},{code:"nb",name:"Norwegian",nativeName:"Norsk"},{code:"nl",name:"Dutch",nativeName:"Nederlands"},{code:"pl",name:"Polish",nativeName:"Polski"},{code:"pt",name:"Portuguese",nativeName:"Portugus"},{code:"ro",name:"Romanian",nativeName:"Romn"},{code:"sl",name:"Slovenian",nativeName:"Slovenina"},{code:"sv",name:"Swedish",nativeName:"Svenska"},{code:"zh_HK",name:"Cantonese",nativeName:""},{code:"zh",name:"Chinese",nativeName:""}],Yu={en:{appTitle:"Expert AI",appName:"Expert",guest:"Guest",loginToSaveDesigns:"Log in to save your designs",loggedOutSuccess:"Logged out successfully",login:"Login",logout:"Logout",createAccount:"Create Account",createNewAccount:"New Account",welcomeBack:"Welcome back! Log in to continue",joinUs:"Join us to save designs and access all features",email:"Email",password:"Password",confirmPassword:"Confirm Password",fillAllFields:"Please fill all fields",passwordsNotMatch:"Passwords do not match",loginButton:"Log In",createAccountButton:"Create Account",forgotPassword:"Forgot password?",enterEmailFirst:"Please enter an email address first",passwordResetEmailSent:"Password reset email sent! Check your inbox and spam folder.",passwordResetError:"Error sending password reset email",termsAgreement:"By logging in you agree to the",termsOfService:"Terms of Service",and:"and",privacyPolicy:"Privacy Policy",privacyPolicyUrl:"https://moomhe.com/privacy-en.html",termsOfServiceUrl:"https://moomhe.com/eula-en.html",loggingIn:"Logging in...",creatingAccount:"Creating account...",loginSuccess:"Logged in successfully! ",accountCreated:"Account created successfully! ",loginError:"Login error",userNotFound:"User not found",wrongPassword:"Wrong password",emailInUse:"Email already in use",weakPassword:"Password is too weak",invalidEmail:"Invalid email address",exitAccount:"Exit account",loginWithEmail:"Log in with email to save your designs",uploadImage:"Upload Image",clickToUploadImage:"Click here to upload an image from gallery",gallery:"Gallery",camera:"Camera",uploadItem:"Add Item",redesign:"Redesign",more:"More",moreOptions:"More Options",history:"History",noHistoryYet:"No history yet",uploadedImagesWillAppear:"Images you upload and edit will appear here",whatToChange:"What to change?",uploadImageFirst:"Please upload an image first",uploadingImage:"Uploading image...",errorUploadingImage:"Error uploading image",itemImageLoaded:"Item image loaded! Describe in the prompt where to add it.",addAttachedItem:"Add the attached item to the image",processingStarting:"Starting...",processingMagic:"The magic is happening",processing:"Processing...",connectingToCloud:"Connecting to cloud... ",sendingToAI:"Sending to AI... ",analyzingItem:"Analyzing item... ",creatingDesign:"Creating design... ",funPhrase1:"Sending the image through another dimension... ",funPhrase2:"Teaching the AI to appreciate good design... ",funPhrase3:"Convincing the pixels to cooperate... ",funPhrase4:"A little digital magic on the way... ",funPhrase5:"Asking the AI what it thinks... ",funPhrase6:"Mixing colors like a real artist... ",funPhrase7:"Calculating the perfect angle... ",funPhrase8:"Adding some style to your life... ",funPhrase9:"Making the room look more expensive... ",funPhrase10:"Activating the design magic... ",funPhrase11:"Consulting with the digital interior designers... ",funPhrase12:"Trying not to get too excited about the result... ",funPhrase13:"You'll see something amazing in a moment... ",funPhrase14:"Making sure everything is perfect for you... ",designStyle:"Design Style",wallColor:"Change Color",lighting:"Lighting",furniture:"Furniture",doorsWindows:"Doors & Windows",bathroom:"Bathroom",repairs:"Repairs",general:"General",selectDesignStyle:"Select Design Style",colorPalette:"Color Palette",colorReds:"Reds",colorOranges:"Oranges",colorYellows:"Yellows",colorGreens:"Greens",colorBlues:"Blues",colorPurples:"Purples",colorGrays:"Grays",colorWhitesAndBlacks:"Whites & Blacks",selectLightingType:"Select Lighting Type",selectFurnitureType:"Select Furniture Type",selectRepairType:"Select Repair/Damage Type",bathroomOptions:"Bathroom Options",pleaseSelectOption:"Please select an option from the list below.",repairEverything:"Repair everything",fixAndRepairEverything:"Fix and repair everything",messUpEverything:"Mess up everything",destroyAndCauseDamage:"Destroy and cause damage to everything",windowOptions:"Window Options",doorOptions:"Door Options",fixedWindow:"Fixed Window",slidingWindow:"Sliding Window",casementWindow:"Casement Window",tiltTurnWindow:"Tilt-Turn Window",awningWindow:"Awning Window",doubleHungWindow:"Double-Hung Window",pocketWindow:"Pocket Window",archWindow:"Arch Window",pocketDoor:"Pocket Door",frenchDoors:"French Doors",louverDoor:"Louver Door",barnDoor:"Barn Door",toiletOptions:"Toilet Options",bathtubOptions:"Bathtub Options",showerOptions:"Shower Options",sinkOptions:"Sink Options",jacuzziSpaOptions:"Jacuzzi/Spa Options",poolOptions:"Pool Options",bidetSeat:"Bidet Seat",toiletSeat:"Toilet Seat",freestandingTub:"Freestanding Tub",vintageTub:"Vintage Tub",standardTub:"Standard Tub",rainShower:"Rain Shower",showerEnclosure:"Shower Enclosure",slidingShower:"Sliding Shower",pedestalSink:"Pedestal Sink",stainlessSink:"Stainless Sink",undermountSink:"Undermount Sink",builtInJacuzzi:"Built-in Jacuzzi",portableJacuzzi:"Portable Jacuzzi",ingroundPool:"Inground Pool",abovegroundPool:"Above-ground Pool",whatToDo:"What to do?",describeChange:"Describe the desired change...",cancel:"Cancel",execute:"Execute",confirm:"Confirm",close:"Close",tryAgain:"Try Again",colorChange:"Change Color",allWalls:"All Walls",paintAllWalls:"Paint all walls in the room",specificObject:"Specific Object",selectWhatToPaint:"Choose what you want to paint",exampleObjects:"For example: sofa, ceiling, cabinet...",professionalSubscription:"Professional Plan",specialLaunchPrices:"Special launch prices ",purchaseFailed:"Purchase failed",yourCurrentPlan:"Your current plan",selectPlan:"Select Plan",perMonth:"/month",starterPlan:"Starter",valuePlan:"Value",proPlan:"Professional",imagesPerMonth:"{count} images per month",whatsappSupport:"WhatsApp Support",historyStorage:"History Storage",vipWhatsappSupport:"VIP WhatsApp Support",processingPriority:"Processing Priority",bestValue:"Best value: 4x more images! ",forProfessionals:"For professionals ",allDesignTools:"All design tools",fastSupport:"Fast support",noAds:"No ads",restorePurchases:"Restore Purchases",mySubscription:"My Subscription",creditsRemaining:"{count} credits remaining",upgradeToPremium:"Upgrade to Premium",iHaveCoupon:"I have a coupon",enterCouponCode:"Enter coupon code to get free credits",enterCouponCodeTitle:"Enter Coupon Code",enterCouponCodeSubtitle:"Enter the coupon code you received to get free credits",couponCode:"Coupon code",mustEnterCoupon:"You must enter a coupon code",couponActivated:"Coupon activated successfully!",errorRedeemingCoupon:"Error redeeming coupon",redeemCoupon:"Redeem Coupon",creditsAddedToAccount:"{count} credits added to your account! ",contactUs:"Contact Us",contactSubtitle:"We'd love to hear from you! Fill in the details and we'll get back to you soon.",phone:"Phone",message:"Message",writeYourMessage:"Write your message here...",enterPhoneOrEmail:"* Please enter at least phone or email",pleaseEnterPhoneOrEmail:"Please enter at least phone or email",pleaseEnterMessage:"Please enter a message",errorSendingMessage:"Error sending message. Please try again.",sendMessage:"Send Message",messageSentSuccess:"Message sent successfully!",contentNotAllowed:"Content Not Allowed",requestFailed:"Request Failed",oopsSomethingWrong:"Oops! Something went wrong",moderationError:`Cannot process this image or request.

The image or request may contain content that is not allowed for processing.

Try with a different image or change the request.`,timeoutError:`The request took too long.

Please try again later.`,genericError:`We couldn't process the request.

Try again or contact support if the issue persists.`,errorUnknown:"Unknown error",imageSavedToGallery:"Image saved to gallery!",errorDownloadingImage:"Error downloading image",errorSharing:"Error sharing",shareText:` I designed this with MoomHe AI!
 Want to try it too? https://moomhe.com`,comparison:"Comparison",download:"Download",share:"Share",revertToOriginal:"Revert to Original",loveItSave:"Love it! Save",whatsApp:"WhatsApp",products:"Products",cancelSearch:"Cancel Search",searchSimilarProducts:"Search Similar Products",whatDoYouThink:"What do you think of the new design?",dragSliderForComparison:"Drag the slider for full comparison",returnToOriginal:"Return to Original Image",loveItSaveDesign:"Love it! Save the Design",creditsFinishedThisMonth:"Credits finished for this month",creditsRanOut:"Credits ran out for this month",freeLimitReached:"You've reached the free usage limit",reachedFreeLimit:"You've reached the free usage limit",creditsLimitReached:"You've reached your credits limit. You can upgrade to a larger plan or wait until next month.",freeCreditsUsed:"You've used all your free credits. To continue designing without limits and get advanced features, upgrade to a professional plan.",currentUsage:"Current Usage",limit:"Limit",designs:"{count} designs",upgradePlan:"Upgrade Plan",goToProfessionalPlan:"Go to Professional Plan",goPro:"Go Pro",notNowThanks:"Not now, thanks",welcomeToPlan:"Welcome to {planName} plan!",thankYouForJoining:"Thank you for joining our subscribers family. Your account has been upgraded successfully and you now have access to all advanced features and additional credits.",creditsAddedToYourAccount:"Credits added to your account",unlimitedStyleAccess:"Unlimited access to all styles",supportCreators:"Support for creators and designers",startDesigning:"Start Designing",secureYourSubscription:"Secure Your Subscription",secureSubscriptionMessage:`To not lose the subscription you purchased, we recommend logging in with email.

This way you can restore your subscription on a new device or after reinstalling.`,later:"Later",loginNow:"Login Now",onboardingUploadTitle:"Upload Image",onboardingUploadDesc:"Start by uploading a photo of the room you want to design. Don't have one? No worries, we'll use a sample image.",onboardingStyleTitle:"Choose Redesign Style",onboardingStyleDesc:'Select your preferred style from the side menu. Try "Redesign" to see different options.',onboardingCreateTitle:"Create Design",onboardingCreateDesc:'Click "Create" and the AI will redesign your room in seconds!',onboardingItemTipTitle:"Extra Tip: Add Item",onboardingItemTipDesc:'Want to add a specific piece of furniture? Use the "Add Item" button to upload an image of an item and incorporate it into the design.',skip:"Skip",next:"Next",finish:"Finish",promptAddedToInput:"Prompt added - you can edit it and then tap Create",styleMediterranean:"Modern Mediterranean",styleWarmMinimalism:"Warm Minimalism",styleBiophilic:"Biophilic",styleModernLuxury:"Modern Luxury",styleJapandi:"Japandi",styleScandinavian:"Scandinavian",styleBohoChic:"Boho Chic",styleIndustrial:"Industrial",styleEarthyNatural:"Earthy Natural",styleJerusalem:"Jerusalem",styleMinimalist:"Minimalist",styleModernClassic:"Modern Classic",colorCategoryReds:"Reds",colorCategoryOranges:"Oranges",colorCategoryYellows:"Yellows",colorCategoryGreens:"Greens",colorCategoryBlues:"Blues",colorCategoryPurples:"Purples",colorCategoryGrays:"Grays",colorCategoryWhitesBlacks:"Whites & Blacks",lightingRecessed:"Recessed Lighting",lightingPendant:"Pendant Light",lightingChandelier:"Chandelier",lightingTableLamp:"Table Lamp",lightingFloorLamp:"Floor Lamp",lightingWallSconce:"Wall Sconce",lightingTrack:"Track Lighting",lightingCeiling:"Ceiling Fixture",lightingUnderCabinet:"Under-Cabinet Lighting",lightingDecorative:"Decorative Lights",lightingDay:"Day",lightingNight:"Night",lightingSunset:"Sunset",lightingSunrise:"Sunrise",furnitureSofa:"Sofa",furnitureSectional:"Sectional Sofa",furnitureArmchair:"Armchair",furnitureAccentChair:"Accent Chair",furnitureDiningChair:"Dining Chair",furnitureBarStool:"Bar Stool",furnitureSingleBed:"Single Bed",furnitureDoubleBed:"Double Bed",furnitureBeanbag:"Beanbag",furnitureOttoman:"Ottoman",furnitureBench:"Bench",furnitureCoffeeTable:"Coffee Table",furnitureEndTable:"End Table",furnitureNightstand:"Nightstand",furnitureDiningTable:"Dining Table",furnitureDesk:"Desk",furnitureDresser:"Dresser",furnitureWardrobe:"Wardrobe",furnitureBookcase:"Bookcase",furnitureTvStand:"TV Stand",furnitureCabinets:"Kitchen Cabinets",repairsFixEverything:"Fix everything",repairsRepairAll:"Fix and repair everything",repairsMessUp:"Mess up everything",repairsDestroy:"Destroy and cause damage to everything",windowPicture:"Picture Window",windowSliding:"Sliding Window",windowCasement:"Casement Window",windowTiltTurn:"Tilt and Turn Window",windowAwning:"Awning Window",windowSash:"Sash Window",windowPocket:"Pocket Window",windowArched:"Arched Window",doorPocket:"Pocket Door",doorFrench:"French Doors",doorLouvered:"Louvered Door",doorBarn:"Barn Door",searchWithLens:"Search",selectAreaToSearch:"Draw a rectangle around the item you want to search",searchingWithGoogleLens:"Searching with Google Lens...",selectAreaWithinImage:"Please select an area within the image",googleLensSearchFailed:"Search failed. Please try again.",deleteAccount:"Delete Account",deleteAccountWarning1Title:"Delete Account",deleteAccountWarning1Message:"Are you sure you want to delete your account? This will delete all your information and images and cannot be undone.",deleteAccountWarning2Title:"Final Confirmation",deleteAccountWarning2Message:"This action is irreversible! All your history and images will be permanently deleted. Are you 100% sure?",deleteAccountConfirm:"Yes, Delete Account",deletingAccount:"Deleting account...",accountDeleted:"Account deleted successfully",errorDeletingAccount:"Error deleting account",language:"Language",selectLanguage:"Select Language",languageChanged:"Language changed",create:"Create",subscriptionFree:"Free",subscriptionStarter:"Starter",subscriptionValue:"Value",subscriptionPro:"Professional",interiorDesign:"Interior & Exterior Design",repairsDamages:"Repairs & Damages",changeColor:"Change Color",angle:"Angle",addPlants:"Add Plants",enhanceLighting:"Enhance Lighting",addAccessories:"Add Accessories",addDetails:"Add Details",addMakeup:"Add Makeup",addBackground:"Add Background",bathroomShort:"Bathroom",tutorial:"Tutorial",designHistory:"Design History",activeSubscription:"Active Subscription",credits:"credits",loggedInAs:"Logged in as",promptPlaceholder:"Describe the desired design... (e.g., change the sofa to blue, add plants in the corner)",moreTools:"More Tools",colors:"Colors",aiDesigner:"AI Designer",aiDesignerActiveClickToDisable:"Active - Click to disable",aiDesignerInactiveClickToEnable:"Inactive - Click to enable",yourDesigner:"Your Designer",iHaveIdeasForYou:"I have some ideas for you!",heyIHaveGreatIdeas:"Hey! I have some great ideas to upgrade this room ",noThanks:"No thanks",processingNewDesign:"Processing new design...",promptUpdated:"Prompt updated. Click 'Create' to execute",tipClickMore:' Tip: Click "More" for shortcuts like colors, furniture, lighting and more!',writeRequestAndCreate:'Write your request below and click "Create"',loginRequired:"Login Required",loginRequiredMessage:"You need to log in or create an account to purchase a subscription.",wantToLogin:"Do you want to go to login?",thankYou:"Thank you!",messageReceived:"Your message has been received successfully.",willGetBack:"We will get back to you as soon as possible.",sending:"Sending...",creditsDepletedThisMonth:"Credits depleted this month",creditsDepletedDesc:"You've reached your credit limit ({limit} credits). You can upgrade to a larger plan or wait until next month.",reachedFreeLimitDesc:"You've used all {limit} of your free credits. To continue designing without limits and get advanced features, upgrade to a professional subscription.",limitLabel:"Limit",goToProfessional:"Go Professional",imageUploadedSuccess:"Great! Image uploaded",describeWhatToChange:`Now describe what you'd like to change in the image. For example: "Change the wall color to blue" or "Add plants in the corner".`,gotItLetsStart:"Got it, let's start!",upgradeYourDesignAbilities:"Upgrade your design capabilities with our great subscription plans. Choose the plan that best fits your needs.",accessToAllTools:"Access to all design tools",emailSupport:"Email support",savePerImage:"Save 35% per image",prioritySupport:"Priority support",earlyAccess:"Early access to new features",unlimitedImages:"Unlimited images",premiumSupport:"Premium support",commercialLicense:"Commercial license",unlimitedDesigns:"Unlimited designs!",currentPlanBadge:"Current",save42PerImage:"Save 42% per image",allAdvancedFeatures:"All advanced features",forIndustryProfessionals:"For industry professionals",subscriptionDisclaimer:"You can cancel your subscription at any time. Billing renews automatically each month.",categoryInteriorExterior:"Interior & Exterior Design",categoryGardensBalconies:"Gardens & Balconies",categoryVehicles:"Vehicles & Two-Wheelers",categoryTattoos:"Tattoos",categoryMakeupBeauty:"Makeup & Beauty",categoryAdvertisingProducts:"Advertising & Products",categoryProfileImage:"Profile & Image"},he:{appTitle:" AI",appName:"",guest:"",loginToSaveDesigns:"     ",loggedOutSuccess:" ",login:"",logout:"",createAccount:" ",createNewAccount:" ",welcomeBack:" !   ",joinUs:"        ",email:"",password:"",confirmPassword:" ",fillAllFields:"    ",passwordsNotMatch:"  ",loginButton:"",createAccountButton:" ",forgotPassword:" ?",enterEmailFirst:"    ",passwordResetEmailSent:"   !      .",passwordResetError:"    ",termsAgreement:"   ",termsOfService:" ",and:"",privacyPolicy:" ",privacyPolicyUrl:"https://moomhe.com/privacy.html",termsOfServiceUrl:"https://moomhe.com/eula.html",loggingIn:"...",creatingAccount:" ...",loginSuccess:" ! ",accountCreated:"  ! ",loginError:" ",userNotFound:"  ",wrongPassword:" ",emailInUse:"  ",weakPassword:"  ",invalidEmail:"   ",exitAccount:" ",loginWithEmail:"       ",uploadImage:" ",clickToUploadImage:"     ",gallery:"",camera:"",uploadItem:" ",redesign:" ",more:"",moreOptions:" ",history:"",noHistoryYet:"  ",uploadedImagesWillAppear:"    ",whatToChange:" ?",uploadImageFirst:"   ",uploadingImage:" ...",errorUploadingImage:"  ",itemImageLoaded:"  !     .",addAttachedItem:"    ",processingStarting:"...",processingMagic:" ",processing:"...",connectingToCloud:" ... ",sendingToAI:" -AI... ",analyzingItem:" ... ",creatingDesign:" ... ",funPhrase1:"    ... ",funPhrase2:"      ... ",funPhrase3:"    ... ",funPhrase4:"   ... ",funPhrase5:"      ... ",funPhrase6:"    ... ",funPhrase7:"   ... ",funPhrase8:"    ... ",funPhrase9:"    ... ",funPhrase10:"   ... ",funPhrase11:"    ... ",funPhrase12:"     ... ",funPhrase13:"    ... ",funPhrase14:"   ... ",designStyle:" ",wallColor:" ",lighting:"",furniture:"",doorsWindows:" ",bathroom:"",repairs:"",general:"",selectDesignStyle:"  ",colorPalette:" ",colorReds:"",colorOranges:"",colorYellows:"",colorGreens:"",colorBlues:"",colorPurples:"",colorGrays:"",colorWhitesAndBlacks:" ",selectLightingType:"  ",selectFurnitureType:"  ",selectRepairType:"  /",bathroomOptions:" ",pleaseSelectOption:"    .",repairEverything:"  ",fixAndRepairEverything:"   ",messUpEverything:"  ",destroyAndCauseDamage:"   ",windowOptions:" ",doorOptions:" ",fixedWindow:" ",slidingWindow:" ",casementWindow:" ",tiltTurnWindow:" -",awningWindow:"  ",doubleHungWindow:" ",pocketWindow:" ",archWindow:" ",pocketDoor:" ",frenchDoors:" ",louverDoor:" ",barnDoor:" ",toiletOptions:" ",bathtubOptions:" ",showerOptions:" ",sinkOptions:" ",jacuzziSpaOptions:" '/",poolOptions:" ",bidetSeat:" ",toiletSeat:" ",freestandingTub:" ",vintageTub:" ",standardTub:" ",rainShower:" ",showerEnclosure:"",slidingShower:" ",pedestalSink:" ",stainlessSink:" ",undermountSink:" ",builtInJacuzzi:"' ",portableJacuzzi:"' ",ingroundPool:"  ",abovegroundPool:"  ",whatToDo:" ?",describeChange:"   ...",cancel:"",execute:"",confirm:"",close:"",tryAgain:" ",colorChange:" ",allWalls:" ",paintAllWalls:"    ",specificObject:" ",selectWhatToPaint:"    ",exampleObjects:": , , ...",professionalSubscription:" ",specialLaunchPrices:"   ",purchaseFailed:" ",yourCurrentPlan:"  ",selectPlan:" ",perMonth:"/",starterPlan:"",valuePlan:"",proPlan:"",imagesPerMonth:"{count}  ",whatsappSupport:" ",historyStorage:" ",vipWhatsappSupport:" VIP ",processingPriority:" ",bestValue:" :  4  ! ",forProfessionals:" ",allDesignTools:"  ",fastSupport:" ",noAds:" ",restorePurchases:" ",mySubscription:" ",creditsRemaining:"{count}  ",upgradeToPremium:" ",iHaveCoupon:"  ",enterCouponCode:"      ",enterCouponCodeTitle:"  ",enterCouponCodeSubtitle:"        ",couponCode:" ",mustEnterCoupon:"   ",couponActivated:"  !",errorRedeemingCoupon:"  ",redeemCoupon:" ",creditsAddedToAccount:"{count}   ! ",contactUs:" ",contactSubtitle:"  !      .",phone:"",message:"",writeYourMessage:"    ...",enterPhoneOrEmail:"*      ",pleaseEnterPhoneOrEmail:"     ",pleaseEnterMessage:"  ",errorSendingMessage:"  .   .",sendMessage:" ",messageSentSuccess:"  !",contentNotAllowed:"  ",requestFailed:" ",oopsSomethingWrong:"!  ",moderationError:`      .

        .

       .`,timeoutError:`    .

   .`,genericError:`    .

       .`,errorUnknown:"  ",imageSavedToGallery:"  !",errorDownloadingImage:"  ",errorSharing:" ",shareText:`      AI!
   ? https://moomhe.com`,comparison:"",download:"",share:"",revertToOriginal:" ",loveItSave:"! ",whatsApp:"",products:"",cancelSearch:" ",searchSimilarProducts:"  ",whatDoYouThink:"    ?",dragSliderForComparison:"     ",returnToOriginal:"  ",loveItSaveDesign:"!   ",creditsFinishedThisMonth:"  ",creditsRanOut:"  ",freeLimitReached:"   ",reachedFreeLimit:"   ",creditsLimitReached:"   .          .",freeCreditsUsed:"    .        ,   .",currentUsage:" ",limit:"",designs:"{count} ",upgradePlan:" ",goToProfessionalPlan:"  ",goPro:" ",notNowThanks:" , ",welcomeToPlan:"   {planName}!",thankYouForJoining:"    .             .",creditsAddedToYourAccount:"  ",unlimitedStyleAccess:"    ",supportCreators:"  ",startDesigning:" ",secureYourSubscription:"   ",secureSubscriptionMessage:`     ,     .

          .`,later:" ",loginNow:" ",onboardingUploadTitle:" ",onboardingUploadDesc:"      .   ?  ,   .",onboardingStyleTitle:"  ",onboardingStyleDesc:'      .  " "    .',onboardingCreateTitle:" ",onboardingCreateDesc:'  "" -AI       !',onboardingItemTipTitle:" :  ",onboardingItemTipDesc:'   ?   " "        .',skip:"",next:"",finish:"",promptAddedToInput:"  -      ",styleMediterranean:"  ",styleWarmMinimalism:" ",styleBiophilic:"",styleModernLuxury:" ",styleJapandi:"",styleScandinavian:"",styleBohoChic:" ",styleIndustrial:"",styleEarthyNatural:" ",styleJerusalem:"",styleMinimalist:"",styleModernClassic:" ",colorCategoryReds:"",colorCategoryOranges:"",colorCategoryYellows:"",colorCategoryGreens:"",colorCategoryBlues:"",colorCategoryPurples:"",colorCategoryGrays:"",colorCategoryWhitesBlacks:" ",lightingRecessed:" ",lightingPendant:" ",lightingChandelier:"",lightingTableLamp:" ",lightingFloorLamp:" ",lightingWallSconce:" ",lightingTrack:" ",lightingCeiling:"  ",lightingUnderCabinet:"  ",lightingDecorative:" ",lightingDay:"",lightingNight:"",lightingSunset:"",lightingSunrise:"",furnitureSofa:"",furnitureSectional:" ",furnitureArmchair:"",furnitureAccentChair:" ",furnitureDiningChair:" ",furnitureBarStool:" ",furnitureSingleBed:" ",furnitureDoubleBed:" ",furnitureBeanbag:"",furnitureOttoman:"",furnitureBench:"",furnitureCoffeeTable:" ",furnitureEndTable:" ",furnitureNightstand:" ",furnitureDiningTable:" ",furnitureDesk:" ",furnitureDresser:"",furnitureWardrobe:" ",furnitureBookcase:"",furnitureTvStand:" ",furnitureCabinets:" ",repairsFixEverything:" ",repairsRepairAll:"  ",repairsMessUp:" ",repairsDestroy:"    ",windowPicture:" ",windowSliding:" ",windowCasement:" ",windowTiltTurn:"  ",windowAwning:" ",windowSash:" ",windowPocket:" ",windowArched:" ",doorPocket:" ",doorFrench:" ",doorLouvered:" ",doorBarn:" ",searchWithLens:"",selectAreaToSearch:"     ",searchingWithGoogleLens:" -Google Lens...",selectAreaWithinImage:"   ",googleLensSearchFailed:" .  .",deleteAccount:" ",deleteAccountWarning1Title:" ",deleteAccountWarning1Message:"       ?             .",deleteAccountWarning2Title:" ",deleteAccountWarning2Message:"   !      .    -100%?",deleteAccountConfirm:",   ",deletingAccount:" ...",accountDeleted:"  ",errorDeletingAccount:"  ",language:"",selectLanguage:" ",languageChanged:" ",create:"",subscriptionFree:"",subscriptionStarter:"",subscriptionValue:"",subscriptionPro:"",interiorDesign:"  ",repairsDamages:" ",changeColor:" ",angle:"",addPlants:" ",enhanceLighting:" ",addAccessories:" ",addDetails:" ",addMakeup:" ",addBackground:" ",bathroomShort:"",tutorial:"",designHistory:" ",activeSubscription:" ",credits:"",loggedInAs:" -",promptPlaceholder:"   ... (:     ,   )",moreTools:" ",colors:"",aiDesigner:" AI",aiDesignerActiveClickToDisable:" -  ",aiDesignerInactiveClickToEnable:" -  ",yourDesigner:" ",iHaveIdeasForYou:"    !",heyIHaveGreatIdeas:"!         ",noThanks:" ",processingNewDesign:"  ...",promptUpdated:"  .   ''  ",tipClickMore:' :   ""      , ,  !',writeRequestAndCreate:'       ""',loginRequired:" ",loginRequiredMessage:"       .",wantToLogin:"   ?",thankYou:" !",messageReceived:"   .",willGetBack:"   .",sending:"...",creditsDepletedThisMonth:"   ",creditsDepletedDesc:"    ({limit} ).         .",reachedFreeLimitDesc:"   {limit}   .        ,   .",limitLabel:"",goToProfessional:"  ",imageUploadedSuccess:"!  ",describeWhatToChange:'     . : "    "  "  ".',gotItLetsStart:",  !",upgradeYourDesignAbilities:"         .       .",accessToAllTools:"   ",emailSupport:" ",savePerImage:" 35%  ",prioritySupport:" ",earlyAccess:"   ",unlimitedImages:"  ",premiumSupport:" ",commercialLicense:" ",unlimitedDesigns:"  !",currentPlanBadge:"",save42PerImage:" 42%  ",allAdvancedFeatures:"  ",forIndustryProfessionals:"  ",subscriptionDisclaimer:"     .     . ..",categoryInteriorExterior:"  ",categoryGardensBalconies:" ",categoryVehicles:"  ",categoryTattoos:"",categoryMakeupBeauty:" ",categoryAdvertisingProducts:" ",categoryProfileImage:" "},ar:W9,es:H9,de:G9,fr:q9,it:K9,pt:Y9,nl:Q9,ja:J9,ko:X9,zh:Z9,zh_HK:e$,cs:t$,da:n$,el:r$,et:i$,fi:s$,ga:o$,hr:a$,hu:l$,is:c$,ka:u$,lt:d$,nb:h$,pl:f$,ro:m$,sl:p$,sv:g$},uN=F.createContext();async function yE(){try{return(await(await fetch("https://api.country.is/")).json()).country}catch(t){return console.warn("Could not get country by IP:",t),null}}function w$(t){return y$[t]||"en"}function v$(){const t=navigator.language||navigator.userLanguage,e=t.split("-")[0];return Yu[e]?e:t==="zh-HK"||t==="zh-TW"?"zh_HK":"en"}function _$({children:t}){const[e,n]=F.useState(()=>{const p=localStorage.getItem("app_language");return p&&Yu[p]?p:v$()}),[r,i]=F.useState(jy.includes(e)),[s,o]=F.useState(null),[a,l]=F.useState(!1);F.useEffect(()=>{localStorage.getItem("app_language")?yE().then(y=>{y&&o(y),l(!0)}):yE().then(y=>{if(y){o(y);const _=w$(y);Yu[_]&&(n(_),i(jy.includes(_)))}l(!0)})},[]),F.useEffect(()=>{document.documentElement.dir=r?"rtl":"ltr",document.documentElement.lang=e},[r,e]);const f={language:e,setLanguage:p=>{vp.some(_=>_.code===p)&&(n(p),i(jy.includes(p)),localStorage.setItem("app_language",p))},t:(p,y={})=>{var E,R;let _=((E=Yu[e])==null?void 0:E[p])||((R=Yu.en)==null?void 0:R[p])||p;return Object.keys(y).forEach(I=>{_=_.replace(new RegExp(`\\{${I}\\}`,"g"),y[I])}),_},isRTL:r,countryCode:s,isInitialized:a,supportedLanguages:vp};return d.jsx(uN.Provider,{value:f,children:t})}function qc(){const t=F.useContext(uN);if(!t)throw new Error("useLocalization must be used within a LocalizationProvider");return t}const b$=({step:t,steps:e,onNext:n,onSkip:r,onComplete:i})=>{const{t:s,isRTL:o}=qc(),[a,l]=F.useState(null),[u,h]=F.useState({width:window.innerWidth,height:window.innerHeight}),[f,p]=F.useState(window.innerWidth<1024),y=e[t];F.useEffect(()=>{const N=()=>{const B=window.innerWidth<1024;if(p(B),h({width:window.innerWidth,height:window.innerHeight}),y.targetRef&&y.targetRef.current){const x=y.targetRef.current.getBoundingClientRect();x.width>0&&x.height>0?l(x):l(null)}else l(null)};N(),window.addEventListener("resize",N),window.addEventListener("scroll",N,!0);const z=setTimeout(N,500);return()=>{window.removeEventListener("resize",N),window.removeEventListener("scroll",N,!0),clearTimeout(z)}},[t,y]);const _=t===e.length-1;if(!a)return d.jsxs("div",{className:"fixed inset-0 z-[100]",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:r}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white text-gray-900 p-6 rounded-2xl shadow-2xl w-full max-w-[340px] animate-bounce-in",children:[d.jsxs("div",{className:"flex justify-between items-start mb-3",dir:o?"rtl":"ltr",children:[d.jsx("h3",{className:"font-bold text-xl text-primary-600",children:y.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(rn,{size:20})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",dir:o?"rtl":"ltr",children:y.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:o?"rtl":"ltr",children:[d.jsx("div",{className:"flex gap-1.5",children:e.map((N,z)=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${z===t?"w-8 bg-primary-500":"w-2 bg-gray-200"}`},z))}),d.jsxs("button",{onClick:_?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[s(_?"finish":"next"),!_&&(o?d.jsx(TI,{size:16}):d.jsx(EI,{size:16}))]})]})]})})]});const E=f?Math.min(280,u.width-40):300,R=200,I=f?12:20,b={};let T="";if(f){let N=(u.width-E)/2;b.left=N,b.width=E;const z=a.top;u.height-a.bottom,z>R+I+50?(b.top=a.top-R-I+20,T="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(b.top=a.bottom+I,T="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]"),b.top=Math.max(20,Math.min(u.height-R-20,b.top))}else{const N=a.left>u.width-350,z=a.left<350;if(N){b.left=a.left-E-I;let B=a.top+a.height/2-80;B=Math.max(20,Math.min(u.height-R-20,B)),b.top=B,T="top-[80px] -right-[8px] -translate-y-1/2 border-l-white border-t-transparent border-b-transparent border-r-transparent border-[8px]"}else if(z){b.left=a.right+I;let B=a.top+a.height/2-80;B=Math.max(20,Math.min(u.height-R-20,B)),b.top=B,T="top-[80px] -left-[8px] -translate-y-1/2 border-r-white border-t-transparent border-b-transparent border-l-transparent border-[8px]"}else{let B=a.left+a.width/2-E/2;B=Math.max(20,Math.min(u.width-E-20,B)),b.left=B;const x=a.top;u.height-a.bottom,x>R+I?(b.top=a.top-180,T="bottom-[-8px] left-1/2 -translate-x-1/2 border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"):(b.top=a.bottom+I,T="top-[-8px] left-1/2 -translate-x-1/2 border-b-white border-r-transparent border-l-transparent border-t-transparent border-[8px]")}}return d.jsxs("div",{className:"fixed inset-0 z-[100] pointer-events-none",children:[d.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[d.jsx("defs",{children:d.jsxs("mask",{id:"spotlight-mask",children:[d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),d.jsx("rect",{x:a.left-5,y:a.top-5,width:a.width+10,height:a.height+10,rx:"12",fill:"black"})]})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:"url(#spotlight-mask)"})]}),d.jsx("div",{className:"absolute border-2 border-primary-400 rounded-xl animate-pulse pointer-events-none shadow-[0_0_15px_rgba(59,130,246,0.5)]",style:{left:a.left-5,top:a.top-5,width:a.width+10,height:a.height+10}}),d.jsxs("div",{className:`absolute bg-white text-gray-900 p-5 rounded-xl shadow-2xl pointer-events-auto animate-bounce-in origin-center transition-all duration-300 ${f?"":"w-[300px]"}`,style:b,children:[d.jsx("div",{className:`absolute w-0 h-0 border-solid ${T}`}),d.jsxs("div",{className:"flex justify-between items-start mb-2",dir:o?"rtl":"ltr",children:[d.jsx("h3",{className:"font-bold text-lg text-primary-600",children:y.title}),d.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:d.jsx(rn,{size:16})})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-5 leading-relaxed",dir:o?"rtl":"ltr",children:y.description}),d.jsxs("div",{className:"flex justify-between items-center",dir:o?"rtl":"ltr",children:[d.jsx("div",{className:"flex gap-1",children:e.map((N,z)=>d.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${z===t?"w-6 bg-primary-500":"w-1.5 bg-gray-200"}`},z))}),d.jsxs("button",{onClick:_?i:n,className:"bg-primary-600 hover:bg-primary-700 text-white px-5 py-2 rounded-lg text-sm font-medium transition-all hover:shadow-lg flex items-center gap-2",children:[s(_?"finish":"next"),!_&&(o?d.jsx(TI,{size:16}):d.jsx(EI,{size:16}))]})]})]})]})},I$=({color:t,onClose:e,onApply:n})=>{const[r,i]=F.useState(""),[s,o]=F.useState("all"),{t:a,isRTL:l}=qc(),u=f=>{const p=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);return p?{r:parseInt(p[1],16),g:parseInt(p[2],16),b:parseInt(p[3],16)}:null},h=()=>{const f=u(t.hex),p=f?`RGB(${f.r}, ${f.g}, ${f.b})`:t.hex;if(s==="all")n(`Change the color of all walls to ${t.value} (${t.ral}, ${p}) completely and opaquely, covering the original color entirely`);else if(r.trim()){const y=/[\u0590-\u05FF]/.test(r);n(y?`  ${r}  ${t.value} (${t.ral}, ${p})   ,      `:`Paint the ${r} in ${t.value} (${t.ral}, ${p}) color completely and opaquely, covering the original color entirely`)}};return d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[80] flex items-center justify-center p-4 animate-fade-in",dir:l?"rtl":"ltr",children:d.jsxs("div",{className:"bg-surface border border-white/10 rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-white/5",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.hex}}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:a("changeColor")})]}),d.jsx("button",{onClick:e,className:"text-textMuted hover:text-white transition-colors",children:d.jsx(rn,{size:20})})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="all",onChange:()=>o("all"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:a("allWalls")}),d.jsx("span",{className:"text-xs text-gray-400",children:a("paintAllWallsInRoom")})]})]}),d.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/10 cursor-pointer hover:bg-white/10 transition-all",children:[d.jsx("input",{type:"radio",name:"colorMode",checked:s==="custom",onChange:()=>o("custom"),className:"w-5 h-5 text-primary-500 focus:ring-offset-0 bg-transparent border-gray-500"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"font-medium text-white block",children:a("specificObject")}),d.jsx("span",{className:"text-xs text-gray-400",children:a("chooseWhatToPaint")})]})]})]}),s==="custom"&&d.jsxs("div",{className:"animate-slide-up",children:[d.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:a("whatToPaint")}),d.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:a("paintExamplePlaceholder"),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-primary-500/50 focus:ring-1 focus:ring-primary-500/50 transition-all",autoFocus:!0})]}),d.jsxs("div",{className:`pt-2 flex ${l?"justify-start":"justify-end"} gap-3`,children:[d.jsx("button",{onClick:e,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all",children:a("cancel")}),d.jsxs("button",{onClick:h,disabled:s==="custom"&&!r.trim(),className:"px-6 py-2 rounded-xl text-sm font-medium bg-primary-600 hover:bg-primary-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2 shadow-lg shadow-primary-900/20",children:[d.jsx("span",{children:a("confirm")}),d.jsx(Lw,{size:16})]})]})]})]})})},wE=({isOpen:t,onClose:e,onShowPricing:n,userSubscription:r,currentUsage:i,limit:s})=>{const[o,a]=F.useState(!1),{t:l,isRTL:u}=qc();return F.useEffect(()=>{a(!0)},[]),!t||!o?null:vv.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",dir:u?"rtl":"ltr",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden",children:[d.jsx("button",{onClick:e,className:`absolute top-4 ${u?"left-4":"right-4"} text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors`,children:d.jsx(rn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-secondary-500/20 rounded-full blur-3xl pointer-events-none"}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-tr from-primary-500/20 to-secondary-500/20 flex items-center justify-center mb-6 border border-white/10",children:d.jsx(Vd,{className:"w-8 h-8 text-primary-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r>0?l("creditsDepletedThisMonth"):l("reachedFreeLimit")}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:r>0?l("creditsDepletedDesc",{limit:s}):l("reachedFreeLimitDesc",{limit:s})}),d.jsxs("div",{className:"w-full bg-white/5 rounded-xl p-4 mb-8 border border-white/10 flex justify-between items-center",children:[d.jsxs("div",{className:u?"text-right":"text-left",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:l("currentUsage")}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[i," ",l("designs")]})]}),d.jsx("div",{className:"h-8 w-px bg-white/10 mx-4"}),d.jsxs("div",{className:u?"text-right":"text-left",children:[d.jsx("div",{className:"text-xs text-gray-400 mb-1",children:l("limitLabel")}),d.jsxs("div",{className:"text-lg font-bold text-white",children:[s," ",l("designs")]})]})]}),d.jsxs("button",{onClick:()=>{e(),n()},className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-600 text-white font-semibold shadow-lg shadow-primary-900/20 flex items-center justify-center gap-2 mb-3",children:[d.jsx(Vd,{className:"w-5 h-5"}),r>0?l("upgradePlan"):l("goToProfessional")]}),d.jsx("button",{onClick:e,className:"text-sm text-gray-400 hover:text-white transition-colors",children:l("notNowThanks")})]})]})}),document.body)},x$=({isOpen:t,onClose:e,subscriptionName:n})=>{const[r,i]=F.useState(!1);return F.useEffect(()=>{i(!0)},[]),!t||!r?null:vv.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md bg-surface relative overflow-hidden border-2 border-yellow-500/30 shadow-[0_0_50px_rgba(255,215,0,0.2)]",children:[d.jsx("button",{onClick:e,className:"absolute top-4 left-4 text-textMuted hover:text-white p-1 rounded-full hover:bg-white/10 transition-colors z-20",children:d.jsx(rn,{className:"w-5 h-5"})}),d.jsx("div",{className:"absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsx("div",{className:"absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 rounded-full blur-3xl pointer-events-none animate-pulse"}),d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-10 right-10 text-yellow-400/40 animate-bounce duration-1000",children:d.jsx(oy,{size:16,fill:"currentColor"})}),d.jsx("div",{className:"absolute bottom-20 right-20 text-yellow-400/30 animate-bounce duration-1500 delay-100",children:d.jsx(oy,{size:12,fill:"currentColor"})}),d.jsx("div",{className:"absolute top-20 left-10 text-yellow-400/30 animate-bounce duration-2000 delay-200",children:d.jsx(oy,{size:14,fill:"currentColor"})})]}),d.jsxs("div",{className:"p-8 flex flex-col items-center text-center relative z-10",children:[d.jsxs("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-yellow-400/30 to-orange-500/30 flex items-center justify-center mb-6 border border-yellow-500/30 shadow-lg shadow-yellow-500/20 relative",children:[d.jsx(Vd,{className:"w-10 h-10 text-yellow-400"}),d.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full p-1.5 shadow-lg",children:d.jsx(Lw,{className:"w-4 h-4 text-white stroke-[3]"})})]}),d.jsxs("h3",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-orange-400 mb-2",children:["   ",n,"!"]}),d.jsx("p",{className:"text-gray-300 mb-8 leading-relaxed",children:"    .             ."}),d.jsxs("div",{className:"w-full bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl p-4 mb-8 border border-yellow-500/20",children:[d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Hn,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100 mb-2",children:[d.jsx(Lw,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"    "})]}),d.jsxs("div",{className:"flex items-center gap-3 text-sm text-yellow-100",children:[d.jsx(Vd,{className:"w-4 h-4 text-yellow-400"}),d.jsx("span",{children:"  "})]})]}),d.jsxs("button",{onClick:e,className:"w-full py-3.5 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold shadow-lg shadow-orange-900/20 hover:shadow-orange-900/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2",children:[" ",d.jsx(Hn,{className:"w-5 h-5"})]})]})]})}),document.body)},vE=({beforeImage:t,afterImage:e})=>{const[n,r]=F.useState(50),i=F.useRef(null),s=F.useRef(!1),o=h=>{s.current=!0,l(h)},a=()=>{s.current=!1},l=h=>{if(!i.current)return;let f;h.touches?f=h.touches[0].clientX:f=h.clientX;const p=i.current.getBoundingClientRect(),_=Math.max(0,Math.min(f-p.left,p.width))/p.width*100;r(_)},u=h=>{s.current&&l(h)};return d.jsxs("div",{className:"relative w-full h-full select-none overflow-hidden group cursor-col-resize",ref:i,onMouseDown:o,onTouchStart:o,onMouseMove:u,onTouchMove:u,onMouseUp:a,onMouseLeave:a,onTouchEnd:a,children:[d.jsx("img",{src:e,alt:"After",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",draggable:!1}),d.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none overflow-hidden select-none",style:{clipPath:`inset(0 ${100-n}% 0 0)`},children:d.jsx("img",{src:t,alt:"Before",className:"absolute inset-0 w-full h-full object-contain select-none",draggable:!1})}),d.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-white cursor-col-resize z-10 shadow-[0_0_10px_rgba(0,0,0,0.5)]",style:{left:`${n}%`},children:d.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-lg text-primary-600 transition-transform group-hover:scale-110",children:d.jsx(Dw,{size:16})})}),d.jsx("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""}),d.jsx("div",{className:"absolute bottom-4 right-4 bg-primary-600/80 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-md pointer-events-none border border-white/10 z-20",children:""})]})},Fy="/assets/avatar-f01b7208.png",_E=({suggestions:t,onSelect:e,onClose:n,isMobile:r=!1,isThinking:i=!1,initialShowSuggestions:s=!0})=>{const{t:o,isRTL:a}=qc(),[l,u]=F.useState(!1),[h,f]=F.useState(!1);F.useEffect(()=>{if(i)u(!0),f(!1);else if(t&&t.length>0){const E=setTimeout(()=>{u(!0),f(!!s)},500);return()=>clearTimeout(E)}else u(!1)},[t,i,s]);const p=E=>{e(E),f(!1)},y=()=>{u(!1),setTimeout(()=>{n()},500)},_=()=>{!i&&t&&t.length>0&&f(!h)};return!i&&(!t||t.length===0)?null:r?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"relative group cursor-pointer",onClick:_,children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl border border-purple-400/40 overflow-hidden bg-purple-100/50 relative z-10 transition-transform duration-300 transform active:scale-95 flex items-center justify-center",children:d.jsx("img",{src:Fy,alt:"AI Designer",className:"w-full h-full object-cover opacity-90 hover:opacity-100",onError:E=>{E.target.onerror=null,E.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1 h-1 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),h&&!i&&d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end justify-center",onClick:()=>f(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10 max-h-[70vh] overflow-hidden flex flex-col",onClick:E=>E.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",dir:a?"rtl":"ltr",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-white/20 overflow-hidden bg-purple-100 flex-shrink-0",children:d.jsx("img",{src:Fy,alt:"AI",className:"w-full h-full object-cover"})}),d.jsxs("div",{className:a?"text-right":"text-left",children:[d.jsx("h3",{className:"text-white font-bold text-sm",children:o("yourDesigner")}),d.jsx("p",{className:"text-xs text-purple-300",children:o("iHaveIdeasForYou")})]})]}),d.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(rn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 p-1",children:t.map((E,R)=>d.jsxs("button",{onClick:()=>p(E),className:"w-full text-right p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(Hn,{className:"w-5 h-5 text-purple-400"}),d.jsx("span",{className:"text-white font-medium text-sm flex-1",children:E.label||E.title_he})]},R))})]})]})]}):d.jsx("div",{className:`fixed z-50 transition-all duration-500 ease-in-out ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-20 pointer-events-none"}`,style:{bottom:"40px",right:"40px",left:"auto",maxWidth:"400px"},children:d.jsxs("div",{className:"flex flex-col items-end gap-4",children:[" ",d.jsxs("div",{className:"flex items-end gap-3 flex-row-reverse",children:[" ",d.jsxs("div",{className:"relative group cursor-pointer",onClick:_,children:[d.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-white shadow-xl overflow-hidden bg-purple-100 relative z-10 transition-transform duration-300 transform group-hover:scale-105",children:d.jsx("img",{src:Fy,alt:"AI Designer",className:"w-full h-full object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"}})}),i?d.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1 shadow-sm z-20 animate-pulse",children:d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),d.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):d.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-5 h-5 rounded-full border-2 border-white z-20"})]}),!i&&h&&d.jsxs("div",{className:`bg-white rounded-2xl p-4 shadow-xl border border-purple-100 max-w-[250px] animate-bounce-in relative ${a?"rounded-br-none":"rounded-bl-none"}`,children:[d.jsx("div",{className:`absolute bottom-0 w-0 h-0 border-b-[12px] border-b-white transform ${a?"right-[-8px] border-r-[8px] border-r-transparent border-l-[0px] border-l-transparent -rotate-12":"left-[-8px] border-l-[8px] border-l-transparent border-r-[0px] border-r-transparent rotate-12"}`}),d.jsx("p",{className:`text-gray-800 text-sm font-medium ${a?"text-right":"text-left"}`,dir:a?"rtl":"ltr",children:o("heyIHaveGreatIdeas")})]})]}),!i&&h&&t&&t.length>0&&d.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-4 rounded-2xl shadow-2xl border border-white/50 w-full animate-fade-in-up",children:[d.jsx("div",{className:"flex flex-col gap-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map((E,R)=>d.jsxs("button",{onClick:()=>p(E),className:"w-full text-right p-3 rounded-xl bg-purple-50 hover:bg-purple-100 border border-purple-100 transition-all duration-200 group flex items-center justify-between gap-3 active:scale-95",children:[d.jsx(Hn,{className:"w-4 h-4 text-purple-400 opacity-0 group-hover:opacity-100 transition-opacity"}),d.jsx("span",{className:"text-gray-700 font-medium text-sm flex-1",children:E.label||E.title_he})]},R))}),d.jsx("div",{className:`mt-3 pt-3 border-t border-gray-100 flex ${a?"justify-end":"justify-start"}`,children:d.jsx("button",{onClick:y,className:"text-xs text-gray-400 hover:text-gray-600 font-medium px-3 py-1 rounded-full hover:bg-gray-100 transition-colors",children:o("noThanks")})})]})]})})},T$=({isOpen:t,onClose:e,user:n,userCredits:r,userUsage:i,userSubscription:s,onLogin:o,onLogout:a,onSubscriptionClick:l,onRedeemCoupon:u,onCouponSuccess:h})=>{const{t:f,language:p,setLanguage:y,isRTL:_}=qc(),[E,R]=F.useState(!1),[I,b]=F.useState(!1),[T,N]=F.useState(""),[z,B]=F.useState(null),[x,w]=F.useState("");if(!t)return null;const A=n&&!n.isAnonymous&&n.email,C=((n==null?void 0:n.email)||"U")[0].toUpperCase(),P=()=>{if(B(null),w(""),N(""),s>0){B("error"),w(f("errorRedeemingCoupon")),R(!1);return}R(!0)},O=async()=>{if(!T.trim()){B("error"),w(f("mustEnterCoupon"));return}B("loading"),w("");try{const Se=await u(T.trim());Se.success?(N(""),R(!1),B(null),w(""),e(),h&&h(Se.creditsAdded||0)):(B("error"),w(Se.error||f("errorRedeemingCoupon")))}catch(Se){B("error"),w(Se.message||f("errorRedeemingCoupon"))}},k=vp.find(Se=>Se.code===p);return d.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",dir:_?"rtl":"ltr",children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:e}),d.jsxs("div",{className:"relative w-full max-w-sm bg-[#1a1a2e] rounded-3xl overflow-hidden shadow-2xl animate-scale-up border border-white/10 max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-900/50 to-indigo-900/50 p-6 text-center border-b border-white/5",children:[d.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-1 mb-3 shadow-lg shadow-purple-500/20",children:d.jsx("div",{className:"w-full h-full rounded-full bg-[#1a1a2e] flex items-center justify-center text-3xl font-bold text-white",children:A?C:d.jsx(Xf,{className:"w-8 h-8 text-gray-300"})})}),d.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:A?n.displayName||n.email.split("@")[0]:f("guest")}),d.jsx("p",{className:"text-sm text-gray-400",children:A?n.email:f("loginToSaveDesigns")})]}),d.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1",children:[d.jsxs("button",{onClick:()=>{l(),e()},className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-amber-500/10 to-orange-500/10 hover:from-amber-500/20 hover:to-orange-500/20 border border-amber-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(Vd,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("mySubscription")}),d.jsx("div",{className:"text-xs text-amber-400/80",children:r-i>0?f("creditsRemaining",{count:r-i}):f("upgradeToPremium")})]})]}),d.jsx("div",{className:"text-amber-400 text-lg",children:_?"":""})]}),d.jsxs("div",{className:"space-y-3",children:[E?d.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 border border-emerald-500/20 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[d.jsx(AI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:f("enterCouponCodeTitle")})]}),d.jsx("input",{type:"text",value:T,onChange:Se=>N(Se.target.value.replace(/\s/g,"").toUpperCase()),placeholder:f("couponCode"),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50 text-center tracking-wider uppercase",disabled:z==="loading",autoFocus:!0}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{R(!1),N(""),B(null),w("")},className:"flex-1 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 font-medium transition-colors",disabled:z==="loading",children:f("cancel")}),d.jsx("button",{onClick:O,disabled:z==="loading"||!T.trim(),className:"flex-1 py-2.5 rounded-xl bg-emerald-500/80 hover:bg-emerald-500 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:z==="loading"?d.jsxs(d.Fragment,{children:[d.jsx(Yo,{className:"w-4 h-4 animate-spin"}),f("processing")]}):f("redeemCoupon")})]})]}):d.jsxs("button",{onClick:P,className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-500/10 hover:from-emerald-500/20 hover:to-teal-500/20 border border-emerald-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(AI,{className:"w-5 h-5 text-emerald-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("iHaveCoupon")}),d.jsx("div",{className:"text-xs text-emerald-400/80",children:f("enterCouponCode")})]})]}),d.jsx("div",{className:"text-emerald-400 text-lg",children:_?"":""})]}),z&&x&&d.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-xl text-sm ${z==="success"?"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30":z==="error"?"bg-red-500/20 text-red-300 border border-red-500/30":"bg-white/10 text-gray-300"}`,children:[z==="success"?d.jsx(di,{className:"w-4 h-4 flex-shrink-0"}):z==="error"?d.jsx(lL,{className:"w-4 h-4 flex-shrink-0"}):null,d.jsx("span",{children:x})]})]}),I?d.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-violet-500/10 to-purple-500/10 border border-violet-500/20 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-violet-400 mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(kI,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:f("selectLanguage")})]}),d.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-white/10 rounded",children:d.jsx(rn,{className:"w-4 h-4"})})]}),d.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:vp.map(Se=>d.jsxs("button",{onClick:()=>{y(Se.code),b(!1)},className:`w-full px-3 py-2.5 rounded-xl text-sm flex items-center justify-between transition-all ${p===Se.code?"bg-violet-500/30 border border-violet-500/50":"bg-white/5 border border-transparent hover:bg-white/10"}`,children:[d.jsx("span",{className:"text-white",children:Se.nativeName}),p===Se.code&&d.jsx(di,{className:"w-4 h-4 text-violet-400"})]},Se.code))})]}):d.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-violet-500/10 to-purple-500/10 hover:from-violet-500/20 hover:to-purple-500/20 border border-violet-500/20 transition-all group",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-violet-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(kI,{className:"w-5 h-5 text-violet-400"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f("language")}),d.jsx("div",{className:"text-xs text-violet-400/80",children:(k==null?void 0:k.nativeName)||"English"})]})]}),d.jsx("div",{className:"text-violet-400 text-lg",children:_?"":""})]}),d.jsxs("button",{onClick:()=>{A?a():o(),e()},className:`w-full flex items-center justify-between p-4 rounded-2xl border transition-all group ${A?"bg-red-500/10 hover:bg-red-500/20 border-red-500/20":"bg-blue-500/10 hover:bg-blue-500/20 border-blue-500/20"}`,children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform ${A?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"}`,children:A?d.jsx(dL,{className:"w-5 h-5"}):d.jsx(uL,{className:"w-5 h-5"})}),d.jsxs("div",{className:_?"text-right":"text-left",children:[d.jsx("div",{className:"text-white font-medium",children:f(A?"logout":"login")}),d.jsx("div",{className:`text-xs ${A?"text-red-400/80":"text-blue-400/80"}`,children:f(A?"exitAccount":"loginWithEmail")})]})]}),d.jsx("div",{className:A?"text-red-400 text-lg":"text-blue-400 text-lg",children:_?"":""})]})]}),d.jsx("button",{onClick:e,className:`absolute top-4 ${_?"left-4":"right-4"} p-2 text-gray-400 hover:text-white transition-colors`,children:d.jsx(rn,{className:"w-5 h-5"})})]})]})};function E$(){var db;const{t,language:e,setLanguage:n,isRTL:r,countryCode:i}=qc(),[s,o]=F.useState(!1),[a,l]=F.useState(!1),[u,h]=F.useState(0),[f,p]=F.useState(null),[y,_]=F.useState(!1),[E,R]=F.useState(()=>localStorage.getItem("hasSeenFirstUploadTip")==="true"),[I,b]=F.useState(window.innerWidth<1024),[T,N]=F.useState(!1),z=F.useRef(null),B=F.useRef(null),x=F.useRef(null),w=F.useRef(null);F.useEffect(()=>{const S=()=>b(window.innerWidth<1024);return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const A=F.useRef(null),C=F.useRef(null),P=F.useRef(null),O=F.useRef(null);F.useRef(null),F.useRef(null),F.useState("  ");const[k,Se]=F.useState(null),[rt,Cr]=F.useState("/assets/design_img.jpg"),[le,Q]=F.useState(!1),[re,se]=F.useState(!1),[Ee,ve]=F.useState(!1),[$e,dn]=F.useState(!1),[jn,hn]=F.useState(!1),[lt,Fn]=F.useState(!1),[lr,Jt]=F.useState(!1),[Rr,Jr]=F.useState(!1),[Xr,Zr]=F.useState(!1),[Si,gt]=F.useState(!1),[cr,Ai]=F.useState([]),[ie,Ka]=F.useState(null),[Un,Ya]=F.useState(!1),[Qa,ei]=F.useState(!1),[Kc,Ro]=F.useState(!1),[xt,yt]=F.useState(null),[ms,ps]=F.useState([]),[Ja,Xa]=F.useState(!1),[gs,Yc]=F.useState(!1),[Tt,Qc]=F.useState(()=>{const S=localStorage.getItem("designerAvatarEnabled");return S===null?!0:S==="true"}),[fn,Rt]=F.useState(""),[Uh,Po]=F.useState(16/9),[Za,No]=F.useState("reds"),[ys,ws]=F.useState(null),[ct,Do]=F.useState(null),[Lo,vs]=F.useState(1),[ur,ti]=F.useState(!0),[wt,Jc]=F.useState(!1),[Oo,Pr]=F.useState(!1),[xg,Xc]=F.useState(!1),[Xt,ki]=F.useState("signup"),[ni,Mo]=F.useState(""),[Zc,el]=F.useState(""),[Qe,ri]=F.useState(0),[ut,zh]=F.useState(0),[En,tl]=F.useState(0),Bh={0:t("subscriptionFree"),1:t("subscriptionStarter"),2:t("subscriptionValue"),3:t("subscriptionPro")},[ii,$h]=F.useState(""),[Vo,eu]=F.useState(!1),[Wh,_s]=F.useState(!1),[si,tu]=F.useState(!1),[Hh,Gh]=F.useState(!1),[qh,jo]=F.useState(!1),[nu,nl]=F.useState(!1),[ru,iu]=F.useState(null),[Tg,su]=F.useState(!1),[ou,Ci]=F.useState(!1),[Eg,oi]=F.useState(!1);F.useState(0);const[Nr,Fo]=F.useState(!1),[rl,Kh]=F.useState(0),[he,Dr]=F.useState(null),[dr,mn]=F.useState(!1),[Yh,Uo]=F.useState(!1),[Qh,au]=F.useState(!1),[Sg,lu]=F.useState(!1),[ai,Lr]=F.useState(""),[Ri,cu]=F.useState(""),[zo,Pi]=F.useState(""),[Jh,Xh]=F.useState(!1),[Ag,hr]=F.useState(!1),[Zh,bs]=F.useState(""),[Ce,Ni]=F.useState(!1),[je,zn]=F.useState(null),[Is,Bo]=F.useState(!1),[uu,Ue]=F.useState(!1);F.useRef(null);const du=F.useRef(null),hu=F.useRef(null);F.useEffect(()=>{ru&&ie&&!ie.isAnonymous&&(jo(!0),T0(),iu(null))},[ie,ru]);const il=S=>{const V=S.includes("starter")?"starter":S.includes("value")?"value":S.includes("pro")?"pro":"unknown";rN(V),ol.current=!0,window.open(S,"_blank","noopener,noreferrer"),jo(!1),(!ie||ie.isAnonymous)&&su(!0)},[ef,sl]=F.useState(!1),[$o,fu]=F.useState(null),fr=F.useRef(null),mu=F.useRef(null),li=F.useRef(null);F.useRef(null);const xs=F.useRef(!0),ol=F.useRef(!1);F.useEffect(()=>{cN()},[]),F.useEffect(()=>{localStorage.getItem("hasSeenOnboarding_v2")||setTimeout(()=>{o(!0),x0()},1e3)},[]);const Wo=()=>{o(!1),localStorage.setItem("hasSeenOnboarding_v2","true"),tN()},al=()=>{if(u<3){const S=u+1;h(S),eN(S)}else Wo()},tf=()=>{nN(u),Wo()},Di=()=>{T0(),jo(!0)},kg=[{title:t("onboardingUploadTitle"),description:t("onboardingUploadDesc"),targetRef:I?B:z},{title:t("onboardingStyleTitle"),description:t("onboardingStyleDesc"),targetRef:I?C:A},{title:t("onboardingCreateTitle"),description:t("onboardingCreateDesc"),targetRef:I?O:P},{title:t("onboardingItemTipTitle"),description:t("onboardingItemTipDesc"),targetRef:I?w:x}];F.useEffect(()=>{const S=Wj(Ms,async V=>{if(V){console.log("User UID:",V.uid),Ka(V),Ya(!0),await Zo(V),ei(!0);try{const Ae=await Cl(V.uid,1,7);if(Ai(Ae.history),ti(Ae.hasMore),Ae.history.length>0){const Te=Ae.history[0],Ne=Te.storageUrl||Te.imageUrl;Ne&&(Cr(Ne),yt(Te.id),Te.originalImageUrl&&Dr(Te.originalImageUrl))}}finally{ei(!1)}const U=br(Nn,"users",V.uid),te=ec(U,Ae=>{if(Ae.exists()){const Te=Ae.data(),Ne=Te.subscription!==void 0?Te.subscription:0;zh(We=>xs.current?(xs.current=!1,Ne):(We===0&&Ne>0&&ol.current&&(oi(!0),iN(),ol.current=!1),Ne)),ri(Te.credits!==void 0?Te.credits:0)}}),fe=new Date,Pe=`${String(fe.getMonth()+1).padStart(2,"0")}-${fe.getFullYear()}`,xe=br(Nn,"genCount",Pe,"users",V.uid),oe=ec(xe,Ae=>{Ae.exists()?tl(Ae.data().count||0):tl(0)});return()=>{te(),oe()}}else try{const U=await LP();Ka(U),Ya(!0),await Zo(U),FP()}catch(U){console.error("Failed to sign in anonymously:",U)}});return()=>S()},[]);const nf=[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("lighting"),action:()=>dn(!$e),icon:ry},{name:t("furniture"),action:()=>hn(!jn),icon:sy},{name:t("doorsWindows"),action:()=>Jr(!Rr),icon:gn},{name:t("bathroomShort"),action:()=>Zr(!Xr),icon:Vt}];(()=>({[t("categoryInteriorExterior")]:nf,[t("categoryGardensBalconies")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("addPlants"),action:()=>Zt("Add beautiful plants and flowers to this garden"),icon:fL},{name:t("enhanceLighting"),action:()=>Zt("Enhance the outdoor lighting"),icon:pl}],[t("categoryVehicles")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("enhanceLighting"),action:()=>Zt("Enhance the lighting and reflections on this vehicle"),icon:pl},{name:t("addAccessories"),action:()=>Zt("Add accessories and modifications to this vehicle"),icon:ml}],[t("categoryTattoos")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("enhanceLighting"),action:()=>Zt("Enhance the lighting to show the tattoo details"),icon:pl},{name:t("addDetails"),action:()=>Zt("Add more details and shading to this tattoo"),icon:ml}],[t("categoryMakeupBeauty")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("enhanceLighting"),action:()=>Zt("Enhance the lighting for better makeup visibility"),icon:pl},{name:t("addMakeup"),action:()=>Zt("Add more makeup and beauty enhancements"),icon:Hn}],[t("categoryAdvertisingProducts")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("enhanceLighting"),action:()=>Zt("Enhance the product lighting and presentation"),icon:pl},{name:t("addDetails"),action:()=>Zt("Add product details and features"),icon:ml}],[t("categoryProfileImage")]:[{name:t("redesign"),action:()=>Jt(!lr),icon:ji},{name:t("repairsDamages"),action:()=>Fn(!lt),icon:$n},{name:t("changeColor"),action:()=>se(!re),icon:Mi},{name:t("angle"),action:()=>ve(!Ee),icon:Vi},{name:t("enhanceLighting"),action:()=>Zt("Enhance the portrait lighting"),icon:pl},{name:t("addBackground"),action:()=>Zt("Add a professional background"),icon:ml}]}))();const rf=async S=>{const V=S.target.files[0];if(V){const U=V.type||V.name.split(".").pop().toLowerCase();zP(U);const te=V.type==="image/heic"||V.type==="image/heif"||V.name.toLowerCase().endsWith(".heic")||V.name.toLowerCase().endsWith(".heif");let fe=V;if(te){console.log("HEIC file detected, converting to JPEG...",{name:V.name,type:V.type,size:V.size});try{if(V.type==="image/jpeg"||V.type==="image/png"||V.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),fe=V;else{const{heicTo:xe}=await Vr(()=>import("./heic-to-49ba7c0b.js"),[]);fe=await xe({blob:V,type:"image/jpeg",quality:.9}),console.log("HEIC converted to JPEG successfully:",{type:fe.type,size:fe.size})}}catch(xe){console.error("HEIC conversion failed:",xe),console.error("Error details:",xe.message,xe.stack),alert(`Failed to convert HEIC image: ${xe.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const Pe=new FileReader;Pe.onload=async xe=>{const oe=xe.target.result;let Ae=oe;try{const Te=await _o(oe,1536,.8),Ne=new FileReader;Ae=await new Promise(We=>{Ne.onload=()=>We(Ne.result),Ne.readAsDataURL(Te)}),console.log("Image compressed for display")}catch(Te){console.warn("Failed to compress image for display, using original:",Te)}if(Se(Ae),Cr(Ae),Dr(null),mn(!1),Po(16/9),yt(null),E||setTimeout(()=>{_(!0)},1e3),Un&&ie){ei(!0);try{const Te=await VP(ie.uid,V,`Uploaded: ${V.name}`),Ne=Te.id;console.log("Upload result ID:",Ne),console.log("Upload result:",Te);const We=await Cl(ie.uid,1,7);Ai(We.history),vs(1),ti(We.hasMore),yt(Ne),console.log("Set current history ID to newly uploaded image:",Ne),Tt&&(Xa(!0),Yc(!0)),console.log("Current history after reload:",We.history.map(Et=>({id:Et.id,prompt:Et.prompt})))}catch(Te){console.error("Failed to save upload to Firebase:",Te)}finally{ei(!1)}}},Pe.readAsDataURL(fe)}},pu=()=>{fr.current.click()},cl=async()=>{$P();try{const U=await(await fetch(rt)).blob(),te=window.URL.createObjectURL(U),fe=document.createElement("a");fe.href=te,fe.download=`moomhe-design-${Date.now()}.png`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),window.URL.revokeObjectURL(te)}catch(S){console.error("Download failed:",S);try{window.open(rt,"_blank")}catch(V){console.error("Fallback download also failed:",V),alert("  .  .")}}},ul=()=>{Ni(!0),zn(null),Im("google_lens_start")},gu=S=>{var fe,Pe,xe,oe;if(!Ce)return;const V=S.currentTarget.getBoundingClientRect(),U=(S.clientX||((Pe=(fe=S.touches)==null?void 0:fe[0])==null?void 0:Pe.clientX))-V.left,te=(S.clientY||((oe=(xe=S.touches)==null?void 0:xe[0])==null?void 0:oe.clientY))-V.top;Bo(!0),zn({startX:U,startY:te,endX:U,endY:te})},Ho=S=>{var fe,Pe,xe,oe;if(!Is||!Ce)return;const V=S.currentTarget.getBoundingClientRect(),U=Math.max(0,Math.min((S.clientX||((Pe=(fe=S.touches)==null?void 0:fe[0])==null?void 0:Pe.clientX))-V.left,V.width)),te=Math.max(0,Math.min((S.clientY||((oe=(xe=S.touches)==null?void 0:xe[0])==null?void 0:oe.clientY))-V.top,V.height));zn(Ae=>Ae?{...Ae,endX:U,endY:te}:null)},dl=async()=>{if(!Is||!je)return;Bo(!1);const S=Math.abs(je.endX-je.startX),V=Math.abs(je.endY-je.startY);if(S<20||V<20){zn(null);return}await sf()},sf=async()=>{if(!(!je||!du.current||!hu.current)){Ue(!0),Im("google_lens_search");try{const S=du.current,U=hu.current.getBoundingClientRect(),te=S.getBoundingClientRect(),fe=te.width,Pe=te.height,xe=te.left-U.left,oe=te.top-U.top,Ae=S.naturalWidth/fe,Te=S.naturalHeight/Pe,Ne=Math.min(je.startX,je.endX),We=Math.min(je.startY,je.endY),Et=Math.abs(je.endX-je.startX),Or=Math.abs(je.endY-je.startY),Bn=Ne-xe,Ht=We-oe,pr=Math.max(0,Bn*Ae),hb=Math.max(0,Ht*Te),Cg=Math.min(Et*Ae,S.naturalWidth-pr),Rg=Math.min(Or*Te,S.naturalHeight-hb);if(Cg<=0||Rg<=0){alert("   "),Ue(!1);return}const xN=await fetch(rt).then(AN=>AN.blob()),TN=await createImageBitmap(xN),hl=document.createElement("canvas");hl.width=Math.max(1,Math.round(Cg)),hl.height=Math.max(1,Math.round(Rg)),hl.getContext("2d").drawImage(TN,Math.round(pr),Math.round(hb),Math.round(Cg),Math.round(Rg),0,0,hl.width,hl.height);const{downloadURL:EN}=await b0((ie==null?void 0:ie.uid)||"anonymous",hl.toDataURL("image/jpeg",.9)),SN=`https://lens.google.com/uploadbyurl?url=${encodeURIComponent(EN)}`;window.open(SN,"_blank","noopener,noreferrer"),Ni(!1),zn(null)}catch(S){console.error("Google Lens search failed:",S),alert(" .  .")}finally{Ue(!1)}}},mr=()=>{Ni(!1),zn(null),Bo(!1)};F.useEffect(()=>{if(!xt||!Tt){ps([]),Xa(!1);return}const S=ec(br(Nn,"userHistory",xt),V=>{if(V.exists()){const U=V.data();Tt&&U.suggestions&&Array.isArray(U.suggestions)&&U.suggestions.length>0&&(ps(U.suggestions),Xa(!1))}});return()=>S()},[xt,Tt]);const yu=S=>{const V=S.prompt;Rt(V),Iu(V),setTimeout(()=>Rt(""),100)},wu=()=>{const S=!Tt;Qc(S),localStorage.setItem("designerAvatarEnabled",S.toString()),S||(ps([]),Xa(!1))},vu=async()=>{WP("whatsapp");try{let S=rt;const V=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(S.startsWith("data:"))try{Q(!0);const{downloadURL:U}=await b0((ie==null?void 0:ie.uid)||"anonymous",S);S=U,console.log(" Image uploaded to temporary storage:",U)}catch(U){console.error("Error uploading image to Firebase:",U),alert("  .  .");return}finally{Q(!1)}if(V){const U=`whatsapp://send?text=    MoomHe: ${encodeURIComponent(S)}`;window.open(U,"_blank")}else{const U=`https://web.whatsapp.com/send?text=    MoomHe: ${encodeURIComponent(S)}`;window.open(U,"_blank")}}catch(S){console.error("WhatsApp share failed:",S),alert("  .  .")}},of=async()=>{if(!Ri.trim()&&!ai.trim()){bs("     ");return}if(Ri.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ri)){bs("    ");return}if(!zo.trim()){bs("  ");return}bs(""),Xh(!0),aN();try{const S=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,V={id:S,uid:(ie==null?void 0:ie.uid)||"anonymous",email:Ri.trim()||null,phone:ai.trim()||null,message:zo.trim(),createdAt:new Date,userEmail:(ie==null?void 0:ie.email)||null,isAnonymous:(ie==null?void 0:ie.isAnonymous)||!0};let U=null;try{const te=await fetch("https://formspree.io/f/xkgdpbjg",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:Ri.trim()||null,phone:ai.trim()||null,message:zo.trim()})});if(!te.ok){const fe=await te.text();U=`HTTP ${te.status}: ${fe}`,console.error("Formspree error:",U)}}catch(te){U=`Network error: ${te.message}`,console.error("Formspree network error:",te)}await Oh(br(Nn,"supportMsgs",S),{...V,formspreeError:U}),Lr(""),cu(""),Pi(""),lu(!1),hr(!0),lN(),setTimeout(()=>hr(!1),5e3)}catch(S){console.error("Error submitting contact form:",S),bs("  .  .")}finally{Xh(!1)}},Ts=S=>{sN();const V=S.storageUrl||S.imageUrl;Cr(V),S.originalImageUrl?(Dr(S.originalImageUrl),mn(!1)):(Dr(null),mn(!1)),Po(16/9),yt(S.id),Yc(!1)},pn=()=>{le||(Ro(!0),he&&mn(!0),au(!1),Uo(!0))},Es=()=>{Ro(!1),mn(!1),au(!1),Uo(!1),Ni(!1),zn(null),Bo(!1)},_u=()=>{he&&(Cr(he),Dr(null)),Es()},Li=()=>{Uo(!0)},c=S=>{const V=S.target,U=V.naturalWidth/V.naturalHeight;Po(U)},m=async S=>{const V=S.target.files[0];if(V){BP();const U=V.type==="image/heic"||V.type==="image/heif"||V.name.toLowerCase().endsWith(".heic")||V.name.toLowerCase().endsWith(".heif");let te=V;if(U){console.log("HEIC object image detected, converting to JPEG...",{name:V.name,type:V.type,size:V.size});try{if(V.type==="image/jpeg"||V.type==="image/png"||V.type==="image/webp")console.log("File already in displayable format, skipping HEIC conversion"),te=V;else{const{heicTo:Pe}=await Vr(()=>import("./heic-to-49ba7c0b.js"),[]);te=await Pe({blob:V,type:"image/jpeg",quality:.9}),console.log("HEIC object image converted to JPEG successfully")}}catch(Pe){console.error("HEIC conversion failed:",Pe),alert(`Failed to convert HEIC image: ${Pe.message||"Unknown error"}. Please try uploading a JPEG or PNG image instead.`);return}}const fe=new FileReader;fe.onload=Pe=>{const xe=new Image;xe.onload=()=>{const Te=document.createElement("canvas");let Ne=xe.width,We=xe.height;const Et=1200;(Ne>Et||We>Et)&&(Ne>We?(We=Math.round(We*Et/Ne),Ne=Et):(Ne=Math.round(Ne*Et/We),We=Et)),Te.width=Ne,Te.height=We,Te.getContext("2d").drawImage(xe,0,0,Ne,We);const Bn=Te.toDataURL("image/jpeg",.9);ws(Bn),fetch(Bn).then(Ht=>Ht.blob()).then(Ht=>{const pr=new File([Ht],V.name,{type:"image/jpeg"});Do(pr)})},xe.src=Pe.target.result,ub("  !      .");const oe="    ",Ae=fn.trim();Ae?Ae.includes(oe)||Rt(`${Ae} ${oe}`):Rt(oe)},fe.readAsDataURL(te)}},g=()=>{li.current.click()},v=()=>{ws(null),Do(null),li.current&&(li.current.value="")},D=async S=>{if(S.preventDefault(),!(!ni||!ii)){if(Xt==="signup"&&ii!==Zc){alert("  .  .");return}eu(!0);try{if(Xt==="signup")if(ie&&ie.isAnonymous){const{linkWithCredential:U,EmailAuthProvider:te}=await Vr(()=>import("./index.esm-9277b81b.js"),[]),fe=te.credential(ni,ii);try{const Pe=await U(ie,fe);await Zo(Pe.user),I0(!0),vm("email_link"),alert("  !    .")}catch(Pe){if(I0(!1),Pe.code==="auth/email-already-in-use"){const{createUserWithEmailAndPassword:xe}=await Vr(()=>import("./index.esm-9277b81b.js"),[]),oe=await xe(Ms,ni,ii);await Re(ie.uid,oe.user.uid),await Zo(oe.user),vm("email_migrate"),alert("  !      .")}else throw Pe}}else{const{createUserWithEmailAndPassword:U}=await Vr(()=>import("./index.esm-9277b81b.js"),[]),te=await U(Ms,ni,ii);await Zo(te.user),vm("email"),alert("  !")}else{const{signInWithEmailAndPassword:V}=await Vr(()=>import("./index.esm-9277b81b.js"),[]),U=await V(Ms,ni,ii);await Zo(U.user),jP("email"),alert(" !")}Pr(!1),Mo(""),el(""),$h(""),ki("signup")}catch(V){console.error("Authentication error:",V),V.code==="auth/email-already-in-use"?(alert("   .   ."),ki("login")):V.code==="auth/user-not-found"?(alert("  .    ."),ki("signup")):V.code==="auth/wrong-password"?alert(" .  ."):V.code==="auth/weak-password"?alert("  .     6 ."):alert(" .  .")}finally{eu(!1)}}},j=S=>{S.preventDefault(),D(S)},q=async()=>{if(!ni){alert("    .");return}_s(!0);try{const{sendPasswordResetEmail:S}=await Vr(()=>import("./index.esm-9277b81b.js"),[]);await S(Ms,ni),alert("     .")}catch(S){console.error("Password reset error:",S),S.code==="auth/user-not-found"?alert("    ."):alert("   .  .")}finally{_s(!1)}},Re=async(S,V)=>{try{const{collection:U,query:te,where:fe,getDocs:Pe,doc:xe,setDoc:oe,deleteDoc:Ae}=await Vr(()=>import("./index.esm-6be26e84.js"),[]),{db:Te}=await Vr(()=>Promise.resolve().then(()=>B9),void 0),Ne=U(Te,"userHistory"),We=te(Ne,fe("userId","==",S)),Et=await Pe(We),Or=[];if(Et.forEach(Bn=>{const Ht=Bn.data();Ht.userId=V;const pr=xe(U(Te,"userHistory"));Or.push(oe(pr,Ht)),Or.push(Ae(Bn.ref))}),await Promise.all(Or),console.log(`Migrated ${Et.size} history entries from ${S} to ${V}`),Un){const Bn=await Cl(V,1,7);Ai(Bn.history),vs(1),ti(Bn.hasMore)}}catch(U){console.error("Error migrating user data:",U)}},Pt=async()=>{try{UP();const{signOut:S}=await Vr(()=>import("./index.esm-9277b81b.js"),[]);await S(Ms),Ai([]),Ka(null),Ya(!1),Xc(!1),window.location.reload()}catch(S){console.error("Logout error:",S),alert(" .  .")}},_e=async S=>{try{const V=await ie.getIdToken(),U=await _0(),fe=await(await fetch("https://us-central1-moomhe-6de30.cloudfunctions.net/redeemCoupon",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({couponCode:S,authToken:V,deviceId:U})})).json();return fe.success&&Im("coupon_redeemed",S),fe}catch(V){return console.error("Coupon redemption error:",V),{success:!1,error:"  .  ."}}},vt=async()=>{if(!Un||!ie||wt||!ur){console.log("Load more history blocked:",{isAuthenticated:Un,currentUser:!!ie,isLoadingMoreHistory:wt,hasMoreHistory:ur});return}console.log("Loading more history, current page:",Lo),Jc(!0);try{const S=Lo+1;oN(S);const V=await Cl(ie.uid,S,7);console.log("Load more result:",{nextPage:S,historyCount:V.history.length,hasMore:V.hasMore}),V.history.length>0?(Ai(U=>[...U,...V.history]),vs(S),ti(V.hasMore)):ti(!1)}catch(S){console.error("Failed to load more history:",S)}finally{Jc(!1)}};F.useEffect(()=>{const S=V=>{si&&mu.current&&!mu.current.contains(V.target)&&tu(!1),Hh&&!V.target.closest(".suggestions-modal")&&Gh(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[si,Hh]);const Mt=S=>{const V=String(S.getDate()).padStart(2,"0"),U=String(S.getMonth()+1).padStart(2,"0"),te=String(S.getFullYear()).slice(-2);return`${V}/${U}/${te}`},Ss=S=>{const U=Math.floor((new Date-S)/1e3);return U<60?" ":U<3600?` ${Math.floor(U/60)} `:U<86400?` ${Math.floor(U/3600)} `:U<172800?"":U<604800?` ${Math.floor(U/86400)} `:U<2592e3?` ${Math.floor(U/604800)} `:U<31536e3?` ${Math.floor(U/2592e3)} `:` ${Math.floor(U/31536e3)} `},Sn=S=>{const V=S.createdAt;if(!V)return"  ";if(/^\d{2}\/\d{2}\/\d{2}$/.test(V))return V;try{let U;if(V&&typeof V=="object"&&V.toDate?U=V.toDate():V&&typeof V=="object"&&V.seconds?U=new Date(V.seconds*1e3):U=new Date(V),!isNaN(U.getTime()))return Ss(U)}catch(U){console.warn("Failed to parse timestamp:",V,U)}return V||"  "},Oi=async()=>{if(fn.trim()){if(Un&&ie&&!await Ff.canMakeRequest(ie.uid)){bm(ut,En,Qe),Ci(!0);return}Q(!0);try{const S=fn;let V=S;ct&&(V=`  , ${S}`),console.log(" Final prompt for AI:",V),await Iu(V),Rt(""),ws(null),Do(null),li.current&&(li.current.value="")}catch(S){console.error("Custom prompt failed:",S),S.message&&(S.message.includes("limit reached")||S.message.includes("credits"))?Ci(!0):alert("  .  .")}finally{Q(!1)}}},bu={reds:"#C1121C",oranges:"#FF7514",yellows:"#E5BE01",greens:"#287233",blues:"#1E2460",purples:"#6D3F5B",grays:"#78858B",whitesAndBlacks:"#F4F4F4"},dN={reds:t("colorReds"),oranges:t("colorOranges"),yellows:t("colorYellows"),greens:t("colorGreens"),blues:t("colorBlues"),purples:t("colorPurples"),grays:t("colorGrays"),whitesAndBlacks:t("colorWhitesAndBlacks")},hN={reds:[{name:"Flame red",value:"flame red",hex:"#C1121C",ral:"RAL 3000"},{name:"Signal red",value:"signal red",hex:"#A52019",ral:"RAL 3001"},{name:"Carmine red",value:"carmine red",hex:"#A2231D",ral:"RAL 3002"},{name:"Ruby red",value:"ruby red",hex:"#9B111E",ral:"RAL 3003"},{name:"Purple red",value:"purple red",hex:"#75151E",ral:"RAL 3004"},{name:"Wine red",value:"wine red",hex:"#5E2129",ral:"RAL 3005"},{name:"Black red",value:"black red",hex:"#412227",ral:"RAL 3007"},{name:"Oxide red",value:"oxide red",hex:"#642424",ral:"RAL 3009"},{name:"Brown red",value:"brown red",hex:"#781F19",ral:"RAL 3011"},{name:"Beige red",value:"beige red",hex:"#C1876B",ral:"RAL 3012"},{name:"Tomato red",value:"tomato red",hex:"#A12312",ral:"RAL 3013"},{name:"Antique pink",value:"antique pink",hex:"#D36E70",ral:"RAL 3014"},{name:"Light pink",value:"light pink",hex:"#EA899A",ral:"RAL 3015"},{name:"Coral red",value:"coral red",hex:"#B32821",ral:"RAL 3016"},{name:"Rose",value:"rose",hex:"#E63244",ral:"RAL 3017"},{name:"Strawberry red",value:"strawberry red",hex:"#D53032",ral:"RAL 3018"},{name:"Traffic red",value:"traffic red",hex:"#CC0605",ral:"RAL 3020"},{name:"Salmon pink",value:"salmon pink",hex:"#D95030",ral:"RAL 3022"},{name:"Raspberry red",value:"raspberry red",hex:"#C51D34",ral:"RAL 3027"},{name:"Orient red",value:"orient red",hex:"#B32428",ral:"RAL 3031"}],oranges:[{name:"Red orange",value:"red orange",hex:"#C93C20",ral:"RAL 2001"},{name:"Vermilion",value:"vermilion",hex:"#CB2821",ral:"RAL 2002"},{name:"Pastel orange",value:"pastel orange",hex:"#FF7514",ral:"RAL 2003"},{name:"Pure orange",value:"pure orange",hex:"#F44611",ral:"RAL 2004"},{name:"Bright red orange",value:"bright red orange",hex:"#F75E25",ral:"RAL 2008"},{name:"Traffic orange",value:"traffic orange",hex:"#F54021",ral:"RAL 2009"},{name:"Signal orange",value:"signal orange",hex:"#D84B20",ral:"RAL 2010"},{name:"Deep orange",value:"deep orange",hex:"#EC7C26",ral:"RAL 2011"},{name:"Salmon range",value:"salmon range",hex:"#E55137",ral:"RAL 2012"}],yellows:[{name:"Green beige",value:"green beige",hex:"#BEBD7F",ral:"RAL 1000"},{name:"Beige",value:"beige",hex:"#C2B078",ral:"RAL 1001"},{name:"Sand yellow",value:"sand yellow",hex:"#C6A664",ral:"RAL 1002"},{name:"Signal yellow",value:"signal yellow",hex:"#E5BE01",ral:"RAL 1003"},{name:"Golden yellow",value:"golden yellow",hex:"#CDA434",ral:"RAL 1004"},{name:"Honey yellow",value:"honey yellow",hex:"#A98307",ral:"RAL 1005"},{name:"Maize yellow",value:"maize yellow",hex:"#E4A010",ral:"RAL 1006"},{name:"Daffodil yellow",value:"daffodil yellow",hex:"#DC9D00",ral:"RAL 1007"},{name:"Brown beige",value:"brown beige",hex:"#8A6642",ral:"RAL 1011"},{name:"Lemon yellow",value:"lemon yellow",hex:"#C7B446",ral:"RAL 1012"},{name:"Oyster white",value:"oyster white",hex:"#EAE6CA",ral:"RAL 1013"},{name:"Ivory",value:"ivory",hex:"#E1CC4F",ral:"RAL 1014"},{name:"Light ivory",value:"light ivory",hex:"#E6D690",ral:"RAL 1015"},{name:"Sulfur yellow",value:"sulfur yellow",hex:"#EDFF21",ral:"RAL 1016"},{name:"Saffron yellow",value:"saffron yellow",hex:"#F5D033",ral:"RAL 1017"},{name:"Zinc yellow",value:"zinc yellow",hex:"#F8F32B",ral:"RAL 1018"},{name:"Grey beige",value:"grey beige",hex:"#a28f7a",ral:"RAL 1019"},{name:"Olive yellow",value:"olive yellow",hex:"#999950",ral:"RAL 1020"},{name:"Rape yellow",value:"rape yellow",hex:"#F3DA0B",ral:"RAL 1021"},{name:"Traffic yellow",value:"traffic yellow",hex:"#FAD201",ral:"RAL 1023"},{name:"Ochre yellow",value:"ochre yellow",hex:"#AEA04B",ral:"RAL 1024"},{name:"Curry",value:"curry",hex:"#9D9101",ral:"RAL 1027"},{name:"Melon yellow",value:"melon yellow",hex:"#F4A900",ral:"RAL 1028"},{name:"Broom yellow",value:"broom yellow",hex:"#D6AE01",ral:"RAL 1032"},{name:"Dahlia yellow",value:"dahlia yellow",hex:"#F3A505",ral:"RAL 1033"},{name:"Pastel yellow",value:"pastel yellow",hex:"#EFA94A",ral:"RAL 1034"},{name:"Sun yellow",value:"sun yellow",hex:"#F39F18",ral:"RAL 1037"}],greens:[{name:"Patina green",value:"patina green",hex:"#316650",ral:"RAL 6000"},{name:"Emerald green",value:"emerald green",hex:"#287233",ral:"RAL 6001"},{name:"Leaf green",value:"leaf green",hex:"#2D572C",ral:"RAL 6002"},{name:"Olive green",value:"olive green",hex:"#424632",ral:"RAL 6003"},{name:"Blue green",value:"blue green",hex:"#1F3A3D",ral:"RAL 6004"},{name:"Moss green",value:"moss green",hex:"#2F4538",ral:"RAL 6005"},{name:"Bottle green",value:"bottle green",hex:"#343B29",ral:"RAL 6007"},{name:"Brown green",value:"brown green",hex:"#39352A",ral:"RAL 6008"},{name:"Fir green",value:"fir green",hex:"#31372B",ral:"RAL 6009"},{name:"Grass green",value:"grass green",hex:"#35682D",ral:"RAL 6010"},{name:"Reseda green",value:"reseda green",hex:"#587246",ral:"RAL 6011"},{name:"Black green",value:"black green",hex:"#343E40",ral:"RAL 6012"},{name:"Reed green",value:"reed green",hex:"#6C7156",ral:"RAL 6013"},{name:"Yellow olive",value:"yellow olive",hex:"#47402E",ral:"RAL 6014"},{name:"Black olive",value:"black olive",hex:"#3B3C36",ral:"RAL 6015"},{name:"Turquoise green",value:"turquoise green",hex:"#1E5945",ral:"RAL 6016"},{name:"May green",value:"may green",hex:"#4C9141",ral:"RAL 6017"},{name:"Yellow green",value:"yellow green",hex:"#57A639",ral:"RAL 6018"},{name:"Pastel green",value:"pastel green",hex:"#BDECB6",ral:"RAL 6019"},{name:"Chrome green",value:"chrome green",hex:"#2E3A23",ral:"RAL 6020"},{name:"Pale green",value:"pale green",hex:"#89AC76",ral:"RAL 6021"},{name:"Olive drab",value:"olive drab",hex:"#25221B",ral:"RAL 6022"},{name:"Traffic green",value:"traffic green",hex:"#308446",ral:"RAL 6024"},{name:"Fern green",value:"fern green",hex:"#3D642D",ral:"RAL 6025"},{name:"Opal green",value:"opal green",hex:"#015D52",ral:"RAL 6026"},{name:"Light green",value:"light green",hex:"#84C3BE",ral:"RAL 6027"},{name:"Pine green",value:"pine green",hex:"#2C5545",ral:"RAL 6028"},{name:"Mint green",value:"mint green",hex:"#20603D",ral:"RAL 6029"},{name:"Signal green",value:"signal green",hex:"#317F43",ral:"RAL 6032"},{name:"Mint turquoise",value:"mint turquoise",hex:"#497E76",ral:"RAL 6033"},{name:"Pastel turquoise",value:"pastel turquoise",hex:"#7FB5B5",ral:"RAL 6034"}],blues:[{name:"Violet blue",value:"violet blue",hex:"#354D73",ral:"RAL 5000"},{name:"Green blue",value:"green blue",hex:"#1F3438",ral:"RAL 5001"},{name:"Ultramarine blue",value:"ultramarine blue",hex:"#20214F",ral:"RAL 5002"},{name:"Saphire blue",value:"saphire blue",hex:"#1D1E33",ral:"RAL 5003"},{name:"Black blue",value:"black blue",hex:"#18171C",ral:"RAL 5004"},{name:"Signal blue",value:"signal blue",hex:"#1E2460",ral:"RAL 5005"},{name:"Brillant blue",value:"brillant blue",hex:"#3E5F8A",ral:"RAL 5007"},{name:"Grey blue",value:"grey blue",hex:"#26252D",ral:"RAL 5008"},{name:"Azure blue",value:"azure blue",hex:"#225f78",ral:"RAL 5009"},{name:"Gentian blue",value:"gentian blue",hex:"#0E294B",ral:"RAL 5010"},{name:"Steel blue",value:"steel blue",hex:"#231A24",ral:"RAL 5011"},{name:"Light blue",value:"light blue",hex:"#3B83BD",ral:"RAL 5012"},{name:"Cobalt blue",value:"cobalt blue",hex:"#1E213D",ral:"RAL 5013"},{name:"Pigeon blue",value:"pigeon blue",hex:"#606E8C",ral:"RAL 5014"},{name:"Sky blue",value:"sky blue",hex:"#2271B3",ral:"RAL 5015"},{name:"Traffic blue",value:"traffic blue",hex:"#063971",ral:"RAL 5017"},{name:"Turquoise blue",value:"turquoise blue",hex:"#3F888F",ral:"RAL 5018"},{name:"Capri blue",value:"capri blue",hex:"#1B5583",ral:"RAL 5019"},{name:"Ocean blue",value:"ocean blue",hex:"#1D334A",ral:"RAL 5020"},{name:"Water blue",value:"water blue",hex:"#256D7B",ral:"RAL 5021"},{name:"Night blue",value:"night blue",hex:"#252850",ral:"RAL 5022"},{name:"Distant blue",value:"distant blue",hex:"#49678D",ral:"RAL 5023"},{name:"Pastel blue",value:"pastel blue",hex:"#5D9B9B",ral:"RAL 5024"}],purples:[{name:"Red lilac",value:"red lilac",hex:"#6D3F5B",ral:"RAL 4001"},{name:"Red violet",value:"red violet",hex:"#922B3E",ral:"RAL 4002"},{name:"Heather violet",value:"heather violet",hex:"#DE4C8A",ral:"RAL 4003"},{name:"Claret violet",value:"claret violet",hex:"#641C34",ral:"RAL 4004"},{name:"Blue lilac",value:"blue lilac",hex:"#6C4675",ral:"RAL 4005"},{name:"Traffic purple",value:"traffic purple",hex:"#A03472",ral:"RAL 4006"},{name:"Purple violet",value:"purple violet",hex:"#4A192C",ral:"RAL 4007"},{name:"Signal violet",value:"signal violet",hex:"#924E7D",ral:"RAL 4008"},{name:"Pastel violet",value:"pastel violet",hex:"#A18594",ral:"RAL 4009"},{name:"Telemagenta",value:"telemagenta",hex:"#CF3476",ral:"RAL 4010"}],grays:[{name:"Squirrel grey",value:"squirrel grey",hex:"#78858B",ral:"RAL 7000"},{name:"Silver grey",value:"silver grey",hex:"#8A9597",ral:"RAL 7001"},{name:"Olive grey",value:"olive grey",hex:"#7E7B52",ral:"RAL 7002"},{name:"Moss grey",value:"moss grey",hex:"#6C7059",ral:"RAL 7003"},{name:"Signal grey",value:"signal grey",hex:"#969992",ral:"RAL 7004"},{name:"Mouse grey",value:"mouse grey",hex:"#646B63",ral:"RAL 7005"},{name:"Beige grey",value:"beige grey",hex:"#6D6552",ral:"RAL 7006"},{name:"Khaki grey",value:"khaki grey",hex:"#6A5F31",ral:"RAL 7008"},{name:"Green grey",value:"green grey",hex:"#4D5645",ral:"RAL 7009"},{name:"Tarpaulin grey",value:"tarpaulin grey",hex:"#4C514A",ral:"RAL 7010"},{name:"Iron grey",value:"iron grey",hex:"#434B4D",ral:"RAL 7011"},{name:"Basalt grey",value:"basalt grey",hex:"#4E5754",ral:"RAL 7012"},{name:"Brown grey",value:"brown grey",hex:"#464531",ral:"RAL 7013"},{name:"Slate grey",value:"slate grey",hex:"#434750",ral:"RAL 7015"},{name:"Anthracite grey",value:"anthracite grey",hex:"#293133",ral:"RAL 7016"},{name:"Black grey",value:"black grey",hex:"#23282B",ral:"RAL 7021"},{name:"Umbra grey",value:"umbra grey",hex:"#332F2C",ral:"RAL 7022"},{name:"Concrete grey",value:"concrete grey",hex:"#686C5E",ral:"RAL 7023"},{name:"Graphite grey",value:"graphite grey",hex:"#474A51",ral:"RAL 7024"},{name:"Granite grey",value:"granite grey",hex:"#2F353B",ral:"RAL 7026"},{name:"Stone grey",value:"stone grey",hex:"#8B8C7A",ral:"RAL 7030"},{name:"Blue grey",value:"blue grey",hex:"#8B8C7A",ral:"RAL 7031"},{name:"Pebble grey",value:"pebble grey",hex:"#B8B799",ral:"RAL 7032"},{name:"Cement grey",value:"cement grey",hex:"#7D8471",ral:"RAL 7033"},{name:"Yellow grey",value:"yellow grey",hex:"#8F8B66",ral:"RAL 7034"},{name:"Light grey",value:"light grey",hex:"#D7D7D7",ral:"RAL 7035"},{name:"Platinum grey",value:"platinum grey",hex:"#7F7679",ral:"RAL 7036"},{name:"Dusty grey",value:"dusty grey",hex:"#7D7F7D",ral:"RAL 7037"},{name:"Agate grey",value:"agate grey",hex:"#B5B8B1",ral:"RAL 7038"},{name:"Quartz grey",value:"quartz grey",hex:"#6C6960",ral:"RAL 7039"},{name:"Window grey",value:"window grey",hex:"#9DA1AA",ral:"RAL 7040"},{name:"Traffic grey A",value:"traffic grey A",hex:"#8D948D",ral:"RAL 7042"},{name:"Traffic grey B",value:"traffic grey B",hex:"#4E5452",ral:"RAL 7043"},{name:"Silk grey",value:"silk grey",hex:"#CAC4B0",ral:"RAL 7044"},{name:"Telegrey 1",value:"telegrey 1",hex:"#909090",ral:"RAL 7045"},{name:"Telegrey 2",value:"telegrey 2",hex:"#82898F",ral:"RAL 7046"},{name:"Telegrey 4",value:"telegrey 4",hex:"#D0D0D0",ral:"RAL 7047"}],whitesAndBlacks:[{name:"Cream",value:"cream",hex:"#FDF4E3",ral:"RAL 9001"},{name:"Grey white",value:"grey white",hex:"#E7EBDA",ral:"RAL 9002"},{name:"Signal white",value:"signal white",hex:"#F4F4F4",ral:"RAL 9003"},{name:"Signal black",value:"signal black",hex:"#282828",ral:"RAL 9004"},{name:"Jet black",value:"jet black",hex:"#0A0A0A",ral:"RAL 9005"},{name:"Simply white",value:"simply white",hex:"#FFFFFF",ral:"RAL 9010"},{name:"Graphite black",value:"graphite black",hex:"#1C1C1C",ral:"RAL 9011"},{name:"Traffic white",value:"traffic white",hex:"#F6F6F6",ral:"RAL 9016"},{name:"Traffic black",value:"traffic black",hex:"#1E1E1E",ral:"RAL 9017"},{name:"Papyrus white",value:"papyrus white",hex:"#D7D7D7",ral:"RAL 9018"}]},fN=S=>{KP(S.value,Za),fu(S),sl(!0)},mN=S=>{sl(!1),se(!1),fu(null),console.log(" Color Selection - Prompt being added to input and executing:",S);const V=fn.trim();let U;V?V.endsWith(" ")?U=`${V}${S}`:U=`${V}, ${S}`:U=S,Rt(U),Iu(U),Rt("")},pN=[{name:" ",value:"recessed lighting",prompt:"  "},{name:"",value:"pendant lights",prompt:" "},{name:" ",value:"chandeliers",prompt:"  "},{name:" ",value:"table lamps",prompt:"  "},{name:" ",value:"floor lamps",prompt:"  "},{name:" ",value:"wall sconces",prompt:"  "},{name:" ",value:"track lighting",prompt:"  "},{name:" ",value:"ceiling fixtures",prompt:"  "},{name:" ",value:"under-cabinet lighting",prompt:"  "},{name:" ",value:"string lights",prompt:"  "},{name:"",value:"day",prompt:"    "},{name:"",value:"night",prompt:"    "},{name:"",value:"sunset",prompt:"    "},{name:"",value:"sunrise",prompt:"    "}],gN=[{name:"",value:"sofa",prompt:" "},{name:" ",value:"sectional sofa",prompt:"  "},{name:"",value:"armchair",prompt:" "},{name:" ",value:"accent chair",prompt:"  "},{name:" ",value:"dining chair",prompt:"  "},{name:"",value:"bar stool",prompt:" "},{name:" ",value:"single bed",prompt:"  "},{name:" ",value:"double bed",prompt:"  "},{name:"",value:"beanbag",prompt:" "},{name:"",value:"ottoman",prompt:" "},{name:"",value:"bench",prompt:" "},{name:" ",value:"coffee table",prompt:"  "},{name:" ",value:"end table",prompt:"  "},{name:" ",value:"nightstand",prompt:"  "},{name:" ",value:"dining table",prompt:"  "},{name:" ",value:"desk",prompt:"  "},{name:"",value:"dresser",prompt:" "},{name:" ",value:"wardrobe",prompt:"  "},{name:" ",value:"bookcase",prompt:"  "},{name:" ",value:"tv stand",prompt:"  "},{name:" ",value:"cabinetry",prompt:"  "}];t("repairEverything"),t("fixAndRepairEverything"),t("messUpEverything"),t("destroyAndCauseDamage");const yN=[{name:"  ",value:"mediterranean-modern",thumbnail:"/assets/styles/mediterranean.png",prompt:"Transform this room into a Modern Mediterranean interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use natural materials like Jerusalem stone walls, terracotta tiles, and light oak wood flooring. Add arched doorways and windows. Use a warm color palette with white, cream, sand, and olive green accents. Include linen curtains, woven textures, ceramic vases with olive branches, and modern furniture with clean lines. Maximize natural light with large windows. Add indoor plants like olive trees and succulents. Create an airy, relaxed, and sophisticated atmosphere inspired by Israeli coastal living."},{name:" ",value:"warm-minimalism",thumbnail:"/assets/styles/warm-minimalism.jpg",prompt:"Transform this room into Warm Minimalism interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Keep the space clean and uncluttered but add warmth through natural materials. Use oak wood floors, cream-colored walls, and natural stone accents. Include low-profile modern furniture in warm neutrals like camel, beige, and soft terracotta. Add texture through wool rugs, linen cushions, and organic cotton throws. Use rounded furniture edges and soft curves. Include subtle decorative elements like a single large plant, minimalist art, and sculptural ceramic pieces. Emphasize natural light with sheer curtains. Create a serene, cozy, and sophisticated atmosphere."},{name:"",value:"biophilic",thumbnail:"/assets/styles/biophilic.jpg",prompt:"Transform this room into Biophilic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a strong connection to nature inside the home. Add abundant indoor plants including large statement plants like fiddle leaf figs, monstera, and hanging pothos. Use natural materials throughout: raw wood furniture, stone surfaces, bamboo accents, and cork flooring. Include a living green wall or plant shelf. Use earthy colors: forest green, terracotta, sand, and natural wood tones. Maximize natural light through existing windows. Include water features or natural elements like driftwood and pebbles. Create a fresh, calming, and nature-immersive atmosphere."},{name:" ",value:"modern-luxury",thumbnail:"/assets/styles/modern-luxury.jpg",prompt:"Transform this room into Modern Luxury interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an elegant and sophisticated high-end space. Use premium materials: Italian marble floors or feature walls, rich wood veneers, brushed brass or gold metal accents. Include designer furniture with sculptural forms and plush velvet upholstery in jewel tones like emerald green, sapphire blue, or deep burgundy. Add statement lighting fixtures like a modern chandelier or sculptural pendant lights. Use a refined color palette with charcoal, cream, and metallic accents. Include floor-to-ceiling curtains, large abstract art, and designer accessories. Create a glamorous, refined, and opulent atmosphere."},{name:"",value:"japandi",thumbnail:"/assets/styles/japandi.jpg",prompt:"Transform this room into Japandi interior design style - a fusion of Japanese and Scandinavian aesthetics. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a muted, neutral color palette with soft whites, warm grays, and natural wood tones. Include low-profile furniture with clean lines and natural materials like light ash or oak wood. Add Japanese elements: shoji-style screens, floor cushions, bonsai plants, and ceramic pottery. Incorporate Scandinavian hygge with cozy textiles, wool throws, and sheepskin rugs. Keep the space minimal and functional with hidden storage. Use paper lanterns or simple pendant lighting. Add indoor plants like bamboo or peace lilies. Create a zen-like, harmonious, and tranquil atmosphere."},{name:"",value:"scandinavian",thumbnail:"/assets/styles/scandinavian.jpg",prompt:"Transform this room into Scandinavian interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Use a bright, airy color palette dominated by white and light gray walls. Add light wood floors in birch or pine. Include minimalist furniture with clean lines and functional design in natural wood and white finishes. Add cozy textiles: chunky knit blankets, sheepskin throws, and soft wool rugs. Include statement lighting with modern pendant lamps. Use indoor plants like eucalyptus and ferns for natural touches. Add black accents through frames, fixtures, and accessories for contrast. Keep decor minimal but meaningful. Create a bright, cozy, and hygge-inspired atmosphere with excellent natural lighting."},{name:" ",value:"boho-chic",thumbnail:"/assets/styles/boho.jpg",prompt:"Transform this room into Bohemian Chic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create an eclectic, artistic, and free-spirited space. Layer rich textures with Moroccan rugs, macram wall hangings, and woven baskets. Use warm, earthy colors mixed with vibrant accents: terracotta, mustard yellow, teal, and burnt orange. Include rattan and wicker furniture, vintage pieces, and floor cushions. Add abundant plants in decorative pots, hanging planters, and trailing vines. Include global-inspired decor: Turkish lanterns, Indian textiles, and African baskets. Add fairy lights or warm Edison bulb lighting. Create a relaxed, artistic, and globally-inspired atmosphere full of personality and warmth."},{name:"",value:"industrial",thumbnail:"/assets/styles/industrial.jpg",prompt:"Transform this room into Industrial interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Expose raw architectural elements: brick walls, concrete ceilings, metal pipes, and ductwork. Use a color palette of charcoal gray, black, rust, and raw concrete tones. Include metal and iron furniture: steel-framed shelving, iron coffee tables, and metal bar stools. Add distressed leather sofas and vintage factory-style lighting with exposed bulbs. Include reclaimed wood elements for warmth: wooden dining tables, floating shelves, or accent walls. Add large factory-style mirrors. Include industrial accessories: metal clocks, wire baskets, and vintage signs. Create a raw, edgy, urban loft atmosphere with character and history."},{name:" ",value:"earthy-natural",thumbnail:"/assets/styles/earthy-natural.jpg",prompt:"Transform this room into Earthy Natural interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a grounded, organic, and serene space connected to nature. Use a warm earth-tone color palette: terracotta, ochre, olive green, warm browns, and sandy beige. Include natural materials: raw wood furniture, stone surfaces, clay pottery, and jute or sisal rugs. Add textured walls with lime wash or clay plaster in warm tones. Include linen and cotton textiles in natural undyed colors. Add organic shapes and handcrafted elements: ceramic vases, woven baskets, and artisanal objects. Include large indoor plants and dried flowers or pampas grass. Create a warm, grounded, and nature-inspired sanctuary."},{name:"",value:"jerusalem",thumbnail:"/assets/styles/jerusalem.jpg",prompt:"Transform this room into Contemporary Israeli interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a bright, modern space that reflects Mediterranean living. Use Jerusalem stone or natural stone feature walls, terrazzo floors, and light wood accents. Use a neutral palette with white walls, warm beige, and pops of earthy colors like olive and terracotta. Add modern Israeli design furniture with clean lines and functional aesthetics. Include local crafts: ceramic pieces, woven textiles, and modern Israeli art. Add olive branches, succulents, and Mediterranean plants. Create an airy, sophisticated, and culturally-rooted atmosphere that celebrates Israeli design heritage."},{name:"",value:"minimalist",thumbnail:"/assets/styles/minimalist.jpg",prompt:"Transform this room into Minimalist interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Create a clean, uncluttered, and intentional space. Use an all-white or monochromatic color palette with subtle texture variations. Include streamlined furniture with geometric forms and hidden storage solutions. Keep surfaces completely clear with minimal decorative objects - only one or two statement pieces. Use high-quality materials: polished concrete floors, seamless white walls, and sleek fixtures. Add architectural interest through recessed lighting, clean lines, and negative space. Include one bold statement element like a large plant or single artwork. Create a serene, peaceful, and focused atmosphere where less is more."},{name:" ",value:"modern-classic",thumbnail:"/assets/styles/modern-classic.jpg",prompt:"Transform this room into Modern Classic interior design style. CRITICAL: Preserve the exact room structure. Keep all existing windows and doors in their original positions and sizes. NEVER add new doors or windows - only redesign what already exists in the image. Blend timeless elegance with contemporary comfort. Use a sophisticated color palette of cream, soft gray, navy blue, and gold accents. Include classic architectural details: crown moldings, wainscoting, and paneled walls with modern interpretation. Add furniture that combines classic silhouettes with updated fabrics: tufted sofas, wingback chairs in modern fabrics, and elegant side tables. Include crystal or modern chandeliers and wall sconces. Add marble surfaces, silk or velvet textiles, and gilded mirrors. Include fresh flowers, classic art, and refined accessories. Create an elegant, sophisticated, and timeless atmosphere that feels both grand and welcoming."}],wN=S=>{dn(!1),YP(S.value),console.log(" Lighting Selection - Prompt being added to input:",S.prompt),console.log(" Selected lighting:",S.name,S.value),Zt(S.prompt)},vN=S=>{hn(!1),QP(S.value),console.log(" Furniture Selection - Prompt being added to input:",S.prompt),console.log(" Selected furniture:",S.name,S.value),Zt(S.prompt)},_N=S=>{Jt(!1),qP(S.value),console.log(" Style Selection - Prompt being added to input and executing:",S.prompt),console.log(" Selected style:",S.name,S.value);const V=fn.trim();let U;V?V.endsWith(" ")?U=`${V}${S.prompt}`:U=`${V}, ${S.prompt}`:U=S.prompt,Rt(U),Iu(U),Rt("")},af=(S,V="other")=>{Rr?XP(S):Xr?ZP(S):lt&&JP(S),Jr(!1),Zr(!1),Fn(!1);const U=fn.trim();let te;U?U.endsWith(" ")?te=`${U}${S}`:te=`${U}, ${S}`:te=S,Rt(te),Iu(te),Rt("")},ub=S=>{p(S),setTimeout(()=>p(null),3e3)},Zt=S=>{const V=fn.trim();let U;V?V.endsWith(" ")?U=`${V}${S}`:U=`${V} ${S}`:U=S,Rt(U),ub(t("promptUpdated"))},Iu=async S=>{var fe,Pe,xe;if(!rt)return;const V=Date.now();Q(!0);const te=(oe=>oe.includes("")||oe.includes("")||oe.includes("")||oe.includes("")?"style":oe.includes("")||oe.includes("")?"color":oe.includes("")||oe.includes("")?"lighting":oe.includes("")||oe.includes("")||oe.includes("")||oe.includes("")?"furniture":oe.includes("")||oe.includes("")||oe.includes("")?"angle":oe.includes("")||oe.includes("")?"repairs":oe.includes("")||oe.includes("")?"doors_windows":oe.includes("")||oe.includes("")||oe.includes("")?"bathroom":"custom")(S);HP(te,!!ct),Dr(rt),mn(!1);try{if(console.log(" AI Image Alteration - Prompt being sent:",S),console.log(" Main image URL:",rt),console.log(" Object image available:",!!ct),Un&&ie&&!await Ff.canMakeRequest(ie.uid)){bm(ut,En,Qe),Ci(!0),Q(!1);return}let oe=rt;if(rt.startsWith("/assets/")||rt.startsWith("./assets/"))try{const Or=await(await fetch(rt)).blob();oe=await new Promise(Ht=>{const pr=new FileReader;pr.onload=()=>Ht(pr.result),pr.readAsDataURL(Or)})}catch(Et){throw console.error("Error converting local image to data URL:",Et),new Error("Failed to load the default image")}let Ae=null;ct?(console.log(" Processing object image file:",ct.name,ct.type,ct.size),Ae=await DP(ct),console.log(" Object image processed successfully:",!!Ae)):console.log(" No object image file available");const Te=await _0(),Ne=await Ff.submitImageGenerationRequest(ie,S,oe,Ae,Te),We=await Ff.waitForRequestCompletion(Ne);if(console.log("AI Service result:",We),We&&We.storageUrl){const Et=Date.now()-V;GP(te,Et);const Or=We.storageUrl,Bn={imageUrl:Or,prompt:S,timestamp:Mt(new Date)};if(Un&&ie){ei(!0);try{const Ht=await Cl(ie.uid,1,7);Ai(Ht.history),vs(1),ti(Ht.hasMore)}catch(Ht){console.error("Failed to reload history from Firebase:",Ht)}finally{ei(!1)}}else{const Ht={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...Bn};Ai(pr=>[Ht,...pr]),vs(1),ti(!0)}Cr(Or),Po(16/9),yt(null),ws(null),Do(null),li.current&&(li.current.value=""),Rt(""),Ro(!0),mn(!0),au(!0),Uo(!1)}else alert("   .       .")}catch(oe){console.error("AI processing failed:",oe),(fe=oe.message)!=null&&fe.includes("limit reached")||(Pe=oe.message)!=null&&Pe.includes(" ")?(_m("limit_reached"),bm(ut,En,Qe),Ci(!0)):(xe=oe.message)!=null&&xe.includes("timeout")?(_m("timeout"),alert("    .  .")):(_m("unknown"),alert("  .       ."))}finally{Q(!1)}},bN=[{titleKey:"windowOptions",items:[{nameKey:"fixedWindow",name:"Fixed Window",description:"Add a large picture window with fixed view",icon:gn},{nameKey:"slidingWindow",name:"Sliding Window",description:"Add a sliding window",icon:gn},{nameKey:"casementWindow",name:"Casement Window",description:"Add a casement window",icon:gn},{nameKey:"tiltTurnWindow",name:"Tilt-Turn Window",description:"Add a tilt-turn window",icon:gn},{nameKey:"awningWindow",name:"Awning Window",description:"Add an awning window",icon:gn},{nameKey:"doubleHungWindow",name:"Double-Hung Window",description:"Add a double-hung window",icon:gn},{nameKey:"pocketWindow",name:"Pocket Window",description:"Add a pocket window",icon:gn},{nameKey:"archWindow",name:"Arch Window",description:"Add an arch window to expand the space",icon:gn}]},{titleKey:"doorOptions",items:[{nameKey:"pocketDoor",name:"Pocket Door",description:"Add a pocket door that slides into the wall",icon:gn},{nameKey:"frenchDoors",name:"French Doors",description:"Add French doors with glass panels",icon:gn},{nameKey:"louverDoor",name:"Louver Door",description:"Add a louver door with ventilation slats",icon:gn},{nameKey:"barnDoor",name:"Barn Door",description:"Add a barn door with exposed track",icon:gn}]}],IN=[{titleKey:"toiletOptions",items:[{nameKey:"bidetSeat",name:"Bidet Seat",description:"Add a heated bidet toilet seat",icon:Vt},{nameKey:"toiletSeat",name:"Toilet Seat",description:"Add a toilet seat",icon:Vt}]},{titleKey:"bathtubOptions",items:[{nameKey:"freestandingTub",name:"Freestanding Tub",description:"Add a freestanding bathtub",icon:Vt},{nameKey:"vintageTub",name:"Vintage Tub",description:"Add a vintage bathtub",icon:Vt},{nameKey:"standardTub",name:"Standard Tub",description:"Add a standard bathtub",icon:Vt}]},{titleKey:"showerOptions",items:[{nameKey:"rainShower",name:"Rain Shower",description:"Add a shower with rain head system",icon:Vt},{nameKey:"showerEnclosure",name:"Shower Enclosure",description:"Add a shower enclosure",icon:Vt},{nameKey:"slidingShower",name:"Sliding Shower",description:"Add a shower enclosure with sliding doors",icon:Vt}]},{titleKey:"sinkOptions",items:[{nameKey:"pedestalSink",name:"Pedestal Sink",description:"Add a classic pedestal sink",icon:Vt},{nameKey:"stainlessSink",name:"Stainless Sink",description:"Add a stainless steel sink",icon:Vt},{nameKey:"undermountSink",name:"Undermount Sink",description:"Add a white ceramic undermount sink",icon:Vt}]},{titleKey:"jacuzziSpaOptions",items:[{nameKey:"builtInJacuzzi",name:"Built-in Jacuzzi",description:"Add a built-in jacuzzi with tiles",icon:Vt},{nameKey:"portableJacuzzi",name:"Portable Jacuzzi",description:"Add a standard portable jacuzzi",icon:Vt}]},{titleKey:"poolOptions",items:[{nameKey:"ingroundPool",name:"Inground Pool",description:"Add a custom concrete inground pool",icon:Vt},{nameKey:"abovegroundPool",name:"Above-ground Pool",description:"Add an above-ground pool with metal frame",icon:Vt}]}];return d.jsxs("div",{className:"min-h-screen text-text font-sans selection:bg-primary-500/30 overflow-x-hidden",dir:r?"rtl":"ltr",children:[d.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass-panel border-b-0 rounded-b-2xl mx-2 sm:mx-4 mt-2 px-4 sm:px-6 py-3 flex justify-between items-center animate-slide-up",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:[t("appName"),d.jsx("span",{className:`text-lg sm:text-xl align-super ${r?"mr-1":"ml-1"} bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light`,children:"AI"})]})]})}),d.jsxs("button",{onClick:Di,className:`hidden md:flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium shadow-lg transition-all duration-300 hover:-translate-y-0.5 ${ut>0?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 hover:bg-emerald-500/30 shadow-emerald-900/20":"bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-400 hover:to-secondary-500 text-white shadow-secondary-900/20"}`,children:[ut>0?d.jsx(di,{className:"w-5 h-5"}):d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradient)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]}),ut>0?d.jsxs("div",{className:"flex flex-col items-start leading-none",children:[d.jsx("span",{children:t("activeSubscription")}),d.jsxs("span",{className:"text-[10px] opacity-80",children:[Qe-En>0?Qe-En:0," ",t("credits")]})]}):t("professionalSubscription")]}),d.jsx("button",{onClick:()=>{h(0),o(!0),x0()},className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:t("tutorial"),children:d.jsx(cL,{className:"w-5 h-5"})}),d.jsx("button",{onClick:()=>lu(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:t("contactUs"),children:d.jsx(hL,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"md:hidden flex items-center bg-surface/50 backdrop-blur-md rounded-full border border-white/10 p-1 pl-3 pr-1 gap-1",children:d.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-3",children:[Un?d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ie==null?void 0:ie.email)||"U")[0].toUpperCase()})}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center",children:d.jsx(Xf,{className:"w-4 h-4 text-white"})}),d.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-secondary-500/20 to-secondary-600/20 border border-secondary-500/30",children:[d.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:Qe-En>0?Qe-En:0}),d.jsxs("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M5 16L3 5L8.5 7L12 4L15.5 7L21 5L19 16H5Z",fill:"url(#crownGradientMobile)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"}),d.jsx("path",{d:"M9 16L12 9L15 16H9Z",fill:"rgba(255,255,255,0.2)"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"crownGradientMobile",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.9"}),d.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"0.95"}),d.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.9"})]})})]})]})]})}),d.jsx("button",{onClick:()=>l(!0),className:"hidden md:flex items-center gap-3 px-3 sm:px-4 py-2 rounded-full bg-surface/50 hover:bg-surfaceHighlight/50 border border-white/5 hover:border-white/20 transition-all duration-300 group",children:Un?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-primary-500 to-secondary-500 p-0.5",children:d.jsx("div",{className:"w-full h-full rounded-full bg-surface flex items-center justify-center text-xs font-bold text-white",children:((ie==null?void 0:ie.email)||"U")[0].toUpperCase()})}),d.jsxs("div",{className:"text-right hidden sm:block",children:[!(ie!=null&&ie.isAnonymous)&&d.jsx("div",{className:"text-xs text-textMuted",children:t("loggedInAs")}),d.jsx("div",{className:"text-sm font-medium leading-none text-white",children:((ie==null?void 0:ie.email)||"").split("@")[0]||t("guest")})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-surfaceHighlight flex items-center justify-center group-hover:scale-110 transition-transform",children:d.jsx(Xf,{className:"w-4 h-4 text-white"})}),d.jsx("span",{className:"text-sm font-medium hidden sm:block text-white",children:t("login")})]})})]})]}),d.jsxs("main",{className:"pt-24 pb-24 lg:pb-6 px-2 sm:px-4 h-screen flex flex-col lg:flex-row gap-4 sm:gap-6 overflow-hidden",children:[d.jsx("aside",{className:"hidden lg:flex flex-col gap-4 w-28 glass-panel rounded-2xl p-3 items-center animate-slide-in-right relative",style:{animationDelay:"0.1s"},children:d.jsxs("div",{className:"flex flex-col gap-2.5 w-full",children:[d.jsxs("button",{ref:z,onClick:pu,disabled:le,className:"w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-blue-500/20 to-primary-500/20 hover:from-blue-500/30 hover:to-primary-500/30 border border-blue-400/30 hover:border-blue-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/10 hover:shadow-blue-500/20",title:t("uploadImage"),children:[d.jsx(LI,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-blue-400"}),d.jsx("span",{className:"text-[11px] text-blue-300 font-medium",children:t("uploadImage")})]}),d.jsxs("button",{ref:x,onClick:g,disabled:le,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group ${ct?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/50":"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/30 hover:border-green-400/50"} hover:from-green-500/30 hover:to-emerald-500/30 border rounded-xl transition-all duration-300 shadow-lg shadow-green-500/10 hover:shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed`,title:t("uploadItem"),children:[d.jsx(ml,{className:`w-6 h-6 group-hover:scale-110 transition-transform ${ct?"text-primary-400":"text-green-400"}`}),d.jsx("span",{className:`text-[11px] font-medium ${ct?"text-primary-300":"text-green-300"}`,children:t("uploadItem")})]}),d.jsx("div",{className:"h-px w-full bg-white/10 my-1"}),d.jsxs("button",{ref:A,onClick:()=>Jt(!lr),disabled:le,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 border border-purple-400/30 hover:border-purple-400/50 rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/10 hover:shadow-purple-500/20 ${lr?"ring-2 ring-purple-400/50":""} disabled:opacity-50 disabled:cursor-not-allowed`,title:t("redesign"),children:[d.jsx(ji,{className:"w-6 h-6 group-hover:scale-110 transition-transform text-purple-400"}),d.jsx("span",{className:"text-[11px] text-purple-300 font-medium",children:t("redesign")})]}),d.jsxs("button",{onClick:()=>gt(!Si),disabled:le,className:`w-full py-3 px-2 flex flex-col items-center justify-center gap-2 group bg-surfaceHighlight/40 border border-white/80 rounded-xl transition-all duration-300 ${Si?"bg-surfaceHighlight/60":"hover:bg-surfaceHighlight/50"} disabled:opacity-50 disabled:cursor-not-allowed`,title:t("moreTools"),children:[d.jsx(PI,{className:`w-5 h-5 group-hover:scale-110 transition-transform ${Si?"text-primary-300":"text-textMuted"}`}),d.jsx("span",{className:"text-[11px] text-textMuted font-medium",children:t("more")})]})]})}),Si&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"hidden lg:block fixed inset-0 z-40",onClick:()=>gt(!1)}),d.jsxs("div",{className:`hidden lg:block fixed top-1/2 -translate-y-1/2 w-48 bg-surface/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-white/10 z-50 animate-fade-in ${r?"right-32":"left-32"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm font-medium text-white",children:t("moreTools")}),d.jsx("button",{onClick:()=>gt(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:d.jsx(rn,{className:"w-4 h-4 text-textMuted"})})]}),d.jsx("div",{className:"flex flex-col gap-1",children:[{icon:Mi,label:t("colors"),action:()=>{se(!re),gt(!1)}},{icon:sy,label:t("furniture"),action:()=>{hn(!jn),gt(!1)}},{icon:ry,label:t("lighting"),action:()=>{dn(!$e),gt(!1)}},{icon:gn,label:t("doorsWindows"),action:()=>{Jr(!Rr),gt(!1)}},{icon:Vt,label:t("bathroomShort"),action:()=>{Zr(!Xr),gt(!1)}},{icon:$n,label:t("repairs"),action:()=>{Fn(!lt),gt(!1)}}].map((S,V)=>d.jsxs("button",{onClick:S.action,disabled:le,className:"flex items-center gap-3 w-full p-2 rounded-lg hover:bg-white/10 transition-colors text-right disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(S.icon,{className:"w-5 h-5 text-primary-400"}),d.jsx("span",{className:"text-sm text-white",children:S.label})]},V))}),d.jsx("div",{className:"mt-2 pt-2 border-t border-white/10",children:d.jsxs("button",{onClick:wu,className:`flex items-center justify-between w-full p-2 rounded-lg transition-all ${Tt?"bg-emerald-500/20 hover:bg-emerald-500/30":"hover:bg-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(NI,{className:`w-5 h-5 ${Tt?"text-emerald-400":"text-gray-500"}`}),d.jsx("span",{className:"text-sm text-white",children:t("aiDesigner")})]}),d.jsx("div",{className:`w-9 h-5 rounded-full p-0.5 transition-all ${Tt?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-transform ${Tt?"translate-x-4":"translate-x-0"}`})})]})})]})]}),d.jsxs("section",{className:"flex-1 relative flex flex-col min-h-0 glass-card p-1 animate-fade-in mb-36 lg:mb-0",children:[d.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden bg-black/20 group flex items-center justify-center",children:[dr&&he?d.jsx(vE,{beforeImage:he,afterImage:rt}):d.jsx("img",{src:rt,alt:"Canvas",className:`w-full h-full object-contain transition-all duration-500 ${le?"scale-[1.02] blur-sm brightness-50":"group-hover:scale-[1.01]"}`,onClick:pn,onLoad:c,style:{objectPosition:"center"}}),le&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none",children:[d.jsxs("div",{className:"w-20 h-20 relative",children:[d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/30 animate-ping"}),d.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-primary-400 border-r-secondary-400 border-b-primary-600 border-l-secondary-600 animate-spin"})]}),d.jsx("p",{className:"mt-4 text-lg font-medium text-white animate-pulse",children:t("processingNewDesign")})]}),d.jsx("button",{onClick:()=>N(!0),className:"lg:hidden absolute top-4 left-4 p-2 bg-black/50 text-white rounded-lg backdrop-blur-md hover:bg-black/70 transition-colors shadow-lg border border-white/10 z-10",title:t("history"),children:d.jsx(CI,{className:"w-5 h-5"})}),ys&&d.jsx("div",{className:"absolute bottom-4 right-4 z-20 animate-fade-in hidden lg:block",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-20 h-20 rounded-xl border-2 border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:ys,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:v,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsx("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"})]}),d.jsxs("div",{className:"hidden lg:flex items-center gap-4 p-4 bg-surface/30 border-t border-white/5 backdrop-blur-md",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("input",{type:"text",value:fn,onChange:S=>Rt(S.target.value),placeholder:t("promptPlaceholder"),disabled:le,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 pr-10 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:S=>S.key==="Enter"&&!le&&Oi()}),d.jsx(Hn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400 pointer-events-none"}),fn&&d.jsx("button",{onClick:()=>!le&&Rt(""),disabled:le,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:""})]}),d.jsxs("button",{ref:P,onClick:Oi,disabled:le||!fn.trim(),className:"btn-primary flex items-center gap-2 px-8 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{children:t("create")}),d.jsx(Hn,{className:"w-4 h-4"})]})]})]}),d.jsxs("aside",{className:"hidden lg:flex flex-col gap-4 w-80 glass-panel rounded-2xl p-4 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[d.jsx("h3",{className:"text-sm font-semibold text-textMuted uppercase tracking-wider mb-2",children:t("designHistory")}),d.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-custom pr-1 -mr-1 space-y-3 ${le?"opacity-50 pointer-events-none":""}`,children:[cr.length===0?d.jsxs("div",{className:"text-center py-10 opacity-50",children:[d.jsx(Hn,{className:"w-8 h-8 mx-auto mb-2"}),d.jsx("p",{className:"text-xs",children:t("noHistoryYet")})]}):cr.map(S=>d.jsxs("div",{onClick:()=>!le&&Ts(S),className:"group relative rounded-xl overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40",children:[d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-full h-32 object-cover transition-transform duration-700 group-hover:scale-110"}),d.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3",children:[d.jsx("p",{className:"text-xs text-white line-clamp-2 mb-1",children:S.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:Sn(S)})]})]},S.id)),Qa&&d.jsx("div",{className:"flex justify-center py-4",children:d.jsx(Yo,{className:"w-6 h-6 text-primary-400 animate-spin"})}),ur&&!Qa&&cr.length>0&&d.jsx("button",{onClick:vt,disabled:le,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]}),f&&d.jsxs("div",{className:"fixed bottom-36 lg:bottom-10 left-1/2 transform -translate-x-1/2 bg-emerald-600/90 text-white px-6 py-3 rounded-2xl shadow-lg z-[100] animate-fade-in-up flex items-center gap-2 backdrop-blur-md border border-white/10 text-center",children:[d.jsx(Hn,{className:"w-4 h-4 text-white flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:[d.jsx("span",{className:"md:inline block",children:"  ."}),d.jsx("span",{className:"hidden md:inline",children:" "}),d.jsx("span",{className:"md:inline block",children:t("promptUpdated")})]})]}),y&&d.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:()=>{_(!1),R(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},children:[d.jsx("div",{className:"absolute inset-0 bg-black/70"}),d.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-44 lg:bottom-32 w-[90%] max-w-[340px] bg-white text-gray-900 p-5 rounded-2xl shadow-2xl animate-bounce-in",dir:r?"rtl":"ltr",onClick:S=>S.stopPropagation(),children:[d.jsx("div",{className:"absolute bottom-[-8px] left-1/2 -translate-x-1/2 w-0 h-0 border-solid border-t-white border-r-transparent border-l-transparent border-b-transparent border-[8px]"}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("h3",{className:"font-bold text-lg text-primary-600",children:[" ",t("imageUploadedSuccess")]}),d.jsx("button",{onClick:()=>{_(!1),R(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:d.jsx(rn,{size:18})})]}),d.jsxs("p",{className:"text-sm text-gray-600 mb-4 leading-relaxed",children:[t("describeWhatToChange"),d.jsx("br",{}),d.jsx("br",{}),t("tipClickMore")]}),d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-primary-50 rounded-xl mb-4",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("span",{className:"text-sm text-primary-700 font-medium",children:t("writeRequestAndCreate")})]}),d.jsx("button",{onClick:()=>{_(!1),R(!0),localStorage.setItem("hasSeenFirstUploadTip","true")},className:"w-full bg-primary-600 hover:bg-primary-700 text-white py-2.5 rounded-xl text-sm font-medium transition-all hover:shadow-lg",children:t("gotItLetsStart")})]})]})]}),d.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-40 bg-surface/95 backdrop-blur-xl border-t border-white/10 pb-safe pt-3 rounded-t-2xl shadow-[0_-10px_40px_rgba(0,0,0,0.5)] transition-transform duration-300 transform translate-y-0",children:d.jsxs("div",{className:"px-4 space-y-3 pb-6",children:[d.jsxs("div",{className:"relative",children:[ys&&d.jsx("div",{className:"absolute -top-20 right-0 z-20 animate-fade-in lg:hidden",children:d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-16 h-16 rounded-lg border border-white/30 overflow-hidden shadow-lg bg-black/40 backdrop-blur-sm",children:d.jsx("img",{src:ys,alt:"Object",className:"w-full h-full object-cover"})}),d.jsx("button",{onClick:v,className:"absolute -top-2 -left-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-md hover:bg-red-600 transition-colors",title:" ",children:d.jsx("span",{className:"text-xs font-bold",children:""})})]})}),d.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-xl p-1 border border-white/5",children:[d.jsx("input",{type:"text",value:fn,onChange:S=>Rt(S.target.value),placeholder:t("whatToChange"),disabled:le,className:"flex-1 bg-transparent border-none text-white placeholder-gray-500 focus:ring-0 px-2 text-sm py-2 disabled:opacity-50 disabled:cursor-not-allowed",onKeyPress:S=>S.key==="Enter"&&!le&&Oi()}),fn&&d.jsx("button",{onClick:()=>!le&&Rt(""),disabled:le,className:"text-gray-500 hover:text-white p-1 rounded-full hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),d.jsx("button",{ref:O,onClick:Oi,disabled:!fn.trim()||le,className:"p-3 bg-primary-500 rounded-xl text-white shadow-lg shadow-primary-900/20 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(Hn,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"flex justify-center gap-4 py-1",children:[d.jsxs("button",{ref:B,onClick:pu,disabled:le,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500/30 to-primary-500/30 flex items-center justify-center border border-blue-400/40 active:scale-95 transition-transform shadow-lg shadow-blue-500/20",children:d.jsx(LI,{className:"w-6 h-6 text-blue-400"})}),d.jsx("span",{className:"text-[10px] text-blue-300 font-medium",children:t("uploadImage")})]}),d.jsxs("button",{ref:w,onClick:g,disabled:le,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:`w-14 h-14 rounded-2xl ${ct?"bg-gradient-to-br from-primary-500/30 to-secondary-500/30 border-primary-400/40":"bg-gradient-to-br from-green-500/30 to-emerald-500/30 border-green-400/40"} flex items-center justify-center border active:scale-95 transition-transform shadow-lg shadow-green-500/20`,children:d.jsx(ml,{className:`w-6 h-6 ${ct?"text-primary-400":"text-green-400"}`})}),d.jsx("span",{className:`text-[10px] font-medium ${ct?"text-primary-300":"text-green-300"}`,children:t("uploadItem")})]}),d.jsxs("button",{ref:C,onClick:()=>Jt(!0),disabled:le,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500/30 to-pink-500/30 flex items-center justify-center border border-purple-400/40 active:scale-95 transition-transform shadow-lg shadow-purple-500/20",children:d.jsx(ji,{className:"w-6 h-6 text-purple-400"})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:t("redesign")})]}),I&&!le&&Tt&&(ms.length>0||Ja)&&d.jsxs("div",{className:"relative flex flex-col items-center gap-1",children:[d.jsx("div",{className:"w-14 h-14 flex items-center justify-center",children:d.jsx(_E,{suggestions:ms,onSelect:yu,onClose:()=>ps([]),isMobile:!0,isThinking:Ja,initialShowSuggestions:gs})}),d.jsx("span",{className:"text-[10px] text-purple-300 font-medium",children:t("aiDesigner")})]}),d.jsxs("button",{onClick:()=>gt(!0),disabled:le,className:"flex flex-col items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("div",{className:"w-14 h-14 rounded-2xl bg-surfaceHighlight/40 flex items-center justify-center border border-white/80 active:scale-95 transition-transform",children:d.jsx(PI,{className:"w-6 h-6 text-textMuted"})}),d.jsx("span",{className:"text-[10px] text-textMuted font-medium",children:t("more")})]})]}),Si&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",onClick:()=>gt(!1),children:[d.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),d.jsxs("div",{className:"relative w-full max-w-md bg-surface/95 backdrop-blur-xl rounded-t-3xl p-6 pb-8 animate-slide-up border-t border-white/10",onClick:S=>S.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t("moreTools")}),d.jsx("button",{onClick:()=>gt(!1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:d.jsx(rn,{className:"w-5 h-5 text-white"})})]}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{icon:Mi,label:t("colors"),action:()=>{se(!0),gt(!1)}},{icon:sy,label:t("furniture"),action:()=>{hn(!0),gt(!1)}},{icon:ry,label:t("lighting"),action:()=>{dn(!0),gt(!1)}},{icon:gn,label:t("doorsWindows"),action:()=>{Jr(!0),gt(!1)}},{icon:Vt,label:t("bathroomShort"),action:()=>{Zr(!0),gt(!1)}},{icon:$n,label:t("repairs"),action:()=>{Fn(!0),gt(!1)}}].map((S,V)=>d.jsxs("button",{onClick:S.action,disabled:le,className:"flex flex-col items-center gap-2 p-4 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(S.icon,{className:"w-7 h-7 text-primary-400"}),d.jsx("span",{className:"text-xs text-white font-medium",children:S.label})]},V))}),d.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:d.jsxs("button",{onClick:wu,className:`w-full flex items-center justify-between p-4 rounded-2xl transition-all active:scale-[0.98] ${Tt?"bg-gradient-to-r from-emerald-500/20 to-green-500/20 border border-emerald-400/30":"bg-white/5 border border-white/10"}`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(NI,{className:`w-6 h-6 ${Tt?"text-emerald-400":"text-gray-500"}`}),d.jsxs("div",{className:"text-right",children:[d.jsx("span",{className:"text-sm text-white font-medium block",children:t("aiDesigner")}),d.jsx("span",{className:`text-xs ${Tt?"text-emerald-300":"text-gray-500"}`,children:t(Tt?"aiDesignerActiveClickToDisable":"aiDesignerInactiveClickToEnable")})]})]}),d.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-all ${Tt?"bg-emerald-500":"bg-gray-600"}`,dir:"ltr",children:d.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transition-transform ${Tt?"translate-x-5":"translate-x-0"}`})})]})})]})]}),d.jsx("div",{className:"hidden",children:cr.length>0&&d.jsxs("div",{className:`pt-2 border-t border-white/5 ${le?"opacity-50 pointer-events-none":""}`,children:[d.jsxs("div",{className:"text-[10px] text-textMuted mb-2",children:[t("history")," (",cr.length,")"]}),d.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4",onScroll:S=>{if(le)return;const{scrollLeft:V,scrollWidth:U,clientWidth:te}=S.target;V+te>=U-10&&ur&&!wt&&vt()},children:[cr.map(S=>d.jsx("div",{onClick:()=>!le&&Ts(S),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border border-white/10 relative hover:border-primary-500/50 transition-colors",children:d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-full h-full object-cover"})},S.id)),wt&&d.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 flex items-center justify-center",children:d.jsx(Yo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),ur&&!wt&&d.jsxs("button",{onClick:vt,disabled:le,className:"flex-shrink-0 w-16 h-16 rounded-lg bg-white/5 border border-white/10 border-dashed flex flex-col items-center justify-center text-textMuted hover:bg-white/10 hover:border-primary-500/30 transition-all active:scale-95 gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("span",{className:"text-[10px]",children:t("more")}),d.jsx("span",{className:"text-lg",children:""})]})]})]})})]})}),T&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-[59] lg:hidden",onClick:()=>N(!1)}),d.jsxs("div",{className:"fixed top-24 left-4 w-72 max-h-[60vh] bg-surface/95 backdrop-blur-md border border-white/10 shadow-2xl rounded-xl z-[60] flex flex-col lg:hidden animate-fade-in overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10 bg-surface/50",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(CI,{className:"w-5 h-5 text-primary-400"}),t("designHistory")]}),d.jsx("button",{onClick:()=>N(!1),className:"p-1 rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors",children:d.jsx("span",{className:"text-xl leading-none",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-custom space-y-2",children:[cr.length===0?d.jsxs("div",{className:"text-center py-8 opacity-50",children:[d.jsx(Hn,{className:"w-6 h-6 mx-auto mb-2"}),d.jsx("p",{className:"text-xs text-gray-400",children:t("noHistoryYet")})]}):cr.map(S=>d.jsxs("div",{onClick:()=>{le||(Ts(S),N(!1))},className:"group relative rounded-lg overflow-hidden border border-white/5 hover:border-primary-500/30 transition-all cursor-pointer bg-surface/40 flex items-center gap-3 p-2",children:[d.jsx("img",{src:S.thumbnailUrl||S.storageUrl||S.imageUrl,alt:"",className:"w-16 h-12 object-cover rounded-md"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-white line-clamp-1 mb-0.5",children:S.prompt||" "}),d.jsx("p",{className:"text-[10px] text-gray-400",children:Sn(S)})]})]},S.id)),Qa&&d.jsx("div",{className:"flex justify-center py-2",children:d.jsx(Yo,{className:"w-5 h-5 text-primary-400 animate-spin"})}),ur&&!Qa&&cr.length>0&&d.jsx("button",{onClick:vt,disabled:le,className:"w-full py-2 text-xs text-primary-300 hover:text-primary-200 hover:bg-white/5 rounded-lg transition-colors border border-white/5 disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})]}),Kc&&d.jsx("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-sm flex items-center justify-center z-[70] p-4 md:p-8 animate-fade-in",onClick:Es,children:d.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center gap-4",onClick:S=>S.stopPropagation(),children:[d.jsx("button",{onClick:Es,className:"absolute top-2 right-2 bg-black/40 hover:bg-black/60 text-white p-2 md:p-3 rounded-full backdrop-blur-md border border-white/10 z-50 transition-all hover:scale-110",children:d.jsx(rn,{className:"w-5 h-5 md:w-6 md:h-6"})}),d.jsxs("div",{ref:hu,className:`flex-1 w-full relative flex items-center justify-center overflow-hidden rounded-2xl bg-black/50 border border-white/5 ${I?"mb-20":""} ${Ce?"cursor-crosshair":""}`,onMouseDown:Ce?gu:void 0,onMouseMove:Ce?Ho:void 0,onMouseUp:Ce?dl:void 0,onMouseLeave:Ce?dl:void 0,onTouchStart:Ce?gu:void 0,onTouchMove:Ce?Ho:void 0,onTouchEnd:Ce?dl:void 0,children:[he&&dr&&!Ce?d.jsx(vE,{beforeImage:he,afterImage:rt}):d.jsx("img",{ref:du,src:rt,alt:"Full size view",className:`max-w-full max-h-full object-contain rounded-lg shadow-2xl ${Ce?"select-none pointer-events-none":""}`,draggable:!1,crossOrigin:"anonymous"}),Ce&&je&&d.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-500/20 pointer-events-none",style:{left:Math.min(je.startX,je.endX),top:Math.min(je.startY,je.endY),width:Math.abs(je.endX-je.startX),height:Math.abs(je.endY-je.startY)},children:d.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"  "})}),Ce&&!je&&d.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-30 pointer-events-none",children:d.jsxs("div",{className:"bg-blue-600/90 backdrop-blur-sm text-white px-4 py-2 rounded-full text-center shadow-lg flex items-center gap-2",children:[d.jsx(iy,{className:"w-4 h-4"}),d.jsx("p",{className:"text-sm font-medium",children:"    "})]})}),uu&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-20",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Yo,{className:"w-10 h-10 text-blue-400 animate-spin mx-auto mb-2"}),d.jsx("p",{className:"text-white",children:" -Google Lens..."})]})})]}),I?Qh&&!Yh&&he?d.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/90 backdrop-blur-xl border-t border-white/10 px-3 py-3 pb-7 z-50",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:_u,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 active:bg-white/10 transition-all",children:[d.jsx(Vi,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm font-medium",children:" "})]}),d.jsxs("button",{onClick:Li,className:"flex-1 flex items-center justify-center gap-1.5 py-2.5 px-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold active:from-emerald-600 active:to-teal-600 transition-all",children:[d.jsx(di,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm",children:t("loveItSave")})]})]})}):d.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-surface/95 backdrop-blur-xl border-t border-white/10 p-2 pb-8 z-50 grid grid-cols-5 gap-1",children:[d.jsxs("button",{onClick:()=>mn(!dr),disabled:!he||Ce,className:`flex flex-col items-center justify-center gap-1 p-2 rounded-xl transition-all ${dr?"text-primary-300 bg-primary-500/20":"text-gray-400 hover:text-white disabled:opacity-30"}`,children:[d.jsx(Dw,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("comparison")})]}),Ce?d.jsxs("button",{onClick:mr,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 bg-red-500/10 hover:bg-red-500/20 transition-all",children:[d.jsx(rn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("cancel")})]}):d.jsxs("button",{onClick:ul,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-blue-400 bg-blue-500/10 hover:bg-blue-500/20 transition-all",children:[d.jsx(iy,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("products")})]}),d.jsxs("button",{onClick:vu,disabled:Ce,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-green-400 bg-green-500/10 hover:bg-green-500/20 transition-all disabled:opacity-30",children:[d.jsx(DI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("whatsApp")})]}),d.jsxs("button",{onClick:cl,disabled:Ce,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-gray-300 hover:text-white hover:bg-white/10 transition-all disabled:opacity-30",children:[d.jsx(SI,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("download")})]}),d.jsxs("button",{onClick:Ce?mr:Es,className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl text-red-400 hover:bg-red-500/10 transition-all",children:[d.jsx(rn,{className:"w-5 h-5"}),d.jsx("span",{className:"text-[10px] font-medium",children:t("close")})]})]}):Qh&&!Yh&&he?d.jsx("div",{className:"w-full flex justify-center",children:d.jsx("div",{className:"bg-gradient-to-r from-surface/95 via-surface/90 to-surface/95 backdrop-blur-xl p-6 rounded-3xl border border-white/10 shadow-2xl",children:d.jsxs("div",{className:"flex items-center gap-8",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 shadow-lg shadow-amber-500/30",children:d.jsx(Hn,{className:"w-7 h-7 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white",children:t("whatDoYouThink")}),d.jsx("p",{className:"text-sm text-gray-400",children:t("dragSliderForComparison")})]})]}),d.jsx("div",{className:"w-px h-12 bg-white/10"}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:_u,className:"flex items-center gap-2 px-5 py-3 rounded-xl bg-white/5 border border-white/10 text-gray-300 hover:bg-white/10 hover:text-white hover:border-white/20 transition-all whitespace-nowrap group",children:[d.jsx(Vi,{className:"w-5 h-5 group-hover:-rotate-45 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("returnToOriginal")})]}),d.jsxs("button",{onClick:Li,className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-semibold hover:from-emerald-600 hover:to-teal-600 transition-all shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/40 whitespace-nowrap group",children:[d.jsx(di,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{children:t("loveItSaveDesign")})]})]})]})})}):d.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-r from-gray-900/90 via-gray-800/90 to-gray-900/90 backdrop-blur-xl p-4 px-8 rounded-2xl border border-white/15 shadow-2xl shadow-black/50",children:[d.jsxs("button",{onClick:()=>mn(!dr),disabled:!he||Ce,className:`group flex items-center gap-2.5 px-5 py-3.5 rounded-xl border transition-all duration-200 whitespace-nowrap ${dr?"bg-primary-500/25 text-primary-300 border-primary-500/40 shadow-lg shadow-primary-500/20":"bg-white/5 text-gray-300 border-white/10 hover:bg-white/10 hover:border-white/20 hover:text-white hover:scale-[1.02] disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100"}`,children:[d.jsx(Dw,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("comparison")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),Ce?d.jsxs("button",{onClick:mr,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl border border-red-500/30 hover:border-red-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/20",children:[d.jsx(rn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("cancelSearch")})]}):d.jsxs("button",{onClick:ul,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-blue-600/20 hover:bg-blue-600/35 text-blue-400 hover:text-blue-300 rounded-xl border border-blue-500/30 hover:border-blue-500/50 transition-all duration-200 whitespace-nowrap hover:scale-[1.02] hover:shadow-lg hover:shadow-blue-500/20",children:[d.jsx(iy,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("searchSimilarProducts")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:vu,disabled:Ce,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-green-600/20 hover:bg-green-600/35 text-green-400 hover:text-green-300 rounded-xl border border-green-500/30 hover:border-green-500/50 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-green-500/20",children:[d.jsx(DI,{className:"w-5 h-5 group-hover:scale-110 group-hover:-rotate-12 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("whatsApp")})]}),d.jsxs("button",{onClick:cl,disabled:Ce,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-white/10 hover:bg-white/20 text-white rounded-xl border border-white/15 hover:border-white/30 transition-all duration-200 whitespace-nowrap disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100 hover:scale-[1.02] hover:shadow-lg hover:shadow-white/10",children:[d.jsx(SI,{className:"w-5 h-5 group-hover:translate-y-0.5 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("download")})]}),d.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/20 to-transparent mx-2"}),d.jsxs("button",{onClick:Ce?mr:Es,className:"group flex items-center gap-2.5 px-5 py-3.5 bg-red-500/10 hover:bg-red-500/25 text-red-400 hover:text-red-300 rounded-xl border border-red-500/20 hover:border-red-500/40 transition-all duration-200 whitespace-nowrap hover:scale-[1.02]",children:[d.jsx(rn,{className:"w-5 h-5 group-hover:rotate-90 transition-transform"}),d.jsx("span",{className:"font-medium",children:t("close")})]})]})]})}),re&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",dir:r?"rtl":"ltr",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl h-[600px] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t("colorPalette")}),d.jsx("button",{onClick:()=>se(!1),className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:[d.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-2 scrollbar-hide",children:Object.keys(bu).map(S=>d.jsx("button",{onClick:()=>No(S),className:`px-4 py-2 rounded-full whitespace-nowrap text-sm transition-all border ${Za===S?"bg-primary-500 border-primary-400 text-white shadow-glow":"bg-white/5 border-white/5 text-textMuted hover:bg-white/10"}`,children:dN[S]},S))}),d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:(db=hN[Za])==null?void 0:db.map((S,V)=>d.jsxs("button",{onClick:()=>fN(S),className:"group flex flex-col gap-2 p-2 rounded-xl bg-white/5 hover:bg-white/10 transition-all border border-transparent hover:border-white/20 text-right",children:[d.jsx("div",{className:"w-full aspect-video rounded-lg shadow-inner relative overflow-hidden",children:d.jsx("div",{className:"absolute inset-0",style:{backgroundColor:S.hex}})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-medium text-white group-hover:text-primary-300",children:S.name}),d.jsx("div",{className:"text-[10px] text-gray-500",children:S.ral})]})]},V))})]})]})}),[{show:jn,close:()=>hn(!1),title:t("selectFurnitureType"),options:gN,onSelect:vN},{show:$e,close:()=>dn(!1),title:t("selectLightingType"),options:pN,onSelect:wN},{show:lr,close:()=>Jt(!1),title:t("selectDesignStyle"),options:yN,onSelect:_N}].map((S,V)=>S.show&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-2xl max-h-[70vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:S.title}),d.jsx("button",{onClick:S.close,className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-custom",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.options.map((U,te)=>d.jsxs("button",{onClick:()=>S.onSelect(U),className:`flex items-center p-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-primary-500/30 transition-all duration-200 text-right group ${U.thumbnail?"h-24":""}`,children:[U.thumbnail?d.jsx("div",{className:"ml-3 h-20 w-auto min-w-[80px] rounded-lg overflow-hidden flex-shrink-0 border border-white/10 group-hover:border-primary-500/50 transition-colors bg-black/20",children:d.jsx("img",{src:U.thumbnail,alt:U.name,className:"h-full w-auto object-contain"})}):d.jsx("div",{className:"ml-3 w-10 h-10 rounded-full bg-surfaceHighlight flex items-center justify-center text-xl group-hover:scale-110 transition-transform flex-shrink-0",children:""}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-sm font-medium text-white group-hover:text-primary-300 truncate",children:r?U.name:U.value}),d.jsx("div",{className:"text-xs text-gray-400 truncate",children:r?U.value:U.name})]})]},te))})})]})},V)),(Rr||Xr||lt)&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col bg-surface",children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t(Rr?"doorsWindows":Xr?"bathroomOptions":"selectRepairType")}),d.jsx("button",{onClick:()=>{Jr(!1),Zr(!1),Fn(!1)},className:"text-textMuted hover:text-white p-2",children:d.jsx("span",{className:"text-2xl",children:""})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-custom",children:[d.jsx("p",{className:"text-center text-gray-400 mb-6",children:t("pleaseSelectOption")}),d.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[Rr&&bN.map((S,V)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:t(S.titleKey)}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.items.map((U,te)=>d.jsxs("button",{onClick:()=>{Zt(U.description),Jr(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:r?t(U.nameKey):U.name}),d.jsx(U.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:U.description})]},te))})]},V)),Xr&&IN.map((S,V)=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-white font-semibold mb-3 text-right",children:t(S.titleKey)}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.items.map((U,te)=>d.jsxs("button",{onClick:()=>{Zt(U.description),Zr(!1)},className:"p-3 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex flex-col gap-1 group",children:[d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"font-medium",children:r?t(U.nameKey):U.name}),d.jsx(U.icon,{className:"w-4 h-4 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsx("span",{className:"text-xs text-gray-400 group-hover:text-gray-300",children:U.description})]},te))})]},V)),lt&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:()=>af("fix and repair everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("fixAndRepairEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>af("repair everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("repairEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>af("destroy and cause damage to everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("destroyAndCauseDamage")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]}),d.jsxs("button",{onClick:()=>af("mess up everything"),className:"p-4 bg-white/5 rounded-xl text-white hover:bg-white/10 text-right border border-white/5 flex items-center justify-between group",children:[d.jsx("span",{children:t("messUpEverything")}),d.jsx($n,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors"})]})]})]})]})]})}),Oo&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[70] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl overflow-hidden",children:[d.jsx("button",{onClick:()=>Pr(!1),className:"absolute top-4 left-4 text-gray-400 hover:text-white z-10",children:""}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500 to-secondary-500 blur-lg opacity-30 rounded-full"}),d.jsxs("h1",{className:"relative text-3xl font-bold bg-gradient-to-r from-primary-300 via-white to-secondary-300 bg-clip-text text-transparent tracking-tight",children:[t("appName"),d.jsx("span",{className:`text-xl align-super ${r?"mr-1":"ml-1"} bg-gradient-to-r from-secondary-400 to-secondary-300 bg-clip-text text-transparent font-light`,children:"AI"})]})]})}),d.jsxs("div",{className:"flex bg-black/40 rounded-xl p-1 mb-4 relative",children:[d.jsx("div",{className:`absolute inset-y-1 w-[calc(50%-4px)] bg-primary-600 shadow-lg rounded-lg transition-all duration-300 ease-in-out ${Xt==="signup"?"left-[50%]":"left-1"}`}),d.jsx("button",{onClick:()=>ki("signup"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${Xt==="signup"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:t("createNewAccount")}),d.jsx("button",{onClick:()=>ki("login"),className:`flex-1 py-2 text-sm font-medium rounded-lg relative z-10 transition-colors ${Xt==="login"?"text-white font-bold":"text-gray-400 hover:text-gray-200"}`,children:t("login")})]}),d.jsx("p",{className:"text-sm text-gray-400 min-h-[20px]",children:t(Xt==="login"?"welcomeBack":"joinUs")})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"email",placeholder:t("email"),value:ni,onChange:S=>Mo(S.target.value),className:"input-glass w-full"}),d.jsx("input",{type:"password",placeholder:t("password"),value:ii,onChange:S=>$h(S.target.value),className:"input-glass w-full"}),Xt==="signup"&&d.jsx("div",{className:"animate-slide-down",children:d.jsx("input",{type:"password",placeholder:t("confirmPassword"),value:Zc,onChange:S=>el(S.target.value),className:"input-glass w-full"})}),d.jsxs("div",{className:"text-xs text-gray-400 text-center mt-2 mb-4 px-2",children:[t("termsAgreement"),d.jsx("a",{href:t("termsOfServiceUrl"),target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:t("termsOfService")}),t("and"),d.jsx("a",{href:t("privacyPolicyUrl"),target:"_blank",rel:"noopener noreferrer",className:"text-primary-300 hover:text-primary-200 mx-1 underline",children:t("privacyPolicy")})]}),d.jsx("button",{onClick:j,disabled:Vo,className:"btn-primary w-full py-3 text-lg mt-4",children:Vo?d.jsx(Yo,{className:"w-6 h-6 animate-spin mx-auto"}):t(Xt==="login"?"loginButton":"createAccountButton")}),d.jsx("div",{className:"flex justify-center items-center mt-4 text-sm",children:Xt==="login"&&d.jsx("button",{onClick:q,className:"text-gray-400 hover:text-white text-xs",children:t("forgotPassword")})})]})]})}),xg&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:d.jsxs("div",{className:"glass-card max-w-sm w-full p-6 text-center bg-surface",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:t("logout")}),d.jsx("p",{className:"text-gray-400 mb-6",children:e==="he"?"    ?":"Are you sure you want to log out?"}),d.jsxs("div",{className:"flex gap-3 justify-center",children:[d.jsx("button",{onClick:()=>Xc(!1),className:"px-6 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",children:t("cancel")}),d.jsx("button",{onClick:Pt,className:"px-6 py-2 rounded-xl bg-red-500/80 hover:bg-red-600/80 text-white transition-colors",children:""})]})]})}),d.jsx("input",{ref:fr,type:"file",accept:"image/*",onChange:rf,className:"hidden"}),d.jsx("input",{ref:li,type:"file",accept:"image/*",onChange:m,className:"hidden"}),d.jsx(wE,{isOpen:ou,onClose:()=>Ci(!1),onShowPricing:Di,userSubscription:ut,currentUsage:En,limit:Qe}),d.jsx(T$,{isOpen:a,onClose:()=>l(!1),user:ie,userCredits:Qe,userUsage:En,userSubscription:ut,onLogin:()=>{ki("login"),Pr(!0)},onLogout:()=>Xc(!0),onSubscriptionClick:Di,onRedeemCoupon:_e,onCouponSuccess:S=>{Kh(S),Fo(!0)}}),d.jsx(x$,{isOpen:Eg,onClose:()=>oi(!1),subscriptionName:Bh[ut]}),Nr&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-emerald-900/90 to-teal-900/90 rounded-3xl overflow-hidden shadow-2xl border border-emerald-500/30 animate-scale-up",children:[d.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[d.jsx("div",{className:"absolute top-4 left-8 w-3 h-3 bg-yellow-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),d.jsx("div",{className:"absolute top-12 right-12 w-2 h-2 bg-emerald-300 rounded-full animate-bounce",style:{animationDelay:"0.3s"}}),d.jsx("div",{className:"absolute top-8 left-1/3 w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),d.jsx("div",{className:"absolute top-16 right-1/4 w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),d.jsxs("div",{className:"relative p-8 text-center",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center shadow-lg shadow-emerald-500/30 animate-pulse",children:d.jsx(Hn,{className:"w-12 h-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" ! "}),d.jsxs("div",{className:"my-6 py-4 px-6 rounded-2xl bg-white/10 border border-white/20",children:[d.jsx("div",{className:"text-5xl font-bold text-emerald-300 mb-1",children:rl}),d.jsx("div",{className:"text-emerald-100/80 text-lg",children:"  "})]}),d.jsx("p",{className:"text-emerald-100/70 mb-6",children:" ! "}),d.jsx("button",{onClick:()=>Fo(!1),className:"w-full py-4 rounded-2xl bg-white text-emerald-900 font-bold text-lg hover:bg-emerald-50 transition-colors shadow-lg",children:",  !"})]})]})}),Tg&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-400",children:d.jsx(di,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"  ! "}),d.jsxs("p",{className:"text-gray-300",children:["  ,   ",d.jsx("span",{className:"text-secondary-400 font-medium",children:" "}),"        ."]})]}),d.jsx("button",{onClick:()=>{su(!1),ki("signup"),Pr(!0)},className:"w-full py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20 hover:shadow-secondary-900/40 transition-all",children:" "}),d.jsx("button",{onClick:()=>su(!1),className:"w-full py-2 mt-3 text-gray-400 hover:text-white transition-colors text-sm",children:"   "})]})}),nu&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[90] flex items-center justify-center p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full max-w-md p-8 relative bg-surface border border-white/10 shadow-2xl flex flex-col rounded-2xl",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-secondary-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-secondary-400",children:d.jsx(Xf,{size:32})}),d.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:t("loginRequired")}),d.jsxs("p",{className:"text-gray-300",children:[t("loginRequiredMessage"),d.jsx("br",{}),t("wantToLogin")]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("button",{onClick:()=>{nl(!1),iu(null)},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-gray-300 transition-colors font-medium",children:t("notNowThanks")}),d.jsx("button",{onClick:()=>{nl(!1),Pr(!0)},className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-secondary-500 to-secondary-600 text-white font-bold shadow-lg shadow-secondary-900/20",children:" / "})]})]})}),qh&&d.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-[80] flex items-center justify-center p-0 md:p-4 animate-fade-in",children:d.jsxs("div",{className:"glass-card w-full h-full md:h-auto md:max-w-4xl md:max-h-[90vh] p-0 relative bg-surface border border-white/10 shadow-2xl overflow-hidden flex flex-col",dir:r?"rtl":"ltr",children:[d.jsxs("div",{className:"p-6 sm:p-8 text-center border-b border-white/5 bg-gradient-to-b from-white/5 to-transparent flex-shrink-0",children:[d.jsx("button",{onClick:()=>jo(!1),className:`absolute top-4 ${r?"left-4":"right-4"} text-gray-400 hover:text-white transition-colors p-2 z-10 bg-black/20 rounded-full md:bg-transparent`,children:d.jsx("span",{className:"text-2xl leading-none",children:""})}),d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2 mt-2 md:mt-0",children:t("professionalSubscription")}),d.jsx("div",{className:"inline-block px-4 py-1 rounded-full bg-gradient-to-r from-secondary-500 to-secondary-600 text-white text-sm font-medium shadow-glow mb-2 md:mb-4",children:t("specialLaunchPrices")}),d.jsx("p",{className:"text-gray-300 max-w-lg mx-auto text-sm md:text-base",children:t("upgradeYourDesignAbilities")})]}),d.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-6 pt-6 md:pt-8 scrollbar-custom",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 pb-safe",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/20 border border-white/10 rounded-2xl p-5 md:p-6 flex flex-col h-full",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t("starter")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-white",children:"19"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("imagesPerMonth",{count:50})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("accessToAllTools")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("emailSupport")})]})]}),d.jsx("button",{onClick:()=>il("https://pay.grow.link/f8f8414d5e65d2b80b262486d3ea3e3c-Mjc1ODQ5MA"),disabled:ut===1&&Qe===50,className:`w-full py-3 rounded-xl font-medium border block text-center ${ut===1&&Qe===50?"bg-emerald-600/20 border-emerald-500/50 text-emerald-400 cursor-not-allowed":"bg-white/5 text-white border-white/10 hover:bg-white/10 transition-all"}`,children:ut===1&&Qe===50?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(di,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]}),d.jsxs("div",{className:"relative md:-mt-4 md:-mb-4 z-10",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary-900/50 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/40 border border-secondary-500/50 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-secondary-900/20",children:[d.jsx("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-secondary-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:t("mostValue")}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t("value")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-secondary-400",children:"49"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:t("savePerImage")})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{className:"font-medium",children:t("imagesPerMonth",{count:200})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("earlyAccess")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("prioritySupport")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-white",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-secondary-500/20 flex items-center justify-center text-secondary-400",children:""}),d.jsx("span",{children:t("historyStorage")})]})]}),d.jsx("button",{onClick:()=>il("https://pay.grow.link/bf7845c990da58c287bf83a84a87e11c-MjcwMjgzNQ"),disabled:ut===2&&Qe===200,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ut===2&&Qe===200?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-secondary-900/30 hover:from-secondary-400 hover:to-secondary-500 transition-all"}`,children:ut===2&&Qe===200?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(di,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-amber-900/30 to-transparent rounded-2xl"}),d.jsxs("div",{className:"relative bg-surfaceHighlight/30 border border-amber-500/30 rounded-2xl p-5 md:p-6 flex flex-col h-full shadow-lg shadow-amber-900/10",children:[d.jsxs("div",{className:"absolute top-0 right-1/2 transform translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-amber-500 to-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap",children:[" ",t("forProfessionals")]}),d.jsxs("div",{className:"mb-4 mt-2",children:[d.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:t("professional")}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-yellow-400",children:"99"}),d.jsx("span",{className:"text-sm text-gray-400",children:t("perMonth")})]}),d.jsx("div",{className:"text-xs text-green-400 font-medium mt-1",children:t("save42PerImage")})]}),d.jsxs("div",{className:"space-y-3 mb-6 flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{className:"font-medium",children:t("imagesPerMonth",{count:450})})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("allAdvancedFeatures")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("premiumSupport")})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center text-amber-400",children:""}),d.jsx("span",{children:t("forIndustryProfessionals")})]})]}),d.jsx("button",{onClick:()=>il("https://pay.grow.link/31f92ee464c112077b30007432dc8226-Mjc1ODQ4NQ"),disabled:ut===3&&Qe===450,className:`w-full py-3 rounded-xl font-bold shadow-lg block text-center ${ut===3&&Qe===450?"bg-emerald-600/20 border-2 border-emerald-500/50 text-emerald-400 cursor-not-allowed shadow-emerald-900/30":"bg-gradient-to-r from-amber-500 to-yellow-500 text-black shadow-amber-900/30 hover:from-amber-400 hover:to-yellow-400 transition-all"}`,children:ut===3&&Qe===450?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(di,{className:"w-5 h-5"}),t("yourCurrentPlan")]}):t("selectPlan")})]})]})]})}),d.jsx("div",{className:"p-4 text-center text-xs text-gray-500 border-t border-white/5 bg-black/20",children:t("subscriptionDisclaimer")})]})}),!I&&!le&&Tt&&d.jsx(_E,{suggestions:ms,onSelect:yu,onClose:()=>ps([]),isMobile:!1,isThinking:Ja,initialShowSuggestions:gs}),s&&d.jsx(b$,{step:u,steps:kg,onNext:al,onSkip:tf,onComplete:Wo}),ef&&$o&&d.jsx(I$,{color:$o,onClose:()=>sl(!1),onApply:mN}),d.jsx(wE,{isOpen:ou,onClose:()=>Ci(!1),onShowPricing:Di,userSubscription:ut,currentUsage:En,limit:Qe}),Sg&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-primary-500/20 to-secondary-500/20 p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[d.jsx(RI,{className:"w-5 h-5 text-primary-400"}),t("contactUs")]}),d.jsx("button",{onClick:()=>{lu(!1),bs("")},className:"text-gray-400 hover:text-white p-1 hover:bg-white/10 rounded-full transition-all",children:d.jsx("span",{className:"text-2xl leading-none",children:""})})]}),d.jsx("p",{className:"text-gray-400 text-sm mt-2",children:t("contactSubtitle")})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[Zh&&d.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg text-sm",children:Zh}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("phone")}),d.jsx("input",{type:"tel",value:ai,onChange:S=>Lr(S.target.value),placeholder:"050-1234567",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("email")}),d.jsx("input",{type:"email",value:Ri,onChange:S=>cu(S.target.value),placeholder:"example@email.com",className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all",dir:"ltr"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:t("message")}),d.jsx("textarea",{value:zo,onChange:S=>Pi(S.target.value),placeholder:t("writeYourMessage"),rows:4,className:"w-full bg-surface/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all resize-none",dir:r?"rtl":"ltr"})]}),d.jsx("p",{className:"text-xs text-gray-500 text-center",children:t("enterPhoneOrEmail")}),d.jsx("button",{onClick:of,disabled:Jh,className:"w-full py-3 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 text-white font-bold shadow-lg hover:shadow-primary-500/30 transform hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:Jh?d.jsxs(d.Fragment,{children:[d.jsx(Yo,{className:"w-5 h-5 animate-spin"}),t("sending")]}):d.jsxs(d.Fragment,{children:[d.jsx(RI,{className:"w-5 h-5"}),t("sendMessage")]})})]})]})}),Ag&&d.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-surface via-surface to-surfaceHighlight rounded-2xl shadow-2xl w-full max-w-md border border-white/10 overflow-hidden animate-fade-in",children:[d.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-green-500/20 p-8 flex flex-col items-center",children:[d.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-tr from-emerald-400/30 to-green-500/30 flex items-center justify-center mb-4 border border-emerald-500/30 shadow-lg shadow-emerald-500/20",children:d.jsx(di,{className:"w-10 h-10 text-emerald-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-emerald-400 to-green-400",children:t("messageSentSuccess")})]}),d.jsxs("div",{className:"p-6 text-center",children:[d.jsxs("p",{className:"text-gray-300 mb-6 leading-relaxed",children:[e==="he"?"   .":"Your message has been received successfully.",d.jsx("br",{}),e==="he"?"   .":"We will get back to you as soon as possible."]}),d.jsx("button",{onClick:()=>hr(!1),className:"px-8 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold shadow-lg hover:shadow-emerald-500/30 transform hover:-translate-y-0.5 transition-all duration-200",children:t("close")})]})]})})]})}Uy.createRoot(document.getElementById("root")).render(d.jsx(GN.StrictMode,{children:d.jsx(_$,{children:d.jsx(E$,{})})}));export{Bj as $,D$ as A,Y$ as B,t8 as C,p5 as D,zd as E,Fs as F,zs as G,M$ as H,LV as I,u8 as J,T8 as K,ux as L,u4 as M,oj as N,rs as O,fa as P,r8 as Q,f8 as R,zw as S,l5 as T,q$ as U,Pj as V,p8 as W,_8 as X,x8 as Y,d8 as Z,Wj as _,wh as a,Ea as a$,V$ as a0,IV as a1,Nj as a2,g8 as a3,v8 as a4,I8 as a5,VV as a6,l8 as a7,Q$ as a8,U$ as a9,xi as aA,Ve as aB,er as aC,Wa as aD,Ha as aE,Fe as aF,$ as aG,Ti as aH,MU as aI,o6 as aJ,Wt as aK,Hc as aL,Dh as aM,ym as aN,bg as aO,Lh as aP,vg as aQ,J_ as aR,tr as aS,_g as aT,Ys as aU,De as aV,s6 as aW,qr as aX,r6 as aY,Yv as aZ,ht as a_,G$ as aa,n8 as ab,Rj as ac,Mv as ad,F$ as ae,H$ as af,K$ as ag,m8 as ah,w8 as ai,b8 as aj,a8 as ak,j$ as al,o8 as am,Z$ as an,e8 as ao,y8 as ap,X$ as aq,s8 as ar,i8 as as,J$ as at,$$ as au,XR as av,th as aw,FU as ax,Yn as ay,N8 as az,yh as b,gm as b$,K as b0,A8 as b1,y5 as b2,tt as b3,PW as b4,me as b5,S8 as b6,RW as b7,CW as b8,C8 as b9,q8 as bA,G8 as bB,at as bC,Mh as bD,KU as bE,uW as bF,QT as bG,tW as bH,nW as bI,g0 as bJ,rW as bK,iW as bL,VU as bM,EW as bN,bW as bO,D8 as bP,Py as bQ,W8 as bR,qT as bS,dW as bT,fW as bU,hW as bV,jU as bW,ec as bX,lW as bY,cW as bZ,B8 as b_,kr as ba,A5 as bb,aW as bc,Q8 as bd,J8 as be,$8 as bf,_W as bg,vW as bh,Y8 as bi,M8 as bj,Ph as bk,R8 as bl,OU as bm,GU as bn,kW as bo,oW as bp,yW as bq,F8 as br,AW as bs,br as bt,z8 as bu,X8 as bv,L8 as bw,O8 as bx,j8 as by,SW as bz,O$ as c,mW as c0,pW as c1,t6 as c2,mm as c3,jR as c4,Z8 as c5,P8 as c6,gW as c7,wW as c8,Oh as c9,TW as ca,E8 as cb,eW as cc,HU as cd,H8 as ce,K8 as cf,U8 as cg,sW as ch,IW as ci,V8 as cj,pm as ck,xW as cl,Ua as d,C$ as e,Us as f,tm as g,N$ as h,Jl as i,a5 as j,R$ as k,P$ as l,qv as m,Bs as n,B$ as o,$j as p,h8 as q,Jj as r,o5 as s,ik as t,Lj as u,z$ as v,lj as w,W$ as x,L$ as y,c8 as z};
